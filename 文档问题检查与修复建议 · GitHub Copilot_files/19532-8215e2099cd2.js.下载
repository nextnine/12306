"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([[19532],{295:(e,t,n)=>{n.d(t,{h:()=>d});var i=n(21728),a=n(97665),s=n(94747),r=n(99519),l=n(80770),o=n(99993);function d(){let e,t,n,d=(0,i.c)(7),c=(0,a.jE)(),u=(0,r.EY)();return d[0]!==u?(e=async e=>await u.deleteLoop(e),d[0]=u,d[1]=e):e=d[1],d[2]!==c?(t=(e,t)=>{e.success&&(c.removeQueries({queryKey:[o.M1,t]}),c.invalidateQueries({queryKey:[l.n]}))},d[2]=c,d[3]=t):t=d[3],d[4]!==e||d[5]!==t?(n={mutationFn:e,onSuccess:t},d[4]=e,d[5]=t,d[6]=n):n=d[6],(0,s.n)(n)}},1747:(e,t,n)=>{n.d(t,{BH:()=>A,xx:()=>F,tZ:()=>B,wI:()=>M});var i=n(74848),a=n(21728),s=n(2635),r=n(35247),l=n(42312),o=n(33535),d=n(6551),c=n(40104),u=n(50899),m=n(96540),p=n(93380),h=n(79064),f=n(7812),g=n(33592),y=n(25641),x=n(82075),v=n(46996);let b=["thread-scoped-file","draft-issue","draft-update-issue"],_=e=>!!e.isUserEdited,j=(e,t)=>e.size===t.size&&Array.from(e).every(([e,n])=>(0,v.A)(t.get(e),n)),w=(e,t)=>!j(new Map(e.filter(e=>b.includes(e.type)).map(e=>[(0,y.Vb)(e),e])),new Map(t.filter(e=>b.includes(e.type)).map(e=>[(0,y.Vb)(e),e]))),N=(e,t)=>!j(new Map(Array.from(e).filter(([,e])=>_(e))),new Map(Array.from(t).filter(([,e])=>_(e))));function C(e){return[e.id,e]}function S(e){return null!=e}function I(e){return[(0,y.Vb)(e),e]}function k(e){return null!=e}function T(e){return(0,f.PO)(e)}let E=(0,m.createContext)(void 0),R=new Map,L=[];function A(e){let t,n,c,v,j,A,F,B,M,V,$,U,q,W,H,G=(0,a.c)(55),{children:z}=e,K=(0,o.AI)(!1),Q=(0,o.AI)(!1),Z=(0,l.U)(),J=(0,m.useRef)(null),[Y,X]=(0,m.useState)(R),[ee,et]=(0,m.useState)(L),[en,ei]=(0,m.useState)(L),[ea,es]=(0,m.useState)(void 0),[er,el,eo]=(0,p.B)(!1),ed=(0,d.S)((0,s.pn)(P)),ec=(0,s.pn)(D);G[0]!==K||G[1]!==ed||G[2]!==ec?(t=()=>{ed&&ed!==ec&&(X(R),et(L),es(void 0),null===ec&&K.setValue(!1))},n=[ec,ed,K],G[0]=K,G[1]=ed,G[2]=ec,G[3]=t,G[4]=n):(t=G[3],n=G[4]),(0,m.useEffect)(t,n),G[5]===Symbol.for("react.memo_cache_sentinel")?(c=(e,t)=>{let n=void 0===t||t;et(t=>{if(t.includes(e))return t;let n=(0,f.oy)(e),i=t.findIndex(e=>(0,f.oy)(e)===n),a=[...t];return -1===i?a.push(e):a.splice(i,1,e),a}),es(t=>n||void 0===t||(0,f.oy)(t)===(0,f.oy)(e)?e:t)},G[5]=c):c=G[5];let eu=c;G[6]===Symbol.for("react.memo_cache_sentinel")?(v=e=>{X(t=>{let n=new Map(t);return n.set(e.id,e),n})},G[6]=v):v=G[6];let em=v;G[7]!==ee||G[8]!==ea?(j=e=>{let t=ee.indexOf(e);if(-1===t)return;let n=ee.toSpliced(t,1);ea===e&&es(n[t-1]??n[0]),et(n)},G[7]=ee,G[8]=ea,G[9]=j):j=G[9];let ep=(0,u.K)(j);G[10]!==ee||G[11]!==ea?(A=e=>{if(e){let t=ee;for(let n of e){let e=t.indexOf(n);-1!==e&&(t=t.toSpliced(e,1),ea===n&&es(t[e-1]??t[0]))}et(t)}else et(L),es(void 0)},G[10]=ee,G[11]=ea,G[12]=A):A=G[12];let eh=(0,u.K)(A);if(G[13]!==Y){for(let[e,t]of(F=new Map,Y)){let n=(0,f.oy)(e),i=F.get(n)??[];i.push(t.id),F.set(n,i)}for(let e of F.values())e.sort((e,t)=>{let n=Y.get(e),i=Y.get(t);return"timestamp"in n&&"timestamp"in i?n.timestamp.valueOf()-i.timestamp.valueOf():0});G[13]=Y,G[14]=F}else F=G[14];let ef=F;G[15]!==ep||G[16]!==ee||G[17]!==ef?(B=e=>{if(e){for(let t of e)if(X(e=>{let n=new Map(e);return n.delete(t)?n:e}),ee.includes(t)){let e=(0,f.oy)(t),n=ef.get(e),i=n?.indexOf(t)??-1,a=n?.[i-1];a?eu(a,!1):ep(t)}}else X(R),et(L),es(void 0)},G[15]=ep,G[16]=ee,G[17]=ef,G[18]=B):B=G[18];let eg=(0,u.K)(B);G[19]!==K.value||G[20]!==ee?(M=()=>K.value?ee:L,G[19]=K.value,G[20]=ee,G[21]=M):M=G[21];let ey=(0,u.K)(M);G[22]!==Z||G[23]!==K?(V=e=>{K.setValue(!0),queueMicrotask(()=>{Z.current?.focus()}),void 0!==e&&(J.current=e)},G[22]=Z,G[23]=K,G[24]=V):V=G[24];let ex=V;G[25]!==K||G[26]!==Q?($=()=>{K.setValue(!1),Q.setValue(!1)},G[25]=K,G[26]=Q,G[27]=$):$=G[27];let ev=$;G[28]!==Q?(U=()=>Q.setValue(!0),G[28]=Q,G[29]=U):U=G[29];let eb=U;G[30]!==Q?(q=()=>Q.setValue(!1),G[30]=Q,G[31]=q):q=G[31];let e_=q;G[32]!==ep||G[33]!==eh||G[34]!==ev||G[35]!==e_||G[36]!==Z||G[37]!==eo||G[38]!==el||G[39]!==ey||G[40]!==K||G[41]!==Q||G[42]!==Y||G[43]!==ee||G[44]!==en||G[45]!==ex||G[46]!==eb||G[47]!==eg||G[48]!==ea||G[49]!==er||G[50]!==ef?(W={items:Y,versionedItems:ef,contentPreviewRef:Z,isContentPreviewOpen:K,isResourcePanelOpen:Q,getOpenItems:ey,allOpenItems:ee,openItemsBeforeSubthreadChange:en,selectedItem:ea,updateItem:em,setOpenItemsBeforeSubthreadChange:ei,openItem:eu,closeItem:ep,closeItems:eh,openPreviewPane:ex,closePreviewPane:ev,openResourcePanel:eb,closeResourcePanel:e_,removeItems:eg,showLoadingState:er,enableLoadingState:el,disableLoadingState:eo,returnFocusElementRef:J},G[32]=ep,G[33]=eh,G[34]=ev,G[35]=e_,G[36]=Z,G[37]=eo,G[38]=el,G[39]=ey,G[40]=K,G[41]=Q,G[42]=Y,G[43]=ee,G[44]=en,G[45]=ex,G[46]=eb,G[47]=eg,G[48]=ea,G[49]=er,G[50]=ef,G[51]=W):W=G[51];let ej=W;return!function(e){let t,n,i=(0,a.c)(5),{updateItem:s,openItem:l,openPreviewPane:o}=e;i[0]!==l||i[1]!==o||i[2]!==s?(t=()=>{if(!r.W.copilotRedirectDiffViewToImmersive)return;let e=h.Jt.getCopilotDiffReferences();if(e&&0!==e.length){for(let t of e){let e=(0,f.g)(t);s(e),l(e.id)}o(),h.Jt.removeCopilotDiffReferences()}},n=[s,l,o],i[0]=l,i[1]=o,i[2]=s,i[3]=t,i[4]=n):(t=i[3],n=i[4]),(0,m.useEffect)(t,n)}(ej),O(ej),!function(e){let t,n,i,l=(0,a.c)(10),{items:o,removeItems:d,updateItem:c}=e,{currentReferences:u,messages:p,selectedThreadID:h}=(0,s.Pk)(),v=(0,g.b)(),j=(0,m.useRef)(o),E=(0,m.useRef)(u);l[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,x.A)("sessionStorage"),l[0]=t):t=l[0];let R=t;l[1]!==u||l[2]!==o||l[3]!==v||l[4]!==p.length||l[5]!==d||l[6]!==h||l[7]!==c?(n=()=>{let e=N(j.current,o);j.current=o;let t=w(E.current,u);if(E.current=u,e){let e=new Map(Array.from(o.values()).filter(_).map(T).filter(k).map(I)),t=new Set;for(let n of u)if(b.includes(n.type)){let i=(0,y.Vb)(n);t.add(i);let a=e.get(i);a?w([a],[n])&&v.addReference(a,"content-preview"):v.removeReference(n)}for(let[n,i]of e)t.has(n)||v.addReference(i,"content-preview")}else if(t){let e=new Map(u.map(e=>(0,f.oR)({ref:e,messageIndex:p.length})).filter(S).map(C)),t=new Set;for(let[n,i]of o)if(_(i)){t.add(n);let a=e.get(n);null!=a?N(new Map([[a.id,a]]),new Map([[i.id,i]]))&&c(a):(d([n]),r.W.copilotPersistEditedDraftIssues&&R.removeItem(`edited-${h}-${n}`))}for(let[n,i]of e)t.has(n)||c(i)}},i=[o,v,u,p.length,d,c,R,h],l[1]=u,l[2]=o,l[3]=v,l[4]=p.length,l[5]=d,l[6]=h,l[7]=c,l[8]=n,l[9]=i):(n=l[8],i=l[9]),(0,m.useEffect)(n,i)}(ej),G[52]!==z||G[53]!==ej?(H=(0,i.jsx)(E.Provider,{value:ej,children:z}),G[52]=z,G[53]=ej,G[54]=H):H=G[54],H}function D(e){return e.selectedThreadID}function P(e){return e.selectedThreadID}let O=e=>{let t,n,i,l=(0,a.c)(8),{updateItem:o}=e,{messagesLoading:d,selectedThreadID:u}=(0,s.Pk)(),p=`edited-${u}`;if(r.W.copilotPersistEditedDraftIssues){let e;l[0]!==p?(e=(0,c.MV)(p),l[0]=p,l[1]=e):e=l[1],t=e}else{let e;l[2]===Symbol.for("react.memo_cache_sentinel")?(e=[],l[2]=e):e=l[2],t=e}let h=t;l[3]!==h||l[4]!==d.state||l[5]!==o?(n=()=>{if(h&&"loaded"===d.state)for(let e of h)o(e)},i=[h,o,d.state],l[3]=h,l[4]=d.state,l[5]=o,l[6]=n,l[7]=i):(n=l[6],i=l[7]),(0,m.useEffect)(n,i)};function F(){let e=(0,m.useContext)(E);if(!e)throw Error("useContentPreview must be used within ContentPreviewContextProvider");return e}function B(){let e=(0,m.useContext)(E);if(!e)throw Error("useContentPreviewOpen must be used within ContentPreviewContextProvider");return(0,o.HN)(e.isContentPreviewOpen)}function M(){let e=(0,m.useContext)(E);if(!e)throw Error("useResourcePanelOpen must be used within ContentPreviewContextProvider");return(0,o.HN)(e.isResourcePanelOpen)}try{E.displayName||(E.displayName="ContentPreviewContext")}catch{}try{A.displayName||(A.displayName="ContentPreviewProvider")}catch{}},5533:(e,t,n)=>{function i(e){return!!e?.startedAt&&!e?.completedAt}function a(e){return!!e&&Object.values(e.nodes).some(i)}n.d(t,{f:()=>i,y:()=>a})},6551:(e,t,n)=>{n.d(t,{S:()=>a});var i=n(96540);function a(e){let t=(0,i.useRef)(void 0);return(0,i.useEffect)(()=>{t.current=e},[e]),t.current}},7026:(e,t,n)=>{n.d(t,{M:()=>a});var i=n(96540);function a(e,t,n){let a=(0,i.useRef)(n);return(0,i.useMemo)(()=>{let n=t(e);return null!=n&&(a.current=n),a.current},[e,t])}},7812:(e,t,n)=>{n.d(t,{Bx:()=>g,LU:()=>d,PO:()=>x,SI:()=>h,SX:()=>b,by:()=>m,g:()=>p,oR:()=>v,oy:()=>o,wN:()=>f,wt:()=>u,yA:()=>y});var i=n(1631),a=n(25641),s=n(51213),r=n(35247),l=n(72994);function o(e){return e.split("#")[0]}function d(e,t){let n=o(e),i=t.get(n)??[],a=i.indexOf(e);return i.length>1&&-1!==a?a+1:null}function c(e,t){return`file:${e.name}#${t}`}function u(e,t,n){switch(e.type){case"thread-scoped-file":return d(c(e,t),n)??void 0;case"draft-issue":case"draft-update-issue":return d(v({ref:e,messageIndex:t}).id,n)??void 0}}function m(e,t,n){return{type:"file",id:`file:${(0,a.Vb)(e)}#0`,reference:e,messageId:t??s.Wp,name:e.path,language:e.languageName??"",value:"",isStreaming:!0,isUserEdited:!1,timestamp:n?new Date(n):new Date}}function p(e,t,n){let i=e=>({type:"file",id:`file:empty:${e}#${Date.now()}`,messageId:t??s.Wp,name:e,language:"",value:"",isStreaming:!1,isUserEdited:!1,timestamp:n?new Date(n):new Date}),r=e.baseFile?m(e.baseFile):i(e.headFile?.path||""),l=e.headFile?m(e.headFile):i(e.baseFile?.path||""),o=e.headFile||e.baseFile,d=o?.path||"";return{type:"file-diff",id:`file-diff:${(0,a.Vb)(e)}#0`,baseFile:r,headFile:l,name:d,language:(e.headFile?l:r).language,isStreaming:!0,isUserEdited:!1,timestamp:n?new Date(n):new Date,messageId:t??s.Wp,reference:e}}function h(e,t){return{type:"issue",id:`issue:${e.number}`,messageId:t??s.Wp,name:e.title??"",number:e.number,owner:e.repository.owner,repo:e.repository.name,href:e.url}}function f(e,t){let{repoOwner:n,repoName:i,id:a}=e;return{type:"job-result",id:`job-result:${n}-${i}-${a}`,messageId:t??s.Wp,name:`Job #${a} in ${n}/${i}`,jobId:Number(a),workflowId:e.workflow?.id,repoOwner:n,repoName:i}}function g(e,t=s.Wp){return{type:"plugin-content",id:`plugin-content:${e.type}:${(0,a.Vb)(e)}`,name:(0,a.z$)(e),icon:(0,i.a_)(e),messageId:t,reference:e}}function y(e){return{type:e.type,tag:e.tag,parentTag:e.parentTag,repository:e.repository,number:e.number,title:e.name,state:e.state,url:e.href,blockedByTags:e.blockedByTags??[],isBlockingTags:e.isBlockingTags??[]}}function x(e){switch(e.type){case"file":return{type:"thread-scoped-file",name:e.name,language:e.language,text:e.value};case"new-issue":case"update-issue":return{type:"update-issue"===e.type?"draft-update-issue":"draft-issue",tag:e.tag,parentTag:e.parentTag,title:e.name,description:e.body,bodyVersion:e.bodyVersion,repository:e.repository,template:e.template,assignees:e.assignees,labels:e.labels,issueType:e.issueType,projects:(0,l.t)(e.projects),rawProjectsInput:e.rawProjectsInput,milestone:e.milestone,templateFormValuesById:e.defaultValuesById,issueNumber:e.issueNumber,blockedByTags:e.blockedByTags,isBlockingTags:e.isBlockingTags};default:return null}}function v({ref:e,messageIndex:t,messageId:n,timestamp:i}){switch(e.type){case"thread-scoped-file":return function(e,t,n=s.Wp,i){return{type:"file",id:c(e,t),reference:e,messageId:n,name:e.name,language:e.language,value:e.text,timestamp:i?new Date(i):new Date,isStreaming:!1,isUserEdited:n===s.Wp}}(e,t,n,i);case"draft-issue":case"draft-update-issue":return function({ref:e,messageId:t=s.Wp,messageIndex:n}){let i=e.issueNumber&&r.W.draftUpdateIssue?"update-issue":"new-issue";return{type:i,id:`${i}:${e.tag}#${n}`,tag:e.tag,parentTag:e.parentTag,repository:e.repository,name:e.title,body:e.description,bodyVersion:e.bodyVersion,assignees:e.assignees,labels:e.labels,issueType:e.issueType,projects:(0,l.c)(e.projects),rawProjectsInput:e.rawProjectsInput,milestone:e.milestone,isUserEdited:t===s.Wp,messageId:t,isStreaming:!1,template:e.template,defaultValuesById:e.templateFormValuesById??{},issueNumber:e.issueNumber,blockedByTags:e.blockedByTags??[],isBlockingTags:e.isBlockingTags??[]}}({ref:e,messageIndex:t,messageId:n});default:return null}}function b(e,t,n){let i=o(e.id),a=n.get(i),s=a?.findIndex(t=>t===e.id)??-1,r=a?.[s-1];return r&&t.get(r)}},8108:(e,t,n)=>{n.d(t,{_g:()=>f,bB:()=>u,e9:()=>p,xJ:()=>y});var i=n(21728),a=n(97665),s=n(94747),r=n(99519),l=n(93161),o=n(5533),d=n(48057);function c(e){let t,n,l,o,c=(0,i.c)(13),u=(0,a.jE)(),m=(0,r.EY)();return c[0]!==u||c[1]!==m||c[2]!==e?(t=async t=>{let{loopID:n,version:i,nodeID:a}=t,s=(0,d.wu)(n,i),r=u.getQueryData(s);if(!r)throw Error("No current execution");let l=e(r.nodes[a],t);return await m.updateNodeExecution(n,i,r.id,a,l)},c[0]=u,c[1]=m,c[2]=e,c[3]=t):t=c[3],c[4]!==u||c[5]!==e?(n=async t=>{let{loopID:n,version:i,nodeID:a}=t,s=(0,d.wu)(n,i),r=u.getQueryData(s);if(r){let n=e(r.nodes[a],t),i={...r,nodes:{...r.nodes,[a]:n}};u.setQueryData(s,i)}await u.cancelQueries({queryKey:s},{revert:!1})},c[4]=u,c[5]=e,c[6]=n):n=c[6],c[7]!==u?(l=(e,t)=>{if(!e.success)return;let{loopID:n,version:i,nodeID:a}=t,s=(0,d.wu)(n,i);u.setQueryData(s,t=>{if(!t)return t;let n=t.nodes[a],i=e.data;return n?.completedAt!==void 0&&n.completedAt>0&&!i.completedAt?t:{...t,nodes:{...t.nodes,[a]:i}}})},c[7]=u,c[8]=l):l=c[8],c[9]!==t||c[10]!==n||c[11]!==l?(o={mutationFn:t,onMutate:n,onSuccess:l},c[9]=t,c[10]=n,c[11]=l,c[12]=o):o=c[12],(0,s.n)(o)}function u(){return c(m)}function m(e,t){let{value:n}=t;return{...e??l.D,value:n,completedAt:Date.now()}}function p(){return c(h)}function h(e,t){let{error:n}=t;return{...e??l.D,error:n,value:null,completedAt:Date.now()}}function f(){return c(g)}function g(e){return{...e??l.D,startedAt:Date.now(),completedAt:void 0}}function y(){var e;let t,n,l,o,c,u;return e=x,o=(0,i.c)(10),c=(0,a.jE)(),u=(0,r.EY)(),o[0]!==c||o[1]!==u||o[2]!==e?(t=async t=>{let{loopID:n,version:i}=t,a=(0,d.wu)(n,i),s=c.getQueryData(a);if(!s)throw Error("No current execution");let r=e(s,t);return await u.updateExecution(n,i,s.id,r)},o[0]=c,o[1]=u,o[2]=e,o[3]=t):t=o[3],o[4]!==c||o[5]!==e?(n=async t=>{let{loopID:n,version:i}=t,a=(0,d.wu)(n,i),s=c.getQueryData(a);if(s){let n=e(s,t);c.setQueryData(a,n)}await c.cancelQueries({queryKey:a},{revert:!1})},o[4]=c,o[5]=e,o[6]=n):n=o[6],o[7]!==t||o[8]!==n?(l={mutationFn:t,onMutate:n},o[7]=t,o[8]=n,o[9]=l):l=o[9],(0,s.n)(l)}function x(e){return{...e,nodes:Object.fromEntries(Object.entries(e.nodes).map(v))}}function v(e){let[t,n]=e;return[t,(0,o.f)(n)?{...n,completedAt:Date.now()}:n]}},11128:(e,t,n)=>{n.d(t,{n:()=>o});var i=n(74848),a=n(21728),s=n(38621),r=n(21373),l=n(22053);function o(e){let t,n,o,c,u,m,p,h=(0,a.c)(17),{additionalActions:f,errors:g,onFixErrorClick:y,title:x}=e,{isReadonly:v}=(0,l.a)();return h[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(s.AlertIcon,{className:"ErrorDisplay-module__errorIcon--SP3WM",size:"medium"}),h[0]=t):t=h[0],h[1]!==x?(n=(0,i.jsx)("h2",{className:"ErrorDisplay-module__errorTitle--P8tnN",children:x}),h[1]=x,h[2]=n):n=h[2],h[3]!==g?(o=g.map(d),h[3]=g,h[4]=o):o=h[4],h[5]!==n||h[6]!==o?(c=(0,i.jsxs)("div",{className:"ErrorDisplay-module__errorNotice--Ey4vJ",children:[n,o]}),h[5]=n,h[6]=o,h[7]=c):c=h[7],h[8]!==v||h[9]!==y?(u=!v&&y&&(0,i.jsx)(r.Q,{leadingVisual:s.BeakerIcon,onClick:y,children:"Try to fix it"}),h[8]=v,h[9]=y,h[10]=u):u=h[10],h[11]!==f||h[12]!==u?(m=(0,i.jsxs)("div",{className:"ErrorDisplay-module__errorActions--NW0lt",children:[f,u]}),h[11]=f,h[12]=u,h[13]=m):m=h[13],h[14]!==c||h[15]!==m?(p=(0,i.jsxs)("div",{className:"ErrorDisplay-module__errorContainer--r2xoZ",children:[t,c,m]}),h[14]=c,h[15]=m,h[16]=p):p=h[16],p}function d(e){return(0,i.jsx)("p",{className:"ErrorDisplay-module__errorText--c4NUQ",children:e},e)}try{o.displayName||(o.displayName="ErrorDisplay")}catch{}},11607:(e,t,n)=>{n.d(t,{$:()=>d});var i=n(74848),a=n(21728),s=n(34164),r=n(96540),l=n(61526);let o={button:"Button-module__button--hMmd1",small:"Button-module__small--xYPhJ",medium:"Button-module__medium--d64dr",condensed:"Button-module__condensed--WrsZL",iconOnly:"Button-module__iconOnly--NkD70",default:"Button-module__default--fN_4Y",disabled:"Button-module__disabled--tNL94",invisible:"Button-module__invisible--lYAq6",icon:"Button-module__icon--Qd_AY",text:"Button-module__text--VDmpz"},d=(0,r.forwardRef)((e,t)=>{let n,r,d,c,u,m,p,h,f,g,y,x,v,b,_,j,w,N=(0,a.c)(65);N[0]!==e?({size:m,variant:p,condensed:h,iconOnly:f,icon:c,className:r,children:n,disabled:d,...u}=e,N[0]=e,N[1]=n,N[2]=r,N[3]=d,N[4]=c,N[5]=u,N[6]=m,N[7]=p,N[8]=h,N[9]=f):(n=N[1],r=N[2],d=N[3],c=N[4],u=N[5],m=N[6],p=N[7],h=N[8],f=N[9]);let C=void 0===p?"default":p,S=void 0!==h&&h,I=void 0!==f&&f,k=o[void 0===m?"small":m],T=o[C],E=S&&o.condensed,R=I&&o.iconOnly,L=d&&o.disabled;N[10]!==r||N[11]!==k||N[12]!==T||N[13]!==E||N[14]!==R||N[15]!==L?(g=(0,s.$)(o.button,k,T,E,R,L,r),N[10]=r,N[11]=k,N[12]=T,N[13]=E,N[14]=R,N[15]=L,N[16]=g):g=N[16];let A=g;N[17]!==c?(y=null!=c?(0,i.jsx)("span",{className:o.icon,children:c}):null,N[17]=c,N[18]=y):y=N[18],N[19]!==n||N[20]!==I?(x=!I&&n?(0,i.jsx)("span",{className:o.text,children:n}):null,N[19]=n,N[20]=I,N[21]=x):x=N[21],N[22]!==y||N[23]!==x?(v=(0,i.jsxs)(i.Fragment,{children:[y,x]}),N[22]=y,N[23]=x,N[24]=v):v=N[24];let D=v;if("to"in u){let e,n,a,s;return N[25]!==u?({to:a,onClick:e,...n}=u,N[25]=u,N[26]=e,N[27]=n,N[28]=a):(e=N[26],n=N[27],a=N[28]),N[29]!==A||N[30]!==D||N[31]!==d||N[32]!==e||N[33]!==n||N[34]!==t||N[35]!==a?(s=(0,i.jsx)(l.N_,{ref:t,to:a,className:A,"aria-disabled":d,onClick:e,...n,children:D}),N[29]=A,N[30]=D,N[31]=d,N[32]=e,N[33]=n,N[34]=t,N[35]=a,N[36]=s):s=N[36],s}if("href"in u){let e,n,a,s,r,l;return N[37]!==u?({href:e,target:r,rel:a,onClick:n,...s}=u,N[37]=u,N[38]=e,N[39]=n,N[40]=a,N[41]=s,N[42]=r):(e=N[38],n=N[39],a=N[40],s=N[41],r=N[42]),N[43]!==A||N[44]!==D||N[45]!==d||N[46]!==e||N[47]!==n||N[48]!==a||N[49]!==s||N[50]!==t||N[51]!==r?(l=(0,i.jsx)("a",{ref:t,href:e,target:r,rel:a,className:A,"aria-disabled":d,onClick:n,...s,children:D}),N[43]=A,N[44]=D,N[45]=d,N[46]=e,N[47]=n,N[48]=a,N[49]=s,N[50]=t,N[51]=r,N[52]=l):l=N[52],l}N[53]!==u?({onClick:b,type:j,..._}=u,N[53]=u,N[54]=b,N[55]=_,N[56]=j):(b=N[54],_=N[55],j=N[56]);let P=void 0===j?"button":j;return N[57]!==A||N[58]!==D||N[59]!==d||N[60]!==b||N[61]!==_||N[62]!==t||N[63]!==P?(w=(0,i.jsx)("button",{ref:t,type:P,onClick:b,disabled:d,className:A,..._,children:D}),N[57]=A,N[58]=D,N[59]=d,N[60]=b,N[61]=_,N[62]=t,N[63]=P,N[64]=w):w=N[64],w});d.displayName="Button"},12357:(e,t,n)=>{n.d(t,{U:()=>N});var i=n(74848),a=n(21728),s=n(4817),r=n(85094),l=n(98755),o=n(96540),d=n(57826),c=n(34164),u=n(53419);function m(e){let t,n,s,r,m,p,h,f,g,y=(0,a.c)(18),{children:x,code:v}=e,b=(0,o.useId)(),{chatMode:_,wrapCodeLines:j}=(0,o.useContext)(d.F);y[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,c.$)("CodeBlocks-module__container--GV7vX","CodeBlocks-module__immersive--pP6K5"),y[0]=t):t=y[0],y[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,c.$)("CodeBlocks-module__copyContainer--PlsVH"),s=(0,c.$)("CodeBlocks-module__copyContent--_B0qO"),y[1]=n,y[2]=s):(n=y[1],s=y[2]),y[3]!==_?(r=()=>{(0,u.BI)("dotcom_chat.activate",{target:"CODE_BLOCK_COPY",mode:_})},y[3]=_,y[4]=r):r=y[4],y[5]!==v||y[6]!==r?(m=(0,i.jsx)("div",{className:n,children:(0,i.jsx)("div",{className:s,children:(0,i.jsx)(l.T,{textToCopy:v,ariaLabel:"Copy code",className:"CodeBlocks-module__copyButton--xrG5L",size:"small",onCopy:r})})}),y[5]=v,y[6]=r,y[7]=m):m=y[7],y[8]===Symbol.for("react.memo_cache_sentinel")?(p=(0,c.$)("CodeBlocks-module__codeContainer--wOuWu"),y[8]=p):p=y[8];let w=j&&"CodeBlocks-module__codeWrap--YQDq8";return y[9]!==w?(h=(0,c.$)(w),y[9]=w,y[10]=h):h=y[10],y[11]!==x||y[12]!==h?(f=(0,i.jsx)("div",{className:p,children:(0,i.jsx)("pre",{className:"CodeBlocks-module__code--wvK8k",tabIndex:0,children:(0,i.jsx)("code",{className:h,children:x})})}),y[11]=x,y[12]=h,y[13]=f):f=y[13],y[14]!==b||y[15]!==m||y[16]!==f?(g=(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("figure",{className:t,"aria-labelledby":b,children:[m,f]})}),y[14]=b,y[15]=m,y[16]=f,y[17]=g):g=y[17],g}try{m.displayName||(m.displayName="CodeBlocksForLoop")}catch{}var p=n(47970);let h="data-codeblock-for-loop-props",f=(0,r.F)(h),g={code:(e,t)=>{let n=(0,r.k)(e,h);return n?(0,i.jsx)(m,{...n,children:e.children}):t}};var y=n(90122),x=n(76219),v=n(69726);let b="data-mermaid-props",_=(0,r.F)(b);function j(e){let t,n,s,r,l,o,d,u,m=(0,a.c)(18),{code:p,identity:h,viewscreenHost:f}=e,g=`${f}/markdown/mermaid`,y=encodeURIComponent(p);m[0]!==y?(t=btoa(y),m[0]=y,m[1]=t):t=m[1];let x=t;m[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,c.$)("js-render-needs-enrichment","render-needs-enrichment","Mermaid-module__diagramContainer--YUzME"),m[2]=n):n=m[2];let b=`${g}?data=${x}`;return m[3]!==p?(s=JSON.stringify({data:p}),m[3]=p,m[4]=s):s=m[4],m[5]!==p?(r=(0,i.jsx)("div",{className:"Mermaid-module__hiddenSourceCode--dlgHV",children:(0,i.jsx)("pre",{lang:"mermaid",children:p})}),m[5]=p,m[6]=r):r=m[6],m[7]!==p||m[8]!==s||m[9]!==r?(l=(0,i.jsx)("div",{className:"js-render-enrichment-target","data-json":s,"data-plain":p,children:r}),m[7]=p,m[8]=s,m[9]=r,m[10]=l):l=m[10],m[11]===Symbol.for("react.memo_cache_sentinel")?(o=(0,c.$)("js-render-enrichment-loader","Mermaid-module__loaderContainer--pyhaT"),m[11]=o):o=m[11],m[12]===Symbol.for("react.memo_cache_sentinel")?(d=(0,i.jsx)("span",{className:o,role:"presentation",children:(0,i.jsx)(v.A,{})}),m[12]=d):d=m[12],m[13]!==f||m[14]!==h||m[15]!==b||m[16]!==l?(u=(0,i.jsxs)("section",{className:n,"data-identity":h,"data-host":f,"data-src":b,"data-type":"mermaid","aria-label":"Mermaid diagram rendered output container",children:[l,d]}),m[13]=f,m[14]=h,m[15]=b,m[16]=l,m[17]=u):u=m[17],u}let w={code:(e,t)=>{if(!e.className?.includes("language-mermaid"))return t;let n=(0,r.k)(e,b);return n?(0,i.jsx)(j,{code:n.code,identity:n.identity,viewscreenHost:n.viewscreenHost}):t}};try{j.displayName||(j.displayName="MermaidRenderer")}catch{}function N(e){let t,n,r,l,o,d,u=(0,a.c)(15),{className:m,isRunning:h,nodeValue:v,renderAsJson:b}=e,j=void 0!==b&&b,{previewUrl:N}=(0,x.U)();if(u[0]===Symbol.for("react.memo_cache_sentinel")?(t={transformMarkdown:e=>(0,p.YR)(e,"code",e=>{e.data={...e.data,hName:"code",hProperties:{[f]:JSON.stringify({language:e.lang??"",code:e.value,startOffset:e.position?.start.offset??-1,endOffset:e.position?.end.offset??-1})}}}),transformHtml:e=>(0,p.YR)(e,"element",(e,t,n)=>{let i=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&i?.type==="element"&&"code"===i.tagName&&f in i.properties&&n.children.splice(t,1,i)}),reactComponents:g},u[0]=t):t=u[0],u[1]!==N){var C;n=[t],N&&n.push((C={viewscreenHost:N},{transformMarkdown:e=>(0,p.YR)(e,"code",e=>{"mermaid"===e.lang&&(e.data={...e.data,hName:"code",hProperties:{className:["language-mermaid"],[_]:JSON.stringify({code:e.value,identity:`mermaid-${Math.random().toString(36).slice(2,11)}`,viewscreenHost:C.viewscreenHost})}})}),transformHtml:e=>(0,p.YR)(e,"element",(e,t,n)=>{let i=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&i?.type==="element"&&"code"===i.tagName&&_ in i.properties&&n.children.splice(t,1,i)}),reactComponents:w})),u[1]=N,u[2]=n}else n=u[2];let S=n;u[3]!==v?(r=(0,y.DO)(v),u[3]=v,u[4]=r):r=u[4];let I=r;return u[5]!==m?(l=(0,c.$)("OutputDisplay-module__outputValue--I7SuT",m),u[5]=m,u[6]=l):l=u[6],u[7]!==S||u[8]!==h||u[9]!==j||u[10]!==I?(o=j?(0,i.jsx)("pre",{className:"OutputDisplay-module__jsonOutput--NA93D",children:I}):(0,i.jsx)(s.To,{extensions:S,className:"OutputDisplay-module__markdownOutput--c47bk",isStreaming:h,markdown:I}),u[7]=S,u[8]=h,u[9]=j,u[10]=I,u[11]=o):o=u[11],u[12]!==l||u[13]!==o?(d=(0,i.jsx)("div",{className:l,children:o}),u[12]=l,u[13]=o,u[14]=d):d=u[14],d}try{N.displayName||(N.displayName="OutputDisplay")}catch{}},12465:(e,t,n)=>{n.d(t,{P:()=>u,W:()=>m});var i=n(21728),a=n(94747),s=n(97665),r=n(46747),l=n(99519),o=n(99993),d=n(33026);function c(e){let t,n,s=(0,i.c)(5),r=(0,l.EY)();return s[0]!==r?(t=async e=>{let{loopID:t,updateFn:n}=e;return await r.updateLoop(t,n)},s[0]=r,s[1]=t):t=s[1],s[2]!==e||s[3]!==t?(n={mutationFn:t,...e},s[2]=e,s[3]=t,s[4]=n):n=s[4],(0,a.n)(n)}function u(){let e,t=(0,i.c)(2),n=(0,s.jE)();return t[0]!==n?(e={onMutate:async e=>{let{loopID:t,updateFn:i}=e;await n.cancelQueries({queryKey:(0,o.c_)(t,d.kj)});let a=n.getQueryData((0,o.c_)(t,d.kj)),s=a?.version?n.getQueryData((0,o.c_)(t,a.version)):null;if(a){let e=i(a);n.setQueryData((0,o.c_)(t,d.kj),e),e.version&&n.setQueryData((0,o.c_)(t,e.version),e)}return{previousDraftLoop:a,previousVersionedLoop:s,loopID:t}},onError:(e,t,i)=>{i?.previousDraftLoop&&(n.setQueryData((0,o.c_)(i.loopID,d.kj),i.previousDraftLoop),i.previousVersionedLoop&&i.previousDraftLoop.version&&n.setQueryData((0,o.c_)(i.loopID,i.previousDraftLoop.version),i.previousVersionedLoop))}},t[0]=n,t[1]=e):e=t[1],c(e)}function m(){let e,t,n=(0,i.c)(6),a=(0,s.jE)(),l=c(),u=(0,r.d)(l.mutate,500);n[0]!==u||n[1]!==a?(e=async(e,t)=>{let{loopID:n,updateFn:i}=e;await a.cancelQueries({queryKey:(0,o.c_)(n,d.kj)});let s=i(a.getQueryData((0,o.c_)(n,d.kj))??null);return a.setQueryData((0,o.c_)(n,d.kj),s),u({loopID:n,updateFn:i}),t?.onSuccess?.(),s},n[0]=u,n[1]=a,n[2]=e):e=n[2];let m=e;return n[3]!==m||n[4]!==l?(t={...l,mutate:m},n[3]=m,n[4]=l,n[5]=t):t=n[5],t}},13647:(e,t,n)=>{n.d(t,{Ch:()=>a,PW:()=>o,V2:()=>l,Ve:()=>r,Xg:()=>d,a1:()=>s});var i=n(69599);function a(){return(0,i.G7)("copilot_pipes_code_nodes")}function s(){return(0,i.G7)("copilot_pipes_react_nodes")}function r(){return(0,i.G7)("copilot_pipes_github_graphql_nodes")}function l(){return(0,i.G7)("copilot_pipes_pipeline_nodes")}function o(){return(0,i.G7)("copilot_loops_post_staff_ship_features")}function d(){return(0,i.G7)("loops_service_graphql_execution")}},13974:(e,t,n)=>{n.d(t,{p:()=>s});var i=n(21728),a=n(96540);function s(e){let t,n,s=(0,i.c)(4),[r,l]=(0,a.useState)(!1),o=(0,a.useRef)(e);return s[0]!==r||s[1]!==e?(t=()=>{e&&(o.current=!0),e||!o.current||r||l(!0)},n=[e,r],s[0]=r,s[1]=e,s[2]=t,s[3]=n):(t=s[2],n=s[3]),(0,a.useEffect)(t,n),r}},14303:(e,t,n)=>{n.d(t,{r:()=>y});var i=n(74848),a=n(21728),s=n(5524),r=n(94236),l=n(59394),o=n(96540),d=n(38621),c=n(295),u=n(53419),m=n(25641),p=n(61526),h=n(25407),f=n(64917),g=n(35247);function y(e){let t,n,y,v,b,_,j,w,N,C,S,I,k,T,E,R,L,A,D,P,O=(0,a.c)(66),{onDelete:F,onCopyLoop:B,onDuplicate:M,onShare:V,onEdit:$,onCopyOutput:U,onRename:q,loopId:W,hasOutput:H,returnFocusRef:G}=e,z=void 0!==H&&H,[K,Q]=(0,o.useState)(null),{mutate:Z}=(0,c.h)(),{ownerLogin:J,owned:Y,loopURL:X}=(0,f.I)(x);O[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{Q("delete")},O[0]=t):t=O[0];let ee=t;O[1]!==G?(n=()=>{Q(null),setTimeout(()=>G?.current?.focus())},O[1]=G,O[2]=n):n=O[2];let et=n;O[3]!==Z||O[4]!==W||O[5]!==F?(y=async()=>{W&&(Q(null),Z(W,{onSuccess:F}))},O[3]=Z,O[4]=W,O[5]=F,O[6]=y):y=O[6];let en=y;O[7]!==W||O[8]!==M?(v=()=>{W&&M&&((0,u.BI)("dotcom_chat.activate",{target:"LOOP_DUPLICATE",mode:"loops"}),M(W))},O[7]=W,O[8]=M,O[9]=v):v=O[9];let ei=v;O[10]!==V?(b=()=>{V?.()},O[10]=V,O[11]=b):b=O[11];let ea=b;O[12]!==$?(_=()=>{(0,u.BI)("dotcom_chat.activate",{target:"OUTPUTS_VIEW_EDIT_LOOP",mode:"loops"}),$?.()},O[12]=$,O[13]=_):_=O[13];let es=_;O[14]!==U?(j=()=>{U&&U()},O[14]=U,O[15]=j):j=O[15];let er=j;return W?(O[16]!==er||O[17]!==z||O[18]!==U?(w=U&&(0,i.jsxs)(s.l.Item,{onSelect:er,disabled:!z,children:[(0,i.jsx)(s.l.LeadingVisual,{children:(0,i.jsx)(d.CopyIcon,{})}),"Copy output"]}),O[16]=er,O[17]=z,O[18]=U,O[19]=w):w=O[19],O[20]!==es||O[21]!==W||O[22]!==$?(N=$&&(0,i.jsxs)(s.l.LinkItem,{as:p.N_,to:`${m.Jz}/l/${W}`,onSelect:es,children:[(0,i.jsx)(s.l.LeadingVisual,{children:(0,i.jsx)(d.PencilIcon,{})}),"Edit loop"]}),O[20]=es,O[21]=W,O[22]=$,O[23]=N):N=O[23],O[24]!==B||O[25]!==U||O[26]!==M||O[27]!==$||O[28]!==V?(C=(U||$)&&(M||V||B)&&(0,i.jsx)(s.l.Divider,{}),O[24]=B,O[25]=U,O[26]=M,O[27]=$,O[28]=V,O[29]=C):C=O[29],O[30]!==ei||O[31]!==M?(S=M&&(0,i.jsxs)(s.l.Item,{onSelect:ei,children:[(0,i.jsx)(s.l.LeadingVisual,{children:(0,i.jsx)(d.DuplicateIcon,{})}),"Duplicate"]}),O[30]=ei,O[31]=M,O[32]=S):S=O[32],O[33]!==q?(I=q&&(0,i.jsxs)(s.l.Item,{onSelect:q,children:[(0,i.jsx)(s.l.LeadingVisual,{children:(0,i.jsx)(d.PencilIcon,{})}),"Rename"]}),O[33]=q,O[34]=I):I=O[34],O[35]!==ea||O[36]!==V?(k=V&&(0,i.jsxs)(s.l.Item,{onSelect:ea,children:[(0,i.jsx)(s.l.LeadingVisual,{children:(0,i.jsx)(d.LinkIcon,{})}),"Copy link"]}),O[35]=ea,O[36]=V,O[37]=k):k=O[37],O[38]!==B?(T=B&&(0,i.jsxs)(s.l.Item,{onSelect:B,children:[(0,i.jsx)(s.l.LeadingVisual,{children:(0,i.jsx)(d.CopyIcon,{})}),"Copy JSON"]}),O[38]=B,O[39]=T):T=O[39],O[40]!==B||O[41]!==M||O[42]!==V?(E=(M||V||B)&&(0,i.jsx)(s.l.Divider,{}),O[40]=B,O[41]=M,O[42]=V,O[43]=E):E=O[43],O[44]===Symbol.for("react.memo_cache_sentinel")?(R=(0,i.jsxs)(s.l.Item,{variant:"danger",onSelect:ee,children:[(0,i.jsx)(s.l.LeadingVisual,{children:(0,i.jsx)(d.TrashIcon,{})}),"Delete"]}),O[44]=R):R=O[44],O[45]!==X||O[46]!==Y||O[47]!==J?(L=g.W.loopsAbusePrevention&&J&&!Y&&X&&(0,i.jsxs)(s.l.LinkItem,{variant:"danger",href:(0,h.YPg)({report:`${J} (User)`,contentURL:X}),children:[(0,i.jsx)(s.l.LeadingVisual,{children:(0,i.jsx)(d.AlertIcon,{})}),"Report"]}),O[45]=X,O[46]=Y,O[47]=J,O[48]=L):L=O[48],O[49]!==N||O[50]!==C||O[51]!==S||O[52]!==I||O[53]!==k||O[54]!==T||O[55]!==E||O[56]!==L||O[57]!==w?(A=(0,i.jsx)(r.W.Overlay,{align:"end",children:(0,i.jsxs)(s.l,{children:[w,N,C,S,I,k,T,E,R,L]})}),O[49]=N,O[50]=C,O[51]=S,O[52]=I,O[53]=k,O[54]=T,O[55]=E,O[56]=L,O[57]=w,O[58]=A):A=O[58],O[59]!==et||O[60]!==en||O[61]!==K?(D="delete"===K&&(0,i.jsx)(l.K,{title:"Delete loop",onClose:e=>{"confirm"===e?en():et()},confirmButtonContent:"Delete",confirmButtonType:"danger",children:"Are you sure you want to delete this loop? This action cannot be undone."}),O[59]=et,O[60]=en,O[61]=K,O[62]=D):D=O[62],O[63]!==A||O[64]!==D?(P=(0,i.jsxs)(i.Fragment,{children:[A,D]}),O[63]=A,O[64]=D,O[65]=P):P=O[65],P):null}function x(e){return{owned:e?.owned,ownerLogin:e?.ownerLogin,loopURL:window.location.origin+window.location.pathname}}try{y.displayName||(y.displayName="LoopsActionMenuOverlay")}catch{}},14808:(e,t,n)=>{n.d(t,{LR:()=>o,KA:()=>E,G9:()=>f,XA:()=>N});var i=n(74848),a=n(21728),s=n(5524),r=n(96540);let l=(0,r.forwardRef)((e,t)=>{let n,r,l,o,d,c,u,m,p,h,f,g,y,x,v=(0,a.c)(28);if(v[0]!==t||v[1]!==e){l=Symbol.for("react.early_return_sentinel");e:{let{selected:a,...y}=e;if(y.renderItem){l=y.renderItem({selected:a,...y});break e}let{label:x,id:v,description:b,descriptionVariant:_,onSelect:j,renderDescription:w,className:N,trailingVisual:C,disabled:S}=y;g=C,n=s.l.Item,r=v,o="option",d=()=>{j({label:x,id:v,selected:a,description:b,descriptionVariant:_})},c=a,u=t,m=N,p=S,h=x,f=(b||w)&&(0,i.jsx)(s.l.Description,{variant:_,children:w?w():b})}v[0]=t,v[1]=e,v[2]=n,v[3]=r,v[4]=l,v[5]=o,v[6]=d,v[7]=c,v[8]=u,v[9]=m,v[10]=p,v[11]=h,v[12]=f,v[13]=g}else n=v[2],r=v[3],l=v[4],o=v[5],d=v[6],c=v[7],u=v[8],m=v[9],p=v[10],h=v[11],f=v[12],g=v[13];return l!==Symbol.for("react.early_return_sentinel")?l:(v[14]!==g?(y=g?(0,i.jsx)(s.l.TrailingVisual,{children:g}):null,v[14]=g,v[15]=y):y=v[15],v[16]!==n||v[17]!==r||v[18]!==y||v[19]!==o||v[20]!==d||v[21]!==c||v[22]!==u||v[23]!==m||v[24]!==p||v[25]!==h||v[26]!==f?(x=(0,i.jsxs)(n,{role:o,onSelect:d,selected:c,ref:u,className:m,disabled:p,children:[h,f,y]},r),v[16]=n,v[17]=r,v[18]=y,v[19]=o,v[20]=d,v[21]=c,v[22]=u,v[23]=m,v[24]=p,v[25]=h,v[26]=f,v[27]=x):x=v[27],x)});l.displayName="SelectItem";let o=(0,r.forwardRef)((e,t)=>{let n,l,o,h=(0,a.c)(18),{selectionVariant:f,items:g,onSelect:y,controlled:x,showGroupHeading:v}=e;h[0]!==g?(n=()=>g.filter(c),h[0]=g,h[1]=n):n=h[1];let[b,_]=(0,r.useState)(n);h[2]!==g?(l=g.find(u),h[2]=g,h[3]=l):l=h[3];let j=l;if(h[4]!==x||h[5]!==j||h[6]!==g||h[7]!==y||h[8]!==t||h[9]!==b||h[10]!==f||h[11]!==v){let e,n=j?g.reduce(m,{}):null,a=g.filter(p),l=n&&Object.entries(n);h[13]!==x||h[14]!==y||h[15]!==b||h[16]!==f?(e=e=>{let{id:t}=e;if(y&&y(e),x)if(b.find(e=>e.id===t)){let e=b.filter(e=>e.id!==t);_(e),x(e)}else{let t="multiple"===f?[...b,e]:[e];_(t),x(t)}},h[13]=x,h[14]=y,h[15]=b,h[16]=f,h[17]=e):e=h[17];let c=e;o=(0,i.jsx)(i.Fragment,{children:n?(0,i.jsxs)(i.Fragment,{children:[l?l.map((e,n)=>{let[a,o]=e;return(0,i.jsxs)(r.Fragment,{children:[(0,i.jsxs)(s.l.Group,{"aria-label":o[0]?.groupTitle||`Group ${a}`,selectionVariant:f,children:[v?(0,i.jsx)(s.l.GroupHeading,{variant:"filled",children:o[0]?.groupTitle||`Group ${a}`}):null,o.map((e,a)=>(0,i.jsx)(d,{selectedItems:b,onSelectToggle:c,controlled:x,ref:0===a&&0===n?t:void 0,...e},e.id))]},a),l.length>1&&n!==l.length-1?(0,i.jsx)(s.l.Divider,{}):null]},a)}):null,a.map(e=>(0,i.jsx)(d,{selectedItems:b,onSelectToggle:c,controlled:x,...e},e.id))]}):(0,i.jsx)(i.Fragment,{children:g.map((e,n)=>(0,i.jsx)(d,{selectedItems:b,onSelectToggle:c,controlled:x,ref:0===n?t:null,...e},e.id))})}),h[4]=x,h[5]=j,h[6]=g,h[7]=y,h[8]=t,h[9]=b,h[10]=f,h[11]=v,h[12]=o}else o=h[12];return o}),d=r.forwardRef((e,t)=>{let n,s,r,o,d,c,u,m,p,h,f,g,y=(0,a.c)(35);y[0]!==e?({id:r,label:o,description:s,selectedItems:p,onSelectToggle:c,onSelect:d,controlled:n,selected:m,...u}=e,y[0]=e,y[1]=n,y[2]=s,y[3]=r,y[4]=o,y[5]=d,y[6]=c,y[7]=u,y[8]=m,y[9]=p):(n=y[1],s=y[2],r=y[3],o=y[4],d=y[5],c=y[6],u=y[7],m=y[8],p=y[9]),y[10]!==s||y[11]!==r||y[12]!==o||y[13]!==c||y[14]!==u.descriptionVariant||y[15]!==m?(h=()=>{c({label:o,id:r,selected:m,description:s,descriptionVariant:u.descriptionVariant})},y[10]=s,y[11]=r,y[12]=o,y[13]=c,y[14]=u.descriptionVariant,y[15]=m,y[16]=h):h=y[16];let x=h;y[17]!==n||y[18]!==r||y[19]!==m||y[20]!==p?(f=n?p.some(e=>e.id===r):!!m,y[17]=n,y[18]=r,y[19]=m,y[20]=p,y[21]=f):f=y[21];let v=d||x;return y[22]!==s||y[23]!==r||y[24]!==o||y[25]!==u.className||y[26]!==u.descriptionVariant||y[27]!==u.disabled||y[28]!==u.renderDescription||y[29]!==u.renderItem||y[30]!==u.trailingVisual||y[31]!==t||y[32]!==f||y[33]!==v?(g=(0,i.jsx)(l,{label:o,id:r,description:s,descriptionVariant:u.descriptionVariant,selected:f,onSelect:v,className:u.className,renderItem:u.renderItem,ref:t,trailingVisual:u.trailingVisual,disabled:u.disabled,renderDescription:u.renderDescription}),y[22]=s,y[23]=r,y[24]=o,y[25]=u.className,y[26]=u.descriptionVariant,y[27]=u.disabled,y[28]=u.renderDescription,y[29]=u.renderItem,y[30]=u.trailingVisual,y[31]=t,y[32]=f,y[33]=v,y[34]=g):g=y[34],g});function c(e){return e.selected}function u(e){return void 0!==e.groupId}function m(e,t){return void 0!==t.groupId&&(e[t.groupId]=e[t.groupId]||[],e[t.groupId]&&e[t.groupId].push(t)),e}function p(e){return void 0===e.groupId}o.displayName="SelectBody",d.displayName="SelectBodyItem";var h=n(21373);function f(e){let t,n,s,r,l,o,d,c,u,m=(0,a.c)(23),{footerButtons:p,onSave:f,onCancel:x}=e;m[0]!==p?(t=p?.reduce(y,{save:void 0,cancel:void 0,supplementary:[]}),r="SimpleSelect-module__Footer--BWYvt",n="SimpleSelect-module__FooterContent--CCfD8",s=p?t?.supplementary.map(g):null,m[0]=p,m[1]=t,m[2]=n,m[3]=s,m[4]=r):(t=m[1],n=m[2],s=m[3],r=m[4]),m[5]!==n||m[6]!==s?(l=(0,i.jsx)("div",{className:n,children:s}),m[5]=n,m[6]=s,m[7]=l):l=m[7];let v=t?.cancel,b=t?.cancel?.content||"Cancel";m[8]!==x||m[9]!==v||m[10]!==b?(o=(0,i.jsx)(h.Q,{onClick:x,...v,children:b}),m[8]=x,m[9]=v,m[10]=b,m[11]=o):o=m[11];let _=t?.save,j=t?.save?.content||"Save";return m[12]!==f||m[13]!==_||m[14]!==j?(d=(0,i.jsx)(h.Q,{variant:"primary",onClick:f,..._,children:j}),m[12]=f,m[13]=_,m[14]=j,m[15]=d):d=m[15],m[16]!==d||m[17]!==o?(c=(0,i.jsxs)("div",{className:"SimpleSelect-module__FooterActions--ILN1s",children:[o,d]}),m[16]=d,m[17]=o,m[18]=c):c=m[18],m[19]!==c||m[20]!==r||m[21]!==l?(u=(0,i.jsxs)("div",{className:r,children:[l,c]}),m[19]=c,m[20]=r,m[21]=l,m[22]=u):u=m[22],u}function g(e){let{variant:t,content:n,...a}=e;return(0,i.jsx)(h.Q,{variant:t||"default",...a,children:n},n)}function y(e,t){let{action:n,...i}=t;return"save"===n||"cancel"===n?e[n]=i:e.supplementary.push(i),e}try{f.displayName||(f.displayName="SelectFooter")}catch{}var x=n(38621),v=n(81960),b=n(26108);let _=e=>{let t,n,s,r=(0,a.c)(8),{id:l,title:o,onClose:d}=e,c=void 0===o?"Select an item":o;return r[0]!==l||r[1]!==c?(t=(0,i.jsx)(v.A,{id:l,as:"h1",className:"SimpleSelect-module__Title--dSeJ4",children:c}),r[0]=l,r[1]=c,r[2]=t):t=r[2],r[3]!==d?(n=(0,i.jsx)(b.K,{icon:x.XIcon,"aria-label":"Close",variant:"invisible",onClick:d}),r[3]=d,r[4]=n):n=r[4],r[5]!==t||r[6]!==n?(s=(0,i.jsxs)("div",{className:"SimpleSelect-module__Header--DPfBs",children:[t,n]}),r[5]=t,r[6]=n,r[7]=s):s=r[7],s};try{_.displayName||(_.displayName="SelectHeader")}catch{}var j=n(31604),w=n(15220);function N(e){let t,n,l,d,c,u,m,p,g,y,v,b,j,w,N,R,L=(0,a.c)(76),{variant:A,items:D,label:P,title:O,selectionVariant:F,onSelect:B,renderText:M,onSave:V,onCancel:$,selectable:U,buttonProps:q,outsideClick:W,onEscape:H,focusTarget:G,dialogProps:z,footerButtons:K}=e,Q=void 0===A?"overlay":A,Z=void 0===O?"Select an item":O,J=void 0===W?"save":W,Y=void 0===H?"save":H,X=void 0===G?"first-target":G,[ee,et]=(0,r.useState)(!1),[en,ei]=(0,r.useState)();L[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],L[0]=t):t=L[0];let[ea,es]=(0,r.useState)(t),er=(0,r.useRef)(null),el=(0,r.useId)(),eo=U?ea:D.filter(T),ed=(0,r.useRef)(null);en||(ei(D),es(D.filter(k))),L[1]!==D||L[2]!==$||L[3]!==V||L[4]!==ea||L[5]!==U||L[6]!==en?(n=(e,t)=>{if("save"===e&&(V||U)){let e=U?t||ea:D.filter(I),n=D.map(t=>e.find(e=>e.id===t.id)?{...t,selected:!0}:{...t,selected:!1});ei(n),V&&V(n)}else"cancel"===e&&$?$(en||D):"cancel"===e&&U&&es(en?.filter(S)||[]);et(!1)},L[1]=D,L[2]=$,L[3]=V,L[4]=ea,L[5]=U,L[6]=en,L[7]=n):n=L[7];let ec=n;L[8]!==ec?(l=()=>ec("save"),L[8]=ec,L[9]=l):l=L[9];let eu=l;L[10]!==ec?(d=()=>ec("cancel"),L[10]=ec,L[11]=d):d=L[11];let em=d;L[12]!==ec||L[13]!==ea||L[14]!==U||L[15]!==F?(c=e=>{es(e),ea&&U?.(e),"single"===F&&ec("save",e)},L[12]=ec,L[13]=ea,L[14]=U,L[15]=F,L[16]=c):c=L[16];let ep=c;L[17]!==ec||L[18]!==Y||L[19]!==J||L[20]!==ea?(u=e=>{"click-outside"===e||"anchor-click"===e||"close-button"===e?ec(J):"escape"===e&&ec(Y,ea)},L[17]=ec,L[18]=Y,L[19]=J,L[20]=ea,L[21]=u):u=L[21];let eh=u,ef=h.Q,eg="overlay"===Q?x.TriangleDownIcon:null;L[22]!==ee?(m=()=>et(!ee),L[22]=ee,L[23]=m):m=L[23];let ey=M?M():`${P}${!eo.length?"":`: ${eo.map(C).join(", ")}`}`;L[24]!==ef||L[25]!==q||L[26]!==ee||L[27]!==eg||L[28]!==m||L[29]!==ey?(p=(0,i.jsx)(ef,{trailingAction:eg,ref:ed,variant:"default",onClick:m,"aria-haspopup":"dialog","aria-expanded":ee,...q,children:ey}),L[24]=ef,L[25]=q,L[26]=ee,L[27]=eg,L[28]=m,L[29]=ey,L[30]=p):p=L[30],L[31]!==el||L[32]!==em||L[33]!==Z||L[34]!==Q?(g="overlay"===Q?(0,i.jsx)(_,{id:el,title:Z,onClose:em}):null,L[31]=el,L[32]=em,L[33]=Z,L[34]=Q,L[35]=g):g=L[35];let ex=U&&en?en:D;L[36]!==V||L[37]!==B||L[38]!==U||L[39]!==F?(y="single"!==F||V||U?B:e=>{B?.(e),et(!1)},L[36]=V,L[37]=B,L[38]=U,L[39]=F,L[40]=y):y=L[40];let ev=U?ep:void 0,eb="first-item"===X?er:null;return L[41]!==F||L[42]!==ex||L[43]!==y||L[44]!==ev||L[45]!==eb?(v=(0,i.jsx)(o,{selectionVariant:F,items:ex,onSelect:y,controlled:ev,ref:eb}),L[41]=F,L[42]=ex,L[43]=y,L[44]=ev,L[45]=eb,L[46]=v):v=L[46],L[47]!==F||L[48]!==v?(b=(0,i.jsx)("div",{className:"SimpleSelect-module__SelectBodyWrapper--Dre5i",children:(0,i.jsx)(s.l,{role:"listbox",selectionVariant:F,"aria-label":"Selection",children:v})}),L[47]=F,L[48]=v,L[49]=b):b=L[49],L[50]!==K||L[51]!==V||L[52]!==em||L[53]!==eu||L[54]!==Q?(j=V&&"modal"!==Q?(0,i.jsx)(f,{onSave:eu,onCancel:em,footerButtons:K}):null,L[50]=K,L[51]=V,L[52]=em,L[53]=eu,L[54]=Q,L[55]=j):j=L[55],L[56]!==g||L[57]!==b||L[58]!==j||L[59]!==Q?(w=(0,i.jsxs)("div",{"data-container":Q,className:"SimpleSelect-module__Wrapper--cFdti",children:[g,b,j]}),L[56]=g,L[57]=b,L[58]=j,L[59]=Q,L[60]=w):w=L[60],L[61]!==z||L[62]!==X||L[63]!==K||L[64]!==el||L[65]!==eh||L[66]!==ee||L[67]!==em||L[68]!==eu||L[69]!==w||L[70]!==Z||L[71]!==Q?(N=(0,i.jsx)(E,{headingId:el,open:ee,anchorRef:ed,onClose:eh,variant:Q,dialogProps:z,title:Z,selectSave:eu,selectCancel:em,footerButtons:K,focusTarget:X,firstItem:er,children:w}),L[61]=z,L[62]=X,L[63]=K,L[64]=el,L[65]=eh,L[66]=ee,L[67]=em,L[68]=eu,L[69]=w,L[70]=Z,L[71]=Q,L[72]=N):N=L[72],L[73]!==p||L[74]!==N?(R=(0,i.jsxs)(i.Fragment,{children:[p,N]}),L[73]=p,L[74]=N,L[75]=R):R=L[75],R}function C(e){return e.label}function S(e){return e.selected}function I(e){return e.selected}function k(e){return e.selected}function T(e){return e.selected}function E(e){let t,n=(0,a.c)(15),{open:s,anchorRef:r,headingId:l,focusTarget:o,firstItem:d,onClose:c,children:u,variant:m,dialogProps:p,title:h,selectSave:g,selectCancel:y,footerButtons:x,focusZoneSettings:v}=e;return n[0]!==r||n[1]!==u||n[2]!==p||n[3]!==d||n[4]!==o||n[5]!==v||n[6]!==x||n[7]!==l||n[8]!==c||n[9]!==s||n[10]!==y||n[11]!==g||n[12]!==h||n[13]!==m?(t=(0,i.jsx)(i.Fragment,{children:"overlay"===m?(0,i.jsx)(j.T,{open:s,anchorRef:r,renderAnchor:null,overlayProps:{role:"dialog","aria-labelledby":l,maxHeight:"large",maxWidth:"medium"},focusZoneSettings:v||{disabled:!0},focusTrapSettings:{initialFocusRef:"first-item"===o?d:void 0},onClose:c,children:u}):(0,i.jsx)(i.Fragment,{children:s?(0,i.jsx)(w.l,{renderBody:()=>(0,i.jsx)(w.l.Body,{className:"SimpleSelect-module__DialogBody--NoZic",children:u}),width:"large",onClose:c,title:h,renderFooter:()=>(0,i.jsx)(f,{onSave:g,onCancel:y,footerButtons:x}),position:{narrow:"fullscreen",regular:"center"},...p}):null})}),n[0]=r,n[1]=u,n[2]=p,n[3]=d,n[4]=o,n[5]=v,n[6]=x,n[7]=l,n[8]=c,n[9]=s,n[10]=y,n[11]=g,n[12]=h,n[13]=m,n[14]=t):t=n[14],t}try{N.displayName||(N.displayName="SimpleSelect")}catch{}try{E.displayName||(E.displayName="SelectContainer")}catch{}},17005:(e,t,n)=>{n.d(t,{l:()=>u});var i=n(74848),a=n(21728),s=n(77274),r=n(96379),l=n(96540),o=n(35247),d=n(54508);let c=[{name:"Hate it",value:"VERY_NEGATIVE",icon:s.YS,color:"veryDissatisfied"},{name:"Not great",value:"NEGATIVE",icon:s.Mm,color:"dissatisfied"},{name:"It\u2019s ok",value:"POSITIVE",icon:s.Cf,color:"satisfied"},{name:"Love it",value:"VERY_POSITIVE",icon:s.mN,color:"verySatisfied"}],u=(0,l.forwardRef)(function(e,t){let n,u,m,p,h=(0,a.c)(7),{mode:f,returnFocusRef:g}=e,y=(0,l.useRef)(null),x=(0,l.useRef)(null),v=(0,l.useRef)(void 0);h[0]===Symbol.for("react.memo_cache_sentinel")?(n=()=>({openDialog:e=>{v.current=e,o.W.copilotChatInterviewSurvey?y.current?.openDialog():x.current?.openDialog(e)}}),h[0]=n):n=h[0],(0,l.useImperativeHandle)(t,n),h[1]!==f?(u=async(e,t)=>{let n=[];if(null==e&&n.push("Please select a rating."),t.length>2e3&&n.push("Please keep your feedback within 2000 characters or less."),n.length>0)return n;let i={rating:e,content:t,hostname:window.location.hostname,path:window.location.pathname,mode:f};try{(await (0,r.lS)("/github-copilot/feedback",{method:"POST",body:i})).ok||n.push("An error occurred while submitting your feedback.")}catch{n.push("An error occurred while submitting your feedback.")}return n},h[1]=f,h[2]=u):u=h[2];let b=u;return h[3]===Symbol.for("react.memo_cache_sentinel")?(m=(0,i.jsx)(d.E,{ref:y,onClose:e=>{"no-thanks"===e&&x.current?.openDialog(v.current)}}),h[3]=m):m=h[3],h[4]!==b||h[5]!==g?(p=(0,i.jsxs)(i.Fragment,{children:[m,(0,i.jsx)(s.NE,{ref:x,options:c,onSubmit:b,returnFocusRef:g})]}),h[4]=b,h[5]=g,h[6]=p):p=h[6],p});u.displayName="ConversationFeedbackDialog"},18878:(e,t,n)=>{n.d(t,{p:()=>W,V:()=>q});var i=n(74848),a=n(21728),s=n(53419),r=n(79634),l=n(97286),o=n(38621),d=n(5524),c=n(59394),u=n(86877),m=n(99511),p=n(15220),h=n(96540),f=n(62421),g=n(25641),y=n(35247),x=n(2635),v=n(33592),b=n(40260),_=n(71315),j=n(21373),w=n(69726),N=n(98552),C=n(46251),S=n(20139);let I="ConversationSharingDialog-module__success--zCOcd",k="ConversationSharingDialog-module__successIcon--z1nhd",T="ConversationSharingDialog-module__quickFadeUp--_qvsX",E=e=>{let t,n,r,l,d,c,f,g,E,R,L,A,D,P,O,F,B,M,V,$,U,q,W,H,G,z,K,Q,Z,J=(0,a.c)(94),{closeDialog:Y,threadId:X,returnFocusRef:ee,showThirdPartyMcpWarning:et}=e,en=void 0!==et&&et,ei=(0,x.Pk)(),ea=(0,v.b)(),[es,er]=(0,h.useState)(!1),[el,eo]=(0,h.useState)(!1),[ed,ec]=(0,h.useState)(!1),[eu,em]=(0,h.useState)(!1),{selectedThreadID:ep,ssoOrganizations:eh,apiUrl:ef,threads:eg}=ei;J[0]!==ep||J[1]!==X||J[2]!==eg?(t=eg.get(X||ep),J[0]=ep,J[1]=X,J[2]=eg,J[3]=t):t=J[3];let ey=t;J[4]!==ey?.sharedID?(n=()=>ey?.sharedID||"",J[4]=ey?.sharedID,J[5]=n):n=J[5];let[ex,ev]=(0,h.useState)(n);J[6]!==ey?(r=()=>ey?.sharedMessageID?ey.sharedMessageID:"",J[6]=ey,J[7]=r):r=J[7];let[eb,e_]=(0,h.useState)(r),ej=_.fV.origin,ew=`${ej}/copilot/share/${ex}`;J[8]!==es?(l=()=>{if(es){let e=setTimeout(()=>er(!1),1500);return()=>clearTimeout(e)}},d=[es],J[8]=es,J[9]=l,J[10]=d):(l=J[9],d=J[10]),(0,h.useEffect)(l,d),J[11]!==ed?(c=()=>{if(ed){let e=setTimeout(()=>ec(!1),1500);return()=>clearTimeout(e)}},f=[ed],J[11]=ed,J[12]=c,J[13]=f):(c=J[12],f=J[13]),(0,h.useEffect)(c,f),J[14]!==ew?(g=async()=>{try{await (0,b.D)(ew),er(!0),(0,s.BI)("dotcom_chat.activate",{target:"COPILOT_COPY_SHARED_CONVERSATION_LINK",mode:"immersive"})}catch{}},J[14]=ew,J[15]=g):g=J[15];let eN=g;J[16]!==ey?.sharedID||J[17]!==ep||J[18]!==X?(E=()=>{(X||ep)&&ev(ey?.sharedID||"")},J[16]=ey?.sharedID,J[17]=ep,J[18]=X,J[19]=E):E=J[19];let eC=ey?.sharedID;J[20]!==ep||J[21]!==eC||J[22]!==X?(R=[eC,ep,X],J[20]=ep,J[21]=eC,J[22]=X,J[23]=R):R=J[23],(0,h.useEffect)(E,R),J[24]!==ef||J[25]!==ea||J[26]!==ep||J[27]!==eh||J[28]!==X?(L=async()=>{eo(!0);let e=X||ep,t=new S.k(ef,eh),n=await t.shareThread(e,y.W.copilotShareActiveSubthread&&e===ep?ea.FindLastMessageID():"");if(n.ok){eo(!1);let{sharedAt:t,sharedID:i,sharedMessageID:a}=n.payload;ev(i),ec(!0),e_(a),ea.dispatch({type:"SHARED_THREAD_UPDATED",thread:{id:e,sharedID:i,sharedAt:t,sharedMessageID:a}}),(0,s.BI)("dotcom_chat.activate",{target:"COPILOT_CREATE_SHARED_CONVERSATION",mode:"immersive",originalThreadId:e,sharedThreadId:i})}else eo(!1)},J[24]=ef,J[25]=ea,J[26]=ep,J[27]=eh,J[28]=X,J[29]=L):L=J[29];let eS=L;J[30]!==ef||J[31]!==ea||J[32]!==ep||J[33]!==ex||J[34]!==eu||J[35]!==eh||J[36]!==X?(A=async()=>{if(!eu)return void em(!0);em(!1),eo(!0);let e=X||ep,t=new S.k(ef,eh),n=await t.unshareThread(e);if(n.ok){eo(!1),e_("");let{sharedID:t,sharedAt:i,sharedMessageID:a}=n.payload;ea.dispatch({type:"SHARED_THREAD_UPDATED",thread:{id:e,sharedID:t,sharedAt:i,sharedMessageID:a}}),(0,s.BI)("dotcom_chat.activate",{target:"COPILOT_UNSHARE_CONVERSATION",mode:"immersive",originalThreadId:e,sharedThreadId:ex})}else eo(!1)},J[30]=ef,J[31]=ea,J[32]=ep,J[33]=ex,J[34]=eu,J[35]=eh,J[36]=X,J[37]=A):A=J[37];let eI=A;J[38]!==eS||J[39]!==el||J[40]!==ex?(D=()=>{if(!ex)return(0,i.jsx)(j.Q,{variant:"primary",disabled:el,onClick:eS,children:"Share"})},J[38]=eS,J[39]=el,J[40]=ex,J[41]=D):D=J[41];let ek=D;J[42]!==eN||J[43]!==ex?(P=()=>{if(ex)return(0,i.jsx)(j.Q,{variant:"primary",autoFocus:!0,onClick:eN,children:"Copy link"})},J[42]=eN,J[43]=ex,J[44]=P):P=J[44];let eT=P;J[45]!==eI||J[46]!==el||J[47]!==ex?(O=()=>{if(ex)return(0,i.jsx)(j.Q,{variant:"danger",disabled:el,onClick:eI,children:"Unshare"})},J[45]=eI,J[46]=el,J[47]=ex,J[48]=O):O=J[48];let eE=O;J[49]!==ex||J[50]!==eu?(F=()=>{if(ex&&eu)return(0,i.jsx)(j.Q,{variant:"default",onClick:()=>em(!1),className:"ConversationSharingDialog-module__cancelButton--CL34L",children:"Cancel"})},J[49]=ex,J[50]=eu,J[51]=F):F=J[51];let eR=F;J[52]!==es||J[53]!==el||J[54]!==ex||J[55]!==eu||J[56]!==ed?(B=()=>el?(0,i.jsxs)("div",{className:T,children:[(0,i.jsx)(w.A,{size:"small",className:"ConversationSharingDialog-module__spinner--KpY5f"}),ex?"Unsharing chat...":"Sharing chat..."]}):eu?(0,i.jsx)("div",{className:T,children:(0,i.jsx)(N.A,{size:"medium",className:"ConversationSharingDialog-module__warningText--t4nnB",children:"Confirm unsharing this chat?"})}):es?(0,i.jsxs)("div",{className:T,children:[(0,i.jsx)(o.CheckIcon,{className:k}),(0,i.jsx)(N.A,{size:"medium",className:I,children:"Copied to clipboard"})]}):ed?(0,i.jsxs)("div",{className:T,children:[(0,i.jsx)(o.CheckIcon,{className:k}),(0,i.jsx)(N.A,{size:"medium",className:I,children:"Chat shared"})]}):ex?(0,i.jsxs)("div",{children:[(0,i.jsx)(o.UnlockIcon,{className:"ConversationSharingDialog-module__lockIcon--yCWzZ"}),(0,i.jsx)(N.A,{size:"medium",className:"ConversationSharingDialog-module__mutedText--r3ZSy",children:"Visible to anyone with the link"})]}):(0,i.jsx)("div",{}),J[52]=es,J[53]=el,J[54]=ex,J[55]=eu,J[56]=ed,J[57]=B):B=J[57];let eL=B,eA=ex?"Chat shared":"Share chat";return J[58]!==eb||J[59]!==ex||J[60]!==en?(M=(0,i.jsx)(C.B,{direction:"horizontal",padding:"none",align:"center",justify:"start",gap:"condensed",children:eb?(0,i.jsx)("span",{children:(0,i.jsx)("span",{className:"ConversationSharingDialog-module__snapshotText--XNu1W",children:"This shared chat is a snapshot, accessible to anyone with the link. It will not update with new messages."})}):ex?(0,i.jsx)("span",{children:`This chat and future messages are visible to anyone with the link. If private repository content
                is included, repository access is required to view.${en?" Third-party MCP tool calling is disabled while this thread is shared.":""}`}):(0,i.jsx)("span",{children:`When shared, this chat and future messages will be visible to anyone with the link. If private repository content is included, repository access is required to view.${en?" Third-party MCP tool calling will be disabled if the thread is shared.":""}`})}),J[58]=eb,J[59]=ex,J[60]=en,J[61]=M):M=J[61],J[62]!==ew||J[63]!==ex?(V=ex&&(0,i.jsx)("div",{className:"ConversationSharingDialog-module__innerContainer--OaIjU",children:(0,i.jsx)("div",{className:"ConversationSharingDialog-module__sharedLinkContainer--jDnVn",children:(0,i.jsxs)(u.A,{id:"share-link",className:"ConversationSharingDialog-module__textInputContainer--jHhX6",children:[(0,i.jsx)(u.A.Label,{children:"Share link"}),(0,i.jsx)(m.A,{size:"large",readOnly:!0,value:ex&&ew,className:"ConversationSharingDialog-module__textInput--DymUf"})]})})}),J[62]=ew,J[63]=ex,J[64]=V):V=J[64],J[65]!==M||J[66]!==V?($=(0,i.jsxs)(C.B,{direction:"vertical",gap:"condensed",children:[M,V]}),J[65]=M,J[66]=V,J[67]=$):$=J[67],J[68]!==eL?(U=(0,i.jsx)("div",{role:"status",children:eL()}),J[68]=eL,J[69]=U):U=J[69],J[70]!==ek?(q=ek(),J[70]=ek,J[71]=q):q=J[71],J[72]!==eR?(W=eR(),J[72]=eR,J[73]=W):W=J[73],J[74]!==eE?(H=eE(),J[74]=eE,J[75]=H):H=J[75],J[76]!==eT?(G=eT(),J[76]=eT,J[77]=G):G=J[77],J[78]!==q||J[79]!==W||J[80]!==H||J[81]!==G?(z=(0,i.jsxs)(C.B,{direction:"horizontal",gap:"condensed",align:"center",justify:"end",children:[q,W,H,G]}),J[78]=q,J[79]=W,J[80]=H,J[81]=G,J[82]=z):z=J[82],J[83]!==U||J[84]!==z?(K=(0,i.jsxs)(C.B,{direction:"horizontal",gap:"condensed",align:"center",justify:"space-between",className:"ConversationSharingDialog-module__buttonStack--gWe8E",children:[U,z]}),J[83]=U,J[84]=z,J[85]=K):K=J[85],J[86]!==$||J[87]!==K?(Q=(0,i.jsxs)("div",{className:"ConversationSharingDialog-module__container--wNKq6",children:[$,K]}),J[86]=$,J[87]=K,J[88]=Q):Q=J[88],J[89]!==Y||J[90]!==ee||J[91]!==eA||J[92]!==Q?(Z=(0,i.jsx)(p.l,{title:eA,onClose:Y,width:"large",returnFocusRef:ee,children:Q}),J[89]=Y,J[90]=ee,J[91]=eA,J[92]=Q,J[93]=Z):Z=J[93],Z};try{E.displayName||(E.displayName="ConversationSharingDialog")}catch{}var R=n(94236),L=n(1747),A=n(71941),D=n(41941);let P={json:{name:"JSON",mimeType:"application/json",exportHandler:function(e,t,n,i,a){let s,r,l=new Blob([(s=e.map(F),r=Object.fromEntries(t),JSON.stringify({currentUserLogin:n,threadUrl:O(i),threadName:a,messages:s,files:r},null,2))],{type:P.json.mimeType});return{url:URL.createObjectURL(l),exportName:`${M(a)}.json`}}},md:{name:"Markdown",mimeType:"text/markdown",exportHandler:B}};function O(e){return`${window.location.origin}/copilot/c/${e}`}function F(e){return{id:e.id,parentMessageID:e.parentMessageID,intent:e.intent,role:e.role,model:e.model,content:e.content,createdAt:e.createdAt,threadID:e.threadID,references:e.references,skillExecutions:e.skillExecutions}}async function B(e,t,n,i,a){let s=[new File([function(e,t,n,i){let a=e.filter(e=>"root"!==e.id),s=new Map;for(let e of a){let t=e.parentMessageID;if(t){s.has(t)||s.set(t,{childMessageCount:0});let e=s.get(t);e.childMessageCount+=1}}let r=`# Copilot Chat Conversation Export: ${i}

**User:** @${t}
**Thread URL:** ${O(n)}`,l=a.map(e=>{let n="user"===e.role?`## @${t}`:"## Copilot",i=e.content||"",a=`${n}

${i}
`;if(e.parentMessageID){let t=s.get(e.parentMessageID);t&&t.childMessageCount>1&&(a+=`
*System: User retried message*
`)}return a}).join(`
`);return`${r}

${l}`}(e,n,i,a)],`${M(a)}.md`)];if(t.size>0){for(let[,e]of t)for(let t of e)"value"in t&&"string"==typeof t.value&&s.push(new File([t.value],`v${t.version}_${t.name}`));let e=await (0,A._6)(s).blob();return{url:URL.createObjectURL(e),exportName:`${M(a)}.zip`}}{let e=new Blob(s,{type:P.md.mimeType});return{url:URL.createObjectURL(e),exportName:`${M(a)}.md`}}}function M(e){return(0,D.A)(`${new Date().toDateString()} ${e}`)}function V(e){(0,s.BI)("dotcom_chat.activate",{target:e,mode:"immersive"})}function $(e){let t,n,s,r,l=(0,a.c)(18),{fileType:o,threadName:c,threadId:u,currentUserLogin:m,messages:p}=e,h=(0,v.b)(),{items:f,versionedItems:g}=(0,L.xx)();l[0]!==f||l[1]!==g?(t=function(e,t){let n=new Map;for(let[,i]of t){let t=i.map(t=>e.get(t)).filter(e=>void 0!==e).map((e,t)=>({version:t+1,...e}));t.length>0&&t[0]?.type==="file"&&t[0]?.name&&n.set(t[0].name,t)}return n}(f,g),l[0]=f,l[1]=g,l[2]=t):t=l[2];let y=t,x=P[o].name;l[3]!==x?(n=x.toUpperCase(),l[3]=x,l[4]=n):n=l[4];let b=`CONVERSATION_CONTEXT_MENU_EXPORT_${n}`;l[5]!==m||l[6]!==o||l[7]!==y||l[8]!==h||l[9]!==p||l[10]!==b||l[11]!==u||l[12]!==c?(s=async()=>{try{let{url:e,exportName:t}=await P[o].exportHandler(p,y,m,u,c),n=document.createElement("a");n.href=e,n.download=t,n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n),V(`${b}_SUCCEEDED`),setTimeout(()=>URL.revokeObjectURL(e),0)}catch{V(`${b}_DOWNLOAD_FAILED`),h.addAmbientError("There was an error exporting the conversation. Please try again.")}},l[5]=m,l[6]=o,l[7]=y,l[8]=h,l[9]=p,l[10]=b,l[11]=u,l[12]=c,l[13]=s):s=l[13];let _=s,j=`Export conversation as ${x}`;return l[14]!==x||l[15]!==_||l[16]!==j?(r=(0,i.jsx)(d.l.Item,{"aria-label":j,onSelect:_,children:x}),l[14]=x,l[15]=_,l[16]=j,l[17]=r):r=l[17],r}try{$.displayName||($.displayName="ExportActionItem")}catch{}function U(e){let t,n,s=(0,a.c)(6),{threadName:r,threadId:l,currentUserLogin:c,messages:u,selectedThreadID:m}=e;return m!==l?null:(s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(R.W.Anchor,{children:(0,i.jsxs)(d.l.Item,{children:[(0,i.jsx)(d.l.LeadingVisual,{children:(0,i.jsx)(o.DownloadIcon,{})}),"Export"]})}),s[0]=t):t=s[0],s[1]!==c||s[2]!==u||s[3]!==l||s[4]!==r?(n=(0,i.jsxs)(R.W,{children:[t,(0,i.jsx)(R.W.Overlay,{children:(0,i.jsxs)(d.l,{children:[(0,i.jsx)($,{threadName:r,fileType:"json",threadId:l,currentUserLogin:c,messages:u}),(0,i.jsx)($,{threadName:r,fileType:"md",threadId:l,currentUserLogin:c,messages:u})]})})]}),s[1]=c,s[2]=u,s[3]=l,s[4]=r,s[5]=n):n=s[5],n)}try{U.displayName||(U.displayName="ExportActionList")}catch{}function q(e){let t,n,l,c,u,m,p,h,f,y,v,b=(0,a.c)(32),{onOpenDialog:_,showShare:j,hideShareOnDesktop:w,isShared:N,threadName:C,threadId:S}=e,I=void 0===j||j,k=void 0!==w&&w,T=void 0!==N&&N,{canShareThread:E}=(0,r.X)(),{isWaitingOnCopilot:R,messages:L,currentUserLogin:A,selectedThreadID:D}=(0,x.Pk)();b[0]!==L?(t=(0,g.Q7)(L),b[0]=L,b[1]=t):t=b[1];let P=t;b[2]!==L?(n=(0,g.UM)(L),b[2]=L,b[3]=n):n=b[3];let O=n,F=P.length>0||R||O;return b[4]!==_?(l=()=>{(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU_RENAME",mode:"immersive"}),_("rename")},b[4]=_,b[5]=l):l=b[5],b[6]===Symbol.for("react.memo_cache_sentinel")?(c=(0,i.jsx)(d.l.LeadingVisual,{children:(0,i.jsx)(o.PencilIcon,{})}),b[6]=c):c=b[6],b[7]!==l?(u=(0,i.jsxs)(d.l.Item,{onSelect:l,children:[c,"Rename"]}),b[7]=l,b[8]=u):u=b[8],b[9]!==E||b[10]!==k||b[11]!==T||b[12]!==_||b[13]!==F||b[14]!==I?(m=I&&E&&(0,i.jsxs)(d.l.Item,{className:k?"ConversationActions-module__hideOnDesktop--J5K5t":void 0,disabled:F,onSelect:()=>{(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU_SHARE",mode:"immersive"}),_("share")},children:[(0,i.jsx)(d.l.LeadingVisual,{children:T?(0,i.jsx)(o.UnlockIcon,{}):(0,i.jsx)(o.LockIcon,{})}),"Share"]}),b[9]=E,b[10]=k,b[11]=T,b[12]=_,b[13]=F,b[14]=I,b[15]=m):m=b[15],b[16]!==A||b[17]!==L||b[18]!==D||b[19]!==S||b[20]!==C?(p=(0,i.jsx)(U,{threadName:C,threadId:S,currentUserLogin:A,messages:L,selectedThreadID:D}),b[16]=A,b[17]=L,b[18]=D,b[19]=S,b[20]=C,b[21]=p):p=b[21],b[22]!==_?(h=()=>{(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU_DELETE",mode:"immersive"}),_("delete")},b[22]=_,b[23]=h):h=b[23],b[24]===Symbol.for("react.memo_cache_sentinel")?(f=(0,i.jsx)(d.l.LeadingVisual,{children:(0,i.jsx)(o.TrashIcon,{})}),b[24]=f):f=b[24],b[25]!==h?(y=(0,i.jsxs)(d.l.Item,{variant:"danger",onSelect:h,children:[f,"Delete"]}),b[25]=h,b[26]=y):y=b[26],b[27]!==p||b[28]!==y||b[29]!==u||b[30]!==m?(v=(0,i.jsxs)(i.Fragment,{children:[u,m,p,y]}),b[27]=p,b[28]=y,b[29]=u,b[30]=m,b[31]=v):v=b[31],v}function W(e){let t,n,r,o,d,c,u,m,p=(0,a.c)(35),{visibleDialog:h,onClose:g,threadName:b,threadId:_,selectedThreadId:j,onStartLoading:w,onFinishLoading:N,returnFocusRef:C}=e,{threads:S}=(0,x.Pk)(),I=(0,v.b)(),k=(0,f.G)();p[0]===Symbol.for("react.memo_cache_sentinel")?(t=["copilot-chat-mcps"],p[0]=t):t=p[0],p[1]!==I?(n={queryKey:t,queryFn:async()=>I.service.fetchMCPServers(),placeholderData:H},p[1]=I,p[2]=n):n=p[2];let{data:T}=(0,l.I)(n);p[3]!==T?(r=T||[],p[3]=T,p[4]=r):r=p[4];let R=r,L=y.W.copilotThirdPartyMcp&&R.length>0;p[5]!==g?(o=()=>{(0,s.BI)("dotcom_chat.activate",{target:"COPILOT_SHARE_DIALOG_CLOSE",mode:"immersive"}),g()},p[5]=g,p[6]=o):o=p[6];let A=o;p[7]!==I||p[8]!==k||p[9]!==g||p[10]!==N||p[11]!==w||p[12]!==j||p[13]!==_||p[14]!==S?(d=async()=>{(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_LIST_ACTION_DELETE",mode:"immersive"}),w();let e=S.get(_);e&&(_===j&&await k({clearTopic:!0,includeThreads:!1}),await I.deleteThread(e)),N(),g()},p[7]=I,p[8]=k,p[9]=g,p[10]=N,p[11]=w,p[12]=j,p[13]=_,p[14]=S,p[15]=d):d=p[15];let D=d;p[16]!==I||p[17]!==g||p[18]!==N||p[19]!==w||p[20]!==_||p[21]!==S?(c=async e=>{(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_LIST_ACTION_RENAME",mode:"immersive"}),w();let t=S.get(_);t&&await I.renameThread(t,e),N(),g()},p[16]=I,p[17]=g,p[18]=N,p[19]=w,p[20]=_,p[21]=S,p[22]=c):c=p[22];let P=c;return p[23]!==A||p[24]!==D||p[25]!==g||p[26]!==C||p[27]!==L||p[28]!==P||p[29]!==_||p[30]!==b||p[31]!==h?(u="delete"===h?(0,i.jsx)(G,{onCancel:g,onConfirm:D,returnFocusRef:C}):"rename"===h?(0,i.jsx)(z,{onCancel:g,currentName:b,onSubmit:P,returnFocusRef:C}):"share"===h?(0,i.jsx)(E,{closeDialog:A,threadId:_,returnFocusRef:C,showThirdPartyMcpWarning:L}):null,p[23]=A,p[24]=D,p[25]=g,p[26]=C,p[27]=L,p[28]=P,p[29]=_,p[30]=b,p[31]=h,p[32]=u):u=p[32],p[33]!==u?(m=(0,i.jsx)(i.Fragment,{children:u}),p[33]=u,p[34]=m):m=p[34],m}function H(e){return e}let G=e=>{let t,n=(0,a.c)(4),{onConfirm:r,onCancel:l,returnFocusRef:o}=e;return n[0]!==l||n[1]!==r||n[2]!==o?(t=(0,i.jsx)(c.K,{title:"Delete chat",onClose:e=>{if("confirm"===e){(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_DELETE_CONFIRM",mode:"immersive"});let e=o.current?.closest("nav,aside,section");r(),window.setTimeout(()=>{e instanceof HTMLElement&&e.focus()},0)}else(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_DELETE_CANCEL",mode:"immersive"}),l(),window.setTimeout(()=>o.current?.focus(),0)},confirmButtonContent:"Delete",confirmButtonType:"danger",children:"Are you sure you want to delete this chat? This action cannot be undone."}),n[0]=l,n[1]=r,n[2]=o,n[3]=t):t=n[3],t},z=e=>{let t,n,r,l,o,d,c,f,g,y,x,v,b=(0,a.c)(34),{currentName:_,onCancel:j,onSubmit:w,returnFocusRef:N}=e,[C,S]=(0,h.useState)(void 0),I=(0,h.useRef)(null),k=(0,h.useId)(),T=(0,h.useId)();b[0]!==w?(t=e=>{e.preventDefault();let t=I.current?.value?.trim()??"";t?t.length>100?(S("max_length"),I.current?.focus()):(S(void 0),w(t)):(S("required"),I.current?.focus())},b[0]=w,b[1]=t):t=b[1];let E=t;b[2]!==j?(n=()=>{(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_RENAME_CANCEL",mode:"immersive"}),j()},b[2]=j,b[3]=n):n=b[3];let R=n;b[4]!==T?(r=(0,i.jsx)("span",{id:T,children:"Rename chat"}),b[4]=T,b[5]=r):r=b[5],b[6]!==R?(l={content:"Cancel",onClick:R},b[6]=R,b[7]=l):l=b[7],b[8]!==k?(o={content:"Update",buttonType:"primary",type:"submit",form:k,onClick:K},b[8]=k,b[9]=o):o=b[9],b[10]!==l||b[11]!==o?(d=[l,o],b[10]=l,b[11]=o,b[12]=d):d=b[12],b[13]===Symbol.for("react.memo_cache_sentinel")?(c=(0,i.jsx)(u.A.Label,{visuallyHidden:!0,children:"Rename chat"}),b[13]=c):c=b[13];let L=C?"error-message":void 0,A=C?"true":void 0;return b[14]!==_||b[15]!==T||b[16]!==L||b[17]!==A?(f=(0,i.jsx)(m.A,{"aria-labelledby":T,"aria-describedby":L,"aria-invalid":A,ref:I,defaultValue:_,block:!0}),b[14]=_,b[15]=T,b[16]=L,b[17]=A,b[18]=f):f=b[18],b[19]!==C?(g=C&&(0,i.jsx)(u.A.Validation,{id:"error-message",variant:"error",children:"required"===C?"Enter a name":"Name cannot exceed 100 characters"}),b[19]=C,b[20]=g):g=b[20],b[21]!==f||b[22]!==g?(y=(0,i.jsxs)(u.A,{required:!0,children:[c,f,g]}),b[21]=f,b[22]=g,b[23]=y):y=b[23],b[24]!==k||b[25]!==E||b[26]!==y?(x=(0,i.jsx)("form",{id:k,onSubmit:E,children:y}),b[24]=k,b[25]=E,b[26]=y,b[27]=x):x=b[27],b[28]!==R||b[29]!==N||b[30]!==x||b[31]!==r||b[32]!==d?(v=(0,i.jsx)(p.l,{title:r,onClose:R,width:"small",footerButtons:d,initialFocusRef:I,returnFocusRef:N,children:x}),b[28]=R,b[29]=N,b[30]=x,b[31]=r,b[32]=d,b[33]=v):v=b[33],v};try{q.displayName||(q.displayName="ConversationActions")}catch{}try{W.displayName||(W.displayName="ConversationActionDialogs")}catch{}try{G.displayName||(G.displayName="DeleteDialog")}catch{}try{z.displayName||(z.displayName="RenameDialog")}catch{}function K(){return(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_RENAME_CONFIRM",mode:"immersive"})}},19336:(e,t,n)=>{n.d(t,{G:()=>p});var i=n(74848),a=n(21728),s=n(34031),r=n(11128),l=n(12357),o=n(90177),d=n(53419),c=n(38621),u=n(81945);let m=[];function p(e){let t,n=(0,a.c)(10),{outputNodeExists:p,isRunning:h,isLoading:f,nodeValue:g,nodeError:y,validationErrors:x,additionalActions:v,onRun:b,onStop:_}=e,j=void 0!==f&&f,w=void 0===x?m:x;return n[0]!==v||n[1]!==j||n[2]!==h||n[3]!==y||n[4]!==g||n[5]!==b||n[6]!==_||n[7]!==p||n[8]!==w?(t=(0,i.jsx)(i.Fragment,{children:p?j?(0,i.jsxs)("div",{className:"ExecutionView-module__loadingState--bX4_m",children:[(0,i.jsx)(u.O,{variant:"rounded",height:"sm",width:"random"}),(0,i.jsx)(u.O,{variant:"rounded",height:"sm",width:"random"}),(0,i.jsx)(u.O,{variant:"rounded",height:"sm",width:"random"})]}):h&&!g?(0,i.jsx)(s.M,{isRunning:h,messages:{running:"Running the loop...",waiting:"Waiting..."}}):w.length>0?(0,i.jsx)(r.n,{errors:w,title:"Oops, this loop is configured incorrectly",additionalActions:v}):y?(0,i.jsx)(r.n,{errors:[y],title:"Oops, there was an error running this loop",additionalActions:v}):g?(0,i.jsx)(l.U,{isRunning:h,nodeValue:g}):(0,i.jsxs)("div",{className:"ExecutionView-module__emptyState--gD9en",children:[(0,i.jsxs)("div",{className:"ExecutionView-module__emptyStateText--awSRT",children:[(0,i.jsx)("h3",{className:"ExecutionView-module__emptyStateTitle--F8TRM",children:"No output yet"}),(0,i.jsx)("span",{children:"Run this loop to generate output"})]}),(0,i.jsx)(o.c,{onClick:()=>{b(),(0,d.BI)("node_action.select",{target:"PANEL_NODE_EMPTY_STATE_RUN",mode:"loops"})},onStop:()=>{_(),(0,d.BI)("node_action.select",{target:"PANEL_NODE_EMPTY_STATE_STOP",mode:"loops"})},isLoading:h,value:g,variant:"default",leadingVisual:(0,i.jsx)(c.SyncIcon,{})})]}):(0,i.jsx)("p",{children:"No output nodes found in this loop."})}),n[0]=v,n[1]=j,n[2]=h,n[3]=y,n[4]=g,n[5]=b,n[6]=_,n[7]=p,n[8]=w,n[9]=t):t=n[9],t}try{p.displayName||(p.displayName="ExecutionView")}catch{}},19769:(e,t,n)=>{n.d(t,{N:()=>nO});var i,a,s=n(21728),r=n(57944),l=n(50467),o=n(74848),d=n(67718),c=n(11680),u=n(38621);function m(e){let t,n,i,a=(0,s.c)(12),{headSha:r,basePath:l,isSessionRunning:m,isSessionReadonly:p,agentDisplayName:h}=e,f=void 0===h?"Agent":h;a[0]!==f||a[1]!==p||a[2]!==m?(t=m&&(0,o.jsx)(c.l,{variant:"info",title:`${f} is working`,description:p?`${f} code review in progress.`:`${f} is still working. Changes will automatically appear once they have been committed to the branch.`,hideTitle:!0,icon:(0,o.jsx)(u.InfoIcon,{}),className:"PullRequestFilesChangedPreview-module__banner--KQCNJ"}),a[0]=f,a[1]=p,a[2]=m,a[3]=t):t=a[3];let g=!p;return a[4]!==l||a[5]!==r||a[6]!==p||a[7]!==g?(n=(0,o.jsx)(d.b.Container,{children:(0,o.jsx)(d.b.Viewer,{headSha:r,basePath:l,forceUnifiedView:!0,treeEnableInlineCompactMode:!0,useFileTree:!0,useBasicToolbar:!0,useInlineComments:p,userCanComment:g},l)}),a[4]=l,a[5]=r,a[6]=p,a[7]=g,a[8]=n):n=a[8],a[9]!==t||a[10]!==n?(i=(0,o.jsxs)("div",{className:"PullRequestFilesChangedPreview-module__container--mKeOB",children:[t,n]}),a[9]=t,a[10]=n,a[11]=i):i=a[11],i}try{m.displayName||(m.displayName="PullRequestFilesChangedPreview")}catch{}function p(e){let t,n=(0,s.c)(6),{reference:i}=e,{headSha:a,basePath:r,isSessionRunning:l,isSessionReadonly:d,agentDisplayName:c}=i;return n[0]!==c||n[1]!==r||n[2]!==a||n[3]!==d||n[4]!==l?(t=(0,o.jsx)(m,{headSha:a,basePath:r,isSessionRunning:l,isSessionReadonly:d,agentDisplayName:c}),n[0]=c,n[1]=r,n[2]=a,n[3]=d,n[4]=l,n[5]=t):t=n[5],t}try{p.displayName||(p.displayName="PullRequestFilesChangedPluginPreview")}catch{}var h=n(70840),f=n(39837),g=n(35247),y=n(77430),x=n(62935),v=n(84268),b=n(72579),_=n(16051),j=n(81960),w=n(98755),N=n(99896),C=n(10422),S=n(96540),I=n(25407),k=n(96379);let T="PullRequestOverviewPreview-module__sessionStatusWrapper--TEpIE",E="PullRequestOverviewPreview-module__separator--EAqT5",R="PullRequestOverviewPreview-module__summaryHeader--KeZPa",L="PullRequestOverviewPreview-module__summaryMetadata--R418e",A="PullRequestOverviewPreview-module__modelDisplay--HH7SO",D="PullRequestOverviewPreview-module__modelIcon--NuGXS";function P(e){let t,n,i,a,r,l,d,c,u=(0,s.c)(22),{headSha:m,repositoryNwo:p,commitAliveChannel:h}=e;u[0]!==p?(t=p?.split("/")??[],u[0]=p,u[1]=t):t=u[1];let[f,g]=t,y=void 0===f?"":f,x=void 0===g?"":g;u[2]!==x||u[3]!==y?(n={ownerLogin:y,name:x},u[2]=x,u[3]=y,u[4]=n):n=u[4];let[v,b]=function(e,t){let n,i,a=(0,s.c)(6),[r,l]=(0,S.useState)();a[0]!==e||a[1]!==t?(n=async()=>{if(!e||!t)return void l(void 0);let n=(0,I.vki)(t,e),i=await (0,k.lS)(n);i.ok&&l(await i.json())},a[0]=e,a[1]=t,a[2]=n):n=a[2];let o=n;return a[3]!==r||a[4]!==o?(i=[r,o],a[3]=r,a[4]=o,a[5]=i):i=a[5],i}(m,n);u[5]!==h?(i={stateChannel:h,deployedChannel:null,reviewStateChannel:null,workflowsChannel:null,mergeQueueChannel:null,headRefChannel:null,baseRefChannel:null,gitMergeStateChannel:null,pullRequestChannel:null},u[5]=h,u[6]=i):i=u[6];let _=i;if(u[7]!==_||u[8]!==b?(a={channels:_,refetchQuery:b},u[7]=_,u[8]=b,u[9]=a):a=u[9],(0,C.cY)(a),u[10]!==b||u[11]!==m||u[12]!==p?(r=()=>{m&&p&&b()},l=[m,p,b],u[10]=b,u[11]=m,u[12]=p,u[13]=r,u[14]=l):(r=u[13],l=u[14]),(0,S.useEffect)(r,l),!m||!p||!v||0===v.checkRuns.length)return null;u[15]!==v?(d=()=>{if(!v?.checkRuns)return"";let e=v.checkRuns.length,t=v.checkRuns.filter(O).length;return`${t}/${e}`},u[15]=v,u[16]=d):d=u[16];let j=d,w=function(e){switch(e){case"SUCCEEDED":return"success";case"FAILED":case"UNSUCCESSFUL":return"failure";default:return"pending"}}(v?.checksHeaderState||""),T=j();return u[17]!==v||u[18]!==b||u[19]!==w||u[20]!==T?(c=(0,o.jsx)("span",{className:"PullRequestOverviewPreview-module__checksButton--yqdFS",children:(0,o.jsx)(N.B6,{statusRollup:w,combinedStatus:v,onWillOpenPopup:b,size:"small",variant:"default",descriptionText:T})}),u[17]=v,u[18]=b,u[19]=w,u[20]=T,u[21]=c):c=u[21],c}function O(e){return"success"===e.state}try{P.displayName||(P.displayName="ChecksStatusButton")}catch{}var F=n(88984),B=n(55127),M=n.n(B),V=n(69599);function $(e){let t,n,i,a,r,l,d,c,m,p,N,C,S,I,k,O,B,$,U,q,W,H=(0,s.c)(64),{title:G,number:z,body:K,bodyHTML:Q,repositoryNwo:Z,baseRef:J,headRef:Y,headSha:X,sessionState:ee,sessionUpdatedAt:et,sessionCount:en,premiumRequestCount:ei,selectedModel:ea,isSingleSessionView:es,commitAliveChannel:er,isCopilotCodingAgent:el}=e;H[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,V.G7)("mission_control_use_body_html"),H[0]=t):t=H[0];let eo=t;H[1]!==ee?(n=()=>{if(!ee)return null;switch(ee){case"completed":return(0,o.jsx)(u.CheckCircleFillIcon,{className:"PullRequestOverviewPreview-module__iconCompleted--XBgZD",size:16});case"failed":case"timed_out":return(0,o.jsx)(u.XCircleFillIcon,{className:"PullRequestOverviewPreview-module__iconFailed--bZUms",size:16});case"in_progress":return(0,o.jsx)(F.w,{});default:return null}},H[1]=ee,H[2]=n):n=H[2];let ed=n;H[3]!==ee||H[4]!==et?(i=()=>(0,o.jsxs)("span",{className:T,children:["completed"===ee&&(0,o.jsx)("span",{children:"Completed"}),"failed"===ee&&(0,o.jsx)("span",{children:"Failed"}),"timed_out"===ee&&(0,o.jsx)("span",{children:"Timed out"}),"in_progress"===ee&&(0,o.jsx)("span",{children:"Started"}),et&&(0,o.jsx)(x.A,{date:new Date(et),tense:"past"})]}),H[3]=ee,H[4]=et,H[5]=i):i=H[5];let ec=i;H[6]!==J||H[7]!==Y||H[8]!==Z?(a=()=>(0,o.jsxs)(o.Fragment,{children:[Z&&(0,o.jsx)(v.A,{href:`/${Z}`,className:"PullRequestOverviewPreview-module__repositoryName--O0p8d",children:Z}),J&&Y&&(0,o.jsxs)("span",{className:"PullRequestOverviewPreview-module__branchWrapper--IIzXz",children:[(0,o.jsxs)("span",{className:"PullRequestOverviewPreview-module__branchComparison--QaaJZ",children:[(0,o.jsx)(b.A,{href:`/${Z}/tree/${J}`,children:J}),(0,o.jsx)(u.ArrowLeftIcon,{}),(0,o.jsx)(b.A,{href:`/${Z}/tree/${Y}`,children:Y})]}),(0,o.jsx)("span",{className:"PullRequestOverviewPreview-module__copyButtonWrapper--LAwSf",children:(0,o.jsx)(w.T,{ariaLabel:"Copy head branch name to clipboard",size:"small",textToCopy:Y})})]})]}),H[6]=J,H[7]=Y,H[8]=Z,H[9]=a):a=H[9];let eu=a;H[10]!==G?(r=(0,o.jsx)("span",{children:G}),H[10]=G,H[11]=r):r=H[11];let em=`/${Z}/pull/${z}`;H[12]!==z||H[13]!==em?(l=(0,o.jsxs)(v.A,{className:"PullRequestOverviewPreview-module__pullNumber--LvQ2Y",href:em,children:["#",z]}),H[12]=z,H[13]=em,H[14]=l):l=H[14],H[15]!==r||H[16]!==l?(d=(0,o.jsx)(_.z.TitleArea,{children:(0,o.jsx)(_.z.Title,{className:"PullRequestOverviewPreview-module__titleContainer--lTxTc",as:"h1",children:(0,o.jsxs)("span",{children:[r," ",l]})})}),H[15]=r,H[16]=l,H[17]=d):d=H[17],H[18]!==ed?(c=ed(),H[18]=ed,H[19]=c):c=H[19],H[20]!==ec?(m=ec(),H[20]=ec,H[21]=m):m=H[21],H[22]!==m||H[23]!==c?(p=(0,o.jsxs)("span",{className:T,children:[c,m]}),H[22]=m,H[23]=c,H[24]=p):p=H[24],H[25]!==Z||H[26]!==et?(N=et&&Z&&(0,o.jsx)("span",{className:E,children:" \xb7 "}),H[25]=Z,H[26]=et,H[27]=N):N=H[27],H[28]!==eu?(C=eu(),H[28]=eu,H[29]=C):C=H[29];let ep=X||"",eh=Z||"";H[30]!==er||H[31]!==ep||H[32]!==eh?(S=(0,o.jsx)(P,{headSha:ep,repositoryNwo:eh,commitAliveChannel:er}),H[30]=er,H[31]=ep,H[32]=eh,H[33]=S):S=H[33],H[34]!==p||H[35]!==N||H[36]!==C||H[37]!==S?(I=(0,o.jsx)(_.z.Description,{children:(0,o.jsxs)("div",{className:"PullRequestOverviewPreview-module__sessionStatus--Wu0ff",children:[p,N,C,S]})}),H[34]=p,H[35]=N,H[36]=C,H[37]=S,H[38]=I):I=H[38],H[39]!==I||H[40]!==d?(k=(0,o.jsxs)(_.z,{children:[d,I]}),H[39]=I,H[40]=d,H[41]=k):k=H[41];let ef=g.W.codingAgentModelSelection?!es&&ei>0&&void 0!==en&&en>0?R:"PullRequestOverviewPreview-module__summaryHeaderModelOnly--KXbJj":R;return H[42]===Symbol.for("react.memo_cache_sentinel")?(O=(0,o.jsx)(j.A,{as:"h2",className:"PullRequestOverviewPreview-module__summaryHeading--xI39Z",children:"Summary"}),H[42]=O):O=H[42],H[43]!==el||H[44]!==es||H[45]!==ei||H[46]!==ea||H[47]!==en||H[48]!==et?(B=g.W.codingAgentModelSelection&&el?!es&&ei>0&&void 0!==en&&en>0?(0,o.jsxs)("div",{className:L,children:[ea&&(0,o.jsxs)("span",{className:A,children:[ea.logoURL?(0,o.jsx)(y.r,{alt:`${ea.vendor} logo`,square:!0,size:18,src:ea.logoURL,className:D}):(0,o.jsx)(u.CopilotIcon,{className:D}),(0,o.jsx)("span",{children:ea.displayName})]}),(0,o.jsxs)("span",{children:[ea&&(0,o.jsx)("span",{className:E,children:" \xb7 "}),en," ",M()("session",en)]}),ei&&(0,o.jsxs)("span",{children:[(0,o.jsx)("span",{className:E,children:" \xb7 "}),ei," premium ",M()("request",ei)]}),et&&(0,o.jsxs)("span",{children:[(0,o.jsx)("span",{className:E,children:" \xb7 "}),"Last updated ",(0,o.jsx)(x.A,{date:new Date(et),tense:"past"})]})]}):(0,o.jsx)("div",{className:L,children:ea&&(0,o.jsxs)("span",{className:A,children:[ea.logoURL?(0,o.jsx)(y.r,{alt:`${ea.vendor} logo`,square:!0,size:18,src:ea.logoURL,className:D}):(0,o.jsx)(u.CopilotIcon,{className:D}),(0,o.jsx)("span",{children:ea.displayName})]})}):(0,o.jsx)("div",{className:L,children:!es&&ei>0&&void 0!==en&&en>0&&(0,o.jsxs)(o.Fragment,{children:[en," ",M()("session",en),ei&&(0,o.jsxs)("span",{children:[" ","\xb7 ",ei," premium ",M()("request",ei)]}),et&&(0,o.jsxs)("span",{children:[" ","\xb7 Last updated ",(0,o.jsx)(x.A,{date:new Date(et),tense:"past"})]})]})}),H[43]=el,H[44]=es,H[45]=ei,H[46]=ea,H[47]=en,H[48]=et,H[49]=B):B=H[49],H[50]!==ef||H[51]!==B?($=(0,o.jsxs)("div",{className:ef,children:[O,B]}),H[50]=ef,H[51]=B,H[52]=$):$=H[52],H[53]!==K||H[54]!==Q||H[55]!==z||H[56]!==Z?(U=(0,o.jsx)("div",{className:"PullRequestOverviewPreview-module__summaryContent--YREy7",children:eo&&Q?(0,o.jsx)("div",{className:"PullRequestOverviewPreview-module__markdownBody--BLhsD",children:(0,o.jsx)(f.A,{verifiedHTML:Q})}):K?(0,o.jsx)(h.G,{content:{value:K,name:`pull-request-${z}-${Z}.md`},hideHeadingAnchors:!0,fallbackToRaw:!0,useLoadingSkeletonWithOptions:[{size:"bodyMedium",lines:3},{size:"titleLarge",lines:1},{size:"bodyMedium",lines:8}]}):(0,o.jsx)("p",{className:"PullRequestOverviewPreview-module__emptyDescription--X5Q_t",children:"No description provided."})}),H[53]=K,H[54]=Q,H[55]=z,H[56]=Z,H[57]=U):U=H[57],H[58]!==$||H[59]!==U?(q=(0,o.jsxs)("div",{className:"PullRequestOverviewPreview-module__summaryBox--S2PyJ",children:[$,U]}),H[58]=$,H[59]=U,H[60]=q):q=H[60],H[61]!==k||H[62]!==q?(W=(0,o.jsxs)("div",{className:"PullRequestOverviewPreview-module__container--BrFOa",children:[k,q]}),H[61]=k,H[62]=q,H[63]=W):W=H[63],W}try{$.displayName||($.displayName="PullRequestOverviewPreview")}catch{}function U(e){let t,n=(0,s.c)(2),{reference:i}=e;return"pr-overview"!==i.type?null:(n[0]!==i?(t=(0,o.jsx)($,{...i}),n[0]=i,n[1]=t):t=n[1],t)}try{U.displayName||(U.displayName="PullRequestOverviewPluginPreview")}catch{}var q=n(76143),W=n(33592),H=n(1747),G=n(21502),z=n(42312),K=n(27912),Q=n(61526),Z=n(76977),J=n(86101),Y=n(78223),X=n(46251),ee=n(53419),et=n(26108);function en(e){let t,n=(0,s.c)(4),{isContentPreviewOpen:i,openPreviewPane:a}=e,r=(0,z.U)();return n[0]!==r||n[1]!==i||n[2]!==a?(t=!i&&(0,o.jsx)(et.K,{icon:u.SidebarExpandIcon,"aria-label":"Open workbench",size:"small",onClick:()=>{a(),(0,ee.BI)("dotcom_chat.activate",{target:"OPEN_PREVIEW_PANE_BUTTON",mode:"immersive",context:"agent_sessions"})},ref:r}),n[0]=r,n[1]=i,n[2]=a,n[3]=t):t=n[3],t}try{en.displayName||(en.displayName="PreviewPaneButton")}catch{}var ei=n(22456),ea=n(10510),es=n(32870),er=n(94236),el=n(5524),eo=n(99223),ed=n(13107),ec=n(2635);function eu(e){let t,n,i,a,r,l,d,c,m,p,h,f,g,y,x,v,b,_,j,w,N,C,S,I,k,T=(0,s.c)(57),{pull:E}=e;T[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,V.G7)("open_agent_session_in_vscode_insiders"),T[0]=t):t=T[0];let R=t;T[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,V.G7)("open_agent_session_in_vscode_stable"),T[1]=n):n=T[1];let L=n;T[2]!==E.global_relay_id||T[3]!==E.head_ref_name||T[4]!==E.repository_nwo?(i=(0,ei.UU)(E.repository_nwo,E.global_relay_id,E.head_ref_name),T[2]=E.global_relay_id,T[3]=E.head_ref_name,T[4]=E.repository_nwo,T[5]=i):i=T[5];let A=i;T[6]!==E.global_relay_id||T[7]!==E.head_ref_name||T[8]!==E.repository_nwo?(a=(0,ei.PZ)(E.repository_nwo,E.global_relay_id,E.head_ref_name),T[6]=E.global_relay_id,T[7]=E.head_ref_name,T[8]=E.repository_nwo,T[9]=a):a=T[9];let D=a;T[10]!==E.number||T[11]!==E.repository_nwo?(r=(0,ei.NI)(E.repository_nwo,E.number),T[10]=E.number,T[11]=E.repository_nwo,T[12]=r):r=T[12];let P=r;T[13]!==E.head_ref_name||T[14]!==E.repository_id?(l=(0,ei.U6)(E.repository_id,E.head_ref_name),T[13]=E.head_ref_name,T[14]=E.repository_id,T[15]=l):l=T[15];let O=l,{openFeedback:F,FeedbackDialog:B}=(0,es.f)(),M=(0,ec.A3)("optedInToUserFeedback");T[16]!==F?(d=()=>F(),T[16]=F,T[17]=d):d=T[17];let $=d;T[18]!==E.url?(c=()=>{window.open(E.url,"_blank")},T[18]=E.url,T[19]=c):c=T[19];let U=c;T[20]===Symbol.for("react.memo_cache_sentinel")?(m=(0,eo.k)(),T[20]=m):m=T[20];let q=m;T[21]!==E.head_ref_name||T[22]!==E.repository_id?(p=(0,ed.QS)(E.repository_id,E.head_ref_name),T[21]=E.head_ref_name,T[22]=E.repository_id,T[23]=p):p=T[23];let W=!!p&&!q;return T[24]===Symbol.for("react.memo_cache_sentinel")?(h=(0,o.jsx)(er.W.Anchor,{children:(0,o.jsx)(et.K,{icon:u.KebabHorizontalIcon,variant:"invisible","aria-label":"More options",size:"small"})}),T[24]=h):h=T[24],T[25]===Symbol.for("react.memo_cache_sentinel")?(f=(0,o.jsx)(el.l.LeadingVisual,{children:(0,o.jsx)(u.GitPullRequestIcon,{})}),T[25]=f):f=T[25],T[26]!==U?(g=(0,o.jsxs)(el.l.Item,{onSelect:U,children:[f,"View pull request"]}),T[26]=U,T[27]=g):g=T[27],T[28]!==$||T[29]!==M?(y=M&&(0,o.jsxs)(el.l.Item,{onSelect:$,children:[(0,o.jsx)(el.l.LeadingVisual,{children:(0,o.jsx)(u.CommentIcon,{})}),"Give feedback"]}),T[28]=$,T[29]=M,T[30]=y):y=T[30],T[31]===Symbol.for("react.memo_cache_sentinel")?(x=(0,o.jsx)(el.l.Divider,{}),T[31]=x):x=T[31],T[32]===Symbol.for("react.memo_cache_sentinel")?(v=(0,o.jsx)(el.l.GroupHeading,{children:"Open in"}),T[32]=v):v=T[32],T[33]!==A?(b=L&&(0,o.jsxs)(el.l.Item,{onSelect:A,children:[(0,o.jsx)(el.l.LeadingVisual,{children:(0,o.jsx)(u.VscodeIcon,{})}),"Open in VS Code"]}),T[33]=A,T[34]=b):b=T[34],T[35]!==D?(_=R&&(0,o.jsxs)(el.l.Item,{onSelect:D,children:[(0,o.jsx)(el.l.LeadingVisual,{children:(0,o.jsx)(u.VscodeIcon,{})}),"Open in VS Code Insiders"]}),T[35]=D,T[36]=_):_=T[36],T[37]===Symbol.for("react.memo_cache_sentinel")?(j=(0,o.jsx)(el.l.LeadingVisual,{children:(0,o.jsx)(u.DesktopDownloadIcon,{})}),T[37]=j):j=T[37],T[38]!==P?(w=(0,o.jsxs)(el.l.Item,{onSelect:P,children:[j,"Checkout with GitHub Desktop"]}),T[38]=P,T[39]=w):w=T[39],T[40]!==O||T[41]!==W?(N=W&&(0,o.jsxs)(el.l.Item,{onSelect:O,children:[(0,o.jsx)(el.l.LeadingVisual,{children:(0,o.jsx)(u.TerminalIcon,{})}),"Open in Codespaces"]}),T[40]=O,T[41]=W,T[42]=N):N=T[42],T[43]!==b||T[44]!==_||T[45]!==w||T[46]!==N?(C=(0,o.jsxs)(el.l.Group,{children:[v,b,_,w,N]}),T[43]=b,T[44]=_,T[45]=w,T[46]=N,T[47]=C):C=T[47],T[48]!==g||T[49]!==y||T[50]!==C?(S=(0,o.jsxs)(er.W,{children:[h,(0,o.jsx)(er.W.Overlay,{align:"end",children:(0,o.jsxs)(el.l,{children:[g,y,x,C]})})]}),T[48]=g,T[49]=y,T[50]=C,T[51]=S):S=T[51],T[52]!==B?(I=(0,o.jsx)(B,{}),T[52]=B,T[53]=I):I=T[53],T[54]!==S||T[55]!==I?(k=(0,o.jsxs)(o.Fragment,{children:[S,I]}),T[54]=S,T[55]=I,T[56]=k):k=T[56],k}try{eu.displayName||(eu.displayName="TaskHeaderMobileMenu")}catch{}var em=n(50129),ep=n(79684);function eh(e){let t,n,i=(0,s.c)(4),{pull:a}=e;i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.jsx)(ep.B.Item,{href:"/copilot/agents",children:"Agents"}),i[0]=t):t=i[0];let r=!a,l=a?.title;return i[1]!==r||i[2]!==l?(n=(0,o.jsxs)(ep.B,{children:[t,(0,o.jsx)(ep.B.Item,{loading:r,children:l})]}),i[1]=r,i[2]=l,i[3]=n):n=i[3],n}try{eh.displayName||(eh.displayName="TaskBreadcrumbs")}catch{}var ef=n(34164);function eg(e){let t,n,i,a,r,l,d,c=(0,s.c)(19),{pull:u,session:m,isContentPreviewOpen:p,openPreviewPane:h}=e,f=`/${u?.repository_nwo}/pull/${u?.number}`,g=(0,ec.A3)("optedInToUserFeedback");return c[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,ef.$)("TaskHeader-module__container--mszgP"),c[0]=t):t=c[0],c[1]!==u?(n=(0,o.jsx)("div",{className:"TaskHeader-module__leftControls--gPjSp",children:(0,o.jsx)(eh,{pull:u})}),c[1]=u,c[2]=n):n=c[2],c[3]!==g||c[4]!==u||c[5]!==m?(i=u&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"TaskHeader-module__desktopButtons--bONYA",children:[g&&(0,o.jsx)(es.O,{sessionId:m?.id}),(0,o.jsx)(ei.FS,{pull:u,session:m}),(0,o.jsx)(ea.G,{pullUrl:u.url,taskId:u.global_relay_id})]}),(0,o.jsx)("div",{className:"TaskHeader-module__mobileMenu--CAeut",children:(0,o.jsx)(eu,{pull:u})})]}),c[3]=g,c[4]=u,c[5]=m,c[6]=i):i=c[6],c[7]!==p||c[8]!==h?(a=(0,o.jsx)(en,{isContentPreviewOpen:p,openPreviewPane:h}),c[7]=p,c[8]=h,c[9]=a):a=c[9],c[10]!==i||c[11]!==a?(r=(0,o.jsx)("div",{className:"TaskHeader-module__rightControls--ujKcE",children:(0,o.jsxs)(X.B,{direction:"horizontal",align:"center",gap:"condensed",children:[i,a]})}),c[10]=i,c[11]=a,c[12]=r):r=c[12],c[13]!==n||c[14]!==r?(l=(0,o.jsxs)("div",{className:t,children:[n,r]}),c[13]=n,c[14]=r,c[15]=l):l=c[15],c[16]!==f||c[17]!==l?(d=(0,o.jsx)(em.Kg,{basePageDataUrl:f,children:l}),c[16]=f,c[17]=l,c[18]=d):d=c[18],d}try{eg.displayName||(eg.displayName="TaskHeader")}catch{}var ey=n(81453),ex=n(51213),ev=n(79196),eb=n(7812),e_=n(57478),ej=n(97189),ew=n(13038),eN=n(32051),eC=n(89466),eS=n(40235),eI=n(74022),ek=n(86476),eT=n(34001),eE=n(67154),eR=n(48952),eL=n(72259),eA=n(47723);function eD(){let e,t=(0,s.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(ej.Fn,{children:(0,o.jsx)(H.BH,{children:(0,o.jsx)(eP,{})})}),t[0]=e):e=t[0],e}function eP(){var e;let t,n,i,a,r,l,d,c,m,p,h,f,y,x,v,b,_,j,w,N,C,I,k,T,E,R,L,A,D,P,O,F,B,M,V,$=(0,s.c)(107),{data:U}=(0,eC.J)();$[0]!==U?(t=void 0===U?{}:U,$[0]=U,$[1]=t):t=$[1];let{pull:X,sessions:ee,sessionsPollingInterval:et,currentUser:en}=t,ei=X?.id??0,ea=et??0;$[2]!==ee||$[3]!==ei||$[4]!==ea?(n={pullId:ei,initialData:ee,sessionsPollingInterval:ea},$[2]=ee,$[3]=ei,$[4]=ea,$[5]=n):n=$[5];let{data:es}=(0,eT.t)(n),er=(0,H.tZ)(),{openPreviewPane:el,closePreviewPane:eo,openItem:ed,closeItem:ec,updateItem:eu,allOpenItems:em}=(0,H.xx)(),[ep]=(0,Q.ok)(),eh=em?.length??0,{isNarrowViewport:ef}=(0,G.B)(),ej=!!es?.length;$[6]!==ep?(i=ep.get("session_id"),$[6]=ep,$[7]=i):i=$[7];let eE=!!i;$[8]!==es?(a=es?.toSorted(eV)[0],$[8]=es,$[9]=a):a=$[9];let eD=a,eP=es?.length??0;$[10]!==es?(r=es?.reduce(eM,0)||0,$[10]=es,$[11]=r):r=$[11];let e$=r,eU=!!(en&&en?.id===es?.[0]?.user_id);$[12]!==es?(l=es?.some(eB)??!1,$[12]=es,$[13]=l):l=$[13];let eq=l;$[14]!==es?(d=es?.every(eF)??!1,$[14]=es,$[15]=d):d=$[15];let eW=d,eH=(0,W.b)(),{models:eG}=(0,eL.h)(),ez=g.W.codingAgentModelSelection?eG:void 0,eK=(0,z.U)();$[16]!==es?(c=es?.find(eO),$[16]=es,$[17]=c):c=$[17];let eQ=c??es?.[0],{data:eZ}=(0,J.B)(eQ?.agent_id??null),eJ=eZ?.display_name,eY=eZ?.slug;$[18]!==eY?(m=(0,Y.sS)(eY),$[18]=eY,$[19]=m):m=$[19];let eX=m,e0=X?.id||0,e1=!!X?.id;$[20]!==X||$[21]!==e0||$[22]!==e1?(p={pullRequestId:e0,includeBody:!1,initialData:X,enabled:e1},$[20]=X,$[21]=e0,$[22]=e1,$[23]=p):p=$[23];let{data:e2,refetchBody:e3,refetchPullRequest:e4}=(0,ek.Y)(p);e=e2?.aliveChannel,(F=(0,s.c)(7))[0]!==e4?(D=(0,eI.A)(e4,2e3,{leading:!1,trailing:!0}),F[0]=e4,F[1]=D):D=F[1],B=D,F[2]!==e3?(P=(0,eI.A)(e3,2e3,{leading:!1,trailing:!0}),F[2]=e3,F[3]=P):P=F[3],M=P,F[4]!==M||F[5]!==B?(O=e=>{(e.event_updates?.git_updated||e.event_updates?.title_updated)&&B(),e.event_updates?.body_updated&&M()},F[4]=M,F[5]=B,F[6]=O):O=F[6],V=O,(0,eS.x)(e,V),$[24]===Symbol.for("react.memo_cache_sentinel")?(h=new Set,$[24]=h):h=$[24];let e5=(0,S.useRef)(h),e6=(0,S.useRef)(void 0),e7=(0,S.useRef)(void 0);$[25]!==eh?(f=()=>{0===eh&&e5.current.clear()},y=[eh],$[25]=eh,$[26]=f,$[27]=y):(f=$[26],y=$[27]),(0,S.useEffect)(f,y),$[28]!==eJ||$[29]!==em||$[30]!==ez||$[31]!==ec||$[32]!==eU||$[33]!==eW||$[34]!==e2||$[35]!==eE||$[36]!==eq||$[37]!==eX||$[38]!==ef||$[39]!==eD?.last_updated_at||$[40]!==eD?.model||$[41]!==eD?.state||$[42]!==ed||$[43]!==el||$[44]!==e$||$[45]!==X||$[46]!==eP||$[47]!==eu?(x=()=>{if(!e2)return;void 0!==e2.id&&void 0!==e6.current&&e6.current!==e2.id&&(e5.current.clear(),e7.current=void 0),e6.current=e2?.id;let e=e2.changed_files??0,t=e2.head_sha,n=eP>0&&e>0,i=eD?.model,a=i&&ez?ez.find(e=>e.id===(i.startsWith(eA.an)?i.slice(eA.an.length):i)):void 0,s={...(0,eb.Bx)({body:e2?.body??"",bodyHTML:e2?.body_html,title:e2.title,number:e2.number,type:"pr-overview",repositoryNwo:e2.repository_nwo,baseRef:e2.base_ref_name,headRef:e2.head_ref_name,headSha:t,sessionState:eD?.state,sessionUpdatedAt:eD?.last_updated_at,sessionCount:eP,premiumRequestCount:e$,selectedModel:a,isSingleSessionView:!eU,commitAliveChannel:e2.commit_alive_channel,isCopilotCodingAgent:eX},ex.Wp),disableCloseButton:!0,icon:u.NoteIcon},r=X&&n?{...(0,eb.Bx)({type:"pr-files-changed",headSha:t,basePath:`/${e2.repository_nwo}/pull/${e2.number}`,isSessionRunning:eq,isSessionReadonly:eW,agentDisplayName:eJ},ex.Wp),disableCloseButton:!0,trailingComponent:(0,o.jsx)(e_.A,{children:e}),icon:u.FileIcon}:null;for(let e of(eu(s),r&&eu(r),em))e.includes("pr-files-changed:")&&!n&&ec(e);let l=em.includes(s.id),d=r&&em.includes(r.id),c=!e5.current.has(s.id)&&!l,m=r&&!e5.current.has(r.id)&&!d;c&&(ed(s.id,!eE),ef||el()),m&&(ed(r.id,eE),eE&&!ef&&el()),e5.current.add(s.id),r&&e5.current.add(r.id)},$[28]=eJ,$[29]=em,$[30]=ez,$[31]=ec,$[32]=eU,$[33]=eW,$[34]=e2,$[35]=eE,$[36]=eq,$[37]=eX,$[38]=ef,$[39]=eD?.last_updated_at,$[40]=eD?.model,$[41]=eD?.state,$[42]=ed,$[43]=el,$[44]=e$,$[45]=X,$[46]=eP,$[47]=eu,$[48]=x):x=$[48];let e9=eD?.state,e8=eD?.last_updated_at,te=eD?.model;$[49]!==eJ||$[50]!==em||$[51]!==ez||$[52]!==ec||$[53]!==eo||$[54]!==eU||$[55]!==eW||$[56]!==e2||$[57]!==eE||$[58]!==eq||$[59]!==eX||$[60]!==ef||$[61]!==ed||$[62]!==eh||$[63]!==el||$[64]!==e$||$[65]!==X||$[66]!==eP||$[67]!==e9||$[68]!==e8||$[69]!==te||$[70]!==eu?(v=[e2,eu,ed,ec,el,eo,eE,X,eh,e9,e8,te,eP,e$,em,ef,eU,eq,eW,ez,eJ,eX],$[49]=eJ,$[50]=em,$[51]=ez,$[52]=ec,$[53]=eo,$[54]=eU,$[55]=eW,$[56]=e2,$[57]=eE,$[58]=eq,$[59]=eX,$[60]=ef,$[61]=ed,$[62]=eh,$[63]=el,$[64]=e$,$[65]=X,$[66]=eP,$[67]=e9,$[68]=e8,$[69]=te,$[70]=eu,$[71]=v):v=$[71],(0,S.useEffect)(x,v),$[72]!==eo||$[73]!==el?(b=e=>{e?el():eo()},$[72]=eo,$[73]=el,$[74]=b):b=$[74];let tt=b;$[75]!==e2?.title?(_=()=>{let e=e2?.title;e?(0,q.D)(`${e} \xb7 Task \xb7 GitHub Copilot`):(0,q.D)("Task \xb7 GitHub Copilot")},$[75]=e2?.title,$[76]=_):_=$[76];let tn=e2?.title;return $[77]!==tn?(j=[tn],$[77]=tn,$[78]=j):j=$[78],(0,S.useEffect)(_,j),$[79]!==eH?(w=()=>{eH.selectThread(null,{includeThreads:!1,clearTopic:!0})},N=[eH],$[79]=eH,$[80]=w,$[81]=N):(w=$[80],N=$[81]),(0,S.useEffect)(w,N),(0,Z._)(),$[82]!==er||$[83]!==tt?(C=[er,tt],$[82]=er,$[83]=tt,$[84]=C):C=$[84],$[85]!==e2||$[86]!==er||$[87]!==ej||$[88]!==eD||$[89]!==el?(I=ej&&(0,o.jsx)(K.P.Header,{children:(0,o.jsx)(eg,{pull:e2,session:eD,isContentPreviewOpen:er,openPreviewPane:el})}),$[85]=e2,$[86]=er,$[87]=ej,$[88]=eD,$[89]=el,$[90]=I):I=$[90],$[91]===Symbol.for("react.memo_cache_sentinel")?(k=(0,o.jsx)(K.P.Sidebar,{children:(0,o.jsx)(ey.U,{})}),$[91]=k):k=$[91],$[92]===Symbol.for("react.memo_cache_sentinel")?(T=(0,o.jsx)(K.P.ColumnLeft,{children:(0,o.jsx)(eR.pP,{})}),$[92]=T):T=$[92],$[93]!==ej||$[94]!==eK?(E=ej&&(0,o.jsx)(K.P.ColumnRight,{children:(0,o.jsx)(ev.U,{returnFocusRef:eK,disableActionsMenu:!0,disableResourcePanel:!0,className:"TaskView-module__contentPreview--NFDAQ"})}),$[93]=ej,$[94]=eK,$[95]=E):E=$[95],$[96]!==C||$[97]!==I||$[98]!==E?(R=(0,o.jsxs)(K.P,{mainColumn:"left","data-hpc":!0,secondaryColumnState:C,slimLineTopTabs:g.W.copilotWorkbenchSlimLineTopTabs,children:[I,k,T,E]}),$[96]=C,$[97]=I,$[98]=E,$[99]=R):R=$[99],$[100]!==e2||$[101]!==R?(L=(0,o.jsx)(eN.mE,{pull:e2,children:R}),$[100]=e2,$[101]=R,$[102]=L):L=$[102],$[103]!==en||$[104]!==eU||$[105]!==L?(A=(0,o.jsx)(ew.Q,{currentUser:en,currentUserIsSessionOwner:eU,children:L}),$[103]=en,$[104]=eU,$[105]=L,$[106]=A):A=$[106],A}function eO(e){return"in_progress"===e.state}function eF(e){return(0,eE.SS)(e)}function eB(e){return"in_progress"===e.state}function eM(e,t){return e+t.premium_requests}function eV(e,t){return new Date(t.created_at).getTime()-new Date(e.created_at).getTime()}try{eD.displayName||(eD.displayName="TaskViewWrapper")}catch{}try{eP.displayName||(eP.displayName="TaskView")}catch{}let e$=/\/copilot\/tasks\/pull\/([a-zA-Z0-9-_]+)/;let TasksPlugin=class TasksPlugin{get previewComponents(){return{"pr-overview":U,"pr-files-changed":p}}constructor(){(0,l._)(this,"id",eA.v),(0,l._)(this,"displayName",eA.Ns),(0,l._)(this,"skipSyncRouteToThread",!0),(0,l._)(this,"components",[{id:eA.kF,Component:eD,routes:[e$]}])}};var eU=n(65411),eq=n(60209),eW=n(85094),eH=n(47970),eG=n(21373),ez=n(46665),eK=n(46857);function eQ(e){let t,n,i,a,r,l,d,c,m,p=(0,s.c)(26),{loop:h,headerButton:f,isStreaming:g}=e,[y,x]=(0,S.useState)(!0);if(!h)return null;p[0]!==y?(t=()=>x(!y),p[0]=y,p[1]=t):t=p[1];let v=t,b=g&&"LoopBlock-module__streaming--kzTU_";p[2]!==b?(n=(0,ef.$)("LoopBlock-module__container--F3X80",b),p[2]=b,p[3]=n):n=p[3];let _=!y&&"LoopBlock-module__headerCollapsed--Yoo66";return p[4]!==_?(i=(0,ef.$)("LoopBlock-module__header--Bmyfz",_),p[4]=_,p[5]=i):i=p[5],p[6]!==y?(a=y?(0,o.jsx)(u.ChevronDownIcon,{size:16}):(0,o.jsx)(u.ChevronRightIcon,{size:16}),p[6]=y,p[7]=a):a=p[7],p[8]!==h.title?(r=(0,o.jsx)("span",{className:"LoopBlock-module__buttonText--pH2DI",children:h.title}),p[8]=h.title,p[9]=r):r=p[9],p[10]!==a||p[11]!==r||p[12]!==v?(l=(0,o.jsx)(eG.Q,{variant:"invisible",onClick:v,className:"LoopBlock-module__expandButton--kYkwN",leadingVisual:a,children:r}),p[10]=a,p[11]=r,p[12]=v,p[13]=l):l=p[13],p[14]!==f||p[15]!==i||p[16]!==l?(d=(0,o.jsxs)("div",{className:i,children:[l,f]}),p[14]=f,p[15]=i,p[16]=l,p[17]=d):d=p[17],p[18]!==y||p[19]!==g||p[20]!==h.nodes?(c=y&&(0,o.jsx)("div",{className:"LoopBlock-module__content--SQW7_",children:h.nodes.map((e,t)=>{let n=g&&t===h.nodes.length-1;return(0,o.jsxs)("div",{className:"LoopBlock-module__node--GZLd9",children:[(0,o.jsx)("div",{className:"LoopBlock-module__iconContainer--QF1t5",children:(0,o.jsx)(u.CheckCircleFillIcon,{size:16,className:"LoopBlock-module__checkIcon--_Toxw"})}),n&&!e.title?null:(0,o.jsx)("span",{className:"LoopBlock-module__nodeTitle--upYDV",children:e.title})]},e.id)})}),p[18]=y,p[19]=g,p[20]=h.nodes,p[21]=c):c=p[21],p[22]!==c||p[23]!==n||p[24]!==d?(m=(0,o.jsxs)("div",{className:n,children:[d,c]}),p[22]=c,p[23]=n,p[24]=d,p[25]=m):m=p[25],m}try{eQ.displayName||(eQ.displayName="LoopBlockContent")}catch{}var eZ=n(91348),eJ=n(12465),eY=n(37510),eX=n(99993);function e0(e){let t,n,i,a,r=(0,s.c)(15),{isStreaming:l}=e,d=function(){let{message:e}=(0,ez.V)(),t=(0,eK.O)(e);return t?.pipeline??null}(),{mutate:c}=(0,eJ.P)(),{data:u}=(0,eX._N)();r[0]!==u||r[1]!==d||r[2]!==c?(t=()=>{if(!u||!d)return;let e=(0,eZ.kX)({...d,id:u.id},[]);c({loopID:u.id,updateFn:()=>e})},r[0]=u,r[1]=d,r[2]=c,r[3]=t):t=r[3];let m=t;r[4]!==l||r[5]!==u||r[6]!==d?(n=u&&!l&&!(0,eY.S)(u,d),r[4]=l,r[5]=u,r[6]=d,r[7]=n):n=r[7];let p=n;r[8]!==m||r[9]!==p?(i=p?(0,o.jsx)(eG.Q,{variant:"invisible",onClick:m,children:"Restore"}):null,r[8]=m,r[9]=p,r[10]=i):i=r[10];let h=i;return r[11]!==l||r[12]!==d||r[13]!==h?(a=(0,o.jsx)(eQ,{loop:d,headerButton:h,isStreaming:l}),r[11]=l,r[12]=d,r[13]=h,r[14]=a):a=r[14],a}try{e0.displayName||(e0.displayName="LoopBlock")}catch{}let e1="data-loop-block",e2=(0,eW.F)(e1),e3={div:(e,t)=>{let n=(0,eW.k)(e,e1);return n?(0,o.jsx)(e0,{...n}):t}};function e4(){return{transformMarkdown:e=>(0,eH.YR)(e,"code",e=>{"loop"===e.lang&&(e.data={hName:"div",hProperties:{[e2]:JSON.stringify({isStreaming:e.isStreaming??!1})},hChildren:[]})}),transformHtml:e=>(0,eH.YR)(e,"element",(e,t,n)=>{let i=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&i?.type==="element"&&e2 in i.properties&&n.children.splice(t,1,i)}),reactComponents:e3}}var e5=n(54908),e6=n(35750),e7=n(18150),e9=n(85242),e8=n(88243),te=n(16213),tt=n(25641),tn=n(46062),ti=new WeakMap,ta=new WeakMap,ts=new WeakMap,tr=new WeakSet,tl=new WeakMap;let ChatCompletionsClient=class ChatCompletionsClient{async *getChatCompletion(e,t,n){let i=(0,tn.wv)(),a=t??i.id,s=await (0,e6._)(this,ti).getAuthToken(),r=await (0,tt.p)({basePath:(0,e6._)(this,ta),body:{messages:e,model:a,stream:!0},path:"/chat/completions",method:"POST",streamingResponse:!0,authToken:s,integrationId:(0,e6._)(this,tl).integrationID,realIp:(0,e6._)(this,ts),signal:n});if(!r.ok){let e=await r.response?.text()??"Unknown error",t=e;try{let n=JSON.parse(e);t=n.error?.message||r.error}catch(e){}throw(0,ee.BI)("dotcom_chat.error",{type:"execution",nodeType:"prompt",mode:"pipes",errorMessage:t}),Error(`Failed to get chat completion: ${t}`)}!n?.aborted&&r.body&&(yield*(0,e8._)(this,tr,to).call(this,r.body,n))}constructor(e,t,n=""){(0,te._)(this,tr),(0,e7._)(this,tl,{get:td,set:void 0}),(0,e7._)(this,ti,{writable:!0,value:void 0}),(0,e7._)(this,ta,{writable:!0,value:void 0}),(0,e7._)(this,ts,{writable:!0,value:void 0}),(0,e9._)(this,ta,e),(0,e9._)(this,ti,t),(0,e9._)(this,ts,n)}};async function*to(e,t){let n=new TextDecoder("utf-8"),i=e.getReader(),a="";try{for(;;){if(t?.aborted)return;let{done:e,value:s}=await i.read();if(e)break;for(a+=n.decode(s);;){if(a.startsWith("data: [DONE]"))return;let e=a.indexOf(`

`);if(-1===e)break;let t=a.slice(0,e).replace(/^data:\s+/,"");if(""===t){a=a.slice(e+2);continue}try{let e=JSON.parse(t),n=e.choices?.[0]?.delta?.content??"",i=e.model,a=e.usage?{prompt_tokens:e.usage.prompt_tokens,completion_tokens:e.usage.completion_tokens,total_tokens:e.usage.total_tokens,model:i}:void 0;(n||a)&&(yield{content:n,usage:a})}catch{}a=a.slice(e+2)}}}finally{i.releaseLock()}}function td(){return{integrationID:"copilot-chat"}}var tc=n(21046);let tu=["SAML"],tm={FORBIDDEN:["SAML error"]};function tp(e,t){var n;if("errors"in(e="errors"in(n=e)?{...n,errors:n.errors.filter(e=>!tu.includes(e.type)&&!tm[e.type]?.includes(e.message))}:n)&&e.errors.length){let t=e.errors.map(e=>`${e.message}${e.path?` (path: ${e.path})`:""}`).join(", ");throw(0,ee.BI)("dotcom_chat.error",{type:"execution",nodeType:"graphql",mode:"pipes",errorMessage:t}),Error(t)}if(!("data"in e)){let n=`Expected data property in response: ${JSON.stringify(e)}. requestId: ${t}`;throw(0,tc.vV)(n),(0,ee.BI)("dotcom_chat.error",{type:"execution",nodeType:"graphql",mode:"pipes",errorMessage:n}),Error("Failed to fetch data.")}return!0}var th=n(13647),tf=new WeakMap,tg=new WeakMap,ty=new WeakMap;let GraphQLClient=class GraphQLClient{async getGraphQLResponse(e,t,n){if((0,th.Xg)()){let n=await (0,e6._)(this,ty).executeGraphQL(e,t.loopId,t.version,t.executionId,t.nodeId);if(!n.success)throw Error(`GraphQL execution failed: ${n.error}`);if(tp(n.data))return n.data}let i={"X-Copilot-Api-Token":(await (0,e6._)(this,tg).getAuthToken()).value},a={query:e};a.loopId=t.loopId,a.version=t.version,a.executionId=t.executionId,a.nodeId=t.nodeId;let s=await (0,k.Sr)((0,e6._)(this,tf),{method:"POST",body:a,headers:i,signal:n?.signal});if(s.ok){let e=await s.json();if(tp(e,s.headers.get("X-Github-Request-Id")||""))return e}else throw Error("Failed to get GraphQL response.")}constructor(e,t,n){(0,e7._)(this,tf,{writable:!0,value:void 0}),(0,e7._)(this,tg,{writable:!0,value:void 0}),(0,e7._)(this,ty,{writable:!0,value:void 0}),(0,e9._)(this,tf,e),(0,e9._)(this,tg,t),(0,e9._)(this,ty,n)}};var tx=n(26956),tv=n(30388);let tb="LoopsView-module__sectionHeader--EgQsl",t_="LoopsView-module__sectionTitle--UPWoU";var tj=n(93505),tw=n(80770),tN=n(21229),tC=n(58615),tS=n(49912),tI=n(17005),tk=n(15220),tT=n(72511),tE=n(86877),tR=n(4175),tL=n(76746),tA=n(99519),tD=n(76219);function tP({isOpen:e,onClose:t}){let[n,i]=(0,S.useState)(""),[a,s]=(0,S.useState)(!1),[r,l]=(0,S.useState)(null),d=(0,tA.EY)(),c=(0,Q.Zp)(),{availableModels:u}=(0,tD.U)(),m=(0,S.useMemo)(()=>{if(!n.trim())return{isValid:!1,errors:[]};try{let e=JSON.parse(n),t=(0,tL.v)(e,{availableModels:u});if(t.length>0)return{isValid:!1,errors:t.map(e=>e.error)};return{isValid:!0,errors:[],loop:e}}catch(e){return{isValid:!1,errors:[`Invalid JSON: ${e instanceof Error?e.message:"Syntax error"}`]}}},[n,u]),p=async()=>{if(m.isValid&&m.loop&&!a){s(!0),l(null),(0,ee.BI)("dotcom_chat.activate",{target:"CREATE_LOOP_FROM_JSON",mode:"loops"});try{let e={...m.loop,id:crypto.randomUUID(),updatedAt:Date.now(),owned:!0,visibility:"private"};await d.createLoop(e),c(`${tt.Jz}/l/${e.id}`),t()}catch(e){l(e instanceof Error?e.message:"Failed to create loop. Please try again.")}finally{s(!1)}}};return e?(0,o.jsx)(tk.l,{title:"Create loop from JSON",onClose:t,width:"large",height:"large",renderBody:()=>(0,o.jsxs)("div",{className:"CreateLoopFromJsonDialog-module__container--yEYu1",children:[r&&(0,o.jsx)(tT.A,{variant:"danger",children:r}),(0,o.jsx)("div",{className:"CreateLoopFromJsonDialog-module__header--UNUms",children:(0,o.jsx)("p",{className:"CreateLoopFromJsonDialog-module__description--vfsKH",children:"Paste a valid loop JSON object to create a new loop."})}),(0,o.jsxs)(tE.A,{className:"CreateLoopFromJsonDialog-module__formControl--vBsuV",children:[(0,o.jsx)(tE.A.Label,{visuallyHidden:!0,children:"Loop JSON"}),(0,o.jsx)(tR.Ay,{className:"CreateLoopFromJsonDialog-module__textarea--OHmSD",value:n,onChange:e=>i(e.target.value),placeholder:"Paste your loop JSON here...",resize:"none",spellCheck:!1,autoComplete:"off"}),m.errors.length>0?(0,o.jsx)(tE.A.Validation,{variant:"error",children:(0,o.jsx)("div",{children:m.errors[0]})}):m.isValid&&m.loop?(0,o.jsx)(tE.A.Validation,{variant:"success",children:"Valid loop detected!"}):(0,o.jsx)("span",{className:"CreateLoopFromJsonDialog-module__spacer--JbIGC"})]})]}),renderFooter:()=>(0,o.jsxs)(tk.l.Footer,{children:[(0,o.jsx)(eG.Q,{onClick:t,children:"Cancel"}),(0,o.jsx)(eG.Q,{onClick:p,variant:"primary",inactive:!m.isValid||a,loading:a,children:"Create loop"})]})}):null}try{tP.displayName||(tP.displayName="CreateLoopFromJsonDialog")}catch{}function tO(e){let t,n,i,a,r,l,d,c,m,p,h,f,g,y,x,v,b=(0,s.c)(28),{showExamples:_,onShowExamples:j}=e,w=void 0===_||_,N=(0,S.useRef)(null),C=(0,S.useRef)(null),[I,k]=(0,S.useState)(!1),T=(0,ec.A3)("optedInToUserFeedback");b[0]!==T?(t=T?(0,o.jsx)(eG.Q,{variant:"link",onClick:()=>{N.current?.openDialog(),(0,ee.BI)("dotcom_chat.activate",{target:"USER_MENU_GIVE_FEEDBACK",mode:"immersive"})},children:"Give feedback"}):null,b[0]=T,b[1]=t):t=b[1];let E=t;return b[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,o.jsx)(et.K,{icon:u.BookIcon,as:"a",href:"https://docs.github.com/copilot","aria-label":"Copilot Loops documentation",target:"_blank",rel:"noopener noreferrer",variant:"invisible",onClick:tM}),b[2]=n):n=b[2],b[3]===Symbol.for("react.memo_cache_sentinel")?(i=(0,o.jsx)(er.W.Anchor,{children:(0,o.jsx)(et.K,{icon:u.KebabHorizontalIcon,"aria-label":"Menu",variant:"invisible",onClick:tB})}),b[3]=i):i=b[3],b[4]!==j||b[5]!==w?(a=!w&&j&&(0,o.jsxs)(el.l.Item,{onSelect:()=>{j(),(0,ee.BI)("dotcom_chat.activate",{target:"LOOPS_SHOW_EXAMPLES",mode:"loops"})},children:[(0,o.jsx)(el.l.LeadingVisual,{children:(0,o.jsx)(u.LightBulbIcon,{})}),"Show examples"]}),b[4]=j,b[5]=w,b[6]=a):a=b[6],b[7]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{k(!0),(0,ee.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_CREATE_FROM_JSON",mode:"loops"})},b[7]=r):r=b[7],b[8]===Symbol.for("react.memo_cache_sentinel")?(l=(0,o.jsxs)(el.l.Item,{onSelect:r,children:["Create from JSON",(0,o.jsx)(el.l.LeadingVisual,{children:(0,o.jsx)(u.UploadIcon,{})})]}),b[8]=l):l=b[8],b[9]!==a?(d=(0,o.jsxs)(el.l.Group,{children:[a,l]}),b[9]=a,b[10]=d):d=b[10],b[11]===Symbol.for("react.memo_cache_sentinel")?(c=(0,o.jsx)(el.l.Divider,{}),b[11]=c):c=b[11],b[12]!==T?(m=T&&(0,o.jsxs)(el.l.Item,{onSelect:()=>{N.current?.openDialog(),(0,ee.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_GIVE_FEEDBACK",mode:"immersive"})},children:["Give feedback",(0,o.jsx)(el.l.LeadingVisual,{children:(0,o.jsx)(u.CommentIcon,{})})]}),b[12]=T,b[13]=m):m=b[13],b[14]===Symbol.for("react.memo_cache_sentinel")?(p=(0,o.jsxs)(el.l.LinkItem,{href:"/settings/copilot",onClick:tF,children:[(0,o.jsx)(el.l.LeadingVisual,{children:(0,o.jsx)(u.GearIcon,{})}),"Settings"]}),b[14]=p):p=b[14],b[15]!==m?(h=(0,o.jsxs)(el.l.Group,{children:[m,p]}),b[15]=m,b[16]=h):h=b[16],b[17]!==h||b[18]!==d?(f=(0,o.jsxs)(er.W,{anchorRef:C,children:[i,(0,o.jsx)(er.W.Overlay,{width:"small",children:(0,o.jsxs)(el.l,{children:[d,c,h]})})]}),b[17]=h,b[18]=d,b[19]=f):f=b[19],b[20]===Symbol.for("react.memo_cache_sentinel")?(g=(0,o.jsx)(tI.l,{ref:N,mode:"immersive",returnFocusRef:C}),b[20]=g):g=b[20],b[21]===Symbol.for("react.memo_cache_sentinel")?(y=()=>k(!1),b[21]=y):y=b[21],b[22]!==I?(x=(0,o.jsx)(tP,{isOpen:I,onClose:y}),b[22]=I,b[23]=x):x=b[23],b[24]!==E||b[25]!==f||b[26]!==x?(v=(0,o.jsx)("div",{className:"LoopsViewHeader-module__header--miwmH",children:(0,o.jsxs)("div",{className:"LoopsViewHeader-module__rightControls--tpwkz",children:[E,n,f,g,x]})}),b[24]=E,b[25]=f,b[26]=x,b[27]=v):v=b[27],v}function tF(){return(0,ee.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_SETTINGS",mode:"loops"})}function tB(){return(0,ee.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU",mode:"loops"})}function tM(){return(0,ee.BI)("dotcom_chat.activate",{target:"LOOPS_HELP_BUTTON_CLICKED",mode:"loops"})}try{tO.displayName||(tO.displayName="LoopsViewHeader")}catch{}let tV={altText:"GitHub battle royale report",assetPath:"/images/modules/loops/BattleRoyal.png",loop:{title:"GitHub battle royale",description:"Compare two GitHub users based on their pull request contributions and metrics",nodes:[{id:"1",type:"text",title:"Start Date",description:"The date 30 days ago from today",content:"@today-30d",metadata:{inputType:"date"}},{id:"2",type:"text",title:"First Username",description:"GitHub username for the first contestant",content:"jonrohan",metadata:{inputType:"text"}},{id:"3",type:"text",title:"Second Username",description:"GitHub username for the second contestant",content:"colebemis",metadata:{inputType:"text"}},{id:"4",type:"text",title:"Repository",description:"The repository to analyze (in owner/name format)",content:"primer/react",metadata:{inputType:"text"}},{id:"5",type:"github-graphql",title:"First User PRs",description:"Fetch PRs for the first user",content:`query {
  search(query: "repo:{{4}} author:{{2}} is:pr created:>={{1}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on PullRequest {
          title
          merged
          closed
          createdAt
          mergedAt
          additions
          deletions
          commits {
            totalCount
          }
          repository {
            nameWithOwner
          }
        }
      }
    }
  }
}`},{id:"6",type:"github-graphql",title:"Second User PRs",description:"Fetch PRs for the second user",content:`query {
  search(query: "repo:{{4}} author:{{3}} is:pr created:>={{1}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on PullRequest {
          title
          merged
          closed
          createdAt
          mergedAt
          additions
          deletions
          commits {
            totalCount
          }
          repository {
            nameWithOwner
          }
        }
      }
    }
  }
}`},{id:"7",type:"prompt",title:"Battle Analysis",description:"Compare the two users and determine a winner",content:`You're a GitHub Battle Royale announcer. Compare the following metrics between these two contestants based on their pull request data:

# Battle Royal \u{1F934}\u{1F5E1}\u{FE0F}\u{1F478}

1. Total PRs created
2. PR merge rate
3. Lines of code changed (additions + deletions)
4. Average commits per PR
5. PR velocity (PRs per month)

User 1 ({{2}}) data: {{5}}
User 2 ({{3}}) data: {{6}}

Analyze each metric and assign points (1-10) for each category. Then declare an overall winner with a dramatic announcement. Format your response as an exciting battle commentary.`}]},icon:u.FlameIcon},t$={altText:"GitHub repo feature announcement magazine",assetPath:"/images/modules/loops/NewsFlash.png",loop:{title:"Multi-Repo GitHub feature announcement magazine",description:"Creates a tabloid-style frontpage focusing on new features and enhancements across multiple GitHub repositories",nodes:[{id:"repo1",type:"text",title:"Repository 1",description:"First repository to analyze (format: owner/repo)",content:"facebook/react",metadata:{inputType:"text"}},{id:"repo2",type:"text",title:"Repository 2",description:"Second repository to analyze (format: owner/repo)",content:"microsoft/vscode",metadata:{inputType:"text"}},{id:"repo3",type:"text",title:"Repository 3",description:"Third repository to analyze (format: owner/repo)",content:"primer/react",metadata:{inputType:"text"}},{id:"days",type:"text",title:"Days Limit",description:"Number of days to look back for data",content:"@today-30d",metadata:{inputType:"date"}},{id:"3",type:"github-graphql",title:"Feature PRs - Repository 1",description:"Fetch recent feature/enhancement pull requests from the first repository",content:`query {
  search(query: "repo:{{repo1}} is:pr created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          author {
            login
          }
          createdAt
          additions
          deletions
          changedFiles
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          reviews(first: 3) {
            nodes {
              author {
                login
              }
            }
          }
        }
      }
    }
  }
}`},{id:"4",type:"github-graphql",title:"Feature PRs - Repository 2",description:"Fetch recent feature/enhancement pull requests from the second repository",content:`query {
  search(query: "repo:{{repo2}} is:pr created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          author {
            login
          }
          createdAt
          additions
          deletions
          changedFiles
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          reviews(first: 3) {
            nodes {
              author {
                login
              }
            }
          }
        }
      }
    }
  }
}`},{id:"5",type:"github-graphql",title:"Feature PRs - Repository 3",description:"Fetch recent feature/enhancement pull requests from the third repository",content:`query {
  search(query: "repo:{{repo3}} is:pr created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          author {
            login
          }
          createdAt
          additions
          deletions
          changedFiles
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          reviews(first: 3) {
            nodes {
              author {
                login
              }
            }
          }
        }
      }
    }
  }
}`},{id:"6",type:"github-graphql",title:"Feature Requests - Repository 1",description:"Fetch recent feature request issues from the first repository",content:`query {
  search(query: "repo:{{repo1}} is:issue label:\\"Type: Feature Request\\" created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on Issue {
          title
          url
          author {
            login
          }
          createdAt
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          comments {
            totalCount
          }
        }
      }
    }
  }
}`},{id:"7",type:"github-graphql",title:"Feature Requests - Repository 2",description:"Fetch recent feature request issues from the second repository",content:`query {
  search(query: "repo:{{repo2}} is:issue label:enhancement,feature-request created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on Issue {
          title
          url
          author {
            login
          }
          createdAt
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          comments {
            totalCount
          }
        }
      }
    }
  }
}`},{id:"8",type:"github-graphql",title:"Feature Requests - Repository 3",description:"Fetch recent feature request issues from the third repository",content:`query {
  search(query: "repo:{{repo3}} is:issue label:enhancement,feature-request created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on Issue {
          title
          url
          author {
            login
          }
          createdAt
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          comments {
            totalCount
          }
        }
      }
    }
  }
}`},{id:"9",type:"text",title:"Magazine Style",description:"Define the style of the feature announcement magazine",content:`\u{2728}\u{1F4AB} \u{1F31F} OPEN SOURCE NEWS FLASH \u{1F31F} \u{1F4AB} \u{2728}
\u{1F680} BREAKING UPDATES \u{1F680} EXCLUSIVE FEATURES \u{1F3AF} HOT RELEASES \u{1F525}

Your #1 source for hot new features in your favorite open source projects! \u{1F308}`,metadata:{inputType:"text"}},{id:"10",type:"prompt",title:"Feature Magazine Content",description:"Generate tabloid-style headlines focusing on new features",content:`You are a tech magazine writer specializing in new feature announcements. Create an exciting frontpage covering the latest features and enhancements from these repositories: {{repo1}}, {{repo2}}, and {{repo3}}.

Use this data for each repository:
Repository 1:
- PRs: {{3}}
- Issues: {{6}}

Repository 2:
- PRs: {{4}}
- Issues: {{7}}

Repository 3:
- PRs: {{5}}
- Issues: {{8}}

Start with this header:
{{9}}

For each repository:
1. Create a section with an appropriate emoji
2. Include 2-3 exciting headlines about new features or requests
3. Focus on user impact and benefits
4. Include the original URLs as 'READ MORE' links
5. Mention scope of changes for PRs (additions + deletions)

End with a 'FEATURE FORECAST' section comparing the most exciting upcoming features across repositories.

Format everything in markdown and use emojis liberally.`}]},icon:u.RepoIcon},tU=[tV,{altText:"First responder activity report",assetPath:"/images/modules/loops/FirstResponder.png",loop:{title:"First responder activity report",description:"Generates a summary of a first responder's activity including new issues, PR reviews, and issue involvement from the past week",nodes:[{id:"1",type:"text",title:"First Responder Username",description:"GitHub username of the first responder",content:"",metadata:{inputType:"text"}},{id:"2",type:"text",title:"Start Date",description:"Start date for the report (1 week ago)",content:"@today-1w",metadata:{inputType:"date"}},{id:"repo",type:"text",title:"Repository",description:"The full repository name (e.g. owner/repo)",content:"primer/react",metadata:{inputType:"text"}},{id:"3",type:"github-graphql",title:"Created Issues",description:"Issues created by the user in the past week",content:`query {
  search(query: "repo:{{repo}} author:{{1}} is:issue created:>{{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on Issue {
          title
          url
          createdAt
          state
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
        }
      }
    }
  }
}`},{id:"4",type:"github-graphql",title:"PR Reviews",description:"PR reviews submitted by the user in the past week",content:`query {
  search(query: "repo:{{repo}} is:pr reviewed-by:{{1}} updated:>{{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          reviews(first: 5, author: "{{1}}") {
            edges {
              node {
                state
                submittedAt
              }
            }
          }
        }
      }
    }
  }
}`},{id:"involved_issues",type:"github-graphql",title:"Involved Issues",description:"Issues where the user was involved (commented or assigned) in the past week",content:`query {
  search(query: "repo:{{repo}} involves:{{1}} is:issue updated:>{{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on Issue {
          title
          url
          updatedAt
          state
          comments(last: 5) {
            nodes {
              author {
                login
              }
              createdAt
            }
          }
          assignees(first: 5) {
            nodes {
              login
            }
          }
        }
      }
    }
  }
}`},{id:"5",type:"prompt",title:"Activity Summary",description:"Summary report of the first responder's activity",content:`Generate a comprehensive summary report of the first responder's ({{1}}) activity in the {{repo}} repository over the past week. Include their issue creation, PR review activities, and issue involvement.

Issues Created:
{{3}}

PR Reviews:
{{4}}

Issue Involvement:
{{involved_issues}}

Please format the report with these sections:
1. Overview (total numbers)
2. Issue Activity
   - Created Issues
   - Issue Involvement (comments, assignments)
3. PR Review Activity (highlight significant reviews)
4. Key Observations

Keep the tone professional and focus on what the next first responder needs to know about as they come in for the next shift.`}]},icon:u.NoteIcon},t$];var tq=n(43134);let tW=(0,S.lazy)(async()=>({default:(await Promise.all([n.e(8206),n.e(68988),n.e(55316),n.e(8316),n.e(34031),n.e(49898)]).then(n.bind(n,88027))).Loop}));try{tW.displayName||(tW.displayName="LazyLoop")}catch{}var tH=n(39768);function tG(e){let t,n,i,a,r=(0,s.c)(10),{value:l,onChange:d}=e;r[0]!==d?(t=e=>{d(0===e?"list":"output")},r[0]=d,r[1]=t):t=r[1];let c=t,m="list"===l;r[2]!==m?(n=(0,o.jsx)(tH.I.IconButton,{"aria-label":"List view",selected:m,icon:u.ThreeBarsIcon}),r[2]=m,r[3]=n):n=r[3];let p="output"===l;return r[4]!==p?(i=(0,o.jsx)(tH.I.IconButton,{"aria-label":"Output view",selected:p,icon:u.RowsIcon}),r[4]=p,r[5]=i):i=r[5],r[6]!==c||r[7]!==n||r[8]!==i?(a=(0,o.jsxs)(tH.I,{"aria-label":"Loops overview view mode",onChange:c,children:[n,i]}),r[6]=c,r[7]=n,r[8]=i,r[9]=a):a=r[9],a}try{tG.displayName||(tG.displayName="ListModeToggle")}catch{}var tz=n(90177),tK=n(14303);function tQ(e){let t,n,i,a=(0,s.c)(14),{onDelete:r,onCopyLoop:l,onDuplicate:d,onShare:c,onEdit:m,onCopyOutput:p,loopId:h,variant:f,hasOutput:g}=e,y=void 0===f?"invisible":f,x=(0,S.useRef)(null);return h?(a[0]!==y?(t=(0,o.jsx)(er.W.Anchor,{children:(0,o.jsx)(et.K,{icon:u.KebabHorizontalIcon,"aria-label":"Manage loop",variant:y})}),a[0]=y,a[1]=t):t=a[1],a[2]!==g||a[3]!==h||a[4]!==l||a[5]!==p||a[6]!==r||a[7]!==d||a[8]!==m||a[9]!==c?(n=(0,o.jsx)(tK.r,{onDelete:r,onCopyLoop:l,onDuplicate:d,onShare:c,onEdit:m,onCopyOutput:p,hasOutput:g,loopId:h,returnFocusRef:x}),a[2]=g,a[3]=h,a[4]=l,a[5]=p,a[6]=r,a[7]=d,a[8]=m,a[9]=c,a[10]=n):n=a[10],a[11]!==t||a[12]!==n?(i=(0,o.jsxs)(er.W,{anchorRef:x,children:[t,n]}),a[11]=t,a[12]=n,a[13]=i):i=a[13],i):null}try{tQ.displayName||(tQ.displayName="LoopsContextMenu")}catch{}var tZ=n(97665),tJ=n(93364),tY=n(48057),tX=n(33026),t0=n(36296),t1=n(90122),t2=n(5533),t3=n(19336),t4=n(11607);function t5(e){let t,n,i,a,r,l,d,c,u,m,p,h,f,g=(0,s.c)(44),{loop:y}=e,{runLoop:x,stopLoop:v,isPreparing:b}=function(){let e=(0,tA.EY)(),t=(0,tZ.jE)(),[n,i]=(0,S.useState)(!1),{createProgressHandler:a}=(0,t0.h)();return{runLoop:async n=>{i(!0);try{let s=await e.createExecution(n.id,n.version||tX.qD);if(!s.success)throw Error(`Failed to create execution: ${s.error}`);let r=s.data,l=n.version||tX.qD,o=a(n.id,l),d=(0,tY.wu)(n.id,l);t.setQueryData(d,r),i(!1),await e.runPipeline(n,r.id,o,(e,n,i)=>{let a=(0,tY.wu)(e,n),s=t.getQueryData(a);return Promise.resolve(s?(0,tJ.$j)(s):(0,tJ.YD)("execution not found"))})}catch(e){throw i(!1),(0,tc.vV)("Error running loop:",e),e}},stopLoop:n=>{let i=(0,tY.wu)(n.id,n.version||tX.qD),a=t.getQueryData(i);a&&e.stopPipeline(a.id,()=>{t.invalidateQueries({queryKey:i})})},isPreparing:n}}();g[0]!==y?(t=(0,eZ.FT)(y),g[0]=y,g[1]=t):t=g[1];let _=t[0],{data:j,isLoading:w}=(0,tY.rR)(y.id,y.version??"latest"),N=_?j?.nodes[_.id]:void 0,C=N?.value??null,I=N?.error||null;g[2]!==j?(n=(0,t2.y)(j),g[2]=j,g[3]=n):n=g[3];let k=n,T=b||k;g[4]!==C?(i=(0,t1.DO)(C),g[4]=C,g[5]=i):i=g[5];let E=i;g[6]!==y||g[7]!==x?(a=async()=>{await x(y),(0,ee.BI)("dotcom_chat.activate",{target:"OUTPUTS_VIEW_LOOP_RUN",mode:"loops"})},g[6]=y,g[7]=x,g[8]=a):a=g[8];let R=a;g[9]!==y||g[10]!==v?(r=()=>{v(y),(0,ee.BI)("dotcom_chat.activate",{target:"OUTPUTS_VIEW_LOOP_STOP",mode:"loops"})},g[9]=y,g[10]=v,g[11]=r):r=g[11];let L=r;g[12]!==C||g[13]!==E?(l=async()=>{if(C)try{await navigator.clipboard.writeText(E),(0,ee.BI)("dotcom_chat.activate",{target:"OUTPUTS_VIEW_COPY_OUTPUT",mode:"loops"})}catch{}},g[12]=C,g[13]=E,g[14]=l):l=g[14];let A=l,D=`${tt.Jz}/l/${y.id}`;g[15]!==y.title||g[16]!==D?(d=(0,o.jsx)("h3",{className:"LoopOutput-module__title--pNloU",children:(0,o.jsx)(t4.$,{variant:"invisible",condensed:!0,to:D,onClick:t6,children:y.title})}),g[15]=y.title,g[16]=D,g[17]=d):d=g[17],g[18]!==R||g[19]!==L||g[20]!==T||g[21]!==C?(c=(0,o.jsx)(tz.c,{isLoading:T,onClick:R,onStop:L,value:C,variant:"invisible",iconOnly:!0}),g[18]=R,g[19]=L,g[20]=T,g[21]=C,g[22]=c):c=g[22];let P=!!C;g[23]!==A||g[24]!==y.id||g[25]!==P?(u=(0,o.jsx)(tQ,{loopId:y.id,onEdit:t6,onCopyOutput:A,hasOutput:P}),g[23]=A,g[24]=y.id,g[25]=P,g[26]=u):u=g[26],g[27]!==u||g[28]!==c?(m=(0,o.jsxs)("div",{className:"LoopOutput-module__actions--S7bni",children:[c,u]}),g[27]=u,g[28]=c,g[29]=m):m=g[29],g[30]!==m||g[31]!==d?(p=(0,o.jsxs)("div",{className:"LoopOutput-module__header--fcRKQ",children:[d,m]}),g[30]=m,g[31]=d,g[32]=p):p=g[32];let O=!!_;return g[33]!==R||g[34]!==L||g[35]!==w||g[36]!==T||g[37]!==I||g[38]!==C||g[39]!==O?(h=(0,o.jsx)("div",{className:"LoopOutput-module__body--fhlUk",children:(0,o.jsx)(t3.G,{outputNodeExists:O,isRunning:T,isLoading:w,nodeValue:C,nodeError:I,onRun:R,onStop:L})}),g[33]=R,g[34]=L,g[35]=w,g[36]=T,g[37]=I,g[38]=C,g[39]=O,g[40]=h):h=g[40],g[41]!==p||g[42]!==h?(f=(0,o.jsxs)("div",{className:"LoopOutput-module__panel--MrOXo",children:[p,h]}),g[41]=p,g[42]=h,g[43]=f):f=g[43],f}function t6(){(0,ee.BI)("dotcom_chat.activate",{target:"OUTPUTS_VIEW_EDIT_LOOP",mode:"loops"})}try{t5.displayName||(t5.displayName="LoopOutput")}catch{}var t7=n(12683);let t9=[{step:"STEP 1",title:"Describe what you want to create",description:"Describe what you want to create and watch your first loop take shape. Refine and iterate whenever you need.",imageLight:n.p+"onboarding-exp-1-a95dcfae9b1b.png",imageDark:n.p+"onboarding-exp-1-dark-a48429702429.png",color:"bgColor-accent-muted borderColor-accent-muted"},{step:"STEP 2",title:"Connect nodes to build your workflow",description:"Every loop is made of connected nodes, each designed for a specific task. Adjust their inputs, fine-tune their settings, and watch data flow seamlessly from one node to the next, like a clear, powerful and predictable visual pipeline.",imageLight:n.p+"onboarding-exp-2-0c9e0ccab87e.png",imageDark:n.p+"onboarding-exp-2-dark-615b3cf6a6ff.png",color:"bgColor-muted borderColor-muted"},{step:"STEP 3",title:"Run and review results",description:"Run your loop to see results instantly. Outputs are rendered in rich markdown, making it easy to review, validate, and keep improving your workflow.",imageLight:n.p+"onboarding-exp-3-69315c1e30db.png",imageDark:n.p+"onboarding-exp-3-dark-ab6c51a7a2e1.png",color:"bgColor-open-muted borderColor-open-muted"},{step:"STEP 4",title:"Share with your team",description:"Once your loop is ready, share it with your team. Organize, reuse, and grow your collection of loops into a powerhouse of workflows everyone can build on.",imageLight:n.p+"onboarding-exp-4-5437e43d7f31.png",imageDark:n.p+"onboarding-exp-4-dark-3a94358b2cb1.png",color:"bgColor-done-muted borderColor-done-muted"}];function t8(){let e,t,n=(0,s.c)(4),{resolvedColorScheme:i}=(0,t7.DP)(),a="dark"===i;return n[0]!==a?(e=t9.map(e=>(0,o.jsxs)("div",{className:(0,ef.$)("OnboardingCards-module__card--iLbfG","color-shadow-small"),children:[(0,o.jsxs)("div",{className:"OnboardingCards-module__cardContent--Azqb_",children:[(0,o.jsx)("h4",{className:"OnboardingCards-module__cardTitle--Jy7D9",children:e.step}),(0,o.jsx)("p",{className:"OnboardingCards-module__cardDescription--ychAP",children:e.description})]}),(0,o.jsx)("div",{className:(0,ef.$)("OnboardingCards-module__cardImageContainer--OMfWC",e.color),children:(0,o.jsx)("img",{src:a?e.imageDark:e.imageLight,alt:e.title,className:"OnboardingCards-module__cardImage--otEbQ"})})]},e.step)),n[0]=a,n[1]=e):e=n[1],n[2]!==e?(t=(0,o.jsx)("div",{className:"OnboardingCards-module__container--Vo1v5",children:e}),n[2]=e,n[3]=t):t=n[3],t}try{t8.displayName||(t8.displayName="OnboardingCards")}catch{}var ne=n(79064),nt=n(79184),nn=n(96002),ni=n(4559);let na=(0,n(23125).A)(ni.C,1e3);function ns(e){let t,n,i,a,r,l,d,c=(0,s.c)(21),{chatState:u,plugin:m}=e;if(!m||!(0,tS.j)(m))throw Error("LoopsView can only be used with a LoopsPlugin");let[p,h]=(0,tC.M)("loopsShowExamples",!0),f=(0,tn.GF)(u.availableModels);return c[0]!==h?(t=()=>h(!0),c[0]=h,c[1]=t):t=c[1],c[2]!==p||c[3]!==t?(n=(0,o.jsx)(K.P.Header,{children:(0,o.jsx)(tO,{showExamples:p,onShowExamples:t})}),c[2]=p,c[3]=t,c[4]=n):n=c[4],c[5]===Symbol.for("react.memo_cache_sentinel")?(i=(0,o.jsx)(K.P.Sidebar,{children:(0,o.jsx)(ey.U,{})}),c[5]=i):i=c[5],c[6]!==u||c[7]!==h||c[8]!==p?(a=(0,o.jsx)(K.P.ColumnLeft,{children:(0,o.jsx)(nl,{chatState:u,showExamples:p,setShowExamples:h})}),c[6]=u,c[7]=h,c[8]=p,c[9]=a):a=c[9],c[10]!==n||c[11]!==a?(r=(0,o.jsxs)(K.P,{"data-testid":"loops-layout",children:[n,i,a]}),c[10]=n,c[11]=a,c[12]=r):r=c[12],c[13]!==u.availableModels||c[14]!==f||c[15]!==m.previewUrl||c[16]!==r?(l=(0,o.jsx)(tD.Q,{previewUrl:m.previewUrl,availableModels:u.availableModels,defaultModel:f,sendChatMessage:nr,children:r}),c[13]=u.availableModels,c[14]=f,c[15]=m.previewUrl,c[16]=r,c[17]=l):l=c[17],c[18]!==m.service||c[19]!==l?(d=(0,o.jsx)(tA.qT,{value:m.service,children:l}),c[18]=m.service,c[19]=l,c[20]=d):d=c[20],d}function nr(){}function nl(e){let t,n,i,a,r,l,d,c,m,p,h,f,g,y,x,v,b,_,j,w,N,C,I,k=(0,s.c)(59),{chatState:T,showExamples:E,setShowExamples:R}=e,{data:L,isLoading:A}=(0,tw.C)(),D=(0,W.b)(),P=(0,Q.Zp)(),O=(0,tA.EY)(),F=(0,tn.GF)(T.availableModels),[B,M]=(0,tC.M)("loopsOverviewViewMode","output"),[V,$]=(0,S.useState)(""),{chatQuotaExceeded:U,isLicensedLimited:q}=(0,nt.xR)(),H=q&&U,G=(0,S.useRef)(null);if(k[0]!==L||k[1]!==V){e:{if(!L){t=L;break e}let e=L.filter(np);if(!V.trim()){t=e;break e}let n=V.toLowerCase().trim();t=e.filter(e=>e.title.toLowerCase().includes(n)||e.description&&e.description.toLowerCase().includes(n))}k[0]=L,k[1]=V,k[2]=t}else t=k[2];let z=t;k[3]===Symbol.for("react.memo_cache_sentinel")?(n=[],k[3]=n):n=k[3],(0,S.useEffect)(nm,n),k[4]!==D?(i=()=>{D.selectThread(null,{includeThreads:!1,clearTopic:!0})},a=[D],k[4]=D,k[5]=i,k[6]=a):(i=k[5],a=k[6]),(0,S.useEffect)(i,a),k[7]!==F||k[8]!==O||k[9]!==D||k[10]!==P?(r=async e=>{let t=e.trim();if(""===t)return;(0,ee.BI)("dotcom_chat.activate",{target:"OVERVIEW_INITIAL_CREATE",mode:"loops"});let n=crypto.randomUUID(),i={scopeId:eq.S$},a=await D.createThread(i);await O.createLoop(n),(0,tq.aq)(n,a.id);let s={content:t,model:F,references:[],thread:a,mode:eq.lh};D.sendChatMessage(s),P(`${tt.Jz}/l/${n}`)},k[7]=F,k[8]=O,k[9]=D,k[10]=P,k[11]=r):r=k[11];let K=r,Z=(0,S.useRef)(K);k[12]!==K?(l=()=>{Z.current=K},d=[K],k[12]=K,k[13]=l,k[14]=d):(l=k[13],d=k[14]),(0,S.useEffect)(l,d),k[15]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{let e=ne.Jt.getLoopEntrypointMessage();e&&(ne.Jt.setLoopEntrypointMessage(null),Z.current(e.message))},m=[],k[15]=c,k[16]=m):(c=k[15],m=k[16]),(0,S.useEffect)(c,m),k[17]===Symbol.for("react.memo_cache_sentinel")?(p=()=>(G.current&&na(G.current,{assertive:!0}),nu),k[17]=p):p=k[17],k[18]!==z||k[19]!==A||k[20]!==V?(h=[V,z,A],k[18]=z,k[19]=A,k[20]=V,k[21]=h):h=k[21],(0,S.useEffect)(p,h),k[22]!==O||k[23]!==P?(f=async e=>{await O.createLoop(e),P(`${tt.Jz}/l/${e.id}`)},k[22]=O,k[23]=P,k[24]=f):f=k[24];let J=f;k[25]!==M?(g=e=>{M(e)},k[25]=M,k[26]=g):g=k[26];let Y=g;k[27]===Symbol.for("react.memo_cache_sentinel")?(y=e=>{$(e),(0,ee.BI)("dotcom_chat.activate",{target:"LOOPS_SEARCH",mode:"loops"})},k[27]=y):y=k[27];let X=y;return k[28]===Symbol.for("react.memo_cache_sentinel")?(x=(0,o.jsxs)(tx.Zf.Header,{children:[(0,o.jsx)(tx.Zf.Title,{children:"Loops"}),(0,o.jsx)(tx.Zf.Description,{children:"Automate repetitive tasks by simply describing them using natural language. Automate once. Loop forever."})]}),k[28]=x):x=k[28],k[29]===Symbol.for("react.memo_cache_sentinel")?(v=[{name:ex.II.Loops,icon:u.LoopIcon,submitLabel:"Automate",placeholder:"What would you like to automate?"}],k[29]=v):v=k[29],k[30]!==K||k[31]!==H?(b=(0,o.jsx)(tj.V,{modes:v,size:"large",disabled:H,onSubmit:K}),k[30]=K,k[31]=H,k[32]=b):b=k[32],k[33]!==H?(_=H&&(0,o.jsx)(nn.u,{}),k[33]=H,k[34]=_):_=k[34],k[35]!==b||k[36]!==_?(j=(0,o.jsxs)("div",{className:"LoopsView-module__header--ZnQDC",children:[x,(0,o.jsxs)("div",{className:"LoopsView-module__input--HBzte",children:[b,_]})]}),k[35]=b,k[36]=_,k[37]=j):j=k[37],k[38]!==J||k[39]!==A||k[40]!==R||k[41]!==E?(w=!A&&E&&(0,o.jsxs)(tx.Zf.Section,{children:[(0,o.jsxs)("div",{className:tb,children:[(0,o.jsx)("h2",{className:t_,children:"Examples"}),(0,o.jsx)(et.K,{icon:u.XIcon,"aria-label":"Dismiss examples",variant:"invisible",size:"small",onClick:()=>{R(!1),(0,ee.BI)("dotcom_chat.activate",{target:"LOOPS_DISMISS_EXAMPLES",mode:"loops"})}})]}),(0,o.jsx)("div",{className:"LoopsView-module__examplesContainer--cshxA",children:tU.map(e=>{let{loop:t,icon:n}=e;return(0,o.jsxs)("button",{className:(0,ef.$)("LoopsView-module__exampleCard--faZyi","color-shadow-small"),onClick:()=>{(0,ee.BI)("dotcom_chat.activate",{target:"OVERVIEW_EXAMPLE_LOOP_SELECT",mode:"loops"}),J({...t,id:crypto.randomUUID(),updatedAt:Date.now(),owned:!0,visibility:"private"})},children:[(0,o.jsx)("div",{className:"LoopsView-module__exampleCardIconContainer--zgd0g",children:n?(0,o.jsx)(n,{className:"LoopsView-module__exampleCardIcon--umFeZ",size:16}):null}),(0,o.jsx)("div",{className:"LoopsView-module__exampleCardContent--jxm8o",children:(0,o.jsx)("h3",{className:"LoopsView-module__exampleCardTitle--wpbww",children:t.title})})]},t.title)})})]}),k[38]=J,k[39]=A,k[40]=R,k[41]=E,k[42]=w):w=k[42],k[43]!==z||k[44]!==Y||k[45]!==A||k[46]!==L||k[47]!==V||k[48]!==E||k[49]!==B?(N=A||L&&L.length>0?(0,o.jsxs)(tx.Zf.Section,{children:[E&&(0,o.jsx)("div",{className:tb,children:(0,o.jsx)("h2",{className:t_,children:"Loops"})}),(0,o.jsxs)("div",{className:"LoopsView-module__searchContainer--ypqMb",children:[(0,o.jsx)(tN.D,{onSearch:X,placeholder:"Search loops...","aria-label":"Search loops",debounceDelay:300}),(0,o.jsx)(tG,{value:B,onChange:Y}),(0,o.jsx)("h2",{className:"sr-only",children:"My loops"})]}),V&&z&&0===z.length?(0,o.jsxs)("div",{className:"LoopsView-module__noResultsMessage--OkrMA",ref:G,children:["No loops found matching \u201C",V,"\u201D"]}):"list"===B?(0,o.jsx)(tv.qJ,{children:(0,o.jsx)(tv.qJ.List,{loading:A,children:z?.map(nd)})}):(0,o.jsx)("div",{className:"LoopsOutputList-module__list--DoC1u",children:(z||[]).map(no)})]}):null,k[43]=z,k[44]=Y,k[45]=A,k[46]=L,k[47]=V,k[48]=E,k[49]=B,k[50]=N):N=k[50],k[51]!==A||k[52]!==L?(C=!A&&(!L||0===L.length)&&(0,o.jsxs)(tx.Zf.Section,{children:[(0,o.jsx)("div",{className:tb,children:(0,o.jsx)("h2",{className:t_,children:"Getting started"})}),(0,o.jsx)(t8,{})]}),k[51]=A,k[52]=L,k[53]=C):C=k[53],k[54]!==j||k[55]!==w||k[56]!==N||k[57]!==C?(I=(0,o.jsxs)(tx.Zf.Container,{width:"small",children:[j,w,N,C]}),k[54]=j,k[55]=w,k[56]=N,k[57]=C,k[58]=I):I=k[58],I}function no(e){return(0,o.jsx)(t5,{loop:e},e.id)}function nd(e){return(0,o.jsxs)(tv.qJ.Item,{href:`${tt.Jz}/l/${e.id}`,onClick:nc,children:[(0,o.jsx)(tv.qJ.Item.Title,{children:e.title}),(0,o.jsx)(tv.qJ.Item.Description,{children:e.description}),(0,o.jsx)(tv.qJ.Item.Actions,{children:(0,o.jsx)(tQ,{loopId:e.id})})]},e.id)}function nc(){return(0,ee.BI)("dotcom_chat.activate",{target:"OVERVIEW_USER_LOOP_SELECT",mode:"loops"})}function nu(){na.cancel()}function nm(){(0,q.D)("Loops \xb7 GitHub Copilot"),Promise.all([n.e(8206),n.e(68988),n.e(55316),n.e(8316),n.e(34031),n.e(49898)]).then(n.bind(n,88027))}function np(e){return""!==e.title||0!==e.nodes.length}try{ns.displayName||(ns.displayName="LoopsView")}catch{}try{nl.displayName||(nl.displayName="LoopsViewInner")}catch{}var nh=n(49851),nf=new WeakMap,ng=new WeakMap,ny=new WeakSet;let LoopsClient=class LoopsClient{listLoops(){return(0,e8._)(this,ny,nx).call(this,{operation:"list-loops"})}listLoopVersions(e){return(0,e8._)(this,ny,nx).call(this,{operation:"list-loop-versions",loopID:e})}createLoop(e){return(0,e8._)(this,ny,nx).call(this,{operation:"create-loop",loop:e})}updateLoop(e,t,n){return(0,e8._)(this,ny,nx).call(this,{operation:"update-loop",loopID:e,version:t,loop:n})}getLoop(e,t){return(0,e8._)(this,ny,nx).call(this,{operation:"get-loop",loopID:e,versionConstraint:t})}deleteLoop(e){return(0,e8._)(this,ny,nx).call(this,{operation:"delete-loop",loopID:e})}createExecution(e,t,n,i,a){return(0,e8._)(this,ny,nx).call(this,{operation:"create-execution",loopID:e,version:t,executionInit:{inputValues:i,nodes:n},shareID:a})}getExecution(e,t,n){return(0,e8._)(this,ny,nx).call(this,{operation:"get-execution",loopID:e,version:t,executionID:n})}updateNodeExecution(e,t,n,i,a,s){return(0,e8._)(this,ny,nx).call(this,{operation:"update-node-execution",loopID:e,version:t,executionID:n,nodeID:i,nodeExecution:a,shareID:s})}shareLoop(e){return(0,e8._)(this,ny,nx).call(this,{operation:"share-loop",loopID:e})}unshareLoop(e){return(0,e8._)(this,ny,nx).call(this,{operation:"unshare-loop",loopID:e})}executeGraphQL(e,t,n,i,a){return(0,e8._)(this,ny,nx).call(this,{operation:"execute-graphql",query:e,loopID:t,version:n,executionID:i,nodeID:a})}constructor(e,t){(0,te._)(this,ny),(0,e7._)(this,nf,{writable:!0,value:void 0}),(0,e7._)(this,ng,{writable:!0,value:void 0}),(0,e9._)(this,nf,e),(0,e9._)(this,ng,t)}};async function nx(e){if(!(0,e6._)(this,nf)||""===(0,e6._)(this,nf).trim())return(0,tc.vV)("Loops client URL is not configured"),(0,tJ.YD)("Loops client URL is not configured",void 0);let t={"Content-Type":"application/json"};if("get-execution"===e.operation&&(0,e6._)(this,ng)){let e=await (0,e6._)(this,ng).getAuthToken();t["X-Copilot-Api-Token"]=e.value}let n=await (0,k.DI)((0,e6._)(this,nf),{method:"POST",body:JSON.stringify(e),headers:t});if(!n.ok){let e=await n.text();try{return(0,tJ.YD)(JSON.parse(e),n)}catch(e){return(0,tJ.YD)(e,n)}}let i=204===n.status?void 0:await n.json();return(0,tJ.$j)(i)}var nv=n(70119),nb=n(97286),n_=n(42518);function nj(e){let t,n,i=(0,s.c)(3),{onSelect:a}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.jsx)(el.l.LeadingVisual,{children:(0,o.jsx)(nh.LP,{})}),i[0]=t):t=i[0],i[1]!==a?(n=(0,o.jsxs)(el.l.Item,{onSelect:a,children:[t,"Loops\u2026"]}),i[1]=a,i[2]=n):n=i[2],n}function nw(e){var t;let n,i,a,r,l,d,c,u,m,p,h,f,g,y,x,v,b,_,j,w=(0,s.c)(48),{onSubmit:N,onDismiss:C,client:I}=e,k=(0,W.b)(),{data:T,isError:E,isLoading:R}=(t=I,(a=(0,s.c)(3))[0]===Symbol.for("react.memo_cache_sentinel")?(n=["loop-execution-references"],a[0]=n):n=a[0],a[1]!==t?(i={queryKey:n,queryFn:()=>nS(t)},a[1]=t,a[2]=i):i=a[2],(0,nb.I)(i)),[L,A]=(0,S.useState)("");w[0]!==k||w[1]!==N||w[2]!==T?(r=e=>{if(!T)return;let t=T.find(t=>t.executionID===e);t&&k.addReference(t,"loop-executions-select-panel"),N()},w[0]=k,w[1]=N,w[2]=T,w[3]=r):r=w[3];let D=r;if(w[4]!==L||w[5]!==E||w[6]!==R||w[7]!==C||w[8]!==D||w[9]!==N||w[10]!==T){let e,t,n=T?T.map(nN).filter(e=>e.text.toLowerCase().includes(L.toLowerCase())):[];d=nv.X,g=!0,y="modal",x="large",v="instant",b="Select Loop output",c=C,u=N,w[24]===Symbol.for("react.memo_cache_sentinel")?(e=e=>A(e.currentTarget.value),w[24]=e):e=w[24],w[25]!==R?(m=(0,o.jsx)(nv.X.Header,{children:(0,o.jsx)(nv.X.SearchInput,{loading:R,onChange:e,placeholder:"Search loops","aria-label":"Search loops"})}),w[25]=R,w[26]=m):m=w[26],l=el.l,w[27]!==E||w[28]!==R?(p=!R&&E&&(0,o.jsx)(nv.X.Message,{variant:"error",size:"inline",children:"An error occurred"}),w[27]=E,w[28]=R,w[29]=p):p=w[29],h=!R&&0===n.length&&(0,o.jsx)(nv.X.Message,{variant:"empty",title:"No loop output found",children:"Try creating and running a loop to see output here"}),w[30]!==D?(t=e=>(0,o.jsxs)(el.l.Item,{onSelect:()=>D(e.key),children:[e.text,(0,o.jsx)(el.l.Description,{variant:"block",className:"LoopExecutionAttachmentMenuItem-module__itemDescription--yZ8xi",children:e.description})]},e.key),w[30]=D,w[31]=t):t=w[31],f=n.map(t),w[4]=L,w[5]=E,w[6]=R,w[7]=C,w[8]=D,w[9]=N,w[10]=T,w[11]=l,w[12]=d,w[13]=c,w[14]=u,w[15]=m,w[16]=p,w[17]=h,w[18]=f,w[19]=g,w[20]=y,w[21]=x,w[22]=v,w[23]=b}else l=w[11],d=w[12],c=w[13],u=w[14],m=w[15],p=w[16],h=w[17],f=w[18],g=w[19],y=w[20],x=w[21],v=w[22],b=w[23];return w[32]!==l||w[33]!==p||w[34]!==h||w[35]!==f?(_=(0,o.jsxs)(l,{children:[p,h,f]}),w[32]=l,w[33]=p,w[34]=h,w[35]=f,w[36]=_):_=w[36],w[37]!==d||w[38]!==c||w[39]!==u||w[40]!==m||w[41]!==_||w[42]!==g||w[43]!==y||w[44]!==x||w[45]!==v||w[46]!==b?(j=(0,o.jsxs)(d,{open:g,variant:y,width:x,selectionVariant:v,title:b,onCancel:c,onSubmit:u,children:[m,_]}),w[37]=d,w[38]=c,w[39]=u,w[40]=m,w[41]=_,w[42]=g,w[43]=y,w[44]=x,w[45]=v,w[46]=b,w[47]=j):j=w[47],j}function nN(e){var t;return{text:e.loopTitle,key:e.executionID,description:"string"==typeof(t=e.output[0]?.value)?t:JSON.stringify(t)}}let nC=[404,403];async function nS(e){let t=await e.listLoops();if(!t.success)throw Error(t.error);return(await Promise.all(t.data.map(async t=>{if(!t.version)return null;let n=await e.getExecution(t.id,t.version,"latest");if(!n.success){if(nC.includes(n.httpStatus))return null;throw Error(n.error)}return n.data}))).filter(e=>!!e).map(e=>{let n=t.data.find(t=>t.id===e?.loopID);return n?(0,n_.C)(n,e):null}).filter(e=>!!e)}try{nj.displayName||(nj.displayName="LoopExecutionAttachmentMenuItem")}catch{}try{(i=LoopExecutionsSelectPanel).displayName||(i.displayName="LoopExecutionsSelectPanel")}catch{}try{nw.displayName||(nw.displayName="LoopExecutionsSelectPanelInner")}catch{}var nI=n(12357),nk=n(73077),nT=n(96459);try{(a=LoopExecutionPreview).displayName||(a.displayName="LoopExecutionPreview")}catch{}var nE=new WeakMap,nR=new WeakMap,nL=new WeakMap;let IFrameCodeExecutor=class IFrameCodeExecutor{async execute(e,t,n){return e?new Promise(i=>{let a=document.createElement("iframe");a.src=`${(0,e6._)(this,nE)}/code-node-execution.html`,a.setAttribute("sandbox",(0,e6._)(this,nL));let s=!1,r=e=>{s||(s=!0,o&&window.removeEventListener("message",o),n?.removeEventListener("abort",l),document.body.contains(a)&&document.body.removeChild(a),i(e))},l=()=>{a.contentWindow?.postMessage({type:"cancel",nodeId:t},(0,e6._)(this,nE)),r({success:!1,error:"Aborted"})};n?.addEventListener("abort",l);let o=e=>{let n=new URL((0,e6._)(this,nE),window.location.origin).origin;e.origin!==n||t&&e.data?.nodeId!==t||(clearTimeout(d),e.data?.type==="result"?r({success:!0,result:e.data.result}):e.data?.type==="error"&&r({success:!1,error:e.data.result}))},d=setTimeout(()=>{a.contentWindow?.postMessage({type:"cancel",nodeId:t},(0,e6._)(this,nE)),r({success:!1,error:"Timeout: No response"})},(0,e6._)(this,nR));window.addEventListener("message",o),a.onerror=()=>{clearTimeout(d),r({success:!1,error:"Error: Failed to load execution environment"})},document.body.appendChild(a),a.onload=()=>{try{a.contentWindow?.postMessage({type:"execute",code:e,nodeId:t},(0,e6._)(this,nE))}catch(e){clearTimeout(d),r({success:!1,error:`Error: Failed to execute code - ${e instanceof Error?e.message:"Unknown error"}`})}}}):{success:!0,result:""}}constructor(e,t=15e3,n="allow-scripts allow-same-origin"){(0,e7._)(this,nE,{writable:!0,value:void 0}),(0,e7._)(this,nR,{writable:!0,value:void 0}),(0,e7._)(this,nL,{writable:!0,value:void 0}),(0,e9._)(this,nE,e),(0,e9._)(this,nR,t),(0,e9._)(this,nL,n)}};let LoopsPlugin=class LoopsPlugin{get attachmentMenuContribution(){if(g.W.loopExecutionReferences){var e;return{attachmentType:"loop-execution",MenuItemComponent:nj,PanelComponent:(e=this.client,function(t){return(0,o.jsx)(nw,{...t,client:e})})}}}get previewComponents(){if(g.W.loopExecutionReferences){var e;return{"loop-execution":(e=this.previewUrl,function({reference:t}){let n=(0,nT.Z)(),i=(0,W.b)();if("loop-execution"!==t.type)return null;let a=(0,tt.JP)(t),s=async e=>{e.preventDefault(),await i.selectThread(null),n(a)};return(0,o.jsx)(tD.Q,{previewUrl:e,availableModels:[],defaultModel:(0,tn.wv)(),sendChatMessage:()=>{},children:(0,o.jsxs)("div",{className:"LoopExecutionPreview-module__previewContainer--RqSzv",children:[(0,o.jsx)("div",{className:"LoopExecutionPreview-module__buttonContainer--i4KdB",children:(0,o.jsx)(nk.z,{href:a,leadingVisual:u.PencilIcon,onClick:s,children:"Edit this loop"})}),(0,o.jsx)("div",{className:"LoopExecutionPreview-module__contentContainer--k2ZO7",children:(0,o.jsx)(nI.U,{isRunning:!1,nodeValue:t.output[0]?.value})})]})})})}}}async overrideCreateMessageOptions(e){return{...e,mode:eq.lh}}constructor(e,t,n,i,a,s,r){(0,l._)(this,"id",eq.S$),(0,l._)(this,"displayName",eq.Os),(0,l._)(this,"service",void 0),(0,l._)(this,"client",void 0),(0,l._)(this,"previewUrl",void 0),(0,l._)(this,"markdownExtensions",[e4]),(0,l._)(this,"skipSyncRouteToThread",!0),(0,l._)(this,"components",[{id:"loops-list",Component:ns,routes:[eq.qe]},{id:"loop-detail",Component:tW,routes:[eq.bW]}]),(0,l._)(this,"navigationItems",[{id:eq.S$,displayName:"Loops",href:eq.QK,icon:nh.LP}]);const o=new eU.JR(a);this.client=new LoopsClient(n,o),this.service=new e5.J(this.client,new GraphQLClient(t,o,this.client),new ChatCompletionsClient(e,o,r),new IFrameCodeExecutor(i)),this.previewUrl=s}};var nA=n(91747),nD=n(26607),nP=n(51625);let SparkPlugin=class SparkPlugin{constructor(e=!1){(0,l._)(this,"id",nP.eu),(0,l._)(this,"displayName",nP._x),(0,l._)(this,"sparkEnabled",void 0),(0,l._)(this,"navigationItems",[{id:nP.eu,displayName:"Spark",href:nP.cP,icon:u.SparkleIcon,label:(0,S.createElement)(nD.A,{variant:"success"},"Preview"),external:!0}]),(0,l._)(this,"slashCommand",{key:"spark",name:"Spark",description:"Transform ideas into full-stack intelligent apps",icon:u.SparkleIcon,enabled:()=>this.sparkEnabled,disabledAction:e=>{e(nP.cP)},execute:(e,t,n)=>(ne.Jt.setSparkEntrypointMessage(e),n(nP.cP),!0),suggestions:["Make a web app to upload and analyze log files, showing error frequencies and trends.","Create an app to track team PTO and on-call schedules and visualize available team capacity by week.","Create a dashboard that visualizes uploaded CSV data as interactive charts and summary stats."],mode:{name:ex.II.Spark,icon:u.SparkleIcon,supportsAutocompletion:!0}}),this.sparkEnabled=e}};function nO(e){let t,n,i,a=(0,s.c)(32),{payload:l,handleUserSubmitRef:o}=e;a[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,V.G7)("copilot_chat_agents_empty_state"),a[0]=t):t=a[0];let d=t;a[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,V.G7)("copilot_spark_empty_state"),a[1]=n):n=a[1];let c=n,u=(0,nA.u)("copilot_swe_agent_progress_commands"),m=(0,nA.u)("copilot_agent_task_list_v2");if(a[2]!==o||a[3]!==m||a[4]!==u||a[5]!==l.agentsEnabled||a[6]!==l.apiURL||a[7]!==l.dashboardModulesEnabled||a[8]!==l.graphqlApiUrl||a[9]!==l.loopsClientUrl||a[10]!==l.loopsEnabled||a[11]!==l.loopsExecutionUrl||a[12]!==l.previewUrl||a[13]!==l.realIp||a[14]!==l.sparkEnabled||a[15]!==l.ssoOrganizations){if(i=[],g.W.loopsPlugin&&(l.loopsEnabled??!0)){let e,t=l.apiURL??"",n=l.graphqlApiUrl??"",s=l.loopsClientUrl??"",r=l.loopsExecutionUrl??"";a[17]!==l.previewUrl||a[18]!==l.realIp||a[19]!==l.ssoOrganizations||a[20]!==t||a[21]!==n||a[22]!==s||a[23]!==r?(e=new LoopsPlugin(t,n,s,r,l.ssoOrganizations?.map(nF)??[],l.previewUrl??"",l.realIp??""),a[17]=l.previewUrl,a[18]=l.realIp,a[19]=l.ssoOrganizations,a[20]=t,a[21]=n,a[22]=s,a[23]=r,a[24]=e):e=a[24],i.push(e)}if(l.sparkEnabled||c){let e;a[25]!==l.sparkEnabled?(e=new SparkPlugin(l.sparkEnabled),a[25]=l.sparkEnabled,a[26]=e):e=a[26],i.push(e)}if(l.agentsEnabled||d){let e,t=void 0!==l.dashboardModulesEnabled?l.dashboardModulesEnabled:m&&u,n=l.agentsEnabled??!1;a[27]!==o||a[28]!==t||a[29]!==n?(e=new r.c(t,o,n),a[27]=o,a[28]=t,a[29]=n,a[30]=e):e=a[30],i.push(e)}if(u){let e;a[31]===Symbol.for("react.memo_cache_sentinel")?(e=new TasksPlugin,a[31]=e):e=a[31],i.push(e)}a[2]=o,a[3]=m,a[4]=u,a[5]=l.agentsEnabled,a[6]=l.apiURL,a[7]=l.dashboardModulesEnabled,a[8]=l.graphqlApiUrl,a[9]=l.loopsClientUrl,a[10]=l.loopsEnabled,a[11]=l.loopsExecutionUrl,a[12]=l.previewUrl,a[13]=l.realIp,a[14]=l.sparkEnabled,a[15]=l.ssoOrganizations,a[16]=i}else i=a[16];return i}function nF(e){return e.id}},21046:(e,t,n)=>{function i(){}function a(){}n.d(t,{FF:()=>i,vV:()=>a})},21229:(e,t,n)=>{n.d(t,{D:()=>u});var i=n(74848),a=n(21728),s=n(46747),r=n(38621),l=n(86877),o=n(26108),d=n(99511),c=n(96540);function u(e){let t,n,u,m,p,h,f=(0,a.c)(20),{onSearch:g,placeholder:y,"aria-label":x,disabled:v,debounceDelay:b}=e,_=void 0===y?"Search...":y,j=void 0===x?"Search":x,w=void 0!==v&&v,[N,C]=(0,c.useState)(""),S=(0,s.d)(g,void 0===b?200:b);f[0]!==S||f[1]!==g?(t=e=>{let t=e.currentTarget.value;C(t),""===t.trim()?g(""):S(t)},f[0]=S,f[1]=g,f[2]=t):t=f[2];let I=t;f[3]!==g?(n=()=>{C(""),g("")},f[3]=g,f[4]=n):n=f[4];let k=n;return f[5]!==j?(u=(0,i.jsx)(l.A.Label,{visuallyHidden:!0,children:j}),f[5]=j,f[6]=u):u=f[6],f[7]!==k||f[8]!==w||f[9]!==N?(m=""!==N?(0,i.jsx)(o.K,{icon:r.XCircleFillIcon,onClick:k,"aria-label":"Clear search",variant:"invisible",size:"small",disabled:w}):void 0,f[7]=k,f[8]=w,f[9]=N,f[10]=m):m=f[10],f[11]!==I||f[12]!==_||f[13]!==N||f[14]!==m?(p=(0,i.jsx)(d.A,{className:"SearchInput-module__searchInput--PKKMu",placeholder:_,value:N,onChange:I,leadingVisual:r.SearchIcon,trailingAction:m}),f[11]=I,f[12]=_,f[13]=N,f[14]=m,f[15]=p):p=f[15],f[16]!==w||f[17]!==u||f[18]!==p?(h=(0,i.jsx)("div",{className:"SearchInput-module__searchContainer--r7MLn",children:(0,i.jsxs)(l.A,{className:"SearchInput-module__searchInputWrapper--fhRw6",disabled:w,children:[u,p]})}),f[16]=w,f[17]=u,f[18]=p,f[19]=h):h=f[19],h}try{u.displayName||(u.displayName="SearchInput")}catch{}},21502:(e,t,n)=>{n.d(t,{B:()=>r});var i=n(21728),a=n(27912),s=n(96540);function r(e){let t,n=(0,i.c)(2),r=function(e){let t,n,a,r=(0,i.c)(5);r[0]!==e?(t=()=>"undefined"!=typeof window&&window.matchMedia(e).matches,r[0]=e,r[1]=t):t=r[1];let[l,o]=(0,s.useState)(t);return r[2]!==e?(n=()=>{let t=window.matchMedia(e),n=e=>{o(e.matches)};return o(t.matches),t.addEventListener("change",n),()=>{t.removeEventListener("change",n)}},a=[e],r[2]=e,r[3]=n,r[4]=a):(n=r[3],a=r[4]),(0,s.useEffect)(n,a),l}(void 0===e?a.X:e);return n[0]!==r?(t={isNarrowViewport:r},n[0]=r,n[1]=t):t=n[1],t}},21968:(e,t,n)=>{n.d(t,{O:()=>O});var i=n(74848),a=n(68273),s=n(21728),r=n(96540),l=n(98755),o=n(25407),d=n(26052),c=n(69726),u=n(84268),m=n(56149),p=n(21373),h=n(62935),f=n(72579),g=n(29e3),y=n(66990),x=n(79634),v=n(79431),b=n(11196),_=n(97665),j=n(33578),w=n(30923),N=n(20622),C=n(53885),S=n(96379),I=n(94747);let k=(0,a.Z6)()?function(){let e,t=(0,s.c)(2),n=(0,C.e)(N.uT.changeBase);return t[0]!==n?(e={mutationFn:e=>{let{newBaseBranch:t}=e,i=btoa(t);return(0,S.Sr)(n,{method:"PATCH",body:{new_base_binary:i}})},onSuccess:T},t[0]=n,t[1]=e):e=t[1],(0,I.n)(e)}:function(){let e=(0,C.e)(N.uT.changeBase);return(0,I.n)({mutationFn:({newBaseBranch:t})=>{let n=btoa(t);return(0,S.Sr)(e,{method:"PATCH",body:{new_base_binary:n}})},onSuccess:async e=>{let t=await e.json();if(t.error)throw Error(t.error);let n=await (await (0,w.Ee)(t.orchestration.url,{headers:{accept:"application/json"}})).json();if(n.orchestration.error_message)throw Error(n.orchestration.error_message)}})};async function T(e){let t=await e.json();if(t.error)throw Error(t.error);let n=await (await (0,w.Ee)(t.orchestration.url,{headers:{accept:"application/json"}})).json();if(n.orchestration.error_message)throw Error(n.orchestration.error_message)}let E="PullRequestHeaderSummary-module__truncateBranch--bdsQu";var R=n(34261),L=n(95807),A=n(99223),D=n(69599),P=n(37212);function O({author:e,baseBranch:t,baseRepositoryDefaultBranch:n="",baseRepositoryName:a="",baseRepositoryOwnerLogin:s="",canChangeBase:f=!1,commitsCount:b,headBranch:w,headRepositoryOwnerLogin:N="",headRepositoryName:C="",isInAdvisoryRepo:S,isEditing:I=!1,mergedBy:T,mergedByName:E,mergedTime:O,pullRequestId:B,pullRequestNumber:M,repositoryId:V,setIsEditing:$,state:U}){var q,W,H;let G,z=(0,_.jE)(),{refListCacheKey:K}=(0,x.X)(),[Q,Z]=(0,r.useState)(!1),[J,Y]=(0,r.useState)(!1),[X,ee]=(0,r.useState)(""),[et,en]=(0,r.useState)(""),ei=(0,D.G7)("render_user_display_name"),ea=(0,R.f)(),es=(0,P.NP)(),{mutate:er}=k(),el=e=>{Y(!1),ee(e)},eo=J?()=>(0,i.jsx)(c.A,{size:"small"}):null,ed=N&&N!==s?`${s}:${t}`:t,ec=function(e,t,n,i,a){if(!t)return"unknown repository";let s=!!t&&t!==e,r=a&&!!n;switch(!0){case s&&r:return`${t}/${n}:${i}`;case s:return`${t}:${i}`;case r:return`${n}:${i}`;default:return i}}(s,N,C,w,S),eu=U===j.Q.Merged?T?{login:T,displayName:E}:null:e,em=(q=U,W=b,H=eu?.login,G=`${W} ${W>1?"commits":"commit"}`,q!==j.Q.Merged?`wants to merge ${G} into`:H?`merged ${G} into`:`${G} merged into`);return(0,i.jsxs)("span",{className:"fgColor-muted d-flex flex-items-center overflow-hidden PullRequestHeaderSummary-module__summaryContainer--iNR1T",children:[eu?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.A,{inline:!0,className:"fgColor-muted text-bold","data-hovercard-url":(0,o.dCN)({owner:eu.login}),href:`/${eu.login}`,children:ei?(0,i.jsx)(d.v,{login:eu.login,profileName:eu.displayName,isAgent:!1}):eu.login})," "]}):null,em,f&&I?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(y.PI,{cacheKey:K,canCreate:!1,closeOnSelect:!0,currentCommitish:t,defaultBranch:n,hideShowAll:!0,owner:s,repo:a,types:["branch"],onSelectItem:e=>{Z(!0),en(e)}}),(0,i.jsx)(m.ZL,{children:(0,i.jsxs)(g.A,{"aria-labelledby":"confirm-change-base-branch",isOpen:Q,onDismiss:()=>{Z(!1),en(""),ee("")},children:[(0,i.jsx)(g.A.Header,{id:"confirm-change-base-branch",children:"Are you sure you want to change the base?"}),(0,i.jsxs)("div",{className:"p-3",children:[(0,i.jsx)("span",{children:"Some commits from the old base branch may be removed from the timeline, and old review comments may become outdated."}),X&&(0,i.jsx)(v.v,{className:"mt-2",variant:"critical",children:X}),(0,i.jsx)("span",{className:"sr-only","aria-live":"polite",children:J?"Base branch update in progress.":""}),(0,i.jsx)(p.Q,{alignContent:"center","aria-disabled":J?"true":void 0,block:!0,className:"mt-3",disabled:J,leadingVisual:eo,onClick:()=>{Y(!0),er({newBaseBranch:et},{onError:e=>el(e.message),onSuccess:async()=>{try{await Promise.all([z.refetchQueries({queryKey:ea},{throwOnError:!0}),z.refetchQueries({queryKey:es},{throwOnError:!0})]),Y(!1),$?.(!1),Z(!1)}catch{el("Unable to refetch commits. Please refresh the page.")}}})},variant:"primary",children:J?null:"Change base"})]})]})})]}):(0,i.jsx)(F,{branch:t,branchText:ed,repositoryName:a,repositoryOwner:s}),(0,i.jsx)("span",{children:"from "}),(0,i.jsxs)("div",{className:"d-flex flex-items-center overflow-hidden",children:[(0,i.jsx)(F,{branch:w,branchText:ec,repositoryName:C,repositoryOwner:N}),(0,i.jsx)(l.T,{ariaLabel:"Copy head branch name to clipboard",size:"small",textToCopy:N?ec:w})]}),U===j.Q.Merged&&(0,i.jsx)(h.A,{datetime:O}),U===j.Q.Open&&!(0,A.k)()&&(0,i.jsx)(L.i,{processingIndicatorUrl:(0,o.CZ9)({owner:s,repo:a,number:M}),repositoryId:V,pullRequestId:B})]})}let F=(0,a.Z6)()?function(e){let t=(0,s.c)(12),{branchText:n,repositoryOwner:a,repositoryName:r,branch:l}=e;if(r&&a){let e,s,d;t[0]!==l||t[1]!==r||t[2]!==a?(e=(0,o.WJ9)({owner:a,repo:r,branch:l}),t[0]=l,t[1]=r,t[2]=a,t[3]=e):e=t[3];let c=e,u=`${a}/${r}:${l}`;return t[4]!==n||t[5]!==c?(s=(0,i.jsx)(f.A,{href:c,className:E,children:n}),t[4]=n,t[5]=c,t[6]=s):s=t[6],t[7]!==u||t[8]!==s?(d=(0,i.jsx)(b.m,{text:u,children:s}),t[7]=u,t[8]=s,t[9]=d):d=t[9],d}{let e;return t[10]!==n?(e=(0,i.jsx)(f.A,{as:"span",className:E,title:"This repository has been deleted",children:n}),t[10]=n,t[11]=e):e=t[11],e}}:function({branchText:e,repositoryOwner:t,repositoryName:n,branch:a}){if(!n||!t)return(0,i.jsx)(f.A,{as:"span",className:E,title:"This repository has been deleted",children:e});{let s=(0,o.WJ9)({owner:t,repo:n,branch:a});return(0,i.jsx)(b.m,{text:`${t}/${n}:${a}`,children:(0,i.jsx)(f.A,{href:s,className:E,children:e})})}};try{O.displayName||(O.displayName="PullRequestHeaderSummary")}catch{}try{F.displayName||(F.displayName="PullRequestBranchName")}catch{}},22053:(e,t,n)=>{n.d(t,{a:()=>l});var i=n(21728),a=n(50050),s=n(33026),r=n(64917);function l(){let e,t=(0,i.c)(4),n=(0,a.Ud)(d),l=(0,r.I)(o),c=n!==s.kj&&n!==s.qD;if(void 0===l){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={isReadonly:!1,isLoading:!0},t[0]=e):e=t[0],e}if(!1===l){let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e={isReadonly:!0,isLoading:!1,reason:"shared"},t[1]=e):e=t[1],e}if(c){let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e={isReadonly:!0,isLoading:!1,reason:"previousVersion"},t[2]=e):e=t[2],e}return t[3]===Symbol.for("react.memo_cache_sentinel")?(e={isReadonly:!1,isLoading:!1},t[3]=e):e=t[3],e}function o(e){return e?.owned}function d(e){return e.version}},22116:(e,t,n)=>{n.d(t,{x:()=>c});var i=n(74848),a=n(21728),s=n(53419),r=n(38621),l=n(84268),o=n(76720),d=n(96540);function c(e){let t,n,c,u,m,p,h=(0,a.c)(8),{regionName:f}=e;return h[0]!==f?(t=()=>{let e=`ERROR_FALLBACK_${f.toUpperCase().replace(/\s+/g,"_")}`;(0,s.BI)("dotcom_chat.activate",{target:e,mode:"immersive",message:`${f} error fallback`})},n=[f],h[0]=f,h[1]=t,h[2]=n):(t=h[1],n=h[2]),(0,d.useEffect)(t,n),h[3]===Symbol.for("react.memo_cache_sentinel")?(c=(0,i.jsx)(o.E.Visual,{children:(0,i.jsx)(r.AlertIcon,{size:"medium"})}),u=(0,i.jsx)(o.E.Heading,{children:"Something went wrong"}),h[3]=c,h[4]=u):(c=h[3],u=h[4]),h[5]===Symbol.for("react.memo_cache_sentinel")?(m=(0,i.jsx)(l.A,{href:"https://support.github.com/",inline:!0,children:"contact support"}),h[5]=m):m=h[5],h[6]!==f?(p=(0,i.jsx)("div",{className:"ErrorFallback-module__errorFallbackContainer--uGjJA",children:(0,i.jsxs)(o.E,{children:[c,u,(0,i.jsxs)(o.E.Description,{children:[f," is temporarily unavailable due to an unknown error. Try reloading the page or, if the error persists,"," ",m,"."]})]})}),h[6]=f,h[7]=p):p=h[7],p}try{c.displayName||(c.displayName="ErrorFallback")}catch{}},24798:(e,t,n)=>{n.d(t,{o:()=>r});var i=n(68273),a=n(21728),s=n(76648);let r=(0,i.Z6)()?function(){let e,t=(0,a.c)(7),n=(0,s.B)()??{};if(n&&"header"in n)return n.header;let{aliveChannel:i,pullRequest:r,bannersData:l,repository:o,urls:d,user:c}=n;return t[0]!==i||t[1]!==l||t[2]!==r||t[3]!==o||t[4]!==d||t[5]!==c?(e={aliveChannel:i,pullRequest:r,bannersData:l,repository:o,urls:d,user:c},t[0]=i,t[1]=l,t[2]=r,t[3]=o,t[4]=d,t[5]=c,t[6]=e):e=t[6],e}:function(){let e=(0,s.B)()??{};if(e&&"header"in e)return e.header;let{aliveChannel:t,pullRequest:n,bannersData:i,repository:a,urls:r,user:l}=e;return{aliveChannel:t,pullRequest:n,bannersData:i,repository:a,urls:r,user:l}}},25506:(e,t,n)=>{n.d(t,{a:()=>s});var i=n(21728),a=n(23967);function s(e){let t,n,s=(0,i.c)(7),{language:r,value:l}=e;s[0]!==r||s[1]!==l?(t=function({language:e,value:t}){var n,i;let s,r=(n=t,/^\t/m.test(n)?"tab":"space");return{indentUnit:function(e,t){if("space"!==t)return 4;{var n;let t=e.match(/^( +)[^*]/im);return void 0!==(n=t?.[1]?.length)&&n>=1&&n<=12?n:2}}(t,r),indentWithTabs:"tab"===r,lineWrapping:(i=e,s=(0,a.vL)(i),s?.wrap??!1)}}({language:r,value:l}),s[0]=r,s[1]=l,s[2]=t):t=s[2];let o=t;return s[3]!==o.indentUnit||s[4]!==o.indentWithTabs||s[5]!==o.lineWrapping?(n={indentUnit:o.indentUnit,indentWithTabs:o.indentWithTabs,lineWrapping:o.lineWrapping},s[3]=o.indentUnit,s[4]=o.indentWithTabs,s[5]=o.lineWrapping,s[6]=n):n=s[6],n}},26956:(e,t,n)=>{n.d(t,{Zf:()=>j});var i=n(74848),a=n(21728),s=n(82156),r=n(34164),l=n(96540);let o="ContentView-module__sectionGrid--unHY4";function d(e){let t,n,s,o,d,u,m=(0,a.c)(15),{children:p,width:h,noHeader:f}=e;if(m[0]!==p){for(let e of(t=[],n=[],l.Children.toArray(p)))l.isValidElement(e)&&e.type===c?t.push(e):n.push(e);m[0]=p,m[1]=t,m[2]=n}else t=m[1],n=m[2];m[3]!==f?(s=(0,r.$)("ContentView-module__contentContainer--q5UcY",{"ContentView-module__noHeader--EociJ":f}),m[3]=f,m[4]=s):s=m[4];let g="small"===h,y="medium"===h;return m[5]!==g||m[6]!==y?(o=(0,r.$)("ContentView-module__content--kzPet",{"ContentView-module__small--r1fwP":g,"ContentView-module__medium--TcCTp":y}),m[5]=g,m[6]=y,m[7]=o):o=m[7],m[8]!==t||m[9]!==n||m[10]!==o?(d=(0,i.jsxs)("div",{className:o,children:[t,n]}),m[8]=t,m[9]=n,m[10]=o,m[11]=d):d=m[11],m[12]!==s||m[13]!==d?(u=(0,i.jsx)("div",{className:"ContentView-module__scrollContainer--_BylN",children:(0,i.jsx)("div",{className:s,children:d})}),m[12]=s,m[13]=d,m[14]=u):u=m[14],u}function c(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("div",{className:"ContentView-module__banner--rgHMe",children:s}),n[0]=s,n[1]=t):t=n[1],t}function u(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("div",{className:"ContentView-module__serviceHeader--DEEHs",children:s}),n[0]=s,n[1]=t):t=n[1],t}function m(e){let t,n,s=(0,a.c)(5),{children:l,className:o}=e;return s[0]!==o?(t=(0,r.$)("ContentView-module__section--avH_l",o),s[0]=o,s[1]=t):t=s[1],s[2]!==l||s[3]!==t?(n=(0,i.jsx)("section",{className:t,children:l}),s[2]=l,s[3]=t,s[4]=n):n=s[4],n}function p(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("h1",{className:"ContentView-module__serviceTitle--PbOYe",children:s}),n[0]=s,n[1]=t):t=n[1],t}function h(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("p",{className:"ContentView-module__serviceDescription--ZNDZz",children:s}),n[0]=s,n[1]=t):t=n[1],t}function f(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("div",{className:"ContentView-module__serviceActions--IucKo",children:s}),n[0]=s,n[1]=t):t=n[1],t}function g(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("h2",{className:"ContentView-module__sectionTitle--MkQwz",children:s}),n[0]=s,n[1]=t):t=n[1],t}function y(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("div",{className:"ContentView-module__sectionGridEmpty--oxnzj",children:s}),n[0]=s,n[1]=t):t=n[1],t}function x(e){let t,n,s,r=(0,a.c)(8),{children:d,loading:c}=e;if(void 0!==c&&c){let e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("div",{className:o,"data-testid":"service-view-skeleton",children:[void 0,void 0,void 0].map(_)}),r[0]=e):e=r[0],e}if(r[1]!==d){let e=l.Children.toArray(d);t=e.find(b),n=e.filter(v),r[1]=d,r[2]=t,r[3]=n}else t=r[2],n=r[3];let u=n;if(0===u.length&&t){let e;return r[4]!==t?(e=(0,i.jsx)(i.Fragment,{children:t}),r[4]=t,r[5]=e):e=r[5],e}return r[6]!==u?(s=(0,i.jsx)("div",{className:o,children:u}),r[6]=u,r[7]=s):s=r[7],s}function v(e){return!(l.isValidElement(e)&&e.type===y)}function b(e){return l.isValidElement(e)&&e.type===y}function _(e,t){return(0,i.jsx)(s.f,{className:"ContentView-module__skeletonCard--e4yHy"},t)}x.Empty=y,m.Title=g,m.Grid=x;let j={Title:p,Description:h,Actions:f,Container:d,Banner:c,Header:u,Section:m};j.displayName="ContentView",d.displayName="ContentView.Container",c.displayName="ContentView.Banner",u.displayName="ContentView.Header",m.displayName="ContentView.Section",p.displayName="ContentView.Title",h.displayName="ContentView.Description",f.displayName="ContentView.Actions",g.displayName="ContentView.Section.Title",x.displayName="ContentView.Section.Grid",y.displayName="ContentView.Section.Grid.Empty"},28177:(e,t,n)=>{n.d(t,{n:()=>r});var i=n(74848),a=n(21728),s=n(38621);function r(e){let t,n=(0,a.c)(3);if("existing-issue"===e.type){if("open"===e.state){let e;return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(s.IssueOpenedIcon,{className:"fgColor-open"}),n[0]=e):e=n[0],e}if("closed"===e.state){let e;return n[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(s.IssueClosedIcon,{className:"fgColor-done"}),n[1]=e):e=n[1],e}}return n[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(s.IssueDraftIcon,{className:"fgColor-draft"}),n[2]=t):t=n[2],t}try{r.displayName||(r.displayName="IssueIcon")}catch{}},30388:(e,t,n)=>{n.d(t,{qJ:()=>C});var i=n(74848),a=n(21728),s=n(96540),r=n(34164),l=n(61526),o=n(40090);let d="ListBlock-module__list--YHbt4",c="ListBlock-module__item--xlbmd",u="ListBlock-module__itemContent--cacSg",m="ListBlock-module__itemClickable--AFcjc";function p(e){let t,n,s=(0,a.c)(5),{children:l,className:o}=e;return s[0]!==o?(t=(0,r.$)("ListBlock-module__container--QbgMo",o),s[0]=o,s[1]=t):t=s[1],s[2]!==l||s[3]!==t?(n=(0,i.jsx)("div",{className:t,children:l}),s[2]=l,s[3]=t,s[4]=n):n=s[4],n}function h(e){let t,n,s=(0,a.c)(5),{children:l,className:o}=e;return s[0]!==o?(t=(0,r.$)("ListBlock-module__header--meKIf",o),s[0]=o,s[1]=t):t=s[1],s[2]!==l||s[3]!==t?(n=(0,i.jsx)("div",{className:t,children:l}),s[2]=l,s[3]=t,s[4]=n):n=s[4],n}function f(e){let t,n,s,r,l=(0,a.c)(11);if(l[0]!==e?({children:t,loading:s,...n}=e,l[0]=e,l[1]=t,l[2]=n,l[3]=s):(t=l[1],n=l[2],s=l[3]),void 0!==s&&s){let e,t;return l[4]===Symbol.for("react.memo_cache_sentinel")?(e=[void 0,void 0,void 0,void 0,void 0].map(g),l[4]=e):e=l[4],l[5]!==n||l[6]!==e?(t=(0,i.jsx)("ul",{className:d,"data-testid":"list-block-skeleton",...n,children:e}),l[5]=n,l[6]=e,l[7]=t):t=l[7],t}return l[8]!==t||l[9]!==n?(r=(0,i.jsx)("ul",{className:d,...n,children:t}),l[8]=t,l[9]=n,l[10]=r):r=l[10],r}function g(e,t){return(0,i.jsx)(v,{},t)}function y(e){let t,n,o,d=(0,a.c)(47),p=null,h=null,f=null,g=null,y=null;if(d[0]!==e.children){for(let t of s.Children.toArray(e.children))s.isValidElement(t)&&(t.type===b?p=t:t.type===_?h=t:t.type===j?f=t:t.type===w?g=t:t.type===x&&(y=t));d[0]=e.children,d[1]=p,d[2]=h,d[3]=f,d[4]=g,d[5]=y}else p=d[1],h=d[2],f=d[3],g=d[4],y=d[5];d[6]!==f||d[7]!==p||d[8]!==g||d[9]!==h?(t=(0,i.jsxs)(i.Fragment,{children:[p,h,f,g]}),d[6]=f,d[7]=p,d[8]=g,d[9]=h,d[10]=t):t=d[10];let v=t;if("href"in e){let t,n,a,s,o,p;if(d[11]!==e?({href:t,isExternalLink:a,...n}=e,d[11]=e,d[12]=t,d[13]=n,d[14]=a):(t=d[12],n=d[13],a=d[14]),void 0!==a&&a){let e,a,s;return d[15]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.$)(u,m),d[15]=e):e=d[15],d[16]!==v||d[17]!==t||d[18]!==n?(a=(0,i.jsx)("a",{href:t,className:e,target:"_self",rel:"noopener noreferrer",...n,children:v}),d[16]=v,d[17]=t,d[18]=n,d[19]=a):a=d[19],d[20]!==y||d[21]!==a?(s=(0,i.jsxs)("li",{className:c,children:[a,y]}),d[20]=y,d[21]=a,d[22]=s):s=d[22],s}return d[23]===Symbol.for("react.memo_cache_sentinel")?(s=(0,r.$)(u,m),d[23]=s):s=d[23],d[24]!==v||d[25]!==t||d[26]!==n?(o=(0,i.jsx)(l.N_,{...n,to:t,className:s,children:v}),d[24]=v,d[25]=t,d[26]=n,d[27]=o):o=d[27],d[28]!==y||d[29]!==o?(p=(0,i.jsxs)("li",{className:c,children:[o,y]}),d[28]=y,d[29]=o,d[30]=p):p=d[30],p}if("onClick"in e){let t,n,a,s,l;return d[31]!==e?({onClick:t,...n}=e,d[31]=e,d[32]=t,d[33]=n):(t=d[32],n=d[33]),d[34]===Symbol.for("react.memo_cache_sentinel")?(a=(0,r.$)(u,m),d[34]=a):a=d[34],d[35]!==v||d[36]!==t||d[37]!==n?(s=(0,i.jsx)("button",{...n,className:a,onClick:t,children:v}),d[35]=v,d[36]=t,d[37]=n,d[38]=s):s=d[38],d[39]!==y||d[40]!==s?(l=(0,i.jsxs)("li",{className:c,children:[s,y]}),d[39]=y,d[40]=s,d[41]=l):l=d[41],l}return d[42]!==v?(n=(0,i.jsx)("div",{className:u,children:v}),d[42]=v,d[43]=n):n=d[43],d[44]!==y||d[45]!==n?(o=(0,i.jsxs)("li",{className:c,children:[n,y]}),d[44]=y,d[45]=n,d[46]=o):o=d[46],o}function x(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("div",{className:"ListBlock-module__actions--LfUWo",children:s}),n[0]=s,n[1]=t):t=n[1],t}function v(){let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("li",{className:c,children:(0,i.jsx)("div",{className:"ListBlock-module__skeletonItem--ZfJMT",children:(0,i.jsx)(o.r,{lines:2})})}),t[0]=e):e=t[0],e}function b(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("div",{className:"ListBlock-module__leadingVisual--tOjGr",children:s}),n[0]=s,n[1]=t):t=n[1],t}function _(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("h3",{className:"ListBlock-module__title--MZAST",children:s}),n[0]=s,n[1]=t):t=n[1],t}function j(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("div",{className:"ListBlock-module__description--dTYnl",children:s}),n[0]=s,n[1]=t):t=n[1],t}function w(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("div",{className:"ListBlock-module__metadata--gtl9k",children:s}),n[0]=s,n[1]=t):t=n[1],t}function N(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("li",{className:"ListBlock-module__emptyState--MymTD",children:s}),n[0]=s,n[1]=t):t=n[1],t}y.LeadingVisual=b,y.Title=_,y.Description=j,y.SecondaryDescription=w,y.Metadata=w,y.Actions=x,y.Skeleton=v;let C=p;C.Header=h,C.List=f,C.Item=y,C.EmptyState=N,C.displayName="ListBlock",h.displayName="ListBlock.Header",f.displayName="ListBlock.List",y.displayName="ListBlock.Item",b.displayName="ListBlock.Item.LeadingVisual",_.displayName="ListBlock.Item.Title",j.displayName="ListBlock.Item.Description",w.displayName="ListBlock.Item.Metadata",x.displayName="ListBlock.Item.Actions",v.displayName="ListBlock.Item.Skeleton",N.displayName="ListBlock.EmptyState";try{p.displayName||(p.displayName="ListBlock")}catch{}},31629:(e,t,n)=>{function i(e){return"github-graphql"===e.type}function a(e){return"loop"===e.type}function s(e){return"text"===e.type}n.d(t,{Tm:()=>i,ir:()=>s,jq:()=>a})},31675:(e,t,n)=>{n.d(t,{A:()=>i});let i={"hide-on-mobile":"responsive-module__hide-on-mobile--lWlU1","hide-on-desktop":"responsive-module__hide-on-desktop--op38F","hide-on-small":"responsive-module__hide-on-small--oDr47","hide-on-medium-up":"responsive-module__hide-on-medium-up--imsgz"}},33026:(e,t,n)=>{n.d(t,{U8:()=>s,kj:()=>i,qD:()=>a});let i="draft",a="latest",s=i},33195:(e,t,n)=>{n.d(t,{u:()=>u});var i=n(74848),a=n(68273),s=n(21728),r=n(46589),l=n(96540),o=n(34164);let d="PullRequestStateLabel-module__unlisted--pcrfP";var c=n(33578);let u=(0,a.Z6)()?function(e){let t,n,a=(0,s.c)(7),{className:l,state:u}=e,p=c.a[u];if(u===c.Q.Unlisted){let e;return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsxs)("span",{className:d,children:[(0,i.jsx)(m,{})," Unlisted"]}),a[0]=e):e=a[0],e}a[1]!==l?(t=(0,o.$)("flex-self-start",l),a[1]=l,a[2]=t):t=a[2];let h=p.status;return a[3]!==p.description||a[4]!==t||a[5]!==h?(n=(0,i.jsx)(r.A,{className:t,status:h,children:p.description}),a[3]=p.description,a[4]=t,a[5]=h,a[6]=n):n=a[6],n}:function({className:e,state:t}){let n=(0,l.useMemo)(()=>c.a[t],[t]);return t===c.Q.Unlisted?(0,i.jsxs)("span",{className:d,children:[(0,i.jsx)(m,{})," Unlisted"]}):(0,i.jsx)(r.A,{className:(0,o.$)("flex-self-start",e),status:n.status,children:n.description})},m=(0,a.Z6)()?function(){let e,t=(0,s.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",fill:"currentColor",children:[(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.5 3.25C2.5 2.83579 2.83579 2.5 3.25 2.5C3.66421 2.5 4 2.83579 4 3.25C4 3.66421 3.66421 4 3.25 4C2.83579 4 2.5 3.66421 2.5 3.25ZM3.25 1C2.00736 1 1 2.00736 1 3.25C1 4.22966 1.62611 5.06309 2.5 5.37197V10.628C1.62611 10.9369 1 11.7703 1 12.75C1 13.9926 2.00736 15 3.25 15C4.49264 15 5.5 13.9926 5.5 12.75C5.5 11.7703 4.87389 10.9369 4 10.628V5.37197C4.87389 5.06309 5.5 4.22966 5.5 3.25C5.5 2.00736 4.49264 1 3.25 1ZM3.25 12C2.83579 12 2.5 12.3358 2.5 12.75C2.5 13.1642 2.83579 13.5 3.25 13.5C3.66421 13.5 4 13.1642 4 12.75C4 12.3358 3.66421 12 3.25 12Z"}),(0,i.jsx)("path",{d:"M14 7.5C14 8.19036 13.3844 8.75 12.625 8.75C11.8656 8.75 11.25 8.19036 11.25 7.5C11.25 6.80964 11.8656 6.25 12.625 6.25C13.3844 6.25 14 6.80964 14 7.5Z"}),(0,i.jsx)("path",{d:"M14 2.75C14 3.44036 13.3844 4 12.625 4C11.8656 4 11.25 3.44036 11.25 2.75C11.25 2.05964 11.8656 1.5 12.625 1.5C13.3844 1.5 14 2.05964 14 2.75Z"}),(0,i.jsx)("path",{d:"M10.2197 10.7197C10.5126 10.4268 10.9874 10.4268 11.2803 10.7197L14.2803 13.7197C14.5732 14.0126 14.5732 14.4874 14.2803 14.7803C13.9874 15.0732 13.5126 15.0732 13.2197 14.7803L10.2197 11.7803C9.92683 11.4874 9.92683 11.0126 10.2197 10.7197Z"})]}),t[0]=e):e=t[0],e}:function(){return(0,i.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",fill:"currentColor",children:[(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.5 3.25C2.5 2.83579 2.83579 2.5 3.25 2.5C3.66421 2.5 4 2.83579 4 3.25C4 3.66421 3.66421 4 3.25 4C2.83579 4 2.5 3.66421 2.5 3.25ZM3.25 1C2.00736 1 1 2.00736 1 3.25C1 4.22966 1.62611 5.06309 2.5 5.37197V10.628C1.62611 10.9369 1 11.7703 1 12.75C1 13.9926 2.00736 15 3.25 15C4.49264 15 5.5 13.9926 5.5 12.75C5.5 11.7703 4.87389 10.9369 4 10.628V5.37197C4.87389 5.06309 5.5 4.22966 5.5 3.25C5.5 2.00736 4.49264 1 3.25 1ZM3.25 12C2.83579 12 2.5 12.3358 2.5 12.75C2.5 13.1642 2.83579 13.5 3.25 13.5C3.66421 13.5 4 13.1642 4 12.75C4 12.3358 3.66421 12 3.25 12Z"}),(0,i.jsx)("path",{d:"M14 7.5C14 8.19036 13.3844 8.75 12.625 8.75C11.8656 8.75 11.25 8.19036 11.25 7.5C11.25 6.80964 11.8656 6.25 12.625 6.25C13.3844 6.25 14 6.80964 14 7.5Z"}),(0,i.jsx)("path",{d:"M14 2.75C14 3.44036 13.3844 4 12.625 4C11.8656 4 11.25 3.44036 11.25 2.75C11.25 2.05964 11.8656 1.5 12.625 1.5C13.3844 1.5 14 2.05964 14 2.75Z"}),(0,i.jsx)("path",{d:"M10.2197 10.7197C10.5126 10.4268 10.9874 10.4268 11.2803 10.7197L14.2803 13.7197C14.5732 14.0126 14.5732 14.4874 14.2803 14.7803C13.9874 15.0732 13.5126 15.0732 13.2197 14.7803L10.2197 11.7803C9.92683 11.4874 9.92683 11.0126 10.2197 10.7197Z"})]})};try{u.displayName||(u.displayName="PullRequestStateLabel")}catch{}try{m.displayName||(m.displayName="GitPullRequestUnlistedSvg")}catch{}},33578:(e,t,n)=>{n.d(t,{Q:()=>i,a:()=>a});let i={Open:"OPEN",Closed:"CLOSED",Merged:"MERGED",Queued:"QUEUED",Draft:"DRAFT",Unlisted:"UNLISTED"},a={[i.Open]:{description:"Open",status:"pullOpened"},[i.Closed]:{description:"Closed",status:"pullClosed"},[i.Queued]:{description:"Queued",status:"pullQueued"},[i.Merged]:{description:"Merged",status:"pullMerged"},[i.Draft]:{description:"Draft",status:"draft"},[i.Unlisted]:{description:"Unlisted",status:"unlisted"}}},33644:(e,t,n)=>{n.d(t,{A:()=>i});let i={stickyHeader:"use-sticky-header-module__stickyHeader--UQFpz"}},34031:(e,t,n)=>{n.d(t,{M:()=>r});var i=n(74848),a=n(21728),s=n(74807);function r(e){let t,n,r,l,o=(0,a.c)(8),{isRunning:d,messages:c}=e;o[0]===Symbol.for("react.memo_cache_sentinel")?(t={running:"Running...",waiting:"Waiting..."},o[0]=t):t=o[0];let u=t,m=c||u,p=d?m.running:m.waiting,h=d?"thinking":"static";return o[1]!==h?(n=(0,i.jsx)(s.N,{animationType:h,loopAnimation:!0}),o[1]=h,o[2]=n):n=o[2],o[3]!==p?(r=(0,i.jsx)("div",{className:"RunningDisplay-module__text--nICc0",children:p}),o[3]=p,o[4]=r):r=o[4],o[5]!==n||o[6]!==r?(l=(0,i.jsxs)("div",{className:"RunningDisplay-module__container--dUZ8X",children:[n,r]}),o[5]=n,o[6]=r,o[7]=l):l=o[7],l}try{r.displayName||(r.displayName="RunningDisplay")}catch{}},34261:(e,t,n)=>{n.d(t,{W:()=>u,f:()=>c});var i=n(68273),a=n(21728),s=n(65510),r=n(20622),l=n(53885),o=n(96379),d=n(50129);let c=(0,i.Z6)()?function(){let e,t=(0,a.c)(2),{basePageDataUrl:n}=(0,d.Yu)(),i=`basePageDataURL:${n}`;return t[0]!==i?(e=[r.uT.header,i],t[0]=i,t[1]=e):e=t[1],e}:function(){let{basePageDataUrl:e}=(0,d.Yu)();return[r.uT.header,`basePageDataURL:${e}`]},u=(0,i.Z6)()?function(e){let t,n,i=(0,a.c)(6),d=(0,l.e)(r.uT.header),u=c();return i[0]!==d?(t=async()=>{let e=await (0,o.QJ)(d);if(!e.ok)throw Error(`HTTP ${e.status}`);return await e.json()},i[0]=d,i[1]=t):t=i[1],i[2]!==e||i[3]!==u||i[4]!==t?(n={queryKey:u,queryFn:t,initialData:e,staleTime:1/0},i[2]=e,i[3]=u,i[4]=t,i[5]=n):n=i[5],(0,s.U)(n)}:function(e){let t=(0,l.e)(r.uT.header),n=c();return(0,s.U)({queryKey:n,queryFn:async()=>{let e=await (0,o.QJ)(t);if(!e.ok)throw Error(`HTTP ${e.status}`);return await e.json()},initialData:e,staleTime:1/0})}},35104:(e,t,n)=>{n.d(t,{W:()=>c,Y:()=>d});var i=n(21728),a=n(2635),s=n(33592),r=n(51213),l=n(72303),o=n(53419);function d(e){let t,n,d=(0,i.c)(6),c=(0,s.b)(),u=(0,a.Pk)();d[0]!==c||d[1]!==e||d[2]!==u?(t=async()=>{let t=e.name||e.tag;(0,o.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_DRAFT_ISSUE",mode:"immersive",threadId:(0,l.W)(u)?.id});let n={type:"text",name:`timeline-event: {"type": "planning-task-draft-issue", "markdownContent": "Drafting task '${t}' as an issue..."}`},i=e.repository?` in repository ${e.repository}`:"",a=`
Create a draft issue using the content of the ${e.tag} task${i}.
`;await c.sendChatMessage({thread:(0,l.W)(u),content:a,references:[n],topic:u.currentTopic,context:u.context,customInstructions:u.customInstructions,model:u.model,intent:r.wh.planningAgent})},d[0]=c,d[1]=e,d[2]=u,d[3]=t):t=d[3];let m=t;return d[4]!==m?(n={convertToDraftIssue:m},d[4]=m,d[5]=n):n=d[5],n}function c(e){let t,n,d=(0,i.c)(6),c=(0,s.b)(),u=(0,a.Pk)();d[0]!==c||d[1]!==u||d[2]!==e?(t=async()=>{(0,o.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_DRAFT_ALL_ISSUES",mode:"immersive",threadId:(0,l.W)(u)?.id});let t=`
Create draft issues for all tasks with the following tags: ${e.join(", ")}.
The tasks should be filed under a new parent issue. If the tasklist has a title, use that as the parent issue title.
`;await c.sendChatMessage({thread:(0,l.W)(u),content:t,references:[{type:"text",name:'timeline-event: {"type": "planning-task-draft-issue", "markdownContent": "Drafting all tasks as issues..."}'}],topic:u.currentTopic,context:u.context,customInstructions:u.customInstructions,model:u.model,intent:r.wh.planningAgent})},d[0]=c,d[1]=u,d[2]=e,d[3]=t):t=d[3];let m=t;return d[4]!==m?(n={convertAllToDraftIssues:m},d[4]=m,d[5]=n):n=d[5],n}},36296:(e,t,n)=>{n.d(t,{h:()=>o});var i=n(21728),a=n(8108),s=n(97665),r=n(93161),l=n(48057);function o(){let e,t=(0,i.c)(5),{mutateAsync:n}=(0,a.bB)(),{mutateAsync:o}=(0,a.e9)(),{mutateAsync:d}=(0,a._g)(),c=(0,s.jE)();return t[0]!==c||t[1]!==d||t[2]!==o||t[3]!==n?(e={createProgressHandler:(e,t)=>async i=>{switch(i.type){case"UPDATE_NODE_VALUE":await n({nodeID:i.nodeID,value:i.value,loopID:e,version:t});break;case"UPDATE_NODE_VALUE_PARTIAL":{let n=(0,l.wu)(e,t),a=c.getQueryData(n);if(a){let e={...a,nodes:{...a.nodes,[i.nodeID]:{...a.nodes[i.nodeID]??r.D,value:i.value}}};c.setQueryData(n,e)}break}case"UPDATE_NODE_ERROR":await o({nodeID:i.nodeID,error:i.error,loopID:e,version:t});break;case"SET_RUNNING":await d({nodeID:i.nodeID,loopID:e,version:t})}}},t[0]=c,t[1]=d,t[2]=o,t[3]=n,t[4]=e):e=t[4],e}},36903:(e,t,n)=>{n.d(t,{K3:()=>a,L2:()=>r,as:()=>s});var i=n(21728);function a(e){let t,n,a,s,r=(0,i.c)(12);if(r[0]!==e.language||r[1]!==e.value){let i,s,l=new Blob([e.value]).size;r[5]===Symbol.for("react.memo_cache_sentinel")?(i=new Set(["markdown","html"]),r[5]=i):i=r[5];let o=i;r[6]!==e.value?(s=e.value.split(`
`),r[6]=e.value,r[7]=s):s=r[7],t=s.length,n=o.has(e.language),a=function(e){if(0===e)return"0 bytes";if(1===e)return"1 byte";let t=Math.floor(Math.log(e)/Math.log(1024));return`${Math.round(e/Math.pow(1024,t))} ${["bytes","KB","MB","GB","TB"][t]}`}(l),r[0]=e.language,r[1]=e.value,r[2]=t,r[3]=n,r[4]=a}else t=r[2],n=r[3],a=r[4];return r[8]!==t||r[9]!==n||r[10]!==a?(s={linesOfCode:t,isPreviewable:n,size:a},r[8]=t,r[9]=n,r[10]=a,r[11]=s):s=r[11],s}function s(e){try{let t=new URL(e,window.location.origin);if(t.origin!==window.location.origin)return null;let n=t.pathname.split("/").filter(Boolean);if(n.length<4)return null;let i=n[0],a=n[1];if(!i||!a)return null;let s=n.slice(4).join("/");return{repoOwner:i,repoName:a,filePath:s}}catch{return null}}function r(e,t,n){return`${e} / ${t} / ${n.split("/").join(" / ")}`}},37212:(e,t,n)=>{n.d(t,{Bz:()=>r,NP:()=>l});var i=n(68273),a=n(99279),s=n(86320);n(13360);let r=a.G.createQueryRouteConfig("pullRequestsCommitsRoute",{path:"/:owner/:repo/pull/:pr_number/commits",queries:[(0,s.Y)()]});function l(){return r.queries.mainQuery.makeQueryKey()}(0,i.Z6)()},37510:(e,t,n)=>{n.d(t,{S:()=>a});var i=n(46996);function a(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;let n={title:e.title,description:e.description,nodes:e.nodes},a={title:t.title,description:t.description,nodes:t.nodes};return(0,i.A)(n,a)}},37673:(e,t,n)=>{n.d(t,{K:()=>c});var i=n(74848),a=n(21728),s=n(88752),r=n(96540),l=n(62828),o=n(7812),d=n(1747);function c(e){let t,n,c,u,m,p=(0,a.c)(20),{className:h,messageId:f,messageIndex:g,messageTimestamp:y,references:x,size:v}=e;p[0]!==f||p[1]!==g||p[2]!==y?(t={messageId:f,messageIndex:g,messageTimestamp:y},p[0]=f,p[1]=g,p[2]=y,p[3]=t):t=p[3];let b=(0,l.I)(t),{updateItem:_,versionedItems:j}=(0,d.xx)();return p[4]!==f||p[5]!==g||p[6]!==y||p[7]!==x||p[8]!==_?(n=()=>{for(let e of x){let t=(0,o.oR)({ref:e,messageIndex:void 0!==g?g:1,messageId:f,timestamp:y});null!=t&&_(t)}},c=[f,g,y,x,_],p[4]=f,p[5]=g,p[6]=y,p[7]=x,p[8]=_,p[9]=n,p[10]=c):(n=p[9],c=p[10]),(0,r.useEffect)(n,c),p[11]!==g||p[12]!==j?(u=e=>(0,o.wt)(e,g,j),p[11]=g,p[12]=j,p[13]=u):u=p[13],p[14]!==h||p[15]!==b||p[16]!==x||p[17]!==v||p[18]!==u?(m=(0,i.jsx)(s.t2,{references:x,onClickReference:b,size:v,className:h,getReferenceVersion:u}),p[14]=h,p[15]=b,p[16]=x,p[17]=v,p[18]=u,p[19]=m):m=p[19],m}try{c.displayName||(c.displayName="ChatMessageReferences")}catch{}},38447:(e,t,n)=>{n.d(t,{p:()=>y,E:()=>g});var i=n(74848),a=n(21728),s=n(25641),r=n(35247),l=n(38621),o=n(96540),d=n(37673),c=n(7812),u=n(1747),m=n(80947);let p="TimelineEvents-module__icon--E6IJb",h="TimelineEvents-module__situationalTimelineEvent--WTQlM TimelineEvents-module__timelineEvent--FV3V3";function f(e){return"text"===e.type&&null!=e.name&&e.name.startsWith("timeline-event:")}function g(e,t){return e.references?.some(e=>f(e)&&(void 0===t||t?.some(t=>e.name.startsWith(`timeline-event: {"type": "${t}"`))))??!1}function y(e){let t,n,s,r=(0,a.c)(10),{message:l,messageIndex:o,isViewingSharedThread:d,isSharedMessage:c,isLatestMessage:u}=e;return r[0]!==l||r[1]!==o?(t=g(l)&&(0,i.jsx)(x,{message:l,messageIndex:o}),r[0]=l,r[1]=o,r[2]=t):t=r[2],r[3]!==u||r[4]!==c||r[5]!==d?(n=(0,i.jsx)(b,{isViewingSharedThread:d,isSharedMessage:c,isLatestMessage:u}),r[3]=u,r[4]=c,r[5]=d,r[6]=n):n=r[6],r[7]!==t||r[8]!==n?(s=(0,i.jsxs)(i.Fragment,{children:[t,n]}),r[7]=t,r[8]=n,r[9]=s):s=r[9],s}function x(e){let t,n,r,h,f,g,y,x=(0,a.c)(24),{message:b,messageIndex:_}=e,{updateItem:j}=(0,u.xx)();if(x[0]!==b.createdAt||x[1]!==b.id||x[2]!==b.references||x[3]!==_||x[4]!==j?(t=()=>{if(b.references)for(let e of b.references){let t=(0,c.oR)({ref:e,messageIndex:_,messageId:b.id,timestamp:b.createdAt});null!=t&&j(t)}},n=[b.references,b.id,_,b.createdAt,j],x[0]=b.createdAt,x[1]=b.id,x[2]=b.references,x[3]=_,x[4]=j,x[5]=t,x[6]=n):(t=x[5],n=x[6]),(0,o.useEffect)(t,n),x[7]!==b.references){r=Symbol.for("react.early_return_sentinel");e:{let e=b.references?.filter(v);if(!e){r=void 0;break e}for(let t of(h=[],e)){let e=JSON.parse(t.name.replace("timeline-event: ","")),n=t.icon||l.CheckIcon;h.push({type:e.type,markdownContent:e.markdownContent,icon:n})}}x[7]=b.references,x[8]=r,x[9]=h}else r=x[8],h=x[9];return r!==Symbol.for("react.early_return_sentinel")?r:(x[10]!==b.createdAt||x[11]!==b.id||x[12]!==b.references||x[13]!==_?(f=b.references&&b.references.length>0&&(0,i.jsx)(d.K,{className:"TimelineEvents-module__references--lv7xz ChatMessage-module__references--Pi5OH",messageId:b.id,messageTimestamp:b.createdAt,messageIndex:_,references:b.references,size:"medium"}),x[10]=b.createdAt,x[11]=b.id,x[12]=b.references,x[13]=_,x[14]=f):f=x[14],x[15]!==b.content||x[16]!==b.createdAt||x[17]!==b.id||x[18]!==_||x[19]!==h?(g=h.map(e=>{let{type:t,markdownContent:n,icon:a}=e;return(0,i.jsxs)("div",{className:"TimelineEvents-module__timelineEvent--FV3V3",children:[(0,i.jsx)(a,{className:p}),(0,i.jsx)(m.G,{autoOpenPreviewPane:!1,markdown:n,messageId:b.id,messageIndex:_,messageTimestamp:b.createdAt,accessibleHeader:(0,s.hV)("Timeline",b.content??"")})]},t)}),x[15]=b.content,x[16]=b.createdAt,x[17]=b.id,x[18]=_,x[19]=h,x[20]=g):g=x[20],x[21]!==f||x[22]!==g?(y=(0,i.jsxs)(i.Fragment,{children:[f,g]}),x[21]=f,x[22]=g,x[23]=y):y=x[23],y)}function v(e){return f(e)}function b(e){let t,n,s,o=(0,a.c)(9),{isSharedMessage:d,isViewingSharedThread:c,isLatestMessage:u}=e;return o[0]!==d||o[1]!==c?(t=d&&!c&&(0,i.jsxs)("div",{className:h,children:[(0,i.jsx)(l.LinkIcon,{className:p})," Messages up to this point are included in shared link"]}),o[0]=d,o[1]=c,o[2]=t):t=o[2],o[3]!==u||o[4]!==c?(n=u&&r.W.copilotDuplicateThread&&c&&(0,i.jsxs)("div",{className:h,children:[(0,i.jsx)(l.RepoForkedIcon,{className:p})," Messages beyond this point will start a new private chat"]}),o[3]=u,o[4]=c,o[5]=n):n=o[5],o[6]!==t||o[7]!==n?(s=(0,i.jsxs)(i.Fragment,{children:[t,n]}),o[6]=t,o[7]=n,o[8]=s):s=o[8],s}try{y.displayName||(y.displayName="TimelineEvents")}catch{}try{x.displayName||(x.displayName="UserMessageTimelineEvent")}catch{}try{b.displayName||(b.displayName="SituationalTimelineEvents")}catch{}},38598:(e,t,n)=>{n.d(t,{i:()=>a,t:()=>i});let i=400,a="/favicons/favicon-copilot.svg"},39029:(e,t,n)=>{n.d(t,{G:()=>c,og:()=>d});var i=n(68273),a=n(21728),s=n(40235),r=n(70170),l=n(70263),o=n(96540);let d=(0,i.Z6)()?function(e,t,n,i){c(e,t,n,i)}:function(e,t,n,i){c(e,t,n,i)},c=(0,i.Z6)()?function(e,t,n,i){let o,d,c,u=(0,a.c)(9),m=(0,l.A)();u[0]!==t||u[1]!==m?(o=()=>{m()&&t()},u[0]=t,u[1]=m,u[2]=o):o=u[2];let p=i??2e3;u[3]!==o||u[4]!==p?(d=(0,r.n)(o,p),u[3]=o,u[4]=p,u[5]=d):d=u[5];let h=d;u[6]!==h||u[7]!==n?(c=e=>{if(n&&e.event_updates)for(let[t,i]of Object.entries(n))!!e.event_updates[t]==!!i&&window.setTimeout(h,e.wait||0);else window.setTimeout(h,e.wait||0)},u[6]=h,u[7]=n,u[8]=c):c=u[8];let f=c;(0,s.x)(e,f)}:function(e,t,n,i){let a=(0,l.A)(),d=(0,o.useMemo)(()=>(0,r.n)(()=>{a()&&t()},i??2e3),[a,t,i]),c=(0,o.useCallback)(e=>{if(n&&e.event_updates)for(let[t,i]of Object.entries(n))!!e.event_updates[t]==!!i&&window.setTimeout(d,e.wait||0);else window.setTimeout(d,e.wait||0)},[d,n]);(0,s.x)(e,c)}},39087:(e,t,n)=>{n.d(t,{J:()=>r,j:()=>s});var i=n(38621),a=n(49851);let s={range:{name:"Range",description:"A numeric value within a specified range",icon:a.FD},text:{name:"Text",description:"Free form text input",icon:a.md},boolean:{name:"Boolean",description:"True or false value",icon:a.j6},select:{name:"Select",description:"Choose from a list of predefined options",icon:a.wB},date:{name:"Date",description:"Date or macro",icon:i.CalendarIcon}};function r(e,t){return(s[e.metadata.inputType]??s.text)[t]}},39344:(e,t,n)=>{n.d(t,{K:()=>S});var i=n(74848),a=n(21728),s=n(38621),r=n(57478),l=n(84268),o=n(51933),d=n(34164),c=n(96540);let u="IssueTree-module__tree--GQG9_",m="IssueTree-module__item--th4vZ",p="IssueTree-module__tokenContainer--mGoNS",h=c.createContext({hasTrailingVisuals:void 0}),f=c.createContext({level:0});function g(e){let t,n,s,l,o,d,m=(0,a.c)(17),{subIssueCount:p,subIssueHeaderText:f,hasTrailingVisuals:g,children:v}=e,b=void 0===f?"Sub-issues":f,_=void 0!==g&&g;if(m[0]!==v){let e=c.Children.toArray(v);n=e.find(x);let i=(t=e.filter(y)).length-1;if(i>=0&&c.isValidElement(t[i])){let e;m[3]===Symbol.for("react.memo_cache_sentinel")?(e={isLastBranch:!0},m[3]=e):e=m[3],t[i]=c.cloneElement(t[i],e)}m[0]=v,m[1]=t,m[2]=n}else t=m[1],n=m[2];m[4]!==_?(s={hasTrailingVisuals:_},m[4]=_,m[5]=s):s=m[5];let j=s,w=_||void 0;return m[6]!==t||m[7]!==p||m[8]!==b?(l=t.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"IssueTree-module__subHeader--BDblp",children:[b,(0,i.jsx)(r.A,{children:p})]}),(0,i.jsx)("ul",{role:"tree",className:u,children:t})]}),m[6]=t,m[7]=p,m[8]=b,m[9]=l):l=m[9],m[10]!==n||m[11]!==w||m[12]!==l?(o=(0,i.jsxs)("div",{className:"IssueTree-module__container--kYTT7","data-has-trailing-visual":w,children:[n,l]}),m[10]=n,m[11]=w,m[12]=l,m[13]=o):o=m[13],m[14]!==j||m[15]!==o?(d=(0,i.jsx)(h.Provider,{value:j,children:o}),m[14]=j,m[15]=o,m[16]=d):d=m[16],d}function y(e){return c.isValidElement(e)&&e.type===b}function x(e){return c.isValidElement(e)&&e.type===v}function v(e){let t,n,s,r=(0,a.c)(4);r[0]===Symbol.for("react.memo_cache_sentinel")?(t={level:0},r[0]=t):t=r[0];let l=t;return r[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,d.$)(m,"IssueTree-module__rootItem--hxb6j"),r[1]=n):n=r[1],r[2]!==e?(s=(0,i.jsx)(f.Provider,{value:l,children:(0,i.jsx)("div",{className:n,children:(0,i.jsx)(w,{...e})})}),r[2]=e,r[3]=s):s=r[3],s}function b(e){let t,n,s,r,l,o,d,p,h=(0,a.c)(19);h[0]!==e?({children:t,isLastBranch:n,...s}=e,h[0]=e,h[1]=t,h[2]=n,h[3]=s):(t=h[1],n=h[2],s=h[3]);let g=c.Children.toArray(t),y=g.filter(j),x=g.filter(_),{level:v}=c.useContext(f),b=v+1;h[4]!==b?(r={level:b},h[4]=b,h[5]=r):r=h[5];let N=r,C=n&&0===y.length,S=y.length-1;if(n&&S>=0&&c.isValidElement(y[S])){let e;h[6]===Symbol.for("react.memo_cache_sentinel")?(e={isLastBranch:!0},h[6]=e):e=h[6],y[S]=c.cloneElement(y[S],e)}let I=C||void 0;return h[7]!==x||h[8]!==s?(l=(0,i.jsx)(w,{...s,children:x}),h[7]=x,h[8]=s,h[9]=l):l=h[9],h[10]!==y?(o=y.length>0&&(0,i.jsx)("ul",{role:"group",className:u,children:y}),h[10]=y,h[11]=o):o=h[11],h[12]!==I||h[13]!==l||h[14]!==o?(d=(0,i.jsxs)("li",{role:"treeitem","aria-selected":"false",className:m,"data-is-last-rendered":I,children:[l,o]}),h[12]=I,h[13]=l,h[14]=o,h[15]=d):d=h[15],h[16]!==N||h[17]!==d?(p=(0,i.jsx)(f.Provider,{value:N,children:d}),h[16]=N,h[17]=d,h[18]=p):p=h[18],p}function _(e){return!(c.isValidElement(e)&&e.type===b)}function j(e){return c.isValidElement(e)&&e.type===b}function w(e){let t,n,s,r,o,d,u,m,p=(0,a.c)(29),{leadingVisual:g,title:y,description:x,trailingBadge:v,trailingVisual:b,href:_,onClick:j,blockedBy:w}=e,{level:C}=c.useContext(f),{hasTrailingVisuals:S}=c.useContext(h),I=null!=w&&w.length>0;p[0]!==C?(t={"--level":C},p[0]=C,p[1]=t):t=p[1];let k=!!j||void 0;p[2]!==C?(n=C>0&&(0,i.jsx)("div",{className:"IssueTree-module__spacer--Z4HHo"}),p[2]=C,p[3]=n):n=p[3],p[4]!==g?(s=(0,i.jsx)("div",{className:"IssueTree-module__leadingVisual--e_q3O",children:g}),p[4]=g,p[5]=s):s=p[5];let T=_?"a":j?"button":"span";return p[6]!==_||p[7]!==j||p[8]!==T||p[9]!==y?(r=(0,i.jsx)(l.A,{as:T,className:"IssueTree-module__title--v0mbM",href:_,onClick:j,children:y}),p[6]=_,p[7]=j,p[8]=T,p[9]=y,p[10]=r):r=p[10],p[11]!==r||p[12]!==v?(o=(0,i.jsxs)("div",{className:"IssueTree-module__content--Ko11D",children:[r,v]}),p[11]=r,p[12]=v,p[13]=o):o=p[13],p[14]!==w||p[15]!==x||p[16]!==I?(d=(null!=x||I)&&(0,i.jsxs)("div",{className:"IssueTree-module__description--b8yCi",children:[I&&(0,i.jsx)(N,{dependencyType:"Blocked by",blockedBy:w}),x]}),p[14]=w,p[15]=x,p[16]=I,p[17]=d):d=p[17],p[18]!==S||p[19]!==b?(u=S&&(0,i.jsx)("div",{className:"IssueTree-module__trailingVisual--SewMY",children:b}),p[18]=S,p[19]=b,p[20]=u):u=p[20],p[21]!==t||p[22]!==k||p[23]!==n||p[24]!==s||p[25]!==o||p[26]!==d||p[27]!==u?(m=(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"IssueTree-module__grid--hqjkj",style:t,"data-has-onclick":k,children:[n,s,o,d,u]})}),p[21]=t,p[22]=k,p[23]=n,p[24]=s,p[25]=o,p[26]=d,p[27]=u,p[28]=m):m=p[28],m}function N(e){let t,n,s=(0,a.c)(10),{dependencyType:r,blockedBy:d}=e;if(!d.length)return null;let c=d[0]?.href?"a":d[0]?.onClick?"button":"span",u=d[0]?.href,m=d[0]?.onClick,h=d[0]?.title,f=d[0]?.title;s[0]!==c||s[1]!==u||s[2]!==m||s[3]!==h||s[4]!==f?(t=(0,i.jsx)(l.A,{"data-testid":"blocked-by-link",className:"IssueTree-module__blockedBy--z0s4g",muted:!0,as:c,href:u,onClick:m,title:h,children:f}),s[0]=c,s[1]=u,s[2]=m,s[3]=h,s[4]=f,s[5]=t):t=s[5];let g=t;return s[6]!==d.length||s[7]!==g||s[8]!==r?(n=(0,i.jsx)(o.A,{size:"medium",className:"mr-2",leadingVisual:C,text:d.length>1?(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("span",{className:p,children:[r," ",d.length]})}):(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("span",{className:p,children:[r,": ",g]})})}),s[6]=d.length,s[7]=g,s[8]=r,s[9]=n):n=s[9],n}function C(){return(0,i.jsx)(s.BlockedIcon,{"data-testid":"blocked-by-icon",className:"fgColor-danger",size:14})}let S=Object.assign(g,{RootItem:v,Item:b});try{g.displayName||(g.displayName="Tree")}catch{}try{v.displayName||(v.displayName="TreeRootItem")}catch{}try{b.displayName||(b.displayName="TreeItem")}catch{}try{w.displayName||(w.displayName="TreeItemContent")}catch{}try{N.displayName||(N.displayName="IssueDependencies")}catch{}try{S.displayName||(S.displayName="IssueTree")}catch{}},42312:(e,t,n)=>{n.d(t,{KL:()=>o,U:()=>m});var i=n(74848),a=n(21728),s=n(71315),r=n(96540);let l=(0,r.createContext)({registerNavigableRef:()=>{},unregisterNavigableRef:()=>{}});function o(e){let t,n,o,m,p,h,f,g=(0,a.c)(9),{children:y}=e;g[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],g[0]=t):t=g[0];let[x,v]=r.useState(t);g[1]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{v(t=>t.some(t=>t===e)?t:[...t,e])},g[1]=n):n=g[1];let b=n;g[2]===Symbol.for("react.memo_cache_sentinel")?(o=e=>{v(t=>t.filter(t=>t!==e))},g[2]=o):o=g[2];let _=o;g[3]!==x?(m=()=>{let e=e=>{if(e.altKey&&"F6"===e.key){e.preventDefault();let t=x.filter(u).sort(c);if(0===t.length)return;let n=t.findIndex(d),i=(!e.shiftKey?t[n+1]??t[0]:t[n-1]??t[t.length-1])?.current;if(i){if(!["A","BUTTON","INPUT","SELECT","TEXTAREA"].includes(i.tagName)&&!i.hasAttribute("tabindex")){i.setAttribute("tabindex","-1");let e=()=>{i.removeAttribute("tabindex"),i.removeEventListener("blur",e)};i.addEventListener("blur",e,{once:!0})}i.focus()}}};return s.XC?.addEventListener("keydown",e),()=>{s.XC?.removeEventListener("keydown",e)}},p=[x],g[3]=x,g[4]=m,g[5]=p):(m=g[4],p=g[5]),(0,r.useEffect)(m,p),g[6]===Symbol.for("react.memo_cache_sentinel")?(h={registerNavigableRef:b,unregisterNavigableRef:_},g[6]=h):h=g[6];let j=h;return g[7]!==y?(f=(0,i.jsx)(l.Provider,{value:j,children:y}),g[7]=y,g[8]=f):f=g[8],f}function d(e){return e.current?.contains(s.XC?.activeElement||null)}function c(e,t){let n=e.current,i=t.current;return n===i?0:n.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_PRECEDING?1:-1}function u(e){return null!==e.current}function m(){let e,t,n=(0,a.c)(4),i=(0,r.useRef)(null),{registerNavigableRef:s,unregisterNavigableRef:o}=(0,r.useContext)(l);return n[0]!==s||n[1]!==o?(e=()=>(s(i),()=>{o(i)}),t=[s,o],n[0]=s,n[1]=o,n[2]=e,n[3]=t):(e=n[2],t=n[3]),(0,r.useEffect)(e,t),i}try{l.displayName||(l.displayName="NavigableRefContext")}catch{}try{o.displayName||(o.displayName="NavigableRefProvider")}catch{}},42518:(e,t,n)=>{n.d(t,{C:()=>a});var i=n(91348);function a(e,t){let n=(0,i.FT)(e).map(e=>({nodeID:e.id,type:e.type,title:e.title,value:t.nodes[e.id]?.value}));return{type:"loop-execution",loopID:e.id,loopTitle:e.title,createdAt:t.createdAt,version:t.loopVersion,executionID:t.id,output:n}}},43134:(e,t,n)=>{n.d(t,{_T:()=>d,aq:()=>o,qU:()=>l});var i=n(82075),a=n(21046);let s=(0,i.A)("localStorage"),r="copilot-loops-thread-";function l(e){try{let t=`${r}${e}`;return s.getItem(t)}catch(e){return(0,a.FF)("Failed to read loop thread ID from localStorage:",e),null}}function o(e,t){if(null!==t)try{let n=`${r}${e}`;s.setItem(n,t)}catch(e){(0,a.FF)("Failed to store loop thread ID in localStorage:",e)}}function d(e){try{let t=`${r}${e}`;s.removeItem(t)}catch(e){(0,a.FF)("Failed to remove loop thread ID from localStorage:",e)}}},44095:(e,t,n)=>{n.d(t,{_:()=>v,m:()=>b});var i=n(74848),a=n(21728),s=n(26100),r=n(2635),l=n(4817),o=n(53419),d=n(38621),c=n(69726),u=n(5524),m=n(96540),p=n(7812),h=n(1747),f=n(48881),g=n(13974),y=n(7026),x=n(20382);function v(e){let t,n,s,u,p,v,_,j,w,N,C=(0,a.c)(36),{yaml:S,isStreaming:I}=e,k=(0,g.p)(I),{selectedThreadID:T}=(0,r.Pk)(),{updateItem:E,openItem:R,openPreviewPane:L}=(0,h.xx)(),{messageId:A,messageIndex:D,messageTimestamp:P,setHasAutoOpenedPreviewPane:O}=(0,f.H)();C[0]!==T?(t=e=>((e,t)=>{try{var n=(0,x.Hh)(e);if("object"!=typeof n||null==n)return null;return"object"==typeof n&&null!==n&&"tag"in n&&"string"==typeof n.tag&&"name"in n&&"string"==typeof n.name&&"content"in n&&"string"==typeof n.content&&(!("repository"in n)||null==n.repository||"string"==typeof n.repository)&&1?n:null}catch{return(0,o.BI)("copilot.planning_spec",{type:"MALFORMED_YAML",mode:"immersive",threadId:t}),null}})(e,T),C[0]=T,C[1]=t):t=C[1];let F=t,B=(0,y.M)(S,F,null);e:{let e,t;if(!B){n=null;break e}let i=`planning-spec:${B.tag}#${D}`;C[2]!==P?(e=new Date(P),C[2]=P,C[3]=e):e=C[3],C[4]!==i||C[5]!==I||C[6]!==A||C[7]!==B.content||C[8]!==B.name||C[9]!==B.repository||C[10]!==B.tag||C[11]!==e?(t={name:B.name,tag:B.tag,repository:B.repository,content:B.content,messageId:A,id:i,type:"planning-spec",isUserEdited:!1,isStreaming:I,timestamp:e},C[4]=i,C[5]=I,C[6]=A,C[7]=B.content,C[8]=B.name,C[9]=B.repository,C[10]=B.tag,C[11]=e,C[12]=t):t=C[12],n=t}let M=n;C[13]!==R||C[14]!==L||C[15]!==O?(s=(e,t)=>{let{selectItem:n}=void 0===t?{}:t;R(e.id,n),L(),O(!0)},C[13]=R,C[14]=L,C[15]=O,C[16]=s):s=C[16];let V=s;C[17]!==I||C[18]!==k||C[19]!==V||C[20]!==M||C[21]!==E?(u=()=>{M&&(E(M),(I||k)&&V(M,{selectItem:!0}))},p=[I,k,V,M,E],C[17]=I,C[18]=k,C[19]=V,C[20]=M,C[21]=E,C[22]=u,C[23]=p):(u=C[22],p=C[23]),(0,m.useEffect)(u,p),C[24]!==V||C[25]!==M?(v=()=>{M&&V(M)},C[24]=V,C[25]=M,C[26]=v):v=C[26];let $=v;C[27]!==T?(_=()=>(0,o.BI)("copilot.planning_spec",{type:"BLOCK_RENDERED",mode:"immersive",threadId:T}),j=[T],C[27]=T,C[28]=_,C[29]=j):(_=C[28],j=C[29]),(0,m.useEffect)(_,j),C[30]!==I?(w=()=>I?(0,i.jsx)(c.A,{size:"small",className:l.sX}):(0,i.jsx)(d.NoteIcon,{}),C[30]=I,C[31]=w):w=C[31];let U=w;return C[32]!==U||C[33]!==$||C[34]!==M?(N=(0,i.jsx)(b,{previewItem:M,onClick:$,getIcon:U}),C[32]=U,C[33]=$,C[34]=M,C[35]=N):N=C[35],N}function b(e){let t,n,r,l,o,c,m=(0,a.c)(16),{previewItem:f,onClick:g,getIcon:y}=e,{versionedItems:x}=(0,h.xx)();m[0]!==f||m[1]!==x?(t=f?(0,p.LU)(f.id,x):null,m[0]=f,m[1]=x,m[2]=t):t=m[2];let v=t;m[3]!==y?(n=y?.()||(0,i.jsx)(d.NoteIcon,{}),m[3]=y,m[4]=n):n=m[4],m[5]!==n?(r=(0,i.jsx)(u.l.LeadingVisual,{children:n}),m[5]=n,m[6]=r):r=m[6];let b=f?.name??"";return m[7]!==b?(l=(0,i.jsx)("div",{className:"PlanningSpecBlock-module__title--d0IjJ",children:b}),m[7]=b,m[8]=l):l=m[8],m[9]!==v?(o=null!==v&&(0,i.jsx)(u.l.TrailingVisual,{children:(0,i.jsx)(s.g,{version:v})}),m[9]=v,m[10]=o):o=m[10],m[11]!==g||m[12]!==r||m[13]!==l||m[14]!==o?(c=(0,i.jsx)("div",{className:"PlanningSpecBlock-module__container--UW6_s",children:(0,i.jsx)(u.l,{variant:"full",showDividers:!0,children:(0,i.jsxs)(u.l.Item,{onSelect:g,className:"PlanningSpecBlock-module__item--lxgT1",children:[r,l,o]})})}),m[11]=g,m[12]=r,m[13]=l,m[14]=o,m[15]=c):c=m[15],c}try{v.displayName||(v.displayName="PlanningSpecBlock")}catch{}try{b.displayName||(b.displayName="PlanningSpecBlockDisplay")}catch{}},45363:(e,t,n)=>{n.d(t,{C:()=>y});var i=n(35750),a=n(18150),s=n(61872),r=n(50467),l=n(38621);function o(e){return e.content}var d=n(90122),c=n(31629),u=n(39087),m=n(59370),p=n(53419),h=n(13647),f=n(49851);let PromptNodeHandler=class PromptNodeHandler{logTokenUsage(e,t,n){(0,p.BI)("loops.prompt_node.token_usage",{model:n,token_type:e,token_value:t})}async execute(e,t){let n,i=await (0,d.Vq)(e),a="",s=e.metadata?.model;for await(let e of t.chatClient.getChatCompletion(i,s,t.signal))a+=e.content,e.usage&&(n=e.usage),t.onPartialResult?.(a);return n&&(this.logTokenUsage("TOTAL_TOKEN",n.total_tokens,n.model),this.logTokenUsage("PROMPT_TOKEN",n.prompt_tokens,n.model),this.logTokenUsage("COMPLETION_TOKEN",n.completion_tokens,n.model)),{value:a}}validate(e,t){let n=[];return e.metadata?.model&&t?.availableModels&&t.availableModels.length>0&&(t.availableModels.some(t=>t.id===e.metadata?.model)||n.push({error:`Prompt node uses unavailable model: ${e.metadata.model}`,errorType:s.T.UnavailableModel,involvedNodes:[e.id]})),n}constructor(){(0,r._)(this,"type","prompt"),(0,r._)(this,"metadata",{contentFields:["content"],icon:()=>l.CopilotIcon,description:()=>"Use AI to process a node",label:()=>"Prompt",color:"purple",type:"prompt",outputLabel:"Markdown",isExecutable:!0,enabled:()=>!0})}};let GitHubGraphQLNodeHandler=class GitHubGraphQLNodeHandler{async execute(e,t){let n={nodeId:e.id,loopId:t.execution.loopID,version:t.execution.loopVersion,executionId:t.execution.id},i=await t.graphQLClient.getGraphQLResponse(e.content,n,{signal:t.signal});return i?{value:i.data??null}:{value:null}}validate(e,t){return[]}constructor(){(0,r._)(this,"type","github-graphql"),(0,r._)(this,"metadata",{type:"github-graphql",contentFields:["content"],icon:()=>l.MarkGithubIcon,description:()=>"Retrieve data from GitHub",label:()=>"GitHub GraphQL",color:"gray",enabled:h.Ve,outputLabel:"JSON",isExecutable:!0})}};let CodeNodeHandler=class CodeNodeHandler{async execute(e,t){let n=await t.codeExecutor.execute(e.content,e.id,t.signal);if(n.success)return{value:n.result??""};throw Error(n.error??"Code execution failed")}validate(e,t){return[]}constructor(){(0,r._)(this,"type","code"),(0,r._)(this,"metadata",{type:"code",color:"pink",contentFields:["content"],icon:()=>l.CodeIcon,description:()=>"Use classic code to process a node",label:()=>"Code",enabled:h.Ch,outputLabel:"Code output",isExecutable:!0,requiresCodeEvaluation:!0})}};let VisualizeNodeHandler=class VisualizeNodeHandler{async execute(e,t){return{value:o(e)}}validate(e,t){return[]}constructor(){(0,r._)(this,"type","visualize"),(0,r._)(this,"metadata",{type:"visualize",contentFields:["content"],icon:()=>l.GitBranchIcon,description:()=>"Use HTML and CSS to view output",label:()=>"Visualize",color:"olive",enabled:h.a1})}};let TextNodeHandler=class TextNodeHandler{async execute(e,t){let n=t.execution.inputValues?.[e.id],i=void 0!==n?n:o(e);if("date"===e.metadata.inputType&&"string"==typeof i&&(0,m.nS)(i)){let e=(0,m.Qf)(i);if(e)return{value:(0,m.O2)(e)}}return{value:i}}validate(e,t){let n=[],i=e.metadata;if("object"!=typeof i||!i)return n.push({error:"metadata is required for text nodes",errorType:s.T.MissingProperty,involvedNodes:[e.id]}),n;switch(i.inputType){case"boolean":["true","false"].includes(e.content)||n.push({error:'A boolean input must have a value of either "true" or "false"',errorType:s.T.InvalidBooleanValue,involvedNodes:[e.id]});break;case"range":"number"!=typeof i.min&&n.push({error:"A range input must have a min",errorType:s.T.InvalidRangeValue,involvedNodes:[e.id]}),"number"!=typeof i.max&&n.push({error:"A range input must have a max",errorType:s.T.InvalidRangeValue,involvedNodes:[e.id]});break;case"select":Array.isArray(i.options)&&0!==i.options.length?i.options.includes(e.content)||n.push({error:"A select node must have content equal to one of its options",errorType:s.T.InvalidSelectValue,involvedNodes:[e.id]}):n.push({error:"A select input must have options",errorType:s.T.InvalidSelectValue,involvedNodes:[e.id]});break;case"date":e.content?(0,m.Yj)(e.content)||n.push({error:"Date input must be a valid date (YYYY-MM-DD) or date macro (e.g., @today, @today+1d, @today-2w)",errorType:s.T.InvalidDateValue,involvedNodes:[e.id]}):n.push({error:"Date input needs a value",errorType:s.T.EmptyInputValue,involvedNodes:[e.id]});break;case"text":e.content||n.push({error:"Input needs a value",errorType:s.T.EmptyInputValue,involvedNodes:[e.id]})}return n}constructor(){(0,r._)(this,"type","text"),(0,r._)(this,"metadata",{type:"text",contentFields:["content"],icon:e=>{if(e&&(0,c.ir)(e)){if("boolean"===e.metadata.inputType)if("true"===e.content)return f.j6;else return f.hO;return(0,u.J)(e,"icon")}return l.TypographyIcon},description:e=>e&&(0,c.ir)(e)?(0,u.J)(e,"description"):"Input for nodes",label:e=>e&&(0,c.ir)(e)?(0,u.J)(e,"name"):"Input",color:"blue",enabled:()=>!0})}};let LoopNodeHandler=class LoopNodeHandler{async execute(e,t){return{value:o(e)}}validate(e,t){return[]}constructor(){(0,r._)(this,"type","loop"),(0,r._)(this,"metadata",{type:"loop",contentFields:["content"],icon:()=>l.GitPullRequestIcon,description:()=>"Use an existing pipeline as a node",label:()=>"Pipeline",color:"coral",enabled:h.V2,outputLabel:"Pipeline output",isExecutable:!0})}};var g=new WeakMap;let NodeHandlerRegistry=class NodeHandlerRegistry{registerHandler(e){(0,i._)(this,g).set(e.type,e)}async executeNode(e,t){let n=(0,i._)(this,g).get(e.type);if(!n)throw Error(`No handler registered for node type: ${e.type}`);return n.execute(e,t)}validateNode(e,t){let n=(0,i._)(this,g).get(e.type);return n?n.validate(e,t):[{error:`Unknown node type: ${e.type}`,errorType:s.T.MissingProperty,involvedNodes:[e.id]}]}getMetadata(e){let t=(0,i._)(this,g).get(e);return t?.metadata}getAllMetadata(){return Array.from((0,i._)(this,g).values()).map(e=>e.metadata)}getAllNodeTypes(){return Array.from((0,i._)(this,g).keys())}isExecutable(e){let t=this.getMetadata(e);return t?.isExecutable??!1}requiresCodeEvaluation(e){let t=this.getMetadata(e);return t?.requiresCodeEvaluation??!1}constructor(){(0,a._)(this,g,{writable:!0,value:new Map}),this.registerHandler(new PromptNodeHandler),this.registerHandler(new GitHubGraphQLNodeHandler),this.registerHandler(new CodeNodeHandler),this.registerHandler(new VisualizeNodeHandler),this.registerHandler(new TextNodeHandler),this.registerHandler(new LoopNodeHandler)}};let y=new NodeHandlerRegistry},46461:(e,t,n)=>{n.d(t,{G9:()=>r,Pq:()=>s,Pt:()=>function e(t,n,i=new Set){if(!i.has(t)){for(let a of(i.add(t),n(t),t.children))e(a,n,i);for(let a of t.blockedBy)e(a,n,i);for(let a of t.isBlocking)e(a,n,i)}},YR:()=>function e(t,n){for(let i of(n(t),t.children))e(i,n)},u0:()=>l});var i=n(21728),a=n(1747);async function s(e,t,n=new Set){if(!n.has(e)){for(let i of(n.add(e),await t(e),e.children))await s(i,t,n);for(let i of e.blockedBy)await s(i,t,n);for(let i of e.isBlocking)await s(i,t,n)}}function r(e,t,n,i,a){let s=e.reduce((e,n)=>(e.set(t(n),{item:n,parent:null,children:[],blockedBy:[],isBlocking:[]}),e),new Map);for(let r of e){let e=s.get(t(r)),l=n(r);if(null!=l){let t=s.get(l);t&&e&&(e.parent=t,t.children.push(e))}for(let t of i?.(r)??[]){let n=s.get(t);n&&e&&!n.blockedBy.includes(e)&&(e.blockedBy.includes(n)||e.blockedBy.push(n),n.isBlocking.includes(e)||n.isBlocking.push(e))}for(let t of a?.(r)??[]){let n=s.get(t);n&&e&&!n.isBlocking.includes(e)&&(e.isBlocking.includes(n)||e.isBlocking.push(n),n.blockedBy.includes(e)||n.blockedBy.push(e))}}return s}function l(){let e,t,n=(0,i.c)(6),{items:s,allOpenItems:l,versionedItems:h}=(0,a.xx)();n[0]!==l?(e=new Set(l),n[0]=l,n[1]=e):e=n[1];let f=e;return n[2]!==s||n[3]!==f||n[4]!==h?(t=r([...h.entries()].filter(p).map(e=>{let[,t]=e,n=t.find(e=>f.has(e));if(n)return s.get(n);let i=t.at(-1);return i?s.get(i):void 0}).filter(m),u,c,d,o),n[2]=s,n[3]=f,n[4]=h,n[5]=t):t=n[5],t}function o(e){return e.isBlockingTags}function d(e){return e.blockedByTags}function c(e){return e.parentTag}function u(e){return e.tag}function m(e){return!!e}function p(e){let[t]=e;return t.startsWith("new-issue:")||t.startsWith("existing-issue:")}},46857:(e,t,n)=>{n.d(t,{I:()=>r,O:()=>s});var i=n(91348),a=n(60209);function s(e){for(let n of e.references??[]){var t;if(n.type===a.km&&(t=n)&&"object"==typeof t&&"title"in t&&"nodes"in t){let t={description:n.description,id:n.id,title:n.title,owned:!0,nodes:n.nodes,updatedAt:new Date(e.createdAt).getTime(),visibility:"private"},a=(0,i.kX)(t,[]);return{messageId:e.id,pipeline:a}}}}function r(e,t=!1){for(let n of[...e].reverse()){if("assistant"!==n.role&&!t)continue;let e=s(n);if(e)return e}}},48057:(e,t,n)=>{n.d(t,{Qk:()=>y,rR:()=>v,vx:()=>f,wu:()=>h});var i=n(21728),a=n(97286),s=n(99519),r=n(5533),l=n(33026),o=n(50050),d=n(99993);let c=[400,401,403,404];function u(){let{data:e}=(0,d._N)(p,"latest"),t=(0,o.Ud)(m);return t===l.qD||t===l.kj?e:t}function m(e){return e.version}function p(e){return e?.version}function h(e,t){return["execution",e,t]}function f(){let e,t=(0,i.c)(3),{data:n}=(0,d._N)(g),a=u(),s=n??"",r=a??"";return t[0]!==s||t[1]!==r?(e=h(s,r),t[0]=s,t[1]=r,t[2]=e):e=t[2],e}function g(e){return e?.id}function y(e){let{data:t}=(0,d._N)(x);return v(t??"",u()??"",e)}function x(e){return e?.id}function v(e,t,n){let o,d,c,u,m=(0,i.c)(14),p=(0,s.EY)();m[0]!==e||m[1]!==t?(o=h(e,t),m[0]=e,m[1]=t,m[2]=o):o=m[2],m[3]!==e||m[4]!==p||m[5]!==t?(d=async()=>{if(!e||!t)return null;let n=await p.getExecution(e,t,l.qD);if(!n.success){let e=Error("Error fetching execution.");throw e.cause=n.httpStatus,e}let i=n.data;return p.isExecutionRunning(i.id)!==(0,r.y)(i)?null:i},m[3]=e,m[4]=p,m[5]=t,m[6]=d):d=m[6];let f=!!e&&!!t;return m[7]!==n?(c=n&&{select:n},m[7]=n,m[8]=c):c=m[8],m[9]!==o||m[10]!==d||m[11]!==f||m[12]!==c?(u={queryKey:o,queryFn:d,enabled:f,...c,staleTime:3e5,retry:b},m[9]=o,m[10]=d,m[11]=f,m[12]=c,m[13]=u):u=m[13],(0,a.I)(u)}function b(e,t){return!("number"==typeof t.cause&&c.includes(t.cause))&&e<3}},48881:(e,t,n)=>{n.d(t,{A:()=>a,H:()=>s});var i=n(96540);let a=(0,i.createContext)(null),s=()=>{let e=(0,i.useContext)(a);if(!e)throw Error("Missing required ContentPreviewBlockContext provider.");return e};try{a.displayName||(a.displayName="ContentPreviewBlockContext")}catch{}},49912:(e,t,n)=>{n.d(t,{j:()=>s});var i=n(54908),a=n(60209);function s(e){return e.id===a.S$&&"service"in e&&e.service instanceof i.J}},50050:(e,t,n)=>{n.d(t,{Mr:()=>g,NY:()=>x,Ud:()=>y});var i=n(74848),a=n(49835),s=n(96540),r=n(33535),l=n(88431),o=n(96868),d=n(21728),c=n(96459),u=n(53380);function m(e,t){switch(t.type){case"FOCUS_NODE":return{...e,focusedNodeId:t.nodeId};case"HOVER_NODE":return{...e,hoveredNodeId:t.nodeId};case"SET_VIEW":return{...e,view:t.view};case"SET_SIDE_PANEL_VIEW":return{...e,sidePanelView:t.view};case"SET_VERSION":return{...e,version:t.version};case"SET_STATE":return{...e,...t.state};case"SHOW_LINK_COPIED_BANNER":return{...e,showLinkCopiedBanner:!0};case"HIDE_LINK_COPIED_BANNER":return{...e,showLinkCopiedBanner:!1};case"SHOW_DUPLICATED_BANNER":return{...e,showDuplicatedBanner:!0};case"HIDE_DUPLICATED_BANNER":return{...e,showDuplicatedBanner:!1};default:return e}}var p=n(53627);let h=(0,s.createContext)(new a.Lj(o.qB)),f=(0,s.createContext)(()=>{});function g({children:e}){let[t,n]=function(){let e,t,n,i,a=(0,d.c)(9),[r]=(0,c.o)();a[0]!==r?(e=(0,u.hW)(r),a[0]=r,a[1]=e):e=a[1];let[l,o]=(0,s.useReducer)(m,e);return a[2]!==l?(t=()=>{let e=(0,u.Ts)(l);(0,p.MM)(e)},a[2]=l,a[3]=t):t=a[3],a[4]!==r||a[5]!==l?(n=[l,r],a[4]=r,a[5]=l,a[6]=n):n=a[6],(0,s.useEffect)(t,n),a[7]!==l?(i=[l,o],a[7]=l,a[8]=i):i=a[8],i}(),a=(0,r.AI)(t);(0,l.N)(()=>{a.value=t},[t,a]);let o=(0,s.useCallback)(e=>{n(e)},[n]);return(0,i.jsx)(h.Provider,{value:a,children:(0,i.jsx)(f.Provider,{value:o,children:e})})}function y(e){let t=(0,s.useContext)(h);if(!t)throw Error("useLoopsStateLens can only be used inside a PipesProvider");let n=(0,r.Sk)(t,e);return(0,r.HN)(n)}function x(){return(0,s.useContext)(f)}try{h.displayName||(h.displayName="LoopsStateContext")}catch{}try{f.displayName||(f.displayName="LoopsDispatchContext")}catch{}try{g.displayName||(g.displayName="LoopsStateProvider")}catch{}},51625:(e,t,n)=>{n.d(t,{_x:()=>a,cP:()=>s,eu:()=>i,pI:()=>r});let i="spark",a="Spark",s="/spark",r="Create web apps with React and TypeScript to prototype ideas, build tools, and more"},53380:(e,t,n)=>{n.d(t,{Ts:()=>s,_A:()=>a,hW:()=>r});var i=n(96868);function a(e){let t={},n=e.get("focusedNode");n&&(t.focusedNodeId=n);let a=e.get("view");a&&Object.values(i.Kh).includes(a)&&(t.view=a);let s=e.get("sidePanel");s&&Object.values(i.Fj).includes(s)&&(t.sidePanelView=s);let r=e.get("version");return r&&(t.version=r),t}function s(e){let t=new URLSearchParams;return e.focusedNodeId&&t.set("focusedNode",e.focusedNodeId),e.view!==i.qB.view&&t.set("view",e.view),e.sidePanelView!==i.qB.sidePanelView&&t.set("sidePanel",e.sidePanelView),e.version!==i.qB.version&&t.set("version",e.version),t}function r(e){return{...i.qB,...a(e)}}},54908:(e,t,n)=>{n.d(t,{J:()=>LoopsService});var i=n(35750),a=n(18150),s=n(85242),r=n(88243),l=n(16213),o=n(91348),d=n(45363),c=n(21046),u=n(90122),m=new WeakMap,p=new WeakMap,h=new WeakMap,f=new WeakMap;let NodeRunner=class NodeRunner{async run(e,t,n){let a={graphQLClient:(0,i._)(this,p),chatClient:(0,i._)(this,h),codeExecutor:(0,i._)(this,f),signal:t,onPartialResult:n,execution:e};return d.C.executeNode((0,i._)(this,m),a)}constructor(e,t,n,i){(0,a._)(this,m,{writable:!0,value:void 0}),(0,a._)(this,p,{writable:!0,value:void 0}),(0,a._)(this,h,{writable:!0,value:void 0}),(0,a._)(this,f,{writable:!0,value:void 0}),(0,s._)(this,m,e),(0,s._)(this,p,t),(0,s._)(this,h,n),(0,s._)(this,f,i)}};var g=n(33026),y=new WeakMap,x=new WeakMap,v=new WeakMap,b=new WeakMap,_=new WeakMap,j=new WeakMap,w=new WeakMap,N=new WeakMap,C=new WeakSet,S=new WeakSet,I=new WeakSet;let LoopRunner=class LoopRunner{async run(e,t){let n=(0,o.FT)((0,i._)(this,b));if(0===n.length)throw Error("No output node");await Promise.all(n.map(n=>(0,r._)(this,S,T).call(this,n,e,t)))}stop(e){(0,i._)(this,N).abort(),e((0,i._)(this,_))}constructor(e,t,n,i,r){(0,l._)(this,C),(0,l._)(this,S),(0,l._)(this,I),(0,a._)(this,y,{writable:!0,value:void 0}),(0,a._)(this,x,{writable:!0,value:void 0}),(0,a._)(this,v,{writable:!0,value:void 0}),(0,a._)(this,b,{writable:!0,value:void 0}),(0,a._)(this,_,{writable:!0,value:void 0}),(0,a._)(this,j,{writable:!0,value:void 0}),(0,a._)(this,w,{writable:!0,value:void 0}),(0,a._)(this,N,{writable:!0,value:void 0}),(0,s._)(this,y,n),(0,s._)(this,x,i),(0,s._)(this,v,r),(0,s._)(this,b,e),(0,s._)(this,_,t),(0,s._)(this,j,(0,o.f0)(e.nodes)),(0,s._)(this,w,new Map),(0,s._)(this,N,new AbortController)}};function k(){return(0,i._)(this,N).signal.aborted}async function T(e,t,n){let a=(0,i._)(this,w).get(e.id);if(a)return a;let s=(0,r._)(this,I,E).call(this,e,t,n);return(0,i._)(this,w).set(e.id,s),s}async function E(e,t,n){if((0,r._)(this,C,k).call(this))return null;let a=await n((0,i._)(this,b).id,(0,i._)(this,b).version||g.kj,(0,i._)(this,_));if(!a.success)throw Error("Unable to load execution");let s=a.data,l=s.nodes[e.id]?.value;if(l)return l;let o=[...new Set((0,i._)(this,j).edges.filter(t=>t.to===e.id).map(e=>e.from))].map(e=>(0,i._)(this,b).nodes.find(t=>t.id===e)).filter(e=>!!e),m=await Promise.all(o.map(async e=>[e.id,await (0,r._)(this,S,T).call(this,e,t,n)]));if(m.some(([e,t])=>null===t)||(0,r._)(this,C,k).call(this))return null;let p=Object.fromEntries(m);try{let n,a,l=(a=(n={...e}).content,"string"==typeof a&&(n.content=function(e,t,n=!1){let i=(0,u.ZP)();return e.replace(i,(e,i,a,s)=>{let r=t[i];if(void 0===r)return(0,c.vV)(`Node with ID "${i}" not found in node map`),e;let l=r;if(a){let e=function e(t){if(!t)return null;if("object"==typeof t)return t;if("string"==typeof t)try{return e(JSON.parse(t))}catch{}return null}(r);if(e){let t=function(e,t){if(!t||!e)return null;let n=t.split("."),i=e;for(let e of n){if(null==i||"object"!=typeof i||null===i)return null;i=i[e]}return i}(e,a);if(null!==t)l=t;else throw Error(`Path "${a}" on node with ID "${i}" does not have a value`)}else throw Error(`Cannot access path "${a}" on non-object node with ID "${i}"`)}return String(("string"!=typeof l||n?JSON.stringify(l):l)??e)})}(a,p,d.C.requiresCodeEvaluation(e.type))),n),o=new NodeRunner(l,(0,i._)(this,y),(0,i._)(this,x),(0,i._)(this,v));await t({type:"SET_RUNNING",nodeID:e.id});let m=async n=>{(0,r._)(this,C,k).call(this)||await t({type:"UPDATE_NODE_VALUE_PARTIAL",nodeID:e.id,value:n})},{value:h}=await o.run(s,(0,i._)(this,N).signal,m);return(0,r._)(this,C,k).call(this)||await t({type:"UPDATE_NODE_VALUE",nodeID:e.id,value:h}),h}catch(n){var h;return(0,r._)(this,C,k).call(this)||await t({type:"UPDATE_NODE_ERROR",nodeID:e.id,error:(h=n)instanceof Error?h.message:"string"==typeof h?h:"object"==typeof h?JSON.stringify(h):""}),null}}var R=n(43134),L=n(76746),A=n(53419),D=n(49835),P=new WeakMap,O=new WeakMap,F=new WeakMap,B=new WeakMap,M=new WeakMap,V=new WeakMap,$=new WeakSet;let LoopsService=class LoopsService{getLoop(e,t=g.kj){return(0,i._)(this,P).getLoop(e,t)}getAllLoops(){return(0,i._)(this,P).listLoops()}getLoopVersions(e){return(0,i._)(this,P).listLoopVersions(e)}createLoop(e){return(0,i._)(this,P).createLoop("string"==typeof e?{id:e}:e)}async updateLoop(e,t){let n=await (0,i._)(this,P).getLoop(e,g.kj);if(!n.success)return n;let a=t(n.data);return await (0,i._)(this,P).updateLoop(e,g.kj,a)}async deleteLoop(e){return(0,R._T)(e),(0,i._)(this,P).deleteLoop(e)}async saveLoop(e){let t="string"==typeof e?{id:e}:e;return await (0,i._)(this,P).updateLoop(t.id,g.qD,t)}async restoreLoopVersion(e){return await (0,i._)(this,P).updateLoop(e.id,g.qD,e)}async revertLoop(e){let t=await (0,i._)(this,P).getLoop(e,g.qD);return t.success?(0,i._)(this,P).updateLoop(e,"draft",t.data):t}getExecution(e,t,n){return(0,i._)(this,P).getExecution(e,t,n)}async createExecution(e,t,n){return(0,i._)(this,P).createExecution(e,t,n?.nodes,n?.inputValues)}updateNodeExecution(e,t,n,a,s){return(0,i._)(this,P).updateNodeExecution(e,t,n,a,s)}async updateExecution(e,t,n,a){let s=await (0,i._)(this,P).getExecution(e,t,n);if(!s.success)return s;let r=s.data;for(let[s,l]of Object.entries(a.nodes))r.nodes[s]&&r.nodes[s].value===l.value&&r.nodes[s].error===l.error||await (0,i._)(this,P).updateNodeExecution(e,t,n,s,l);return await (0,i._)(this,P).getExecution(e,t,n)}isExecutionRunning(e){return!!(0,i._)(this,M).get(e)}getRunningExecutions(){return(0,i._)(this,V)}async runPipeline(e,t,n,a){if((0,L.v)(e).length>0)return;let s=new LoopRunner(e,t,(0,i._)(this,O),(0,i._)(this,F),(0,i._)(this,B));(0,i._)(this,M).set(t,s),(0,i._)(this,V).add(t);try{await s.run(n,a),(0,A.BI)("dotcom_chat.loops_execution",{execution_id:t,loop_id:e.id,node_count:e.nodes.length,status:"success"})}catch(n){throw(0,A.BI)("dotcom_chat.loops_execution",{execution_id:t,loop_id:e.id,node_count:e.nodes.length,status:"error"}),n}finally{(0,i._)(this,M).delete(t),(0,i._)(this,V).delete(t)}}stopPipeline(e,t){let n=(0,i._)(this,M).get(e);n&&(n.stop(t),(0,i._)(this,M).delete(e),(0,i._)(this,V).delete(e),(0,A.BI)("dotcom_chat.loops_execution",{execution_id:e,status:"canceled"}))}async shareLoop(e){return await (0,i._)(this,P).shareLoop(e)}async unshareLoop(e){return await (0,i._)(this,P).unshareLoop(e)}constructor(e,t,n,i){(0,l._)(this,$),(0,a._)(this,P,{writable:!0,value:void 0}),(0,a._)(this,O,{writable:!0,value:void 0}),(0,a._)(this,F,{writable:!0,value:void 0}),(0,a._)(this,B,{writable:!0,value:void 0}),(0,a._)(this,M,{writable:!0,value:new Map}),(0,a._)(this,V,{writable:!0,value:new D.yy}),(0,r._)(this,$,U).call(this),(0,s._)(this,P,e),(0,s._)(this,O,t),(0,s._)(this,F,n),(0,s._)(this,B,i)}};function U(){indexedDB.deleteDatabase("copilot-pipes")}},55248:(e,t,n)=>{n.d(t,{j:()=>r,p:()=>s});var i=n(74848),a=n(21728);let s=e=>{let t,n,s=(0,a.c)(3);return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)("path",{d:"M7.25 1.7793C9.371 1.77943 11.1858 3.00816 12.0166 4.80762C14.2732 5.06028 15.9999 6.94976 16 9.2793C16 9.32465 15.9976 9.37003 15.9961 9.41504H15.9971C15.9971 9.82924 15.6613 10.165 15.2471 10.165C14.8356 10.1648 14.5011 9.83347 14.4971 9.42285H14.4961C14.4983 9.37538 14.5 9.32737 14.5 9.2793C14.4999 7.60324 13.176 6.27947 11.5 6.2793C11.1806 6.2793 10.8958 6.07714 10.791 5.77539C10.284 4.31438 8.90436 3.27944 7.25 3.2793C5.1596 3.2793 3.50012 4.93893 3.5 7.0293C3.5 7.11497 3.50931 7.23128 3.52051 7.33887C3.52582 7.38984 3.53023 7.43466 3.53418 7.46582L3.53906 7.50098L3.54004 7.50977L3.54102 7.51074C3.59503 7.88942 3.35481 8.24868 2.98438 8.34375C2.1243 8.5636 1.5001 9.32996 1.5 10.2793C1.5 11.4033 2.37598 12.2793 3.5 12.2793H3.5332V12.2783C3.53974 12.2783 3.54624 12.2791 3.55273 12.2793H3.55371C3.95838 12.2902 4.28314 12.621 4.2832 13.0283C4.2832 13.4356 3.95841 13.7655 3.55371 13.7764V13.7793H3.5C1.54755 13.7793 0 12.2317 0 10.2793C8.74811e-05 8.86873 0.808798 7.66476 2.00098 7.1084C2.00028 7.08195 2 7.05535 2 7.0293C2.00012 4.1105 4.33118 1.7793 7.25 1.7793ZM6.49707 7.98242C6.78987 7.68961 7.2647 7.68979 7.55762 7.98242L9.80762 10.2324C9.94825 10.373 10.0273 10.5638 10.0273 10.7627C10.0273 10.9616 9.94827 11.1523 9.80762 11.293L7.55762 13.543C7.26472 13.8358 6.78992 13.8358 6.49707 13.543C6.20444 13.2501 6.20435 12.7753 6.49707 12.4824L8.2168 10.7627L6.49707 9.04297C6.20447 8.75008 6.20433 8.27522 6.49707 7.98242ZM14.5273 12.2627C14.9415 12.2627 15.2773 12.5985 15.2773 13.0127C15.2773 13.4269 14.9415 13.7627 14.5273 13.7627H11.5273C11.1133 13.7625 10.7773 13.4268 10.7773 13.0127C10.7774 12.5987 11.1133 12.2629 11.5273 12.2627H14.5273Z",fill:"currentColor"}),s[0]=t):t=s[0],s[1]!==e?(n=(0,i.jsx)("svg",{"aria-hidden":"true",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:t}),s[1]=e,s[2]=n):n=s[2],n},r=e=>{let t,n,s=(0,a.c)(3);return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)("path",{d:"M14.4482 3.33337C18.7 3.33337 22.3305 5.81163 23.9131 9.41736C23.9174 9.4271 23.9218 9.43678 23.9258 9.44666L23.9287 9.45447C28.4413 9.79159 31.9629 13.4237 31.998 17.9789H31.9922C31.9894 18.5288 31.5438 18.974 30.9932 18.974C30.441 18.9739 29.9933 18.5261 29.9932 17.974H29.9971C29.9577 14.3305 27.0059 11.4291 23.2412 11.4291C22.8325 11.429 22.4654 11.1795 22.3135 10.8002L22.0752 10.2064C20.8076 7.33395 17.8991 5.33337 14.4482 5.33337C9.80134 5.33339 6.13785 8.95653 6.1377 13.476C6.1377 13.855 6.16656 14.2794 6.20605 14.4838C6.30638 15.004 5.98334 15.5117 5.46973 15.642C3.44486 16.1554 2 17.9258 2 20.0795C2.00003 22.6354 4.04211 24.6663 6.68945 24.6664H8.125C8.67643 24.6673 9.12289 25.1148 9.12305 25.6664C9.12305 26.2181 8.67653 26.6645 8.125 26.6654V26.6664H6.68945C2.97192 26.6663 3.31456e-05 23.774 0 20.0795C0 17.2864 1.70256 14.9426 4.14941 13.972C4.14121 13.7976 4.1377 13.6268 4.1377 13.476C4.13785 7.81789 8.73115 3.33339 14.4482 3.33337ZM13.9863 17.6185C14.3768 17.2282 15.0099 17.2284 15.4004 17.6185L19.0674 21.2855C19.2549 21.473 19.3603 21.7274 19.3604 21.9926C19.3604 22.2577 19.2548 22.5121 19.0674 22.6996L15.4004 26.3666C15.0099 26.7569 14.3768 26.757 13.9863 26.3666C13.5959 25.9761 13.596 25.3431 13.9863 24.9525L16.9463 21.9926L13.9863 19.0336C13.5958 18.643 13.5958 18.0091 13.9863 17.6185ZM28.6934 24.6595C29.2456 24.6595 29.6934 25.1073 29.6934 25.6595C29.6932 26.2117 29.2456 26.6595 28.6934 26.6595H22.0264C21.4744 26.6593 21.0265 26.2116 21.0264 25.6595C21.0264 25.1074 21.4743 24.6598 22.0264 24.6595H28.6934Z",fill:"currentColor"}),s[0]=t):t=s[0],s[1]!==e?(n=(0,i.jsx)("svg",{"aria-hidden":"true",width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:t}),s[1]=e,s[2]=n):n=s[2],n}},57944:(e,t,n)=>{n.d(t,{c:()=>AgentsPlugin,q:()=>eT});var i,a=n(50467),s=n(74848),r=n(21728),l=n(81453),o=n(33592),d=n(35247),c=n(82460),u=n(76143),m=n(69599),p=n(53419),h=n(26956),f=n(27912),g=n(79634),y=n(91747),x=n(46251),v=n(96540),b=n(97189),_=n(76977),j=n(47865),w=n(79064),N=n(47723);function C(e,t){try{let n=JSON.parse(e);if(void 0!==n.text){let e=n.selectedRepo?{...n.selectedRepo,private:"private"===n.selectedRepo.visibility}:null,i=n.selectedBranch||"",a=n.selectedAgent,s=n.model?.id;if(!s)try{s=localStorage.getItem(N.Pm)??void 0}catch{}t.current(n.text,e,i,a||"",void 0,s)}else t.current(e,null,"",{})}catch{t.current(e,null,"",{})}}var S=n(93654),I=n(60284),k=n(64894),T=n(67925),E=n(409),R=n(76720),L=n(38621),A=n(94011),D=n(77430),P=n(30459),O=n(11680),F=n(56149),B=n(94236),M=n(5524);let V="AgentsBlankslateBanner-module__banner--DpsVX";var $=n(25641);function U({enterprise:e,requestableOrgs:t,adminableOrgs:n}){let i=!!e?.isAdmin,a=!!e?.policyDisabled,r=t.length+n.length,l=t.find(e=>e.requestedAccess),o=n.length>0?n[0]:t[0],[d,c]=(0,v.useState)(void 0!==l?l:o),[u,m]=(0,v.useState)(d?.isAdmin||!1),[p,h]=(0,v.useState)(d?.requestedAccess||!1),[f,g]=(0,v.useState)(!1),[y,x]=(0,v.useState)(!1),[b,_]=(0,v.useState)(!1),[j,w]=(0,v.useState)(null),C=u&&!a||i,S=r>1&&!i&&!p,{sendClickAnalyticsEvent:I}=(0,P.S)(),k=(0,v.useCallback)(e=>{I({category:"member_feature_request",action:`action.copilot_coding_agent.${e}`,label:`ref_cta:${e};ref_loc:agents_blankslate;`})},[I]),T=(0,v.useCallback)(async()=>{if(d){_(!1),w(null);try{p?(await (0,A.Hy)(d.name),k("request_removed")):(await (0,A.Rp)(d.name),w(`Request sent to ${d.name}.`),k("request")),h(!p)}catch{_(!0),w(`An error occurred while ${p?"removing":"sending"} your feature request. Please try again later.`)}finally{g(!1)}}},[p,d,k]);(0,v.useEffect)(()=>{f&&T()},[T,f]),(0,v.useEffect)(()=>{y&&(async()=>{try{e&&i?(k("enterprise_enable"),window.location.href=(0,N.Wt)(e.name)):d&&(await (0,A.pf)(d.name),w(`Feature enabled for ${d.name}. It may take a few minutes for changes to take effect.`),k("org_enable"))}catch{_(!0),w("An error occurred while enabling the feature. Please try again later.")}})()},[y,i,k]);let E=1===r&&d&&!a?(0,s.jsxs)(s.Fragment,{children:["Access to Copilot coding agent has been disabled by ",(0,s.jsx)("span",{className:"text-bold",children:d.name}),"."]}):`Access to Copilot coding agent has been disabled by your ${a?"enterprise":"organizations"}.`;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(O.l,{variant:"warning",title:"Copilot coding agent access request",hideTitle:!0,className:V,"data-testid":"agents-access-request-banner",primaryAction:(0,s.jsx)(q,{canOpenMenu:S,canEnableFeature:C,accessRequested:p,isEnabling:y,isRequesting:f,setIsEnabling:x,setIsRequesting:g,setIsOrgAdmin:m,setCurrentOrg:c,adminableOrgs:n,requestableOrgs:t,setNotice:w}),children:(0,s.jsx)(O.l.Description,{children:E})}),j&&(0,s.jsx)("span",{className:`AgentsBlankslateBanner-module__notice--wwdWQ ${b?"AgentsBlankslateBanner-module__error--j2QU3":""}`,"data-testid":"access-request-notice",children:j})]})}function q({adminableOrgs:e,requestableOrgs:t,canOpenMenu:n,canEnableFeature:i,accessRequested:a,isEnabling:r,isRequesting:l,setCurrentOrg:o,setIsOrgAdmin:d,setIsEnabling:c,setIsRequesting:u,setNotice:m}){let[p,h]=(0,v.useState)(!1),f=(0,v.useRef)(null),g=(0,v.useRef)(null),y=(0,v.useId)(),x=`agents-access-banner-action-portal-${y}`;return(0,v.useEffect)(()=>{g.current&&(0,F.cw)(g.current,x)},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(O.l.PrimaryAction,{onClick:n?()=>{m(null),h(!p)}:()=>{i?c(!0):u(!0)},className:!i&&a?"AgentsBlankslateBanner-module__removeAccessButton--eEjZy":"",trailingAction:n?L.TriangleDownIcon:void 0,inactive:r,loading:l,ref:f,children:i?"Enable feature":a?"Remove request":"Request access"}),(0,s.jsx)("div",{ref:g,children:(0,s.jsx)(B.W,{open:p,onOpenChange:h,anchorRef:f,children:(0,s.jsx)(B.W.Overlay,{align:"end",portalContainerName:x,width:"small",children:(0,s.jsxs)(M.l,{children:[e.length>0&&(0,s.jsxs)(M.l.Group,{children:[(0,s.jsx)(M.l.GroupHeading,{children:"Select organization to enable access"}),(0,s.jsx)(W,{orgs:e,setCurrentOrg:o,setIsOrgAdmin:d,setStatus:c})]}),t.length>0&&e.length>0&&(0,s.jsx)(M.l.Divider,{}),t.length>0&&(0,s.jsxs)(M.l.Group,{children:[(0,s.jsx)(M.l.GroupHeading,{children:"Select organization to request access"}),(0,s.jsx)(W,{orgs:t,setCurrentOrg:o,setIsOrgAdmin:d,setStatus:u})]})]})})})})]})}function W({orgs:e,setCurrentOrg:t,setIsOrgAdmin:n,setStatus:i}){return e.map(e=>(0,s.jsxs)(M.l.Item,{onSelect:()=>{t(e),n(e.isAdmin),i(!0)},children:[(0,s.jsx)(M.l.LeadingVisual,{children:(0,s.jsx)(D.r,{src:e.avatarUrl,square:!0})}),e.name]},e.name))}function H(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(O.l,{variant:"warning",title:"Copilot coding agent access disabled",className:`${V} AgentsBlankslateBanner-module__basic--nJzrr`,hideTitle:!0,"data-testid":"agents-access-disabled-banner",children:(0,s.jsx)(O.l.Description,{children:"Access to Copilot coding agent has been disabled by your administrator."})}),t[0]=e):e=t[0],e}function G(){let e,t,n=(0,r.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(O.l.PrimaryAction,{as:"a",href:$.Zs,children:"Upgrade"}),n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)(O.l,{variant:"upsell",title:"Copilot coding agent access unavailable for plan",className:`${V} AgentsBlankslateBanner-module__upsell--XAdj_`,hideTitle:!0,primaryAction:e,"data-testid":"agents-upgrade-banner",children:(0,s.jsx)(O.l.Description,{children:"This feature is not available on your current plan."})}),n[1]=t):t=n[1],t}try{U.displayName||(U.displayName="AccessRequestBanner")}catch{}try{q.displayName||(q.displayName="RequestAccessAction")}catch{}try{W.displayName||(W.displayName="OrgActionList")}catch{}try{H.displayName||(H.displayName="AccessDisabledBanner")}catch{}try{G.displayName||(G.displayName="UpgradeBanner")}catch{}function z(e){let t,n,i,a,l,o,d,c,u,p,f=(0,r.c)(20),{hasCEorCBAccess:g,memberRequestEntities:y}=e;f[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.G7)("copilot_agents_blankslate_mem_requests"),f[0]=t):t=f[0];let x=t;f[1]!==y?.orgs?.requestable?(n=y?.orgs?.requestable||[],f[1]=y?.orgs?.requestable,f[2]=n):n=f[2];let v=n;f[3]!==y?.orgs?.adminable?(i=y?.orgs?.adminable||[],f[3]=y?.orgs?.adminable,f[4]=i):i=f[4];let b=i,_=v.length+b.length>0,j=x&&y&&(_||y.enterprise);return f[5]===Symbol.for("react.memo_cache_sentinel")?(a=(0,s.jsx)(R.E.Visual,{children:(0,s.jsx)(L.AgentIcon,{size:24})}),l=(0,s.jsx)(R.E.Heading,{children:"Delegate tasks to GitHub Copilot coding agent"}),o=(0,s.jsx)(R.E.Description,{children:"Let Copilot work independently in the background to complete tasks, and then monitor Copilot's progress."}),d=(0,s.jsx)(R.E.SecondaryAction,{href:"https://docs.github.com/en/copilot/how-tos/agents/copilot-coding-agent/enabling-copilot-coding-agent",children:"Learn more about Copilot coding agent"}),f[5]=a,f[6]=l,f[7]=o,f[8]=d):(a=f[5],l=f[6],o=f[7],d=f[8]),f[9]!==b||f[10]!==g||f[11]!==y||f[12]!==v||f[13]!==j?(c=!0===g&&(j?(0,s.jsx)(U,{enterprise:y.enterprise,requestableOrgs:v,adminableOrgs:b}):(0,s.jsx)(H,{})),f[9]=b,f[10]=g,f[11]=y,f[12]=v,f[13]=j,f[14]=c):c=f[14],f[15]!==g?(u=!1===g&&(0,s.jsx)(G,{}),f[15]=g,f[16]=u):u=f[16],f[17]!==c||f[18]!==u?(p=(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(h.Zf.Container,{width:"large",children:(0,s.jsxs)(R.E,{size:"medium",className:"AgentsBlankslate-module__blankslate--h3RJ8",children:[a,l,o,d,c,u]})})}),f[17]=c,f[18]=u,f[19]=p):p=f[19],p}try{z.displayName||(z.displayName="AgentsBlankslate")}catch{}var K=n(30388);let Q="TaskList-module__button--FzNZb",Z="TaskList-module__counter--suSM7";var J=n(62935);let Y="TaskListItem-module__description--GUKJ9";var X=n(67154),ee=n(82595);let et="PullRequestDiffSummaryText-module__prDiffSummary--EzG14";function en(e){let t,n,i,a,l,o,d,c=(0,r.c)(17),{prDiffSummary:u}=e;return u&&(0!==u.lines_added||0!==u.lines_deleted)?(c[0]!==u.lines_added?(t=u.lines_added.toLocaleString(),c[0]=u.lines_added,c[1]=t):t=c[1],c[2]!==t?(n=(0,s.jsxs)("span",{"aria-hidden":"true",className:`${et} PullRequestDiffSummaryText-module__added--I0cdZ`,children:["+",t]}),c[2]=t,c[3]=n):n=c[3],c[4]!==u.lines_deleted?(i=u.lines_deleted.toLocaleString(),c[4]=u.lines_deleted,c[5]=i):i=c[5],c[6]!==i?(a=(0,s.jsxs)("span",{"aria-hidden":"true",className:`${et} PullRequestDiffSummaryText-module__deleted--M94wu`,children:["-",i]}),c[6]=i,c[7]=a):a=c[7],c[8]!==u.lines_added||c[9]!==u.lines_deleted?(l=function({linesAdded:e,linesDeleted:t}){let n="Lines changed: ";return n+`${e} ${1===e?"addition":"additions"} & ${t} ${1===t?"deletion":"deletions"}`}({linesAdded:u.lines_added,linesDeleted:u.lines_deleted}),c[8]=u.lines_added,c[9]=u.lines_deleted,c[10]=l):l=c[10],c[11]!==l?(o=(0,s.jsx)("span",{className:"sr-only",children:l}),c[11]=l,c[12]=o):o=c[12],c[13]!==n||c[14]!==a||c[15]!==o?(d=(0,s.jsxs)(x.B,{direction:"horizontal",gap:"condensed",children:[n,a,o]}),c[13]=n,c[14]=a,c[15]=o,c[16]=d):d=c[16],d):null}try{en.displayName||(en.displayName="PullRequestDiffSummaryText")}catch{}var ei=n(44334),ea=n(62189),es=n(45244);let er=e=>{let t,n,i,a=(0,r.c)(7),{text:l}=e,[o,d]=(0,v.useState)(null),[c,u]=(0,v.useState)("none");a[0]!==o||a[1]!==l?(t=()=>{if(null===o)return void d(l);if(l!==o){u("exiting");let e=setTimeout(()=>{d(l),u("entering")},400);return()=>clearTimeout(e)}},n=[l,o],a[0]=o,a[1]=l,a[2]=t,a[3]=n):(t=a[2],n=a[3]),(0,v.useEffect)(t,n);let m=`TaskListItem-module__fadeText--giNoG ${"entering"===c?"TaskListItem-module__entering--aB9fl":"exiting"===c?"TaskListItem-module__exiting--m4Koz":null}`;return a[4]!==o||a[5]!==m?(i=(0,s.jsx)("span",{className:m,children:o}),a[4]=o,a[5]=m,a[6]=i):i=a[6],i};function el(e){let t,n,i,a,l,o,d,c,u,m,p,h,f,g=(0,r.c)(41),{state:y,revisionCount:x,startedAt:b,prState:_,prTitle:j,prNwo:w,prNumber:N,prGlobalId:C,prInMergeQueue:S,prDiffSummary:I}=e,[k,T]=(0,v.useState)(null),[E,R]=(0,v.useState)(!1);g[0]!==S||g[1]!==_||g[2]!==y?(t="merged"===_?"Merged":"closed"===_?"Closed":S?"Queued to merge":y&&(0,X.wG)(y)||"",g[0]=S,g[1]=_,g[2]=y,g[3]=t):t=g[3];let L=t;g[4]!==S||g[5]!==_||g[6]!==y?(n=(0,ei.T)(_,S,y),g[4]=S,g[5]=_,g[6]=y,g[7]=n):n=g[7];let A=n;g[8]!==k||g[9]!==A?(i=()=>{if(!k)return void T(A);if(k.icon!==A.icon){R(!0);let e=setTimeout(()=>{T(A),R(!1)},300);return()=>clearTimeout(e)}},a=[A,k],g[8]=k,g[9]=A,g[10]=i,g[11]=a):(i=g[10],a=g[11]),(0,v.useEffect)(i,a);let D=x>0?`${x} revision${x>1?"s":""} \xb7 `:null;g[12]!==C||g[13]!==N||g[14]!==w?(l=(0,ea.t$)(C,w,N),g[12]=C,g[13]=N,g[14]=w,g[15]=l):l=g[15];let P=l;g[16]===Symbol.for("react.memo_cache_sentinel")?(o=(0,ea.zI)(),g[16]=o):o=g[16];let O=o,F=`TaskListItem-module__iconTransition--h8TDX ${E?"TaskListItem-module__fadeOut--TTRa9":""}`;return g[17]!==A||g[18]!==F?(d=(0,s.jsx)(K.qJ.Item.LeadingVisual,{children:(0,s.jsx)(ee.I,{...A,className:F})}),g[17]=A,g[18]=F,g[19]=d):d=g[19],g[20]!==j?(c=(0,s.jsx)(K.qJ.Item.Title,{children:j}),g[20]=j,g[21]=c):c=g[21],g[22]!==I||g[23]!==y?(u=y&&"in_progress"!==y&&I&&(0,s.jsx)(K.qJ.Item.Actions,{children:(0,s.jsx)(en,{prDiffSummary:I})}),g[22]=I,g[23]=y,g[24]=u):u=g[24],g[25]!==b?(m=(0,s.jsx)(J.A,{format:"micro",datetime:b}),g[25]=b,g[26]=m):m=g[26],g[27]!==L?(p=(0,s.jsx)(er,{text:L}),g[27]=L,g[28]=p):p=g[28],g[29]!==N||g[30]!==w||g[31]!==D||g[32]!==m||g[33]!==p?(h=(0,s.jsx)(K.qJ.Item.Description,{children:(0,s.jsxs)("span",{className:Y,children:[w,"#",N," \xb7 started ",m," ago \xb7"," ",D,p]})}),g[29]=N,g[30]=w,g[31]=D,g[32]=m,g[33]=p,g[34]=h):h=g[34],g[35]!==u||g[36]!==h||g[37]!==d||g[38]!==c||g[39]!==P?(f=(0,s.jsxs)(K.qJ.Item,{href:P,isExternalLink:O,children:[d,c,u,h]}),g[35]=u,g[36]=h,g[37]=d,g[38]=c,g[39]=P,g[40]=f):f=g[40],f}function eo(e){let t,n,i,a,l=(0,r.c)(7),{repositoryNwo:o}=e,d=`Creating task in ${o}`;return l[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)(K.qJ.Item.LeadingVisual,{children:(0,s.jsx)(ee.I,{icon:L.DotFillIcon,color:"var(--fgColor-attention)"})}),l[0]=t):t=l[0],l[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,s.jsx)(K.qJ.Item.Title,{children:(0,s.jsx)(es.b,{className:"fgColor-muted",children:"Creating task"})}),l[1]=n):n=l[1],l[2]!==o?(i=(0,s.jsxs)(K.qJ.Item.Description,{children:[(0,s.jsx)("span",{className:Y,children:o})," \xb7 Initializing pull request\u2026"]}),l[2]=o,l[3]=i):i=l[3],l[4]!==d||l[5]!==i?(a=(0,s.jsxs)(K.qJ.Item,{"aria-label":d,children:[t,n,i]}),l[4]=d,l[5]=i,l[6]=a):a=l[6],a}try{er.displayName||(er.displayName="FadeText")}catch{}try{el.displayName||(el.displayName="TaskListItem")}catch{}try{(i=function(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(K.qJ.Item.Skeleton,{}),t[0]=e):e=t[0],e}).displayName||(i.displayName="LoadingTaskListItem")}catch{}try{eo.displayName||(eo.displayName="OptimisticTaskListItem")}catch{}function ed(e){let t,n=(0,r.c)(3),{tasks:i,isError:a}=e;return n[0]!==a||n[1]!==i?(t=(0,s.jsx)(K.qJ.List,{id:"tasks-list","aria-labelledby":"open-tab",children:a?(0,s.jsxs)(K.qJ.EmptyState,{children:[(0,s.jsx)(L.AlertIcon,{size:24}),(0,s.jsx)("p",{children:"Sorry, something went wrong"})]}):0===i.length?(0,s.jsx)(K.qJ.EmptyState,{children:(0,s.jsx)("p",{children:"No open tasks yet. Start a new task to see it here."})}):(0,s.jsx)(s.Fragment,{children:i.map(ec)})}),n[0]=a,n[1]=i,n[2]=t):t=n[2],t}function ec(e){return e.isOptimistic?(0,s.jsx)(eo,{title:`Creating: ${e.problemStatement??""}`,repositoryNwo:e.nwo??""},e.clientGeneratedId):e.pull&&(0,s.jsx)(el,{state:e.latest_session_state,startedAt:e.latest_session_updated_at,revisionCount:e.session_count-1,prState:e.pull.state,prUrl:e.pull.url,prTitle:e.pull.title,prNwo:e.pull.repository_nwo,prNumber:e.pull.number,prGlobalId:e.pull.global_relay_id,prInMergeQueue:e.pull.inMergeQueue??!1,prDiffSummary:e.pull.pr_diff_summary},e.pull.id)}try{ed.displayName||(ed.displayName="OpenTaskList")}catch{}function eu(e){let t,n,i=(0,r.c)(5),{tasks:a,isError:l}=e;return i[0]!==l||i[1]!==a?(t=l?(0,s.jsxs)(K.qJ.EmptyState,{children:[(0,s.jsx)(L.AlertIcon,{size:24}),(0,s.jsx)("p",{children:"Sorry, something went wrong"})]}):0===a.length?(0,s.jsx)(K.qJ.EmptyState,{children:(0,s.jsx)("p",{children:"No closed tasks yet."})}):a.map(em),i[0]=l,i[1]=a,i[2]=t):t=i[2],i[3]!==t?(n=(0,s.jsx)(K.qJ.List,{id:"tasks-list","aria-labelledby":"closed-tab",children:t}),i[3]=t,i[4]=n):n=i[4],n}function em(e){return(0,s.jsx)(el,{state:e.latest_session_state,startedAt:e.latest_session_updated_at,revisionCount:e.session_count-1,prState:e.pull.state,prUrl:e.pull.url,prTitle:e.pull.title,prNwo:e.pull.repository_nwo,prNumber:e.pull.number,prGlobalId:e.pull.global_relay_id,prInMergeQueue:e.pull.inMergeQueue??!1,prDiffSummary:e.pull.pr_diff_summary},e.pull.id)}try{eu.displayName||(eu.displayName="ClosedTaskList")}catch{}function ep(e){let t,n,i,a,l,o,d,c,u,m,p,h=(0,r.c)(31),{tasks:f,isError:g,activeTab:y,setActiveTab:x}=e;h[0]!==f?(t=f.filter(ef),h[0]=f,h[1]=t):t=h[1];let v=t;h[2]!==f?(n=f.filter(eh),h[2]=f,h[3]=n):n=h[3];let b=n;h[4]!==x?(i=()=>x("open"),h[4]=x,h[5]=i):i=h[5];let _="open"===y;h[6]!==v.length?(a=(0,s.jsx)("span",{className:Z,children:v.length}),h[6]=v.length,h[7]=a):a=h[7],h[8]!==i||h[9]!==_||h[10]!==a?(l=(0,s.jsxs)("button",{onClick:i,role:"tab","aria-selected":_,"aria-controls":"tasks-list",id:"open-tab",className:Q,children:["Open ",a]}),h[8]=i,h[9]=_,h[10]=a,h[11]=l):l=h[11],h[12]!==x?(o=()=>x("closed"),h[12]=x,h[13]=o):o=h[13];let j="closed"===y;return h[14]!==b.length?(d=(0,s.jsx)("span",{className:Z,children:b.length}),h[14]=b.length,h[15]=d):d=h[15],h[16]!==o||h[17]!==j||h[18]!==d?(c=(0,s.jsxs)("button",{onClick:o,role:"tab","aria-selected":j,"aria-controls":"tasks-list",id:"closed-tab",className:Q,children:["Closed ",d]}),h[16]=o,h[17]=j,h[18]=d,h[19]=c):c=h[19],h[20]!==c||h[21]!==l?(u=(0,s.jsx)(K.qJ.Header,{children:(0,s.jsxs)("div",{role:"tablist","aria-label":"Filter pull requests",className:"TaskList-module__filterButtons--DNyGe",children:[l,c]})}),h[20]=c,h[21]=l,h[22]=u):u=h[22],h[23]!==y||h[24]!==b||h[25]!==g||h[26]!==v?(m="open"===y?(0,s.jsx)(ed,{tasks:v,isError:g}):(0,s.jsx)(eu,{tasks:b,isError:g}),h[23]=y,h[24]=b,h[25]=g,h[26]=v,h[27]=m):m=h[27],h[28]!==u||h[29]!==m?(p=(0,s.jsxs)(K.qJ,{children:[u,m]}),h[28]=u,h[29]=m,h[30]=p):p=h[30],p}function eh(e){return!!(e.pull&&("merged"===e.pull.state||"closed"===e.pull.state))}function ef(e){return!e.pull||"merged"!==e.pull.state&&"closed"!==e.pull.state}try{ep.displayName||(ep.displayName="TaskList")}catch{}function eg(){let e,t,n,i=(0,r.c)(7),{agentsEnabled:a,hasCEorCBAccess:o,memberRequestEntities:d}=(0,g.X)();i[0]!==a?(e=(0,m.G7)("copilot_chat_agents_empty_state")&&!a,i[0]=a,i[1]=e):e=i[1];let c=e;return i[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)(f.P.Sidebar,{children:(0,s.jsx)(l.U,{})}),i[2]=t):t=i[2],i[3]!==o||i[4]!==d||i[5]!==c?(n=(0,s.jsx)(b.Fn,{children:(0,s.jsxs)(f.P,{"data-testid":"agents-layout",children:[t,(0,s.jsx)(f.P.ColumnLeft,{children:c?(0,s.jsx)(z,{hasCEorCBAccess:o,memberRequestEntities:d}):(0,s.jsx)(ey,{})})]})}),i[3]=o,i[4]=d,i[5]=c,i[6]=n):n=i[6],n}function ey(){let e,t,n,i,a,l,m,f,b,N,R,L,A,D,P,O,F,B,M,V,$,U,q,W=(0,r.c)(39),[H,G]=(0,v.useState)("open"),{sessionsPollingInterval:z,showCopilotCodingAgentPremiumRequestsBanner:K,tasks:Q,pullRequestsMap:Z}=(0,g.X)(),J=(0,y.u)("copilot_agent_task_list_v2"),Y=(0,v.useRef)(!1);W[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],W[0]=e):e=W[0];let[X,ee]=(0,v.useState)(e);(0,_._)(),W[1]!==Z||W[2]!==Q||W[3]!==z?(t={sessionsPollingInterval:z,initialTasks:Q,initialPullRequestsMap:Z},W[1]=Z,W[2]=Q,W[3]=z,W[4]=t):t=W[4];let{tasks:et,isError:en}=(0,S.si)(t);W[5]===Symbol.for("react.memo_cache_sentinel")?(n={onError:(e,t)=>{ee(n=>[...n,{...t,error:e,baseRef:t.baseRef,timestamp:new Date().toISOString()}])}},W[5]=n):n=W[5];let{createTask:ei}=(0,j.Z)(n),ea=(0,o.b)();W[6]===Symbol.for("react.memo_cache_sentinel")?(i=()=>((0,u.D)("Agents \xb7 GitHub Copilot"),(0,p.BI)("agent_sessions.task_view",{target:"AGENTS_VIEW_LOADED",defaultToTask:d.W.defaultToTaskInput,defaultToTaskControl:d.W.defaultToTaskControl}),()=>{Y.current||(0,p.BI)("dotcom_chat.activate",{target:"AGENTS_BOUNCE_TO_CHAT",mode:"immersive",bounceToUrl:document.location.href,defaultToTask:d.W.defaultToTaskInput,defaultToTaskControl:d.W.defaultToTaskControl})}),a=[],W[6]=i,W[7]=a):(i=W[6],a=W[7]),(0,v.useEffect)(i,a),W[8]!==ea?(l=()=>{ea.selectThread(null,{includeThreads:!1,clearTopic:!0})},m=[ea],W[8]=ea,W[9]=l,W[10]=m):(l=W[9],m=W[10]),(0,v.useEffect)(l,m),W[11]!==ei||W[12]!==ea?(f=async(e,t,n,i,a,s,r)=>{Y.current=!0;let l=e.trim();""!==l&&n&&""!==n.trim()&&(t?(G("open"),ei({nwo:t.nameWithOwner,problemStatement:l,baseRef:n,eventType:"agents_page",eventContent:l,selectedAgent:i,modelId:s,createPullRequest:r})):ea.sendChatMessage({content:l,thread:null,references:[]}))},W[11]=ei,W[12]=ea,W[13]=f):f=W[13];let es=f;U=(0,r.c)(5),q=(0,v.useRef)(es),U[0]!==es?(B=()=>{q.current=es},M=[es],U[0]=es,U[1]=B,U[2]=M):(B=U[1],M=U[2]),(0,v.useEffect)(B,M),U[3]===Symbol.for("react.memo_cache_sentinel")?(V=()=>{let e=w.Jt.getTaskEntrypointMessage();e&&(w.Jt.setTaskEntrypointMessage(null),C(e.message,q))},$=[],U[3]=V,U[4]=$):(V=U[3],$=U[4]),(0,v.useEffect)(V,$),W[14]!==ei||W[15]!==X?(b=e=>{let t=X[e];t&&(ee(t=>t.filter((t,n)=>n!==e)),ei({nwo:t.nwo,problemStatement:t.problemStatement,baseRef:t.baseRef,eventType:"agents_page"}))},W[14]=ei,W[15]=X,W[16]=b):b=W[16];let er=b,[el,eo]=(0,v.useState)(!1);return W[17]!==el||W[18]!==K?(N=K&&!el&&(0,s.jsx)(h.Zf.Banner,{children:(0,s.jsx)(k.C,{onBannerDismiss:()=>eo(!0)})}),W[17]=el,W[18]=K,W[19]=N):N=W[19],W[20]===Symbol.for("react.memo_cache_sentinel")?(R=(0,s.jsxs)(h.Zf.Header,{children:[(0,s.jsx)(h.Zf.Title,{children:"Agents"}),(0,s.jsx)(h.Zf.Description,{children:"Delegate tasks to GitHub Copilot coding agent to work on in the background, and then monitor Copilot's progress."})]}),W[20]=R):R=W[20],W[21]!==es?(L=(0,s.jsx)(I.Q,{handleUserSubmit:es,eventType:"agents_page"}),W[21]=es,W[22]=L):L=W[22],W[23]!==X||W[24]!==er?(A=X.length>0&&(0,s.jsx)(x.B,{direction:"vertical",className:"AgentsView-module__failedTaskCreationBanners--bUn1A",children:X.map((e,t)=>(0,s.jsx)(T.Q,{problemStatement:e?.problemStatement,handleRetry:()=>er(t),handleDismiss:()=>{ee(e=>e.filter((e,n)=>n!==t))}},`${e?.nwo}-${e?.problemStatement}-${e?.timestamp}`))}),W[23]=X,W[24]=er,W[25]=A):A=W[25],W[26]!==L||W[27]!==A?(D=(0,s.jsxs)(h.Zf.Section,{children:[L,A]}),W[26]=L,W[27]=A,W[28]=D):D=W[28],W[29]!==H||W[30]!==en||W[31]!==J||W[32]!==et?(P=(0,s.jsx)(h.Zf.Section,{children:J?(0,s.jsx)(c.f,{title:"Recent sessions",initialResultCount:25,showPillMenu:!0}):(0,s.jsx)(ep,{tasks:et,isError:en,activeTab:H,setActiveTab:G})}),W[29]=H,W[30]=en,W[31]=J,W[32]=et,W[33]=P):P=W[33],W[34]===Symbol.for("react.memo_cache_sentinel")?(O=(0,s.jsx)(E.C,{}),W[34]=O):O=W[34],W[35]!==D||W[36]!==P||W[37]!==N?(F=(0,s.jsxs)(h.Zf.Container,{noHeader:!0,width:"small",children:[N,R,D,P,O]}),W[35]=D,W[36]=P,W[37]=N,W[38]=F):F=W[38],F}try{eg.displayName||(eg.displayName="AgentsViewWrapper")}catch{}try{ey.displayName||(ey.displayName="AgentsView")}catch{}var ex=n(55248),ev=n(51213),eb=n(79184),e_=n(98866),ej=n(72259),ew=n(73678),eN=n(25811),eC=n(86101),eS=n(78223);function eI(e){let t,n,i=(0,r.c)(5),{selectedAgent:a}=e,{plan:l}=(0,eb.xR)(),[o,c]=(0,e_.N)(),{models:u}=(0,ej.h)(),[m]=(0,eN.s)(),p=a??m,{data:h}=(0,eC.B)(p.topLevelAgentId?Number(p.topLevelAgentId):null);return d.W.codingAgentModelSelection&&(d.W.codingAgentModelSelectionAllSkus||l===ev.UH.IndividualPro||l===ev.UH.IndividualProPlus)&&(0,eS.CF)(p,h?.slug)&&u&&0!==u.length?(i[0]!==c?(t=e=>{c(e)},i[0]=c,i[1]=t):t=i[1],i[2]!==o||i[3]!==t?(n=(0,s.jsx)(ew.Y,{onUpdateModel:t,selectedModelId:o}),i[2]=o,i[3]=t,i[4]=n):n=i[4],n):null}try{eI.displayName||(eI.displayName="SlashCommandModelPicker")}catch{}let ek=/\/copilot\/agents/,eT=`${$.Jz}/agents`;let AgentsPlugin=class AgentsPlugin{constructor(e=!1,t,n=!1){(0,a._)(this,"id",N.Dv),(0,a._)(this,"displayName",N.Ff),(0,a._)(this,"createTaskFromInput",void 0),(0,a._)(this,"handleUserSubmitRef",void 0),(0,a._)(this,"agentsEnabled",void 0),(0,a._)(this,"skipSyncRouteToThread",!0),(0,a._)(this,"components",[{id:"agents-view",Component:eg,routes:[ek]}]),(0,a._)(this,"slashCommand",{key:"task",name:"Task",description:"Give Copilot coding agent a background task",icon:L.AgentIcon,isNew:!0,order:1,enabled:()=>this.agentsEnabled,disabledAction:e=>{e(eT,{preventTurbo:!0})},execute:async(e,t,n)=>!(this.agentsEnabled&&t.selectedThreadID&&(0,m.G7)("copilot_immersive_task_within_chat_thread"))&&(this.agentsEnabled&&this.createTaskFromInput&&this.handleUserSubmitRef?C(e,this.handleUserSubmitRef):(w.Jt.setTaskEntrypointMessage(e),n(eT,{preventTurbo:!0})),!0),suggestions:["Identify and suggest improvements to slow or inefficient code","Find and refactor duplicated code","Suggest more descriptive variable and function names"],mode:{name:ev.II.Task,icon:L.AgentIcon,supportsAutocompletion:!0},customModelPicker:({selectedAgent:e})=>(0,s.jsx)(eI,{selectedAgent:e})}),(0,a._)(this,"navigationItems",[{id:N.Dv,displayName:"Agents",href:N.pr,icon:ex.p}]),this.createTaskFromInput=e,this.handleUserSubmitRef=t,this.agentsEnabled=n}}},59370:(e,t,n)=>{function i(e){return/^@today([+-]\d+[dwmy])?$/.test(e)}function a(e){if(e.startsWith("@"))return!1;let t=new Date(e);return!isNaN(t.getTime())&&(!e.match(/^\d{4}-\d{2}-\d{2}$/)||l(t)===e)}function s(e){return i(e)||a(e)}function r(e){return e.startsWith("@")&&!i(e)?null:i(e)?function(e){if(!i(e))return{date:null,error:`Invalid macro format: ${e}`};let t=new Date;if("@today"===e)return{date:t};let n=e.match(/^@today([+-])(\d+)([dwmy])$/);if(!n)return{date:null,error:`Invalid macro format: ${e}`};let[,a,s,r]=n;if(!a||!s||!r)return{date:null,error:`Invalid macro format: ${e}`};let l=parseInt(s,10),o="+"===a,d=new Date(t);switch(r){case"d":d.setDate(d.getDate()+(o?l:-l));break;case"w":d.setDate(d.getDate()+(o?7*l:-(7*l)));break;case"m":d.setMonth(d.getMonth()+(o?l:-l));break;case"y":d.setFullYear(d.getFullYear()+(o?l:-l));break;default:return{date:null,error:`Invalid unit: ${r}`}}return{date:d}}(e).date:a(e)?new Date(e):null}function l(e){let t=e.toISOString();return t.split("T")[0]??t.substring(0,10)}n.d(t,{O2:()=>l,Qf:()=>r,Yj:()=>s,nS:()=>i})},60209:(e,t,n)=>{n.d(t,{J1:()=>d,Os:()=>l,QK:()=>o,S$:()=>a,bW:()=>u,km:()=>r,lh:()=>s,qe:()=>c});var i=n(25641);let a="loops",s="loops",r="loop",l="Loops",o=`${i.Jz}/loops`,d=`${i.Jz}/l`,c=/\/copilot\/loops/,u=/\/copilot\/l\/([a-zA-Z0-9-]+)/},61282:(e,t,n)=>{n.d(t,{V:()=>p});var i=n(74848),a=n(21728),s=n(96540),r=n(38621),l=n(26108),o=n(21373),d=n(69726),c=n(15220),u=n(54571);let m=(0,s.lazy)(()=>Promise.all([n.e(3088),n.e(43934),n.e(82216),n.e(6488),n.e(42892),n.e(99418),n.e(30587),n.e(72471),n.e(55229),n.e(4712),n.e(3086),n.e(82081),n.e(51220),n.e(28546),n.e(26744),n.e(40489),n.e(18312),n.e(347),n.e(89332),n.e(81711),n.e(25407),n.e(83494),n.e(83463),n.e(87670),n.e(40771),n.e(66990),n.e(29665),n.e(4817),n.e(37294),n.e(2635),n.e(30721),n.e(99808),n.e(52302),n.e(81171),n.e(67071),n.e(84597),n.e(10422),n.e(92421),n.e(30752)]).then(n.bind(n,68747)).then(e=>({default:e.NewAgentTaskButtonContent})));function p(e){let t,n,d,p,g,y,x=(0,a.c)(26),{isIconButton:v,icon:b,label:_,onOpen:j,onClose:w,setContentOpen:N,open:C,currentRepo:S,currentReference:I,hideRepoSelector:k,eventType:T,size:E,tooltipDirection:R,variant:L}=e,A=void 0===b?r.AgentIcon:b,D=void 0===_?"New agent session":_,[P,O]=(0,s.useState)(!!C);x[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],x[0]=t):t=x[0];let[F]=(0,u.I)(h,!0,t),B=(0,s.useRef)(null);x[1]!==j?(n=()=>{O(!0),j?.()},x[1]=j,x[2]=n):n=x[2];let M=n;x[3]!==w||x[4]!==N?(d=()=>{O(!1),w?.(),N?.(!1)},x[3]=w,x[4]=N,x[5]=d):d=x[5];let V=d,$=S?`${D} in ${S.ownerLogin}/${S.name}`:D;return x[6]!==M||x[7]!==A||x[8]!==v||x[9]!==D||x[10]!==E||x[11]!==R||x[12]!==L?(p=v?(0,i.jsx)(l.K,{ref:B,icon:A,"aria-label":D,size:E,tooltipDirection:R,variant:L,onClick:M}):(0,i.jsx)(o.Q,{ref:B,onClick:M,leadingVisual:A,size:E,children:D}),x[6]=M,x[7]=A,x[8]=v,x[9]=D,x[10]=E,x[11]=R,x[12]=L,x[13]=p):p=x[13],x[14]!==I||x[15]!==S||x[16]!==$||x[17]!==T||x[18]!==V||x[19]!==k||x[20]!==P||x[21]!==F?(g=P&&!F&&(0,i.jsx)(c.l,{title:$,onClose:V,returnFocusRef:B,position:{narrow:"fullscreen"},children:(0,i.jsx)(c.l.Body,{className:"p-0",children:(0,i.jsx)(s.Suspense,{fallback:(0,i.jsx)(f,{}),children:(0,i.jsx)(m,{currentRepo:S,currentReference:I,hideRepoSelector:k,setOpen:V,eventType:T})})})}),x[14]=I,x[15]=S,x[16]=$,x[17]=T,x[18]=V,x[19]=k,x[20]=P,x[21]=F,x[22]=g):g=x[22],x[23]!==p||x[24]!==g?(y=(0,i.jsxs)(i.Fragment,{children:[p,g]}),x[23]=p,x[24]=g,x[25]=y):y=x[25],y}function h(){return!1}function f(){let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("div",{className:"d-flex flex-column flex-items-center p-6",children:(0,i.jsx)(d.A,{srText:"Loading\u2026"})}),t[0]=e):e=t[0],e}try{m.displayName||(m.displayName="LazyNewAgentTaskButtonContent")}catch{}try{p.displayName||(p.displayName="NewAgentTaskButton")}catch{}try{f.displayName||(f.displayName="FallbackContent")}catch{}},61872:(e,t,n)=>{n.d(t,{T:()=>i});let i={MissingProperty:"MissingProperty",CycleDetected:"CycleDetected",NonexistentNode:"NonexistentNode",DisconnectedNode:"DisconnectedNode",InvalidBooleanValue:"InvalidBooleanValue",InvalidRangeValue:"InvalidRangeValue",InvalidSelectValue:"InvalidSelectValue",InvalidFileType:"InvalidFileType",EmptyInputValue:"EmptyInputValue",InvalidDateValue:"InvalidDateValue",UnavailableModel:"UnavailableModel"}},62421:(e,t,n)=>{n.d(t,{G:()=>l});var i=n(21728),a=n(96459),s=n(25641),r=n(33592);function l(){let e,t=(0,i.c)(3),n=(0,r.b)(),l=(0,a.Z)();return t[0]!==n||t[1]!==l?(e=async e=>{window.location.pathname!==s.Jz&&(l(s.Jz),await n.selectThread(null,e))},t[0]=n,t[1]=l,t[2]=e):e=t[2],e}},62828:(e,t,n)=>{n.d(t,{I:()=>o});var i=n(21728),a=n(47789),s=n(35247),r=n(7812),l=n(1747);function o(e){let t,n=(0,i.c)(8),{messageId:o,messageIndex:d,messageTimestamp:c}=e,{openPreviewPane:u,openItem:m,updateItem:p}=(0,l.xx)(),h=(0,a.qw)();return n[0]!==o||n[1]!==d||n[2]!==c||n[3]!==m||n[4]!==u||n[5]!==h||n[6]!==p?(t=(e,t)=>{let n=null;switch(e.type){case"file":n=(0,r.by)(e,o,c);break;case"file-diff":n=(0,r.g)(e,o,c);break;case"thread-scoped-file":n=(0,r.oR)({ref:e,messageIndex:d,messageId:o,timestamp:c});break;case"draft-issue":case"draft-update-issue":n=(0,r.oR)({ref:e,messageIndex:d,messageId:o});break;case"issue":n=(0,r.SI)(e,o);break;case"job":s.W.immersiveJobResultPreview&&(n=(0,r.wN)(e,o));break;default:for(let t of h)if(t.previewComponents?.[e.type]){n=(0,r.Bx)(e,o);break}}n&&(t?.preventDefault(),p(n),m(n.id),u())},n[0]=o,n[1]=d,n[2]=c,n[3]=m,n[4]=u,n[5]=h,n[6]=p,n[7]=t):t=n[7],t}},64894:(e,t,n)=>{n.d(t,{C:()=>o});var i=n(74848),a=n(21728),s=n(11680),r=n(96379),l=n(96540);function o(e){let t,n,o,d=(0,a.c)(4),{onBannerDismiss:c,enabled:u}=e,[m,p]=(0,l.useState)(!1);return!(void 0===u||u)||m?null:(d[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"text-bold",children:"Copilot coding agent now uses fewer premium requests!"})," From now on, each session uses just one premium request."]}),n=(0,i.jsx)(s.l.PrimaryAction,{as:"a",href:"https://docs.github.com/copilot/concepts/copilot-billing/understanding-and-managing-requests-in-copilot",children:"Learn more"}),d[0]=t,d[1]=n):(t=d[0],n=d[1]),d[2]!==c?(o=(0,i.jsx)(s.l,{variant:"upsell",title:"Copilot premium requests announcement",hideTitle:!0,description:t,primaryAction:n,onDismiss:async()=>{p(!0),c&&c(),await (0,r.DI)("/settings/dismiss-notice/copilot_coding_agent_premium_requests_banner",{method:"POST"})}}),d[2]=c,d[3]=o):o=d[3],o)}try{o.displayName||(o.displayName="PremiumRequestsBanner")}catch{}},64917:(e,t,n)=>{n.d(t,{I:()=>s});var i=n(21728),a=n(99993);function s(e,t){let n=(0,i.c)(2),{data:s}=(0,a._N)(e,t);if(void 0===s){let t;return n[0]!==e?(t=e(void 0),n[0]=e,n[1]=t):t=n[1],t}return s}},65529:(e,t,n)=>{n.d(t,{as:()=>p,fp:()=>m,vQ:()=>u});var i=n(47865),a=n(76977),s=n(93654),r=n(2635),l=n(53419),o=n(96540);let d="copilot-chat-spec-task";function c(e,t){if(e&&t)return`${d}::${e}::${t}`}function u(e){let{selectedThreadID:t}=(0,r.Pk)(),n=c((0,r.Pk)().selectedThreadID,e.tag),[a,s]=(0,o.useState)(null);(0,o.useEffect)(()=>{s(null)},[e.id]);let u=(0,o.useCallback)(e=>{let n;e instanceof i.c||(e=Error("An unexpected error occurred. Please try again.",{cause:e})),s(e),e&&"status"in e&&"number"==typeof e.status&&(n=e.status),(0,l.BI)("copilot.spec_mode.pr_creation.failure",{http_status:n,error_message:e.message,mode:"immersive",threadId:t})},[t]),{createTask:m,isCreating:p}=(0,i.Z)({onError:u}),h=e.name,f=(0,o.useMemo)(()=>((e.name?`${e.name}

${e.description}`:e.description)||e.tag).trim(),[e.name,e.description,e.tag]);return{start:(0,o.useCallback)(i=>{if(p)return;s(null),(0,l.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_START",mode:"immersive",threadId:t});let a=i?.nameWithOwner??e.repository;if(!a)return void u(Error("Repository is required to start a task"));let r=a.split("/");2===r.length&&r[0]&&r[1]?n?m({nwo:a,baseRef:i?.branch,selectedAgent:i?.subAgent?{typeName:"customSubAgent",subAgentSlug:i.subAgent}:void 0,problemStatement:f,title:h,eventType:d},n):u(Error("Unable to generate task ID - thread or task tag missing")):u(Error('Invalid repository format. Expected "owner/repo"'))},[m,n,u,p,f,e.repository,t,h]),isStarting:p,error:a}}function m(e){let t=(0,r.Pk)(),n=e.map(e=>c(t.selectedThreadID,e.tag));(0,a._)();let{tasks:i,isLoading:l}=(0,s.si)({});return(0,o.useMemo)(()=>n.map(e=>!e||l||0===i.length?{isLoading:!!e&&l,pullRequest:void 0}:function(e){if(0===e.length)return{isLoading:!1,pullRequest:void 0};let t={isLoading:!1,pullRequest:void 0};for(let n of e){if(n.isLoading)return{isLoading:!0,pullRequest:void 0};if(n.pullRequest?.state==="closed")continue;let e=n.pullRequest?.created_at,i=t.pullRequest?.created_at;e&&(!i||new Date(e).getTime()>new Date(i).getTime())&&(t=n)}return t}(i.filter(t=>t.event_identifiers?.includes(e)).map(e=>({isLoading:!!e?.isOptimistic,pullRequest:e.pull})))),[n,i,l])}function p(e){return m(e?[e]:[])[0]??{isLoading:!1,pullRequest:void 0}}},67718:(e,t,n)=>{n.d(t,{b:()=>sp});var i,a,s,r,l,o=n(74848),d=n(68273),c=n(21728),u=n(70719),m=n(79472),p=n(18799),h=n(83494),f=n(70843),g=n(15220),y=n(87555),x=n(34164),v=n(96540),b=n(70170),_=n(56051),j=n(5524),w=n(57478),N=n(96459),C=n(53627),S=n(82603),I=n(27011);let k=(0,v.forwardRef)((0,d.Z6)()?function(e,t){let n,i,a,s,r,l,d,u,m,p,h,f,g,y,x,k,E=(0,c.c)(62),{basePath:R,fileFilterMenuOptions:L,fileFilterState:A,filterSize:D,viewerLogin:P,setFileFilterState:O}=e,[F]=(0,N.o)();E[0]!==R?(n={basePath:R},E[0]=R,E[1]=n):n=E[1];let{data:B}=(0,S.dG)(n),M=(0,v.useRef)(null);E[2]===Symbol.for("react.memo_cache_sentinel")?(i=()=>({focus:()=>{M.current?.focus()}}),E[2]=i):i=E[2],(0,v.useImperativeHandle)(t,i),E[3]!==A?(a={...A},E[3]=A,E[4]=a):a=E[4];let{filterText:V,fileExtensions:$,unselectedFileExtensions:U,showOnlyOwnedFiles:q,showDeletedFiles:W,showOnlyManifestFiles:H,showVendoredFiles:G,showViewedFiles:z}=a,{canSeeDeletedFilesFilter:K,canSeeOnlyManifestFilesFilter:Q,canSeeVendorFilesFilter:Z}=L,J=(0,I.q6)(),{clearAllFilters:Y}=(0,I.or)(),{canSeeCodeownersFilter:X}=L,ee=0;if(B){let e;X=B.isViewerOneOfMultipleCodeowners,E[5]!==B.ownershipByPath?(e=Object.values(B.ownershipByPath).filter(T),E[5]=B.ownershipByPath,E[6]=e):e=E[6],ee=e.length}let et=(0,v.useRef)((0,b.s)(e=>ei({filterText:e}),250)),en=(e,t)=>{let n=U;"selectFileExtension"===e?n=new Set([...U].filter(e=>e!==t.extension)):"unselectFileExtension"===e&&(n=new Set([...U,t.extension]));let i=Object.keys($).filter(e=>!n.has(e)),a=new URLSearchParams(F);a.delete("file-filters[]"),i.map(e=>{a.append("file-filters[]",e)}),ei({unselectedFileExtensions:n},a)};E[7]!==O?(s=(e,t)=>{t&&(0,C.MM)(t),O({...e})},E[7]=O,E[8]=s):s=E[8];let ei=s;E[9]!==Y||E[10]!==F?(r=()=>{let e=new URLSearchParams(F);e.delete("file-filters[]"),e.delete("owned-by[]"),e.delete("show-deleted-files"),e.delete("manifests"),e.delete("show-vendored-files"),e.delete("show-viewed-files"),(0,C.MM)(e),Y()},E[9]=Y,E[10]=F,E[11]=r):r=E[11];let ea=r;return E[12]!==et?(l=e=>et.current(e),E[12]=et,E[13]=l):l=E[13],E[14]!==X||E[15]!==ee||E[16]!==ei||E[17]!==F||E[18]!==q||E[19]!==P?(d=X&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(j.l.Divider,{}),(0,o.jsx)(j.l.Group,{selectionVariant:"single",children:(0,o.jsx)(j.l.Item,{selected:q,onSelect:()=>{if(!P)return;let e=new URLSearchParams(F);q?e.delete("owned-by[]",P):e.set("owned-by[]",P),ei({showOnlyOwnedFiles:!q},e)},children:(0,o.jsxs)(o.Fragment,{children:["Only files owned by you ",(0,o.jsx)(w.A,{children:ee})]})})})]}),E[14]=X,E[15]=ee,E[16]=ei,E[17]=F,E[18]=q,E[19]=P,E[20]=d):d=E[20],E[21]===Symbol.for("react.memo_cache_sentinel")?(u=(0,o.jsx)(j.l.Divider,{}),E[21]=u):u=E[21],E[22]!==Q||E[23]!==ei||E[24]!==F||E[25]!==H?(m=Q&&(0,o.jsx)(j.l.Item,{selected:H,onSelect:()=>{let e=new URLSearchParams(F);e.set("manifests",`${!H}`),ei({showOnlyManifestFiles:!H},e)},children:"Only manifest files"}),E[22]=Q,E[23]=ei,E[24]=F,E[25]=H,E[26]=m):m=E[26],E[27]!==K||E[28]!==ei||E[29]!==F||E[30]!==W?(p=K&&(0,o.jsx)(j.l.Item,{selected:W,onSelect:()=>{let e=new URLSearchParams(F);e.set("show-deleted-files",`${!W}`),ei({showDeletedFiles:!W},e)},children:"Deleted files"}),E[27]=K,E[28]=ei,E[29]=F,E[30]=W,E[31]=p):p=E[31],E[32]!==Z||E[33]!==ei||E[34]!==F||E[35]!==G?(h=Z&&(0,o.jsx)(j.l.Item,{selected:G,onSelect:()=>{let e=new URLSearchParams(F);e.set("show-vendored-files",`${!G}`),ei({showVendoredFiles:!G},e)},children:"Vendored files"}),E[32]=Z,E[33]=ei,E[34]=F,E[35]=G,E[36]=h):h=E[36],E[37]!==ei||E[38]!==F||E[39]!==z?(f=()=>{let e=new URLSearchParams(F);e.set("show-viewed-files",`${!z}`),ei({showViewedFiles:!z},e)},E[37]=ei,E[38]=F,E[39]=z,E[40]=f):f=E[40],E[41]!==z||E[42]!==f?(g=(0,o.jsx)(j.l.Item,{selected:z,onSelect:f,children:"Viewed files"}),E[41]=z,E[42]=f,E[43]=g):g=E[43],E[44]!==p||E[45]!==h||E[46]!==g||E[47]!==m?(y=(0,o.jsxs)(j.l.Group,{"aria-label":"More",selectionVariant:"multiple",children:[m,p,h,g]}),E[44]=p,E[45]=h,E[46]=g,E[47]=m,E[48]=y):y=E[48],E[49]!==y||E[50]!==d?(x=(0,o.jsxs)(o.Fragment,{children:[d,u,y]}),E[49]=y,E[50]=d,E[51]=x):x=E[51],E[52]!==$||E[53]!==D||E[54]!==V||E[55]!==J||E[56]!==ea||E[57]!==en||E[58]!==x||E[59]!==l||E[60]!==U?(k=(0,o.jsx)(_.kF,{filterSize:D,filterText:V,fileExtensions:$,unselectedFileExtensions:U,onFilterTextChange:l,onFilterChange:en,onClearAllFilters:ea,isFilteringActive:J,additionalFilterGroups:x,ref:M}),E[52]=$,E[53]=D,E[54]=V,E[55]=J,E[56]=ea,E[57]=en,E[58]=x,E[59]=l,E[60]=U,E[61]=k):k=E[61],k}:function({basePath:e,fileFilterMenuOptions:t,fileFilterState:n,filterSize:i,viewerLogin:a,setFileFilterState:s},r){let[l]=(0,N.o)(),{data:d}=(0,S.dG)({basePath:e}),c=(0,v.useRef)(null);(0,v.useImperativeHandle)(r,()=>({focus:()=>{c.current?.focus()}}));let{filterText:u,fileExtensions:m,unselectedFileExtensions:p,showOnlyOwnedFiles:h,showDeletedFiles:f,showOnlyManifestFiles:g,showVendoredFiles:y,showViewedFiles:x}={...n},{canSeeDeletedFilesFilter:k,canSeeOnlyManifestFilesFilter:T,canSeeVendorFilesFilter:E}=t,R=(0,I.q6)(),{clearAllFilters:L}=(0,I.or)(),{canSeeCodeownersFilter:A}=t,D=0;d&&(A=d.isViewerOneOfMultipleCodeowners,D=Object.values(d.ownershipByPath).filter(e=>e.isOwnedByViewer).length);let P=(0,v.useRef)((0,b.s)(e=>O({filterText:e}),250)),O=(0,v.useCallback)((e,t)=>{t&&(0,C.MM)(t),s({...e})},[s]),F=(0,v.useCallback)(()=>{let e=new URLSearchParams(l);e.delete("file-filters[]"),e.delete("owned-by[]"),e.delete("show-deleted-files"),e.delete("manifests"),e.delete("show-vendored-files"),e.delete("show-viewed-files"),(0,C.MM)(e),L()},[l,L]);return(0,o.jsx)(_.kF,{filterSize:i,filterText:u,fileExtensions:m,unselectedFileExtensions:p,onFilterTextChange:e=>P.current(e),onFilterChange:(e,t)=>{let n=p;"selectFileExtension"===e?n=new Set([...p].filter(e=>e!==t.extension)):"unselectFileExtension"===e&&(n=new Set([...p,t.extension]));let i=Object.keys(m).filter(e=>!n.has(e)),a=new URLSearchParams(l);a.delete("file-filters[]"),i.map(e=>{a.append("file-filters[]",e)}),O({unselectedFileExtensions:n},a)},onClearAllFilters:F,isFilteringActive:R,additionalFilterGroups:(0,o.jsxs)(o.Fragment,{children:[A&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(j.l.Divider,{}),(0,o.jsx)(j.l.Group,{selectionVariant:"single",children:(0,o.jsx)(j.l.Item,{selected:h,onSelect:()=>{if(!a)return;let e=new URLSearchParams(l);h?e.delete("owned-by[]",a):e.set("owned-by[]",a),O({showOnlyOwnedFiles:!h},e)},children:(0,o.jsxs)(o.Fragment,{children:["Only files owned by you ",(0,o.jsx)(w.A,{children:D})]})})})]}),(0,o.jsx)(j.l.Divider,{}),(0,o.jsxs)(j.l.Group,{"aria-label":"More",selectionVariant:"multiple",children:[T&&(0,o.jsx)(j.l.Item,{selected:g,onSelect:()=>{let e=new URLSearchParams(l);e.set("manifests",`${!g}`),O({showOnlyManifestFiles:!g},e)},children:"Only manifest files"}),k&&(0,o.jsx)(j.l.Item,{selected:f,onSelect:()=>{let e=new URLSearchParams(l);e.set("show-deleted-files",`${!f}`),O({showDeletedFiles:!f},e)},children:"Deleted files"}),E&&(0,o.jsx)(j.l.Item,{selected:y,onSelect:()=>{let e=new URLSearchParams(l);e.set("show-vendored-files",`${!y}`),O({showVendoredFiles:!y},e)},children:"Vendored files"}),(0,o.jsx)(j.l.Item,{selected:x,onSelect:()=>{let e=new URLSearchParams(l);e.set("show-viewed-files",`${!x}`),O({showViewedFiles:!x},e)},children:"Viewed files"})]})]}),ref:c})});try{k.displayName||(k.displayName="FileFilter")}catch{}function T(e){return e.isOwnedByViewer}var E=n(1946),R=n(75202),L=n(81960),A=n(69726),D=n(84268),P=n(11196);let O="GroupsList-module__GroupsListContainer--x6dMy",F="GroupsList-module__GroupsListItemsShiftLeft--PGMNM",B="GroupsList-module__GroupItem--vAFCe",M="GroupsList-module__GroupsListToggle--KO5Om";var V=n(34535),$=n(82130);let U=(0,d.Z6)()?function(){let e,t,n=(0,c.c)(5),{sendPullRequestAnalyticsEvent:i}=(0,$.q)(),a=(0,I.JA)();n[0]!==a||n[1]!==i?(e=e=>{let{isErrorState:t,unavailableReason:n,userPreferenceDisabled:s,hasGroups:r}=e,l=void 0!==t&&t,o=void 0!==s&&s,d=void 0!==r&&r;i("change_groups.presented","CHANGE_GROUPS_PRESENTED",{presented_and_visible:d&&!l&&!o,presented_and_not_visible:d&&!l&&o,has_groups:d,is_error_state:l,selected_group_id:a?.id,browser_width:"undefined"!=typeof window?window.innerWidth:0,...n&&{unavailable_reason:n},...a&&{selected_group_name:a.name}})},n[0]=a,n[1]=i,n[2]=e):e=n[2];let s=e;return n[3]!==s?(t={sendChangeGroupsPresentedEvent:s},n[3]=s,n[4]=t):t=n[4],t}:function(){let{sendPullRequestAnalyticsEvent:e}=(0,$.q)(),t=(0,I.JA)();return{sendChangeGroupsPresentedEvent:(0,v.useCallback)(({isErrorState:n=!1,unavailableReason:i,userPreferenceDisabled:a=!1,hasGroups:s=!1})=>{e("change_groups.presented","CHANGE_GROUPS_PRESENTED",{presented_and_visible:s&&!n&&!a,presented_and_not_visible:s&&!n&&a,has_groups:s,is_error_state:n,selected_group_id:t?.id,browser_width:"undefined"!=typeof window?window.innerWidth:0,...i&&{unavailable_reason:i},...t&&{selected_group_name:t.name}})},[e,t])}};var q=n(38621),W=n(26108),H=n(64451),G=n(86877),z=n(46720),K=n(4175),Q=n(21373);let Z=(0,d.Z6)()?function(e){let t,n,i,a,s=(0,c.c)(16),{onClose:r,onSubmit:l,returnFocusRef:d,feedbackOptions:u,precheckOther:m}=e,p=void 0!==m&&m,[h,f]=(0,v.useState)(!1);s[0]!==p?(t=p?["OTHER"]:[],s[0]=p,s[1]=t):t=s[1];let[y,x]=(0,v.useState)(t),[b,_]=(0,v.useState)("");s[2]!==y||s[3]!==l||s[4]!==b?(n=e=>{e.preventDefault(),f(!0),y.length&&l({type:"NEGATIVE",feedbackChoice:y,textResponse:b})},s[2]=y,s[3]=l,s[4]=b,s[5]=n):n=s[5];let j=n;return s[6]!==h||s[7]!==y||s[8]!==u||s[9]!==j||s[10]!==b?(i=()=>(0,o.jsxs)("form",{onSubmit:j,children:[(0,o.jsxs)(g.l.Body,{children:[(0,o.jsx)("div",{className:"mb-3",children:(0,o.jsxs)(H.A,{onChange:x,required:!0,children:[(0,o.jsx)(H.A.Label,{children:"Category"}),u.map(e=>(0,o.jsxs)(G.A,{id:`feedback_choice_${e.value}`,children:[(0,o.jsx)(z.A,{value:e.value,checked:y.includes(e.value)}),(0,o.jsx)(G.A.Label,{children:e.label})]},e.value)),h&&!y.length&&(0,o.jsx)(H.A.Validation,{variant:"error",children:"Please select a feedback category"})]})}),(0,o.jsxs)(G.A,{id:"text_response",children:[(0,o.jsx)(G.A.Label,{children:"How should we improve this response?"}),(0,o.jsx)(K.Ay,{block:!0,rows:2,wrap:"wrap",name:"text_response",value:b,resize:"vertical",onChange:e=>_(e.currentTarget.value)})]})]}),(0,o.jsx)(g.l.Footer,{children:(0,o.jsx)(Q.Q,{type:"submit",disabled:h&&(!b||!y),children:"Submit"})})]}),s[6]=h,s[7]=y,s[8]=u,s[9]=j,s[10]=b,s[11]=i):i=s[11],s[12]!==r||s[13]!==d||s[14]!==i?(a=(0,o.jsx)(g.l,{onClose:r,title:"Provide additional feedback",subtitle:"Please help us improve Groups by Copilot by sharing more details about these generated groups.",returnFocusRef:d,renderBody:i}),s[12]=r,s[13]=d,s[14]=i,s[15]=a):a=s[15],a}:function({onClose:e,onSubmit:t,returnFocusRef:n,feedbackOptions:i,precheckOther:a=!1}){let[s,r]=(0,v.useState)(!1),[l,d]=(0,v.useState)(a?["OTHER"]:[]),[c,u]=(0,v.useState)(""),m=e=>{e.preventDefault(),r(!0),l.length&&t({type:"NEGATIVE",feedbackChoice:l,textResponse:c})};return(0,o.jsx)(g.l,{onClose:e,title:"Provide additional feedback",subtitle:"Please help us improve Groups by Copilot by sharing more details about these generated groups.",returnFocusRef:n,renderBody:()=>(0,o.jsxs)("form",{onSubmit:m,children:[(0,o.jsxs)(g.l.Body,{children:[(0,o.jsx)("div",{className:"mb-3",children:(0,o.jsxs)(H.A,{onChange:d,required:!0,children:[(0,o.jsx)(H.A.Label,{children:"Category"}),i.map(e=>(0,o.jsxs)(G.A,{id:`feedback_choice_${e.value}`,children:[(0,o.jsx)(z.A,{value:e.value,checked:l.includes(e.value)}),(0,o.jsx)(G.A.Label,{children:e.label})]},e.value)),s&&!l.length&&(0,o.jsx)(H.A.Validation,{variant:"error",children:"Please select a feedback category"})]})}),(0,o.jsxs)(G.A,{id:"text_response",children:[(0,o.jsx)(G.A.Label,{children:"How should we improve this response?"}),(0,o.jsx)(K.Ay,{block:!0,rows:2,wrap:"wrap",name:"text_response",value:c,resize:"vertical",onChange:e=>u(e.currentTarget.value)})]})]}),(0,o.jsx)(g.l.Footer,{children:(0,o.jsx)(Q.Q,{type:"submit",disabled:s&&(!c||!l),children:"Submit"})})]})})};try{Z.displayName||(Z.displayName="NegativeFeedbackForm")}catch{}let J=(0,d.Z6)()?function(e){let t,n,i=(0,c.c)(5),{disabled:a,onSubmit:s}=e;return i[0]!==s?(t=()=>s({type:"POSITIVE"}),i[0]=s,i[1]=t):t=i[1],i[2]!==a||i[3]!==t?(n=(0,o.jsx)(W.K,{size:"small",variant:"invisible",disabled:a,icon:q.ThumbsupIcon,"aria-label":"Positive feedback",onClick:t}),i[2]=a,i[3]=t,i[4]=n):n=i[4],n}:function({disabled:e,onSubmit:t}){return(0,o.jsx)(W.K,{size:"small",variant:"invisible",disabled:e,icon:q.ThumbsupIcon,"aria-label":"Positive feedback",onClick:()=>t({type:"POSITIVE"})})},Y=(0,d.Z6)()?function(e){let t,n,i,a,s,r=(0,c.c)(12),{disabled:l,onSubmit:d,feedbackOptions:u}=e,[m,p]=(0,v.useState)(!1),h=(0,v.useRef)(null);r[0]!==d?(t=e=>{d(e),p(!1)},r[0]=d,r[1]=t):t=r[1];let f=t;return r[2]!==m||r[3]!==u||r[4]!==f?(n=m&&(0,o.jsx)(Z,{onClose:()=>p(!1),onSubmit:f,returnFocusRef:h,feedbackOptions:u}),r[2]=m,r[3]=u,r[4]=f,r[5]=n):n=r[5],r[6]===Symbol.for("react.memo_cache_sentinel")?(i=()=>p(!0),r[6]=i):i=r[6],r[7]!==l?(a=(0,o.jsx)(W.K,{ref:h,size:"small",variant:"invisible",disabled:l,icon:q.ThumbsdownIcon,"aria-label":"Negative feedback",onClick:i}),r[7]=l,r[8]=a):a=r[8],r[9]!==n||r[10]!==a?(s=(0,o.jsxs)(o.Fragment,{children:[n,a]}),r[9]=n,r[10]=a,r[11]=s):s=r[11],s}:function({disabled:e,onSubmit:t,feedbackOptions:n}){let[i,a]=(0,v.useState)(!1),s=(0,v.useRef)(null);return(0,o.jsxs)(o.Fragment,{children:[i&&(0,o.jsx)(Z,{onClose:()=>a(!1),onSubmit:e=>{t(e),a(!1)},returnFocusRef:s,feedbackOptions:n}),(0,o.jsx)(W.K,{ref:s,size:"small",variant:"invisible",disabled:e,icon:q.ThumbsdownIcon,"aria-label":"Negative feedback",onClick:()=>a(!0)})]})};try{J.displayName||(J.displayName="PositiveFeedbackButton")}catch{}try{Y.displayName||(Y.displayName="NegativeFeedbackButton")}catch{}var X=n(20622),ee=n(53885),et=n(94747),en=n(48845);let ei=(0,d.Z6)()?function(){let e,t=(0,c.c)(2),n=(0,ee.e)(X.uT.submitCopilotGroupsFeedback);return t[0]!==n?(e={mutationFn:async e=>{let{type:t,feedbackChoice:i,textResponse:a}=e,s={feedback:t};a&&(s.text_response=a),i&&i.length>0&&(s.feedback_choice=i);let r=await (0,en.q$)(n,{method:"POST",headers:{Accept:"application/json"},body:s}),l=await (0,en.hp)(r);return(0,en.R)(r,l),l}},t[0]=n,t[1]=e):e=t[1],(0,et.n)(e)}:function(){let e=(0,ee.e)(X.uT.submitCopilotGroupsFeedback);return(0,et.n)({mutationFn:async({type:t,feedbackChoice:n,textResponse:i})=>{let a={feedback:t};i&&(a.text_response=i),n&&n.length>0&&(a.feedback_choice=n);let s=await (0,en.q$)(e,{method:"POST",headers:{Accept:"application/json"},body:a}),r=await (0,en.hp)(s);return(0,en.R)(s,r),r}})},ea=(0,d.Z6)()?e=>{let t,n,i,a,s,r=(0,c.c)(15),{onNegativeFeedbackSubmit:l}=e,[d,u]=(0,v.useState)(),{mutate:m}=ei(),p=(0,I.xW)().changeGroupFeedbackOptions;r[0]!==m?(t=e=>{u(e.type),m(e)},r[0]=m,r[1]=t):t=r[1];let h=t;r[2]!==h||r[3]!==l?(n=e=>{l(),h(e)},r[2]=h,r[3]=l,r[4]=n):n=r[4];let f=n;return r[5]!==h||r[6]!==d?(i="NEGATIVE"!==d&&(0,o.jsx)(J,{disabled:!!d,onSubmit:h}),r[5]=h,r[6]=d,r[7]=i):i=r[7],r[8]!==p||r[9]!==f||r[10]!==d?(a="POSITIVE"!==d&&(0,o.jsx)(Y,{disabled:!!d,onSubmit:f,feedbackOptions:p}),r[8]=p,r[9]=f,r[10]=d,r[11]=a):a=r[11],r[12]!==i||r[13]!==a?(s=(0,o.jsxs)("div",{className:"d-flex",children:[i,a]}),r[12]=i,r[13]=a,r[14]=s):s=r[14],s}:({onNegativeFeedbackSubmit:e})=>{let[t,n]=(0,v.useState)(),{mutate:i}=ei(),a=(0,I.xW)().changeGroupFeedbackOptions,s=e=>{n(e.type),i(e)};return(0,o.jsxs)("div",{className:"d-flex",children:["NEGATIVE"!==t&&(0,o.jsx)(J,{disabled:!!t,onSubmit:s}),"POSITIVE"!==t&&(0,o.jsx)(Y,{disabled:!!t,onSubmit:t=>{e(),s(t)},feedbackOptions:a})]})},es=(0,d.Z6)()?e=>{let t,n,i=(0,c.c)(5),{className:a,onNegativeFeedbackSubmit:s}=e;return i[0]!==s?(t=(0,o.jsx)(R.t,{fallback:null,children:(0,o.jsx)(ea,{onNegativeFeedbackSubmit:s})}),i[0]=s,i[1]=t):t=i[1],i[2]!==a||i[3]!==t?(n=(0,o.jsx)("div",{className:a,children:t}),i[2]=a,i[3]=t,i[4]=n):n=i[4],n}:({className:e,onNegativeFeedbackSubmit:t})=>(0,o.jsx)("div",{className:e,children:(0,o.jsx)(R.t,{fallback:null,children:(0,o.jsx)(ea,{onNegativeFeedbackSubmit:t})})});try{ea.displayName||(ea.displayName="Feedback")}catch{}try{es.displayName||(es.displayName="GroupsFeedback")}catch{}var er=n(70263),el=n(40235),eo=n(97286),ed=n(96379);function ec(e){switch(e){case"CREATED":case"RUNNING":case"STARTED":case"WAITING":return!1;default:return!0}}function eu(e){switch(e){case"ABANDONED":case"FAILED":case"SKIPPED":return!0;default:return!1}}function em({baseSha:e,headSha:t,changeGroupsURL:n}){return[X.uT.changeGroups,n,`baseSha:${e}`,`headSha:${t}`]}let ep=(0,d.Z6)()?function(e,t){let n,i,a,s,r,l=(0,c.c)(15),o=(0,ee.e)(X.uT.changeGroups);l[0]!==t||l[1]!==o||l[2]!==e?(n=em({headSha:e,baseSha:t,changeGroupsURL:o}),l[0]=t,l[1]=o,l[2]=e,l[3]=n):n=l[3];let d=n,{updateChangeGroupGeneration:u}=(0,I.wL)(),m=(0,I.xW)();l[4]!==m?(i=()=>{let e=m.latestChangeGroupOrchestration?.state;if(e&&ec(e))return m},l[4]=m,l[5]=i):i=l[5];let p=i;return l[6]!==o||l[7]!==u?(a=async()=>{let e=await (0,ed.QJ)(o);if(!e.ok)throw Error(`HTTP ${e.status}`);let t=await e.json();return u(t),t},l[6]=o,l[7]=u,l[8]=a):a=l[8],l[9]!==p?(s=p(),l[9]=p,l[10]=s):s=l[10],l[11]!==d||l[12]!==a||l[13]!==s?(r={queryKey:d,queryFn:a,initialData:s,staleTime:1/0},l[11]=d,l[12]=a,l[13]=s,l[14]=r):r=l[14],(0,eo.I)(r)}:function(e,t){let n=(0,ee.e)(X.uT.changeGroups),i=em({headSha:e,baseSha:t,changeGroupsURL:n}),{updateChangeGroupGeneration:a}=(0,I.wL)(),s=(0,I.xW)(),r=(0,v.useCallback)(()=>{let e=s.latestChangeGroupOrchestration?.state;if(e&&ec(e))return s},[s]);return(0,eo.I)({queryKey:i,queryFn:async()=>{let e=await (0,ed.QJ)(n);if(!e.ok)throw Error(`HTTP ${e.status}`);let t=await e.json();return a(t),t},initialData:r(),staleTime:1/0})},eh=(0,d.Z6)()?function(e,t,n){let i,a,s=(0,c.c)(7),r=(0,er.A)(),{refetch:l}=ep(n,t);s[0]!==r||s[1]!==l?(i=(0,b.n)(()=>{r()&&l()},2e3),s[0]=r,s[1]=l,s[2]=i):i=s[2];let o=i;s[3]!==t||s[4]!==n||s[5]!==o?(a=e=>{e?.base_commit_oid===t&&e?.head_commit_oid===n&&window.setTimeout(()=>o(),e.wait||0)},s[3]=t,s[4]=n,s[5]=o,s[6]=a):a=s[6];let d=a;(0,el.x)(e,d)}:function(e,t,n){let i=(0,er.A)(),{refetch:a}=ep(n,t),s=(0,v.useMemo)(()=>(0,b.n)(()=>{i()&&a()},2e3),[i,a]),r=(0,v.useMemo)(()=>e=>{e?.base_commit_oid===t&&e?.head_commit_oid===n&&window.setTimeout(()=>s(),e.wait||0)},[t,n,s]);(0,el.x)(e,r)};function ef(e){switch(e){case"DIFF_TOO_LARGE":case"TOO_MANY_GROUPS":return"Groups are unavailable because the PR exceeds the size limit.";case"DIFF_TOO_SMALL":case"TOO_FEW_GROUPS":return"Grouping was skipped because all changes are closely related.";default:return"Copilot was unable to generate groups for this pull request."}}var eg=n(82075),ey=n(71315);let ex=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,p,h=(0,c.c)(46),{groups:f,activeGroupId:g,onSelectGroup:y,onClearActiveGroup:b,isLoadingState:_}=e,{sendPullRequestAnalyticsEvent:N}=(0,$.q)(),{sendChangeGroupsPresentedEvent:C}=U(),{fullDiff:S}=(0,I.L3)(),k=(0,I.a_)(),T=(0,I.TV)(),E=(0,I.r$)(),R=(0,v.useRef)(null),{error:D}=ep(S.headOid,S.baseOid),P=!!D&&!_;eh(k,S.baseOid,S.headOid),h[0]!==f.length||h[1]!==_||h[2]!==C||h[3]!==P||h[4]!==T?(t=()=>{_||(P||T?C({isErrorState:!0,unavailableReason:T||void 0}):f.length>0?C({isErrorState:!1,hasGroups:!0}):C({isErrorState:!1,hasGroups:!1}))},h[0]=f.length,h[1]=_,h[2]=C,h[3]=P,h[4]=T,h[5]=t):t=h[5],h[6]!==f||h[7]!==_||h[8]!==C||h[9]!==P||h[10]!==T?(n=[f,_,P,T,C],h[6]=f,h[7]=_,h[8]=C,h[9]=P,h[10]=T,h[11]=n):n=h[11],(0,v.useEffect)(t,n),h[12]!==b||h[13]!==N?(i=()=>{N("groups_list.clear_group","GROUPS_LIST_ITEM"),b()},h[12]=b,h[13]=N,h[14]=i):i=h[14];let B=i;h[15]!==B?(a=()=>{B(),requestAnimationFrame(()=>{R.current?.focus()})},h[15]=B,h[16]=a):a=h[16];let V=a,W=f.length>0,{isCollapsed:H,handleToggleCollapsed:G}=ew(E);h[17]!==G?(s=()=>{G(),requestAnimationFrame(()=>{R.current?.focus()})},h[17]=G,h[18]=s):s=h[18];let z=s;h[19]===Symbol.for("react.memo_cache_sentinel")?(r=(0,o.jsx)(L.A,{as:"h2",className:"h6",children:"Groups by Copilot"}),h[19]=r):r=h[19];let K=r;return h[20]===Symbol.for("react.memo_cache_sentinel")?(l=(0,x.$)(O),h[20]=l):l=h[20],h[21]!==f.length||h[22]!==G||h[23]!==W||h[24]!==H||h[25]!==_?(d=_?(0,o.jsxs)("div",{className:"d-flex flex-row flex-items-center fgColor-muted pt-2 px-2 pb-1",children:[K,(0,o.jsx)("span",{className:"ml-auto d-flex flex-items-center",children:(0,o.jsx)(A.A,{size:"small","aria-label":"Loading change groups"})})]}):(0,o.jsxs)("button",{className:(0,x.$)("d-flex flex-row flex-items-center fgColor-muted",M),onClick:G,"aria-expanded":!H,ref:R,children:[K,H&&W&&(0,o.jsx)(w.A,{scheme:"secondary",className:"mx-2",children:f.length}),H?(0,o.jsx)(q.ChevronDownIcon,{className:"ml-auto"}):(0,o.jsx)(q.ChevronUpIcon,{className:"ml-auto"})]}),h[21]=f.length,h[22]=G,h[23]=W,h[24]=H,h[25]=_,h[26]=d):d=h[26],h[27]!==g||h[28]!==f||h[29]!==B||h[30]!==V||h[31]!==W||h[32]!==H||h[33]!==y||h[34]!==z?(u=W&&(0,o.jsxs)("div",{className:(0,x.$)("mt-n2",F),children:[H&&!g?(0,o.jsx)("div",{className:"pb-2"}):(0,o.jsxs)(j.l,{children:[!H&&(0,o.jsx)(j.l.Item,{active:void 0===g,onSelect:B,children:"All files"},"All files"),f.toSorted(ev).map(e=>(0,o.jsx)(e_,{group:e,activeGroupId:g,onSelectGroup:y,isListCollapsed:H,onClickGroupWhenCollapsed:V},e.id)).filter(Boolean)]}),!H&&(0,o.jsx)(es,{className:"ml-2",onNegativeFeedbackSubmit:z})]}),h[27]=g,h[28]=f,h[29]=B,h[30]=V,h[31]=W,h[32]=H,h[33]=y,h[34]=z,h[35]=u):u=h[35],h[36]!==W||h[37]!==H||h[38]!==_||h[39]!==P||h[40]!==T?(m=!H&&!W&&!_&&(0,o.jsx)("div",{className:"px-2 pb-2 pt-0 f6 fgColor-muted",children:T?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("p",{className:"mb-0 d-inline",children:ef(T)})," ",(0,o.jsx)(eb,{})]}):P&&(0,o.jsx)("p",{className:"mb-0",children:"No groups created"})}),h[36]=W,h[37]=H,h[38]=_,h[39]=P,h[40]=T,h[41]=m):m=h[41],h[42]!==m||h[43]!==d||h[44]!==u?(p=(0,o.jsxs)("div",{className:l,children:[d,u,m]}),h[42]=m,h[43]=d,h[44]=u,h[45]=p):p=h[45],p}:function({groups:e,activeGroupId:t,onSelectGroup:n,onClearActiveGroup:i,isLoadingState:a}){let{sendPullRequestAnalyticsEvent:s}=(0,$.q)(),{sendChangeGroupsPresentedEvent:r}=U(),{fullDiff:l}=(0,I.L3)(),d=(0,I.a_)(),c=(0,I.TV)(),u=(0,I.r$)(),m=(0,v.useRef)(null),{error:p}=ep(l.headOid,l.baseOid),h=!!p&&!a;eh(d,l.baseOid,l.headOid),(0,v.useEffect)(()=>{a||(h||c?r({isErrorState:!0,unavailableReason:c||void 0}):e.length>0?r({isErrorState:!1,hasGroups:!0}):r({isErrorState:!1,hasGroups:!1}))},[e,a,h,c,r]);let f=()=>{s("groups_list.clear_group","GROUPS_LIST_ITEM"),i()},g=()=>{f(),requestAnimationFrame(()=>{m.current?.focus()})},y=e.length>0,{isCollapsed:b,handleToggleCollapsed:_}=ew(u),N=(0,o.jsx)(L.A,{as:"h2",className:"h6",children:"Groups by Copilot"});return(0,o.jsxs)("div",{className:(0,x.$)(O),children:[a?(0,o.jsxs)("div",{className:"d-flex flex-row flex-items-center fgColor-muted pt-2 px-2 pb-1",children:[N,(0,o.jsx)("span",{className:"ml-auto d-flex flex-items-center",children:(0,o.jsx)(A.A,{size:"small","aria-label":"Loading change groups"})})]}):(0,o.jsxs)("button",{className:(0,x.$)("d-flex flex-row flex-items-center fgColor-muted",M),onClick:_,"aria-expanded":!b,ref:m,children:[N,b&&y&&(0,o.jsx)(w.A,{scheme:"secondary",className:"mx-2",children:e.length}),b?(0,o.jsx)(q.ChevronDownIcon,{className:"ml-auto"}):(0,o.jsx)(q.ChevronUpIcon,{className:"ml-auto"})]}),y&&(0,o.jsxs)("div",{className:(0,x.$)("mt-n2",F),children:[b&&!t?(0,o.jsx)("div",{className:"pb-2"}):(0,o.jsxs)(j.l,{children:[!b&&(0,o.jsx)(j.l.Item,{active:void 0===t,onSelect:f,children:"All files"},"All files"),e.toSorted((e,t)=>t.priority-e.priority).map(e=>(0,o.jsx)(e_,{group:e,activeGroupId:t,onSelectGroup:n,isListCollapsed:b,onClickGroupWhenCollapsed:g},e.id)).filter(Boolean)]}),!b&&(0,o.jsx)(es,{className:"ml-2",onNegativeFeedbackSubmit:()=>{_(),requestAnimationFrame(()=>{m.current?.focus()})}})]}),!b&&!y&&!a&&(0,o.jsx)("div",{className:"px-2 pb-2 pt-0 f6 fgColor-muted",children:c?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("p",{className:"mb-0 d-inline",children:ef(c)})," ",(0,o.jsx)(eb,{})]}):h&&(0,o.jsx)("p",{className:"mb-0",children:"No groups created"})})]})};function ev(e,t){return t.priority-e.priority}let eb=(0,d.Z6)()?function(){let e,t,n,i,a=(0,c.c)(9),s=(0,v.useRef)(null),{mutate:r}=ei(),[l,d]=(0,v.useState)(!1),u=(0,I.xW)().changeGroupFeedbackOptions;a[0]!==r?(e=e=>{r(e),d(!1)},a[0]=r,a[1]=e):e=a[1];let m=e;return a[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.jsx)(D.A,{className:"d-inline",as:"button",ref:s,inline:!0,muted:!0,onClick:()=>d(!0),children:"Give feedback"}),a[2]=t):t=a[2],a[3]!==l||a[4]!==u||a[5]!==m?(n=l&&(0,o.jsx)(Z,{feedbackOptions:u,onSubmit:m,onClose:()=>d(!1),returnFocusRef:s,precheckOther:!0}),a[3]=l,a[4]=u,a[5]=m,a[6]=n):n=a[6],a[7]!==n?(i=(0,o.jsxs)(o.Fragment,{children:[t,n]}),a[7]=n,a[8]=i):i=a[8],i}:function(){let e=(0,v.useRef)(null),{mutate:t}=ei(),[n,i]=(0,v.useState)(!1),a=(0,I.xW)().changeGroupFeedbackOptions;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(D.A,{className:"d-inline",as:"button",ref:e,inline:!0,muted:!0,onClick:()=>i(!0),children:"Give feedback"}),n&&(0,o.jsx)(Z,{feedbackOptions:a,onSubmit:e=>{t(e),i(!1)},onClose:()=>i(!1),returnFocusRef:e,precheckOther:!0})]})},e_=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l=(0,c.c)(20),{group:d,activeGroupId:u,isListCollapsed:m,onSelectGroup:p,onClickGroupWhenCollapsed:h}=e,{sendPullRequestAnalyticsEvent:f}=(0,$.q)(),g=(0,v.useRef)(null);l[0]===Symbol.for("react.memo_cache_sentinel")?(t={focusRowRef:g,mouseRowRef:g},l[0]=t):t=l[0];let y=(0,V.Z)(t);l[1]!==d.id||l[2]!==p||l[3]!==f?(n=()=>{f("groups_list.select_group","GROUPS_LIST_ITEM"),p(d.id)},l[1]=d.id,l[2]=p,l[3]=f,l[4]=n):n=l[4];let b=n,_=u===d.id;if(m&&!_)return null;let w=`${d.name}-${m?"collapsed":"expanded"}`,N=m?void 0:b;l[5]===Symbol.for("react.memo_cache_sentinel")?(i=(0,x.$)(B,"PRIVATE_TreeView-item-content-text"),l[5]=i):i=l[5],l[6]!==d.name?(a=(0,o.jsx)("div",{className:i,children:d.name}),l[6]=d.name,l[7]=a):a=l[7],l[8]!==m||l[9]!==h?(s=m?(0,o.jsx)(j.l.TrailingAction,{as:"button",label:"Clear active group",icon:q.XIcon,onClick:e=>{e.preventDefault(),e.stopPropagation(),h()}}):null,l[8]=m,l[9]=h,l[10]=s):s=l[10],l[11]!==_||l[12]!==w||l[13]!==N||l[14]!==a||l[15]!==s?(r=(0,o.jsxs)(j.l.Item,{active:_,onSelect:N,ref:g,children:[a,s]},w),l[11]=_,l[12]=w,l[13]=N,l[14]=a,l[15]=s,l[16]=r):r=l[16];let C=r;if(y){let e;return l[17]!==d.name||l[18]!==C?(e=(0,o.jsx)(P.m,{text:d.name,direction:"ne",children:C}),l[17]=d.name,l[18]=C,l[19]=e):e=l[19],e}return C}:function({group:e,activeGroupId:t,isListCollapsed:n,onSelectGroup:i,onClickGroupWhenCollapsed:a}){let{sendPullRequestAnalyticsEvent:s}=(0,$.q)(),r=(0,v.useRef)(null),l=(0,V.Z)({focusRowRef:r,mouseRowRef:r}),d=t===e.id;if(n&&!d)return null;let c=(0,o.jsxs)(j.l.Item,{active:d,onSelect:n?void 0:()=>{s("groups_list.select_group","GROUPS_LIST_ITEM"),i(e.id)},ref:r,children:[(0,o.jsx)("div",{className:(0,x.$)(B,"PRIVATE_TreeView-item-content-text"),children:e.name}),n?(0,o.jsx)(j.l.TrailingAction,{as:"button",label:"Clear active group",icon:q.XIcon,onClick:e=>{e.preventDefault(),e.stopPropagation(),a()}}):null]},`${e.name}-${n?"collapsed":"expanded"}`);return l?(0,o.jsx)(P.m,{text:e.name,direction:"ne",children:c}):c};function ej(e){return`GroupsListIsCollapsed_${e}`}function ew(e){let t=(0,eg.A)("localStorage"),[n,i]=(0,v.useState)(!1),{sendPullRequestAnalyticsEvent:a}=(0,$.q)();return(0,v.useEffect)(()=>{let n=t.getItem(ej(e));null!==n&&i(JSON.parse(n))},[]),{isCollapsed:n,handleToggleCollapsed:()=>{let s=!n;ey.cg?.requestAnimationFrame(()=>{t.setItem(ej(e),JSON.stringify(s))}),i(()=>s),a("groups_list.toggle_collapse","GROUPS_LIST_TOGGLE",{is_collapsed:s})}}}try{ex.displayName||(ex.displayName="GroupsList")}catch{}try{eb.displayName||(eb.displayName="FeedbackButton")}catch{}try{e_.displayName||(e_.displayName="GroupItem")}catch{}let eN="PullRequestFileTree-module__sidebar--A_ZKx",eC="PullRequestFileTree-module__FileTreeScrollable--tm_BE";var eS=n(69599);let eI="pr-file-tree",ek=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,p,h,f=(0,c.c)(35),{className:g,fileFilter:y,filteredDiffs:b,onFileSelected:_,onSetFilterState:j,allowPullRequestGroups:w}=e,N=void 0!==w&&w,C=(0,I.iY)(),S=(0,I.YL)(),k=(0,I.ww)(),T=(0,I.Fl)(),L=(0,I.WA)(),{sendChangeGroupsPresentedEvent:A}=U();f[0]!==T?(t=T&&!ec(T.state),f[0]=T,f[1]=t):t=f[1];let D=t,P=(0,I.TV)();f[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,eS.G7)("hide_groups_list_for_few_groups"),f[2]=n):n=f[2];let O=n&&("TOO_FEW_GROUPS"===P||"DIFF_TOO_SMALL"===P||"NOT_GENERATED_YET"===P);return f[3]!==N||f[4]!==C.length||f[5]!==k||f[6]!==A||f[7]!==L?(i=()=>{N&&C.length>0&&!k&&!L&&A({isErrorState:!1,userPreferenceDisabled:!0,hasGroups:!0})},a=[N,k,L,A,C.length],f[3]=N,f[4]=C.length,f[5]=k,f[6]=A,f[7]=L,f[8]=i,f[9]=a):(i=f[8],a=f[9]),(0,v.useEffect)(i,a),f[10]!==S||f[11]!==N||f[12]!==C||f[13]!==k||f[14]!==D||f[15]!==j||f[16]!==O||f[17]!==L?(s=N&&!k&&L&&!O&&(0,o.jsx)(ex,{activeGroupId:S,groups:C,onClearActiveGroup:()=>{j({activeChangeGroupId:void 0})},onSelectGroup:e=>{j({activeChangeGroupId:e})},isLoadingState:D||!1}),f[10]=S,f[11]=N,f[12]=C,f[13]=k,f[14]=D,f[15]=j,f[16]=O,f[17]=L,f[18]=s):s=f[18],f[19]===Symbol.for("react.memo_cache_sentinel")?(r=(0,o.jsx)("span",{children:"File tree failed to load."}),f[19]=r):r=f[19],f[20]!==g?(l=(0,x.$)("d-flex flex-column min-height-0",g),f[20]=g,f[21]=l):l=f[21],f[22]!==y?(d=(0,o.jsx)("div",{className:"pb-3 pr-lg-3",children:y}),f[22]=y,f[23]=d):d=f[23],f[24]===Symbol.for("react.memo_cache_sentinel")?(u=(0,o.jsx)("h2",{className:"sr-only",children:"File tree"}),f[24]=u):u=f[24],f[25]!==b||f[26]!==_?(m=(0,o.jsxs)("div",{className:eC,children:[u,(0,o.jsx)(E.oj,{diffs:b,fileNodeRenderer:eT,sortByDiffOrder:!0,onSelect:_,className:"pr-lg-3"})]}),f[25]=b,f[26]=_,f[27]=m):m=f[27],f[28]!==m||f[29]!==l||f[30]!==d?(p=(0,o.jsx)(R.t,{fallback:r,children:(0,o.jsxs)("div",{className:l,id:eI,children:[d,m]})}),f[28]=m,f[29]=l,f[30]=d,f[31]=p):p=f[31],f[32]!==p||f[33]!==s?(h=(0,o.jsxs)("div",{className:"d-flex flex-column height-fit",children:[s,p]}),f[32]=p,f[33]=s,f[34]=h):h=f[34],h}:function({className:e,fileFilter:t,filteredDiffs:n,onFileSelected:i,onSetFilterState:a,allowPullRequestGroups:s=!1}){let r=(0,v.useCallback)(e=>(0,o.jsx)(eE,{...e},e.file.filePath),[]),l=(0,I.iY)(),d=(0,I.YL)(),c=(0,I.ww)(),u=(0,I.Fl)(),m=(0,I.WA)(),{sendChangeGroupsPresentedEvent:p}=U(),h=u&&!ec(u.state),f=(0,I.TV)(),g=(0,eS.G7)("hide_groups_list_for_few_groups");return(0,v.useEffect)(()=>{s&&l.length>0&&!c&&!m&&p({isErrorState:!1,userPreferenceDisabled:!0,hasGroups:!0})},[s,c,m,p,l.length]),(0,o.jsxs)("div",{className:"d-flex flex-column height-fit",children:[s&&!c&&m&&!(g&&("TOO_FEW_GROUPS"===f||"DIFF_TOO_SMALL"===f||"NOT_GENERATED_YET"===f))&&(0,o.jsx)(ex,{activeGroupId:d,groups:l,onClearActiveGroup:()=>{a({activeChangeGroupId:void 0})},onSelectGroup:e=>{a({activeChangeGroupId:e})},isLoadingState:h||!1}),(0,o.jsx)(R.t,{fallback:(0,o.jsx)("span",{children:"File tree failed to load."}),children:(0,o.jsxs)("div",{className:(0,x.$)("d-flex flex-column min-height-0",e),id:eI,children:[(0,o.jsx)("div",{className:"pb-3 pr-lg-3",children:t}),(0,o.jsxs)("div",{className:eC,children:[(0,o.jsx)("h2",{className:"sr-only",children:"File tree"}),(0,o.jsx)(E.oj,{diffs:n,fileNodeRenderer:r,sortByDiffOrder:!0,onSelect:i,className:"pr-lg-3"})]})]})})]})};function eT(e){return(0,o.jsx)(eE,{...e},e.file.filePath)}let eE=(0,v.memo)((0,d.Z6)()?function(e){let t,n,i,a,s,r,l=(0,c.c)(14);l[0]!==e?({file:t,...n}=e,l[0]=e,l[1]=t,l[2]=n):(t=l[1],n=l[2]),l[3]!==t.diff?(i=Object.values(t.diff?.markersMap??{}).flatMap(eL),l[3]=t.diff,l[4]=i):i=l[4];let d=i,u=(0,I.Qb)(d);l[5]!==u||l[6]!==t.diff?(a={...t.diff,totalCommentsCount:u},l[5]=u,l[6]=t.diff,l[7]=a):a=l[7],l[8]!==t||l[9]!==a?(s={...t,diff:a},l[8]=t,l[9]=a,l[10]=s):s=l[10];let m=s;return l[11]!==m||l[12]!==n?(r=(0,o.jsx)(E.ZH,{file:m,...n}),l[11]=m,l[12]=n,l[13]=r):r=l[13],r}:function({file:e,...t}){let n=(0,v.useMemo)(()=>Object.values(e.diff?.markersMap??{}).flatMap(e=>e.threads.map(e=>e.id)),[e.diff]),i=(0,I.Qb)(n),a=(0,v.useMemo)(()=>({...e,diff:{...e.diff,totalCommentsCount:i}}),[e,i]);return(0,o.jsx)(E.ZH,{file:a,...t})});try{ek.displayName||(ek.displayName="PullRequestFileTree")}catch{}try{eE.displayName||(eE.displayName="PullRequestFile")}catch{}function eR(e){return e.id}function eL(e){return e.threads.map(eR)}var eA=n(11680),eD=n(25407);let eP=(0,d.Z6)()?function(e){let t,n,i,a,s,r=(0,c.c)(17),{pageLimits:l,repository:d,urls:u}=e,m=l.filesLimitExceeded||l.reviewThreadsLimitExceeded||l.annotationsLimitExceeded;r[0]!==l.annotationsLimit||r[1]!==l.annotationsLimitExceeded||r[2]!==l.filesLimit||r[3]!==l.filesLimitExceeded||r[4]!==l.reviewThreadsLimit||r[5]!==l.reviewThreadsLimitExceeded?(t=()=>{let e=[];l.filesLimitExceeded&&e.push(`${l.filesLimit} files`),l.reviewThreadsLimitExceeded&&e.push(`${l.reviewThreadsLimit} comments`),l.annotationsLimitExceeded&&e.push(`${l.annotationsLimit} alerts`);let t="";return 1===e.length?t=`${e[0]}`:2===e.length?t=`${e[0]} and ${e[1]}`:3===e.length&&(t=`${e[0]}, ${e[1]}, and ${e[2]}`),"Only the first "+t+" are currently being shown."},r[0]=l.annotationsLimit,r[1]=l.annotationsLimitExceeded,r[2]=l.filesLimit,r[3]=l.filesLimitExceeded,r[4]=l.reviewThreadsLimit,r[5]=l.reviewThreadsLimitExceeded,r[6]=t):t=r[6];let p=t;r[7]!==d?(n=async function(){let e=new FormData;e.append("feature_name","prx_files"),await (0,ed.DI)((0,eD.ZD8)({repo:d}),{body:e,method:"POST"})},r[7]=d,r[8]=n):n=r[8];let h=n,f=p(),g=`${u.files}?new_files_changed=false`;r[9]!==h||r[10]!==g?(i=(0,o.jsx)(D.A,{inline:!0,href:g,onClick:h,rel:"noreferrer",children:"switch back"}),r[9]=h,r[10]=g,r[11]=i):i=r[11],r[12]!==f||r[13]!==i?(a=(0,o.jsxs)(o.Fragment,{children:[f," To see more,"," ",i," ","to the classic page."]}),r[12]=f,r[13]=i,r[14]=a):a=r[14];let y=a;return m?(r[15]!==y?(s=(0,o.jsx)(eA.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:y,className:"mb-3"}),r[15]=y,r[16]=s):s=r[16],s):null}:function({pageLimits:e,repository:t,urls:n}){let i,a,s=e.filesLimitExceeded||e.reviewThreadsLimitExceeded||e.annotationsLimitExceeded;async function r(){let e=new FormData;e.append("feature_name","prx_files"),await (0,ed.DI)((0,eD.ZD8)({repo:t}),{body:e,method:"POST"})}let l=(0,o.jsxs)(o.Fragment,{children:[(i=[],e.filesLimitExceeded&&i.push(`${e.filesLimit} files`),e.reviewThreadsLimitExceeded&&i.push(`${e.reviewThreadsLimit} comments`),e.annotationsLimitExceeded&&i.push(`${e.annotationsLimit} alerts`),a="",1===i.length?a=`${i[0]}`:2===i.length?a=`${i[0]} and ${i[1]}`:3===i.length&&(a=`${i[0]}, ${i[1]}, and ${i[2]}`),"Only the first "+a+" are currently being shown.")," To see more,"," ",(0,o.jsx)(D.A,{inline:!0,href:`${n.files}?new_files_changed=false`,onClick:r,rel:"noreferrer",children:"switch back"})," ","to the classic page."]});return s?(0,o.jsx)(eA.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:l,className:"mb-3"}):null};try{eP.displayName||(eP.displayName="PageLimitsBanner")}catch{}let eO="ViewedFileProgress-module__ProgressContainer--ZQ1e8",eF="ViewedFileProgress-module__FilesCountText--q4rKx",eB="ViewedFileProgress-module__ViewedText--vvFsM",eM=(0,d.Z6)()?e=>{let t,n,i,a,s=(0,c.c)(5),{progress:r}=e;s[0]===Symbol.for("react.memo_cache_sentinel")?(t={transform:"rotate(-90deg)"},s[0]=t):t=s[0],s[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,o.jsx)("circle",{cx:"50%",cy:"50%",fill:"transparent",r:"6",stroke:"var(--borderColor-default, var(--color-border-default))",strokeWidth:"2"}),s[1]=n):n=s[1];let l=38-38*r;return s[2]===Symbol.for("react.memo_cache_sentinel")?(i={transition:"stroke-dashoffset 0.35s"},s[2]=i):i=s[2],s[3]!==l?(a=(0,o.jsxs)("svg",{"data-circumference":"38",height:"16",role:"presentation",style:t,width:"16",children:[n,(0,o.jsx)("circle",{cx:"50%",cy:"50%",fill:"transparent",r:"6",stroke:"var(--fgColor-done, var(--color-done-fg))",strokeDasharray:38,strokeDashoffset:l,strokeLinecap:"round",strokeWidth:"2",style:i})]}),s[3]=l,s[4]=a):a=s[4],a}:({progress:e})=>(0,o.jsxs)("svg",{"data-circumference":"38",height:"16",role:"presentation",style:{transform:"rotate(-90deg)"},width:"16",children:[(0,o.jsx)("circle",{cx:"50%",cy:"50%",fill:"transparent",r:"6",stroke:"var(--borderColor-default, var(--color-border-default))",strokeWidth:"2"}),(0,o.jsx)("circle",{cx:"50%",cy:"50%",fill:"transparent",r:"6",stroke:"var(--fgColor-done, var(--color-done-fg))",strokeDasharray:38,strokeDashoffset:38-38*e,strokeLinecap:"round",strokeWidth:"2",style:{transition:"stroke-dashoffset 0.35s"}})]}),eV=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d=(0,c.c)(14),{totalFilesCount:u}=e,m=(0,I.gi)();if(0===u)return null;let p=(m??0)/u||0;return d[0]!==p?(t=(0,o.jsx)(eM,{progress:p}),d[0]=p,d[1]=t):t=d[1],d[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,x.$)("ml-1",eO),d[2]=n):n=d[2],d[3]!==m?(i=(0,o.jsx)("span",{className:eF,children:m}),d[3]=m,d[4]=i):i=d[4],d[5]!==u?(a=(0,o.jsx)("span",{className:eF,children:u}),d[5]=u,d[6]=a):a=d[6],d[7]===Symbol.for("react.memo_cache_sentinel")?(s=(0,o.jsx)("span",{className:eB,children:"viewed"}),d[7]=s):s=d[7],d[8]!==i||d[9]!==a?(r=(0,o.jsxs)("span",{className:n,children:[i," /"," ",a," ",s]}),d[8]=i,d[9]=a,d[10]=r):r=d[10],d[11]!==t||d[12]!==r?(l=(0,o.jsxs)("div",{className:"d-flex flex-row flex-items-center",children:[t,r]}),d[11]=t,d[12]=r,d[13]=l):l=d[13],l}:function({totalFilesCount:e}){let t=(0,I.gi)();return 0===e?null:(0,o.jsxs)("div",{className:"d-flex flex-row flex-items-center",children:[(0,o.jsx)(eM,{progress:(t??0)/e||0}),(0,o.jsxs)("span",{className:(0,x.$)("ml-1",eO),children:[(0,o.jsx)("span",{className:eF,children:t})," /"," ",(0,o.jsx)("span",{className:eF,children:e})," ",(0,o.jsx)("span",{className:eB,children:"viewed"})]})]})};try{eM.displayName||(eM.displayName="ProgressIcon")}catch{}try{eV.displayName||(eV.displayName="ViewedFileProgress")}catch{}function e$(e){let t=document.querySelector('#__primerPortalRoot__ div[role="dialog"]'),n=document.querySelector(`#${e} div[role="dialog"]`);(t||n)&&document.dispatchEvent(new KeyboardEvent("keydown",{key:"Escape",code:"Escape",ctrlKey:!0}))}var eU=n(99511),eq=n(94236),eW=n(77430);function eH(e,t){return new Set([...e.filter(e=>{let{thread:n,previewInfo:i}=e;return function(e,t){let{filterText:n,showResolvedThreads:i}=t;if(!i&&e.isResolved||!t.showOutdatedThreads&&e.isOutdated)return!1;if(n){let t=n.toLowerCase();if(!e.authorLogin.toLowerCase().includes(t)&&!e.body.toLowerCase().includes(t)&&!e.path.toLowerCase().includes(t))return!1}return!t.selectedAuthor||e.authorLogin===t.selectedAuthor}({authorLogin:i.firstComment?.author?.login??"",body:i.firstComment?.body??"",id:i.threadId,isResolved:n?.isResolved??!1,isOutdated:n?.isOutdated??!1,path:i.path},t)}).map(e=>e.previewInfo.threadId??"")])}let eG={filterText:"",showResolvedThreads:!0,showOutdatedThreads:!0},ez=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,p,h,f,g,y,v=(0,c.c)(42),{authorList:b,className:_,filterState:w,onFilterStateChange:N}=e;v[0]!==w||v[1]!==N?(t=e=>{N({...w,filterText:e})},v[0]=w,v[1]=N,v[2]=t):t=v[2];let C=t;v[3]!==w||v[4]!==N?(n=()=>{N({...w,showResolvedThreads:!w.showResolvedThreads})},v[3]=w,v[4]=N,v[5]=n):n=v[5];let S=n;v[6]!==w||v[7]!==N?(i=()=>{N({...w,showOutdatedThreads:!w.showOutdatedThreads})},v[6]=w,v[7]=N,v[8]=i):i=v[8];let I=i;v[9]!==w||v[10]!==N?(a=e=>{if(w.selectedAuthor===e)return N({...w,selectedAuthor:void 0});N({...w,selectedAuthor:e})},v[9]=w,v[10]=N,v[11]=a):a=v[11];let k=a;return v[12]!==_?(s=(0,x.$)("d-flex flex-row gap-2 flex-nowrap",_),v[12]=_,v[13]=s):s=v[13],v[14]!==C?(r=e=>C(e.target.value),v[14]=C,v[15]=r):r=v[15],v[16]!==w.filterText||v[17]!==r?(l=(0,o.jsx)(eU.A,{block:!0,"aria-label":"Filter comments",leadingVisual:q.SearchIcon,placeholder:"Filter comments",value:w.filterText,onChange:r}),v[16]=w.filterText,v[17]=r,v[18]=l):l=v[18],v[19]===Symbol.for("react.memo_cache_sentinel")?(d=(0,o.jsx)(eq.W.Anchor,{children:(0,o.jsx)(Q.Q,{"aria-label":"Additional comment filters",className:"flex-shink-0",leadingVisual:q.FilterIcon,trailingAction:q.TriangleDownIcon,children:"Filter"})}),v[19]=d):d=v[19],v[20]!==S?(u=()=>S(),v[20]=S,v[21]=u):u=v[21],v[22]!==w.showResolvedThreads||v[23]!==u?(m=(0,o.jsx)(j.l.Item,{selected:w.showResolvedThreads,onSelect:u,children:"Show resolved comments"}),v[22]=w.showResolvedThreads,v[23]=u,v[24]=m):m=v[24],v[25]!==I?(p=()=>I(),v[25]=I,v[26]=p):p=v[26],v[27]!==w.showOutdatedThreads||v[28]!==p?(h=(0,o.jsx)(j.l.Item,{selected:w.showOutdatedThreads,onSelect:p,children:"Show outdated comments"}),v[27]=w.showOutdatedThreads,v[28]=p,v[29]=h):h=v[29],v[30]!==b||v[31]!==w.selectedAuthor||v[32]!==k?(f=b.length>1&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(j.l.Divider,{}),(0,o.jsxs)(j.l.Group,{children:[(0,o.jsx)(j.l.GroupHeading,{children:"Filter by"}),b.map(e=>(0,o.jsxs)(j.l.Item,{selected:w.selectedAuthor===e.login,onSelect:()=>k(e.login),children:[(0,o.jsx)(j.l.LeadingVisual,{children:(0,o.jsx)(eW.r,{src:e.avatarUrl})}),e.login]},e.login))]})]}),v[30]=b,v[31]=w.selectedAuthor,v[32]=k,v[33]=f):f=v[33],v[34]!==m||v[35]!==h||v[36]!==f?(g=(0,o.jsxs)(eq.W,{children:[d,(0,o.jsx)(eq.W.Overlay,{width:"small",children:(0,o.jsxs)(j.l,{selectionVariant:"single",children:[m,h,f]})})]}),v[34]=m,v[35]=h,v[36]=f,v[37]=g):g=v[37],v[38]!==g||v[39]!==s||v[40]!==l?(y=(0,o.jsxs)("div",{className:s,children:[l,g]}),v[38]=g,v[39]=s,v[40]=l,v[41]=y):y=v[41],y}:function({authorList:e,className:t,filterState:n,onFilterStateChange:i}){return(0,o.jsxs)("div",{className:(0,x.$)("d-flex flex-row gap-2 flex-nowrap",t),children:[(0,o.jsx)(eU.A,{block:!0,"aria-label":"Filter comments",leadingVisual:q.SearchIcon,placeholder:"Filter comments",value:n.filterText,onChange:e=>{var t;return t=e.target.value,void i({...n,filterText:t})}}),(0,o.jsxs)(eq.W,{children:[(0,o.jsx)(eq.W.Anchor,{children:(0,o.jsx)(Q.Q,{"aria-label":"Additional comment filters",className:"flex-shink-0",leadingVisual:q.FilterIcon,trailingAction:q.TriangleDownIcon,children:"Filter"})}),(0,o.jsx)(eq.W.Overlay,{width:"small",children:(0,o.jsxs)(j.l,{selectionVariant:"single",children:[(0,o.jsx)(j.l.Item,{selected:n.showResolvedThreads,onSelect:()=>void i({...n,showResolvedThreads:!n.showResolvedThreads}),children:"Show resolved comments"}),(0,o.jsx)(j.l.Item,{selected:n.showOutdatedThreads,onSelect:()=>void i({...n,showOutdatedThreads:!n.showOutdatedThreads}),children:"Show outdated comments"}),e.length>1&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(j.l.Divider,{}),(0,o.jsxs)(j.l.Group,{children:[(0,o.jsx)(j.l.GroupHeading,{children:"Filter by"}),e.map(e=>(0,o.jsxs)(j.l.Item,{selected:n.selectedAuthor===e.login,onSelect:()=>(e=>{if(n.selectedAuthor===e)return i({...n,selectedAuthor:void 0});i({...n,selectedAuthor:e})})(e.login),children:[(0,o.jsx)(j.l.LeadingVisual,{children:(0,o.jsx)(eW.r,{src:e.avatarUrl})}),e.login]},e.login))]})]})]})})]})]})};try{ez.displayName||(ez.displayName="CommentsFilter")}catch{}var eK=n(61219),eQ=n(98091),eZ=n(58615),eJ=n(72511),eY=n(26607);let eX="ConversationHeader-module__file-name-overflow--Ymb0e",e0=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,p,h,f,g,y,b=(0,c.c)(47),{firstCommentId:_,isCollapsed:j,isOutdated:w,isResolved:N,line:C,onToggleCollapsed:S,onNavigateToDiffComment:I,path:k,rightSideContent:T,threadId:E,headingLevel:R}=e,A=void 0===R?"h3":R;b[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,eg.A)("localStorage"),b[0]=t):t=b[0];let O=t,[F,B]=(0,v.useState)(j);b[1]!==E?(n=()=>{let e=localStorage.getItem(`reviewThreadIsCollapsed_${E}`);null!==e&&B(JSON.parse(e))},b[1]=E,b[2]=n):n=b[2],b[3]!==F||b[4]!==E?(i=[F,E],b[3]=F,b[4]=E,b[5]=i):i=b[5],(0,v.useEffect)(n,i),b[6]!==F||b[7]!==S||b[8]!==E?(a=()=>{O.setItem(`reviewThreadIsCollapsed_${E}`,JSON.stringify(!F)),B(e1),S()},b[6]=F,b[7]=S,b[8]=E,b[9]=a):a=b[9];let M=a,V=F&&"rounded-2",$=F&&"border-bottom-0";b[10]!==V||b[11]!==$?(s=(0,x.$)("d-flex flex-row flex-items-center px-2 py-1 bgColor-muted rounded-top-2 border-bottom",V,$),b[10]=V,b[11]=$,b[12]=s):s=b[12];let U=F?"Open review comment":"Close review comment",H=F?q.ChevronRightIcon:q.ChevronDownIcon;b[13]!==M||b[14]!==H||b[15]!==U?(r=(0,o.jsx)(W.K,{"aria-label":U,icon:H,size:"small",variant:"invisible",onClick:M}),b[13]=M,b[14]=H,b[15]=U,b[16]=r):r=b[16],b[17]===Symbol.for("react.memo_cache_sentinel")?(l=(0,x.$)(eX,"d-inline text-mono no-wrap overflow-hidden direction-rtl fgColor-default"),b[17]=l):l=b[17];let G=`#r${_}`;b[18]!==I||b[19]!==k||b[20]!==G?(d=(0,o.jsxs)(D.A,{className:l,onClick:I,href:G,muted:!0,children:["\u200E",k,"\u200E"]}),b[18]=I,b[19]=k,b[20]=G,b[21]=d):d=b[21],b[22]!==k||b[23]!==d?(u=(0,o.jsx)(P.m,{direction:"n",text:k,type:"label",children:d}),b[22]=k,b[23]=d,b[24]=u):u=b[24],b[25]!==C?(m=!!C&&(0,o.jsxs)("span",{className:"f6 fgColor-muted text-normal no-wrap ml-2",children:["Line ",C]}),b[25]=C,b[26]=m):m=b[26],b[27]!==A||b[28]!==u||b[29]!==m?(p=(0,o.jsxs)(L.A,{as:A,className:"d-flex flex-items-center flex-1 min-width-0 mr-2 ml-1 f6 text-semibold",children:[u,m]}),b[27]=A,b[28]=u,b[29]=m,b[30]=p):p=b[30],b[31]!==N?(h=N&&(0,o.jsx)(eY.A,{size:"large",className:"mx-1",variant:"secondary",children:"Resolved"}),b[31]=N,b[32]=h):h=b[32],b[33]!==w||b[34]!==N?(f=w&&!N&&(0,o.jsx)(eY.A,{size:"large",className:"mx-1",variant:"attention",children:"Outdated"}),b[33]=w,b[34]=N,b[35]=f):f=b[35];let z=`#r${_}`;return b[36]!==I||b[37]!==z?(g=(0,o.jsx)(W.K,{as:"a","aria-label":"Jump to the comment in the diff",tooltipDirection:"se",icon:q.FileSymlinkFileIcon,variant:"invisible",href:z,onClick:I}),b[36]=I,b[37]=z,b[38]=g):g=b[38],b[39]!==T||b[40]!==r||b[41]!==p||b[42]!==h||b[43]!==f||b[44]!==g||b[45]!==s?(y=(0,o.jsxs)("div",{className:s,children:[r,p,h,f,g,T]}),b[39]=T,b[40]=r,b[41]=p,b[42]=h,b[43]=f,b[44]=g,b[45]=s,b[46]=y):y=b[46],y}:function({firstCommentId:e,isCollapsed:t,isOutdated:n,isResolved:i,line:a,onToggleCollapsed:s,onNavigateToDiffComment:r,path:l,rightSideContent:d,threadId:c,headingLevel:u="h3"}){let m=(0,eg.A)("localStorage"),[p,h]=(0,v.useState)(t);return(0,v.useEffect)(()=>{let e=localStorage.getItem(`reviewThreadIsCollapsed_${c}`);null!==e&&h(JSON.parse(e))},[p,c]),(0,o.jsxs)("div",{className:(0,x.$)("d-flex flex-row flex-items-center px-2 py-1 bgColor-muted rounded-top-2 border-bottom",p&&"rounded-2",p&&"border-bottom-0"),children:[(0,o.jsx)(W.K,{"aria-label":p?"Open review comment":"Close review comment",icon:p?q.ChevronRightIcon:q.ChevronDownIcon,size:"small",variant:"invisible",onClick:()=>{m.setItem(`reviewThreadIsCollapsed_${c}`,JSON.stringify(!p)),h(e=>!e),s()}}),(0,o.jsxs)(L.A,{as:u,className:"d-flex flex-items-center flex-1 min-width-0 mr-2 ml-1 f6 text-semibold",children:[(0,o.jsx)(P.m,{direction:"n",text:l,type:"label",children:(0,o.jsxs)(D.A,{className:(0,x.$)(eX,"d-inline text-mono no-wrap overflow-hidden direction-rtl fgColor-default"),onClick:r,href:`#r${e}`,muted:!0,children:["\u200E",l,"\u200E"]})}),!!a&&(0,o.jsxs)("span",{className:"f6 fgColor-muted text-normal no-wrap ml-2",children:["Line ",a]})]}),i&&(0,o.jsx)(eY.A,{size:"large",className:"mx-1",variant:"secondary",children:"Resolved"}),n&&!i&&(0,o.jsx)(eY.A,{size:"large",className:"mx-1",variant:"attention",children:"Outdated"}),(0,o.jsx)(W.K,{as:"a","aria-label":"Jump to the comment in the diff",tooltipDirection:"se",icon:q.FileSymlinkFileIcon,variant:"invisible",href:`#r${e}`,onClick:r}),d]})};function e1(e){return!e}try{e0.displayName||(e0.displayName="ConversationHeader")}catch{}let e2="ThreadHeader-module__ThreadHeaderIconButton--RGjVM";var e3=n(97695),e4=n(39698),e5=n(21067);let e6=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d=(0,c.c)(35),{firstCommentId:u,isCollapsed:m,onToggleCollapsed:p,onNavigateToDiffComment:h,threadPreview:f,headingLevel:g,isResolved:y,isOutdated:x,lineKey:b}=e,{sendPullRequestAnalyticsEvent:_}=(0,$.q)(),[j,w]=(0,v.useState)(void 0),N=f.previewInfo,{line:C}=N;d[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,e5.M3)(),d[0]=t):t=d[0];let S=t,{mutate:I}=(0,e3.H)(N.path,b);d[1]!==m||d[2]!==y||d[3]!==p||d[4]!==N.threadId||d[5]!==I?(n=()=>{y||I({threadId:N.threadId},{onError:()=>w("Failed to resolve thread"),onSuccess:()=>{m||p()}})},d[1]=m,d[2]=y,d[3]=p,d[4]=N.threadId,d[5]=I,d[6]=n):n=d[6];let k=n,{mutate:T}=(0,e4.i)(N.path,b);d[7]!==m||d[8]!==y||d[9]!==p||d[10]!==_||d[11]!==f||d[12]!==T?(i=async()=>{!f||y&&(T({threadId:f.previewInfo.threadId},{onError:()=>w("Failed to unresolve thread"),onSuccess:()=>{m&&p()}}),_("comments.unresolve_thread","RESOLVE_CONVERSATION_BUTTON"))},d[7]=m,d[8]=y,d[9]=p,d[10]=_,d[11]=f,d[12]=T,d[13]=i):i=d[13];let E=i;return d[14]!==k||d[15]!==E||d[16]!==y?(a=S?(0,o.jsx)(W.K,{"aria-label":y?"Unresolve conversation":"Resolve conversation",tooltipDirection:"sw",icon:y?q.CheckCircleFillIcon:q.CheckCircleIcon,"data-thread-resolved":y,className:e2,variant:"invisible",onClick:y?E:k}):null,d[14]=k,d[15]=E,d[16]=y,d[17]=a):a=d[17],d[18]!==u||d[19]!==g||d[20]!==m||d[21]!==x||d[22]!==y||d[23]!==C||d[24]!==h||d[25]!==p||d[26]!==N.path||d[27]!==N.threadId||d[28]!==a?(s=(0,o.jsx)(e0,{firstCommentId:u,isCollapsed:m,isOutdated:x,isResolved:y,line:C,path:N.path,rightSideContent:a,onNavigateToDiffComment:h,onToggleCollapsed:p,threadId:N.threadId,headingLevel:g}),d[18]=u,d[19]=g,d[20]=m,d[21]=x,d[22]=y,d[23]=C,d[24]=h,d[25]=p,d[26]=N.path,d[27]=N.threadId,d[28]=a,d[29]=s):s=d[29],d[30]!==j?(r=j&&(0,o.jsxs)(eJ.A,{variant:"danger",className:"m-2",children:[(0,o.jsx)(q.StopIcon,{className:"mr-2"}),j]}),d[30]=j,d[31]=r):r=d[31],d[32]!==s||d[33]!==r?(l=(0,o.jsxs)(o.Fragment,{children:[s,r]}),d[32]=s,d[33]=r,d[34]=l):l=d[34],l}:function({firstCommentId:e,isCollapsed:t,onToggleCollapsed:n,onNavigateToDiffComment:i,threadPreview:a,headingLevel:s,isResolved:r,isOutdated:l,lineKey:d}){let{sendPullRequestAnalyticsEvent:c}=(0,$.q)(),[u,m]=(0,v.useState)(void 0),p=a.previewInfo,{line:h}=p,f=(0,e5.M3)(),{mutate:g}=(0,e3.H)(p.path,d),{mutate:y}=(0,e4.i)(p.path,d),x=async()=>{!a||r&&(y({threadId:a.previewInfo.threadId},{onError:()=>m("Failed to unresolve thread"),onSuccess:()=>{t&&n()}}),c("comments.unresolve_thread","RESOLVE_CONVERSATION_BUTTON"))};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e0,{firstCommentId:e,isCollapsed:t,isOutdated:l,isResolved:r,line:h,path:p.path,rightSideContent:f?(0,o.jsx)(W.K,{"aria-label":r?"Unresolve conversation":"Resolve conversation",tooltipDirection:"sw",icon:r?q.CheckCircleFillIcon:q.CheckCircleIcon,"data-thread-resolved":r,className:e2,variant:"invisible",onClick:r?x:()=>{r||g({threadId:p.threadId},{onError:()=>m("Failed to resolve thread"),onSuccess:()=>{t||n()}})}}):null,onNavigateToDiffComment:i,onToggleCollapsed:n,threadId:p.threadId,headingLevel:s}),u&&(0,o.jsxs)(eJ.A,{variant:"danger",className:"m-2",children:[(0,o.jsx)(q.StopIcon,{className:"mr-2"}),u]})]})};try{e6.displayName||(e6.displayName="ThreadHeader")}catch{}var e7=n(24494);let e9=(0,d.Z6)()?function(e){let t,n,i=(0,c.c)(4),{commentAuthors:a}=e;return a.length<1?null:(i[0]!==a?(t=a.map(e8),i[0]=a,i[1]=t):t=i[1],i[2]!==t?(n=(0,o.jsx)(e7.A,{children:t}),i[2]=t,i[3]=n):n=i[3],n)}:function({commentAuthors:e}){return e.length<1?null:(0,o.jsx)(e7.A,{children:e.map(({login:e,avatarUrl:t})=>(0,o.jsx)(eW.r,{alt:e,size:18,src:t},e))})};function e8(e){let{login:t,avatarUrl:n}=e;return(0,o.jsx)(eW.r,{alt:t,size:18,src:n},t)}try{e9.displayName||(e9.displayName="PreviewAuthors")}catch{}var te=n(36729),tt=n(73017);let tn=(0,v.memo)((0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d=(0,c.c)(29),{commentPreview:u,onNavigateToDiffComment:m,tabSize:p}=e,[h,f]=(0,v.useState)(!1),g=u.commentId;d[0]!==g||d[1]!==m?(t=()=>{window.location.hash=`#r${g}`,m(g)},d[0]=g,d[1]=m,d[2]=t):t=d[2];let y=t;d[3]!==u.commentsData?(n=u.commentsData??{comments:[]},d[3]=u.commentsData,d[4]=n):n=d[4],d[5]!==g||d[6]!==n?(i=ti(g,n),d[5]=g,d[6]=n,d[7]=i):i=d[7];let x=i,b=u.threadPreviewComments.length,_=`${b} previous ${1===b?"comment":"comments"}`,j=u.isOutdated||!1,w=u.isResolved||!1,N=u.line,C=u.path;d[8]===Symbol.for("react.memo_cache_sentinel")?(a=()=>f(ts),d[8]=a):a=d[8];let S=u.threadId,I=parseInt(u.commentId);return d[9]!==u.line||d[10]!==u.path||d[11]!==u.threadId||d[12]!==h||d[13]!==y||d[14]!==I||d[15]!==j||d[16]!==w?(s=(0,o.jsx)(e0,{isCollapsed:h,isOutdated:j,isResolved:w,line:N,path:C,onNavigateToDiffComment:y,onToggleCollapsed:a,threadId:S,firstCommentId:I}),d[9]=u.line,d[10]=u.path,d[11]=u.threadId,d[12]=h,d[13]=y,d[14]=I,d[15]=j,d[16]=w,d[17]=s):s=d[17],d[18]!==x||d[19]!==u||d[20]!==h||d[21]!==y||d[22]!==b||d[23]!==_||d[24]!==p?(r=!h&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"border-bottom borderColor-muted overflow-x-auto",children:(0,o.jsx)(eQ.i,{diffTableClassName:"border-0",diffLines:u.subject?.diffLines,className:"m-0 border-0",tabSize:p||4})}),b>0&&(0,o.jsx)("div",{className:"my-2 px-2",children:(0,o.jsx)(Q.Q,{"aria-label":"View comment in diff",size:"small",trailingVisual:q.ChevronRightIcon,variant:"invisible",onClick:y,children:(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-start flex-items-center gap-2",children:[(0,o.jsx)("span",{children:_}),(0,o.jsx)(e9,{commentAuthors:x})]})})}),(0,o.jsx)(tt.vb,{className:"markdown-body",html:ta(u),sx:{p:3,fontSize:1}})]}),d[18]=x,d[19]=u,d[20]=h,d[21]=y,d[22]=b,d[23]=_,d[24]=p,d[25]=r):r=d[25],d[26]!==s||d[27]!==r?(l=(0,o.jsxs)("div",{className:"border rounded-2 d-flex flex-column",children:[s,r]}),d[26]=s,d[27]=r,d[28]=l):l=d[28],l}:function({commentPreview:e,onNavigateToDiffComment:t,tabSize:n}){let[i,a]=(0,v.useState)(!1),s=e.commentId,r=(0,v.useCallback)(()=>{window.location.hash=`#r${s}`,t(s)},[s,t]),l=ti(s,e.commentsData??{comments:[]}),d=e.threadPreviewComments.length,c=`${d} previous ${1===d?"comment":"comments"}`;return(0,o.jsxs)("div",{className:"border rounded-2 d-flex flex-column",children:[(0,o.jsx)(e0,{isCollapsed:i,isOutdated:e.isOutdated||!1,isResolved:e.isResolved||!1,line:e.line,path:e.path,onNavigateToDiffComment:r,onToggleCollapsed:()=>a(e=>!e),threadId:e.threadId,firstCommentId:parseInt(e.commentId)}),!i&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"border-bottom borderColor-muted overflow-x-auto",children:(0,o.jsx)(eQ.i,{diffTableClassName:"border-0",diffLines:e.subject?.diffLines,className:"m-0 border-0",tabSize:n||4})}),d>0&&(0,o.jsx)("div",{className:"my-2 px-2",children:(0,o.jsx)(Q.Q,{"aria-label":"View comment in diff",size:"small",trailingVisual:q.ChevronRightIcon,variant:"invisible",onClick:r,children:(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-start flex-items-center gap-2",children:[(0,o.jsx)("span",{children:c}),(0,o.jsx)(e9,{commentAuthors:l})]})})}),(0,o.jsx)(tt.vb,{className:"markdown-body",html:ta(e),sx:{p:3,fontSize:1}})]})]})});function ti(e,t){let n=new Set;return(t?.comments??[]).reduce((t,i)=>{if(!i||i.id===e)return t;let a=i.author?.login??"",s=i.author?.avatarUrl??"",r=i.author?.id??"",l=i.author?.url??"";return n.has(a)||(t.push({avatarUrl:s,login:a,id:r,url:l}),n.add(a)),t},[])}function ta(e){let t=(e.commentsData?.comments??[]).find(t=>t&&String(t.databaseId)===e.commentId);return t?.bodyHTML??""}try{tn.displayName||(tn.displayName="PendingCommentPreview")}catch{}function ts(e){return!e}function tr(e){return`panel-thread-collapsed-state-${e}`}let tl=(0,v.memo)((0,d.Z6)()?function(e){let t,n,i,a,s,r=(0,c.c)(33),{onNavigateToDiffComment:l,tabSize:d,threadPreview:u,headingLevel:m}=e,{previewInfo:p}=u,{threadId:h,firstComment:f}=p,g=f?.id,y=p.path,x=(0,I.j5)(),{navigateToSelectedComment:v}=(0,I.Lh)(),b=(0,I.SM)(),_=p.subject?.endDiffSide==="RIGHT"?"R":"L",j=p.subject?.originalEndLine?`${_}${p.subject.originalEndLine}`:te.zW,w=b(Number(p.threadId),p.path,j),N=w?.isResolved||!1,C=w?.isOutdated||!1,S=()=>{if(C&&p.originalDiffPathUri){let e=new URL(p.originalDiffPathUri);e.searchParams.set("new_files_changed","true"),window.location.href=e.toString()}else window.location.hash=`#r${f?.databaseId}`,x&&f?.databaseId&&v(f?.databaseId);l()};r[0]!==h?(t=tr(h),r[0]=h,r[1]=t):t=r[1];let[k,T]=(0,eZ.M)(t,!1),E=p.threadPreviewComments.length,R=0===E?"No replies":`${E} ${1===E?"reply":"replies"}`,L={...w,id:w?.id??"",commentsData:{comments:[]}};if(!f||!L)return null;let A=ti(p.commentId,w?.commentsData??{comments:[]}),D=f?.databaseId;return r[2]!==k||r[3]!==T?(n=()=>T(!k),r[2]=k,r[3]=T,r[4]=n):n=r[4],r[5]!==m||r[6]!==k||r[7]!==C||r[8]!==N||r[9]!==j||r[10]!==S||r[11]!==D||r[12]!==n||r[13]!==u?(i=(0,o.jsx)(e6,{firstCommentId:D,isCollapsed:k,threadPreview:u,onNavigateToDiffComment:S,onToggleCollapsed:n,headingLevel:m,isResolved:N,isOutdated:C,lineKey:j}),r[5]=m,r[6]=k,r[7]=C,r[8]=N,r[9]=j,r[10]=S,r[11]=D,r[12]=n,r[13]=u,r[14]=i):i=r[14],r[15]!==A||r[16]!==g||r[17]!==y||r[18]!==f||r[19]!==k||r[20]!==C||r[21]!==N||r[22]!==j||r[23]!==S||r[24]!==p.originalDiffPathUri||r[25]!==p.subject?.diffLines||r[26]!==R||r[27]!==d||r[28]!==h?(a=!k&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"border-bottom borderColor-muted overflow-x-auto",children:(0,o.jsx)(eQ.i,{diffTableClassName:"border-0",diffLines:p?.subject?.diffLines,className:"m-0 border-0",tabSize:d||4})}),(0,o.jsx)("div",{children:(0,o.jsx)(eK.U,{lineMarkersKey:j,hideActions:!0,isInlineComment:!1,comment:f,filePath:y,index:0,isAnchorable:!1,isOutdated:C,isThreadResolved:N,threadId:h,originalDiffPathUri:p.originalDiffPathUri,headingLevel:"h3"},g)}),(0,o.jsx)("div",{className:"mb-2 px-2",children:(0,o.jsx)(Q.Q,{"aria-label":`View ${R}`,size:"small",trailingVisual:q.ChevronRightIcon,variant:"invisible",onClick:S,children:(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-start flex-items-center gap-2",children:[(0,o.jsx)("span",{children:R}),(0,o.jsx)(e9,{commentAuthors:A})]})})})]}),r[15]=A,r[16]=g,r[17]=y,r[18]=f,r[19]=k,r[20]=C,r[21]=N,r[22]=j,r[23]=S,r[24]=p.originalDiffPathUri,r[25]=p.subject?.diffLines,r[26]=R,r[27]=d,r[28]=h,r[29]=a):a=r[29],r[30]!==i||r[31]!==a?(s=(0,o.jsxs)("div",{className:"border rounded-2 d-flex flex-column",children:[i,a]}),r[30]=i,r[31]=a,r[32]=s):s=r[32],s}:function({onNavigateToDiffComment:e,tabSize:t,threadPreview:n,headingLevel:i}){let{previewInfo:a}=n,{threadId:s,firstComment:r}=a,l=r?.id,d=a.path,c=(0,I.j5)(),{navigateToSelectedComment:u}=(0,I.Lh)(),m=(0,I.SM)(),p=a.subject?.endDiffSide==="RIGHT"?"R":"L",h=a.subject?.originalEndLine?`${p}${a.subject.originalEndLine}`:te.zW,f=m(Number(a.threadId),a.path,h),g=f?.isResolved||!1,y=f?.isOutdated||!1,x=()=>{if(y&&a.originalDiffPathUri){let e=new URL(a.originalDiffPathUri);e.searchParams.set("new_files_changed","true"),window.location.href=e.toString()}else window.location.hash=`#r${r?.databaseId}`,c&&r?.databaseId&&u(r?.databaseId);e()},[v,b]=(0,eZ.M)(tr(s),!1),_=a.threadPreviewComments.length,j=0===_?"No replies":`${_} ${1===_?"reply":"replies"}`,w={...f,id:f?.id??"",commentsData:{comments:[]}};if(!r||!w)return null;let N=ti(a.commentId,f?.commentsData??{comments:[]});return(0,o.jsxs)("div",{className:"border rounded-2 d-flex flex-column",children:[(0,o.jsx)(e6,{firstCommentId:r?.databaseId,isCollapsed:v,threadPreview:n,onNavigateToDiffComment:x,onToggleCollapsed:()=>b(!v),headingLevel:i,isResolved:g,isOutdated:y,lineKey:h}),!v&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"border-bottom borderColor-muted overflow-x-auto",children:(0,o.jsx)(eQ.i,{diffTableClassName:"border-0",diffLines:a?.subject?.diffLines,className:"m-0 border-0",tabSize:t||4})}),(0,o.jsx)("div",{children:(0,o.jsx)(eK.U,{lineMarkersKey:h,hideActions:!0,isInlineComment:!1,comment:r,filePath:d,index:0,isAnchorable:!1,isOutdated:y,isThreadResolved:g,threadId:s,originalDiffPathUri:a.originalDiffPathUri,headingLevel:"h3"},l)}),(0,o.jsx)("div",{className:"mb-2 px-2",children:(0,o.jsx)(Q.Q,{"aria-label":`View ${j}`,size:"small",trailingVisual:q.ChevronRightIcon,variant:"invisible",onClick:x,children:(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-start flex-items-center gap-2",children:[(0,o.jsx)("span",{children:j}),(0,o.jsx)(e9,{commentAuthors:N})]})})})]})]})});try{tl.displayName||(tl.displayName="ThreadPreview")}catch{}var to=n(4559),td=n(76720);let tc=(0,d.Z6)()?function(e){let t,n,i,a,s=(0,c.c)(11),{heading:r,description:l,icon:d,headingLevel:u}=e,m=void 0===u?"h1":u;return s[0]!==d?(t=(0,o.jsx)(td.E.Visual,{children:(0,o.jsx)(d,{size:"medium"})}),s[0]=d,s[1]=t):t=s[1],s[2]!==r||s[3]!==m?(n=(0,o.jsx)(td.E.Heading,{as:m,children:r}),s[2]=r,s[3]=m,s[4]=n):n=s[4],s[5]!==l?(i=l&&(0,o.jsx)(td.E.Description,{children:l}),s[5]=l,s[6]=i):i=s[6],s[7]!==t||s[8]!==n||s[9]!==i?(a=(0,o.jsxs)(td.E,{children:[t,n,i]}),s[7]=t,s[8]=n,s[9]=i,s[10]=a):a=s[10],a}:function({heading:e,description:t,icon:n,headingLevel:i="h1"}){return(0,o.jsxs)(td.E,{children:[(0,o.jsx)(td.E.Visual,{children:(0,o.jsx)(n,{size:"medium"})}),(0,o.jsx)(td.E.Heading,{as:i,children:e}),t&&(0,o.jsx)(td.E.Description,{children:t})]})};try{tc.displayName||(tc.displayName="ZeroState")}catch{}var tu=n(69510);let tm=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,p=(0,c.c)(27),{filteredThreadIds:h,onClose:f,pageLimits:g,pathName:y,isOpen:x,setThreadPreviews:_,tabSize:j}=e;p[0]!==y?(t={pathName:y},p[0]=y,p[1]=t):t=p[1];let{data:w}=(0,tu._l)(t),N=void 0===w?[]:w;(0,v.useEffect)(()=>{_(N)},[N,_]);let C=(0,v.useRef)(null);p[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,b.s)(to.i,300),p[2]=n):n=p[2];let S=n,I=N.length>0;p[3]!==f?(i=()=>{f()},p[3]=f,p[4]=i):i=p[4];let k=i;p[5]!==h||p[6]!==k||p[7]!==j?(a=e=>e&&h.has(e.previewInfo.threadId)?(0,o.jsx)(tl,{tabSize:j,threadPreview:e,onNavigateToDiffComment:k,headingLevel:"h2"},e.previewInfo.threadId):null,p[5]=h,p[6]=k,p[7]=j,p[8]=a):a=p[8];let T=N.map(a).filter(Boolean);return p[9]!==S||p[10]!==x||p[11]!==T.length?(s=()=>{x&&S(T.length>0?`${T.length} ${1===T.length?"comment":"comments"}`:"No comments found",{element:C.current})},p[9]=S,p[10]=x,p[11]=T.length,p[12]=s):s=p[12],p[13]!==S||p[14]!==x||p[15]!==T?(r=[x,S,T],p[13]=S,p[14]=x,p[15]=T,p[16]=r):r=p[16],(0,v.useEffect)(s,r),p[17]!==g.reviewThreadsLimit||p[18]!==g.reviewThreadsLimitExceeded?(l=g.reviewThreadsLimitExceeded&&(0,o.jsx)(eA.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:`Only the first ${g.reviewThreadsLimit} comments are currently being shown.`,className:"mb-3"}),p[17]=g.reviewThreadsLimit,p[18]=g.reviewThreadsLimitExceeded,p[19]=l):l=p[19],p[20]!==I||p[21]!==T?(d=T.length>0?(0,o.jsx)(v.Suspense,{fallback:(0,o.jsx)(A.A,{}),children:(0,o.jsx)("div",{className:"d-flex flex-column position-relative width-full gap-3",children:T})}):(0,o.jsx)("div",{className:"d-flex flex-column position-relative width-full height-full flex-justify-center",children:(0,o.jsx)(tc,{description:"Comments will show up here as soon as there are some.",heading:I?"No comments match the current filter":"No comments on changes yet",icon:q.CommentIcon,headingLevel:"h2"})}),p[20]=I,p[21]=T,p[22]=d):d=p[22],p[23]===Symbol.for("react.memo_cache_sentinel")?(u=(0,o.jsx)("div",{className:"sr-only","aria-live":"polite","aria-atomic":"true",ref:C}),p[23]=u):u=p[23],p[24]!==l||p[25]!==d?(m=(0,o.jsxs)(o.Fragment,{children:[l,d,u]}),p[24]=l,p[25]=d,p[26]=m):m=p[26],m}:function({filteredThreadIds:e,onClose:t,pageLimits:n,pathName:i,isOpen:a,setThreadPreviews:s,tabSize:r}){let{data:l=[]}=(0,tu._l)({pathName:i});(0,v.useEffect)(()=>{s(l)},[l,s]);let d=(0,v.useRef)(null),c=(0,v.useMemo)(()=>(0,b.s)(to.i,300),[]),u=l.length>0,m=(0,v.useCallback)(()=>{t()},[t]),p=l.map(t=>t&&e.has(t.previewInfo.threadId)?(0,o.jsx)(tl,{tabSize:r,threadPreview:t,onNavigateToDiffComment:m,headingLevel:"h2"},t.previewInfo.threadId):null).filter(Boolean);return(0,v.useEffect)(()=>{a&&c(p.length>0?`${p.length} ${1===p.length?"comment":"comments"}`:"No comments found",{element:d.current})},[a,c,p]),(0,o.jsxs)(o.Fragment,{children:[n.reviewThreadsLimitExceeded&&(0,o.jsx)(eA.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:`Only the first ${n.reviewThreadsLimit} comments are currently being shown.`,className:"mb-3"}),p.length>0?(0,o.jsx)(v.Suspense,{fallback:(0,o.jsx)(A.A,{}),children:(0,o.jsx)("div",{className:"d-flex flex-column position-relative width-full gap-3",children:p})}):(0,o.jsx)("div",{className:"d-flex flex-column position-relative width-full height-full flex-justify-center",children:(0,o.jsx)(tc,{description:"Comments will show up here as soon as there are some.",heading:u?"No comments match the current filter":"No comments on changes yet",icon:q.CommentIcon,headingLevel:"h2"})}),(0,o.jsx)("div",{className:"sr-only","aria-live":"polite","aria-atomic":"true",ref:d})]})},tp=(0,v.memo)((0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,p,h=(0,c.c)(25);h[0]!==e?({pathName:t,toggleSidesheetRef:i,...n}=e,h[0]=e,h[1]=t,h[2]=n,h[3]=i):(t=h[1],n=h[2],i=h[3]),h[4]===Symbol.for("react.memo_cache_sentinel")?(a=[],h[4]=a):a=h[4];let[f,y]=(0,v.useState)(a),[x,b]=(0,v.useState)(th);h[5]!==x||h[6]!==f?(s=eH(f,x),h[5]=x,h[6]=f,h[7]=s):s=h[7];let _=s,j=(0,v.useRef)(null);if(h[8]!==f){for(let e of(r=[],f)){let t=e.previewInfo.firstComment;t?.author&&!r.some(e=>e.login===t.author?.login)&&("Copilot"===t.author.login?r.unshift(t.author):r.push(t.author))}h[8]=f,h[9]=r}else r=h[9];let w=r;return n.isOpen?(h[10]===Symbol.for("react.memo_cache_sentinel")?(l={narrow:"fullscreen",regular:"right",wide:"right"},h[10]=l):l=h[10],h[11]!==w||h[12]!==x||h[13]!==n.onClose?(d=e=>{let{dialogLabelId:t}=e;return(0,o.jsxs)(g.l.Header,{className:"p-3",children:[(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-between flex-items-center width-full",children:[(0,o.jsx)(g.l.Title,{id:t,children:"Comments"}),(0,o.jsx)(W.K,{ref:j,"aria-label":"Close comments panel",icon:q.XIcon,variant:"invisible",onClick:n.onClose})]}),(0,o.jsx)(ez,{authorList:w,className:"mt-2 width-full",filterState:x,onFilterStateChange:b})]})},h[11]=w,h[12]=x,h[13]=n.onClose,h[14]=d):d=h[14],h[15]===Symbol.for("react.memo_cache_sentinel")?(u=(0,o.jsx)("div",{className:"d-flex flex-justify-center",children:(0,o.jsx)(A.A,{})}),h[15]=u):u=h[15],h[16]!==_||h[17]!==t||h[18]!==n?(m=(0,o.jsx)(v.Suspense,{fallback:u,children:(0,o.jsx)(tm,{...n,filteredThreadIds:_,pathName:t,setThreadPreviews:y})}),h[16]=_,h[17]=t,h[18]=n,h[19]=m):m=h[19],h[20]!==n.onClose||h[21]!==d||h[22]!==m||h[23]!==i?(p=(0,o.jsx)(g.l,{initialFocusRef:j,position:l,returnFocusRef:i,onClose:n.onClose,renderHeader:d,children:m}),h[20]=n.onClose,h[21]=d,h[22]=m,h[23]=i,h[24]=p):p=h[24],p):null}:function(e){let{pathName:t,toggleSidesheetRef:n,...i}=e,[a,s]=(0,v.useState)([]),[r,l]=(0,v.useState)(()=>({...eG})),d=eH(a,r),c=(0,v.useRef)(null),u=(0,v.useMemo)(()=>{let e=[];for(let t of a){let n=t.previewInfo.firstComment;n?.author&&!e.some(e=>e.login===n.author?.login)&&("Copilot"===n.author.login?e.unshift(n.author):e.push(n.author))}return e},[a]);return i.isOpen?(0,o.jsx)(g.l,{initialFocusRef:c,position:{narrow:"fullscreen",regular:"right",wide:"right"},returnFocusRef:n,onClose:i.onClose,renderHeader:({dialogLabelId:e})=>(0,o.jsxs)(g.l.Header,{className:"p-3",children:[(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-between flex-items-center width-full",children:[(0,o.jsx)(g.l.Title,{id:e,children:"Comments"}),(0,o.jsx)(W.K,{ref:c,"aria-label":"Close comments panel",icon:q.XIcon,variant:"invisible",onClick:i.onClose})]}),(0,o.jsx)(ez,{authorList:u,className:"mt-2 width-full",filterState:r,onFilterStateChange:l})]}),children:(0,o.jsx)(v.Suspense,{fallback:(0,o.jsx)("div",{className:"d-flex flex-justify-center",children:(0,o.jsx)(A.A,{})}),children:(0,o.jsx)(tm,{...i,filteredThreadIds:d,pathName:t,setThreadPreviews:s})})}):null});try{tm.displayName||(tm.displayName="CommentsSidePanelContent")}catch{}try{tp.displayName||(tp.displayName="CommentsSidePanel")}catch{}function th(){return{...eG}}let tf=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d=(0,c.c)(18),{isFileTreeExpanded:u,pageLimits:m,pullRequest:p,tabSize:h}=e,[f,g]=(0,v.useState)(!1),y=(0,v.useRef)(null),x=(0,I.Qb)(),{sendPullRequestAnalyticsEvent:b}=(0,$.q)();return d[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.jsx)(Q.Q,{"aria-label":"The comments side panel cannot currently be opened.",leadingVisual:q.CommentDiscussionIcon,size:"small",variant:"invisible"}),d[0]=t):t=d[0],d[1]!==b?(n=()=>{b("comments_side_panel.open","COMMENTS_SIDE_PANEL_BUTTON"),e$(),g(!0)},d[1]=b,d[2]=n):n=d[2],d[3]!==u?(i=u&&(0,o.jsx)("span",{className:"d-none d-xl-block",children:"Comments"}),d[3]=u,d[4]=i):i=d[4],d[5]!==x||d[6]!==n||d[7]!==i?(a=(0,o.jsx)(Q.Q,{ref:y,"aria-label":"Open comments side panel",count:x,leadingVisual:q.CommentDiscussionIcon,size:"small",onClick:n,children:i}),d[5]=x,d[6]=n,d[7]=i,d[8]=a):a=d[8],d[9]===Symbol.for("react.memo_cache_sentinel")?(s=()=>g(!1),d[9]=s):s=d[9],d[10]!==f||d[11]!==m||d[12]!==p.pathName||d[13]!==h?(r=(0,o.jsx)(tp,{isOpen:f,pageLimits:m,pathName:p.pathName,tabSize:h,toggleSidesheetRef:y,onClose:s}),d[10]=f,d[11]=m,d[12]=p.pathName,d[13]=h,d[14]=r):r=d[14],d[15]!==a||d[16]!==r?(l=(0,o.jsx)("div",{className:"d-flex flex-items-center",children:(0,o.jsxs)(R.t,{fallback:t,children:[a,r]})}),d[15]=a,d[16]=r,d[17]=l):l=d[17],l}:function({isFileTreeExpanded:e,pageLimits:t,pullRequest:n,tabSize:i}){let[a,s]=(0,v.useState)(!1),r=(0,v.useRef)(null),l=(0,I.Qb)(),{sendPullRequestAnalyticsEvent:d}=(0,$.q)();return(0,o.jsx)("div",{className:"d-flex flex-items-center",children:(0,o.jsxs)(R.t,{fallback:(0,o.jsx)(Q.Q,{"aria-label":"The comments side panel cannot currently be opened.",leadingVisual:q.CommentDiscussionIcon,size:"small",variant:"invisible"}),children:[(0,o.jsx)(Q.Q,{ref:r,"aria-label":"Open comments side panel",count:l,leadingVisual:q.CommentDiscussionIcon,size:"small",onClick:()=>{d("comments_side_panel.open","COMMENTS_SIDE_PANEL_BUTTON"),e$(),s(!0)},children:e&&(0,o.jsx)("span",{className:"d-none d-xl-block",children:"Comments"})}),(0,o.jsx)(tp,{isOpen:a,pageLimits:t,pathName:n.pathName,tabSize:i,toggleSidesheetRef:r,onClose:()=>s(!1)})]})})};try{tf.displayName||(tf.displayName="OpenCommentsSidePanelButton")}catch{}var tg=n(86909);function ty(e,t){return new Set(e.filter(e=>(function(e,t){if(t){let n=t.toLowerCase();if(!e.annotationLevel.toLowerCase().includes(n)&&!e.message.toLowerCase().includes(n)&&!e.path.toLowerCase().includes(n)&&!e.title?.toLowerCase().includes(n)&&!e.checkRun.name?.toLowerCase().includes(n)&&!e.appAvatarAltText.toLowerCase().includes(n)&&!e.checkSuiteName?.toLowerCase().includes(n))return!1}return!0})(e,t)).map(e=>e.id))}let tx=(0,d.Z6)()?function(e){let t,n,i,a=(0,c.c)(8),{className:s,filteredText:r,onFilteredTextChange:l}=e;return a[0]!==l?(t=e=>l(e.target.value),a[0]=l,a[1]=t):t=a[1],a[2]!==r||a[3]!==t?(n=(0,o.jsx)(eU.A,{block:!0,"aria-label":"Filter alerts\u2026",leadingVisual:q.SearchIcon,placeholder:"Filter alerts\u2026",value:r,onChange:t}),a[2]=r,a[3]=t,a[4]=n):n=a[4],a[5]!==s||a[6]!==n?(i=(0,o.jsx)("div",{className:s,children:n}),a[5]=s,a[6]=n,a[7]=i):i=a[7],i}:function({className:e,filteredText:t,onFilteredTextChange:n}){return(0,o.jsx)("div",{className:e,children:(0,o.jsx)(eU.A,{block:!0,"aria-label":"Filter alerts\u2026",leadingVisual:q.SearchIcon,placeholder:"Filter alerts\u2026",value:t,onChange:e=>n(e.target.value)})})};try{tx.displayName||(tx.displayName="AlertsFilter")}catch{}let tv="AlertsSidePanel-module__annotationsHeaderFileName--JzcsF",tb=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u=(0,c.c)(25),{databaseId:m,lineNumber:p,path:h,toggleCollapsed:f,isCollapsed:g,onNavigateToAnnotation:y,annotationLevel:v}=e,b=g?"Expand annotation":"Collapse annotation",_=g?q.ChevronRightIcon:q.ChevronDownIcon;u[0]!==b||u[1]!==_||u[2]!==f?(t=(0,o.jsx)(W.K,{"aria-label":b,icon:_,size:"small",variant:"invisible",className:"mr-1",onClick:f}),u[0]=b,u[1]=_,u[2]=f,u[3]=t):t=u[3];let j=tg.Gt[v];u[4]===Symbol.for("react.memo_cache_sentinel")?(n=(0,x.$)("overflow-hidden text-mono text-semibold f6 no-wrap",tv),u[4]=n):n=u[4];let w=`#annotation_${m}`;u[5]!==y||u[6]!==h||u[7]!==w?(i=(0,o.jsxs)(D.A,{className:n,href:w,onClick:y,muted:!0,children:["\u200E",h]}),u[5]=y,u[6]=h,u[7]=w,u[8]=i):i=u[8],u[9]!==h||u[10]!==i?(a=(0,o.jsx)(P.m,{direction:"n",text:h,type:"label",children:i}),u[9]=h,u[10]=i,u[11]=a):a=u[11],u[12]!==p?(s=(0,o.jsxs)("span",{className:"f6 fgColor-muted text-normal ml-2 no-wrap",children:["Line ",p]}),u[12]=p,u[13]=s):s=u[13],u[14]!==t||u[15]!==j||u[16]!==a||u[17]!==s?(r=(0,o.jsxs)("h2",{className:"d-flex flex-items-center flex-1 min-width-0 ml-1 mr-2",children:[t,j,a,s]}),u[14]=t,u[15]=j,u[16]=a,u[17]=s,u[18]=r):r=u[18];let N=`#annotation_${m}`;return u[19]!==y||u[20]!==N?(l=(0,o.jsx)(W.K,{as:"a","aria-label":"Jump to the alert in the diff",tooltipDirection:"se",icon:q.FileSymlinkFileIcon,variant:"invisible",href:N,onClick:y}),u[19]=y,u[20]=N,u[21]=l):l=u[21],u[22]!==r||u[23]!==l?(d=(0,o.jsxs)("div",{className:"d-flex flex-row flex-items-center py-1 px-2 bgColor-inset rounded-top-2 border-bottom",children:[r,l]}),u[22]=r,u[23]=l,u[24]=d):d=u[24],d}:function({databaseId:e,lineNumber:t,path:n,toggleCollapsed:i,isCollapsed:a,onNavigateToAnnotation:s,annotationLevel:r}){return(0,o.jsxs)("div",{className:"d-flex flex-row flex-items-center py-1 px-2 bgColor-inset rounded-top-2 border-bottom",children:[(0,o.jsxs)("h2",{className:"d-flex flex-items-center flex-1 min-width-0 ml-1 mr-2",children:[(0,o.jsx)(W.K,{"aria-label":a?"Expand annotation":"Collapse annotation",icon:a?q.ChevronRightIcon:q.ChevronDownIcon,size:"small",variant:"invisible",className:"mr-1",onClick:i}),tg.Gt[r],(0,o.jsx)(P.m,{direction:"n",text:n,type:"label",children:(0,o.jsxs)(D.A,{className:(0,x.$)("overflow-hidden text-mono text-semibold f6 no-wrap",tv),href:`#annotation_${e}`,onClick:s,muted:!0,children:["\u200E",n]})}),(0,o.jsxs)("span",{className:"f6 fgColor-muted text-normal ml-2 no-wrap",children:["Line ",t]})]}),(0,o.jsx)(W.K,{as:"a","aria-label":"Jump to the alert in the diff",tooltipDirection:"se",icon:q.FileSymlinkFileIcon,variant:"invisible",href:`#annotation_${e}`,onClick:s})]})},t_=(0,v.memo)((0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,p=(0,c.c)(26),{annotations:h,onClose:f,isOpen:y,pageLimits:x,returnFocusRef:_}=e,[j,w]=(0,v.useState)(""),N=ty(h,j),C=(0,v.useRef)(null),S=h.length>0,k=(0,I.j5)(),{navigateToSelectedAnnotation:T}=(0,I.Lh)();p[0]!==k||p[1]!==T||p[2]!==f?(t=e=>{k&&T(e),f()},p[0]=k,p[1]=T,p[2]=f,p[3]=t):t=p[3];let E=t,R=h.map(e=>e&&N.has(e.id)?(0,o.jsx)(tj,{annotation:e,handleNavigateToAnnotation:E},e.id):null).filter(Boolean),A=(0,v.useRef)(null);p[4]===Symbol.for("react.memo_cache_sentinel")?(n=(0,b.s)(to.i,300),p[4]=n):n=p[4];let D=n;return(p[5]!==R||p[6]!==y?(i=()=>{y&&D(R.length>0?`${R.length} ${1===R.length?"alert":"alerts"}`:"No alerts found",{element:A.current})},a=[y,D,R],p[5]=R,p[6]=y,p[7]=i,p[8]=a):(i=p[7],a=p[8]),(0,v.useEffect)(i,a),y)?(p[9]===Symbol.for("react.memo_cache_sentinel")?(s={narrow:"fullscreen",regular:"right",wide:"right"},p[9]=s):s=p[9],p[10]!==j||p[11]!==f?(r=e=>{let{dialogLabelId:t}=e;return(0,o.jsxs)(g.l.Header,{className:"p-3",children:[(0,o.jsxs)("div",{className:"d-flex flex-row flex-items-center flex-justify-between width-full",children:[(0,o.jsx)(L.A,{as:"h1",className:"f4 text-bold",id:t,children:"Alerts"}),(0,o.jsx)(W.K,{ref:C,"aria-label":"Close alerts panel",icon:q.XIcon,variant:"invisible",onClick:f})]}),(0,o.jsx)(tx,{className:"mt-2 width-full",filteredText:j,onFilteredTextChange:w})]})},p[10]=j,p[11]=f,p[12]=r):r=p[12],p[13]!==x.annotationsLimit||p[14]!==x.annotationsLimitExceeded?(l=x.annotationsLimitExceeded&&(0,o.jsx)(eA.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:`Only the first ${x.annotationsLimit} alerts are currently being shown.`,className:"mb-3"}),p[13]=x.annotationsLimit,p[14]=x.annotationsLimitExceeded,p[15]=l):l=p[15],p[16]!==R||p[17]!==S?(d=R.length>0?(0,o.jsx)("div",{className:"d-flex flex-column position-relative width-full gap-3",children:R}):(0,o.jsx)("div",{className:"d-flex flex-column position-relative width-full height-full flex-justify-center",children:(0,o.jsx)(tc,{heading:S?"No alerts match the current filter":"No alerts on changes yet",icon:q.AlertIcon})}),p[16]=R,p[17]=S,p[18]=d):d=p[18],p[19]===Symbol.for("react.memo_cache_sentinel")?(u=(0,o.jsx)("div",{className:"sr-only","aria-live":"polite","aria-atomic":"true",ref:A}),p[19]=u):u=p[19],p[20]!==f||p[21]!==_||p[22]!==r||p[23]!==l||p[24]!==d?(m=(0,o.jsxs)(g.l,{initialFocusRef:C,onClose:f,position:s,returnFocusRef:_,renderHeader:r,children:[l,d,u]}),p[20]=f,p[21]=_,p[22]=r,p[23]=l,p[24]=d,p[25]=m):m=p[25],m):null}:function({annotations:e,onClose:t,isOpen:n,pageLimits:i,returnFocusRef:a}){let[s,r]=(0,v.useState)(""),l=ty(e,s),d=(0,v.useRef)(null),c=e.length>0,u=(0,I.j5)(),{navigateToSelectedAnnotation:m}=(0,I.Lh)(),p=(0,v.useCallback)(e=>{u&&m(e),t()},[t,u,m]),h=e.map(e=>e&&l.has(e.id)?(0,o.jsx)(tj,{annotation:e,handleNavigateToAnnotation:p},e.id):null).filter(Boolean),f=(0,v.useRef)(null),y=(0,v.useMemo)(()=>(0,b.s)(to.i,300),[]);return((0,v.useEffect)(()=>{n&&y(h.length>0?`${h.length} ${1===h.length?"alert":"alerts"}`:"No alerts found",{element:f.current})},[n,y,h]),n)?(0,o.jsxs)(g.l,{initialFocusRef:d,onClose:t,position:{narrow:"fullscreen",regular:"right",wide:"right"},returnFocusRef:a,renderHeader:({dialogLabelId:e})=>(0,o.jsxs)(g.l.Header,{className:"p-3",children:[(0,o.jsxs)("div",{className:"d-flex flex-row flex-items-center flex-justify-between width-full",children:[(0,o.jsx)(L.A,{as:"h1",className:"f4 text-bold",id:e,children:"Alerts"}),(0,o.jsx)(W.K,{ref:d,"aria-label":"Close alerts panel",icon:q.XIcon,variant:"invisible",onClick:t})]}),(0,o.jsx)(tx,{className:"mt-2 width-full",filteredText:s,onFilteredTextChange:r})]}),children:[i.annotationsLimitExceeded&&(0,o.jsx)(eA.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:`Only the first ${i.annotationsLimit} alerts are currently being shown.`,className:"mb-3"}),h.length>0?(0,o.jsx)("div",{className:"d-flex flex-column position-relative width-full gap-3",children:h}):(0,o.jsx)("div",{className:"d-flex flex-column position-relative width-full height-full flex-justify-center",children:(0,o.jsx)(tc,{heading:c?"No alerts match the current filter":"No alerts on changes yet",icon:q.AlertIcon})}),(0,o.jsx)("div",{className:"sr-only","aria-live":"polite","aria-atomic":"true",ref:f})]}):null}),tj=(0,d.Z6)()?function(e){let t,n,i,a,s=(0,c.c)(18),{annotation:r,handleNavigateToAnnotation:l}=e,{isCollapsed:d,handleToggleCollapsed:u}=(0,tg.Vv)(r);return s[0]!==r.databaseId||s[1]!==l?(t=()=>l(r.databaseId),s[0]=r.databaseId,s[1]=l,s[2]=t):t=s[2],s[3]!==r.annotationLevel||s[4]!==r.databaseId||s[5]!==r.endLine||s[6]!==r.path||s[7]!==u||s[8]!==d||s[9]!==t?(n=(0,o.jsx)(tb,{databaseId:r.databaseId,lineNumber:r.endLine,annotationLevel:r.annotationLevel,path:r.path,toggleCollapsed:u,isCollapsed:d,onNavigateToAnnotation:t}),s[3]=r.annotationLevel,s[4]=r.databaseId,s[5]=r.endLine,s[6]=r.path,s[7]=u,s[8]=d,s[9]=t,s[10]=n):n=s[10],s[11]!==r||s[12]!==d?(i=!d&&(0,o.jsx)(tg.YH,{annotation:r,inSidePanel:!0}),s[11]=r,s[12]=d,s[13]=i):i=s[13],s[14]!==r.id||s[15]!==n||s[16]!==i?(a=(0,o.jsxs)("div",{className:"border rounded-2 bgColor-default overflow-hidden",children:[n,i]},r.id),s[14]=r.id,s[15]=n,s[16]=i,s[17]=a):a=s[17],a}:function({annotation:e,handleNavigateToAnnotation:t}){let{isCollapsed:n,handleToggleCollapsed:i}=(0,tg.Vv)(e);return(0,o.jsxs)("div",{className:"border rounded-2 bgColor-default overflow-hidden",children:[(0,o.jsx)(tb,{databaseId:e.databaseId,lineNumber:e.endLine,annotationLevel:e.annotationLevel,path:e.path,toggleCollapsed:i,isCollapsed:n,onNavigateToAnnotation:()=>t(e.databaseId)}),!n&&(0,o.jsx)(tg.YH,{annotation:e,inSidePanel:!0})]},e.id)};try{tb.displayName||(tb.displayName="AnnotationHeader")}catch{}try{t_.displayName||(t_.displayName="AlertsSidePanel")}catch{}try{tj.displayName||(tj.displayName="SidePanelAlert")}catch{}let tw=(0,d.Z6)()?function(e){let t,n,i,a=(0,c.c)(11),{isFileTreeExpanded:s,pageLimits:r,className:l}=e,[d,u]=(0,v.useState)(!1),m=(0,v.useRef)(null);a[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>u(!1),a[0]=t):t=a[0];let p=t,h=(0,I.wI)(),{sendPullRequestAnalyticsEvent:f}=(0,$.q)();if(!h)return null;a[1]!==h?(n=Object.values(h),a[1]=h,a[2]=n):n=a[2];let g=n,y=g.length;return a[3]!==g||a[4]!==l||a[5]!==s||a[6]!==r||a[7]!==f||a[8]!==d||a[9]!==y?(i=y>0?(0,o.jsx)("div",{className:"d-flex flex-items-center",children:(0,o.jsxs)(R.t,{fallback:(0,o.jsx)(W.K,{inactive:!0,"aria-label":"The alerts side panel cannot currently be opened.",icon:q.AlertIcon,size:"small",variant:"invisible"}),children:[(0,o.jsx)(Q.Q,{ref:m,className:l,"aria-label":"Open alerts side panel",count:y,leadingVisual:q.AlertIcon,size:"small",onClick:()=>{f("alerts_side_panel.open","ALERTS_SIDE_PANEL_BUTTON"),e$(),u(!0)},children:s&&(0,o.jsx)("span",{className:"d-none d-xl-block",children:"Alerts"})}),(0,o.jsx)(t_,{annotations:g,isOpen:d,pageLimits:r,returnFocusRef:m,onClose:p})]})}):null,a[3]=g,a[4]=l,a[5]=s,a[6]=r,a[7]=f,a[8]=d,a[9]=y,a[10]=i):i=a[10],i}:function({isFileTreeExpanded:e,pageLimits:t,className:n}){let[i,a]=(0,v.useState)(!1),s=(0,v.useRef)(null),r=(0,v.useCallback)(()=>a(!1),[]),l=(0,I.wI)(),{sendPullRequestAnalyticsEvent:d}=(0,$.q)();if(!l)return null;let c=Object.values(l),u=c.length;return u>0?(0,o.jsx)("div",{className:"d-flex flex-items-center",children:(0,o.jsxs)(R.t,{fallback:(0,o.jsx)(W.K,{inactive:!0,"aria-label":"The alerts side panel cannot currently be opened.",icon:q.AlertIcon,size:"small",variant:"invisible"}),children:[(0,o.jsx)(Q.Q,{ref:s,className:n,"aria-label":"Open alerts side panel",count:u,leadingVisual:q.AlertIcon,size:"small",onClick:()=>{d("alerts_side_panel.open","ALERTS_SIDE_PANEL_BUTTON"),e$(),a(!0)},children:e&&(0,o.jsx)("span",{className:"d-none d-xl-block",children:"Alerts"})}),(0,o.jsx)(t_,{annotations:c,isOpen:i,pageLimits:t,returnFocusRef:s,onClose:r})]})}):null};try{tw.displayName||(tw.displayName="OpenAlertsPanelButton")}catch{}var tN=n(70109),tC=n(42255),tS=n(46251),tI=n(31604),tk=n(33578);let tT={approve:"approve",comment:"comment",requestChanges:"request changes"},tE=(0,d.Z6)()?function(e){let t,n,i,a,s=(0,c.c)(10),{onSuccess:r,onError:l}=e,o=(0,ee.e)(X.uT.submitReview);return s[0]!==o?(t=async e=>{let{body:t,event:n,headSha:i}=e;return(0,ed.Sr)(`${o}`,{method:"PUT",headers:{Accept:"application/json"},body:{body:t,event:n,headSha:i}})},s[0]=o,s[1]=t):t=s[1],s[2]!==r?(n=async e=>{let t=await e.json(),n=t.error||"Unknown error occurred";if(!e.ok)throw Error(n);r(t)},s[2]=r,s[3]=n):n=s[3],s[4]!==l?(i=e=>{l(e)},s[4]=l,s[5]=i):i=s[5],s[6]!==t||s[7]!==n||s[8]!==i?(a={mutationFn:t,onSuccess:n,onError:i},s[6]=t,s[7]=n,s[8]=i,s[9]=a):a=s[9],(0,et.n)(a)}:function({onSuccess:e,onError:t}){let n=(0,ee.e)(X.uT.submitReview);return(0,et.n)({mutationFn:async({body:e,event:t,headSha:i})=>(0,ed.Sr)(`${n}`,{method:"PUT",headers:{Accept:"application/json"},body:{body:e,event:t,headSha:i}}),onSuccess:async t=>{let n=await t.json(),i=n.error||"Unknown error occurred";if(!t.ok)throw Error(i);e(n)},onError:e=>{t(e)}})},tR=(0,d.Z6)()?function(e){let t,n,i,a,s=(0,c.c)(10),{onSuccess:r,onError:l}=e,o=(0,ee.e)(X.uT.abandonReview);return s[0]!==o?(t=async()=>(0,ed.Sr)(`${o}`,{method:"DELETE",headers:{Accept:"application/json"}}),s[0]=o,s[1]=t):t=s[1],s[2]!==r?(n=async e=>{let t=await e.json(),n=t.error||"Unknown error occurred";if(!e.ok)throw Error(n);r(t)},s[2]=r,s[3]=n):n=s[3],s[4]!==l?(i=e=>{l(e)},s[4]=l,s[5]=i):i=s[5],s[6]!==t||s[7]!==n||s[8]!==i?(a={mutationFn:t,onSuccess:n,onError:i},s[6]=t,s[7]=n,s[8]=i,s[9]=a):a=s[9],(0,et.n)(a)}:function({onSuccess:e,onError:t}){let n=(0,ee.e)(X.uT.abandonReview);return(0,et.n)({mutationFn:async()=>(0,ed.Sr)(`${n}`,{method:"DELETE",headers:{Accept:"application/json"}}),onSuccess:async t=>{let n=await t.json(),i=n.error||"Unknown error occurred";if(!t.ok)throw Error(i);e(n)},onError:e=>{t(e)}})};var tL=n(46747);let{getItem:tA,removeItem:tD,setItem:tP}=(0,eg.D)("localStorage"),tO=(0,d.Z6)()?function(e){let t,n,i,a,s=(0,c.c)(11),[r,l]=(0,v.useState)(!1),o=`Review:${e}`;s[0]!==o?(t=tA(o),s[0]=o,s[1]=t):t=s[1];let d=t;s[2]!==o?(n=()=>{tD(o)},s[2]=o,s[3]=n):n=s[3];let u=n;s[4]!==r||s[5]!==o?(i=(e,t)=>{if(!r)try{tP(o,{event:e,text:t})}catch{l(!0)}},s[4]=r,s[5]=o,s[6]=i):i=s[6];let m=(0,tL.d)(i,1e3);return s[7]!==m||s[8]!==d||s[9]!==u?(a={persistedReview:d,persistReviewToStorage:m,removePersistedReviewFromStorage:u},s[7]=m,s[8]=d,s[9]=u,s[10]=a):a=s[10],a}:function(e){let[t,n]=(0,v.useState)(!1),i=(0,v.useMemo)(()=>`Review:${e}`,[e]);return{persistedReview:tA(i),persistReviewToStorage:(0,tL.d)((e,a)=>{if(!t)try{tP(i,{event:e,text:a})}catch{n(!0)}},1e3),removePersistedReviewFromStorage:()=>{tD(i)}}},tF="ReviewMenuButton-module__ReviewMenuButton--uK7FN",tB="ReviewMenuButton-module__CommentBoxContainer--Un2Pq",tM="ReviewMenuButton-module__SubmitReviewButton--ZSu4L",tV="ReviewMenuButton-module__ErrorMessage--bglZe",t$="ReviewMenuButton-module__ExpandSection--sAB8o",tU="ReviewMenuButton-module__AnchoredReviewBody--nirqE";function tq(e,t){let n=(0,I.BI)(e),i=(0,I.l0)();return(0,v.useMemo)(()=>{let a=e;if(void 0===n||void 0===i)return[];let s=[];for(let e of Object.keys(t)){let r=t[e];if(!r)continue;let l=0,{path:o,diffLines:d}=r,c=i[o];if(c){let e=function(e,t){if(!e||!e.markersMap)return[];let n=e.markersMap.FILE;if(void 0===n)return[];let i=[];for(let a of n.threads){if(void 0===a.id)continue;let n=t.find(e=>Number(e.id)===a.id);if(!n)continue;let s=n.commentsData?.comments.slice(0,-1),r=[];for(let e of s??[])e.author&&r.push({author:{avatarUrl:e.author.avatarUrl,login:e.author.login}});let l=(n.commentsData?.comments??[]).filter(e=>"pending"===e.state).map(t=>({bodyHTML:t.bodyHTML??"",threadId:n.id,commentId:(t.databaseId??0).toString(),isOutdated:n.isOutdated??!1,isResolved:!1,path:e.path,subjectType:"FILE",commentsData:n.commentsData,threadPreviewComments:r}));i.push(...l)}return i}(c,n);e.length>0&&(s.push(...e),a=a.filter(t=>!e.some(e=>e.threadId===t.toString()))),d.map(e=>{let t=function(e,t,n,i,a,s){let r="DELETION"!==t.type?`R${t.right}`:`L${t.left}`;if(!n||!n.markersMap)return{pendingCommentsReturnArray:[],markersFoundInLine:[]};let l=n.markersMap[r],o=[],d=[];if(l){for(let t of l.threads){let n;if(void 0===t.id)continue;let l=i.find(e=>Number(e.id)===t.id);if(!l)continue;let c=parseInt(r.slice(1))||0,u=-1,m=5;t.start&&(n="L"===t.start[0]?"LEFT":"RIGHT",u=parseInt(t.start.slice(1))||-1),-1!==u&&(m=c-u),m>a&&(m=a+1);let p=s.slice(a+1-m,a+1);for(let e=0;e<p.length;e++)p[e]?.type==="HUNK"&&p.splice(0,e+1);let h=l.commentsData?.comments.slice(0,-1),f=[];for(let e of h??[])e.author&&f.push({author:{avatarUrl:e.author.avatarUrl,login:e.author.login}});o.push(t.id),l.commentsData&&(d=d.concat(l.commentsData.comments.filter(e=>"pending"===e.state).map(t=>({bodyHTML:t.bodyHTML??"",threadId:l.id,commentId:(t.databaseId??0).toString(),isOutdated:l.isOutdated??!1,isResolved:!1,line:c,path:e,subject:{diffLines:p,endLine:c,startDiffSide:n,startLine:-1===u?null:u},subjectType:t.subjectType??"LINE",commentsData:l.commentsData,threadPreviewComments:f}))))}return{pendingCommentsReturnArray:d,markersFoundInLine:o}}return{pendingCommentsReturnArray:[],markersFoundInLine:[]}}(r.path,e,c,n,l,d);l++,void 0!==t&&(s.push(...t.pendingCommentsReturnArray),a=a.filter(e=>!t.markersFoundInLine.includes(e)))})}}return[...s,...function(e,t){let n=[];for(let i of e){let e=t[i];if(!e)continue;let a=e.commentsData?.comments.slice(0,-1),s=[];for(let e of a??[])e.author&&s.push({author:{avatarUrl:e.author.avatarUrl,login:e.author.login}});let r=(e.commentsData?.comments??[]).filter(e=>"pending"===e.state).map(t=>({bodyHTML:t.bodyHTML??"",threadId:e.id,commentId:(t.databaseId??0).toString(),isOutdated:e.isOutdated??!1,isResolved:!1,path:"",subjectType:t.subjectType??"LINE",commentsData:e.commentsData,threadPreviewComments:s}));n.push(...r)}return n}(a,n)]},[e,n,i,t])}var tW=n(29255),tH=n(55461),tG=n(15837),tz=n(33989),tK=n(55255);let tQ="ReviewMenu-module__Radio--i3DSd",tZ="ReviewMenu-module__RadioGroup--uQwUG",tJ="ReviewMenu-module__RadioText--dXY49",tY=(0,d.Z6)()?function(e){let t,n,i,a=(0,c.c)(13),{isPROpen:s,reviewEvent:r,viewerAllowedNonCommentReviewTypes:l,viewerCanWriteToRepo:d,viewerHasViolatedPushPolicy:u,viewerIsAuthor:m,viewerIsCopilotAttributed:p,handleReviewEventChange:f,handleReviewSubmit:g}=e;return s?(a[0]!==g?(t={"pull-request-files-changed:submit-review":g},a[0]=g,a[1]=t):t=a[1],a[2]!==f||a[3]!==r||a[4]!==l||a[5]!==d||a[6]!==u||a[7]!==m||a[8]!==p?(n=(0,o.jsx)(tX,{reviewEvent:r,viewerAllowedNonCommentReviewTypes:l,viewerCanWriteToRepo:d,viewerHasViolatedPushPolicy:u,viewerIsAuthor:m,viewerIsCopilotAttributed:p,onReviewEventChange:f}),a[2]=f,a[3]=r,a[4]=l,a[5]=d,a[6]=u,a[7]=m,a[8]=p,a[9]=n):n=a[9],a[10]!==t||a[11]!==n?(i=(0,o.jsx)(h.tL,{commands:t,children:n}),a[10]=t,a[11]=n,a[12]=i):i=a[12],i):null}:function({isPROpen:e,reviewEvent:t,viewerAllowedNonCommentReviewTypes:n,viewerCanWriteToRepo:i,viewerHasViolatedPushPolicy:a,viewerIsAuthor:s,viewerIsCopilotAttributed:r,handleReviewEventChange:l,handleReviewSubmit:d}){return e?(0,o.jsx)(h.tL,{commands:{"pull-request-files-changed:submit-review":d},children:(0,o.jsx)(tX,{reviewEvent:t,viewerAllowedNonCommentReviewTypes:n,viewerCanWriteToRepo:i,viewerHasViolatedPushPolicy:a,viewerIsAuthor:s,viewerIsCopilotAttributed:r,onReviewEventChange:l})}):null},tX=(0,v.memo)((0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,p,h,f,g=(0,c.c)(34),{onReviewEventChange:y,reviewEvent:x,viewerAllowedNonCommentReviewTypes:v,viewerCanWriteToRepo:b,viewerHasViolatedPushPolicy:_,viewerIsAuthor:j,viewerIsCopilotAttributed:w}=e;g[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.jsx)(tG.A.Label,{visuallyHidden:!0,children:"Review Event"}),g[0]=t):t=g[0];let N=x===tT.comment;g[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,tH.ZH)(tT.comment),g[1]=n):n=g[1],g[2]!==N?(i=(0,o.jsx)(t0,{checked:N,label:n,subLabel:"Submit general feedback without explicit approval.",value:tT.comment}),g[2]=N,g[3]=i):i=g[3];let C=x===tT.approve;g[4]!==v?(a=v.includes("APPROVE"),g[4]=v,g[5]=a):a=g[5];let S=!a;g[6]===Symbol.for("react.memo_cache_sentinel")?(s=(0,tH.ZH)(tT.approve),g[6]=s):s=g[6],g[7]!==w?(r=t3(w),g[7]=w,g[8]=r):r=g[8];let I=!!_;g[9]!==I||g[10]!==v||g[11]!==j?(l=t1(j,I,v),g[9]=I,g[10]=v,g[11]=j,g[12]=l):l=g[12],g[13]!==l||g[14]!==C||g[15]!==S||g[16]!==r?(d=(0,o.jsx)(t0,{checked:C,disabled:S,label:s,subLabel:r,value:tT.approve,disabledTooltip:l}),g[13]=l,g[14]=C,g[15]=S,g[16]=r,g[17]=d):d=g[17];let k=x===tT.requestChanges;g[18]!==v?(u=v.includes("REQUEST_CHANGES"),g[18]=v,g[19]=u):u=g[19];let T=!u;g[20]!==v||g[21]!==j?(m=t2(j,v),g[20]=v,g[21]=j,g[22]=m):m=g[22],g[23]===Symbol.for("react.memo_cache_sentinel")?(p=(0,tH.ZH)(tT.requestChanges),g[23]=p):p=g[23];let E=b?"Submit feedback that must be addressed before merging.":"Submit feedback suggesting changes.";return g[24]!==k||g[25]!==T||g[26]!==m||g[27]!==E?(h=(0,o.jsx)(t0,{checked:k,disabled:T,disabledTooltip:m,label:p,value:tT.requestChanges,subLabel:E}),g[24]=k,g[25]=T,g[26]=m,g[27]=E,g[28]=h):h=g[28],g[29]!==y||g[30]!==d||g[31]!==h||g[32]!==i?(f=(0,o.jsxs)(tG.A,{name:"reviewEvent",onChange:y,className:tZ,children:[t,i,d,h]}),g[29]=y,g[30]=d,g[31]=h,g[32]=i,g[33]=f):f=g[33],f}:function({onReviewEventChange:e,reviewEvent:t,viewerAllowedNonCommentReviewTypes:n,viewerCanWriteToRepo:i,viewerHasViolatedPushPolicy:a,viewerIsAuthor:s,viewerIsCopilotAttributed:r}){return(0,o.jsxs)(tG.A,{name:"reviewEvent",onChange:e,className:tZ,children:[(0,o.jsx)(tG.A.Label,{visuallyHidden:!0,children:"Review Event"}),(0,o.jsx)(t0,{checked:t===tT.comment,label:(0,tH.ZH)(tT.comment),subLabel:"Submit general feedback without explicit approval.",value:tT.comment}),(0,o.jsx)(t0,{checked:t===tT.approve,disabled:!n.includes("APPROVE"),label:(0,tH.ZH)(tT.approve),subLabel:t3(r),value:tT.approve,disabledTooltip:t1(s,!!a,n)}),(0,o.jsx)(t0,{checked:t===tT.requestChanges,disabled:!n.includes("REQUEST_CHANGES"),disabledTooltip:t2(s,n),label:(0,tH.ZH)(tT.requestChanges),value:tT.requestChanges,subLabel:i?"Submit feedback that must be addressed before merging.":"Submit feedback suggesting changes."})]})}),t0=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l=(0,c.c)(18),{checked:d,disabled:u,disabledTooltip:m,label:p,subLabel:h,value:f}=e;l[0]!==d||l[1]!==f?(t=(0,o.jsx)(tz.A,{checked:d,value:f,className:tQ}),l[0]=d,l[1]=f,l[2]=t):t=l[2],l[3]!==p?(n=(0,o.jsx)("span",{className:"text-bold",children:p}),l[3]=p,l[4]=n):n=l[4],l[5]!==h?(i=(0,o.jsx)("span",{className:tJ,children:h}),l[5]=h,l[6]=i):i=l[6],l[7]!==n||l[8]!==i?(a=(0,o.jsxs)(G.A.Label,{className:"d-flex flex-column",children:[n,i]}),l[7]=n,l[8]=i,l[9]=a):a=l[9],l[10]!==u||l[11]!==t||l[12]!==a?(s=(0,o.jsxs)(G.A,{disabled:u,children:[t,a]}),l[10]=u,l[11]=t,l[12]=a,l[13]=s):s=l[13];let g=s;return l[14]!==u||l[15]!==m||l[16]!==g?(r=u&&m?(0,o.jsx)(tK.A,{text:m,children:g}):g,l[14]=u,l[15]=m,l[16]=g,l[17]=r):r=l[17],r}:function({checked:e,disabled:t,disabledTooltip:n,label:i,subLabel:a,value:s}){let r=(0,o.jsxs)(G.A,{disabled:t,children:[(0,o.jsx)(tz.A,{checked:e,value:s,className:tQ}),(0,o.jsxs)(G.A.Label,{className:"d-flex flex-column",children:[(0,o.jsx)("span",{className:"text-bold",children:i}),(0,o.jsx)("span",{className:tJ,children:a})]})]});return t&&n?(0,o.jsx)(tK.A,{text:n,children:r}):r};function t1(e,t,n){return e?"Pull request authors can't approve their own pull requests.":t?"Users that pushed changes to this pull request after it was opened can't approve":n.includes("APPROVE")?"":"Only users with explicit access to this repository may approve pull requests"}function t2(e,t){return e?"Pull request authors can't request changes on their own pull requests.":t.includes("REQUEST_CHANGES")?"":"Only users with explicit access to this repository may request changes on pull requests"}function t3(e){return e?"Only users who did not collaborate with Copilot will satisfy review requirements.":"Submit feedback and approve merging these changes."}try{tY.displayName||(tY.displayName="ReviewTypeSelector")}catch{}try{tX.displayName||(tX.displayName="ReviewRadioButtons")}catch{}try{t0.displayName||(t0.displayName="RadioButton")}catch{}var t4=n(4908),t5=n(23398);let t6=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,p=(0,c.c)(23),{totalPendingComments:h,commentsList:f,handleNavigateToDiffComment:g}=e;p[0]===Symbol.for("react.memo_cache_sentinel")?(t={defaultOpen:!0,closeOnOutsideClick:!1},p[0]=t):t=p[0];let{getDetailsProps:y,open:x}=(0,t4.A)(t);return h?(p[1]!==y?(n=y(),p[1]=y,p[2]=n):n=p[2],p[3]!==x?(i=x&&(0,o.jsx)(q.ChevronDownIcon,{className:"fgColor-muted"}),p[3]=x,p[4]=i):i=p[4],p[5]!==x?(a=!x&&(0,o.jsx)(q.ChevronRightIcon,{className:"fgColor-muted"}),p[5]=x,p[6]=a):a=p[6],p[7]!==h?(s=(0,o.jsxs)(L.A,{as:"h2",className:"f5",children:["Pending comments ",(0,o.jsx)(w.A,{children:h})]}),p[7]=h,p[8]=s):s=p[8],p[9]!==i||p[10]!==a||p[11]!==s?(r=(0,o.jsx)(t5.A.Summary,{children:(0,o.jsxs)("div",{className:"d-flex flex-row flex-items-center gap-2 mt-4 mb-2",children:[i,a,s]})}),p[9]=i,p[10]=a,p[11]=s,p[12]=r):r=p[12],p[13]===Symbol.for("react.memo_cache_sentinel")?(l=(0,o.jsx)(A.A,{}),p[13]=l):l=p[13],p[14]!==f||p[15]!==g?(d=f?.map(e=>(0,o.jsx)(tn,{commentPreview:e,onNavigateToDiffComment:g},e.threadId)),p[14]=f,p[15]=g,p[16]=d):d=p[16],p[17]!==d?(u=(0,o.jsx)(v.Suspense,{fallback:l,children:(0,o.jsx)("div",{className:"d-flex flex-column gap-3",children:d})}),p[17]=d,p[18]=u):u=p[18],p[19]!==n||p[20]!==r||p[21]!==u?(m=(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(t5.A,{...n,children:[r,u]})}),p[19]=n,p[20]=r,p[21]=u,p[22]=m):m=p[22],m):null}:function({totalPendingComments:e,commentsList:t,handleNavigateToDiffComment:n}){let{getDetailsProps:i,open:a}=(0,t4.A)({defaultOpen:!0,closeOnOutsideClick:!1});return e?(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(t5.A,{...i(),children:[(0,o.jsx)(t5.A.Summary,{children:(0,o.jsxs)("div",{className:"d-flex flex-row flex-items-center gap-2 mt-4 mb-2",children:[a&&(0,o.jsx)(q.ChevronDownIcon,{className:"fgColor-muted"}),!a&&(0,o.jsx)(q.ChevronRightIcon,{className:"fgColor-muted"}),(0,o.jsxs)(L.A,{as:"h2",className:"f5",children:["Pending comments ",(0,o.jsx)(w.A,{children:e})]})]})}),(0,o.jsx)(v.Suspense,{fallback:(0,o.jsx)(A.A,{}),children:(0,o.jsx)("div",{className:"d-flex flex-column gap-3",children:t?.map(e=>(0,o.jsx)(tn,{commentPreview:e,onNavigateToDiffComment:n},e.threadId))})})]})}):null};try{t6.displayName||(t6.displayName="ReviewCommentsSection")}catch{}var t7=n(56149);let t9=(0,d.Z6)()?e=>{let t,n,i,a=(0,c.c)(4),{portalName:s}=e,r=(0,v.useRef)(null);return a[0]!==s?(t=()=>{r.current&&(0,t7.cw)(r.current,s)},n=[s],a[0]=s,a[1]=t,a[2]=n):(t=a[1],n=a[2]),(0,v.useEffect)(t,n),a[3]===Symbol.for("react.memo_cache_sentinel")?(i=(0,o.jsx)("div",{ref:r,className:"position-absolute"}),a[3]=i):i=a[3],i}:({portalName:e})=>{let t=(0,v.useRef)(null);return(0,v.useEffect)(()=>{t.current&&(0,t7.cw)(t.current,e)},[e]),(0,o.jsx)("div",{ref:t,className:"position-absolute"})};try{t9.displayName||(t9.displayName="OverlayPortalContainer")}catch{}let t8="review-menu-portal-root";function ne({viewerIsAuthor:e,viewerAllowedNonCommentReviewTypes:t,isPROpen:n}){let i=t.includes("APPROVE"),a=t.includes("REQUEST_CHANGES");switch(!0){case!n:return{isHidden:!1,text:"comments"};case e:case i:case a:return{isHidden:!1,text:"review"};default:return{isHidden:!1,text:"comments"}}}let nt=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,p,h,f,y,x,b,_,j,w,N,C,S,k,T,E,R,A,D,P,O,F,B,M,V,U=(0,c.c)(125),{currentUserLogin:H,pullRequest:G,repository:z,redirectOnMutation:K}=e,Z=void 0===K||K,{author:J,pathName:Y,state:X,viewerAllowedNonCommentReviewTypes:ee,viewerHasViolatedPushPolicy:et,viewerIsCopilotAttributed:en,comparison:ei}=G,ea=(0,I.ys)(),es=(0,I.HZ)(),{persistedReview:er,persistReviewToStorage:el,removePersistedReviewFromStorage:eo}=tO(Y);U[0]!==ea?.pendingReviewIDs?(t=ea?.pendingReviewIDs??[],U[0]=ea?.pendingReviewIDs,U[1]=t):t=U[1];let ed=tq(t,es),ec=ed?.length??0,eu=J?.login===H,em=X!==tk.Q.Closed&&X!==tk.Q.Merged,ep="WRITE"===z.viewerPermission||"ADMIN"===z.viewerPermission,eh=ei.headOid,[ef,eg]=(0,tC.A)("none"),[ey,ex]=(0,tC.A)("idle"),[ev,eb]=(0,tC.A)(),[e_,ej]=(0,tC.A)(er?.event??tT.comment);U[2]!==ea?.pendingReviewIDs?(n=ea?.pendingReviewIDs??[],U[2]=ea?.pendingReviewIDs,U[3]=n):n=U[3];let ew=n.length>0,eN=(0,v.useRef)(null),eC=er?.text??"",eS=(0,v.useRef)(eC),[eI,ek]=(0,tC.A)(!!er?.text),eT="submitting"===ey||!eI&&e_===tT.comment&&!ec,{sendPullRequestAnalyticsEvent:eE}=(0,$.q)();U[4]!==el||U[5]!==e_||U[6]!==ek?(i=e=>{eS.current=e,ek(!!e.trim()),el(e_,e)},U[4]=el,U[5]=e_,U[6]=ek,U[7]=i):i=U[7];let eR=i;U[8]!==el||U[9]!==ej?(a=e=>{Object.values(tT).includes(e)&&(ej(e),el(e,eS.current))},U[8]=el,U[9]=ej,U[10]=a):a=U[10];let eL=a;U[11]!==Z||U[12]!==eo?(s=e=>{let{redirectUrl:t}=e;eo(),Z&&(window.location.href=t)},U[11]=Z,U[12]=eo,U[13]=s):s=U[13],U[14]!==eb||U[15]!==ex?(r=e=>{ex("idle"),eb(e.message)},U[14]=eb,U[15]=ex,U[16]=r):r=U[16],U[17]!==s||U[18]!==r?(l={onSuccess:s,onError:r},U[17]=s,U[18]=r,U[19]=l):l=U[19];let{mutate:eA}=tE(l);U[20]!==Z||U[21]!==eo?(d=e=>{let{redirectUrl:t}=e;eo(),Z&&(window.location.href=t)},U[20]=Z,U[21]=eo,U[22]=d):d=U[22],U[23]!==eb||U[24]!==ex?(u=e=>{ex("idle"),eb(e.message)},U[23]=eb,U[24]=ex,U[25]=u):u=U[25],U[26]!==u||U[27]!==d?(m={onSuccess:d,onError:u},U[26]=u,U[27]=d,U[28]=m):m=U[28];let{mutate:eD}=tR(m);U[29]!==ev||U[30]!==eh||U[31]!==e_||U[32]!==eE||U[33]!==eb||U[34]!==ex||U[35]!==eT||U[36]!==eA?(p=()=>{eT||(ev&&eb(void 0),ex("submitting"),eE("submit_review_dialog.submit","SUBMIT_REVIEW_BUTTON"),eA({body:eS.current,event:e_,headSha:eh}))},U[29]=ev,U[30]=eh,U[31]=e_,U[32]=eE,U[33]=eb,U[34]=ex,U[35]=eT,U[36]=eA,U[37]=p):p=U[37];let eP=p;U[38]!==eD||U[39]!==ev||U[40]!==ea?.pendingReviewIDs||U[41]!==eE||U[42]!==eb||U[43]!==ex?(h=()=>{0===(ea?.pendingReviewIDs??[]).length||confirm("Are you sure you want to cancel? You will lose all your pending comments.")&&(ev&&eb(void 0),ex("canceling"),eE("submit_review_dialog.cancel","CANCEL_REVIEW_BUTTON"),eD())},U[38]=eD,U[39]=ev,U[40]=ea?.pendingReviewIDs,U[41]=eE,U[42]=eb,U[43]=ex,U[44]=h):h=U[44],ea?.pendingReviewIDs;let eO=h;U[45]!==em||U[46]!==ee||U[47]!==eu?(f=ne({isPROpen:em,viewerAllowedNonCommentReviewTypes:ee,viewerIsAuthor:eu}),U[45]=em,U[46]=ee,U[47]=eu,U[48]=f):f=U[48];let eF=f;U[49]!==eE||U[50]!==eg?(y=()=>{window.innerWidth<768?eg("dialog"):eg("anchored"),eE("submit_review_dialog.open","REVIEW_CHANGES_BUTTON")},U[49]=eE,U[50]=eg,U[51]=y):y=U[51];let eB=y;U[52]!==eg?(x=()=>{eg("none")},U[52]=eg,U[53]=x):x=U[53];let eM=x;U[54]!==eg?(b=()=>{eg("none")},U[54]=eg,U[55]=b):b=U[55];let eV=b;U[56]!==eM||U[57]!==eB||U[58]!==ef?(_=()=>{"none"===ef?eB():eM()},U[56]=eM,U[57]=eB,U[58]=ef,U[59]=_):_=U[59];let e$=_;U[60]!==ed||U[61]!==eV||U[62]!==eL||U[63]!==eP||U[64]!==eC||U[65]!==em||U[66]!==eR||U[67]!==e_||U[68]!==ec||U[69]!==ee||U[70]!==ep||U[71]!==et||U[72]!==eu||U[73]!==en?(j=(0,o.jsx)(na,{initialReviewBody:eC,isPROpen:em,onReviewBodyChange:eR,reviewEvent:e_,viewerAllowedNonCommentReviewTypes:ee,viewerCanWriteToRepo:ep,viewerHasViolatedPushPolicy:et,viewerIsAuthor:eu,viewerIsCopilotAttributed:en,commentsList:ed,totalPendingComments:ec,handleNavigateToDiffComment:eV,handleReviewSubmit:eP,handleReviewEventChange:eL}),U[60]=ed,U[61]=eV,U[62]=eL,U[63]=eP,U[64]=eC,U[65]=em,U[66]=eR,U[67]=e_,U[68]=ec,U[69]=ee,U[70]=ep,U[71]=et,U[72]=eu,U[73]=en,U[74]=j):j=U[74];let eU=j;if(eF.isHidden)return null;U[75]!==ev||U[76]!==eM||U[77]!==eO||U[78]!==eP||U[79]!==ew||U[80]!==eF||U[81]!==ey||U[82]!==eT?(w=()=>(0,o.jsx)(ni,{errorMessage:ev,hasPendingReviews:ew,reviewSubmissionState:ey,handleReviewCancel:eO,handleCloseReviewDialog:eM,handleReviewSubmit:eP,submitDisabled:eT,reviewMenuButtonDisplayState:eF}),U[75]=ev,U[76]=eM,U[77]=eO,U[78]=eP,U[79]=ew,U[80]=eF,U[81]=ey,U[82]=eT,U[83]=w):w=U[83];let eq=w,eW=ec||void 0;U[84]!==e$||U[85]!==eF.text||U[86]!==eW?(N=(0,o.jsxs)(Q.Q,{count:eW,className:tF,trailingAction:q.TriangleDownIcon,variant:"primary",onClick:e$,size:"small",ref:eN,children:["Submit ",eF.text]}),U[84]=e$,U[85]=eF.text,U[86]=eW,U[87]=N):N=U[87],U[88]===Symbol.for("react.memo_cache_sentinel")?(C=(0,o.jsx)(t9,{portalName:t8}),U[88]=C):C=U[88];let eH="anchored"===ef;return U[89]===Symbol.for("react.memo_cache_sentinel")?(S={regular:"anchored",narrow:"fullscreen"},U[89]=S):S=U[89],U[90]===Symbol.for("react.memo_cache_sentinel")?(k={disabled:!0},T={role:"dialog","aria-labelledby":"anchored-review-title","aria-modal":"true",portalContainerName:t8},U[90]=k,U[91]=T):(k=U[90],T=U[91]),U[92]!==eF.text?(E=(0,o.jsxs)(L.A,{as:"h1",className:"flex-1 f5",variant:"small",id:"anchored-review-title",children:["Finish your ",eF.text]}),U[92]=eF.text,U[93]=E):E=U[93],U[94]!==ew||U[95]!==eg?(R=ew&&(0,o.jsx)(W.K,{icon:q.MaximizeIcon,className:t$,variant:"invisible","aria-label":"Expand this section",onClick:()=>eg("dialog")}),U[94]=ew,U[95]=eg,U[96]=R):R=U[96],U[97]!==eM?(A=(0,o.jsx)(W.K,{icon:q.XIcon,variant:"invisible","aria-label":"Close",onClick:eM}),U[97]=eM,U[98]=A):A=U[98],U[99]!==R||U[100]!==A?(D=(0,o.jsxs)(tS.B,{direction:"horizontal",align:"center",gap:"none",children:[R,A]}),U[99]=R,U[100]=A,U[101]=D):D=U[101],U[102]!==E||U[103]!==D?(P=(0,o.jsxs)(tS.B,{direction:"horizontal",align:"center",justify:"space-between",className:"py-2 border-bottom px-3",children:[E,D]}),U[102]=E,U[103]=D,U[104]=P):P=U[104],U[105]!==eU?(O=(0,o.jsx)("div",{className:tU,children:eU}),U[105]=eU,U[106]=O):O=U[106],U[107]!==eq?(F=(0,o.jsx)("div",{className:"p-3 border-top",children:(0,o.jsx)(eq,{})}),U[107]=eq,U[108]=F):F=U[108],U[109]!==eM||U[110]!==eH||U[111]!==P||U[112]!==O||U[113]!==F?(B=(0,o.jsxs)(tI.T,{open:eH,anchorRef:eN,width:"xlarge",onClose:eM,displayCloseButton:!1,variant:S,renderAnchor:null,focusZoneSettings:k,overlayProps:T,children:[P,O,F]}),U[109]=eM,U[110]=eH,U[111]=P,U[112]=O,U[113]=F,U[114]=B):B=U[114],U[115]!==eU||U[116]!==eq||U[117]!==eM||U[118]!==ef||U[119]!==eF.text?(M="dialog"===ef&&(0,o.jsx)(g.l,{onClose:eM,returnFocusRef:eN,"aria-label":"Review changes",position:{narrow:"fullscreen",regular:"right",wide:"right"},title:`Finish your ${eF.text}`,renderFooter:()=>(0,o.jsx)(g.l.Footer,{children:(0,o.jsx)(eq,{})}),children:eU}),U[115]=eU,U[116]=eq,U[117]=eM,U[118]=ef,U[119]=eF.text,U[120]=M):M=U[120],U[121]!==N||U[122]!==B||U[123]!==M?(V=(0,o.jsxs)(o.Fragment,{children:[N,C,B,M]}),U[121]=N,U[122]=B,U[123]=M,U[124]=V):V=U[124],V}:function({currentUserLogin:e,pullRequest:t,repository:n,redirectOnMutation:i=!0}){let{author:a,pathName:s,state:r,viewerAllowedNonCommentReviewTypes:l,viewerHasViolatedPushPolicy:d,viewerIsCopilotAttributed:c,comparison:u}=t,m=(0,I.ys)(),p=(0,I.HZ)(),{persistedReview:h,persistReviewToStorage:f,removePersistedReviewFromStorage:y}=tO(s),x=tq(m?.pendingReviewIDs??[],p),b=x?.length??0,_=a?.login===e,j=r!==tk.Q.Closed&&r!==tk.Q.Merged,w="WRITE"===n.viewerPermission||"ADMIN"===n.viewerPermission,N=u.headOid,[C,S]=(0,tC.A)("none"),[k,T]=(0,tC.A)("idle"),[E,R]=(0,tC.A)(),[A,D]=(0,tC.A)(h?.event??tT.comment),P=(m?.pendingReviewIDs??[]).length>0,O=(0,v.useRef)(null),F=h?.text??"",B=(0,v.useRef)(F),[M,V]=(0,tC.A)(!!h?.text),U="submitting"===k||!M&&A===tT.comment&&!b,{sendPullRequestAnalyticsEvent:H}=(0,$.q)(),G=(0,v.useCallback)(e=>{B.current=e,V(!!e.trim()),f(A,e)},[f,A,V]),z=(0,v.useCallback)(e=>{Object.values(tT).includes(e)&&(D(e),f(e,B.current))},[f,D]),{mutate:K}=tE({onSuccess:({redirectUrl:e})=>{y(),i&&(window.location.href=e)},onError:e=>{T("idle"),R(e.message)}}),{mutate:Z}=tR({onSuccess:({redirectUrl:e})=>{y(),i&&(window.location.href=e)},onError:e=>{T("idle"),R(e.message)}}),J=(0,v.useCallback)(()=>{U||(E&&R(void 0),T("submitting"),H("submit_review_dialog.submit","SUBMIT_REVIEW_BUTTON"),K({body:B.current,event:A,headSha:N}))},[E,N,A,H,R,T,U,K]),Y=(0,v.useCallback)(()=>{0===(m?.pendingReviewIDs??[]).length||confirm("Are you sure you want to cancel? You will lose all your pending comments.")&&(E&&R(void 0),T("canceling"),H("submit_review_dialog.cancel","CANCEL_REVIEW_BUTTON"),Z())},[Z,E,m?.pendingReviewIDs,H,R,T]),X=(0,v.useMemo)(()=>ne({isPROpen:j,viewerAllowedNonCommentReviewTypes:l,viewerIsAuthor:_}),[l,_,j]),ee=(0,v.useCallback)(()=>{window.innerWidth<768?S("dialog"):S("anchored"),H("submit_review_dialog.open","REVIEW_CHANGES_BUTTON")},[H,S]),et=(0,v.useCallback)(()=>{S("none")},[S]),en=(0,v.useCallback)(()=>{S("none")},[S]),ei=(0,v.useCallback)(()=>{"none"===C?ee():et()},[et,ee,C]),ea=(0,v.useMemo)(()=>(0,o.jsx)(na,{initialReviewBody:F,isPROpen:j,onReviewBodyChange:G,reviewEvent:A,viewerAllowedNonCommentReviewTypes:l,viewerCanWriteToRepo:w,viewerHasViolatedPushPolicy:d,viewerIsAuthor:_,viewerIsCopilotAttributed:c,commentsList:x,totalPendingComments:b,handleNavigateToDiffComment:en,handleReviewSubmit:J,handleReviewEventChange:z}),[x,en,z,J,F,j,G,A,b,l,w,d,_,c]);if(X.isHidden)return null;let es=()=>(0,o.jsx)(ni,{errorMessage:E,hasPendingReviews:P,reviewSubmissionState:k,handleReviewCancel:Y,handleCloseReviewDialog:et,handleReviewSubmit:J,submitDisabled:U,reviewMenuButtonDisplayState:X});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(Q.Q,{count:b||void 0,className:tF,trailingAction:q.TriangleDownIcon,variant:"primary",onClick:ei,size:"small",ref:O,children:["Submit ",X.text]}),(0,o.jsx)(t9,{portalName:t8}),(0,o.jsxs)(tI.T,{open:"anchored"===C,anchorRef:O,width:"xlarge",onClose:et,displayCloseButton:!1,variant:{regular:"anchored",narrow:"fullscreen"},renderAnchor:null,focusZoneSettings:{disabled:!0},overlayProps:{role:"dialog","aria-labelledby":"anchored-review-title","aria-modal":"true",portalContainerName:t8},children:[(0,o.jsxs)(tS.B,{direction:"horizontal",align:"center",justify:"space-between",className:"py-2 border-bottom px-3",children:[(0,o.jsxs)(L.A,{as:"h1",className:"flex-1 f5",variant:"small",id:"anchored-review-title",children:["Finish your ",X.text]}),(0,o.jsxs)(tS.B,{direction:"horizontal",align:"center",gap:"none",children:[P&&(0,o.jsx)(W.K,{icon:q.MaximizeIcon,className:t$,variant:"invisible","aria-label":"Expand this section",onClick:()=>S("dialog")}),(0,o.jsx)(W.K,{icon:q.XIcon,variant:"invisible","aria-label":"Close",onClick:et})]})]}),(0,o.jsx)("div",{className:tU,children:ea}),(0,o.jsx)("div",{className:"p-3 border-top",children:(0,o.jsx)(es,{})})]}),"dialog"===C&&(0,o.jsx)(g.l,{onClose:et,returnFocusRef:O,"aria-label":"Review changes",position:{narrow:"fullscreen",regular:"right",wide:"right"},title:`Finish your ${X.text}`,renderFooter:()=>(0,o.jsx)(g.l.Footer,{children:(0,o.jsx)(es,{})}),children:ea})]})},nn=(0,v.forwardRef)((0,d.Z6)()?(e,t)=>{let n,i,a,s,r,l=(0,c.c)(12);l[0]!==e?({initialValue:n,onChange:i,...a}=e,l[0]=e,l[1]=n,l[2]=i,l[3]=a):(n=l[1],i=l[2],a=l[3]);let[d,u]=(0,tC.A)(n);l[4]!==i||l[5]!==u?(s=e=>{u(e),i(e)},l[4]=i,l[5]=u,l[6]=s):s=l[6];let m=s;return l[7]!==m||l[8]!==a||l[9]!==t||l[10]!==d?(r=(0,o.jsx)(tN.S,{...a,value:d,onChange:m,ref:t}),l[7]=m,l[8]=a,l[9]=t,l[10]=d,l[11]=r):r=l[11],r}:({initialValue:e,onChange:t,...n},i)=>{let[a,s]=(0,tC.A)(e),r=(0,v.useCallback)(e=>{s(e),t(e)},[s,t]);return(0,o.jsx)(tN.S,{...n,value:a,onChange:r,ref:i})});nn.displayName="ControlledCommentBox";let ni=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m=(0,c.c)(28),{errorMessage:p,handleReviewCancel:h,handleCloseReviewDialog:f,handleReviewSubmit:g,hasPendingReviews:y,submitDisabled:x,reviewMenuButtonDisplayState:v,reviewSubmissionState:b}=e,_="canceling"===b,j="submitting"===b;m[0]!==p?(t=p&&(0,o.jsxs)(eJ.A,{className:tV,variant:"danger",children:[(0,o.jsx)(q.StopIcon,{className:"mr-2"}),p]}),m[0]=p,m[1]=t):t=m[1],m[2]!==h||m[3]!==y||m[4]!==_||m[5]!==j||m[6]!==v.text?(n=y?(0,o.jsx)(Q.Q,{disabled:_||j,loading:_,onClick:h,tabIndex:0,variant:"danger",children:(0,o.jsxs)(tS.B,{direction:"horizontal",align:"center",children:["Discard ",v.text]})}):(0,o.jsx)("div",{}),m[2]=h,m[3]=y,m[4]=_,m[5]=j,m[6]=v.text,m[7]=n):n=m[7];let w=_||j;m[8]!==f||m[9]!==w?(i=(0,o.jsx)(Q.Q,{onClick:f,disabled:w,children:"Cancel"}),m[8]=f,m[9]=w,m[10]=i):i=m[10];let N=x||j;return m[11]===Symbol.for("react.memo_cache_sentinel")?(a=(0,o.jsx)(tW.U,{keys:"Mod+enter"}),m[11]=a):a=m[11],m[12]!==v.text?(s=(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-center",children:["Submit ",v.text]}),m[12]=v.text,m[13]=s):s=m[13],m[14]!==g||m[15]!==j||m[16]!==N||m[17]!==s?(r=(0,o.jsx)(Q.Q,{disabled:N,variant:"primary",onClick:g,loading:j,className:tM,trailingVisual:a,children:s}),m[14]=g,m[15]=j,m[16]=N,m[17]=s,m[18]=r):r=m[18],m[19]!==i||m[20]!==r?(l=(0,o.jsxs)("div",{className:"d-flex flex-row gap-2",children:[i,r]}),m[19]=i,m[20]=r,m[21]=l):l=m[21],m[22]!==n||m[23]!==l?(d=(0,o.jsxs)("div",{className:"d-flex flex-row flex-1 flex-items-center flex-justify-between gap-2",children:[n,l]}),m[22]=n,m[23]=l,m[24]=d):d=m[24],m[25]!==t||m[26]!==d?(u=(0,o.jsxs)(o.Fragment,{children:[t,d]}),m[25]=t,m[26]=d,m[27]=u):u=m[27],u}:function({errorMessage:e,handleReviewCancel:t,handleCloseReviewDialog:n,handleReviewSubmit:i,hasPendingReviews:a,submitDisabled:s,reviewMenuButtonDisplayState:r,reviewSubmissionState:l}){let d="canceling"===l,c="submitting"===l;return(0,o.jsxs)(o.Fragment,{children:[e&&(0,o.jsxs)(eJ.A,{className:tV,variant:"danger",children:[(0,o.jsx)(q.StopIcon,{className:"mr-2"}),e]}),(0,o.jsxs)("div",{className:"d-flex flex-row flex-1 flex-items-center flex-justify-between gap-2",children:[a?(0,o.jsx)(Q.Q,{disabled:d||c,loading:d,onClick:t,tabIndex:0,variant:"danger",children:(0,o.jsxs)(tS.B,{direction:"horizontal",align:"center",children:["Discard ",r.text]})}):(0,o.jsx)("div",{}),(0,o.jsxs)("div",{className:"d-flex flex-row gap-2",children:[(0,o.jsx)(Q.Q,{onClick:n,disabled:d||c,children:"Cancel"}),(0,o.jsx)(Q.Q,{disabled:s||c,variant:"primary",onClick:i,loading:c,className:tM,trailingVisual:(0,o.jsx)(tW.U,{keys:"Mod+enter"}),children:(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-center",children:["Submit ",r.text]})})]})]})]})},na=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l=(0,c.c)(24),{initialReviewBody:d,isPROpen:u,onReviewBodyChange:m,reviewEvent:p,viewerAllowedNonCommentReviewTypes:h,viewerCanWriteToRepo:f,viewerHasViolatedPushPolicy:g,viewerIsAuthor:y,viewerIsCopilotAttributed:x,commentsList:b,totalPendingComments:_,handleNavigateToDiffComment:j,handleReviewSubmit:w,handleReviewEventChange:N}=e,C=(0,v.useRef)(null);return l[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{let e=window.setTimeout(()=>C.current?.focus());return()=>{window.clearTimeout(e)}},n=[],l[0]=t,l[1]=n):(t=l[0],n=l[1]),(0,v.useEffect)(t,n),l[2]!==w||l[3]!==d||l[4]!==m?(i=(0,o.jsx)(nn,{ref:C,label:"Add review comment",placeholder:"Leave a comment",className:tB,initialValue:d,onChange:m,onPrimaryAction:w}),l[2]=w,l[3]=d,l[4]=m,l[5]=i):i=l[5],l[6]!==N||l[7]!==w||l[8]!==u||l[9]!==p||l[10]!==h||l[11]!==f||l[12]!==g||l[13]!==y||l[14]!==x?(a=(0,o.jsx)(tY,{isPROpen:u,reviewEvent:p,viewerAllowedNonCommentReviewTypes:h,viewerCanWriteToRepo:f,viewerHasViolatedPushPolicy:g,viewerIsAuthor:y,viewerIsCopilotAttributed:x,handleReviewEventChange:N,handleReviewSubmit:w}),l[6]=N,l[7]=w,l[8]=u,l[9]=p,l[10]=h,l[11]=f,l[12]=g,l[13]=y,l[14]=x,l[15]=a):a=l[15],l[16]!==b||l[17]!==j||l[18]!==_?(s=(0,o.jsx)(t6,{totalPendingComments:_,commentsList:b,handleNavigateToDiffComment:j}),l[16]=b,l[17]=j,l[18]=_,l[19]=s):s=l[19],l[20]!==i||l[21]!==a||l[22]!==s?(r=(0,o.jsxs)(o.Fragment,{children:[i,a,s]}),l[20]=i,l[21]=a,l[22]=s,l[23]=r):r=l[23],r}:function({initialReviewBody:e,isPROpen:t,onReviewBodyChange:n,reviewEvent:i,viewerAllowedNonCommentReviewTypes:a,viewerCanWriteToRepo:s,viewerHasViolatedPushPolicy:r,viewerIsAuthor:l,viewerIsCopilotAttributed:d,commentsList:c,totalPendingComments:u,handleNavigateToDiffComment:m,handleReviewSubmit:p,handleReviewEventChange:h}){let f=(0,v.useRef)(null);return(0,v.useEffect)(()=>{let e=window.setTimeout(()=>f.current?.focus());return()=>{window.clearTimeout(e)}},[]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(nn,{ref:f,label:"Add review comment",placeholder:"Leave a comment",className:tB,initialValue:e,onChange:n,onPrimaryAction:p}),(0,o.jsx)(tY,{isPROpen:t,reviewEvent:i,viewerAllowedNonCommentReviewTypes:a,viewerCanWriteToRepo:s,viewerHasViolatedPushPolicy:r,viewerIsAuthor:l,viewerIsCopilotAttributed:d,handleReviewEventChange:h,handleReviewSubmit:p}),(0,o.jsx)(t6,{totalPendingComments:u,commentsList:c,handleNavigateToDiffComment:m})]})};try{nt.displayName||(nt.displayName="ReviewMenuButton")}catch{}try{(i=ReviewMenuBody).displayName||(i.displayName="ReviewMenuBody")}catch{}try{(a=ReviewMenuFooter).displayName||(a.displayName="ReviewMenuFooter")}catch{}try{ni.displayName||(ni.displayName="ReviewMenuFooterComponent")}catch{}try{na.displayName||(na.displayName="ReviewMenuBodyComponent")}catch{}var ns=n(27028),nr=n(39029);let nl="RefreshButton-module__refresh--gOrN1";var no=n(91747),nd=n(43073),nc=n(61526);let nu=(0,d.Z6)()?function(e){let t,n,i,a=(0,c.c)(6),{aliveChannel:s,pathName:r}=e,[l,d]=(0,v.useState)(!1),u=(0,nd.E)(),m=(0,no.u)("combined_pr_changes_route")?`${r}/changes`:`${r}/files`,{markComparisonOutdated:p}=(0,I.yo)();a[0]!==p?(t=()=>{p(),d(!0)},a[0]=p,a[1]=t):t=a[1];let h=t;if(a[2]===Symbol.for("react.memo_cache_sentinel")?(n={git_updated:!0},a[2]=n):n=a[2],(0,nr.G)(s,h,n),!l)return null;if(u){let e;return a[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(np,{}),a[3]=e):e=a[3],e}return a[4]!==m?(i=(0,o.jsx)(nm,{refreshUrl:m}),a[4]=m,a[5]=i):i=a[5],i}:function({aliveChannel:e,pathName:t}){let[n,i]=(0,v.useState)(!1),a=(0,nd.E)(),s=(0,no.u)("combined_pr_changes_route")?`${t}/changes`:`${t}/files`,{markComparisonOutdated:r}=(0,I.yo)();return((0,nr.G)(e,()=>{r(),i(!0)},{git_updated:!0}),n)?a?(0,o.jsx)(np,{}):(0,o.jsx)(nm,{refreshUrl:s}):null},nm=(0,d.Z6)()?function(e){let t,n,i=(0,c.c)(5),{refreshUrl:a}=e;i[0]!==a?(t=e=>{e.preventDefault(),window.location.href=a},i[0]=a,i[1]=t):t=i[1];let s=t;return i[2]!==s||i[3]!==a?(n=(0,o.jsx)(Q.Q,{as:D.A,variant:"invisible",href:a,className:nl,leadingVisual:q.SyncIcon,size:"small",onClick:s,children:"Refresh"}),i[2]=s,i[3]=a,i[4]=n):n=i[4],n}:function({refreshUrl:e}){return(0,o.jsx)(Q.Q,{as:D.A,variant:"invisible",href:e,className:nl,leadingVisual:q.SyncIcon,size:"small",onClick:t=>{t.preventDefault(),window.location.href=e},children:"Refresh"})},np=(0,d.Z6)()?function(){let e,t,n=(0,c.c)(4),i=(0,nc.zy)(),[a,s]=(0,v.useState)(!1);n[0]===Symbol.for("react.memo_cache_sentinel")?(e=async()=>{s(!0)},n[0]=e):e=n[0];let r=e;return n[1]!==a||n[2]!==i.pathname?(t=(0,o.jsx)(Q.Q,{as:nc.N_,to:i.pathname,variant:"invisible",className:nl,leadingVisual:q.SyncIcon,size:"small",onClick:r,loading:a,preventScrollReset:!0,children:"Refresh"}),n[1]=a,n[2]=i.pathname,n[3]=t):t=n[3],t}:function(){let e=(0,nc.zy)(),[t,n]=(0,v.useState)(!1),i=async()=>{n(!0)};return(0,o.jsx)(Q.Q,{as:nc.N_,to:e.pathname,variant:"invisible",className:nl,leadingVisual:q.SyncIcon,size:"small",onClick:i,loading:t,preventScrollReset:!0,children:"Refresh"})};try{nu.displayName||(nu.displayName="RefreshButton")}catch{}try{nm.displayName||(nm.displayName="NavigatorRefreshButton")}catch{}try{np.displayName||(np.displayName="DataRouterRefreshButton")}catch{}var nh=n(40523),nf=n(68874),ng=n(14808);let ny=(0,v.forwardRef)(function(e,t){let n,i,a,s,r,l,d,u,m,p,h,f,g,y,x,b,_,w,N,C,S,I,k,T,E=(0,c.c)(77),{items:R,onMultiSelect:L,onSingleSelect:A,onApply:D,onCancel:P,buttonProps:O,anchorLabel:F,variant:B,title:M,dialogProps:V}=e,$=void 0===B?"overlay":B,U=(0,v.useRef)(null),[q,W]=(0,v.useState)(!1),[H,G]=(0,v.useState)();E[0]===Symbol.for("react.memo_cache_sentinel")?(n=()=>({open:()=>W(!0)}),E[0]=n):n=E[0],(0,v.useImperativeHandle)(t,n),E[1]!==R?(i=R.reduce(nv,{single:[],multiple:[]}),E[1]=R,E[2]=i):i=E[2];let z=i;E[3]!==z?(a=()=>z,E[3]=z,E[4]=a):a=E[4];let[K,Z]=(0,v.useState)(a);E[5]!==K?.multiple||E[6]!==K?.single?(s=e=>{Z({single:K?.single.map(t=>t.id===e.id?{...t,selected:!t.selected}:t.selected?{...t,selected:!1}:t)||[],multiple:K?.multiple||[]})},E[5]=K?.multiple,E[6]=K?.single,E[7]=s):s=E[7];let J=s;E[8]!==K?.multiple||E[9]!==K?.single?(r=e=>{let t=K?.multiple.map(t=>t.id===e.id?{...t,selected:!t.selected}:t)||[];Z({single:K?.single||[],multiple:t})},E[8]=K?.multiple,E[9]=K?.single,E[10]=r):r=E[10];let Y=r;E[11]!==K?.multiple||E[12]!==L||E[13]!==z?.multiple?(l=L?z?.multiple.filter(n_).length:K?.multiple.filter(nb).length||0,E[11]=K?.multiple,E[12]=L,E[13]=z?.multiple,E[14]=l):l=E[14];let X=l;E[15]!==H?.multiple?(d=H?.multiple.filter(nj).length||0,E[15]=H?.multiple,E[16]=d):d=E[16];let ee=d,et=X&&0!==ee?`${ee} commit${ee>1?"s":""} selected`:"Select commits";E[17]!==K||E[18]!==D?(u=()=>{G(K),W(!1),D&&D(K?.multiple.filter(nw)||[])},E[17]=K,E[18]=D,E[19]=u):u=E[19];let en=u;E[20]!==P||E[21]!==z?(m=()=>{Z(z),G(z),P?.()},E[20]=P,E[21]=z,E[22]=m):m=E[22];let ei=m;E[23]!==q?(p=()=>W(!q),E[23]=q,E[24]=p):p=E[24];let ea=F||et;E[25]!==O||E[26]!==p||E[27]!==ea?(h=(0,o.jsx)(Q.Q,{ref:U,onClick:p,...O,children:ea}),E[25]=O,E[26]=p,E[27]=ea,E[28]=h):h=E[28],E[29]!==K?.single||E[30]!==H?.multiple||E[31]!==z?(f=()=>{Z({single:K?.single||[],multiple:H?.multiple||z.multiple}),W(!1)},E[29]=K?.single,E[30]=H?.multiple,E[31]=z,E[32]=f):f=E[32],E[33]===Symbol.for("react.memo_cache_sentinel")?(g={focusOutBehavior:"wrap",focusableElementFilter:nN},E[33]=g):g=E[33],E[34]!==ei?(y=()=>{ei(),W(!1)},E[34]=ei,E[35]=y):y=E[35],E[36]!==K?.single||E[37]!==A||E[38]!==z?(x=A?z.single:K?.single||[],E[36]=K?.single,E[37]=A,E[38]=z,E[39]=x):x=E[39],E[40]!==J||E[41]!==A||E[42]!==$?(b=e=>{A?A(e):J(e),"modal"!==$&&W(!1)},E[40]=J,E[41]=A,E[42]=$,E[43]=b):b=E[43],E[44]!==x||E[45]!==b?(_=(0,o.jsx)(nx,{selectionVariant:"single",items:x,onSelect:b,showGroupHeading:!1}),E[44]=x,E[45]=b,E[46]=_):_=E[46],E[47]!==K?.multiple||E[48]!==L||E[49]!==z?(w=L?z.multiple:K?.multiple||[],E[47]=K?.multiple,E[48]=L,E[49]=z,E[50]=w):w=E[50];let es=L??Y;return E[51]!==w||E[52]!==es?(N=(0,o.jsx)(nx,{selectionVariant:"multiple",items:w,onSelect:es}),E[51]=w,E[52]=es,E[53]=N):N=E[53],E[54]!==_||E[55]!==N?(C=(0,o.jsx)("div",{className:"CommitSelector-module__CommitSelectorContainer--_atPn",children:(0,o.jsxs)(j.l,{role:"listbox",selectionVariant:"single","aria-label":"Selection",children:[_,N]})}),E[54]=_,E[55]=N,E[56]=C):C=E[56],E[57]!==ei||E[58]!==X||E[59]!==en||E[60]!==$?(S=X&&"modal"!==$?(0,o.jsx)(ng.G9,{footerButtons:[{content:"Apply",onClick:en,action:"save"},{content:"Clear",onClick:ei,action:"cancel"}]}):null,E[57]=ei,E[58]=X,E[59]=en,E[60]=$,E[61]=S):S=E[61],E[62]!==C||E[63]!==S?(I=(0,o.jsxs)("div",{className:"CommitSelector-module__CommitSelectorWrapper--Wp_n9",children:[C,S]}),E[62]=C,E[63]=S,E[64]=I):I=E[64],E[65]!==V||E[66]!==q||E[67]!==en||E[68]!==f||E[69]!==y||E[70]!==I||E[71]!==M||E[72]!==$?(k=(0,o.jsx)(ng.KA,{open:q,anchorRef:U,headingId:"select-label",onClose:f,variant:$,focusZoneSettings:g,title:M,dialogProps:V,selectSave:en,selectCancel:y,children:I}),E[65]=V,E[66]=q,E[67]=en,E[68]=f,E[69]=y,E[70]=I,E[71]=M,E[72]=$,E[73]=k):k=E[73],E[74]!==h||E[75]!==k?(T=(0,o.jsxs)(o.Fragment,{children:[h,k]}),E[74]=h,E[75]=k,E[76]=T):T=E[76],T});function nx(e){let t,n=(0,c.c)(5),{items:i,onSelect:a,selectionVariant:s,showGroupHeading:r}=e,l=void 0===r||r;return n[0]!==i||n[1]!==a||n[2]!==s||n[3]!==l?(t=(0,o.jsx)(ng.LR,{selectionVariant:s,items:i,showGroupHeading:l,onSelect:a}),n[0]=i,n[1]=a,n[2]=s,n[3]=l,n[4]=t):t=n[4],t}try{ny.displayName||(ny.displayName="CommitSelector")}catch{}try{nx.displayName||(nx.displayName="CommitSelectorBody")}catch{}function nv(e,t){return"single"===t.selectionVariant?{...e,single:[...e.single,t]}:"multiple"===t.selectionVariant?{...e,multiple:[...e.multiple,t]}:e}function nb(e){return e.selected}function n_(e){return e.selected}function nj(e){return e.selected}function nw(e){return e.selected}function nN(e){return"BUTTON"!==e.tagName}var nC=n(62935),nS=n(70119);function nI(e,t,n,i){let a,s;return"added"===i?(a=Math.min(e,t),s=Math.max(e,n)):e===t?(a=t+1,s=n):(a=t,s=e-1),{newStartIndex:a,newEndIndex:s}}let nk=(0,v.memo)((0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,p,h,f,g,y,x,b,_,w,N,C=(0,c.c)(52),{baseRefOid:S,commitOids:I,commits:k,endOid:T,onClose:E,onRangeUpdated:R,startOid:L}=e;C[0]!==I||C[1]!==T||C[2]!==L?(t=()=>{if(!L||!T)return;let e=L?I.indexOf(L)+1:-1,t=T?I.indexOf(T):-1;if(!(e<0)&&!(t<0))return{start:e,end:t}},C[0]=I,C[1]=T,C[2]=L,C[3]=t):t=C[3];let[A,D]=(0,v.useState)(t);C[4]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{D(void 0)},C[4]=n):n=C[4];let P=n;C[5]!==I||C[6]!==A?(i=(e,t)=>{let n,i=I.indexOf(e);if(A){if(A.start!==A.end||"removed"!==t){let{newStartIndex:e,newEndIndex:a}=nI(i,A.start,A.end,t);n={start:e,end:a}}}else n="added"===t?{start:i,end:i}:void 0;D(n)},C[5]=I,C[6]=A,C[7]=i):i=C[7];let O=i;C[8]!==S||C[9]!==I||C[10]!==T||C[11]!==E||C[12]!==R||C[13]!==A||C[14]!==L?(a=()=>{let e,t;(A&&(A.start>0||A.end<I.length-1)&&(e=A.start>0?I[A.start-1]:S,t=I[A.end]),e===L&&t===T)?E():e&&t?A&&A.start===A.end?R({type:"single",oid:t}):R({type:"range",fromPRBase:e===S,baseOid:e,endOid:t}):R({type:"unfiltered"})},C[8]=S,C[9]=I,C[10]=T,C[11]=E,C[12]=R,C[13]=A,C[14]=L,C[15]=a):a=C[15];let F=a;if(C[16]!==I||C[17]!==k||C[18]!==F||C[19]!==O||C[20]!==E||C[21]!==A){let e=A?I.slice(A.start,A.end+1):[];r=nS.X,g=!0,y=!0,x="Picking a range will select commits in between.",b="multiple",l="Pick one or more commits",d="modal",u="large",m=E,p=P,h=F,s=j.l,f=k.map(t=>{let n=e.includes(t.oid);return(0,o.jsxs)(j.l.Item,{selected:n,onSelect:()=>O(t.oid,n?"removed":"added"),children:[t.messageHeadline,(0,o.jsxs)(j.l.Description,{variant:"block",children:[t.shortOid," \xb7 ",t.actorLogin," \xb7 ",(0,o.jsx)(nC.A,{datetime:t.createdAt})]})]},t.oid)}),C[16]=I,C[17]=k,C[18]=F,C[19]=O,C[20]=E,C[21]=A,C[22]=s,C[23]=r,C[24]=l,C[25]=d,C[26]=u,C[27]=m,C[28]=p,C[29]=h,C[30]=f,C[31]=g,C[32]=y,C[33]=x,C[34]=b}else s=C[22],r=C[23],l=C[24],d=C[25],u=C[26],m=C[27],p=C[28],h=C[29],f=C[30],g=C[31],y=C[32],x=C[33],b=C[34];return C[35]!==s||C[36]!==f?(_=(0,o.jsx)(s,{children:f}),C[35]=s,C[36]=f,C[37]=_):_=C[37],C[38]===Symbol.for("react.memo_cache_sentinel")?(w=(0,o.jsx)(nS.X.Footer,{}),C[38]=w):w=C[38],C[39]!==r||C[40]!==l||C[41]!==d||C[42]!==u||C[43]!==m||C[44]!==p||C[45]!==h||C[46]!==_||C[47]!==g||C[48]!==y||C[49]!==x||C[50]!==b?(N=(0,o.jsxs)(r,{defaultOpen:g,open:y,description:x,selectionVariant:b,title:l,variant:d,width:u,onCancel:m,onClearSelection:p,onSubmit:h,children:[_,w]}),C[39]=r,C[40]=l,C[41]=d,C[42]=u,C[43]=m,C[44]=p,C[45]=h,C[46]=_,C[47]=g,C[48]=y,C[49]=x,C[50]=b,C[51]=N):N=C[51],N}:function({baseRefOid:e,commitOids:t,commits:n,endOid:i,onClose:a,onRangeUpdated:s,startOid:r}){let[l,d]=(0,v.useState)(()=>{if(!r||!i)return;let e=r?t.indexOf(r)+1:-1,n=i?t.indexOf(i):-1;if(!(e<0)&&!(n<0))return{start:e,end:n}}),c=l?t.slice(l.start,l.end+1):[];return(0,o.jsxs)(nS.X,{defaultOpen:!0,open:!0,description:"Picking a range will select commits in between.",selectionVariant:"multiple",title:"Pick one or more commits",variant:"modal",width:"large",onCancel:a,onClearSelection:()=>{d(void 0)},onSubmit:()=>{let n,o;(l&&(l.start>0||l.end<t.length-1)&&(n=l.start>0?t[l.start-1]:e,o=t[l.end]),n===r&&o===i)?a():n&&o?l&&l.start===l.end?s({type:"single",oid:o}):s({type:"range",fromPRBase:n===e,baseOid:n,endOid:o}):s({type:"unfiltered"})},children:[(0,o.jsx)(j.l,{children:n.map(e=>{let n=c.includes(e.oid);return(0,o.jsxs)(j.l.Item,{selected:n,onSelect:()=>((e,n)=>{let i,a=t.indexOf(e);if(l){if(l.start!==l.end||"removed"!==n){let{newStartIndex:e,newEndIndex:t}=nI(a,l.start,l.end,n);i={start:e,end:t}}}else i="added"===n?{start:a,end:a}:void 0;d(i)})(e.oid,n?"removed":"added"),children:[e.messageHeadline,(0,o.jsxs)(j.l.Description,{variant:"block",children:[e.shortOid," \xb7 ",e.actorLogin," \xb7 ",(0,o.jsx)(nC.A,{datetime:e.createdAt})]})]},e.oid)})}),(0,o.jsx)(nS.X.Footer,{})]})});try{nk.displayName||(nk.displayName="CommitsSelector")}catch{}let nT="All commits";function nE({endOid:e,startOid:t,firstCommitInRange:n}){return n&&e&&n===e?`Commit ${e.slice(0,7)}`:t&&e?`${t.slice(0,7)}..${e.slice(0,7)}`:nT}function nR({commitOids:e,endOid:t,firstCommitInRange:n}){if(n&&t&&n===t)return`Commit ${t.slice(0,7)}...`;if(n&&t){let i=e.indexOf(n),a=e.indexOf(t);if(i>-1&&a>-1)return`${a-i+1} commits...`}return"Specific commit\u2026"}let nL={default:{variant:"default",leadingVisual:q.VersionsIcon},condensed:{variant:"invisible",leadingVisual:void 0}},nA=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,p,h,f,g,y,x,b,_=(0,c.c)(56),{onRangeUpdated:w,commits:N,lastReviewOid:C,variant:S}=e,k=void 0===S?"default":S,{baseOid:T,headOid:E}=(0,I.E4)(),{fullDiff:R}=(0,I.L3)(),{baseOid:L}=R,A=(0,I.ww)();_[0]!==N?(t=N.map(nD),_[0]=N,_[1]=t):t=_[1];let D=t,P=D[D.length-1],O=!!C&&T===C&&E===P,[F,B]=(0,v.useState)(!1),[M,V]=(0,v.useState)(!1);e:{if(!T){n=void 0;break e}if(T===L){n=D[0];break e}let e=D.findIndex(e=>e===T);if(e<0){n=void 0;break e}n=D[e+1]}let U=n;_[2]!==E||_[3]!==U||_[4]!==T?(i=nE({endOid:E,startOid:T,firstCommitInRange:U}),_[2]=E,_[3]=U,_[4]=T,_[5]=i):i=_[5];let W=i;_[6]!==D||_[7]!==E||_[8]!==U?(a=nR({endOid:E,firstCommitInRange:U,commitOids:D}),_[6]=D,_[7]=E,_[8]=U,_[9]=a):a=_[9];let H=a,{sendPullRequestAnalyticsEvent:G}=(0,$.q)();_[10]!==G?(s=()=>{G("commits_menu.select_commit","COMMITS_MENU_ITEM"),B(!1),V(!0)},_[10]=G,_[11]=s):s=_[11];let z=s,K=(ey.cg?.innerWidth??1e3)<543;_[12]!==w?(r=()=>{w({type:"unfiltered"})},_[12]=w,_[13]=r):r=_[13];let Z=r;_[14]!==w?(l=e=>{V(!1),w(e)},_[14]=w,_[15]=l):l=_[15];let J=l;_[16]!==G?(d=e=>{B(e),e&&G("commits_menu.open","COMMITS_MENU")},_[16]=G,_[17]=d):d=_[17];let Y=d,X=K?void 0:nL[k].leadingVisual,ee=nL[k];_[18]!==W||_[19]!==X||_[20]!==ee.variant?(u=(0,o.jsx)(eq.W.Anchor,{children:(0,o.jsx)(Q.Q,{alignContent:"start",className:"flex-shrink-0",leadingVisual:X,size:"small",variant:ee.variant,trailingAction:q.TriangleDownIcon,children:W})}),_[18]=W,_[19]=X,_[20]=ee.variant,_[21]=u):u=_[21];let et=!A;_[22]!==Z||_[23]!==et?(m=(0,o.jsx)(j.l.Item,{selected:et,onSelect:Z,children:nT}),_[22]=Z,_[23]=et,_[24]=m):m=_[24],_[25]!==L||_[26]!==O||_[27]!==J||_[28]!==P||_[29]!==C?(p=C&&P&&C!==P&&(0,o.jsx)(j.l.Item,{selected:O,onSelect:()=>J({type:"range",fromPRBase:C===L,baseOid:C,endOid:P}),children:"Changes since your last review"}),_[25]=L,_[26]=O,_[27]=J,_[28]=P,_[29]=C,_[30]=p):p=_[30],_[31]===Symbol.for("react.memo_cache_sentinel")?(h=(0,o.jsx)(j.l.Divider,{}),_[31]=h):h=_[31];let en=A&&!O;return _[32]!==H||_[33]!==z||_[34]!==en?(f=(0,o.jsx)(j.l.Item,{selected:en,onSelect:z,children:H}),_[32]=H,_[33]=z,_[34]=en,_[35]=f):f=_[35],_[36]!==m||_[37]!==p||_[38]!==f?(g=(0,o.jsx)(eq.W.Overlay,{side:"outside-bottom",width:"small",children:(0,o.jsxs)(j.l,{selectionVariant:"single",children:[m,p,h,f]})}),_[36]=m,_[37]=p,_[38]=f,_[39]=g):g=_[39],_[40]!==Y||_[41]!==F||_[42]!==u||_[43]!==g?(y=(0,o.jsxs)(eq.W,{open:F,onOpenChange:Y,children:[u,g]}),_[40]=Y,_[41]=F,_[42]=u,_[43]=g,_[44]=y):y=_[44],_[45]!==L||_[46]!==D||_[47]!==N||_[48]!==E||_[49]!==J||_[50]!==M||_[51]!==T?(x=M&&(0,o.jsx)(nk,{baseRefOid:L||"",commitOids:D,commits:N,endOid:E,startOid:T,onClose:()=>V(!1),onRangeUpdated:J}),_[45]=L,_[46]=D,_[47]=N,_[48]=E,_[49]=J,_[50]=M,_[51]=T,_[52]=x):x=_[52],_[53]!==y||_[54]!==x?(b=(0,o.jsxs)(o.Fragment,{children:[y,x]}),_[53]=y,_[54]=x,_[55]=b):b=_[55],b}:function({onRangeUpdated:e,commits:t,lastReviewOid:n,variant:i="default"}){let{baseOid:a,headOid:s}=(0,I.E4)(),{fullDiff:{baseOid:r}}=(0,I.L3)(),l=(0,I.ww)(),d=(0,v.useMemo)(()=>t.map(e=>e.oid),[t]),c=d[d.length-1],u=!!n&&a===n&&s===c,[m,p]=(0,v.useState)(!1),[h,f]=(0,v.useState)(!1),g=(0,v.useMemo)(()=>{if(!a)return;if(a===r)return d[0];let e=d.findIndex(e=>e===a);if(!(e<0))return d[e+1]},[r,d,a]),y=nE({endOid:s,startOid:a,firstCommitInRange:g}),x=nR({endOid:s,firstCommitInRange:g,commitOids:d}),{sendPullRequestAnalyticsEvent:b}=(0,$.q)(),_=(ey.cg?.innerWidth??1e3)<543,w=t=>{f(!1),e(t)};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(eq.W,{open:m,onOpenChange:e=>{p(e),e&&b("commits_menu.open","COMMITS_MENU")},children:[(0,o.jsx)(eq.W.Anchor,{children:(0,o.jsx)(Q.Q,{alignContent:"start",className:"flex-shrink-0",leadingVisual:_?void 0:nL[i].leadingVisual,size:"small",variant:nL[i].variant,trailingAction:q.TriangleDownIcon,children:y})}),(0,o.jsx)(eq.W.Overlay,{side:"outside-bottom",width:"small",children:(0,o.jsxs)(j.l,{selectionVariant:"single",children:[(0,o.jsx)(j.l.Item,{selected:!l,onSelect:()=>{e({type:"unfiltered"})},children:nT}),n&&c&&n!==c&&(0,o.jsx)(j.l.Item,{selected:u,onSelect:()=>w({type:"range",fromPRBase:n===r,baseOid:n,endOid:c}),children:"Changes since your last review"}),(0,o.jsx)(j.l.Divider,{}),(0,o.jsx)(j.l.Item,{selected:l&&!u,onSelect:()=>{b("commits_menu.select_commit","COMMITS_MENU_ITEM"),p(!1),f(!0)},children:x})]})})]}),h&&(0,o.jsx)(nk,{baseRefOid:r||"",commitOids:d,commits:t,endOid:s,startOid:a,onClose:()=>f(!1),onRangeUpdated:w})]})};function nD(e){return e.oid}try{nA.displayName||(nA.displayName="CommitsDropdown")}catch{}var nP=n(68534);let nO=(0,d.Z6)()?function(e){let t,n=(0,c.c)(4);if((0,no.u)("new_pr_files_commit_selector")){let t;return n[0]!==e?(t=(0,o.jsx)(nB,{...e}),n[0]=e,n[1]=t):t=n[1],t}return n[2]!==e?(t=(0,o.jsx)(nF,{...e}),n[2]=e,n[3]=t):t=n[3],t}:function(e){return(0,no.u)("new_pr_files_commit_selector")?(0,o.jsx)(nB,{...e}):(0,o.jsx)(nF,{...e})},nF=(0,d.Z6)()?function(e){let t,n,i=(0,c.c)(10),{ownerLogin:a,repositoryName:s,pullRequestNumber:r,commits:l,lastReviewOid:d,variant:u}=e,m=(0,no.u)("combined_pr_changes_route");i[0]!==m||i[1]!==a||i[2]!==r||i[3]!==s?(t=e=>{let t;if(m)if("unfiltered"===e.type)t=(0,eD.tvs)({owner:a,repo:s,number:r});else if("range"===e.type){let n=e.fromPRBase?"BASE":e.baseOid;t=(0,eD.zLJ)({owner:a,repo:s,number:r,base:n,head:e.endOid})}else t=(0,eD.zLJ)({owner:a,repo:s,number:r,head:e.oid});else if("unfiltered"===e.type)t=(0,eD.jrm)({owner:a,repo:s,number:r});else if("range"===e.type){let n=e.fromPRBase?void 0:e.baseOid;t=(0,eD.nSV)({owner:a,repo:s,number:r,base:n,head:e.endOid})}else t=(0,eD.yIb)({owner:a,repo:s,number:r,commit:e.oid});window.location.href=t},i[0]=m,i[1]=a,i[2]=r,i[3]=s,i[4]=t):t=i[4];let p=t;return i[5]!==l||i[6]!==d||i[7]!==p||i[8]!==u?(n=(0,o.jsx)(nA,{commits:l,lastReviewOid:d,onRangeUpdated:p,variant:u}),i[5]=l,i[6]=d,i[7]=p,i[8]=u,i[9]=n):n=i[9],n}:function({ownerLogin:e,repositoryName:t,pullRequestNumber:n,commits:i,lastReviewOid:a,variant:s}){let r=(0,no.u)("combined_pr_changes_route");return(0,o.jsx)(nA,{commits:i,lastReviewOid:a,onRangeUpdated:i=>{let a;if(r)if("unfiltered"===i.type)a=(0,eD.tvs)({owner:e,repo:t,number:n});else if("range"===i.type){let s=i.fromPRBase?"BASE":i.baseOid;a=(0,eD.zLJ)({owner:e,repo:t,number:n,base:s,head:i.endOid})}else a=(0,eD.zLJ)({owner:e,repo:t,number:n,head:i.oid});else if("unfiltered"===i.type)a=(0,eD.jrm)({owner:e,repo:t,number:n});else if("range"===i.type){let s=i.fromPRBase?void 0:i.baseOid;a=(0,eD.nSV)({owner:e,repo:t,number:n,base:s,head:i.endOid})}else a=(0,eD.yIb)({owner:e,repo:t,number:n,commit:i.oid});window.location.href=a},variant:s})},nB=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,p,f,g,y,x,b,_,j=(0,c.c)(71),{ownerLogin:w,repositoryName:N,pullRequestNumber:C,commits:S,lastReviewOid:k,variant:T}=e,{baseOid:E,headOid:R}=(0,I.E4)(),L=(0,I.ww)(),{fullDiff:A}=(0,I.L3)(),{baseOid:D}=A,P=(0,no.u)("combined_pr_changes_route");j[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,eS.G7)("verbose_commit_selector_announcements"),j[0]=t):t=j[0];let O=t,F=(0,v.useRef)(null);j[1]!==S?(n=S.map(nM),j[1]=S,j[2]=n):n=j[2];let B=n;e:{if(!E){i=void 0;break e}if(E===D){i=B[0];break e}let e=B.findIndex(e=>e===E);if(e<0){i=void 0;break e}i=B[e+1]}let M=i;j[3]!==R||j[4]!==M||j[5]!==E?(a=nE({endOid:R,startOid:E,firstCommitInRange:M}),j[3]=R,j[4]=M,j[5]=E,j[6]=a):a=j[6];let V=a;t:{let e,t;if(!E||!R){s=void 0;break t}let n=E?B.indexOf(E)+1:-1;j[7]!==B||j[8]!==R?(e=R?B.indexOf(R):-1,j[7]=B,j[8]=R,j[9]=e):e=j[9];let i=e;if(n<0||i<0){s=void 0;break t}j[10]!==i||j[11]!==n?(t={start:n,end:i},j[10]=i,j[11]=n,j[12]=t):t=j[12],s=t}let $=s;j[13]!==$?(r=()=>$,j[13]=$,j[14]=r):r=j[14];let[U,W]=(0,v.useState)(r);n:{let e;if(!U){let e;j[15]===Symbol.for("react.memo_cache_sentinel")?(e=new Set,j[15]=e):e=j[15],l=e;break n}j[16]!==B||j[17]!==U.end||j[18]!==U.start?(e=new Set(B.slice(U.start,U.end+1)),j[16]=B,j[17]=U.end,j[18]=U.start,j[19]=e):e=j[19],l=e}let H=l;if(j[20]!==B||j[21]!==S||j[22]!==R||j[23]!==L||j[24]!==k||j[25]!==H||j[26]!==E){let e,t,n;d=[];let i=`${S.length} commit${1!==S.length?"s":""}`,a=!L;j[28]!==a||j[29]!==i?(e={id:"all-commits",label:"All commits",description:i,descriptionVariant:"block",selectionVariant:"single",selected:a},j[28]=a,j[29]=i,j[30]=e):e=j[30],d.push(e);let s=S[S.length-1]?.oid,r=!1,l=!1;if(k)if(s)if(k===s)t="No new commits since last review",r=!0;else{let e=B.indexOf(k),n=e>=0?B.length-e-1:S.length;t=`${n} commit${1!==n?"s":""}`,l=E===k&&R===s}else t="No commits available",r=!0;else t="No previous review found",r=!0;for(let[e,i]of(j[31]!==l||j[32]!==t||j[33]!==r?(n={id:"changes-since-review",label:"Changes since your last review",description:t,descriptionVariant:"block",selectionVariant:"single",selected:l,disabled:r},j[31]=l,j[32]=t,j[33]=r,j[34]=n):n=j[34],d.push(n),S.entries()))d.push({id:i.oid,label:i.messageHeadline,description:`${i.actorLogin} committed ${(0,nf.V)(new Date(i.createdAt))}`,descriptionVariant:"block",selectionVariant:"multiple",selected:H.has(i.oid),groupId:1,groupTitle:0===e?"Select a range of commits":void 0,trailingVisual:i.shortOid});j[20]=B,j[21]=S,j[22]=R,j[23]=L,j[24]=k,j[25]=H,j[26]=E,j[27]=d}else d=j[27];let G=d;j[35]!==P||j[36]!==w||j[37]!==C||j[38]!==N?(u=e=>{let t;if(P)if("unfiltered"===e.type)t=(0,eD.tvs)({owner:w,repo:N,number:C});else if("range"===e.type){let n=e.fromPRBase?"BASE":e.baseOid;t=(0,eD.zLJ)({owner:w,repo:N,number:C,base:n,head:e.endOid})}else t=(0,eD.zLJ)({owner:w,repo:N,number:C,head:e.oid});else if("unfiltered"===e.type)t=(0,eD.jrm)({owner:w,repo:N,number:C});else if("range"===e.type){let n=e.fromPRBase?void 0:e.baseOid;t=(0,eD.nSV)({owner:w,repo:N,number:C,base:n,head:e.endOid})}else t=(0,eD.yIb)({owner:w,repo:N,number:C,commit:e.oid});window.location.href=t},j[35]=P,j[36]=w,j[37]=C,j[38]=N,j[39]=u):u=j[39];let z=u;j[40]!==D||j[41]!==S||j[42]!==k||j[43]!==z?(m=e=>{if("all-commits"===e.id)z({type:"unfiltered"});else if("changes-since-review"===e.id&&k){let e=S[S.length-1]?.oid;e&&z({type:"range",fromPRBase:k===D,baseOid:k,endOid:e})}},j[40]=D,j[41]=S,j[42]=k,j[43]=z,j[44]=m):m=j[44];let K=m;j[45]!==B||j[46]!==H||j[47]!==U?(p=e=>{let t,n=B.indexOf(e.id),i=H.has(e.id)?"removed":"added";if(U){if(U.start!==U.end||"removed"!==i){let{newStartIndex:e,newEndIndex:a}=function(e,t,n,i){let a,s;return"added"===i?(a=Math.min(e,t),s=Math.max(e,n)):e===t?(a=t+1,s=n):(a=t,s=e-1),{newStartIndex:a,newEndIndex:s}}(n,U.start,U.end,i);t={start:e,end:a}}}else t="added"===i?{start:n,end:n}:void 0;if(t){if(void 0!==t.start&&t.start===t.end){let e=t.start+1,n=B[t.start];if(n){let t=(0,nP.F)(n),i=O?`Commit ${t} selected`:`Commit ${e} selected`;(0,to.i)(i)}}else if(void 0!==t.start&&void 0!==t.end){let e=t.start+1,n=t.end+1,i=B[t.start],a=B[t.end];if(i&&a){let t=(0,nP.F)(i),s=(0,nP.F)(a),r=O?`Commits ${t} to ${s} selected`:`Commits ${e} to ${n} selected`;(0,to.i)(r)}}}else(0,to.i)("No commits selected");W(t)},j[45]=B,j[46]=H,j[47]=U,j[48]=p):p=j[48];let Q=p;j[49]!==D||j[50]!==B||j[51]!==$?.end||j[52]!==$?.start||j[53]!==z||j[54]!==U?(f=()=>{let e,t;U&&(U.start!==$?.start||U.end!==$?.end)&&((U.start>0||U.end<B.length-1||1===B.length)&&(e=U.start>0?B[U.start-1]:D,t=B[U.end]),e&&t?U.start===U.end?z({type:"single",oid:t}):z({type:"range",fromPRBase:e===D,baseOid:e,endOid:t}):z({type:"unfiltered"}))},j[49]=D,j[50]=B,j[51]=$?.end,j[52]=$?.start,j[53]=z,j[54]=U,j[55]=f):f=j[55],$?.start,$?.end;let Z=f;j[56]!==$?(g=()=>{W($)},j[56]=$,j[57]=g):g=j[57];let J=g;j[58]===Symbol.for("react.memo_cache_sentinel")?(y=(0,o.jsx)(h.ak,{commands:{"pull-request-files-changed:open-commits-list":()=>{F.current?.open()}}}),j[58]=y):y=j[58];let Y="condensed"===T?void 0:q.VersionsIcon,X="condensed"===T?"invisible":"default";return j[59]!==Y||j[60]!==X?(x={id:"changes-selector-button",size:"small",leadingVisual:Y,variant:X,trailingAction:q.TriangleDownIcon},j[59]=Y,j[60]=X,j[61]=x):x=j[61],j[62]===Symbol.for("react.memo_cache_sentinel")?(b={height:"large"},j[62]=b):b=j[62],j[63]!==V||j[64]!==G||j[65]!==Z||j[66]!==J||j[67]!==Q||j[68]!==K||j[69]!==x?(_=(0,o.jsxs)(o.Fragment,{children:[y,(0,o.jsx)(ny,{buttonProps:x,anchorLabel:V,ref:F,dialogProps:b,items:G,onSingleSelect:K,onMultiSelect:Q,onApply:Z,onCancel:J,variant:"modal",title:"Select commits to view"})]}),j[63]=V,j[64]=G,j[65]=Z,j[66]=J,j[67]=Q,j[68]=K,j[69]=x,j[70]=_):_=j[70],_}:function({ownerLogin:e,repositoryName:t,pullRequestNumber:n,commits:i,lastReviewOid:a,variant:s}){let{baseOid:r,headOid:l}=(0,I.E4)(),d=(0,I.ww)(),{fullDiff:{baseOid:c}}=(0,I.L3)(),u=(0,no.u)("combined_pr_changes_route"),m=(0,eS.G7)("verbose_commit_selector_announcements"),p=(0,v.useRef)(null),f=(0,v.useMemo)(()=>i.map(e=>e.oid),[i]),g=(0,v.useMemo)(()=>{if(!r)return;if(r===c)return f[0];let e=f.findIndex(e=>e===r);if(!(e<0))return f[e+1]},[c,f,r]),y=nE({endOid:l,startOid:r,firstCommitInRange:g}),x=(0,v.useMemo)(()=>{if(!r||!l)return;let e=r?f.indexOf(r)+1:-1,t=l?f.indexOf(l):-1;if(!(e<0)&&!(t<0))return{start:e,end:t}},[r,l,f]),[b,_]=(0,v.useState)(()=>x),j=(0,v.useMemo)(()=>b?new Set(f.slice(b.start,b.end+1)):new Set,[b,f]),w=(0,v.useMemo)(()=>{let e,t=[];t.push({id:"all-commits",label:"All commits",description:`${i.length} commit${1!==i.length?"s":""}`,descriptionVariant:"block",selectionVariant:"single",selected:!d});let n=i[i.length-1]?.oid,s=!1,o=!1;if(a)if(n)if(a===n)e="No new commits since last review",s=!0;else{let t=f.indexOf(a),s=t>=0?f.length-t-1:i.length;e=`${s} commit${1!==s?"s":""}`,o=r===a&&l===n}else e="No commits available",s=!0;else e="No previous review found",s=!0;for(let[n,a]of(t.push({id:"changes-since-review",label:"Changes since your last review",description:e,descriptionVariant:"block",selectionVariant:"single",selected:o,disabled:s}),i.entries()))t.push({id:a.oid,label:a.messageHeadline,description:`${a.actorLogin} committed ${(0,nf.V)(new Date(a.createdAt))}`,descriptionVariant:"block",selectionVariant:"multiple",selected:j.has(a.oid),groupId:1,groupTitle:0===n?"Select a range of commits":void 0,trailingVisual:a.shortOid});return t},[i,d,a,r,l,j,f]),N=(0,v.useCallback)(i=>{let a;if(u)if("unfiltered"===i.type)a=(0,eD.tvs)({owner:e,repo:t,number:n});else if("range"===i.type){let s=i.fromPRBase?"BASE":i.baseOid;a=(0,eD.zLJ)({owner:e,repo:t,number:n,base:s,head:i.endOid})}else a=(0,eD.zLJ)({owner:e,repo:t,number:n,head:i.oid});else if("unfiltered"===i.type)a=(0,eD.jrm)({owner:e,repo:t,number:n});else if("range"===i.type){let s=i.fromPRBase?void 0:i.baseOid;a=(0,eD.nSV)({owner:e,repo:t,number:n,base:s,head:i.endOid})}else a=(0,eD.yIb)({owner:e,repo:t,number:n,commit:i.oid});window.location.href=a},[e,t,n,u]),C=(0,v.useCallback)((e,t,n,i)=>{let a,s;return"added"===i?(a=Math.min(e,t),s=Math.max(e,n)):e===t?(a=t+1,s=n):(a=t,s=e-1),{newStartIndex:a,newEndIndex:s}},[]),S=(0,v.useCallback)(e=>{let t,n=f.indexOf(e.id),i=j.has(e.id)?"removed":"added";if(b){if(b.start!==b.end||"removed"!==i){let{newStartIndex:e,newEndIndex:a}=C(n,b.start,b.end,i);t={start:e,end:a}}}else t="added"===i?{start:n,end:n}:void 0;if(t){if(void 0!==t.start&&t.start===t.end){let e=t.start+1,n=f[t.start];if(n){let t=(0,nP.F)(n),i=m?`Commit ${t} selected`:`Commit ${e} selected`;(0,to.i)(i)}}else if(void 0!==t.start&&void 0!==t.end){let e=t.start+1,n=t.end+1,i=f[t.start],a=f[t.end];if(i&&a){let t=(0,nP.F)(i),s=(0,nP.F)(a),r=m?`Commits ${t} to ${s} selected`:`Commits ${e} to ${n} selected`;(0,to.i)(r)}}}else(0,to.i)("No commits selected");_(t)},[f,j,b,C,_,m]),k=(0,v.useCallback)(()=>{let e,t;b&&(b.start!==x?.start||b.end!==x?.end)&&((b.start>0||b.end<f.length-1||1===f.length)&&(e=b.start>0?f[b.start-1]:c,t=f[b.end]),e&&t?b.start===b.end?N({type:"single",oid:t}):N({type:"range",fromPRBase:e===c,baseOid:e,endOid:t}):N({type:"unfiltered"}))},[b,x?.start,x?.end,f,c,N]),T=(0,v.useCallback)(()=>{_(x)},[_,x]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(h.ak,{commands:{"pull-request-files-changed:open-commits-list":()=>{p.current?.open()}}}),(0,o.jsx)(ny,{buttonProps:{id:"changes-selector-button",size:"small",leadingVisual:"condensed"===s?void 0:q.VersionsIcon,variant:"condensed"===s?"invisible":"default",trailingAction:q.TriangleDownIcon},anchorLabel:y,ref:p,dialogProps:{height:"large"},items:w,onSingleSelect:e=>{if("all-commits"===e.id)N({type:"unfiltered"});else if("changes-since-review"===e.id&&a){let e=i[i.length-1]?.oid;e&&N({type:"range",fromPRBase:a===c,baseOid:a,endOid:e})}},onMultiSelect:S,onApply:k,onCancel:T,variant:"modal",title:"Select commits to view"})]})};function nM(e){return e.oid}try{nO.displayName||(nO.displayName="ChangesSelector")}catch{}try{nF.displayName||(nF.displayName="OldChangesSelector")}catch{}try{nB.displayName||(nB.displayName="NewChangesSelector")}catch{}var nV=n(33644),n$=n(2694),nU=n(81070),nq=n(33195);let nW="PullRequestFilesToolbar-module__is-stuck--pCXhL",nH="PullRequestFilesToolbar-module__show-when-stuck--ONyyF",nG="PullRequestFilesToolbar-module__hide-when-stuck-large--jRjpF",nz="PullRequestFilesToolbar-module__pr-title-details--NZamC",nK="PullRequestFilesToolbar-module__pr-sticky-title--Fu24T",nQ="PullRequestFilesToolbar-module__file-controls--XN2fA",nZ="PullRequestFilesToolbar-module__file-controls-navigation--Ti_xo",nJ="PullRequestFilesToolbar-module__file-controls-divider--oWuSw",nY="PullRequestFilesToolbar-module__toolbar--bXrnB",nX="PullRequestFilesToolbar-module__simple-toolbar--q_1hU";var n0=n(21968),n1=n(34261),n2=n(89155);let n3=(0,d.Z6)()?function(){let e,t,n,i=(0,c.c)(7),a=(0,I.Kp)(),{updateWhitespace:s}=(0,I.yo)();return i[0]!==a?(e=async e=>{let{hideWhitespace:t}=e,n=`${a}/page_data/${X.uT.updateWhitespacePreference}`,i=await (0,en.q$)(n,{method:"POST",body:{w:+!!t}}),s=await (0,en.hp)(i);return(0,en.R)(i,s),s},i[0]=a,i[1]=e):e=i[1],i[2]!==s?(t=e=>{s(e.ignoreWhitespace)},i[2]=s,i[3]=t):t=i[3],i[4]!==e||i[5]!==t?(n={mutationFn:e,onSuccess:t},i[4]=e,i[5]=t,i[6]=n):n=i[6],(0,et.n)(n)}:function(){let e=(0,I.Kp)(),{updateWhitespace:t}=(0,I.yo)();return(0,et.n)({mutationFn:async({hideWhitespace:t})=>{let n=`${e}/page_data/${X.uT.updateWhitespacePreference}`,i=await (0,en.q$)(n,{method:"POST",body:{w:+!!t}}),a=await (0,en.hp)(i);return(0,en.R)(i,a),a},onSuccess:e=>{t(e.ignoreWhitespace)}})};var n4=n(73783),n5=n(81355),n6=n(61583);let n7=(0,d.Z6)()?function(){let e,t,n,i,a=(0,c.c)(14),s=(0,I.mU)(),r=(0,I.$W)(s),{selectedPathDigest:l}=(0,n5.U)();a[0]!==r||a[1]!==l?(e=l?r.findIndex(e=>e.pathDigest===l):0,a[0]=r,a[1]=l,a[2]=e):e=a[2];let o=e,d=n9;a[3]!==o||a[4]!==r?(t=()=>{if(r.length>0){let e;e=o<=0?r.length-1:o-1;let t=r[e];t&&d(t.pathDigest)}},a[3]=o,a[4]=r,a[5]=t):t=a[5];let u=t;a[6]!==o||a[7]!==r?(n=()=>{if(r.length>0){let e;e=o>=r.length-1||o<0?0:o+1;let t=r[e];t&&d(t.pathDigest)}},a[6]=o,a[7]=r,a[8]=n):n=a[8];let m=n,p=o>=0?o:void 0;return a[9]!==m||a[10]!==u||a[11]!==l||a[12]!==p?(i={navigateToPrevious:u,navigateToNext:m,currentPathDigest:l,currentIndex:p},a[9]=m,a[10]=u,a[11]=l,a[12]=p,a[13]=i):i=a[13],i}:function(){let e=(0,I.mU)(),t=(0,I.$W)(e),{selectedPathDigest:n}=(0,n5.U)(),i=(0,v.useMemo)(()=>n?t.findIndex(e=>e.pathDigest===n):0,[t,n]),a=(0,v.useCallback)(e=>{(0,n6.pk)(`diff-${e}`),(0,C.kd)(window.location.href)},[]);return{navigateToPrevious:(0,v.useCallback)(()=>{if(t.length>0){let e;e=i<=0?t.length-1:i-1;let n=t[e];n&&a(n.pathDigest)}},[i,t,a]),navigateToNext:(0,v.useCallback)(()=>{if(t.length>0){let e;e=i>=t.length-1||i<0?0:i+1;let n=t[e];n&&a(n.pathDigest)}},[i,t,a]),currentPathDigest:n,currentIndex:i>=0?i:void 0}};function n9(e){(0,n6.pk)(`diff-${e}`),(0,C.kd)(window.location.href)}var n8=n(19415);let ie="SingleFileModeOnboardingPopover-module__PopoverContainer--wtwv5",it="SingleFileModeOnboardingPopover-module__PopoverContent--zQnno",ii="SingleFileModeOnboardingPopover-module__Heading--BRcrc";function ia(e){return(e??[]).filter(e=>!e.dismissed)}let is=(0,d.Z6)()?function(e,t){let n,i=(0,c.c)(5),a=ia(t);if(i[0]!==a||i[1]!==e){let t;i[3]!==e?(t=t=>t.name===e,i[3]=e,i[4]=t):t=i[4],n=a.filter(t),i[0]=a,i[1]=e,i[2]=n}else n=i[2];return 0===n.length}:function(e,t){return 0===ia(t).filter(t=>t.name===e).length},ir=(0,d.Z6)()?function(e,t){let n,i,a=(0,c.c)(5),s=is(e,t);a[0]!==s||a[1]!==e?(n=()=>{(0,e5.M3)()&&!s&&(0,ed.DI)((0,eD.VB1)({noticeName:e}),{method:"POST"})},a[0]=s,a[1]=e,a[2]=n):n=a[2];let r=n;return a[3]!==r?(i={dismissNotice:r},a[3]=r,a[4]=i):i=a[4],i}:function(e,t){let n=is(e,t);return{dismissNotice:(0,v.useCallback)(()=>{(0,e5.M3)()&&!n&&(0,ed.DI)((0,eD.VB1)({noticeName:e}),{method:"POST"})},[n,e])}},il="single_file_mode",io=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u=(0,c.c)(12),{userNotices:m}=e,p=is(il,m),h=(0,I.j5)(),[f,g]=(0,v.useState)(!0),{dismissNotice:y}=ir(il,m);u[0]!==y?(t=()=>{y(),g(!1)},u[0]=y,u[1]=t):t=u[1];let b=t;return!h||p?null:(u[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,x.$)("d-flex flex-column gap-2",it),i=(0,o.jsx)(L.A,{as:"h3",variant:"small",className:ii,children:"You're in single-file mode"}),a=(0,o.jsx)("p",{children:"Due to the large number of changes in this pull request, only one file is being shown at a time."}),u[2]=n,u[3]=i,u[4]=a):(n=u[2],i=u[3],a=u[4]),u[5]===Symbol.for("react.memo_cache_sentinel")?(s=(0,o.jsx)("strong",{children:"Previous"}),u[5]=s):s=u[5],u[6]===Symbol.for("react.memo_cache_sentinel")?(r=(0,o.jsxs)("p",{children:["Use the ",s," and ",(0,o.jsx)("strong",{children:"Next"})," buttons to move between files."]}),u[6]=r):r=u[6],u[7]!==b?(l=(0,o.jsxs)(n8.A.Content,{className:n,children:[i,a,r,(0,o.jsx)("div",{className:"d-flex flex-items-center",children:(0,o.jsx)(Q.Q,{onClick:b,children:"OK, got it"})})]}),u[7]=b,u[8]=l):l=u[8],u[9]!==f||u[10]!==l?(d=(0,o.jsx)(n8.A,{className:ie,open:f,children:l}),u[9]=f,u[10]=l,u[11]=d):d=u[11],d)}:function({userNotices:e}){let t=is(il,e),n=(0,I.j5)(),[i,a]=(0,v.useState)(!0),{dismissNotice:s}=ir(il,e);return!n||t?null:(0,o.jsx)(n8.A,{className:ie,open:i,children:(0,o.jsxs)(n8.A.Content,{className:(0,x.$)("d-flex flex-column gap-2",it),children:[(0,o.jsx)(L.A,{as:"h3",variant:"small",className:ii,children:"You're in single-file mode"}),(0,o.jsx)("p",{children:"Due to the large number of changes in this pull request, only one file is being shown at a time."}),(0,o.jsxs)("p",{children:["Use the ",(0,o.jsx)("strong",{children:"Previous"})," and ",(0,o.jsx)("strong",{children:"Next"})," buttons to move between files."]}),(0,o.jsx)("div",{className:"d-flex flex-items-center",children:(0,o.jsx)(Q.Q,{onClick:()=>{s(),a(!1)},children:"OK, got it"})})]})})};try{io.displayName||(io.displayName="SingleFileModeOnboardingPopover")}catch{}var id=n(44569);let ic=(0,d.Z6)()?function(e){let t,n,i,a,s,r=(0,c.c)(12),{userNotices:l}=e,d=(0,id.zw)(),{navigateToPrevious:u,navigateToNext:m}=n7();return r[0]!==u?(t=(0,o.jsx)(W.K,{icon:q.ChevronUpIcon,"aria-label":d?"Previous file (K)":"Previous file",size:"small",onClick:u,"data-hotkey":"k"}),r[0]=u,r[1]=t):t=r[1],r[2]!==m?(n=(0,o.jsx)(W.K,{icon:q.ChevronDownIcon,"aria-label":d?"Next file (J)":"Next file",size:"small",onClick:m,"data-hotkey":"j"}),r[2]=m,r[3]=n):n=r[3],r[4]!==t||r[5]!==n?(i=(0,o.jsxs)(n4.A,{children:[t,n]}),r[4]=t,r[5]=n,r[6]=i):i=r[6],r[7]!==l?(a=(0,o.jsx)(io,{userNotices:l}),r[7]=l,r[8]=a):a=r[8],r[9]!==i||r[10]!==a?(s=(0,o.jsxs)("div",{className:"position-relative",children:[i,a]}),r[9]=i,r[10]=a,r[11]=s):s=r[11],s}:function({userNotices:e}){let t=(0,id.zw)(),{navigateToPrevious:n,navigateToNext:i}=n7();return(0,o.jsxs)("div",{className:"position-relative",children:[(0,o.jsxs)(n4.A,{children:[(0,o.jsx)(W.K,{icon:q.ChevronUpIcon,"aria-label":t?"Previous file (K)":"Previous file",size:"small",onClick:n,"data-hotkey":"k"}),(0,o.jsx)(W.K,{icon:q.ChevronDownIcon,"aria-label":t?"Next file (J)":"Next file",size:"small",onClick:i,"data-hotkey":"j"})]}),(0,o.jsx)(io,{userNotices:e})]})};try{ic.displayName||(ic.displayName="ReviewNavigationButtonGroup")}catch{}let iu=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,p,h,f,g,y,x,b,_,w,N,C=(0,c.c)(49),{pageLimits:S,pullRequest:k,hideWhitespace:T,onUpdateWhitespace:E,additionalPreferences:R}=e,[L,A]=(0,v.useState)(!1),[D,P]=(0,v.useState)(!1),[O,F]=(0,v.useState)(!1),[B,M]=(0,v.useState)(!1),V=(0,v.useRef)(null),U=(0,I.wI)(),H=(0,I.Qb)(),{sendPullRequestAnalyticsEvent:G}=(0,$.q)();C[0]!==U?(t=U?Object.values(U):[],C[0]=U,C[1]=t):t=C[1];let z=t,K=z.length;C[2]!==G?(n=()=>{G("comments_side_panel.open","COMMENTS_SIDE_PANEL_BUTTON"),e$(),A(!0),F(!1)},C[2]=G,C[3]=n):n=C[3];let Q=n;C[4]!==G?(i=()=>{G("alerts_side_panel.open","ALERTS_SIDE_PANEL_BUTTON"),e$(),P(!0),F(!1)},C[4]=G,C[5]=i):i=C[5];let Z=i;return C[6]===Symbol.for("react.memo_cache_sentinel")?(a=(0,o.jsx)(eq.W.Anchor,{children:(0,o.jsx)(W.K,{ref:V,icon:q.KebabHorizontalIcon,variant:"default",size:"small","aria-label":"More options"})}),C[6]=a):a=C[6],C[7]===Symbol.for("react.memo_cache_sentinel")?(s=(0,o.jsx)(j.l.LeadingVisual,{children:(0,o.jsx)(q.CommentDiscussionIcon,{})}),C[7]=s):s=C[7],C[8]!==H?(r=H>0&&(0,o.jsx)(j.l.TrailingVisual,{children:H}),C[8]=H,C[9]=r):r=C[9],C[10]!==Q||C[11]!==r?(l=(0,o.jsxs)(j.l.Item,{onSelect:Q,children:[s,"Comments",r]}),C[10]=Q,C[11]=r,C[12]=l):l=C[12],C[13]!==Z||C[14]!==K?(d=K>0&&(0,o.jsxs)(j.l.Item,{onSelect:Z,children:[(0,o.jsx)(j.l.LeadingVisual,{children:(0,o.jsx)(q.AlertIcon,{})}),"Alerts",(0,o.jsx)(j.l.TrailingVisual,{children:K})]}),C[13]=Z,C[14]=K,C[15]=d):d=C[15],C[16]!==l||C[17]!==d?(u=(0,o.jsxs)(j.l.Group,{children:[l,d]}),C[16]=l,C[17]=d,C[18]=u):u=C[18],C[19]===Symbol.for("react.memo_cache_sentinel")?(m=(0,o.jsx)(j.l.Divider,{}),C[19]=m):m=C[19],C[20]===Symbol.for("react.memo_cache_sentinel")?(p=(0,o.jsx)(j.l.LeadingVisual,{children:(0,o.jsx)(q.GearIcon,{})}),C[20]=p):p=C[20],C[21]===Symbol.for("react.memo_cache_sentinel")?(h=(0,o.jsx)(eq.W.Anchor,{children:(0,o.jsxs)(j.l.Item,{children:[p,"Settings",(0,o.jsx)(j.l.TrailingVisual,{children:(0,o.jsx)(q.ChevronRightIcon,{})})]})}),C[21]=h):h=C[21],C[22]!==R||C[23]!==T||C[24]!==E?(f=(0,o.jsx)(eq.W.Overlay,{side:"outside-bottom",align:"end",children:(0,o.jsx)(j.l,{children:(0,o.jsx)(ns.Q,{reloadOnWhitespaceChange:!0,onUpdateWhitespace:E,defaultHideWhitespace:T,additionalPreferences:R})})}),C[22]=R,C[23]=T,C[24]=E,C[25]=f):f=C[25],C[26]!==B||C[27]!==f?(g=(0,o.jsx)(j.l.Group,{children:(0,o.jsxs)(eq.W,{open:B,onOpenChange:M,children:[h,f]})}),C[26]=B,C[27]=f,C[28]=g):g=C[28],C[29]!==g||C[30]!==u?(y=(0,o.jsx)(eq.W.Overlay,{align:"end",children:(0,o.jsxs)(j.l,{children:[u,m,g]})}),C[29]=g,C[30]=u,C[31]=y):y=C[31],C[32]!==O||C[33]!==y?(x=(0,o.jsxs)(eq.W,{open:O,onOpenChange:F,children:[a,y]}),C[32]=O,C[33]=y,C[34]=x):x=C[34],C[35]===Symbol.for("react.memo_cache_sentinel")?(b=()=>A(!1),C[35]=b):b=C[35],C[36]!==L||C[37]!==S||C[38]!==k.pathName?(_=(0,o.jsx)(tp,{isOpen:L,pageLimits:S,pathName:k.pathName,toggleSidesheetRef:V,onClose:b}),C[36]=L,C[37]=S,C[38]=k.pathName,C[39]=_):_=C[39],C[40]!==D||C[41]!==z||C[42]!==S||C[43]!==K?(w=K>0&&(0,o.jsx)(t_,{annotations:z,isOpen:D,pageLimits:S,returnFocusRef:V,onClose:()=>P(!1)}),C[40]=D,C[41]=z,C[42]=S,C[43]=K,C[44]=w):w=C[44],C[45]!==x||C[46]!==_||C[47]!==w?(N=(0,o.jsxs)(o.Fragment,{children:[x,_,w]}),C[45]=x,C[46]=_,C[47]=w,C[48]=N):N=C[48],N}:function({pageLimits:e,pullRequest:t,hideWhitespace:n,onUpdateWhitespace:i,additionalPreferences:a}){let[s,r]=(0,v.useState)(!1),[l,d]=(0,v.useState)(!1),[c,u]=(0,v.useState)(!1),[m,p]=(0,v.useState)(!1),h=(0,v.useRef)(null),f=(0,I.wI)(),g=(0,I.Qb)(),{sendPullRequestAnalyticsEvent:y}=(0,$.q)(),x=f?Object.values(f):[],b=x.length,_=(0,v.useCallback)(()=>{y("comments_side_panel.open","COMMENTS_SIDE_PANEL_BUTTON"),e$(),r(!0),u(!1)},[y]),w=(0,v.useCallback)(()=>{y("alerts_side_panel.open","ALERTS_SIDE_PANEL_BUTTON"),e$(),d(!0),u(!1)},[y]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(eq.W,{open:c,onOpenChange:u,children:[(0,o.jsx)(eq.W.Anchor,{children:(0,o.jsx)(W.K,{ref:h,icon:q.KebabHorizontalIcon,variant:"default",size:"small","aria-label":"More options"})}),(0,o.jsx)(eq.W.Overlay,{align:"end",children:(0,o.jsxs)(j.l,{children:[(0,o.jsxs)(j.l.Group,{children:[(0,o.jsxs)(j.l.Item,{onSelect:_,children:[(0,o.jsx)(j.l.LeadingVisual,{children:(0,o.jsx)(q.CommentDiscussionIcon,{})}),"Comments",g>0&&(0,o.jsx)(j.l.TrailingVisual,{children:g})]}),b>0&&(0,o.jsxs)(j.l.Item,{onSelect:w,children:[(0,o.jsx)(j.l.LeadingVisual,{children:(0,o.jsx)(q.AlertIcon,{})}),"Alerts",(0,o.jsx)(j.l.TrailingVisual,{children:b})]})]}),(0,o.jsx)(j.l.Divider,{}),(0,o.jsx)(j.l.Group,{children:(0,o.jsxs)(eq.W,{open:m,onOpenChange:p,children:[(0,o.jsx)(eq.W.Anchor,{children:(0,o.jsxs)(j.l.Item,{children:[(0,o.jsx)(j.l.LeadingVisual,{children:(0,o.jsx)(q.GearIcon,{})}),"Settings",(0,o.jsx)(j.l.TrailingVisual,{children:(0,o.jsx)(q.ChevronRightIcon,{})})]})}),(0,o.jsx)(eq.W.Overlay,{side:"outside-bottom",align:"end",children:(0,o.jsx)(j.l,{children:(0,o.jsx)(ns.Q,{reloadOnWhitespaceChange:!0,onUpdateWhitespace:i,defaultHideWhitespace:n,additionalPreferences:a})})})]})})]})})]}),(0,o.jsx)(tp,{isOpen:s,pageLimits:e,pathName:t.pathName,toggleSidesheetRef:h,onClose:()=>r(!1)}),b>0&&(0,o.jsx)(t_,{annotations:x,isOpen:l,pageLimits:e,returnFocusRef:h,onClose:()=>d(!1)})]})};try{iu.displayName||(iu.displayName="ToolbarMoreMenu")}catch{}let im=(0,d.Z6)()?function(e){let t,n,i,a,s=(0,c.c)(9),{changeGroupsPreferenceAvailable:r,showChangeGroups:l,onShowChangeGroupsChange:d}=e,{sendPullRequestAnalyticsEvent:u}=(0,$.q)();if(!r)return;s[0]!==d||s[1]!==u||s[2]!==l?(t=()=>{let e=!l;u(e?"change_group_preference.show":"change_group_preference.hide","CHANGE_GROUP_PREFERENCE_TOGGLE"),d(e)},s[0]=d,s[1]=u,s[2]=l,s[3]=t):t=s[3];let m=t;return s[4]===Symbol.for("react.memo_cache_sentinel")?(n=(0,o.jsx)(j.l.Divider,{}),s[4]=n):n=s[4],s[5]===Symbol.for("react.memo_cache_sentinel")?(i=(0,o.jsx)(j.l.Description,{variant:"block",children:"Organize changes into groups with Copilot"}),s[5]=i):i=s[5],s[6]!==m||s[7]!==l?(a=(0,o.jsxs)(o.Fragment,{children:[n,(0,o.jsx)(j.l.Group,{"aria-label":"Change Groups",selectionVariant:"single",children:(0,o.jsxs)(j.l.Item,{selected:l,onSelect:m,children:["Show changes by group",i]})})]}),s[6]=m,s[7]=l,s[8]=a):a=s[8],a}:function({changeGroupsPreferenceAvailable:e,showChangeGroups:t,onShowChangeGroupsChange:n}){let{sendPullRequestAnalyticsEvent:i}=(0,$.q)();if(e)return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(j.l.Divider,{}),(0,o.jsx)(j.l.Group,{"aria-label":"Change Groups",selectionVariant:"single",children:(0,o.jsxs)(j.l.Item,{selected:t,onSelect:()=>{let e=!t;i(e?"change_group_preference.show":"change_group_preference.hide","CHANGE_GROUP_PREFERENCE_TOGGLE"),n(e)},children:["Show changes by group",(0,o.jsx)(j.l.Description,{variant:"block",children:"Organize changes into groups with Copilot"})]})})]})};try{im.displayName||(im.displayName="ChangeGroupsPreferences")}catch{}var ip=n(3585);function ih(e){let t=new Map;if(!e)return t;for(let[n,i]of Object.entries(e))for(let e of Object.values(i))for(let i of e?.threads??[])for(let e of i.commentsData?.comments??[])void 0!==e.databaseId&&null!==e.databaseId&&t.set(e.databaseId,{comment:e,path:n});return t}function ig(e,t){if(!e||0===t.length)return[];let n=ih(e),i=[];for(let e of t){let t=n.get(e.commentDatabaseId);t&&i.push({commentDatabaseId:e.commentDatabaseId,suggestionIndex:e.suggestionIndex,path:t.path,bodyHTML:t.comment.bodyHTML})}return i}var iy=n(3252);function ix(e,t){if(!e||0===t.length)return[];let n=ih(e),i=[];for(let e of t){let t=n.get(e.commentDatabaseId);if(!t)continue;let{comment:a,path:s}=t,r=(0,iy.T)(a.body);r&&!(e.suggestionIndex>=r.length)&&i.push({threadId:String(e.commentDatabaseId),path:s,suggestion:r})}return i}var iv=n(88008);let ib=(0,d.Z6)()?function(e,t){let n,i,a,s=(0,c.c)(11),r=(0,ee.e)(X.uT.submitSuggestedChanges),l=(0,I.WK)(),o=(0,I.qL)(),{clearSuggestionBatch:d}=(0,I.xJ)();return s[0]!==r||s[1]!==o||s[2]!==l?(n=async e=>{let{currentOid:t,message:n}=e,i=ix(o,l.activeBatch);if(0===i.length)throw Error("No valid suggestions found in batch");let a=await (0,ed.Sr)(r,{method:"POST",headers:{Accept:"application/json"},body:{changes:i,currentOid:t,message:n}}),s=await (0,en.hp)(a);return(0,en.R)(a,s),s},s[0]=r,s[1]=o,s[2]=l,s[3]=n):n=s[3],s[4]!==d||s[5]!==t||s[6]!==e?(i=()=>{d(),(0,iv.hW)(e,t),ey.cg?.location.reload()},s[4]=d,s[5]=t,s[6]=e,s[7]=i):i=s[7],s[8]!==n||s[9]!==i?(a={mutationFn:n,onSuccess:i},s[8]=n,s[9]=i,s[10]=a):a=s[10],(0,et.n)(a)}:function(e,t){let n=(0,ee.e)(X.uT.submitSuggestedChanges),i=(0,I.WK)(),a=(0,I.qL)(),{clearSuggestionBatch:s}=(0,I.xJ)();return(0,et.n)({mutationFn:async({currentOid:e,message:t})=>{let s=ix(a,i.activeBatch);if(0===s.length)throw Error("No valid suggestions found in batch");let r=await (0,ed.Sr)(n,{method:"POST",headers:{Accept:"application/json"},body:{changes:s,currentOid:e,message:t}}),l=await (0,en.hp)(r);return(0,en.R)(r,l),l},onSuccess:()=>{s(),(0,iv.hW)(e,t),ey.cg?.location.reload()}})},i_=(0,d.Z6)()?function(){let e,t,n,i=(0,c.c)(8),a=(0,I.Kp)(),{updateChangeGroupPreference:s}=(0,I.wL)(),{updateDiffFilter:r}=(0,I.or)();return i[0]!==a?(e=async e=>{let{showChangeGroups:t}=e,n=`${a}/page_data/${X.uT.updateShowChangeGroupsPreference}`,i=await (0,en.q$)(n,{method:"POST",headers:{"Content-Type":"application/json"},body:{show_change_groups:t?"true":"false"}}),s=await (0,en.hp)(i);return(0,en.R)(i,s),s},i[0]=a,i[1]=e):e=i[1],i[2]!==s||i[3]!==r?(t=e=>{let{showChangeGroups:t}=e;s(t),t||r({activeChangeGroupId:void 0})},i[2]=s,i[3]=r,i[4]=t):t=i[4],i[5]!==e||i[6]!==t?(n={mutationFn:e,onMutate:t},i[5]=e,i[6]=t,i[7]=n):n=i[7],(0,et.n)(n)}:function(){let e=(0,I.Kp)(),{updateChangeGroupPreference:t}=(0,I.wL)(),{updateDiffFilter:n}=(0,I.or)();return(0,et.n)({mutationFn:async({showChangeGroups:t})=>{let n=`${e}/page_data/${X.uT.updateShowChangeGroupsPreference}`,i=await (0,en.q$)(n,{method:"POST",headers:{"Content-Type":"application/json"},body:{show_change_groups:t?"true":"false"}}),a=await (0,en.hp)(i);return(0,en.R)(i,a),a},onMutate:({showChangeGroups:e})=>{t(e),e||n({activeChangeGroupId:void 0})}})};var ij=n(39837);let iw=(0,d.Z6)()?function(e){let t,n,i,a,s,r=(0,c.c)(13),{bodyHtml:l,isLoading:d,onClose:u}=e,m=(0,v.useRef)(null),p=(0,v.useRef)(null);r[0]!==l?(t=l.includes("No description provided"),r[0]=l,r[1]=t):t=r[1];let h=t;return r[2]===Symbol.for("react.memo_cache_sentinel")?(n={narrow:"fullscreen",regular:"right",wide:"right"},r[2]=n):n=r[2],r[3]!==u?(i=e=>{let{dialogLabelId:t}=e;return(0,o.jsx)(g.l.Header,{className:"p-3",children:(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-between flex-items-center width-full",children:[(0,o.jsx)(g.l.Title,{id:t,children:"Overview"}),(0,o.jsx)(W.K,{ref:m,"aria-label":"Close overview panel",icon:q.XIcon,variant:"invisible",onClick:u})]})})},r[3]=u,r[4]=i):i=r[4],r[5]!==l||r[6]!==h||r[7]!==d?(a=(0,o.jsx)("div",{className:"p-4",children:d?(0,o.jsx)("div",{className:"d-flex flex-justify-center",children:(0,o.jsx)(A.A,{})}):(0,o.jsx)("div",{className:h?"d-flex flex-justify-start":"d-flex flex-justify-center",children:(0,o.jsx)(ij.A,{verifiedHTML:l})})}),r[5]=l,r[6]=h,r[7]=d,r[8]=a):a=r[8],r[9]!==u||r[10]!==i||r[11]!==a?(s=(0,o.jsx)(g.l,{initialFocusRef:m,position:n,returnFocusRef:p,onClose:u,renderHeader:i,children:a}),r[9]=u,r[10]=i,r[11]=a,r[12]=s):s=r[12],s}:function({bodyHtml:e,isLoading:t,onClose:n}){let i=(0,v.useRef)(null),a=(0,v.useRef)(null),s=e.includes("No description provided");return(0,o.jsx)(g.l,{initialFocusRef:i,position:{narrow:"fullscreen",regular:"right",wide:"right"},returnFocusRef:a,onClose:n,renderHeader:({dialogLabelId:e})=>(0,o.jsx)(g.l.Header,{className:"p-3",children:(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-between flex-items-center width-full",children:[(0,o.jsx)(g.l.Title,{id:e,children:"Overview"}),(0,o.jsx)(W.K,{ref:i,"aria-label":"Close overview panel",icon:q.XIcon,variant:"invisible",onClick:n})]})}),children:(0,o.jsx)("div",{className:"p-4",children:t?(0,o.jsx)("div",{className:"d-flex flex-justify-center",children:(0,o.jsx)(A.A,{})}):(0,o.jsx)("div",{className:s?"d-flex flex-justify-start":"d-flex flex-justify-center",children:(0,o.jsx)(ij.A,{verifiedHTML:e})})})})};try{iw.displayName||(iw.displayName="OverviewSidePanel")}catch{}let iN=(0,d.Z6)()?function(){let e,t=(0,c.c)(2),n=(0,ee.e)(X.uT.description);return t[0]!==n?(e={queryKey:[X.uT.description,n],queryFn:async()=>{let e=await (0,ed.QJ)(n);if(!e.ok)throw Error(`HTTP ${e.status}`);return await e.json()},staleTime:1/0},t[0]=n,t[1]=e):e=t[1],(0,eo.I)(e)}:function(){let e=(0,ee.e)(X.uT.description);return(0,eo.I)({queryKey:[X.uT.description,e],queryFn:async()=>{let t=await (0,ed.QJ)(e);if(!t.ok)throw Error(`HTTP ${t.status}`);return await t.json()},staleTime:1/0})},iC=(0,d.Z6)()?function(e){let t,n=(0,c.c)(1),{refetch:i}=iN();n[0]===Symbol.for("react.memo_cache_sentinel")?(t={body_updated:!0},n[0]=t):t=n[0],(0,nr.og)(e,i,t)}:function(e){let{refetch:t}=iN();(0,nr.og)(e,t,{body_updated:!0})},iS=(0,d.Z6)()?function(e){let t,n,i,a,s=(0,c.c)(10),{aliveChannel:r}=e,[l,d]=(0,v.useState)(!1),u=(0,v.useRef)(null),{sendPullRequestAnalyticsEvent:m}=(0,$.q)(),{data:p,isLoading:h}=iN();iC(r);let f=p?.bodyHtml||'<p class="text-italic">No description provided.</p>';return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.jsx)(W.K,{inactive:!0,"aria-label":"The overview side panel cannot currently be opened.",icon:q.InfoIcon,size:"small",variant:"invisible"}),s[0]=t):t=s[0],s[1]!==m?(n=(0,o.jsx)(W.K,{ref:u,"aria-label":"Open overview side panel",icon:q.InfoIcon,size:"small",onClick:()=>{m("overview_side_panel.open","OVERVIEW_SIDE_PANEL_BUTTON"),e$(),d(!0)}}),s[1]=m,s[2]=n):n=s[2],s[3]!==f||s[4]!==h||s[5]!==l?(i=l&&(0,o.jsx)(iw,{bodyHtml:f,isLoading:h,onClose:()=>d(!1)}),s[3]=f,s[4]=h,s[5]=l,s[6]=i):i=s[6],s[7]!==n||s[8]!==i?(a=(0,o.jsx)("div",{className:"d-flex flex-items-center",children:(0,o.jsxs)(R.t,{fallback:t,children:[n,i]})}),s[7]=n,s[8]=i,s[9]=a):a=s[9],a}:function({aliveChannel:e}){let[t,n]=(0,v.useState)(!1),i=(0,v.useRef)(null),{sendPullRequestAnalyticsEvent:a}=(0,$.q)(),{data:s,isLoading:r}=iN();iC(e);let l=s?.bodyHtml||'<p class="text-italic">No description provided.</p>';return(0,o.jsx)("div",{className:"d-flex flex-items-center",children:(0,o.jsxs)(R.t,{fallback:(0,o.jsx)(W.K,{inactive:!0,"aria-label":"The overview side panel cannot currently be opened.",icon:q.InfoIcon,size:"small",variant:"invisible"}),children:[(0,o.jsx)(W.K,{ref:i,"aria-label":"Open overview side panel",icon:q.InfoIcon,size:"small",onClick:()=>{a("overview_side_panel.open","OVERVIEW_SIDE_PANEL_BUTTON"),e$(),n(!0)}}),t&&(0,o.jsx)(iw,{bodyHtml:l,isLoading:r,onClose:()=>n(!1)})]})})};try{iS.displayName||(iS.displayName="OpenOverviewSidePanelButton")}catch{}let iI=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,p,h=(0,c.c)(24);h[0]!==e?({aliveChannel:t,repository:s,pullRequest:i,bannersData:n,urls:r,user:l,userNotices:d,...a}=e,h[0]=e,h[1]=t,h[2]=n,h[3]=i,h[4]=a,h[5]=s,h[6]=r,h[7]=l,h[8]=d):(t=h[1],n=h[2],i=h[3],a=h[4],s=h[5],r=h[6],l=h[7],d=h[8]);let{data:f}=(0,n1.W)(),{pullRequest:g}=f;h[9]!==t||h[10]!==n||h[11]!==i||h[12]!==s||h[13]!==r||h[14]!==l?(u={aliveChannel:t,repository:s,pullRequest:i,bannersData:n,urls:r,user:l},h[9]=t,h[10]=n,h[11]=i,h[12]=s,h[13]=r,h[14]=l,h[15]=u):u=h[15],(0,n1.W)(u),(0,n2.F)(t),h[16]!==i||h[17]!==g?(m={...i,...g},h[16]=i,h[17]=g,h[18]=m):m=h[18];let y=m;return h[19]!==a||h[20]!==s||h[21]!==y||h[22]!==d?(p=(0,o.jsx)(ik,{repository:s,pullRequest:y,userNotices:d,...a}),h[19]=a,h[20]=s,h[21]=y,h[22]=d,h[23]=p):p=h[23],p}:function({aliveChannel:e,repository:t,pullRequest:n,bannersData:i,urls:a,user:s,userNotices:r,...l}){let{data:{pullRequest:d}}=(0,n1.W)();(0,n1.W)({aliveChannel:e,repository:t,pullRequest:n,bannersData:i,urls:a,user:s}),(0,n2.F)(e);let c={...n,...d};return(0,o.jsx)(ik,{repository:t,pullRequest:c,userNotices:r,...l})},ik=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,p,h,f,g,y,b,_,j,N,C,S,k,T,E,R,L,A,D,O,F,B,M,V,$,U,q,W,H,G,z,K,Z,J=(0,c.c)(149),{changeGroupsPreferenceAvailable:Y,commits:X,currentUserLogin:ee,fileFilter:et,isFileTreeExpanded:en,lastReviewOid:ei,pageLimits:ea,pullRequest:es,repository:er,shouldShowViewedFilesCount:el,totalFilesCount:eo,treeToggleElement:ed,userNotices:ec}=e,eu=(0,no.u)("batch_suggested_changes"),em=(0,no.u)("pull_request_overview_panel"),{mutate:ep}=n3(),{clearSuggestionBatch:eh,removeSuggestionFromBatch:ef}=(0,I.xJ)(),{mutate:eg}=ib(es.pathName,es.comparison.headOid),{mutate:ey}=i_(),ex=(0,I.WA)(),ev=es.pathName,{hideWhitespace:eb,fullDiff:e_}=(0,I.L3)(),[ej,ew]=(0,v.useState)(!1),eN=el||!en,[eC,eS]=(0,v.useState)(!1),eI=(0,I.j5)(),ek=(0,I.RH)(),eT=(0,I.WK)(),eE=(0,I.qL)(),[eR,eL]=(0,v.useState)(!1),eA=(0,I.Kp)(),eD=(0,I.L3)(),eP=ig(eE,eT.activeBatch),eO=eP.length;J[0]!==ep?(t=e=>{ep({hideWhitespace:e})},J[0]=ep,J[1]=t):t=J[1];let eF=t;J[2]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{e[0]&&ew(!e[0].isIntersecting)},J[2]=n):n=J[2];let[eB,eM]=(0,n$.B)(n);J[3]!==eD.fullDiff.headOid||J[4]!==eA||J[5]!==ef||J[6]!==eT.activeBatch?(i=e=>{ef(e),(0,iv.CE)(eA,eD.fullDiff.headOid,eT.activeBatch.filter(t=>t.commentDatabaseId!==e.commentDatabaseId||t.suggestionIndex!==e.suggestionIndex))},J[3]=eD.fullDiff.headOid,J[4]=eA,J[5]=ef,J[6]=eT.activeBatch,J[7]=i):i=J[7];let e$=i;J[8]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{eL(!0)},J[8]=a):a=J[8];let eU=a;J[9]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{eL(!1)},J[9]=s):s=J[9];let eq=s;J[10]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{eS(!0)},J[10]=r):r=J[10];let eW=r;J[11]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{eS(!1)},J[11]=l):l=J[11];let eH=l;J[12]!==eh||J[13]!==eD.fullDiff.headOid||J[14]!==eq||J[15]!==eA?(d=()=>{eh(),(0,iv.hW)(eA,eD.fullDiff.headOid),eq(),eS(!1)},J[12]=eh,J[13]=eD.fullDiff.headOid,J[14]=eq,J[15]=eA,J[16]=d):d=J[16];let eG=d;J[17]!==eg||J[18]!==e_.headOid||J[19]!==eq?(u=(e,t,n)=>{eg({message:e,currentOid:e_.headOid},{onSuccess:()=>{eq(),n()},onError:e=>{t(e)}})},J[17]=eg,J[18]=e_.headOid,J[19]=eq,J[20]=u):u=J[20];let ez=u;J[21]!==ey?(m=e=>{ey({showChangeGroups:e})},J[21]=ey,J[22]=m):m=J[22];let eK=m,eQ=eP.map(iT);J[23]===Symbol.for("react.memo_cache_sentinel")?(p={visibility:"hidden",height:"1px"},J[23]=p):p=J[23],J[24]!==eB||J[25]!==eM?(h=(0,o.jsx)(nU.X,{sx:p,onObserve:eB,onUnobserve:eM}),J[24]=eB,J[25]=eM,J[26]=h):h=J[26];let eZ=ej&&nW;J[27]!==eZ?(f=(0,x.$)(nV.A.stickyHeader,nY,eZ),J[27]=eZ,J[28]=f):f=J[28],J[29]===Symbol.for("react.memo_cache_sentinel")?(g=(0,o.jsx)("h2",{className:"sr-only",children:"Pull Request Toolbar"}),J[29]=g):g=J[29],J[30]!==ed?(y=(0,o.jsx)("div",{children:ed}),J[30]=ed,J[31]=y):y=J[31],J[32]!==es.state?(b=(0,o.jsx)("div",{className:nH,children:(0,o.jsx)(nq.u,{state:es.state})}),J[32]=es.state,J[33]=b):b=J[33],J[34]!==X||J[35]!==ei||J[36]!==es.number||J[37]!==er.name||J[38]!==er.ownerLogin?(_=(0,o.jsx)("div",{className:nG,children:(0,o.jsx)(nO,{commits:X,lastReviewOid:ei,ownerLogin:er.ownerLogin,pullRequestNumber:es.number,repositoryName:er.name})}),J[34]=X,J[35]=ei,J[36]=es.number,J[37]=er.name,J[38]=er.ownerLogin,J[39]=_):_=J[39],J[40]===Symbol.for("react.memo_cache_sentinel")?(j=(0,x.$)(nH,"min-width-0"),N=(0,x.$)("d-flex mb-n1",nz),J[40]=j,J[41]=N):(j=J[40],N=J[41]);let eJ=es.title;J[42]===Symbol.for("react.memo_cache_sentinel")?(C=(0,x.$)("f5 text-bold overflow-hidden no-wrap",nK),J[42]=C):C=J[42],J[43]!==es.title?(S=(0,o.jsx)("a",{href:"#top",className:"d-flex overflow-hidden fgColor-default",children:(0,o.jsx)("bdi",{className:C,children:es.title})}),J[43]=es.title,J[44]=S):S=J[44],J[45]!==es.title||J[46]!==S?(k=(0,o.jsx)(P.m,{type:"label",direction:"s",text:eJ,children:S}),J[45]=es.title,J[46]=S,J[47]=k):k=J[47],J[48]!==es.number?(T=(0,o.jsxs)("span",{className:"f5 text-normal pl-2 fgColor-muted d-inline",children:["#",es.number]}),J[48]=es.number,J[49]=T):T=J[49],J[50]!==k||J[51]!==T?(E=(0,o.jsxs)("div",{className:N,children:[k,T]}),J[50]=k,J[51]=T,J[52]=E):E=J[52],J[53]!==X||J[54]!==ei||J[55]!==es.number||J[56]!==er.name||J[57]!==er.ownerLogin?(R=(0,o.jsx)(nO,{commits:X,lastReviewOid:ei,ownerLogin:er.ownerLogin,pullRequestNumber:es.number,repositoryName:er.name,variant:"condensed"}),J[53]=X,J[54]=ei,J[55]=es.number,J[56]=er.name,J[57]=er.ownerLogin,J[58]=R):R=J[58],J[59]===Symbol.for("react.memo_cache_sentinel")?(L=(0,x.$)("d-none d-lg-flex flex-items-center min-width-0",nz),J[59]=L):L=J[59],J[60]===Symbol.for("react.memo_cache_sentinel")?(A=(0,o.jsx)("div",{className:"border-left mx-1 pr-1 d-block",style:{width:"1px",height:"16px"}}),J[60]=A):A=J[60],J[61]!==es.author||J[62]!==es.baseBranch||J[63]!==es.commitsCount||J[64]!==es.headBranch||J[65]!==es.headRepositoryName||J[66]!==es.headRepositoryOwnerLogin||J[67]!==es.id||J[68]!==es.isInAdvisoryRepo||J[69]!==es.mergedBy||J[70]!==es.mergedByName||J[71]!==es.number||J[72]!==es.state||J[73]!==er.id||J[74]!==er.name||J[75]!==er.ownerLogin?(D=(0,o.jsxs)("div",{className:L,children:[A,(0,o.jsx)(n0.O,{author:es.author,baseBranch:es.baseBranch,baseRepositoryOwnerLogin:er.ownerLogin,baseRepositoryName:er.name,commitsCount:es.commitsCount,headBranch:es.headBranch,headRepositoryOwnerLogin:es.headRepositoryOwnerLogin,headRepositoryName:es.headRepositoryName,isInAdvisoryRepo:es.isInAdvisoryRepo,mergedBy:es.mergedBy,mergedByName:es.mergedByName,state:es.state,pullRequestId:es.id,pullRequestNumber:es.number,repositoryId:er.id})]}),J[61]=es.author,J[62]=es.baseBranch,J[63]=es.commitsCount,J[64]=es.headBranch,J[65]=es.headRepositoryName,J[66]=es.headRepositoryOwnerLogin,J[67]=es.id,J[68]=es.isInAdvisoryRepo,J[69]=es.mergedBy,J[70]=es.mergedByName,J[71]=es.number,J[72]=es.state,J[73]=er.id,J[74]=er.name,J[75]=er.ownerLogin,J[76]=D):D=J[76],J[77]!==R||J[78]!==D?(O=(0,o.jsxs)("div",{className:"f6 text-normal d-flex flex-items-center ml-n2",children:[R,D]}),J[77]=R,J[78]=D,J[79]=O):O=J[79],J[80]!==E||J[81]!==O?(F=(0,o.jsxs)(tS.B,{direction:"vertical",gap:"none",className:j,children:[E,O]}),J[80]=E,J[81]=O,J[82]=F):F=J[82],J[83]!==y||J[84]!==b||J[85]!==_||J[86]!==F?(B=(0,o.jsxs)(tS.B,{direction:"horizontal",gap:"condensed",align:"center",className:"min-width-0",children:[y,b,_,F]}),J[83]=y,J[84]=b,J[85]=_,J[86]=F,J[87]=B):B=J[87],J[88]!==ev||J[89]!==es.aliveChannel?(M=(0,o.jsx)(nu,{aliveChannel:es.aliveChannel,pathName:ev}),J[88]=ev,J[89]=es.aliveChannel,J[90]=M):M=J[90],J[91]!==el||J[92]!==eo?(V=el&&(0,o.jsx)(eV,{totalFilesCount:eo}),J[91]=el,J[92]=eo,J[93]=V):V=J[93];let eY=!en&&et;return J[94]!==eI||J[95]!==eo||J[96]!==ec?($=eI&&eo>1&&(0,o.jsx)("div",{className:nZ,children:(0,o.jsx)(ic,{userNotices:ec})}),J[94]=eI,J[95]=eo,J[96]=ec,J[97]=$):$=J[97],J[98]!==V||J[99]!==eY||J[100]!==$?(U=(0,o.jsxs)("div",{className:nQ,children:[V,eY,$]}),J[98]=V,J[99]=eY,J[100]=$,J[101]=U):U=J[101],J[102]!==eN?(q=eN&&(0,o.jsx)("div",{className:nJ,"data-testid":"file-controls-divider"}),J[102]=eN,J[103]=q):q=J[103],J[104]!==eu||J[105]!==Y||J[106]!==ee||J[107]!==eU||J[108]!==eW||J[109]!==eb||J[110]!==en||J[111]!==ek||J[112]!==eK||J[113]!==eF||J[114]!==em||J[115]!==ea||J[116]!==es||J[117]!==er||J[118]!==ex||J[119]!==eO||J[120]!==ec?(W=ek&&eu?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Q.Q,{variant:"danger",size:"small",onClick:eW,children:"Discard batch"}),(0,o.jsxs)(Q.Q,{variant:"primary",size:"small",onClick:eU,children:["Commit suggestions ",(0,o.jsx)(w.A,{className:"ml-1 color-fg-inherit",children:eO})]})]}):(0,o.jsxs)(o.Fragment,{children:[em&&(0,o.jsx)(iS,{aliveChannel:es.aliveChannel}),(0,o.jsx)("div",{className:"d-none d-sm-flex",children:(0,o.jsx)(tf,{pageLimits:ea,pullRequest:es,isFileTreeExpanded:en})}),(0,o.jsx)(tw,{className:"d-none d-sm-flex",pageLimits:ea,isFileTreeExpanded:en}),ee&&(0,o.jsx)(nt,{currentUserLogin:ee,pullRequest:es,repository:er}),(0,o.jsx)("div",{className:"d-none d-sm-flex",children:(0,o.jsx)(ns.G,{invisible:!1,reloadOnWhitespaceChange:!0,onUpdateWhitespace:eF,defaultHideWhitespace:eb,small:!0,userNotices:ec,additionalPreferences:(0,o.jsx)(im,{changeGroupsPreferenceAvailable:Y,showChangeGroups:ex,onShowChangeGroupsChange:eK})})}),(0,o.jsx)("div",{className:"d-flex d-sm-none",children:(0,o.jsx)(iu,{pageLimits:ea,pullRequest:es,hideWhitespace:eb,onUpdateWhitespace:eF,additionalPreferences:(0,o.jsx)(im,{changeGroupsPreferenceAvailable:Y,showChangeGroups:ex,onShowChangeGroupsChange:eK})})})]}),J[104]=eu,J[105]=Y,J[106]=ee,J[107]=eU,J[108]=eW,J[109]=eb,J[110]=en,J[111]=ek,J[112]=eK,J[113]=eF,J[114]=em,J[115]=ea,J[116]=es,J[117]=er,J[118]=ex,J[119]=eO,J[120]=ec,J[121]=W):W=J[121],J[122]!==M||J[123]!==U||J[124]!==q||J[125]!==W?(H=(0,o.jsxs)(tS.B,{direction:"horizontal",align:"center",children:[M,U,q,W]}),J[122]=M,J[123]=U,J[124]=q,J[125]=W,J[126]=H):H=J[126],J[127]!==f||J[128]!==B||J[129]!==H?(G=(0,o.jsxs)(tS.B,{as:"section",direction:"horizontal",justify:"space-between",gap:"condensed",align:"center",className:f,children:[g,B,H]}),J[127]=f,J[128]=B,J[129]=H,J[130]=G):G=J[130],J[131]!==ez||J[132]!==eq||J[133]!==eG||J[134]!==e$||J[135]!==eR||J[136]!==eT.activeBatch.length||J[137]!==eQ?(z=eR&&eQ.length>0&&(0,o.jsx)(ip.$,{authorLogins:[],batchSize:eT.activeBatch.length,onClose:eq,onCommit:ez,defaultCommitMessage:"Apply suggestions from code review",suggestions:eQ,onRemoveSuggestion:e$,onDiscardBatch:eG}),J[131]=ez,J[132]=eq,J[133]=eG,J[134]=e$,J[135]=eR,J[136]=eT.activeBatch.length,J[137]=eQ,J[138]=z):z=J[138],J[139]!==eG||J[140]!==eH||J[141]!==eC||J[142]!==eO?(K=(0,o.jsx)(nh.G,{isOpen:eC,onConfirm:eG,onCancel:eH,suggestionsCount:eO}),J[139]=eG,J[140]=eH,J[141]=eC,J[142]=eO,J[143]=K):K=J[143],J[144]!==h||J[145]!==G||J[146]!==z||J[147]!==K?(Z=(0,o.jsxs)(o.Fragment,{children:[h,G,z,K]}),J[144]=h,J[145]=G,J[146]=z,J[147]=K,J[148]=Z):Z=J[148],Z}:function({changeGroupsPreferenceAvailable:e,commits:t,currentUserLogin:n,fileFilter:i,isFileTreeExpanded:a,lastReviewOid:s,pageLimits:r,pullRequest:l,repository:d,shouldShowViewedFilesCount:c,totalFilesCount:u,treeToggleElement:m,userNotices:p}){let h=(0,no.u)("batch_suggested_changes"),f=(0,no.u)("pull_request_overview_panel"),{mutate:g}=n3(),{clearSuggestionBatch:y,removeSuggestionFromBatch:b}=(0,I.xJ)(),{mutate:_}=ib(l.pathName,l.comparison.headOid),{mutate:j}=i_(),N=(0,I.WA)(),C=l.pathName,{hideWhitespace:S,fullDiff:k}=(0,I.L3)(),[T,E]=(0,v.useState)(!1),R=c||!a,[L,A]=(0,v.useState)(!1),D=(0,I.j5)(),O=(0,I.RH)(),F=(0,I.WK)(),B=(0,I.qL)(),[M,V]=(0,v.useState)(!1),$=(0,I.Kp)(),U=(0,I.L3)(),q=ig(B,F.activeBatch),W=q.length,H=e=>{g({hideWhitespace:e})},[G,z]=(0,n$.B)(e=>{e[0]&&E(!e[0].isIntersecting)}),K=(0,v.useCallback)(e=>{b(e),(0,iv.CE)($,U.fullDiff.headOid,F.activeBatch.filter(t=>t.commentDatabaseId!==e.commentDatabaseId||t.suggestionIndex!==e.suggestionIndex))},[b,F,$,U]),Z=(0,v.useCallback)(()=>{V(!0)},[]),J=(0,v.useCallback)(()=>{V(!1)},[]),Y=(0,v.useCallback)(()=>{A(!0)},[]),X=(0,v.useCallback)(()=>{A(!1)},[]),ee=(0,v.useCallback)(()=>{y(),(0,iv.hW)($,U.fullDiff.headOid),J(),A(!1)},[y,$,U,J]),et=(0,v.useCallback)((e,t,n)=>{_({message:e,currentOid:k.headOid},{onSuccess:()=>{J(),n()},onError:e=>{t(e)}})},[k,_,J]),en=e=>{j({showChangeGroups:e})},ei=q.map(e=>({commentDatabaseId:e.commentDatabaseId,suggestionIndex:e.suggestionIndex,path:e.path,bodyHTML:e.bodyHTML}));return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(nU.X,{sx:{visibility:"hidden",height:"1px"},onObserve:G,onUnobserve:z}),(0,o.jsxs)(tS.B,{as:"section",direction:"horizontal",justify:"space-between",gap:"condensed",align:"center",className:(0,x.$)(nV.A.stickyHeader,nY,T&&nW),children:[(0,o.jsx)("h2",{className:"sr-only",children:"Pull Request Toolbar"}),(0,o.jsxs)(tS.B,{direction:"horizontal",gap:"condensed",align:"center",className:"min-width-0",children:[(0,o.jsx)("div",{children:m}),(0,o.jsx)("div",{className:nH,children:(0,o.jsx)(nq.u,{state:l.state})}),(0,o.jsx)("div",{className:nG,children:(0,o.jsx)(nO,{commits:t,lastReviewOid:s,ownerLogin:d.ownerLogin,pullRequestNumber:l.number,repositoryName:d.name})}),(0,o.jsxs)(tS.B,{direction:"vertical",gap:"none",className:(0,x.$)(nH,"min-width-0"),children:[(0,o.jsxs)("div",{className:(0,x.$)("d-flex mb-n1",nz),children:[(0,o.jsx)(P.m,{type:"label",direction:"s",text:l.title,children:(0,o.jsx)("a",{href:"#top",className:"d-flex overflow-hidden fgColor-default",children:(0,o.jsx)("bdi",{className:(0,x.$)("f5 text-bold overflow-hidden no-wrap",nK),children:l.title})})}),(0,o.jsxs)("span",{className:"f5 text-normal pl-2 fgColor-muted d-inline",children:["#",l.number]})]}),(0,o.jsxs)("div",{className:"f6 text-normal d-flex flex-items-center ml-n2",children:[(0,o.jsx)(nO,{commits:t,lastReviewOid:s,ownerLogin:d.ownerLogin,pullRequestNumber:l.number,repositoryName:d.name,variant:"condensed"}),(0,o.jsxs)("div",{className:(0,x.$)("d-none d-lg-flex flex-items-center min-width-0",nz),children:[(0,o.jsx)("div",{className:"border-left mx-1 pr-1 d-block",style:{width:"1px",height:"16px"}}),(0,o.jsx)(n0.O,{author:l.author,baseBranch:l.baseBranch,baseRepositoryOwnerLogin:d.ownerLogin,baseRepositoryName:d.name,commitsCount:l.commitsCount,headBranch:l.headBranch,headRepositoryOwnerLogin:l.headRepositoryOwnerLogin,headRepositoryName:l.headRepositoryName,isInAdvisoryRepo:l.isInAdvisoryRepo,mergedBy:l.mergedBy,mergedByName:l.mergedByName,state:l.state,pullRequestId:l.id,pullRequestNumber:l.number,repositoryId:d.id})]})]})]})]}),(0,o.jsxs)(tS.B,{direction:"horizontal",align:"center",children:[(0,o.jsx)(nu,{aliveChannel:l.aliveChannel,pathName:C}),(0,o.jsxs)("div",{className:nQ,children:[c&&(0,o.jsx)(eV,{totalFilesCount:u}),!a&&i,D&&u>1&&(0,o.jsx)("div",{className:nZ,children:(0,o.jsx)(ic,{userNotices:p})})]}),R&&(0,o.jsx)("div",{className:nJ,"data-testid":"file-controls-divider"}),O&&h?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Q.Q,{variant:"danger",size:"small",onClick:Y,children:"Discard batch"}),(0,o.jsxs)(Q.Q,{variant:"primary",size:"small",onClick:Z,children:["Commit suggestions ",(0,o.jsx)(w.A,{className:"ml-1 color-fg-inherit",children:W})]})]}):(0,o.jsxs)(o.Fragment,{children:[f&&(0,o.jsx)(iS,{aliveChannel:l.aliveChannel}),(0,o.jsx)("div",{className:"d-none d-sm-flex",children:(0,o.jsx)(tf,{pageLimits:r,pullRequest:l,isFileTreeExpanded:a})}),(0,o.jsx)(tw,{className:"d-none d-sm-flex",pageLimits:r,isFileTreeExpanded:a}),n&&(0,o.jsx)(nt,{currentUserLogin:n,pullRequest:l,repository:d}),(0,o.jsx)("div",{className:"d-none d-sm-flex",children:(0,o.jsx)(ns.G,{invisible:!1,reloadOnWhitespaceChange:!0,onUpdateWhitespace:H,defaultHideWhitespace:S,small:!0,userNotices:p,additionalPreferences:(0,o.jsx)(im,{changeGroupsPreferenceAvailable:e,showChangeGroups:N,onShowChangeGroupsChange:en})})}),(0,o.jsx)("div",{className:"d-flex d-sm-none",children:(0,o.jsx)(iu,{pageLimits:r,pullRequest:l,hideWhitespace:S,onUpdateWhitespace:H,additionalPreferences:(0,o.jsx)(im,{changeGroupsPreferenceAvailable:e,showChangeGroups:N,onShowChangeGroupsChange:en})})})]})]})]}),M&&ei.length>0&&(0,o.jsx)(ip.$,{authorLogins:[],batchSize:F.activeBatch.length,onClose:J,onCommit:et,defaultCommitMessage:"Apply suggestions from code review",suggestions:ei,onRemoveSuggestion:K,onDiscardBatch:ee}),(0,o.jsx)(nh.G,{isOpen:L,onConfirm:ee,onCancel:X,suggestionsCount:W})]})};function iT(e){return{commentDatabaseId:e.commentDatabaseId,suggestionIndex:e.suggestionIndex,path:e.path,bodyHTML:e.bodyHTML}}try{iI.displayName||(iI.displayName="LivePullRequestFilesToolbar")}catch{}try{ik.displayName||(ik.displayName="PullRequestFilesToolbar")}catch{}function iE(e,t){(0,v.useMemo)(()=>{if(e&&t){for(let n of t)if(n.markersMap)for(let t in n.markersMap){let i=n.markersMap[t];if(i?.threads)for(let n of i.threads){let i=function(e,t){if("FILE"===e)return;let n=e[0];if(!iL(n))throw Error(`Invalid diff side character: ${n}`);let i=Number(e.slice(1)),a=-1,s="R";if(t.start){a=parseInt(t.start.slice(1));let e=t.start[0];iL(e)&&(s=e)}else a=i,s=n;return{endLine:i,endDiffSide:iR[n],startLine:a,startDiffSide:iR[s],isOutdated:!!t.outdatedReason}}(t,n),a=e.threads[Number(n.id)];if(a&&i){let{isOutdated:e,...t}=i;a.positioning=i,a.subject=t}}}}},[t,e])}let iR={L:"LEFT",R:"RIGHT"};function iL(e){return"L"===e||"R"===e}let iA="DiffComparisonViewer-module__Container--nndHZ",iD="DiffComparisonViewer-module__HiddenPane--pMKU7",iP="DiffComparisonViewer-module__PaneContain--PQMad",iO="DiffComparisonViewer-module__PaneOverflowVisible--fmHF4",iF="DiffComparisonViewer-module__RegularTreeToggle--_Zt7h",iB="DiffComparisonViewer-module__MobileTreeToggle--lAOrS",iM="DiffComparisonViewer-module__Pane--FbQgQ",iV="DiffComparisonViewer-module__WideExpanded--a6hBe",i$="DiffComparisonViewer-module__WideCollapsed--nAjUj",iU="DiffComparisonViewer-module__CompactHidden--NQ1CL",iq="DiffComparisonViewer-module__CompactOverlay--ZnZLv",iW="DiffComparisonViewer-module__CompactInline--jndVg",iH="DiffComparisonViewer-module__Content--Cv2ab",iG="DiffComparisonViewer-module__SkeletonWrapper--eZhhq",iz="DiffComparisonViewer-module__SkeletonIconWrapper--e2YmQ";var iK=n(43645),iQ=n(24798),iZ=n(50129);function iJ({basePath:e,selectedRange:t}){return[X.uT.baseComparisonInfo,e,`baseOid:${t.baseOid}`,`headOid:${t.headOid}`]}let iY=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l=(0,c.c)(17),{basePath:o,headSha:d,baseSha:u,shouldFetch:m}=e;if(l[0]!==o||l[1]!==u||l[2]!==d){let e=new URLSearchParams;u===d?e.append("range",d??""):u&&d?e.append("range",`${u}..${d}`):d&&e.append("range",d),t=o,n=X.uT.baseComparisonInfo,i=e.toString(),l[0]=o,l[1]=u,l[2]=d,l[3]=t,l[4]=n,l[5]=i}else t=l[3],n=l[4],i=l[5];let p=`${t}/page_data/${n}?${i}`,h=u??"base-sha-not-provided";l[6]!==o||l[7]!==d||l[8]!==h?(a=iJ({basePath:o,selectedRange:{baseOid:h,headOid:d}}),l[6]=o,l[7]=d,l[8]=h,l[9]=a):a=l[9];let f=a;return l[10]!==p||l[11]!==d?(s=async()=>{if(!d)return;let e=await (0,ed.QJ)(p);if(!e.ok)throw Error(`HTTP ${e.status}`);return await e.json()??void 0},l[10]=p,l[11]=d,l[12]=s):s=l[12],l[13]!==f||l[14]!==m||l[15]!==s?(r={queryKey:f,queryFn:s,staleTime:1/0,enabled:m},l[13]=f,l[14]=m,l[15]=s,l[16]=r):r=l[16],(0,eo.I)(r)}:function({basePath:e,headSha:t,baseSha:n,shouldFetch:i}){let a=new URLSearchParams;n===t?a.append("range",t??""):n&&t?a.append("range",`${n}..${t}`):t&&a.append("range",t);let s=`${e}/page_data/${X.uT.baseComparisonInfo}?${a.toString()}`,r=iJ({basePath:e,selectedRange:{baseOid:n??"base-sha-not-provided",headOid:t}});return(0,eo.I)({queryKey:r,queryFn:async()=>{if(!t)return;let e=await (0,ed.QJ)(s);if(!e.ok)throw Error(`HTTP ${e.status}`);return await e.json()??void 0},staleTime:1/0,enabled:i})},iX=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,p,h,f,g,y,b=(0,c.c)(37),{fileFilter:_,isFileTreeExpanded:j,shouldShowViewedFilesCount:w,totalFilesCount:N,treeToggleElement:C,userNotices:S}=e;b[0]===Symbol.for("react.memo_cache_sentinel")?(t=["line-spacing"],b[0]=t):t=b[0];let k=t,[T,E]=(0,v.useState)(!1),R=(0,I.j5)(),L=w||!j;b[1]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{e[0]&&E(!e[0].isIntersecting)},b[1]=n):n=b[1];let[A,D]=(0,n$.B)(n);b[2]===Symbol.for("react.memo_cache_sentinel")?(i={visibility:"hidden",height:"1px"},b[2]=i):i=b[2],b[3]!==A||b[4]!==D?(a=(0,o.jsx)(nU.X,{sx:i,onObserve:A,onUnobserve:D}),b[3]=A,b[4]=D,b[5]=a):a=b[5];let P=T&&nW;b[6]!==P?(s=(0,x.$)(nV.A.stickyHeader,nX,P),b[6]=P,b[7]=s):s=b[7],b[8]===Symbol.for("react.memo_cache_sentinel")?(r=(0,o.jsx)("h2",{className:"sr-only",children:"Diff Comparison Toolbar"}),b[8]=r):r=b[8],b[9]!==C?(l=(0,o.jsx)(tS.B,{direction:"horizontal",gap:"condensed",align:"center",className:"min-width-0",children:(0,o.jsx)("div",{children:C})}),b[9]=C,b[10]=l):l=b[10],b[11]!==w||b[12]!==N?(d=w&&(0,o.jsx)(eV,{totalFilesCount:N}),b[11]=w,b[12]=N,b[13]=d):d=b[13];let O=!j&&_;return b[14]!==R||b[15]!==N||b[16]!==S?(u=R&&N>1&&(0,o.jsx)("div",{className:nZ,children:(0,o.jsx)(ic,{userNotices:S})}),b[14]=R,b[15]=N,b[16]=S,b[17]=u):u=b[17],b[18]!==O||b[19]!==u||b[20]!==d?(m=(0,o.jsxs)("div",{className:nQ,children:[d,O,u]}),b[18]=O,b[19]=u,b[20]=d,b[21]=m):m=b[21],b[22]!==L?(p=L&&(0,o.jsx)("div",{className:nJ,"data-testid":"file-controls-divider"}),b[22]=L,b[23]=p):p=b[23],b[24]!==S?(h=(0,o.jsx)(ns.G,{invisible:!1,small:!0,enabledDiffViewSettings:k,userNotices:S}),b[24]=S,b[25]=h):h=b[25],b[26]!==m||b[27]!==p||b[28]!==h?(f=(0,o.jsxs)(tS.B,{direction:"horizontal",align:"center",children:[m,p,h]}),b[26]=m,b[27]=p,b[28]=h,b[29]=f):f=b[29],b[30]!==f||b[31]!==s||b[32]!==l?(g=(0,o.jsxs)(tS.B,{as:"section",direction:"horizontal",justify:"space-between",gap:"condensed",align:"center",className:s,children:[r,l,f]}),b[30]=f,b[31]=s,b[32]=l,b[33]=g):g=b[33],b[34]!==g||b[35]!==a?(y=(0,o.jsxs)(o.Fragment,{children:[a,g]}),b[34]=g,b[35]=a,b[36]=y):y=b[36],y}:function({fileFilter:e,isFileTreeExpanded:t,shouldShowViewedFilesCount:n,totalFilesCount:i,treeToggleElement:a,userNotices:s}){let[r,l]=(0,v.useState)(!1),d=(0,I.j5)(),c=n||!t,[u,m]=(0,n$.B)(e=>{e[0]&&l(!e[0].isIntersecting)});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(nU.X,{sx:{visibility:"hidden",height:"1px"},onObserve:u,onUnobserve:m}),(0,o.jsxs)(tS.B,{as:"section",direction:"horizontal",justify:"space-between",gap:"condensed",align:"center",className:(0,x.$)(nV.A.stickyHeader,nX,r&&nW),children:[(0,o.jsx)("h2",{className:"sr-only",children:"Diff Comparison Toolbar"}),(0,o.jsx)(tS.B,{direction:"horizontal",gap:"condensed",align:"center",className:"min-width-0",children:(0,o.jsx)("div",{children:a})}),(0,o.jsxs)(tS.B,{direction:"horizontal",align:"center",children:[(0,o.jsxs)("div",{className:nQ,children:[n&&(0,o.jsx)(eV,{totalFilesCount:i}),!t&&e,d&&i>1&&(0,o.jsx)("div",{className:nZ,children:(0,o.jsx)(ic,{userNotices:s})})]}),c&&(0,o.jsx)("div",{className:nJ,"data-testid":"file-controls-divider"}),(0,o.jsx)(ns.G,{invisible:!1,small:!0,enabledDiffViewSettings:["line-spacing"],userNotices:s})]})]})]})};try{iX.displayName||(iX.displayName="BasicDiffComparisonViewToolbar")}catch{}var i0=n(8624),i1=n(94195),i2=n(54571),i3=n(71833);let i4="diff-comparison-viewer-container",i5=(0,d.Z6)()?function(e,t,n,i){let a,s,r,l,d,u,m,p,h,f,g,y,x,b=(0,c.c)(40);b[0]===Symbol.for("react.memo_cache_sentinel")?(a=[],b[0]=a):a=b[0];let[_]=(0,i2.I)(i9,!0,a),j=(0,v.useRef)(null),w=(0,v.useRef)(null),N=t?"expanded":"collapsed";b[1]!==N?(s={wideMode:N,compactMode:"none"},b[1]=N,b[2]=s):s=b[2];let[C,S]=(0,v.useState)(s);b[3]!==i?(r=()=>{S(i7),(0,i3.B)(!0,i),requestAnimationFrame(()=>j.current?.focus())},b[3]=i,b[4]=r):r=b[4];let I=r;b[5]!==i?(l=()=>{S({wideMode:"collapsed",compactMode:"none"}),(0,i3.B)(!1,i),requestAnimationFrame(()=>j.current?.focus())},b[5]=i,b[6]=l):l=b[6];let k=l;b[7]!==n?(d=()=>{let e="overlay";if(n){let t=window.innerWidth;(0,i1.nn)(t)>i1.Gy.large&&(e="inline")}S(t=>({...t,compactMode:e})),requestAnimationFrame(()=>w.current?.focus())},b[7]=n,b[8]=d):d=b[8];let T=d;b[9]===Symbol.for("react.memo_cache_sentinel")?(u=()=>{S(i6),requestAnimationFrame(()=>w.current?.focus())},b[9]=u):u=b[9];let E=u;b[10]!==T||b[11]!==I||b[12]!==C.compactMode||b[13]!==C.wideMode?(m=()=>{let e=!1,t=document.getElementById(i4);if(t){let n=t.getBoundingClientRect().width;e=0===n&&ey.cg?ey.cg.innerWidth>=1012:n>=1012}else ey.cg&&(e=ey.cg.innerWidth>=1012);e?"collapsed"===C.wideMode&&I():"none"===C.compactMode&&T()},b[10]=T,b[11]=I,b[12]=C.compactMode,b[13]=C.wideMode,b[14]=m):m=b[14];let R=m,L="expanded"===C.wideMode,A="expanded"===C.wideMode?"Collapse file tree":"Expand file tree";b[15]!==k||b[16]!==I||b[17]!==C.wideMode?(p=()=>{"expanded"===C.wideMode?k():I()},b[15]=k,b[16]=I,b[17]=C.wideMode,b[18]=p):p=b[18],b[19]!==e||b[20]!==p||b[21]!==L||b[22]!==A?(h=(0,o.jsx)(i0.L,{expanded:L,alignment:"left",ariaLabel:A,tooltipDirection:"se",testid:"file-tree-button",ariaControls:e,ref:j,className:iF,onToggleExpanded:p,size:"small"}),b[19]=e,b[20]=p,b[21]=L,b[22]=A,b[23]=h):h=b[23];let D=h,P="none"!==C.compactMode,O="none"!==C.compactMode?"Collapse file tree":"Expand file tree";b[24]!==T||b[25]!==C.compactMode?(f=()=>{"none"!==C.compactMode?E():T()},b[24]=T,b[25]=C.compactMode,b[26]=f):f=b[26],b[27]!==e||b[28]!==P||b[29]!==O||b[30]!==f?(g=(0,o.jsx)(i0.L,{expanded:P,alignment:"left",ariaLabel:O,tooltipDirection:"se",testid:"file-tree-button",ariaControls:e,ref:w,className:iB,onToggleExpanded:f,size:"small"}),b[27]=e,b[28]=P,b[29]=O,b[30]=f,b[31]=g):g=b[31];let F=g;b[32]!==F||b[33]!==D?(y=(0,o.jsxs)(o.Fragment,{children:[F,D]}),b[32]=F,b[33]=D,b[34]=y):y=b[34];let B=y,M=_&&!t;return b[35]!==R||b[36]!==M||b[37]!==B||b[38]!==C?(x={splitPagePaneHidden:M,treeViewState:C,collapseMobileTree:E,expandTree:R,treeToggleElement:B},b[35]=R,b[36]=M,b[37]=B,b[38]=C,b[39]=x):x=b[39],x}:function(e,t,n,i){let[a]=(0,i2.I)(()=>!1,!0,[]),s=(0,v.useRef)(null),r=(0,v.useRef)(null),[l,d]=(0,v.useState)({wideMode:t?"expanded":"collapsed",compactMode:"none"}),c=(0,v.useCallback)(()=>{d(e=>({...e,wideMode:"expanded"})),(0,i3.B)(!0,i),requestAnimationFrame(()=>s.current?.focus())},[i]),u=(0,v.useCallback)(()=>{d({wideMode:"collapsed",compactMode:"none"}),(0,i3.B)(!1,i),requestAnimationFrame(()=>s.current?.focus())},[i]),m=(0,v.useCallback)(()=>{let e="overlay";if(n){let t=window.innerWidth;(0,i1.nn)(t)>i1.Gy.large&&(e="inline")}d(t=>({...t,compactMode:e})),requestAnimationFrame(()=>r.current?.focus())},[n]),p=(0,v.useCallback)(()=>{d(e=>({...e,compactMode:"none"})),requestAnimationFrame(()=>r.current?.focus())},[]),h=(0,v.useCallback)(()=>{let e=!1,t=document.getElementById(i4);if(t){let n=t.getBoundingClientRect().width;e=0===n&&ey.cg?ey.cg.innerWidth>=1012:n>=1012}else ey.cg&&(e=ey.cg.innerWidth>=1012);e?"collapsed"===l.wideMode&&c():"none"===l.compactMode&&m()},[l.wideMode,l.compactMode,c,m]),f=(0,v.useMemo)(()=>(0,o.jsx)(i0.L,{expanded:"expanded"===l.wideMode,alignment:"left",ariaLabel:"expanded"===l.wideMode?"Collapse file tree":"Expand file tree",tooltipDirection:"se",testid:"file-tree-button",ariaControls:e,ref:s,className:iF,onToggleExpanded:()=>{"expanded"===l.wideMode?u():c()},size:"small"}),[l.wideMode,e,u,c]),g=(0,v.useMemo)(()=>(0,o.jsx)(i0.L,{expanded:"none"!==l.compactMode,alignment:"left",ariaLabel:"none"!==l.compactMode?"Collapse file tree":"Expand file tree",tooltipDirection:"se",testid:"file-tree-button",ariaControls:e,ref:r,className:iB,onToggleExpanded:()=>{"none"!==l.compactMode?p():m()},size:"small"}),[l.compactMode,e,p,m]);return{splitPagePaneHidden:a&&!t,treeViewState:l,collapseMobileTree:p,expandTree:h,treeToggleElement:(0,v.useMemo)(()=>(0,o.jsxs)(o.Fragment,{children:[g,f]}),[g,f])}};function i6(e){return{...e,compactMode:"none"}}function i7(e){return{...e,wideMode:"expanded"}}function i9(){return!1}let i8=(0,d.Z6)()?function(){let e,t,n,i=(0,c.c)(7),a=(0,ee.e)(X.uT.generateChangeGroups),{updateChangeGroupGeneration:s}=(0,I.wL)();return i[0]!==a?(e=async()=>{let e=await (0,en.q$)(a,{method:"POST"}),t=await (0,en.hp)(e);return(0,en.R)(e,t),t},i[0]=a,i[1]=e):e=i[1],i[2]!==s?(t=e=>{s(e)},i[2]=s,i[3]=t):t=i[3],i[4]!==e||i[5]!==t?(n={mutationFn:e,onSuccess:t},i[4]=e,i[5]=t,i[6]=n):n=i[6],(0,et.n)(n)}:function(){let e=(0,ee.e)(X.uT.generateChangeGroups),{updateChangeGroupGeneration:t}=(0,I.wL)();return(0,et.n)({mutationFn:async()=>{let t=await (0,en.q$)(e,{method:"POST"}),n=await (0,en.hp)(t);return(0,en.R)(t,n),n},onSuccess:e=>{t(e)}})},ae=(0,d.Z6)()?function(e){let t,n,i,a=(0,c.c)(11),{changeGroupsEnabled:s}=e,r=(0,I.gt)(),l=(0,I.iY)(),o=!!(l&&l.length>0),d=(0,no.u)("generate_groups_on_files_view"),{mutate:u}=i8(),m=(0,I.Fl)();a[0]!==m?(t=m&&(eu(m.state)||!ec(m.state)),a[0]=m,a[1]=t):t=a[1];let p=t,h=(0,I.ww)(),f=(0,v.useRef)(!1);a[2]!==r||a[3]!==s||a[4]!==u||a[5]!==o||a[6]!==h||a[7]!==p||a[8]!==d?(n=()=>{f.current||!d||!s||!r||o||h||p||(u(),f.current=!0)},i=[r,d,u,o,p,h,s],a[2]=r,a[3]=s,a[4]=u,a[5]=o,a[6]=h,a[7]=p,a[8]=d,a[9]=n,a[10]=i):(n=a[9],i=a[10]),(0,v.useEffect)(n,i)}:function({changeGroupsEnabled:e}){let t=(0,I.gt)(),n=(0,I.iY)(),i=!!(n&&n.length>0),a=(0,no.u)("generate_groups_on_files_view"),{mutate:s}=i8(),r=(0,I.Fl)(),l=r&&(eu(r.state)||!ec(r.state)),o=(0,I.ww)(),d=(0,v.useRef)(!1);(0,v.useEffect)(()=>{d.current||!a||!e||!t||i||o||l||(s(),d.current=!0)},[t,a,s,i,l,o,e])};var at=n(59523),an=n(82590),ai=n(66358);let aa=(0,d.Z6)()?function(e){let t,n,i,a,s=(0,c.c)(17),{pullRequestBasePath:r,className:l,diffPath:d,viewerLogin:u}=e,m=(0,v.useId)();s[0]!==r||s[1]!==d?(t={basePath:r,diffPath:d},s[0]=r,s[1]=d,s[2]=t):t=s[2];let p=(0,S.o5)(t);if(!p)return null;let{isOwnedByViewer:h,owners:f,ruleLineNumber:g,ruleUrl:y}=p.data;if(!(h||f.length>0))return null;s[3]!==h||s[4]!==f||s[5]!==g||s[6]!==u?(n=as(h,f,g,u),s[3]=h,s[4]=f,s[5]=g,s[6]=u,s[7]=n):n=s[7];let x=n;return s[8]!==l||s[9]!==h||s[10]!==y||s[11]!==m?(i=y?(0,o.jsx)(D.A,{"aria-labelledby":m,href:y,className:l,muted:!h,children:(0,o.jsx)(q.ShieldLockIcon,{})}):(0,o.jsx)(q.ShieldLockIcon,{className:l}),s[8]=l,s[9]=h,s[10]=y,s[11]=m,s[12]=i):i=s[12],s[13]!==i||s[14]!==x||s[15]!==m?(a=(0,o.jsx)(P.m,{id:m,"aria-label":x,text:x,children:i}),s[13]=i,s[14]=x,s[15]=m,s[16]=a):a=s[16],a}:function({pullRequestBasePath:e,className:t,diffPath:n,viewerLogin:i}){let a=(0,v.useId)(),s=(0,S.o5)({basePath:e,diffPath:n});if(!s)return null;let{isOwnedByViewer:r,owners:l,ruleLineNumber:d,ruleUrl:c}=s.data;if(!(r||l.length>0))return null;let u=as(r,l,d,i);return(0,o.jsx)(P.m,{id:a,"aria-label":u,text:u,children:c?(0,o.jsx)(D.A,{"aria-labelledby":a,href:c,className:t,muted:!r,children:(0,o.jsx)(q.ShieldLockIcon,{})}):(0,o.jsx)(q.ShieldLockIcon,{className:t})})};function as(e,t,n,i){let a="Owned by ",s=t;return e&&(a+="you",i&&(s=t.filter(e=>e!==`@${i}`)),s.length>0&&(a+=" along with ")),a+=s.join(", "),n&&(a+=` (from CODEOWNERS line ${n})`),a}try{aa.displayName||(aa.displayName="CodeownersBadge")}catch{}var ar=n(78252),al=n(31675);let ao="BlobActionsMenu-module__hiddenIcon--EJrTU",ad=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,p,h,f,g=(0,c.c)(46),{oid:y,path:x,repo:v,branchName:b,isViewable:_,isDeleteable:w,isEditable:N,shouldShowEditOptions:C,copilotDiffChatProps:S,returnToPullRequestPath:I,onCommentOnFile:k,onCopyPath:T,onExpandLines:E,areLinesExpanded:R,richDiffToggle:L,codeownersText:A,codeownersUrl:D}=e,P=void 0===w||w,O=void 0===N||N,F=void 0===C||C;g[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.jsx)(eq.W.Anchor,{children:(0,o.jsx)(W.K,{icon:q.KebabHorizontalIcon,"aria-label":"More options",variant:"invisible",size:"small"})}),g[0]=t):t=g[0],g[1]!==L?(n=L?.richDiff?.canToggleRichDiff&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(j.l.Item,{className:al.A["hide-on-medium-up"],onSelect:L.onToggle,children:[(0,o.jsx)(j.l.LeadingVisual,{children:(0,o.jsx)("span",{className:L.isRichDiff?ao:void 0,children:(0,o.jsx)(q.CheckIcon,{})})}),"Source diff"]}),(0,o.jsxs)(j.l.Item,{className:al.A["hide-on-medium-up"],onSelect:L.onToggle,children:[(0,o.jsx)(j.l.LeadingVisual,{children:(0,o.jsx)("span",{className:L.isRichDiff?void 0:ao,children:(0,o.jsx)(q.CheckIcon,{})})}),"Rich diff"]}),(0,o.jsx)(j.l.Divider,{className:al.A["hide-on-medium-up"]})]}),g[1]=L,g[2]=n):n=g[2],g[3]!==S?(i=S&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ar.$,{...S}),(0,o.jsx)(j.l.Divider,{})]}),g[3]=S,g[4]=i):i=g[4],g[5]!==k?(a=k&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(j.l.Item,{className:al.A["hide-on-desktop"],onSelect:k,children:[(0,o.jsx)(j.l.LeadingVisual,{children:(0,o.jsx)(q.CommentIcon,{})}),"Comment on this file"]}),(0,o.jsx)(j.l.Divider,{className:al.A["hide-on-desktop"]})]}),g[5]=k,g[6]=a):a=g[6],g[7]!==T?(s=T&&(0,o.jsxs)(j.l.Item,{className:al.A["hide-on-desktop"],onSelect:T,children:[(0,o.jsx)(j.l.LeadingVisual,{children:(0,o.jsx)(q.CopyIcon,{})}),"Copy file name"]}),g[7]=T,g[8]=s):s=g[8],g[9]!==R||g[10]!==E?(r=E&&(0,o.jsxs)(j.l.Item,{className:al.A["hide-on-desktop"],onSelect:E,children:[(0,o.jsx)(j.l.LeadingVisual,{children:R?(0,o.jsx)(q.FoldIcon,{}):(0,o.jsx)(q.UnfoldIcon,{})}),(0,o.jsx)("span",{children:R?"Collapse non-diff lines":"Expand all lines"})]}),g[9]=R,g[10]=E,g[11]=r):r=g[11],g[12]!==T||g[13]!==E?(l=(T||E)&&(0,o.jsx)(j.l.Divider,{className:al.A["hide-on-desktop"]}),g[12]=T,g[13]=E,g[14]=l):l=g[14],g[15]!==y||g[16]!==x||g[17]!==v.name||g[18]!==v.ownerLogin?(d=(0,eD.nD_)({repo:v.name,owner:v.ownerLogin,filePath:x,commitish:y}),g[15]=y,g[16]=x,g[17]=v.name,g[18]=v.ownerLogin,g[19]=d):d=g[19];let B=void 0===_||_?void 0:"Action unavailable";return g[20]===Symbol.for("react.memo_cache_sentinel")?(u=(0,o.jsx)(j.l.LeadingVisual,{children:(0,o.jsx)(q.EyeIcon,{})}),g[20]=u):u=g[20],g[21]!==d||g[22]!==B?(m=(0,o.jsxs)(j.l.LinkItem,{href:d,inactiveText:B,children:[u,"View file"]}),g[21]=d,g[22]=B,g[23]=m):m=g[23],g[24]!==b||g[25]!==P||g[26]!==O||g[27]!==x||g[28]!==v.name||g[29]!==v.ownerLogin||g[30]!==I||g[31]!==F?(p=b&&F&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(j.l.LinkItem,{href:(0,eD.Nyd)({repo:v.name,owner:v.ownerLogin,filePath:x,commitish:b,returnToPrPath:I}),inactiveText:O?void 0:"Action unavailable",children:[(0,o.jsx)(j.l.LeadingVisual,{children:(0,o.jsx)(q.PencilIcon,{})}),"Edit file"]}),(0,o.jsxs)(j.l.LinkItem,{variant:"danger",href:(0,eD.Y65)({repo:v.name,owner:v.ownerLogin,filePath:x,commitish:b}),inactiveText:P?void 0:"Action unavailable",children:[(0,o.jsx)(j.l.LeadingVisual,{children:(0,o.jsx)(q.TrashIcon,{})}),"Delete file"]})]}),g[24]=b,g[25]=P,g[26]=O,g[27]=x,g[28]=v.name,g[29]=v.ownerLogin,g[30]=I,g[31]=F,g[32]=p):p=g[32],g[33]!==A||g[34]!==D?(h=A&&D&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(j.l.Divider,{className:al.A["hide-on-desktop"]}),(0,o.jsxs)(j.l.LinkItem,{className:al.A["hide-on-desktop"],href:D,children:[(0,o.jsx)(j.l.LeadingVisual,{children:(0,o.jsx)(q.ShieldLockIcon,{})}),A]})]}),g[33]=A,g[34]=D,g[35]=h):h=g[35],g[36]!==r||g[37]!==l||g[38]!==m||g[39]!==p||g[40]!==h||g[41]!==n||g[42]!==i||g[43]!==a||g[44]!==s?(f=(0,o.jsxs)(eq.W,{children:[t,(0,o.jsx)(eq.W.Overlay,{children:(0,o.jsxs)(j.l,{children:[n,i,a,s,r,l,m,p,h]})})]}),g[36]=r,g[37]=l,g[38]=m,g[39]=p,g[40]=h,g[41]=n,g[42]=i,g[43]=a,g[44]=s,g[45]=f):f=g[45],f}:function({oid:e,path:t,repo:n,branchName:i,isViewable:a=!0,isDeleteable:s=!0,isEditable:r=!0,shouldShowEditOptions:l=!0,copilotDiffChatProps:d,returnToPullRequestPath:c,onCommentOnFile:u,onCopyPath:m,onExpandLines:p,areLinesExpanded:h,richDiffToggle:f,codeownersText:g,codeownersUrl:y}){return(0,o.jsxs)(eq.W,{children:[(0,o.jsx)(eq.W.Anchor,{children:(0,o.jsx)(W.K,{icon:q.KebabHorizontalIcon,"aria-label":"More options",variant:"invisible",size:"small"})}),(0,o.jsx)(eq.W.Overlay,{children:(0,o.jsxs)(j.l,{children:[f?.richDiff?.canToggleRichDiff&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(j.l.Item,{className:al.A["hide-on-medium-up"],onSelect:f.onToggle,children:[(0,o.jsx)(j.l.LeadingVisual,{children:(0,o.jsx)("span",{className:f.isRichDiff?ao:void 0,children:(0,o.jsx)(q.CheckIcon,{})})}),"Source diff"]}),(0,o.jsxs)(j.l.Item,{className:al.A["hide-on-medium-up"],onSelect:f.onToggle,children:[(0,o.jsx)(j.l.LeadingVisual,{children:(0,o.jsx)("span",{className:f.isRichDiff?void 0:ao,children:(0,o.jsx)(q.CheckIcon,{})})}),"Rich diff"]}),(0,o.jsx)(j.l.Divider,{className:al.A["hide-on-medium-up"]})]}),d&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ar.$,{...d}),(0,o.jsx)(j.l.Divider,{})]}),u&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(j.l.Item,{className:al.A["hide-on-desktop"],onSelect:u,children:[(0,o.jsx)(j.l.LeadingVisual,{children:(0,o.jsx)(q.CommentIcon,{})}),"Comment on this file"]}),(0,o.jsx)(j.l.Divider,{className:al.A["hide-on-desktop"]})]}),m&&(0,o.jsxs)(j.l.Item,{className:al.A["hide-on-desktop"],onSelect:m,children:[(0,o.jsx)(j.l.LeadingVisual,{children:(0,o.jsx)(q.CopyIcon,{})}),"Copy file name"]}),p&&(0,o.jsxs)(j.l.Item,{className:al.A["hide-on-desktop"],onSelect:p,children:[(0,o.jsx)(j.l.LeadingVisual,{children:h?(0,o.jsx)(q.FoldIcon,{}):(0,o.jsx)(q.UnfoldIcon,{})}),(0,o.jsx)("span",{children:h?"Collapse non-diff lines":"Expand all lines"})]}),(m||p)&&(0,o.jsx)(j.l.Divider,{className:al.A["hide-on-desktop"]}),(0,o.jsxs)(j.l.LinkItem,{href:(0,eD.nD_)({repo:n.name,owner:n.ownerLogin,filePath:t,commitish:e}),inactiveText:a?void 0:"Action unavailable",children:[(0,o.jsx)(j.l.LeadingVisual,{children:(0,o.jsx)(q.EyeIcon,{})}),"View file"]}),i&&l&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(j.l.LinkItem,{href:(0,eD.Nyd)({repo:n.name,owner:n.ownerLogin,filePath:t,commitish:i,returnToPrPath:c}),inactiveText:r?void 0:"Action unavailable",children:[(0,o.jsx)(j.l.LeadingVisual,{children:(0,o.jsx)(q.PencilIcon,{})}),"Edit file"]}),(0,o.jsxs)(j.l.LinkItem,{variant:"danger",href:(0,eD.Y65)({repo:n.name,owner:n.ownerLogin,filePath:t,commitish:i}),inactiveText:s?void 0:"Action unavailable",children:[(0,o.jsx)(j.l.LeadingVisual,{children:(0,o.jsx)(q.TrashIcon,{})}),"Delete file"]})]}),g&&y&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(j.l.Divider,{className:al.A["hide-on-desktop"]}),(0,o.jsxs)(j.l.LinkItem,{className:al.A["hide-on-desktop"],href:y,children:[(0,o.jsx)(j.l.LeadingVisual,{children:(0,o.jsx)(q.ShieldLockIcon,{})}),g]})]})]})})]})};try{ad.displayName||(ad.displayName="BlobActionsMenu")}catch{}let ac="MarkAsViewedButton-module__viewed--czELS",au="MarkAsViewedButton-module__iconOnly--tQ1ah",am=(0,d.Z6)()?function(e,t){let n,i,a,s,r=(0,c.c)(10),{onSuccess:l,onError:o}=t,d=`${e}/file_review`;return r[0]!==d?(n=async e=>{let{viewedStatus:t,path:n}=e,i=await (0,ed.Sr)(`${d}`,{method:t?"POST":"DELETE",headers:{Accept:"application/json"},body:{path:n,viewed:t?"viewed":void 0,_method:t?void 0:"delete"}}),a=await i.json();if(i.ok)return a;throw Error(a.error||"Unknown error occurred",{cause:i.status})},r[0]=d,r[1]=n):n=r[1],r[2]!==l?(i=()=>{l()},r[2]=l,r[3]=i):i=r[3],r[4]!==o?(a=e=>{o(e)},r[4]=o,r[5]=a):a=r[5],r[6]!==n||r[7]!==i||r[8]!==a?(s={mutationFn:n,onSuccess:i,onError:a},r[6]=n,r[7]=i,r[8]=a,r[9]=s):s=r[9],(0,et.n)(s)}:function(e,{onSuccess:t,onError:n}){let i=`${e}/file_review`;return(0,et.n)({mutationFn:async({viewedStatus:e,path:t})=>{let n=await (0,ed.Sr)(`${i}`,{method:e?"POST":"DELETE",headers:{Accept:"application/json"},body:{path:t,viewed:e?"viewed":void 0,_method:e?void 0:"delete"}}),a=await n.json();if(n.ok)return a;throw Error(a.error||"Unknown error occurred",{cause:n.status})},onSuccess:()=>{t()},onError:e=>{n(e)}})},ap=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d=(0,c.c)(27),{basePath:u,inactive:m,inactiveTooltip:p,path:h,setIsCollapsed:f}=e,g=void 0!==m&&m,y=(0,I.Mv)(h);d[0]===Symbol.for("react.memo_cache_sentinel")?(t={onSuccess:af,onError:ah},d[0]=t):t=d[0];let{mutate:v}=am(u,t),{setDiffViewed:b}=(0,I.Ud)(),_=(0,I.j5)(),{navigateToNext:j}=n7();d[1]!==g||d[2]!==_||d[3]!==y||d[4]!==j||d[5]!==h||d[6]!==b||d[7]!==f||d[8]!==v?(n=()=>{g||(v({viewedStatus:!y,path:h}),b(h,!y),_?j():f(!y))},d[1]=g,d[2]=_,d[3]=y,d[4]=j,d[5]=h,d[6]=b,d[7]=f,d[8]=v,d[9]=n):n=d[9];let w=n;d[10]!==y?(i=y?(0,o.jsx)(q.CheckboxFillIcon,{className:"color-fg-accent"}):(0,o.jsx)("svg",{"aria-hidden":"true",fill:"none",height:"16",role:"img",viewBox:"0 0 16 16",width:"16",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{clipRule:"evenodd",d:"M2.5 2.75C2.5 2.61193 2.61193 2.5 2.75 2.5H13.25C13.3881 2.5 13.5 2.61193 13.5 2.75V13.25C13.5 13.3881 13.3881 13.5 13.25 13.5H2.75C2.61193 13.5 2.5 13.3881 2.5 13.25V2.75ZM2.75 1C1.7835 1 1 1.7835 1 2.75V13.25C1 14.2165 1.7835 15 2.75 15H13.25C14.2165 15 15 14.2165 15 13.25V2.75C15 1.7835 14.2165 1 13.25 1H2.75Z",fill:"currentColor",fillRule:"evenodd"})}),d[10]=y,d[11]=i):i=d[11];let N=i,C=y?"Viewed":"Not Viewed";d[12]!==N?(a=()=>N,d[12]=N,d[13]=a):a=d[13];let S=y&&ac;d[14]!==S?(s=(0,x.$)(S,au),d[14]=S,d[15]=s):s=d[15],d[16]===Symbol.for("react.memo_cache_sentinel")?(r=(0,o.jsx)("span",{className:al.A["hide-on-mobile"],children:"Viewed"}),d[16]=r):r=d[16],d[17]!==w||d[18]!==g||d[19]!==y||d[20]!==C||d[21]!==a||d[22]!==s?(l=(0,o.jsx)(Q.Q,{"aria-pressed":y,"aria-label":C,inactive:g,size:"small",variant:"default",leadingVisual:a,className:s,onClick:w,children:r}),d[17]=w,d[18]=g,d[19]=y,d[20]=C,d[21]=a,d[22]=s,d[23]=l):l=d[23];let k=l;if(!g||!p)return k;{let e;return d[24]!==k||d[25]!==p?(e=(0,o.jsx)(P.m,{text:p,children:k}),d[24]=k,d[25]=p,d[26]=e):e=d[26],e}}:function({basePath:e,inactive:t=!1,inactiveTooltip:n,path:i,setIsCollapsed:a}){let s=(0,I.Mv)(i),{mutate:r}=am(e,{onSuccess:()=>{},onError:()=>{}}),{setDiffViewed:l}=(0,I.Ud)(),d=(0,I.j5)(),{navigateToNext:c}=n7(),u=(0,v.useCallback)(()=>{t||(r({viewedStatus:!s,path:i}),l(i,!s),d?c():a(!s))},[r,t,s,i,l,d,c,a]),m=(0,v.useMemo)(()=>s?(0,o.jsx)(q.CheckboxFillIcon,{className:"color-fg-accent"}):(0,o.jsx)("svg",{"aria-hidden":"true",fill:"none",height:"16",role:"img",viewBox:"0 0 16 16",width:"16",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{clipRule:"evenodd",d:"M2.5 2.75C2.5 2.61193 2.61193 2.5 2.75 2.5H13.25C13.3881 2.5 13.5 2.61193 13.5 2.75V13.25C13.5 13.3881 13.3881 13.5 13.25 13.5H2.75C2.61193 13.5 2.5 13.3881 2.5 13.25V2.75ZM2.75 1C1.7835 1 1 1.7835 1 2.75V13.25C1 14.2165 1.7835 15 2.75 15H13.25C14.2165 15 15 14.2165 15 13.25V2.75C15 1.7835 14.2165 1 13.25 1H2.75Z",fill:"currentColor",fillRule:"evenodd"})}),[s]),p=(0,o.jsx)(Q.Q,{"aria-pressed":s,"aria-label":s?"Viewed":"Not Viewed",inactive:t,size:"small",variant:"default",leadingVisual:()=>m,className:(0,x.$)(s&&ac,au),onClick:u,children:(0,o.jsx)("span",{className:al.A["hide-on-mobile"],children:"Viewed"})});return t&&n?(0,o.jsx)(P.m,{text:n,children:p}):p};function ah(){}function af(){}try{ap.displayName||(ap.displayName="MarkAsViewedButton")}catch{}var ag=n(79634);function ay({basePath:e,effectiveRange:t,path:n}){return[X.uT.richDiff,e,`baseOid:${t.baseOid}`,`headOid:${t.headOid}`,`path:${n}`]}let ax=(0,d.Z6)()?function(e){let t,n,i,a=(0,c.c)(11),{basePath:s,path:r}=e,l=(0,I.L3)();a[0]!==s||a[1]!==l||a[2]!==r?(t=ay({basePath:s,path:r,...l}),a[0]=s,a[1]=l,a[2]=r,a[3]=t):t=a[3];let o=t;a[4]!==s||a[5]!==l||a[6]!==r?(n={path:r,basePath:s,...l,signal:void 0},a[4]=s,a[5]=l,a[6]=r,a[7]=n):n=a[7];let d=n;return a[8]!==d||a[9]!==o?(i={fetcher:av,key:o,args:d},a[8]=d,a[9]=o,a[10]=i):i=a[10],i}:function({basePath:e,path:t}){let n=(0,I.L3)();return{fetcher:av,key:ay({basePath:e,path:t,...n}),args:{path:t,basePath:e,...n,signal:void 0}}};async function av({basePath:e,fullDiff:t,effectiveRange:n,path:i,signal:a}){let s=new URLSearchParams;s.append("path",i),n.baseOid===t.baseOid?s.append("range",n.headOid):s.append("range",`${n.baseOid}..${n.headOid}`);let r=`${e}/page_data/${X.uT.richDiff}?${s.toString()}`;try{let e=await (0,ed.Sr)(r,{signal:a});if(a?.aborted)return;let t=await (0,en.hp)(e);return(0,en.R)(e,t),t??void 0}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;throw e}}var ab=n(15697);function a_(e,t){if(e.type!==t.type)return!1;let n="CONTEXT"===e.type||"ADDITION"===e.type,i="DELETION"===e.type;return n&&e.right===t.line||i&&e.left===t.line}function aj({diffSummary:e,commentPreference:t,lineSpacingPreference:n,isCollapsed:i}){let a=n===p.Ud.Compact?20:25,s=e?Math.max(1,Math.ceil(e.linesChanged/5)):1,r=0,l=0;if(i)return 50;if(t===p.sI.Visible){let t=0,n=0;for(let i of Object.values(e?.markersMap||{}))t+=i.threads.length,n+=i.annotations.length;r=500*t,l=300*n}return 50+a*(e?.linesChanged??5)+r+l+6*s*a}function aw({diffManuallyExpanded:e,headBranchName:t,headRepoName:n,headRepoOwner:i,diffLines:a,path:s,isSelected:r=!1,reviewed:l,...d}){let c=(0,I.Kp)(),u=(0,I.JA)(),{fetchContextLines:m}=(0,I.QV)(),p=(0,I.L3)(),h=p.hideWhitespace?"1":"0",f=ax({basePath:c,path:s}),g=(0,v.useRef)(null),y=(0,v.useRef)(null),{helpUrl:b}=(0,ag.X)(),_=(0,I.kN)(s),{updateAllFilesCollapsedStatus:j,updateFileCollapsedStatus:w}=(0,I.JR)(),N=(0,I.GR)(),[k,T]=(0,v.useState)(!1),[E,R]=(0,v.useState)(d.richDiff?.defaultToRichDiff??!1),L=(0,eS.G7)("pr_simple_diffs"),A=(0,I.Fm)(s),D=(0,v.useMemo)(()=>{if(L)return aj({diffSummary:A,commentPreference:d.currentUser.commentsPreference,lineSpacingPreference:d.currentUser.lineSpacing,isCollapsed:_})},[d.currentUser.commentsPreference,d.currentUser.lineSpacing,A,_,L]),P=(0,I.ne)(s),O=(0,S.dG)({basePath:c}),F=(0,S.hG)({diffPath:s,codeownersData:O?.data}),B=(0,v.useMemo)(()=>P?P[te.zW]?.threads??[]:[],[P]),M=(0,v.useMemo)(()=>u?function(e,t,n){let i=[],a=t.hunkPositions[n];if(!a)return i;let s=0,r=a[0];if(!r)return i;let l=!1;for(let t of e)if(l){if(i.push(t),a_(t,r.endLine)&&(l=!1,!(r=a[++s])))break}else a_(t,r.startLine)&&(l=!0,i.push(r.headerLine),i.push(t));return i}(a,u,s):a,[u,s,a]),V=(0,v.useCallback)(()=>{w(s,!1)},[s,w]),$=(0,v.useCallback)(()=>{N()&&_&&V()},[_,V,N]),U=(0,v.useCallback)(()=>{(0,C.K3)(),$()},[$]),H=(0,v.useCallback)(()=>{(0,n6.o9)()===d.pathDigest&&_&&V()},[d.pathDigest,V,_]),G=(0,v.useCallback)(()=>{$(),H()},[$,H]);(0,v.useEffect)(()=>{G()},[]),(0,v.useEffect)(()=>(ey.cg?.addEventListener("hashchange",G),()=>{ey.cg?.removeEventListener("hashchange",G)}),[G]);let z=(0,v.useCallback)((e,t,n)=>{if(n&&n.altKey)j(e);else{if(w(t,e),!e)return;ey.cg?.requestAnimationFrame(()=>{let e=g.current?.getBoundingClientRect();!e||e.top<62&&ey.cg?.scrollTo({top:e.top+ey.cg.scrollY-62})})}},[j,w]),K=(0,v.useRef)((0,ab.B)({diffSummary:A})),[Q,Z]=(0,v.useState)(!1),J=(0,v.useCallback)(async e=>{U(),K.current.push(e),m({contextLineRanges:K.current,path:s,w:h})},[U,m,s,h]),Y=(0,v.useCallback)(async()=>{await m({contextLineRanges:[],path:s})},[m,s]),X=(0,v.useMemo)(()=>{if(d.isBinary||d.isSubmodule||d.isTooBig||(0,at.dK)({linesChanged:d.linesChanged,newTreeEntry:d.newTreeEntry,oldTreeEntry:d.oldTreeEntry,status:d.status,truncatedReason:d.truncatedReason}))return!1;if(Q)return!0;if(0===M.length)return!1;if((M[1]?.blobLineNumber||0)>1)return!0;let e=M.length,t=M[e-1]?.blobLineNumber||0,n=d.newTreeEntry?.lineCount||0;return!!(t<n)||!!(e-1<n)},[d.isBinary,d.isSubmodule,d.isTooBig,d.linesChanged,d.newTreeEntry,d.oldTreeEntry,d.status,d.truncatedReason,M,Q]),ee=(0,v.useCallback)(async()=>{let e,t;K.current=[],Q||K.current.push({start:1,end:Math.max(d.oldTreeEntry?.lineCount??0,d.newTreeEntry?.lineCount??0)});let n=document.activeElement;await m({contextLineRanges:K.current,path:s,w:h}),Z(!Q),n&&(e=null,t=null,n&&(n.hasAttribute("data-grid-cell-id")&&(e=n.getAttribute("data-grid-cell-id")),n.hasAttribute("data-file-path")&&(t=n.getAttribute("data-file-path"))),setTimeout(()=>{if(e){let t=document.querySelector(`[data-grid-cell-id="${e}"]`);if(t)return void t.focus()}if(t){let e=document.querySelector(`button[data-file-path="${t}"]`);e&&e.focus()}},0))},[Q,d.oldTreeEntry?.lineCount,d.newTreeEntry?.lineCount,m,s,h]),et=(0,v.useCallback)(()=>R(!E),[E]),en=(0,v.useMemo)(()=>d.richDiff?.canToggleRichDiff?{richDiff:d.richDiff,isRichDiff:E,onToggle:et}:void 0,[d.richDiff,E,et]),ei=(0,v.useMemo)(()=>F&&(F.isOwnedByViewer||F.owners.length>0)?as(F.isOwnedByViewer,F.owners,void 0,d.currentUser.login):void 0,[F,d.currentUser.login]),ea=(0,v.useMemo)(()=>F?.ruleUrl,[F]),es=(0,v.useMemo)(()=>d.currentUser.canComment?()=>T(!0):void 0,[d.currentUser.canComment]),er=(0,v.useCallback)(()=>navigator.clipboard?.writeText(s),[s]),el=(0,v.useMemo)(()=>X?ee:void 0,[X,ee]),eo=(0,v.useMemo)(()=>({richDiff:d.richDiff,showRichDiff:E,onToggleRichDiff:R,queryConfig:f}),[d.richDiff,E,f]),ed=(0,v.useMemo)(()=>{let e=new Set([]);return u&&e.add(ai.YR.diffStats).add(ai.YR.expandLines),p.fullDiff.headOid!==p.effectiveRange.headOid&&e.add(ai.YR.markAsViewed),e},[u,p.effectiveRange.headOid,p.fullDiff.headOid]),{disabledFeatures:ec,disabledReasons:eu}=(0,v.useMemo)(()=>{let e=new Set([]),t=new Map;return u&&(e.add(ai.YR.markAsViewed),t.set(ai.YR.markAsViewed,"This file can only be marked as viewed on the \u201CAll files\u201D page")),{disabledFeatures:e,disabledReasons:t}},[u]);return(0,o.jsx)(an.oO,{loadDiff:Y,...d,addFileCommentButtonRef:y,diffManuallyExpanded:e,estimatedDiffHeight:D,fileComments:B,hiddenFeatures:ed,isAddingFileComment:k,isSelected:r,leftSideContent:(0,o.jsx)(v.Suspense,{children:(0,o.jsx)(aa,{className:(0,x.$)("px-1 flex-items-center flex-order-2 flex-sm-order-1",al.A["hide-on-mobile"]),diffPath:s,pullRequestBasePath:c,viewerLogin:d.currentUser.login})}),rightSideContent:(0,o.jsxs)("div",{className:"d-flex flex-items-center gap-2",children:[!ed.has(ai.YR.markAsViewed)&&(0,o.jsx)(ap,{path:s,basePath:c,inactive:ec.has(ai.YR.markAsViewed)||!!u,inactiveTooltip:eu.get(ai.YR.markAsViewed),setIsCollapsed:e=>z(e,s)}),d.currentUser.canComment&&(0,o.jsx)(W.K,{ref:y,icon:q.CommentIcon,"aria-label":"Comment on this file","aria-expanded":k,variant:"invisible",size:"small",onClick:()=>T(!0),className:al.A["hide-on-mobile"]}),(0,o.jsx)(ad,{oid:"REMOVED"===d.status&&d.oldCommitOid?d.oldCommitOid:d.newCommitOid||"",path:s,repo:{name:n||d.repository.name,ownerLogin:i||d.repository.ownerLogin},isViewable:!d.isSubmodule,isDeleteable:!d.isSubmodule,isEditable:!d.isSubmodule,shouldShowEditOptions:d.currentUser.shouldDisplayEditOptions,branchName:t,returnToPullRequestPath:c,onCommentOnFile:es,onCopyPath:er,onExpandLines:el,areLinesExpanded:Q,richDiffToggle:en,codeownersText:ei,codeownersUrl:ea})]}),canExpandOrCollapseLines:X,expandAllContextLines:ee,hasExpandedAllRanges:Q,addInjectedContextLines:J,onToggleCollapse:(e,t)=>z(t,s,e),path:s,ref:g,setIsAddingFileComment:T,collapsed:_,helpUrl:b,linesAdded:A?.linesAdded||d.linesAdded||0,linesChanged:A?.linesChanged||d.linesChanged||0,linesDeleted:A?.linesDeleted||d.linesDeleted||0,diffLines:M,richDiffState:eo})}try{aw.displayName||(aw.displayName="PullRequestDiff")}catch{}let aN=(0,v.memo)((0,d.Z6)()?function(e){let t,n=(0,c.c)(9),{linesAdded:i,linesChanged:a,linesDeleted:s,newTreeEntry:r,oldTreeEntry:l,path:d,pathDigest:u,status:m}=e;return n[0]!==i||n[1]!==a||n[2]!==s||n[3]!==r||n[4]!==l||n[5]!==d||n[6]!==u||n[7]!==m?(t=(0,o.jsx)(an.Ao,{linesAdded:i,linesChanged:a,linesDeleted:s,newTreeEntry:r,oldTreeEntry:l,path:d,pathDigest:u,status:m}),n[0]=i,n[1]=a,n[2]=s,n[3]=r,n[4]=l,n[5]=d,n[6]=u,n[7]=m,n[8]=t):t=n[8],t}:function({linesAdded:e,linesChanged:t,linesDeleted:n,newTreeEntry:i,oldTreeEntry:a,path:s,pathDigest:r,status:l}){return(0,o.jsx)(an.Ao,{linesAdded:e,linesChanged:t,linesDeleted:n,newTreeEntry:i,oldTreeEntry:a,path:s,pathDigest:r,status:l})});try{aN.displayName||(aN.displayName="PullRequestDiffEntryErrorFallback")}catch{}var aC=n(81945),aS=n(29731),aI=n(8431);let ak=(0,v.memo)((0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u=(0,c.c)(15),{ariaLabel:p,testId:h,id:f,approximateLineCount:g,approximateDiffHeight:y}=e,{data:x}=(0,m.ID)(),v=x?.lineSpacing==="compact"?20:25,b=y??v*(void 0===g?5:g);return u[0]!==h?(t=(0,aS.G)(h),u[0]=h,u[1]=t):t=u[1],u[2]!==b?(n={minHeight:b},u[2]=b,u[3]=n):n=u[3],u[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,o.jsx)(aC.O,{height:"sm",variant:"rounded",width:"random"}),a=(0,o.jsx)(aC.O,{height:"sm",variant:"rounded",width:"random"}),s=(0,o.jsx)(aC.O,{height:"sm",variant:"rounded",width:"random"}),r=(0,o.jsx)(aC.O,{height:"sm",variant:"rounded",width:"random"}),u[4]=i,u[5]=a,u[6]=s,u[7]=r):(i=u[4],a=u[5],s=u[6],r=u[7]),u[8]!==n?(l=(0,o.jsx)("div",{className:"border borderColor-muted",children:(0,o.jsxs)("div",{className:"d-flex flex-column gap-2 p-3",style:n,children:[i,a,s,r]})}),u[8]=n,u[9]=l):l=u[9],u[10]!==p||u[11]!==f||u[12]!==t||u[13]!==l?(d=(0,o.jsx)("div",{className:aI.A.diffTargetable,role:"region","aria-label":p,...t,id:f,children:l}),u[10]=p,u[11]=f,u[12]=t,u[13]=l,u[14]=d):d=u[14],d}:function({ariaLabel:e,testId:t,id:n,approximateLineCount:i=5,approximateDiffHeight:a}){let{data:s}=(0,m.ID)(),r=s?.lineSpacing==="compact"?20:25;return(0,o.jsx)("div",{className:aI.A.diffTargetable,role:"region","aria-label":e,...(0,aS.G)(t),id:n,children:(0,o.jsx)("div",{className:"border borderColor-muted",children:(0,o.jsxs)("div",{className:"d-flex flex-column gap-2 p-3",style:{minHeight:a??r*i},children:[(0,o.jsx)(aC.O,{height:"sm",variant:"rounded",width:"random"}),(0,o.jsx)(aC.O,{height:"sm",variant:"rounded",width:"random"}),(0,o.jsx)(aC.O,{height:"sm",variant:"rounded",width:"random"}),(0,o.jsx)(aC.O,{height:"sm",variant:"rounded",width:"random"})]})})})});try{ak.displayName||(ak.displayName="DiffEntryLoadingSkeleton")}catch{}var aT=n(90047),aE=n(19976),aR=n(73189),aL=n(21132);let aA=(0,d.Z6)()?function(){let e,t=(0,c.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)("div",{className:"color-bg-default position-relative border rounded-2 color-border-default mt-2 d-flex flex-column",children:(0,o.jsx)(td.E,{border:!1,spacious:!0,children:(0,o.jsx)(td.E.Heading,{children:"No files matched your search"})})}),t[0]=e):e=t[0],e}:function(){return(0,o.jsx)("div",{className:"color-bg-default position-relative border rounded-2 color-border-default mt-2 d-flex flex-column",children:(0,o.jsx)(td.E,{border:!1,spacious:!0,children:(0,o.jsx)(td.E.Heading,{children:"No files matched your search"})})})};try{aA.displayName||(aA.displayName="FilesChangedFilterBlankSlate")}catch{}let aD=(0,v.memo)((0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d=(0,c.c)(69),{diffEntryPathDigest:u,currentUser:m,diffManuallyExpanded:p,filteredDiffSummaries:h,headBranchName:f,headRepoName:g,headRepoOwner:y,isSelectingLineOrRange:b,pullRequestGlobalRelayId:_,repository:j,onScrollToAndFocusEntry:w}=e,N=(0,I.m9)()||u,C=(0,I.mY)();if(d[0]!==N||d[1]!==C){let e;d[3]!==N?(e=e=>e.pathDigest===N,d[3]=N,d[4]=e):e=d[4],t=C.find(e),d[0]=N,d[1]=C,d[2]=t}else t=d[2];let S=t,k=(0,I.Fm)(S?.path||""),T=S?.path||"",E=(0,I.jT)(T),L=(0,I.j5)(),A=(0,v.useRef)(!1);d[5]!==w||d[6]!==S?.loadingStatus||d[7]!==N?(n=()=>{A.current||S?.loadingStatus===aL.s.Loaded&&(w(N,{focusPathName:!0}),A.current=!0)},d[5]=w,d[6]=S?.loadingStatus,d[7]=N,d[8]=n):n=d[8];let D=S?.loadingStatus;if(d[9]!==b||d[10]!==w||d[11]!==N||d[12]!==D?(i=[b,w,D,N],d[9]=b,d[10]=w,d[11]=N,d[12]=D,d[13]=i):i=d[13],(0,v.useEffect)(n,i),!h.some(e=>e.path===T)){let e;return d[14]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(aA,{}),d[14]=e):e=d[14],e}if(S&&S.loadingStatus!==aL.s.Loaded){let e,t,n,i,a=`Loading ${T}`,s=`eager-load-${T}`,r=`diff-${T}`;d[15]!==a||d[16]!==s||d[17]!==r?(e=(0,o.jsx)(ak,{ariaLabel:a,testId:s,approximateLineCount:5,id:r}),d[15]=a,d[16]=s,d[17]=r,d[18]=e):e=d[18];let l=e,c=`diff-${T}`;d[19]===Symbol.for("react.memo_cache_sentinel")?(t=(0,x.$)(aI.A.diffTargetable,aI.A.diff),d[19]=t):t=d[19];let u=`${N}_${T}`,m=`#diff-${N}`,p=k?.linesAdded??0,h=k?.linesChanged??0,f=k?.linesDeleted??0;return d[20]!==T||d[21]!==L||d[22]!==m||d[23]!==p||d[24]!==h||d[25]!==f?(n=(0,o.jsx)("div",{className:aI.A.diffHeaderWrapper,children:(0,o.jsx)(aT.B,{areLinesExpanded:!1,canExpandOrCollapseLines:!1,fileLinkHref:m,canToggleRichDiff:!1,linesAdded:p,linesChanged:h,linesDeleted:f,newPath:T,patchStatus:"",path:T,onToggleExpandAllLines:aR.l,onToggleFileCollapsed:aR.l,onToggleDiffDisplay:aR.l,isInSingleFileMode:L})}),d[20]=T,d[21]=L,d[22]=m,d[23]=p,d[24]=h,d[25]=f,d[26]=n):n=d[26],d[27]!==l||d[28]!==c||d[29]!==u||d[30]!==n?(i=(0,o.jsxs)("div",{role:"region",id:c,className:t,"data-targeted":!1,"data-hpc":!0,children:[n,l]},u),d[27]=l,d[28]=c,d[29]=u,d[30]=n,d[31]=i):i=d[31],i}if(!E){let e;return d[32]!==T||d[33]!==u?(e=(0,o.jsx)(aN,{linesAdded:0,linesChanged:0,linesDeleted:0,path:T,pathDigest:u,newTreeEntry:void 0,oldTreeEntry:void 0,status:"MODIFIED"}),d[32]=T,d[33]=u,d[34]=e):e=d[34],e}d[35]!==E?(a=(0,o.jsx)(aN,{...E}),d[35]=E,d[36]=a):a=d[36];let P=E.reviewed??!1;return d[37]!==E.diffLines||d[38]!==E.diffSize||d[39]!==E.helpUrl||d[40]!==E.isBinary||d[41]!==E.isTooBig||d[42]!==E.linesAdded||d[43]!==E.linesChanged||d[44]!==E.linesDeleted||d[45]!==E.newCommitOid||d[46]!==E.newTreeEntry||d[47]!==E.objectId||d[48]!==E.oldCommitOid||d[49]!==E.oldTreeEntry||d[50]!==E.path||d[51]!==E.pathDigest||d[52]!==E.richDiff||d[53]!==E.status||d[54]!==E.submodule||d[55]!==E.truncatedReason||d[56]!==m||d[57]!==p||d[58]!==f||d[59]!==g||d[60]!==y||d[61]!==_||d[62]!==j||d[63]!==P?(s=(0,o.jsx)(aw,{changeType:E.status,currentUser:m,diffLines:E.diffLines,diffManuallyExpanded:p,diffSize:E.diffSize,headBranchName:f,headRepoName:g,headRepoOwner:y,helpUrl:E.helpUrl,isBinary:E.isBinary,isSelected:!1,isTooBig:E.isTooBig,linesAdded:E.linesAdded,linesChanged:E.linesChanged,linesDeleted:E.linesDeleted,newCommitOid:E.newCommitOid,newTreeEntry:E.newTreeEntry,objectId:E.objectId,oldCommitOid:E.oldCommitOid,oldTreeEntry:E.oldTreeEntry,path:E.path,pathDigest:E.pathDigest,pullRequestGlobalRelayId:_,repository:j,reviewed:P,richDiff:E.richDiff,status:E.status,submodule:E.submodule,truncatedReason:E.truncatedReason}),d[37]=E.diffLines,d[38]=E.diffSize,d[39]=E.helpUrl,d[40]=E.isBinary,d[41]=E.isTooBig,d[42]=E.linesAdded,d[43]=E.linesChanged,d[44]=E.linesDeleted,d[45]=E.newCommitOid,d[46]=E.newTreeEntry,d[47]=E.objectId,d[48]=E.oldCommitOid,d[49]=E.oldTreeEntry,d[50]=E.path,d[51]=E.pathDigest,d[52]=E.richDiff,d[53]=E.status,d[54]=E.submodule,d[55]=E.truncatedReason,d[56]=m,d[57]=p,d[58]=f,d[59]=g,d[60]=y,d[61]=_,d[62]=j,d[63]=P,d[64]=s):s=d[64],d[65]===Symbol.for("react.memo_cache_sentinel")?(r=(0,o.jsx)(aE.nq,{}),d[65]=r):r=d[65],d[66]!==a||d[67]!==s?(l=(0,o.jsxs)(R.t,{fallback:a,children:[s,r]}),d[66]=a,d[67]=s,d[68]=l):l=d[68],l}:function({diffEntryPathDigest:e,currentUser:t,diffManuallyExpanded:n,filteredDiffSummaries:i,headBranchName:a,headRepoName:s,headRepoOwner:r,isSelectingLineOrRange:l,pullRequestGlobalRelayId:d,repository:c,onScrollToAndFocusEntry:u}){let m=(0,I.m9)()||e,p=(0,I.mY)().find(e=>e.pathDigest===m),h=(0,I.Fm)(p?.path||""),f=p?.path||"",g=(0,I.jT)(f),y=(0,I.j5)(),b=(0,v.useRef)(!1);if((0,v.useEffect)(()=>{b.current||p?.loadingStatus===aL.s.Loaded&&(u(m,{focusPathName:!0}),b.current=!0)},[l,u,p?.loadingStatus,m]),!i.some(e=>e.path===f))return(0,o.jsx)(aA,{});if(p&&p.loadingStatus!==aL.s.Loaded){let e=(0,o.jsx)(ak,{ariaLabel:`Loading ${f}`,testId:`eager-load-${f}`,approximateLineCount:5,id:`diff-${f}`});return(0,o.jsxs)("div",{role:"region",id:`diff-${f}`,className:(0,x.$)(aI.A.diffTargetable,aI.A.diff),"data-targeted":!1,"data-hpc":!0,children:[(0,o.jsx)("div",{className:aI.A.diffHeaderWrapper,children:(0,o.jsx)(aT.B,{areLinesExpanded:!1,canExpandOrCollapseLines:!1,fileLinkHref:`#diff-${m}`,canToggleRichDiff:!1,linesAdded:h?.linesAdded??0,linesChanged:h?.linesChanged??0,linesDeleted:h?.linesDeleted??0,newPath:f,patchStatus:"",path:f,onToggleExpandAllLines:aR.l,onToggleFileCollapsed:aR.l,onToggleDiffDisplay:aR.l,isInSingleFileMode:y})}),e]},`${m}_${f}`)}return g?(0,o.jsxs)(R.t,{fallback:(0,o.jsx)(aN,{...g}),children:[(0,o.jsx)(aw,{changeType:g.status,currentUser:t,diffLines:g.diffLines,diffManuallyExpanded:n,diffSize:g.diffSize,headBranchName:a,headRepoName:s,headRepoOwner:r,helpUrl:g.helpUrl,isBinary:g.isBinary,isSelected:!1,isTooBig:g.isTooBig,linesAdded:g.linesAdded,linesChanged:g.linesChanged,linesDeleted:g.linesDeleted,newCommitOid:g.newCommitOid,newTreeEntry:g.newTreeEntry,objectId:g.objectId,oldCommitOid:g.oldCommitOid,oldTreeEntry:g.oldTreeEntry,path:g.path,pathDigest:g.pathDigest,pullRequestGlobalRelayId:d,repository:c,reviewed:g.reviewed??!1,richDiff:g.richDiff,status:g.status,submodule:g.submodule,truncatedReason:g.truncatedReason}),(0,o.jsx)(aE.nq,{})]}):(0,o.jsx)(aN,{linesAdded:0,linesChanged:0,linesDeleted:0,path:f,pathDigest:e,newTreeEntry:void 0,oldTreeEntry:void 0,status:"MODIFIED"})});try{aD.displayName||(aD.displayName="SingleFileModePullRequestDiffEntry")}catch{}let aP=(0,d.Z6)()?function(){let e,t=(0,c.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)("div",{className:"color-bg-default position-relative border rounded-2 color-border-default mt-2 d-flex flex-column",children:(0,o.jsxs)(td.E,{border:!1,spacious:!0,children:[(0,o.jsx)(td.E.Heading,{children:"No changes to show"}),(0,o.jsx)(td.E.Description,{children:"This commit does not include any file changes"})]})}),t[0]=e):e=t[0],e}:function(){return(0,o.jsx)("div",{className:"color-bg-default position-relative border rounded-2 color-border-default mt-2 d-flex flex-column",children:(0,o.jsxs)(td.E,{border:!1,spacious:!0,children:[(0,o.jsx)(td.E.Heading,{children:"No changes to show"}),(0,o.jsx)(td.E.Description,{children:"This commit does not include any file changes"})]})})};try{aP.displayName||(aP.displayName="EmptyPullRequestBlankSlate")}catch{}let aO=(0,d.Z6)()?function(){let e,t,n,i,a,s,r=(0,c.c)(14),l=(0,v.useRef)(!0),{selectedFullDiffHash:o}=(0,n5.U)();r[0]!==o?(e=(0,n6.jU)(o)??void 0,r[0]=o,r[1]=e):e=r[1];let d=e;r[2]!==o?(t=(0,n6.yI)(o),r[2]=o,r[3]=t):t=r[3];let u=t;r[4]===Symbol.for("react.memo_cache_sentinel")?(n=new Map,r[4]=n):n=r[4];let m=(0,v.useRef)(n);r[5]===Symbol.for("react.memo_cache_sentinel")?(i=()=>m.current,r[5]=i):i=r[5];let p=i;r[6]!==u||r[7]!==o?(a=(e,t)=>{let{focusPathName:n}=void 0===t?{}:t,i=p().get(e);if(!i)return;let a=i,s=i.querySelector("button");if(n&&(s=i.querySelector("a")),u){let e=o.split("-")[0],t=i.querySelector(`[data-line-anchor=diff-${e}]`);t&&(s=a=t)}else l.current||(a=null);if(a){let e=ey.cg?.scrollY??0,t=a.getBoundingClientRect().top+e-57-60;ey.cg?.scrollTo({top:t,left:0})}s&&s.focus(),l.current=!1},r[6]=u,r[7]=o,r[8]=a):a=r[8];let h=a;return r[9]!==u||r[10]!==h||r[11]!==o||r[12]!==d?(s={onScrollToAndFocusEntry:h,selectedFullDiffHash:o,selectedPathDigest:d,isSelectingLineOrRange:u,getTargetableEntriesMap:p},r[9]=u,r[10]=h,r[11]=o,r[12]=d,r[13]=s):s=r[13],s}:function(){let e=(0,v.useRef)(!0),{selectedFullDiffHash:t}=(0,n5.U)(),n=(0,n6.jU)(t)??void 0,i=(0,n6.yI)(t),a=(0,v.useRef)(new Map),s=(0,v.useCallback)(()=>a.current,[]);return{onScrollToAndFocusEntry:(0,v.useCallback)((n,{focusPathName:a}={})=>{let r=s().get(n);if(!r)return;let l=r,o=r.querySelector("button");if(a&&(o=r.querySelector("a")),i){let e=t.split("-")[0],n=r.querySelector(`[data-line-anchor=diff-${e}]`);n&&(o=l=n)}else e.current||(l=null);if(l){let e=ey.cg?.scrollY??0,t=l.getBoundingClientRect().top+e-57-60;ey.cg?.scrollTo({top:t,left:0})}o&&o.focus(),e.current=!1},[s,i,t]),selectedFullDiffHash:t,selectedPathDigest:n,isSelectingLineOrRange:i,getTargetableEntriesMap:s}},aF=(0,v.memo)(function({currentUser:e,filteredDiffSummaries:t,headBranchName:n,headRepoName:i,headRepoOwner:a,pullRequestGlobalRelayId:s,repository:r}){let l=(0,I.HZ)(),d=(0,v.useMemo)(()=>Object.values(l??{}).filter(e=>null!==e),[l])[0],c=(0,I.m9)(),{onScrollToAndFocusEntry:u,getTargetableEntriesMap:m,isSelectingLineOrRange:p}=aO(),h=(0,I.qg)(),f=(0,I.uh)()[0],g=(0,I.zK)(),y=(0,I.mF)(),{navigateToSelectedComment:x,navigateToSelectedAnnotation:b,handleHashUpdate:_}=(0,I.Lh)(),{setSelectedHash:j}=(0,n5.U)(),w=(0,v.useRef)(!0),N=(0,I.mY)().find(e=>e.pathDigest===c),{loadMore:S}=(0,I.pV)(),k=(0,v.useCallback)(()=>{g?x(g):y&&!isNaN(Number(y))?b(Number(y)):c&&N?S(N):!c&&f?.pathDigest&&(j(f.pathDigest),(0,C.Zu)(`diff-${f.pathDigest}`))},[f?.pathDigest,S,b,x,y,g,c,N,j]);if((0,v.useEffect)(()=>{w.current&&(k(),w.current=!1)},[]),(0,v.useEffect)(()=>{let e=()=>{_()};return _(),window.addEventListener("hashchange",e),()=>{window.removeEventListener("hashchange",e)}},[_]),0===h)return(0,o.jsx)(aP,{});if(0===t.length)return(0,o.jsx)(aA,{});let T=c||d?.pathDigest||f?.pathDigest;return T?(0,o.jsx)("div",{ref:e=>{let t=m();e?t.set(T,e):t.delete(T)},children:(0,o.jsx)(aD,{diffEntryPathDigest:T,currentUser:e,diffManuallyExpanded:!1,filteredDiffSummaries:t,headBranchName:n,headRepoName:i,headRepoOwner:a,pullRequestGlobalRelayId:s,repository:r,onScrollToAndFocusEntry:u,isSelectingLineOrRange:p})}):null});try{aF.displayName||(aF.displayName="SingleFileModeDiffEntryNavigator")}catch{}let aB=(0,d.Z6)()?function(e){let t,n,i,a=(0,c.c)(4),{lines:s}=e;return a[0]===Symbol.for("react.memo_cache_sentinel")?(t={padding:"var(--base-size-6) var(--base-size-8)",borderColor:"var(--borderColor-muted)"},a[0]=t):t=a[0],a[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,o.jsx)("div",{className:"border-bottom bgColor-muted rounded-top-2",style:t,children:(0,o.jsx)("div",{className:"d-flex flex-items-center",style:{height:"var(--control-small-size)"},children:(0,o.jsx)(aC.O,{height:"sm",variant:"rounded",width:"random"})})}),a[1]=n):n=a[1],a[2]!==s?(i=(0,o.jsxs)("div",{className:"border borderColor-muted rounded",children:[n,(0,o.jsx)("div",{className:"d-flex flex-column gap-2 p-3",children:Array.from({length:s||5}).map(aM)})]}),a[2]=s,a[3]=i):i=a[3],i}:function({lines:e}){return(0,o.jsxs)("div",{className:"border borderColor-muted rounded",children:[(0,o.jsx)("div",{className:"border-bottom bgColor-muted rounded-top-2",style:{padding:"var(--base-size-6) var(--base-size-8)",borderColor:"var(--borderColor-muted)"},children:(0,o.jsx)("div",{className:"d-flex flex-items-center",style:{height:"var(--control-small-size)"},children:(0,o.jsx)(aC.O,{height:"sm",variant:"rounded",width:"random"})})}),(0,o.jsx)("div",{className:"d-flex flex-column gap-2 p-3",children:Array.from({length:e||5}).map((e,t)=>(0,o.jsx)(aC.O,{height:"sm",variant:"rounded",width:"random"},`loading-skeleton-${t}`))})]})};function aM(e,t){return(0,o.jsx)(aC.O,{height:"sm",variant:"rounded",width:"random"},`loading-skeleton-${t}`)}try{aB.displayName||(aB.displayName="EntireDiffLoadingSkeleton")}catch{}let aV=(0,v.memo)((0,d.Z6)()?function(e){let t,n,i,a,s=(0,c.c)(15),{progressiveDiffEntry:r,approximateLineCount:l}=e,d=void 0===l?5:l,{loadMore:u}=(0,I.pV)(),m=(0,no.u)("pulls-files-skip-prefer-any-solo-entry"),[p,h]=(0,v.useState)(!1);s[0]!==p||s[1]!==u||s[2]!==r||s[3]!==m?(t=e=>{e[0]?.isIntersecting&&!p&&(h(!0),u(r,{preferAnySoloEntry:!m}))},s[0]=p,s[1]=u,s[2]=r,s[3]=m,s[4]=t):t=s[4],s[5]===Symbol.for("react.memo_cache_sentinel")?(n={rootMargin:"-72px"},s[5]=n):n=s[5];let[f,g]=(0,n$.B)(t,n),y=`Loading ${r.path}`,x=`lazy-load-${r.path}`,b=`diff-${r.pathDigest}`;return s[6]!==d||s[7]!==y||s[8]!==x||s[9]!==b?(i=(0,o.jsx)(ak,{ariaLabel:y,testId:x,id:b,approximateLineCount:d}),s[6]=d,s[7]=y,s[8]=x,s[9]=b,s[10]=i):i=s[10],s[11]!==f||s[12]!==i||s[13]!==g?(a=(0,o.jsx)(nU.X,{onObserve:f,onUnobserve:g,children:i}),s[11]=f,s[12]=i,s[13]=g,s[14]=a):a=s[14],a}:function({progressiveDiffEntry:e,approximateLineCount:t=5}){let{loadMore:n}=(0,I.pV)(),i=(0,no.u)("pulls-files-skip-prefer-any-solo-entry"),[a,s]=(0,v.useState)(!1),[r,l]=(0,n$.B)(t=>{t[0]?.isIntersecting&&!a&&(s(!0),n(e,{preferAnySoloEntry:!i}))},{rootMargin:"-72px"});return(0,o.jsx)(nU.X,{onObserve:r,onUnobserve:l,children:(0,o.jsx)(ak,{ariaLabel:`Loading ${e.path}`,testId:`lazy-load-${e.path}`,id:`diff-${e.pathDigest}`,approximateLineCount:t})})});try{aV.displayName||(aV.displayName="LazyDiffEntryLoadingSkeleton")}catch{}let a$=(0,v.memo)((0,d.Z6)()?function(e){let t,n,i,a=(0,c.c)(10),{progressiveDiffEntry:s,approximateLineCount:r}=e,l=void 0===r?5:r,{loadMore:d}=(0,I.pV)(),u=(0,no.u)("pulls-files-skip-prefer-any-solo-entry");a[0]!==d||a[1]!==s||a[2]!==u?(t=()=>{d(s,{preferAnySoloEntry:!u})},n=[d,s,u],a[0]=d,a[1]=s,a[2]=u,a[3]=t,a[4]=n):(t=a[3],n=a[4]),(0,v.useEffect)(t,n);let m=`Loading ${s.path}`,p=`eager-load-${s.path}`,h=`diff-${s.pathDigest}`;return a[5]!==l||a[6]!==m||a[7]!==p||a[8]!==h?(i=(0,o.jsx)(ak,{ariaLabel:m,testId:p,id:h,approximateLineCount:l}),a[5]=l,a[6]=m,a[7]=p,a[8]=h,a[9]=i):i=a[9],i}:function({progressiveDiffEntry:e,approximateLineCount:t=5}){let{loadMore:n}=(0,I.pV)(),i=(0,no.u)("pulls-files-skip-prefer-any-solo-entry");return(0,v.useEffect)(()=>{n(e,{preferAnySoloEntry:!i})},[n,e,i]),(0,o.jsx)(ak,{ariaLabel:`Loading ${e.path}`,testId:`eager-load-${e.path}`,id:`diff-${e.pathDigest}`,approximateLineCount:t})});try{a$.displayName||(a$.displayName="EagerDiffEntryLoadingSkeleton")}catch{}let aU=(0,v.memo)((0,d.Z6)()?function(e){let t,n=(0,c.c)(5),{progressiveDiffEntry:i,approximateLineCount:a}=e,s=void 0===a?5:a,r=`Loading ${i.path}`,l=`hidden-load-${i.path}`,d=`diff-${i.pathDigest}`;return n[0]!==s||n[1]!==r||n[2]!==l||n[3]!==d?(t=(0,o.jsx)(ak,{ariaLabel:r,testId:l,id:d,approximateLineCount:s}),n[0]=s,n[1]=r,n[2]=l,n[3]=d,n[4]=t):t=n[4],t}:function({progressiveDiffEntry:e,approximateLineCount:t=5}){return(0,o.jsx)(ak,{ariaLabel:`Loading ${e.path}`,testId:`hidden-load-${e.path}`,id:`diff-${e.pathDigest}`,approximateLineCount:t})});try{aU.displayName||(aU.displayName="HiddenDiffEntryLoadingSkeleton")}catch{}let aq=(0,v.memo)(aH,(e,t)=>e.progressiveDiffEntry.pathDigest===t.progressiveDiffEntry.pathDigest&&e.progressiveDiffEntry.renderMode===t.progressiveDiffEntry.renderMode&&e.isSelected===t.isSelected&&e.currentUser.splitPreference===t.currentUser.splitPreference&&e.currentUser.commentsPreference===t.currentUser.commentsPreference&&e.currentUser.lineSpacing===t.currentUser.lineSpacing),aW=(0,d.Z6)();function aH(e){return aW?function(e){let t,n,i,a,s,r=(0,c.c)(69),{currentUser:l,diffManuallyExpanded:d,headBranchName:u,headRepoName:m,headRepoOwner:p,isSelected:h,isSelectingLineOrRange:f,onScrollToAndFocusEntry:g,progressiveDiffEntry:y,pullRequestGlobalRelayId:b,repository:_,testRenderFn:j}=e,w=void 0!==f&&f,N=(0,I.jT)(y.path),C=(0,I.Fm)(y.path),S=(0,I.j5)();j&&j();let k=(0,v.useRef)(!1);if(r[0]!==h||r[1]!==w||r[2]!==g||r[3]!==y.pathDigest||r[4]!==y.renderMode?(t=()=>{if(!k.current){if(!k.current&&void 0===h){let e=ey.fV.hash??"",t=(0,n6.pd)(e)??"";(t=t.replace("diff-","").replace("#",""))!==y.pathDigest&&(k.current=!0)}if(h&&"HIDE"!==y.renderMode&&(!w||"RENDER"===y.renderMode)){let e=ey.cg?.document.activeElement;if(e?.closest("#diff-file-tree-filter"))return;k.current=!0,g(y.pathDigest)}}},n=[h,w,g,y.pathDigest,y.renderMode],r[0]=h,r[1]=w,r[2]=g,r[3]=y.pathDigest,r[4]=y.renderMode,r[5]=t,r[6]=n):(t=r[5],n=r[6]),(0,v.useEffect)(t,n),"HIDE"===y.renderMode||"LAZY_AUTO_LOAD"===y.renderMode||"EAGER_AUTO_LOAD"===y.renderMode){let e,t,n,i;r[7]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(o.Fragment,{}),r[7]=e):e=r[7];let a=e,s=C?.linesChanged??5;if((C?.changeType==="REMOVED"||C?.changeType==="DELETED")&&(s=5),"HIDE"===y.renderMode){let e;r[8]!==s||r[9]!==y?(e=(0,o.jsx)(aU,{progressiveDiffEntry:y,approximateLineCount:s}),r[8]=s,r[9]=y,r[10]=e):e=r[10],a=e}else if("LAZY_AUTO_LOAD"===y.renderMode){let e;r[11]!==s||r[12]!==y?(e=(0,o.jsx)(aV,{progressiveDiffEntry:y,approximateLineCount:s}),r[11]=s,r[12]=y,r[13]=e):e=r[13],a=e}else if("EAGER_AUTO_LOAD"===y.renderMode){let e;r[14]!==s||r[15]!==y?(e=(0,o.jsx)(a$,{progressiveDiffEntry:y,approximateLineCount:s}),r[14]=s,r[15]=y,r[16]=e):e=r[16],a=e}let l=`diff-${y.pathDigest}`;r[17]===Symbol.for("react.memo_cache_sentinel")?(t=(0,x.$)(aI.A.diffTargetable,aI.A.diff),r[17]=t):t=r[17];let d=h??!1,c=`${y.pathDigest}_${y.path}`,u=`#diff-${y.pathDigest}`,m=C?.linesAdded??0,p=C?.linesChanged??0,f=C?.linesDeleted??0;return r[18]!==S||r[19]!==y.path||r[20]!==m||r[21]!==p||r[22]!==f||r[23]!==u?(n=(0,o.jsx)("div",{className:aI.A.diffHeaderWrapper,children:(0,o.jsx)(aT.B,{areLinesExpanded:!1,canExpandOrCollapseLines:!1,fileLinkHref:u,canToggleRichDiff:!1,linesAdded:m,linesChanged:p,linesDeleted:f,newPath:y.path,patchStatus:"",path:y.path,onToggleExpandAllLines:aR.l,onToggleFileCollapsed:aR.l,onToggleDiffDisplay:aR.l,isInSingleFileMode:S})}),r[18]=S,r[19]=y.path,r[20]=m,r[21]=p,r[22]=f,r[23]=u,r[24]=n):n=r[24],r[25]!==a||r[26]!==n||r[27]!==l||r[28]!==d||r[29]!==c?(i=(0,o.jsxs)("div",{role:"region",id:l,className:t,"data-targeted":d,children:[n,a]},c),r[25]=a,r[26]=n,r[27]=l,r[28]=d,r[29]=c,r[30]=i):i=r[30],i}if(!N){let e;return r[31]!==y.path||r[32]!==y.pathDigest?(e=(0,o.jsx)(aN,{linesAdded:0,linesChanged:0,linesDeleted:0,path:y.path,pathDigest:y.pathDigest,newTreeEntry:void 0,oldTreeEntry:void 0,status:"MODIFIED"}),r[31]=y.path,r[32]=y.pathDigest,r[33]=e):e=r[33],e}r[34]!==N?(i=(0,o.jsx)(aN,{...N}),r[34]=N,r[35]=i):i=r[35];let T=h??!1,E=N.reviewed??!1;return r[36]!==l||r[37]!==N.diffLines||r[38]!==N.diffSize||r[39]!==N.helpUrl||r[40]!==N.isBinary||r[41]!==N.isSubmodule||r[42]!==N.isTooBig||r[43]!==N.linesAdded||r[44]!==N.linesChanged||r[45]!==N.linesDeleted||r[46]!==N.newCommitOid||r[47]!==N.newTreeEntry||r[48]!==N.objectId||r[49]!==N.oldCommitOid||r[50]!==N.oldTreeEntry||r[51]!==N.path||r[52]!==N.pathDigest||r[53]!==N.richDiff||r[54]!==N.status||r[55]!==N.submodule||r[56]!==N.truncatedReason||r[57]!==d||r[58]!==u||r[59]!==m||r[60]!==p||r[61]!==b||r[62]!==_||r[63]!==T||r[64]!==E?(a=(0,o.jsx)(aw,{changeType:N.status,currentUser:l,diffLines:N.diffLines,diffManuallyExpanded:d,diffSize:N.diffSize,headBranchName:u,headRepoName:m,headRepoOwner:p,helpUrl:N.helpUrl,isBinary:N.isBinary,isSelected:T,isSubmodule:N.isSubmodule,isTooBig:N.isTooBig,linesAdded:N.linesAdded,linesChanged:N.linesChanged,linesDeleted:N.linesDeleted,newCommitOid:N.newCommitOid,newTreeEntry:N.newTreeEntry,objectId:N.objectId,oldCommitOid:N.oldCommitOid,oldTreeEntry:N.oldTreeEntry,path:N.path,pathDigest:N.pathDigest,pullRequestGlobalRelayId:b,repository:_,reviewed:E,richDiff:N.richDiff,status:N.status,submodule:N.submodule,truncatedReason:N.truncatedReason}),r[36]=l,r[37]=N.diffLines,r[38]=N.diffSize,r[39]=N.helpUrl,r[40]=N.isBinary,r[41]=N.isSubmodule,r[42]=N.isTooBig,r[43]=N.linesAdded,r[44]=N.linesChanged,r[45]=N.linesDeleted,r[46]=N.newCommitOid,r[47]=N.newTreeEntry,r[48]=N.objectId,r[49]=N.oldCommitOid,r[50]=N.oldTreeEntry,r[51]=N.path,r[52]=N.pathDigest,r[53]=N.richDiff,r[54]=N.status,r[55]=N.submodule,r[56]=N.truncatedReason,r[57]=d,r[58]=u,r[59]=m,r[60]=p,r[61]=b,r[62]=_,r[63]=T,r[64]=E,r[65]=a):a=r[65],r[66]!==i||r[67]!==a?(s=(0,o.jsx)(R.t,{fallback:i,children:a}),r[66]=i,r[67]=a,r[68]=s):s=r[68],s}(e):function({currentUser:e,diffManuallyExpanded:t,headBranchName:n,headRepoName:i,headRepoOwner:a,isSelected:s,isSelectingLineOrRange:r=!1,onScrollToAndFocusEntry:l,progressiveDiffEntry:d,pullRequestGlobalRelayId:c,repository:u,testRenderFn:m}){let p=(0,I.jT)(d.path),h=(0,I.Fm)(d.path),f=(0,I.j5)();m&&m();let g=(0,v.useRef)(!1);if((0,v.useEffect)(()=>{if(!g.current){if(!g.current&&void 0===s){let e=ey.fV.hash??"",t=(0,n6.pd)(e)??"";(t=t.replace("diff-","").replace("#",""))!==d.pathDigest&&(g.current=!0)}if(s&&"HIDE"!==d.renderMode&&(!r||"RENDER"===d.renderMode)){let e=ey.cg?.document.activeElement;if(e?.closest("#diff-file-tree-filter"))return;g.current=!0,l(d.pathDigest)}}},[s,r,l,d.pathDigest,d.renderMode]),"HIDE"===d.renderMode||"LAZY_AUTO_LOAD"===d.renderMode||"EAGER_AUTO_LOAD"===d.renderMode){let e=(0,o.jsx)(o.Fragment,{}),t=h?.linesChanged??5;return(h?.changeType==="REMOVED"||h?.changeType==="DELETED")&&(t=5),"HIDE"===d.renderMode?e=(0,o.jsx)(aU,{progressiveDiffEntry:d,approximateLineCount:t}):"LAZY_AUTO_LOAD"===d.renderMode?e=(0,o.jsx)(aV,{progressiveDiffEntry:d,approximateLineCount:t}):"EAGER_AUTO_LOAD"===d.renderMode&&(e=(0,o.jsx)(a$,{progressiveDiffEntry:d,approximateLineCount:t})),(0,o.jsxs)("div",{role:"region",id:`diff-${d.pathDigest}`,className:(0,x.$)(aI.A.diffTargetable,aI.A.diff),"data-targeted":s??!1,children:[(0,o.jsx)("div",{className:aI.A.diffHeaderWrapper,children:(0,o.jsx)(aT.B,{areLinesExpanded:!1,canExpandOrCollapseLines:!1,fileLinkHref:`#diff-${d.pathDigest}`,canToggleRichDiff:!1,linesAdded:h?.linesAdded??0,linesChanged:h?.linesChanged??0,linesDeleted:h?.linesDeleted??0,newPath:d.path,patchStatus:"",path:d.path,onToggleExpandAllLines:aR.l,onToggleFileCollapsed:aR.l,onToggleDiffDisplay:aR.l,isInSingleFileMode:f})}),e]},`${d.pathDigest}_${d.path}`)}return p?(0,o.jsx)(R.t,{fallback:(0,o.jsx)(aN,{...p}),children:(0,o.jsx)(aw,{changeType:p.status,currentUser:e,diffLines:p.diffLines,diffManuallyExpanded:t,diffSize:p.diffSize,headBranchName:n,headRepoName:i,headRepoOwner:a,helpUrl:p.helpUrl,isBinary:p.isBinary,isSelected:s??!1,isSubmodule:p.isSubmodule,isTooBig:p.isTooBig,linesAdded:p.linesAdded,linesChanged:p.linesChanged,linesDeleted:p.linesDeleted,newCommitOid:p.newCommitOid,newTreeEntry:p.newTreeEntry,objectId:p.objectId,oldCommitOid:p.oldCommitOid,oldTreeEntry:p.oldTreeEntry,path:p.path,pathDigest:p.pathDigest,pullRequestGlobalRelayId:c,repository:u,reviewed:p.reviewed??!1,richDiff:p.richDiff,status:p.status,submodule:p.submodule,truncatedReason:p.truncatedReason})}):(0,o.jsx)(aN,{linesAdded:0,linesChanged:0,linesDeleted:0,path:d.path,pathDigest:d.pathDigest,newTreeEntry:void 0,oldTreeEntry:void 0,status:"MODIFIED"})}(e)}try{aq.displayName||(aq.displayName="ProgressivePullRequestDiffEntry")}catch{}try{aH.displayName||(aH.displayName="ProgressivePullRequestDiffEntryUnmemoized")}catch{}let aG="PullRequestDiffsAnimation-module__wrapper--j5QjR",az="PullRequestDiffsAnimation-module__imageContainer--ISOgX",aK="PullRequestDiffsAnimation-module__image--MMHno",aQ="PullRequestDiffsAnimation-module__firstFrameImage--DV3ZK",aZ="PullRequestDiffsAnimation-module__animatedImage--yjDlC",aJ="PullRequestDiffsAnimation-module__reducedMotionImage--cBS3Y";var aY=n(69895);let aX=n.p+"mona-hifive-first-frame-0d428028d4d7.png",a0=n.p+"mona-hifive-reduced-motion-3a22d8eb870c.png",a1=n.p+"mona-hifive-loop-once-8c78f1af57d0.gif",a2=(0,d.Z6)()?()=>{let e,t,n,i,a,s,r,l,d=(0,c.c)(12),u=(0,aY.j)(),m=(0,v.useRef)(null),p=(0,v.useRef)(null);d[0]!==u?(e=e=>{e?(e=>{let t;if(u)return;let n=new IntersectionObserver((e,n)=>{for(let i of e)i.isIntersecting&&(t=setTimeout(()=>{i.target.style.display="none",m.current&&(m.current.style.opacity="1"),n.unobserve(i.target)},1e3))},{threshold:1});return p.current=n,n.observe(e),()=>{n.disconnect(),t&&clearTimeout(t)}})(e):p.current&&(p.current.disconnect(),p.current=null)},d[0]=u,d[1]=e):e=d[1];let h=e;return d[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.jsx)("img",{src:a1,alt:"GIF of two octocats high fiving each other",className:(0,x.$)(aK,aZ),ref:m}),d[2]=t):t=d[2],d[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,x.$)(aK,aQ),d[3]=n):n=d[3],d[4]!==h?(i=(0,o.jsx)("img",{src:aX,alt:"Two octocats",className:n,ref:h}),d[4]=h,d[5]=i):i=d[5],d[6]===Symbol.for("react.memo_cache_sentinel")?(a=(0,o.jsx)("img",{src:a0,alt:"Two octocats high fiving each other",className:(0,x.$)(aK,aJ)}),d[6]=a):a=d[6],d[7]!==i?(s=(0,o.jsxs)("div",{className:az,children:[t,i,a]}),d[7]=i,d[8]=s):s=d[8],d[9]===Symbol.for("react.memo_cache_sentinel")?(r=(0,o.jsx)("span",{className:"fgColor-muted",children:"You made it to the end!"}),d[9]=r):r=d[9],d[10]!==s?(l=(0,o.jsxs)("div",{className:aG,children:[s,r]}),d[10]=s,d[11]=l):l=d[11],l}:()=>{let e=(0,aY.j)(),t=(0,v.useRef)(null),n=(0,v.useRef)(null);return(0,o.jsxs)("div",{className:aG,children:[(0,o.jsxs)("div",{className:az,children:[(0,o.jsx)("img",{src:a1,alt:"GIF of two octocats high fiving each other",className:(0,x.$)(aK,aZ),ref:t}),(0,o.jsx)("img",{src:aX,alt:"Two octocats",className:(0,x.$)(aK,aQ),ref:i=>{i?(i=>{let a;if(e)return;let s=new IntersectionObserver((e,n)=>{for(let i of e)i.isIntersecting&&(a=setTimeout(()=>{i.target.style.display="none",t.current&&(t.current.style.opacity="1"),n.unobserve(i.target)},1e3))},{threshold:1});return n.current=s,s.observe(i),()=>{s.disconnect(),a&&clearTimeout(a)}})(i):n.current&&(n.current.disconnect(),n.current=null)}}),(0,o.jsx)("img",{src:a0,alt:"Two octocats high fiving each other",className:(0,x.$)(aK,aJ)})]}),(0,o.jsx)("span",{className:"fgColor-muted",children:"You made it to the end!"})]})},a3=(0,v.memo)(a2);try{a2.displayName||(a2.displayName="PullRequestDiffsAnimationComponent")}catch{}try{a3.displayName||(a3.displayName="PullRequestDiffsAnimation")}catch{}let a4=(0,v.memo)(a6),a5=(0,d.Z6)();function a6(e){return a5?function(e){let t,n,i,a,s,r,l,d=(0,c.c)(41),{currentUser:u,filteredDiffSummaries:m,headBranchName:p,headRepoName:h,headRepoOwner:f,onSetFilterState:g,pullRequestGlobalRelayId:y,repository:x,showPullRequestGroups:b}=e,[_]=(0,v.useState)(!1),j=(0,v.useRef)(null),w=(0,I.$W)(m),N=(0,I.JA)(),{startQueue:C}=(0,I.pV)();d[0]!==C?(t=()=>{C()},n=[C],d[0]=C,d[1]=t,d[2]=n):(t=d[1],n=d[2]),(0,v.useEffect)(t,n);let{onScrollToAndFocusEntry:S,getTargetableEntriesMap:k,selectedPathDigest:T,isSelectingLineOrRange:E}=aO(),R=(0,I.qg)(),L=w.length>=15;if(0===R){let e;return d[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(aP,{}),d[3]=e):e=d[3],e}if(0===m.length){let e;return d[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(aA,{}),d[4]=e):e=d[4],e}if(d[5]!==N||d[6]!==g||d[7]!==b?(i=b&&N?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"f4 text-bold mb-0",children:[(0,o.jsx)("span",{className:"fgColor-accent",children:(0,o.jsx)(D.A,{href:"",onClick:e=>{e.preventDefault(),g({activeChangeGroupId:void 0})},children:"All files"})})," ",(0,o.jsx)("span",{className:"fgColor-muted text-normal",children:"/"})," ",N.name]}),N.description?.trim()?(0,o.jsx)("p",{children:N.description}):null]}):null,d[5]=N,d[6]=g,d[7]=b,d[8]=i):i=d[8],d[9]!==u||d[10]!==w||d[11]!==_||d[12]!==k||d[13]!==p||d[14]!==h||d[15]!==f||d[16]!==E||d[17]!==S||d[18]!==y||d[19]!==x||d[20]!==T){let e;d[22]!==u||d[23]!==_||d[24]!==k||d[25]!==p||d[26]!==h||d[27]!==f||d[28]!==E||d[29]!==S||d[30]!==y||d[31]!==x||d[32]!==T?(e=e=>(0,o.jsx)("div",{ref:t=>{let n=k();t?n.set(e.pathDigest,t):n.delete(e.pathDigest)},children:(0,o.jsx)(aq,{currentUser:u,diffManuallyExpanded:_,headBranchName:p,headRepoName:h,headRepoOwner:f,pullRequestGlobalRelayId:y,isSelected:void 0===T?void 0:e.pathDigest===T,isSelectingLineOrRange:E,onScrollToAndFocusEntry:S,progressiveDiffEntry:e,repository:x})},e.pathDigest),d[22]=u,d[23]=_,d[24]=k,d[25]=p,d[26]=h,d[27]=f,d[28]=E,d[29]=S,d[30]=y,d[31]=x,d[32]=T,d[33]=e):e=d[33],a=w.map(e),d[9]=u,d[10]=w,d[11]=_,d[12]=k,d[13]=p,d[14]=h,d[15]=f,d[16]=E,d[17]=S,d[18]=y,d[19]=x,d[20]=T,d[21]=a}else a=d[21];return d[34]!==L?(s=L&&(0,o.jsx)(a3,{}),d[34]=L,d[35]=s):s=d[35],d[36]===Symbol.for("react.memo_cache_sentinel")?(r=(0,o.jsx)(aE.nq,{}),d[36]=r):r=d[36],d[37]!==i||d[38]!==a||d[39]!==s?(l=(0,o.jsxs)("div",{ref:j,"data-hpc":!0,className:"d-flex flex-column gap-3",children:[i,a,s,r]}),d[37]=i,d[38]=a,d[39]=s,d[40]=l):l=d[40],l}(e):function({currentUser:e,filteredDiffSummaries:t,headBranchName:n,headRepoName:i,headRepoOwner:a,onSetFilterState:s,pullRequestGlobalRelayId:r,repository:l,showPullRequestGroups:d}){let[c,u]=(0,v.useState)(!1),m=(0,v.useRef)(null),p=(0,I.$W)(t),h=(0,I.JA)(),{startQueue:f}=(0,I.pV)();(0,v.useEffect)(()=>{f()},[f]);let{onScrollToAndFocusEntry:g,getTargetableEntriesMap:y,selectedPathDigest:x,isSelectingLineOrRange:b}=aO(),_=(0,I.qg)(),j=p.length;return 0===_?(0,o.jsx)(aP,{}):0===t.length?(0,o.jsx)(aA,{}):(0,o.jsxs)("div",{ref:m,"data-hpc":!0,className:"d-flex flex-column gap-3",children:[d&&h?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"f4 text-bold mb-0",children:[(0,o.jsx)("span",{className:"fgColor-accent",children:(0,o.jsx)(D.A,{href:"",onClick:e=>{e.preventDefault(),s({activeChangeGroupId:void 0})},children:"All files"})})," ",(0,o.jsx)("span",{className:"fgColor-muted text-normal",children:"/"})," ",h.name]}),h.description?.trim()?(0,o.jsx)("p",{children:h.description}):null]}):null,p.map(t=>(0,o.jsx)("div",{ref:e=>{let n=y();e?n.set(t.pathDigest,e):n.delete(t.pathDigest)},children:(0,o.jsx)(aq,{currentUser:e,diffManuallyExpanded:c,headBranchName:n,headRepoName:i,headRepoOwner:a,pullRequestGlobalRelayId:r,isSelected:void 0===x?void 0:t.pathDigest===x,isSelectingLineOrRange:b,onScrollToAndFocusEntry:g,progressiveDiffEntry:t,repository:l})},t.pathDigest)),j>=15&&(0,o.jsx)(a3,{}),(0,o.jsx)(aE.nq,{})]})}(e)}try{a4.displayName||(a4.displayName="PullRequestDiffsList")}catch{}try{a6.displayName||(a6.displayName="PullRequestDiffsListUnmemoized")}catch{}var a7=n(51220);let a9="PullRequestVirtualizedDiffRow-module__virtualizedDiffRow--mhuB6",a8=(0,v.memo)((0,d.Z6)()?function(e){let t,n,i,a=(0,c.c)(53),{virtualRow:s,virtualizedDiffEntry:r,diffEntry:l,diffSummary:d,scrollMargin:u,measureElement:m,currentUser:p,headBranchName:h,headRepoName:f,headRepoOwner:g,pullRequestGlobalRelayId:y,repository:x,selectedPathDigest:v}=e,b=(0,I.y)();if(!r)return null;let _=`translateY(${s.start-u}px)`;a[0]!==_?(t={transform:_},a[0]=_,a[1]=t):t=a[1];let j=t;if("NotLoaded"===r.loadingStatus){let e,t,n,i=r.path??"";if(a[2]!==p.commentsPreference||a[3]!==p.lineSpacing||a[4]!==d||a[5]!==b||a[6]!==i){let t=b(i);e=aj({diffSummary:d,commentPreference:p.commentsPreference,lineSpacingPreference:p.lineSpacing,isCollapsed:t}),a[2]=p.commentsPreference,a[3]=p.lineSpacing,a[4]=d,a[5]=b,a[6]=i,a[7]=e}else e=a[7];let l=e,c=`Loading ${r.path}`,u=`lazy-load-${r.path}`,h=`diff-${r.pathDigest}`;return a[8]!==l||a[9]!==c||a[10]!==u||a[11]!==h?(t=(0,o.jsx)(ak,{ariaLabel:c,testId:u,id:h,approximateDiffHeight:l}),a[8]=l,a[9]=c,a[10]=u,a[11]=h,a[12]=t):t=a[12],a[13]!==m||a[14]!==t||a[15]!==s.index||a[16]!==j?(n=(0,o.jsx)("div",{style:j,className:a9,ref:m,"data-index":s.index,children:t}),a[13]=m,a[14]=t,a[15]=s.index,a[16]=j,a[17]=n):n=a[17],n}if(!l)return null;let w=-(s.start-u),N=void 0===v?void 0:l.pathDigest===v,C=l.reviewed??!1;return a[18]!==p||a[19]!==l.diffLines||a[20]!==l.diffSize||a[21]!==l.helpUrl||a[22]!==l.isBinary||a[23]!==l.isSubmodule||a[24]!==l.isTooBig||a[25]!==l.linesAdded||a[26]!==l.linesChanged||a[27]!==l.linesDeleted||a[28]!==l.newCommitOid||a[29]!==l.newTreeEntry||a[30]!==l.objectId||a[31]!==l.oldCommitOid||a[32]!==l.oldTreeEntry||a[33]!==l.path||a[34]!==l.pathDigest||a[35]!==l.richDiff||a[36]!==l.status||a[37]!==l.submodule||a[38]!==l.truncatedReason||a[39]!==h||a[40]!==f||a[41]!==g||a[42]!==y||a[43]!==x||a[44]!==w||a[45]!==N||a[46]!==C?(n=(0,o.jsx)(aw,{changeType:l.status,currentUser:p,diffLines:l.diffLines,diffManuallyExpanded:!1,diffSize:l.diffSize,headerStickyOffset:w,headBranchName:h,headRepoName:f,headRepoOwner:g,helpUrl:l.helpUrl,isBinary:l.isBinary,isSelected:N,isSubmodule:l.isSubmodule,isTooBig:l.isTooBig,linesAdded:l.linesAdded,linesChanged:l.linesChanged,linesDeleted:l.linesDeleted,newCommitOid:l.newCommitOid,newTreeEntry:l.newTreeEntry,objectId:l.objectId,oldCommitOid:l.oldCommitOid,oldTreeEntry:l.oldTreeEntry,path:l.path,pathDigest:l.pathDigest,pullRequestGlobalRelayId:y,repository:x,reviewed:C,richDiff:l.richDiff,status:l.status,submodule:l.submodule,truncatedReason:l.truncatedReason}),a[18]=p,a[19]=l.diffLines,a[20]=l.diffSize,a[21]=l.helpUrl,a[22]=l.isBinary,a[23]=l.isSubmodule,a[24]=l.isTooBig,a[25]=l.linesAdded,a[26]=l.linesChanged,a[27]=l.linesDeleted,a[28]=l.newCommitOid,a[29]=l.newTreeEntry,a[30]=l.objectId,a[31]=l.oldCommitOid,a[32]=l.oldTreeEntry,a[33]=l.path,a[34]=l.pathDigest,a[35]=l.richDiff,a[36]=l.status,a[37]=l.submodule,a[38]=l.truncatedReason,a[39]=h,a[40]=f,a[41]=g,a[42]=y,a[43]=x,a[44]=w,a[45]=N,a[46]=C,a[47]=n):n=a[47],a[48]!==m||a[49]!==n||a[50]!==s.index||a[51]!==j?(i=(0,o.jsx)("div",{style:j,className:a9,ref:m,"data-index":s.index,children:n}),a[48]=m,a[49]=n,a[50]=s.index,a[51]=j,a[52]=i):i=a[52],i}:function({virtualRow:e,virtualizedDiffEntry:t,diffEntry:n,diffSummary:i,scrollMargin:a,measureElement:s,currentUser:r,headBranchName:l,headRepoName:d,headRepoOwner:c,pullRequestGlobalRelayId:u,repository:m,selectedPathDigest:p}){let h=(0,I.y)();if(!t)return null;let f={transform:`translateY(${e.start-a}px)`};if("NotLoaded"===t.loadingStatus){let n=h(t.path??""),a=aj({diffSummary:i,commentPreference:r.commentsPreference,lineSpacingPreference:r.lineSpacing,isCollapsed:n});return(0,o.jsx)("div",{style:f,className:a9,ref:s,"data-index":e.index,children:(0,o.jsx)(ak,{ariaLabel:`Loading ${t.path}`,testId:`lazy-load-${t.path}`,id:`diff-${t.pathDigest}`,approximateDiffHeight:a})})}return n?(0,o.jsx)("div",{style:f,className:a9,ref:s,"data-index":e.index,children:(0,o.jsx)(aw,{changeType:n.status,currentUser:r,diffLines:n.diffLines,diffManuallyExpanded:!1,diffSize:n.diffSize,headerStickyOffset:-(e.start-a),headBranchName:l,headRepoName:d,headRepoOwner:c,helpUrl:n.helpUrl,isBinary:n.isBinary,isSelected:void 0===p?void 0:n.pathDigest===p,isSubmodule:n.isSubmodule,isTooBig:n.isTooBig,linesAdded:n.linesAdded,linesChanged:n.linesChanged,linesDeleted:n.linesDeleted,newCommitOid:n.newCommitOid,newTreeEntry:n.newTreeEntry,objectId:n.objectId,oldCommitOid:n.oldCommitOid,oldTreeEntry:n.oldTreeEntry,path:n.path,pathDigest:n.pathDigest,pullRequestGlobalRelayId:u,repository:m,reviewed:n.reviewed??!1,richDiff:n.richDiff,status:n.status,submodule:n.submodule,truncatedReason:n.truncatedReason})}):null});try{a8.displayName||(a8.displayName="MemoizedVirtualizedDiffRow")}catch{}function se({basePath:e,currentUser:t,filteredDiffSummaries:n,headBranchName:i,headRepoName:a,headRepoOwner:s,onSetFilterState:r,pullRequestGlobalRelayId:l,repository:d,showPullRequestGroups:c}){let u=(0,v.useRef)(null),[m,h]=(0,v.useState)(0),f=(0,I.$W)(n),g=(0,I.JA)(),{startQueue:y,loadMore:x}=(0,I.pV)(),{selectedPathDigest:b}=aO(),_=(0,I.qg)(),j=(0,I.l0)(),w=(0,I.HZ)(),N=f.length,C=(0,I.y)();(0,v.useEffect)(()=>{y()},[y]);let S=(0,v.useCallback)(e=>{let n=f[e];if(!n)return 0;let i=j[n.path??""],a=C(n.path??"");return aj({diffSummary:i,commentPreference:t?.commentsPreference??p.sI.Visible,lineSpacingPreference:t?.lineSpacing??p.Ud.Relaxed,isCollapsed:a})},[f,j,C,t?.commentsPreference,t?.lineSpacing]),k=(0,v.useCallback)(e=>f[e]?.pathDigest??e,[f]);(0,v.useEffect)(()=>{u.current&&h(u.current.offsetTop)},[]);let T=(0,a7.XW)({count:f.length,estimateSize:S,getItemKey:k,overscan:5,scrollMargin:m,gap:16}),E=T.getVirtualItems(),R=(0,v.useMemo)(()=>{for(let e of E){let t=f[e.index];if(t?.loadingStatus==="NotLoaded")return e.index}return -1},[E,f]);return((0,v.useEffect)(()=>{if(-1===R)return;let e=f[R];e&&x(e)},[R,f,x]),0===_)?(0,o.jsx)(aP,{}):0===f.length?(0,o.jsx)(aA,{}):(0,o.jsxs)("div",{ref:u,"data-hpc":!0,className:"d-flex flex-column gap-3",children:[c&&g?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"f4 text-bold mb-0",children:[(0,o.jsx)("span",{className:"fgColor-accent",children:(0,o.jsx)(D.A,{href:"",onClick:e=>{e.preventDefault(),r({activeChangeGroupId:void 0})},children:"All files"})})," ",(0,o.jsx)("span",{className:"fgColor-muted text-normal",children:"/"})," ",g.name]}),g.description?.trim()?(0,o.jsx)("p",{children:g.description}):null]}):null,(0,o.jsx)("div",{className:"PullRequestVirtualizedDiffsList-module__virtualized-diff-row--khMB_",style:{height:`${T.getTotalSize()}px`},children:E.map(n=>{let r=f[n.index];return(0,o.jsx)(a8,{virtualRow:n,virtualizedDiffEntry:r,diffEntry:w[r?.path??""],diffSummary:j[r?.path??""],scrollMargin:T.options.scrollMargin,measureElement:T.measureElement,basePath:e,currentUser:t,headBranchName:i,headRepoName:a,headRepoOwner:s,pullRequestGlobalRelayId:l,repository:d,selectedPathDigest:b},n.key)})}),N>=15&&(0,o.jsx)(a3,{}),(0,o.jsx)(aE.nq,{})]})}try{se.displayName||(se.displayName="PullRequestVirtualizedDiffsList")}catch{}var st=n(48926),sn=n(43147),si=n(13071),sa=n(3536),ss=n(66108);let sr=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,p,h,f,g,y,x,v,b,_,j,w,N,C,S=(0,c.c)(73),{commit:I,pullRequest:k,commits:T,repository:E}=e;S[0]!==T?(t=void 0===T?[]:T,S[0]=T,S[1]=t):t=S[1];let R=t,{helpUrl:L}=(0,ag.X)();e:{let e,t,i;if(0===R.length){let e;S[2]===Symbol.for("react.memo_cache_sentinel")?(e={prevCommitUrl:null,nextCommitUrl:null,canNavigate:!1},S[2]=e):e=S[2],n=e;break e}let a=I.oid,s=R.findIndex(e=>e.oid===a);if(-1===s){let e;S[3]===Symbol.for("react.memo_cache_sentinel")?(e={prevCommitUrl:null,nextCommitUrl:null,canNavigate:!1},S[3]=e):e=S[3],n=e;break e}let r=s>0?R[s-1]:null,l=s<R.length-1?R[s+1]:null,o=k?.number||0;if(S[4]!==l||S[5]!==r||S[6]!==E.name||S[7]!==E.ownerLogin||S[8]!==o){let n={owner:E.ownerLogin,repo:E.name,number:o};e=r?(0,eD.zLJ)({...n,head:r.oid}):null,t=l?(0,eD.zLJ)({...n,head:l.oid}):null,S[4]=l,S[5]=r,S[6]=E.name,S[7]=E.ownerLogin,S[8]=o,S[9]=e,S[10]=t}else e=S[9],t=S[10];let d=t;S[11]!==d||S[12]!==e?(i={prevCommitUrl:e,nextCommitUrl:d,canNavigate:!0},S[11]=d,S[12]=e,S[13]=i):i=S[13],n=i}let{prevCommitUrl:A,nextCommitUrl:P,canNavigate:O}=n,F=I.oid;S[14]!==F||S[15]!==E.name||S[16]!==E.ownerLogin?(i=(0,eD.$Qz)({owner:E.ownerLogin,repo:E.name,commitish:F}),S[14]=F,S[15]=E.name,S[16]=E.ownerLogin,S[17]=i):i=S[17];let B=(0,sa.I)(`${i}/deferred_commit_data`);return S[18]!==I.shortMessageMarkdown?(a=(0,o.jsx)(tt.JR,{html:I.shortMessageMarkdown,className:"ws-pre-wrap f5 wb-break-word"}),S[18]=I.shortMessageMarkdown,S[19]=a):a=S[19],S[20]!==I.bodyMessageHtml?(s=I.bodyMessageHtml&&(0,o.jsx)(tt.JR,{html:I.bodyMessageHtml,className:"ws-pre-wrap f6 wb-break-word text-mono mt-2"}),S[20]=I.bodyMessageHtml,S[21]=s):s=S[21],S[22]!==a||S[23]!==s?(r=(0,o.jsxs)("div",{className:"flex-1",children:[a,s]}),S[22]=a,S[23]=s,S[24]=r):r=S[24],S[25]!==O||S[26]!==P||S[27]!==A?(l=O&&(0,o.jsx)("div",{className:"d-flex",children:(0,o.jsxs)(n4.A,{children:[(0,o.jsx)(Q.Q,{as:ss.N,"aria-label":A?"Previous commit":"No previous commit",to:A??"",inactive:!A,size:"small",leadingVisual:q.ChevronLeftIcon,children:"Prev"}),(0,o.jsx)(Q.Q,{as:ss.N,"aria-label":P?"Next commit":"No next commit",to:P??"",inactive:!P,size:"small",trailingVisual:q.ChevronRightIcon,children:"Next"})]})}),S[25]=O,S[26]=P,S[27]=A,S[28]=l):l=S[28],S[29]!==F||S[30]!==E?(d=(0,eD.IO9)({repo:E,action:"tree",commitish:F}),S[29]=F,S[30]=E,S[31]=d):d=S[31],S[32]!==d?(u=(0,o.jsx)(Q.Q,{as:D.A,href:d,leadingVisual:q.FileCodeIcon,size:"small",children:"Browse files"}),S[32]=d,S[33]=u):u=S[33],S[34]!==u||S[35]!==l?(m=(0,o.jsxs)("div",{className:"d-flex flex-items-center flex-self-start gap-2 ml-2",children:[l,u]}),S[34]=u,S[35]=l,S[36]=m):m=S[36],S[37]!==m||S[38]!==r?(p=(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-between border-bottom p-3 bgColor-inset flex-items-center",children:[r,m]}),S[37]=m,S[38]=r,S[39]=p):p=S[39],S[40]===Symbol.for("react.memo_cache_sentinel")?(h={fontColor:"fg.default"},S[40]=h):h=S[40],S[41]!==I.oid||S[42]!==B||S[43]!==L||S[44]!==E?(f=(0,o.jsx)(si.C,{deferredData:B,oid:I.oid,repo:E,helpUrl:L}),S[41]=I.oid,S[42]=B,S[43]=L,S[44]=E,S[45]=f):f=S[45],S[46]!==I||S[47]!==E||S[48]!==f?(g=(0,o.jsx)(st.j,{commit:I,repo:E,settings:h,textVariant:"muted",children:f}),S[46]=I,S[47]=E,S[48]=f,S[49]=g):g=S[49],S[50]===Symbol.for("react.memo_cache_sentinel")?(y=(0,o.jsx)("span",{className:"color-fg-muted",children:"commit"}),S[50]=y):y=S[50],S[51]!==F||S[52]!==E.name||S[53]!==E.ownerLogin?(x=(0,eD.$Qz)({owner:E.ownerLogin,repo:E.name,commitish:F}),S[51]=F,S[52]=E.name,S[53]=E.ownerLogin,S[54]=x):x=S[54],S[55]!==F?(v=(0,nP.F)(F),S[55]=F,S[56]=v):v=S[56],S[57]!==v?(b=(0,o.jsx)("code",{children:v}),S[57]=v,S[58]=b):b=S[58],S[59]!==x||S[60]!==b?(_=(0,o.jsx)(D.A,{href:x,className:"Link--primary",children:b}),S[59]=x,S[60]=b,S[61]=_):_=S[61],S[62]!==F?(j=(0,o.jsx)(sn.w,{sha:F,direction:"sw"}),S[62]=F,S[63]=j):j=S[63],S[64]!==_||S[65]!==j?(w=(0,o.jsxs)("div",{className:"d-flex flex-items-center gap-2 text-mono",children:[y,_,j]}),S[64]=_,S[65]=j,S[66]=w):w=S[66],S[67]!==g||S[68]!==w?(N=(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-between px-3 py-2 f5",children:[g,w]}),S[67]=g,S[68]=w,S[69]=N):N=S[69],S[70]!==p||S[71]!==N?(C=(0,o.jsxs)("div",{className:"d-flex flex-column border rounded-2 overflow-hidden mb-3",children:[p,N]}),S[70]=p,S[71]=N,S[72]=C):C=S[72],C}:function({commit:e,pullRequest:t,commits:n=[],repository:i}){let{helpUrl:a}=(0,ag.X)(),{prevCommitUrl:s,nextCommitUrl:r,canNavigate:l}=(0,v.useMemo)(()=>{if(0===n.length)return{prevCommitUrl:null,nextCommitUrl:null,canNavigate:!1};let a=e.oid,s=n.findIndex(e=>e.oid===a);if(-1===s)return{prevCommitUrl:null,nextCommitUrl:null,canNavigate:!1};let r=s>0?n[s-1]:null,l=s<n.length-1?n[s+1]:null,o={owner:i.ownerLogin,repo:i.name,number:t?.number||0};return{prevCommitUrl:r?(0,eD.zLJ)({...o,head:r.oid}):null,nextCommitUrl:l?(0,eD.zLJ)({...o,head:l.oid}):null,canNavigate:!0}},[n,e,t,i]),d=e.oid,c=(0,sa.I)(`${(0,eD.$Qz)({owner:i.ownerLogin,repo:i.name,commitish:d})}/deferred_commit_data`);return(0,o.jsxs)("div",{className:"d-flex flex-column border rounded-2 overflow-hidden mb-3",children:[(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-between border-bottom p-3 bgColor-inset flex-items-center",children:[(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsx)(tt.JR,{html:e.shortMessageMarkdown,className:"ws-pre-wrap f5 wb-break-word"}),e.bodyMessageHtml&&(0,o.jsx)(tt.JR,{html:e.bodyMessageHtml,className:"ws-pre-wrap f6 wb-break-word text-mono mt-2"})]}),(0,o.jsxs)("div",{className:"d-flex flex-items-center flex-self-start gap-2 ml-2",children:[l&&(0,o.jsx)("div",{className:"d-flex",children:(0,o.jsxs)(n4.A,{children:[(0,o.jsx)(Q.Q,{as:ss.N,"aria-label":s?"Previous commit":"No previous commit",to:s??"",inactive:!s,size:"small",leadingVisual:q.ChevronLeftIcon,children:"Prev"}),(0,o.jsx)(Q.Q,{as:ss.N,"aria-label":r?"Next commit":"No next commit",to:r??"",inactive:!r,size:"small",trailingVisual:q.ChevronRightIcon,children:"Next"})]})}),(0,o.jsx)(Q.Q,{as:D.A,href:(0,eD.IO9)({repo:i,action:"tree",commitish:d}),leadingVisual:q.FileCodeIcon,size:"small",children:"Browse files"})]})]}),(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-between px-3 py-2 f5",children:[(0,o.jsx)(st.j,{commit:e,repo:i,settings:{fontColor:"fg.default"},textVariant:"muted",children:(0,o.jsx)(si.C,{deferredData:c,oid:e.oid,repo:i,helpUrl:a})}),(0,o.jsxs)("div",{className:"d-flex flex-items-center gap-2 text-mono",children:[(0,o.jsx)("span",{className:"color-fg-muted",children:"commit"}),(0,o.jsx)(D.A,{href:(0,eD.$Qz)({owner:i.ownerLogin,repo:i.name,commitish:d}),className:"Link--primary",children:(0,o.jsx)("code",{children:(0,nP.F)(d)})}),(0,o.jsx)(sn.w,{sha:d,direction:"sw"})]})]})]})};try{sr.displayName||(sr.displayName="PullRequestCommitHeader")}catch{}let sl=(0,d.Z6)()?function(e){let t,n,i,a=(0,c.c)(20),{basePath:s,baseSha:r,forceUnifiedView:l,headSha:d,initialData:u,treeCollapsedByDefault:m,treeEnableInlineCompactMode:p,userCanComment:h,useChangeGroups:f,useInlineComments:g,useEditOptions:y,useFileTree:x,useAdvancedToolbar:v,useBasicToolbar:b}=e,_=f??!1,j=g??!1,w=y??!1,N=x??!1,C=v??!1,S=b??!1,I=h??!0,k=l??!1,T=m??!1,E=p??!1;a[0]!==_||a[1]!==E||a[2]!==j||a[3]!==w||a[4]!==N||a[5]!==C||a[6]!==S||a[7]!==I||a[8]!==k||a[9]!==T?(t={useChangeGroups:_,useInlineComments:j,useEditOptions:w,useFileTree:N,useAdvancedToolbar:C,useBasicToolbar:S,userCanComment:I,forceUnifiedView:k,treeCollapsedByDefault:T,treeEnableInlineCompactMode:E},a[0]=_,a[1]=E,a[2]=j,a[3]=w,a[4]=N,a[5]=C,a[6]=S,a[7]=I,a[8]=k,a[9]=T,a[10]=t):t=a[10];let R=t,L=u?u.pullRequest.comparison.headOid:d,A=u?u.pullRequest.comparison.baseOid:r;if(!L)throw Error("DiffComparisonViewer: headSha is required if initialData is not provided");let D=!u;a[11]!==s||a[12]!==A||a[13]!==L||a[14]!==D?(n={basePath:s,headSha:L,baseSha:A,shouldFetch:D},a[11]=s,a[12]=A,a[13]=L,a[14]=D,a[15]=n):n=a[15];let{data:P,isLoading:O}=iY(n),F=u??P;return a[16]!==R||a[17]!==F||a[18]!==O?(i=(0,o.jsx)(o.Fragment,{children:F&&!O?(0,o.jsx)(iZ.Kg,{basePageDataUrl:F.pullRequest.pathName,children:(0,o.jsx)(iK.v,{initData:F,children:(0,o.jsx)(so,{...F,configOpts:R})})}):(0,o.jsxs)("div",{className:"width-full",children:[(0,o.jsx)("div",{className:iG,children:(0,o.jsx)("div",{className:iz,children:(0,o.jsx)(aC.O,{width:"lg",height:"lg",variant:"rounded"})})}),(0,o.jsxs)("div",{className:"d-flex flex-column gap-3 p-3",children:[(0,o.jsx)(aB,{lines:4}),(0,o.jsx)(aB,{lines:8}),(0,o.jsx)(aB,{lines:5})]})]})}),a[16]=R,a[17]=F,a[18]=O,a[19]=i):i=a[19],i}:function({basePath:e,baseSha:t,forceUnifiedView:n,headSha:i,initialData:a,treeCollapsedByDefault:s,treeEnableInlineCompactMode:r,userCanComment:l,useChangeGroups:d,useInlineComments:c,useEditOptions:u,useFileTree:m,useAdvancedToolbar:p,useBasicToolbar:h}){let f=(0,v.useMemo)(()=>({useChangeGroups:d??!1,useInlineComments:c??!1,useEditOptions:u??!1,useFileTree:m??!1,useAdvancedToolbar:p??!1,useBasicToolbar:h??!1,userCanComment:l??!0,forceUnifiedView:n??!1,treeCollapsedByDefault:s??!1,treeEnableInlineCompactMode:r??!1}),[d,c,u,m,p,h,l,n,s,r]),g=a?a.pullRequest.comparison.headOid:i,y=a?a.pullRequest.comparison.baseOid:t;if(!g)throw Error("DiffComparisonViewer: headSha is required if initialData is not provided");let{data:x,isLoading:b}=iY({basePath:e,headSha:g,baseSha:y,shouldFetch:!a}),_=a??x;return(0,o.jsx)(o.Fragment,{children:_&&!b?(0,o.jsx)(iZ.Kg,{basePageDataUrl:_.pullRequest.pathName,children:(0,o.jsx)(iK.v,{initData:_,children:(0,o.jsx)(so,{..._,configOpts:f})})}):(0,o.jsxs)("div",{className:"width-full",children:[(0,o.jsx)("div",{className:iG,children:(0,o.jsx)("div",{className:iz,children:(0,o.jsx)(aC.O,{width:"lg",height:"lg",variant:"rounded"})})}),(0,o.jsxs)("div",{className:"d-flex flex-column gap-3 p-3",children:[(0,o.jsx)(aB,{lines:4}),(0,o.jsx)(aB,{lines:8}),(0,o.jsx)(aB,{lines:5})]})]})})},so=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,b,_,j,w,N,C,T,E,R,L,A,D,P,O,F,B,M,V=(0,c.c)(120),{codeowners:$,commit:U,commits:q,configOpts:W,diffSummaries:H,fileFilter:G,pullRequest:z,repository:K,markers:Q,pageLimits:Z,urls:J,user:Y,isSingleFileMode:X}=e;iE(Q,H),(0,f.L)(!0);let ee=su(Y),et=(0,no.u)("pull_request_files_virtualization");V[0]===Symbol.for("react.memo_cache_sentinel")?(t={onSuccess:sc,onError:sd},V[0]=t):t=V[0];let{mutate:en}=(0,u.U)(t),{data:ei}=(0,m.ID)(ee);V[1]!==ei?.commentsPreference||V[2]!==en?(n=()=>{en({commentsPreference:ei?.commentsPreference===p.sI.Visible?p.sI.Collapsed:p.sI.Visible})},V[1]=ei?.commentsPreference,V[2]=en,V[3]=n):n=V[3],ei?.commentsPreference;let ea=n;ei?.commentsPreference,ei?.lineSpacing,ei?.splitPreference;let es=Y.currentUserAvatarUrl||"",er=Y.currentUserLogin||"",el=W.forceUnifiedView?"unified":ei?.splitPreference??"unified",eo=W.useInlineComments??!1,ed=W.useEditOptions??!1,ec=ei?.lineSpacing??"relaxed",eu=W.userCanComment&&Y.canComment,em=ei?.commentsPreference??"visible";V[4]!==em||V[5]!==es||V[6]!==er||V[7]!==el||V[8]!==eo||V[9]!==ed||V[10]!==ec||V[11]!==eu||V[12]!==Y.canApplySuggestion||V[13]!==Y.hasCopilotAccess||V[14]!==Y.tabSize?(i={avatarURL:es,login:er,tabSize:Y.tabSize,splitPreference:el,shouldDisplayComments:eo,shouldDisplayEditOptions:ed,lineSpacing:ec,canComment:eu,canApplySuggestion:Y.canApplySuggestion,commentsPreference:em,hasCopilotAccess:Y.hasCopilotAccess},V[4]=em,V[5]=es,V[6]=er,V[7]=el,V[8]=eo,V[9]=ed,V[10]=ec,V[11]=eu,V[12]=Y.canApplySuggestion,V[13]=Y.hasCopilotAccess,V[14]=Y.tabSize,V[15]=i):i=V[15];let ep=i,{updateCommentsPreference:eh}=(0,I.CQ)();V[16]!==ei?.commentsPreference||V[17]!==eh?(a=()=>{eh(ei?.commentsPreference??p.sI.Visible)},V[16]=ei?.commentsPreference,V[17]=eh,V[18]=a):a=V[18];let ef=ei?.commentsPreference;V[19]!==ef||V[20]!==eh?(s=[ef,eh],V[19]=ef,V[20]=eh,V[21]=s):s=V[21],(0,v.useEffect)(a,s);let{splitPagePaneHidden:eg,treeViewState:ey,treeToggleElement:ex,collapseMobileTree:ev,expandTree:eb}=i5(eI,Y.isFileTreeExpanded&&!W.treeCollapsedByDefault,W.treeEnableInlineCompactMode,ep);V[22]!==$||V[23]!==z.pathName?(r={basePath:z.pathName},$&&(r.initialData=$),V[22]=$,V[23]=z.pathName,V[24]=r):r=V[24];let{data:e_}=(0,S.dG)(r),{setCodeowners:ej}=(0,I.wh)();V[25]!==e_||V[26]!==ej?(l=()=>{ej(e_)},d=[e_,ej],V[25]=e_,V[26]=ej,V[27]=l,V[28]=d):(l=V[27],d=V[28]),(0,v.useEffect)(l,d);let ew=(0,I.qg)(),eC=(0,I.I8)(),{updateDiffFilter:eS}=(0,I.or)();V[29]!==G.initialState||V[30]!==eS?(b=()=>{eS({...G.initialState,unselectedFileExtensions:new Set(G.initialState.unselectedFileExtensions)})},_=[eS,G.initialState],V[29]=G.initialState,V[30]=eS,V[31]=b,V[32]=_):(b=V[31],_=V[32]),(0,v.useEffect)(b,_);let eT=(0,I.mU)();V[33]!==eS?(j=e=>{eS(e,!0)},V[33]=eS,V[34]=j):j=V[34];let eE=j;V[35]!==ev||V[36]!==ey.compactMode?(w=()=>{"none"!==ey.compactMode&&ev()},V[35]=ev,V[36]=ey.compactMode,V[37]=w):w=V[37];let eR=w,eL=(0,v.useRef)(null),eA="expanded"!==ey.wideMode?"small":"medium";V[38]!==ep.login||V[39]!==eC||V[40]!==G.menuOptions||V[41]!==eE||V[42]!==z.pathName||V[43]!==eA?(N=(0,o.jsx)(k,{ref:eL,basePath:z.pathName,fileFilterMenuOptions:G.menuOptions,fileFilterState:eC,setFileFilterState:eE,viewerLogin:ep.login,filterSize:eA}),V[38]=ep.login,V[39]=eC,V[40]=G.menuOptions,V[41]=eE,V[42]=z.pathName,V[43]=eA,V[44]=N):N=V[44];let eD=N,eO=(0,I.gt)(),eF=H.length>0,eB=W.useChangeGroups&&eO&&eF;V[45]!==eB?(C={changeGroupsEnabled:eB},V[45]=eB,V[46]=C):C=V[46],ae(C);let{aliveChannel:eM,bannersData:eV}=(0,iQ.o)();V[47]!==eb?(T=()=>{eb(),window.requestAnimationFrame(()=>{eL.current?.focus()})},V[47]=eb,V[48]=T):T=V[48];let e$=T;V[49]!==e$||V[50]!==ea?(E=(0,o.jsx)(h.ak,{commands:{"pull-request-files-changed:collapse-expand-comments":ea,"pull-request-files-changed:focus-file-tree-filter":e$}}),V[49]=e$,V[50]=ea,V[51]=E):E=V[51],V[52]!==eD||V[53]!==eM||V[54]!==eB||V[55]!==eV||V[56]!==ev||V[57]!==q||V[58]!==W.useAdvancedToolbar||V[59]!==W.useBasicToolbar||V[60]!==ew||V[61]!==eT||V[62]!==eR||V[63]!==eE||V[64]!==Z||V[65]!==z||V[66]!==K||V[67]!==ex||V[68]!==ey.compactMode||V[69]!==ey.wideMode||V[70]!==J||V[71]!==Y?(R=W.useAdvancedToolbar||W.useBasicToolbar?(0,o.jsxs)(o.Fragment,{children:[W.useAdvancedToolbar&&(0,o.jsx)(iI,{changeGroupsPreferenceAvailable:eB,commits:q,currentUserLogin:Y.currentUserLogin,fileFilter:eD,isFileTreeExpanded:"expanded"===ey.wideMode,lastReviewOid:Y.lastReviewOid,pageLimits:Z,pullRequest:z,repository:K,shouldShowViewedFilesCount:Y.shouldShowViewedFilesCount,totalFilesCount:ew,treeToggleElement:ex,bannersData:eV,urls:J,user:Y,aliveChannel:eM}),W.useBasicToolbar&&(0,o.jsx)(iX,{fileFilter:eD,isFileTreeExpanded:"expanded"===ey.wideMode,shouldShowViewedFilesCount:Y.shouldShowViewedFilesCount,totalFilesCount:ew,treeToggleElement:ex,userNotices:Y.userNotices}),"overlay"===ey.compactMode&&(0,o.jsx)(g.l,{onClose:()=>ev(),position:{narrow:"fullscreen",regular:"left",wide:"left"},title:"Files",className:"p-0",children:(0,o.jsx)(ek,{allowPullRequestGroups:eB,fileFilter:eD,filteredDiffs:eT,onFileSelected:eR,onSetFilterState:eE})})]}):null,V[52]=eD,V[53]=eM,V[54]=eB,V[55]=eV,V[56]=ev,V[57]=q,V[58]=W.useAdvancedToolbar,V[59]=W.useBasicToolbar,V[60]=ew,V[61]=eT,V[62]=eR,V[63]=eE,V[64]=Z,V[65]=z,V[66]=K,V[67]=ex,V[68]=ey.compactMode,V[69]=ey.wideMode,V[70]=J,V[71]=Y,V[72]=R):R=V[72],V[73]!==eD||V[74]!==eB||V[75]!==W.useBasicToolbar||V[76]!==W.useFileTree||V[77]!==eT||V[78]!==eR||V[79]!==eE||V[80]!==eg||V[81]!==ey.compactMode||V[82]!==ey.wideMode?(L=W.useFileTree?(0,o.jsx)(y.O7.Pane,{position:"start",sticky:!0,offsetHeader:W.useBasicToolbar?"50px":"60px","aria-label":"File tree",padding:"none",className:(0,x.$)(iM,eg&&iD,"expanded"===ey.wideMode&&iV,"collapsed"===ey.wideMode&&i$,"none"===ey.compactMode&&iU,"overlay"===ey.compactMode&&iq,"inline"===ey.compactMode&&iW,iO),divider:{regular:"inline"===ey.compactMode?"none":"line",narrow:"none"},widthStorageKey:"diff-tree-pane-width",resizable:"inline"!==ey.compactMode,children:(0,o.jsx)(ek,{allowPullRequestGroups:eB,className:(0,x.$)(eN,iP),fileFilter:eD,filteredDiffs:eT,onFileSelected:eR,onSetFilterState:eE})}):null,V[73]=eD,V[74]=eB,V[75]=W.useBasicToolbar,V[76]=W.useFileTree,V[77]=eT,V[78]=eR,V[79]=eE,V[80]=eg,V[81]=ey.compactMode,V[82]=ey.wideMode,V[83]=L):L=V[83];let eU="inline"===ey.compactMode;V[84]!==eU?(A={narrow:!1,regular:eU},V[84]=eU,V[85]=A):A=V[85];let eq="expanded"===ey.wideMode&&iV;return V[86]!==eq?(D=(0,x.$)(iH,eq),V[86]=eq,V[87]=D):D=V[87],V[88]!==U||V[89]!==q||V[90]!==z||V[91]!==K?(P=U&&(0,o.jsx)(sr,{commit:U,pullRequest:z,commits:q,repository:K}),V[88]=U,V[89]=q,V[90]=z,V[91]=K,V[92]=P):P=V[92],V[93]!==Z||V[94]!==K||V[95]!==J?(O=(0,o.jsx)(eP,{pageLimits:Z,repository:K,urls:J}),V[93]=Z,V[94]=K,V[95]=J,V[96]=O):O=V[96],V[97]!==ep||V[98]!==eT||V[99]!==eE||V[100]!==et||V[101]!==X||V[102]!==z.globalRelayId||V[103]!==z.headBranch||V[104]!==z.headRepositoryName||V[105]!==z.headRepositoryOwnerLogin||V[106]!==z.pathName||V[107]!==K?(F=et?(0,o.jsx)(se,{basePath:z.pathName,currentUser:ep,headBranchName:z.headBranch,headRepoName:z.headRepositoryName,headRepoOwner:z.headRepositoryOwnerLogin,onSetFilterState:eE,pullRequestGlobalRelayId:z.globalRelayId,filteredDiffSummaries:eT,repository:K,showPullRequestGroups:!0}):(0,o.jsx)(o.Fragment,{children:X?(0,o.jsx)(aF,{currentUser:ep,filteredDiffSummaries:eT,headBranchName:z.headBranch,headRepoName:z.headRepositoryName,headRepoOwner:z.headRepositoryOwnerLogin,pullRequestGlobalRelayId:z.globalRelayId,repository:K}):(0,o.jsx)(a4,{currentUser:ep,headBranchName:z.headBranch,headRepoName:z.headRepositoryName,headRepoOwner:z.headRepositoryOwnerLogin,onSetFilterState:eE,pullRequestGlobalRelayId:z.globalRelayId,filteredDiffSummaries:eT,repository:K,showPullRequestGroups:!0})}),V[97]=ep,V[98]=eT,V[99]=eE,V[100]=et,V[101]=X,V[102]=z.globalRelayId,V[103]=z.headBranch,V[104]=z.headRepositoryName,V[105]=z.headRepositoryOwnerLogin,V[106]=z.pathName,V[107]=K,V[108]=F):F=V[108],V[109]!==A||V[110]!==D||V[111]!==P||V[112]!==O||V[113]!==F?(B=(0,o.jsxs)(y.O7.Content,{as:"div",width:"full",hidden:A,padding:"none",className:D,children:[P,O,F]}),V[109]=A,V[110]=D,V[111]=P,V[112]=O,V[113]=F,V[114]=B):B=V[114],V[115]!==E||V[116]!==R||V[117]!==L||V[118]!==B?(M=(0,o.jsxs)(o.Fragment,{children:[E,R,L,B]}),V[115]=E,V[116]=R,V[117]=L,V[118]=B,V[119]=M):M=V[119],M}:function({codeowners:e,commit:t,commits:n,configOpts:i,diffSummaries:a,fileFilter:s,pullRequest:r,repository:l,markers:d,pageLimits:c,urls:b,user:_,isSingleFileMode:j}){iE(d,a),(0,f.L)(!0);let w=su(_),N=(0,no.u)("pull_request_files_virtualization"),{mutate:C}=(0,u.U)({onSuccess:()=>{},onError:()=>{}}),{data:T}=(0,m.ID)(w),E=(0,v.useCallback)(()=>{C({commentsPreference:T?.commentsPreference===p.sI.Visible?p.sI.Collapsed:p.sI.Visible})},[T?.commentsPreference,C]),R=(0,v.useMemo)(()=>({avatarURL:_.currentUserAvatarUrl||"",login:_.currentUserLogin||"",tabSize:_.tabSize,splitPreference:i.forceUnifiedView?"unified":T?.splitPreference??"unified",shouldDisplayComments:i.useInlineComments??!1,shouldDisplayEditOptions:i.useEditOptions??!1,lineSpacing:T?.lineSpacing??"relaxed",canComment:i.userCanComment&&_.canComment,canApplySuggestion:_.canApplySuggestion,commentsPreference:T?.commentsPreference??"visible",hasCopilotAccess:_.hasCopilotAccess}),[i.forceUnifiedView,i.useEditOptions,i.useInlineComments,i.userCanComment,T?.commentsPreference,T?.lineSpacing,T?.splitPreference,_.canApplySuggestion,_.canComment,_.currentUserAvatarUrl,_.currentUserLogin,_.hasCopilotAccess,_.tabSize]),{updateCommentsPreference:L}=(0,I.CQ)();(0,v.useEffect)(()=>{L(T?.commentsPreference??p.sI.Visible)},[T?.commentsPreference,L]);let{splitPagePaneHidden:A,treeViewState:D,treeToggleElement:P,collapseMobileTree:O,expandTree:F}=i5(eI,_.isFileTreeExpanded&&!i.treeCollapsedByDefault,i.treeEnableInlineCompactMode,R),B={basePath:r.pathName};e&&(B.initialData=e);let{data:M}=(0,S.dG)(B),{setCodeowners:V}=(0,I.wh)();(0,v.useEffect)(()=>{V(M)},[M,V]);let $=(0,I.qg)(),U=(0,I.I8)(),{updateDiffFilter:q}=(0,I.or)();(0,v.useEffect)(()=>{q({...s.initialState,unselectedFileExtensions:new Set(s.initialState.unselectedFileExtensions)})},[q,s.initialState]);let W=(0,I.mU)(),H=(0,v.useCallback)(e=>{q(e,!0)},[q]),G=(0,v.useCallback)(()=>{"none"!==D.compactMode&&O()},[O,D.compactMode]),z=(0,v.useRef)(null),K=(0,v.useMemo)(()=>(0,o.jsx)(k,{ref:z,basePath:r.pathName,fileFilterMenuOptions:s.menuOptions,fileFilterState:U,setFileFilterState:H,viewerLogin:R.login,filterSize:"expanded"!==D.wideMode?"small":"medium"}),[r.pathName,s.menuOptions,U,H,R.login,D.wideMode]),Q=(0,I.gt)(),Z=a.length>0,J=i.useChangeGroups&&Q&&Z;ae({changeGroupsEnabled:J});let{aliveChannel:Y,bannersData:X}=(0,iQ.o)(),ee=(0,v.useCallback)(()=>{F(),window.requestAnimationFrame(()=>{z.current?.focus()})},[F]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(h.ak,{commands:{"pull-request-files-changed:collapse-expand-comments":E,"pull-request-files-changed:focus-file-tree-filter":ee}}),i.useAdvancedToolbar||i.useBasicToolbar?(0,o.jsxs)(o.Fragment,{children:[i.useAdvancedToolbar&&(0,o.jsx)(iI,{changeGroupsPreferenceAvailable:J,commits:n,currentUserLogin:_.currentUserLogin,fileFilter:K,isFileTreeExpanded:"expanded"===D.wideMode,lastReviewOid:_.lastReviewOid,pageLimits:c,pullRequest:r,repository:l,shouldShowViewedFilesCount:_.shouldShowViewedFilesCount,totalFilesCount:$,treeToggleElement:P,bannersData:X,urls:b,user:_,aliveChannel:Y}),i.useBasicToolbar&&(0,o.jsx)(iX,{fileFilter:K,isFileTreeExpanded:"expanded"===D.wideMode,shouldShowViewedFilesCount:_.shouldShowViewedFilesCount,totalFilesCount:$,treeToggleElement:P,userNotices:_.userNotices}),"overlay"===D.compactMode&&(0,o.jsx)(g.l,{onClose:()=>O(),position:{narrow:"fullscreen",regular:"left",wide:"left"},title:"Files",className:"p-0",children:(0,o.jsx)(ek,{allowPullRequestGroups:J,fileFilter:K,filteredDiffs:W,onFileSelected:G,onSetFilterState:H})})]}):null,i.useFileTree?(0,o.jsx)(y.O7.Pane,{position:"start",sticky:!0,offsetHeader:i.useBasicToolbar?"50px":"60px","aria-label":"File tree",padding:"none",className:(0,x.$)(iM,A&&iD,"expanded"===D.wideMode&&iV,"collapsed"===D.wideMode&&i$,"none"===D.compactMode&&iU,"overlay"===D.compactMode&&iq,"inline"===D.compactMode&&iW,iO),divider:{regular:"inline"===D.compactMode?"none":"line",narrow:"none"},widthStorageKey:"diff-tree-pane-width",resizable:"inline"!==D.compactMode,children:(0,o.jsx)(ek,{allowPullRequestGroups:J,className:(0,x.$)(eN,iP),fileFilter:K,filteredDiffs:W,onFileSelected:G,onSetFilterState:H})}):null,(0,o.jsxs)(y.O7.Content,{as:"div",width:"full",hidden:{narrow:!1,regular:"inline"===D.compactMode},padding:"none",className:(0,x.$)(iH,"expanded"===D.wideMode&&iV),children:[t&&(0,o.jsx)(sr,{commit:t,pullRequest:r,commits:n,repository:l}),(0,o.jsx)(eP,{pageLimits:c,repository:l,urls:b}),N?(0,o.jsx)(se,{basePath:r.pathName,currentUser:R,headBranchName:r.headBranch,headRepoName:r.headRepositoryName,headRepoOwner:r.headRepositoryOwnerLogin,onSetFilterState:H,pullRequestGlobalRelayId:r.globalRelayId,filteredDiffSummaries:W,repository:l,showPullRequestGroups:!0}):(0,o.jsx)(o.Fragment,{children:j?(0,o.jsx)(aF,{currentUser:R,filteredDiffSummaries:W,headBranchName:r.headBranch,headRepoName:r.headRepositoryName,headRepoOwner:r.headRepositoryOwnerLogin,pullRequestGlobalRelayId:r.globalRelayId,repository:l}):(0,o.jsx)(a4,{currentUser:R,headBranchName:r.headBranch,headRepoName:r.headRepositoryName,headRepoOwner:r.headRepositoryOwnerLogin,onSetFilterState:H,pullRequestGlobalRelayId:r.globalRelayId,filteredDiffSummaries:W,repository:l,showPullRequestGroups:!0})})]})]})};function sd(){}function sc(){}let su=(0,d.Z6)()?function(e){let t,n=(0,c.c)(5),i=(0,m.C0)(e.viewSettings.splitPreference),a=(0,m.Qn)(e.viewSettings.hideWhitespace);return n[0]!==e.viewSettings.commentsPreference||n[1]!==e.viewSettings.lineSpacing||n[2]!==i||n[3]!==a?(t={hideWhitespace:a,splitPreference:i,lineSpacing:e.viewSettings.lineSpacing,commentsPreference:e.viewSettings.commentsPreference},n[0]=e.viewSettings.commentsPreference,n[1]=e.viewSettings.lineSpacing,n[2]=i,n[3]=a,n[4]=t):t=n[4],t}:function(e){let t=(0,m.C0)(e.viewSettings.splitPreference),n=(0,m.Qn)(e.viewSettings.hideWhitespace);return(0,v.useMemo)(()=>({hideWhitespace:n,splitPreference:t,lineSpacing:e.viewSettings.lineSpacing,commentsPreference:e.viewSettings.commentsPreference}),[e.viewSettings.commentsPreference,e.viewSettings.lineSpacing,t,n])},sm=(0,d.Z6)()?function(e){let t,n,i,a=(0,c.c)(7);return a[0]!==e.className?(t=(0,x.$)(iA,e.className),a[0]=e.className,a[1]=t):t=a[1],a[2]!==e.children?(n=(0,o.jsx)(y.O7,{children:e.children}),a[2]=e.children,a[3]=n):n=a[3],a[4]!==t||a[5]!==n?(i=(0,o.jsx)("div",{id:i4,className:t,children:n}),a[4]=t,a[5]=n,a[6]=i):i=a[6],i}:function(e){return(0,o.jsx)("div",{id:i4,className:(0,x.$)(iA,e.className),children:(0,o.jsx)(y.O7,{children:e.children})})},sp=Object.assign({},{Container:sm,Header:y.O7.Header,Viewer:sl});try{(s=Some).displayName||(s.displayName="Some")}catch{}try{(r=Some).displayName||(r.displayName="Some")}catch{}try{sl.displayName||(sl.displayName="BaseDiffComparisonViewer")}catch{}try{so.displayName||(so.displayName="InternalDiffComparisonViewer")}catch{}try{(l=FilterFilterComponent).displayName||(l.displayName="FilterFilterComponent")}catch{}try{sm.displayName||(sm.displayName="Container")}catch{}try{sp.displayName||(sp.displayName="DiffComparisonViewer")}catch{}},68874:(e,t,n)=>{n.d(t,{o:()=>u,V:()=>c});var i=n(74848),a=n(69497),s=n(12683);let r=[{unit:"month",ms:2592e6},{unit:"day",ms:864e5},{unit:"hour",ms:36e5},{unit:"minute",ms:6e4},{unit:"second",ms:1e3}],l=new Intl.DateTimeFormat(void 0,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:void 0,timeZoneName:"short"}),o=new Intl.DateTimeFormat(void 0,{year:"numeric",month:"short",day:"numeric"}),d=new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric"});function c(e,t=!0){let n="",i=new Date,a=i.getTime()-e.getTime(),s=r.find(e=>e.ms<a);if(s&&"month"!==s.unit){let e=Math.floor(a/s.ms);n="day"===s.unit&&1===e?"yesterday":`${e} ${s.unit}${e>1?"s":""} ago`}else{let a=e.getFullYear()===i.getFullYear()?d:o;n=`${t?"on ":""}${a.format(e)}`}return n}function u({timestamp:e,usePreposition:t=!0,linkUrl:n,sx:r}){let o=c(e,t),d=l.format(e);return n?(0,i.jsx)(s.N_,{sx:{...r},href:n,target:"_blank",className:"Ago-module__AgoTimestampLink--cfwj_",children:(0,i.jsx)(a.A,{inline:!0,title:d,children:(0,i.jsx)("span",{title:d,className:"Ago-module__timestampText--rtBsS",children:o})})}):(0,i.jsx)(a.A,{inline:!0,title:d,children:(0,i.jsx)(s.EY,{title:d,sx:r,children:o})})}try{u.displayName||(u.displayName="Ago")}catch{}},70840:(e,t,n)=>{n.d(t,{G:()=>x});var i=n(74848),a=n(21728),s=n(34522),r=n(73189),l=n(97286),o=n(24880),d=n(73017),c=n(96379),u=n(38621),m=n(69726),p=n(40090),h=n(34164),f=n(74022),g=n(96540),y=n(25506);function x({content:e,className:t,fallbackToRaw:n=!1,hideHeadingAnchors:s=!1,useLoadingSkeletonWithOptions:r}){let y=function(e,t,n){let i,s,r,l=(0,a.c)(8),[o,d]=(0,g.useState)(e),[c,u]=(0,g.useState)(t);2e3!==l[0]?(i=(0,f.A)(d,2e3),l[0]=2e3,l[1]=i):i=l[1];let m=i;return l[2]!==c||l[3]!==t||l[4]!==m||l[5]!==e?(s=()=>{t!==c?(m.cancel(),d(e),u(t)):m(e)},r=[m,e,t,c],l[2]=c,l[3]=t,l[4]=m,l[5]=e,l[6]=s,l[7]=r):(s=l[6],r=l[7]),(0,g.useEffect)(s,r),o}(e.value,e.name,2e3),{status:x,data:b}=(0,l.I)({queryKey:["copilot-immersive","MarkdownPreview",y,e.name],queryFn:async()=>{let t=await (0,c.lS)("/copilot/immersive/markdown",{method:"POST",body:{content:y,filename:e.name}});if(!t.ok)throw Error(`Failed to load rendered markdown (${t.status} on ${t.url})`);return await t.json()},placeholderData:o.rX,staleTime:1/0});return(0,i.jsx)("div",{className:(0,h.$)("readme html-blob blob","MarkdownPreview-module__markdownPreview--KrJBX",s&&"MarkdownPreview-module__hideHeadingAnchors--wU3US",t),children:"pending"===x?r?(0,i.jsx)("div",{"aria-label":"Loading Markdown preview\u2026",role:"status","aria-live":"polite",children:r.map((e,t)=>(0,i.jsx)("div",{className:"mb-3",children:(0,i.jsx)(p.r,{size:e.size,lines:e.lines})},t))}):(0,i.jsx)("div",{className:"MarkdownPreview-module__spinner--rHtSt",children:(0,i.jsx)(m.A,{srText:"Loading Markdown preview\u2026"})}):"error"===x?n?(0,i.jsx)(v,{content:e}):(0,i.jsxs)("div",{className:"MarkdownPreview-module__error--Kjmwv",children:[(0,i.jsx)("span",{className:"MarkdownPreview-module__errorIcon--msbkW",children:(0,i.jsx)(u.StopIcon,{size:24})}),(0,i.jsx)("h2",{className:"MarkdownPreview-module__errorHeader--yOGh9",children:"Markdown rendering failed"}),(0,i.jsx)("p",{children:"Refresh the page or check the markdown code"})]}):(0,i.jsx)(d.$6,{className:"markdown-body",html:b.html})})}function v(e){let t,n,l,o,d=(0,a.c)(13),{content:c}=e,u=(0,g.useId)();d[0]!==c.value?(t={value:c.value,language:"markdown"},d[0]=c.value,d[1]=t):t=d[1];let m=(0,y.a)(t);return d[2]!==c.name||d[3]!==u?(n=(0,i.jsxs)("span",{id:u,className:"sr-only",children:[c.name," raw markdown contents"]}),d[2]=c.name,d[3]=u,d[4]=n):n=d[4],d[5]!==m||d[6]!==c.name||d[7]!==c.value||d[8]!==u?(l=(0,i.jsx)(s.default,{ariaLabelledBy:u,fileName:c.name,isReadOnly:!0,spacing:m,value:c.value,onChange:r.l,hideHelp:!0}),d[5]=m,d[6]=c.name,d[7]=c.value,d[8]=u,d[9]=l):l=d[9],d[10]!==n||d[11]!==l?(o=(0,i.jsxs)(i.Fragment,{children:[n,l]}),d[10]=n,d[11]=l,d[12]=o):o=d[12],o}try{x.displayName||(x.displayName="MarkdownPreview")}catch{}try{v.displayName||(v.displayName="RawMarkdownPreview")}catch{}},72994:(e,t,n)=>{n.d(t,{c:()=>s,t:()=>a});var i=n(35247);function a(e){return e&&0!==e.length?i.W.draftIssueProjectsWithID?e.filter(e=>!!e.title||!!e.id):e.filter(e=>!!e.title).map(e=>e.title):[]}function s(e){return e&&0!==e.length?e.filter(e=>"string"==typeof e?""!==e.trim():!!e.title||!!e.id).map(e=>"string"==typeof e?{title:e}:e):[]}},76219:(e,t,n)=>{n.d(t,{Q:()=>l,U:()=>o});var i=n(74848),a=n(21728),s=n(96540);let r=(0,s.createContext)(null);function l(e){let t,n,s=(0,a.c)(8),{availableModels:l,defaultModel:o,previewUrl:d,sendChatMessage:c,children:u}=e;s[0]!==l||s[1]!==o||s[2]!==d||s[3]!==c?(t={availableModels:l,defaultModel:o,previewUrl:d,sendChatMessage:c},s[0]=l,s[1]=o,s[2]=d,s[3]=c,s[4]=t):t=s[4];let m=t;return s[5]!==u||s[6]!==m?(n=(0,i.jsx)(r.Provider,{value:m,children:u}),s[5]=u,s[6]=m,s[7]=n):n=s[7],n}function o(){let e=(0,s.useContext)(r);if(!e)throw Error("useAppContext must be used within an AppContextProvider");return e}try{r.displayName||(r.displayName="AppContext")}catch{}try{l.displayName||(l.displayName="AppContextProvider")}catch{}},76746:(e,t,n)=>{n.d(t,{v:()=>r});var i=n(61872);n(39087);var a=n(91348),s=n(45363);function r(e,t){if(!Array.isArray(e.nodes))return[{error:"Loop has no nodes",errorType:i.T.MissingProperty,involvedNodes:[]}];let n=function(e,t){let n=[];for(let a of("string"!=typeof e.title&&n.push({error:"Loop is missing a title",errorType:i.T.MissingProperty,involvedNodes:[]}),0===e.nodes.length&&n.push({error:"Loop has no nodes",errorType:i.T.MissingProperty,involvedNodes:[]}),e.nodes))n=n.concat(function(e,t){let n=[];return("string"!=typeof e.title||0===e.title.length)&&n.push({error:"Node is missing a title",errorType:i.T.MissingProperty,involvedNodes:[e.id]}),n.concat(s.C.validateNode(e,t))}(a,t));return n}(e,t),r=(0,a.f0)(e.nodes);for(let t of r.edges){let a=e.nodes.find(e=>e.id===t.from),s=e.nodes.find(e=>e.id===t.to);a&&s||n.push({error:`Node ${t.to} references a nonexistent node {{${t.from}}}`,errorType:i.T.NonexistentNode,involvedNodes:[t.to]})}let l=function(e){let t=new Set,n=new Set,i=[],a=s=>{if(n.has(s)){let e=i.indexOf(s);return i.slice(e)}if(t.has(s))return null;for(let r of(t.add(s),n.add(s),i.push(s),e.edges))if(r.from===s){let e=a(r.to);if(e)return e}return n.delete(s),i.pop(),null};for(let n of e.nodes.values())if(!t.has(n.id)){let e=a(n.id);if(e)return e}return null}(r);if(l&&l.length>0){let e=[...l,l[0]];n.push({error:`Loop contains a cycle: ${e.join(" \u2192 ")}`,errorType:i.T.CycleDetected,involvedNodes:l})}let o=function(e){let t=[...e.nodes.values()];if(0===t.length)return[];let n=[],i=new Set,a=(t,n)=>{for(let s of(i.add(t),n.add(t),e.edges))s.from!==t||i.has(s.to)||a(s.to,n),s.to!==t||i.has(s.from)||a(s.from,n)};for(let e of t)if(!i.has(e.id)){let t=new Set;a(e.id,t),n.push(t)}if(n.length<=1)return[];let s=n.reduce((e,t)=>t.size>e.size?t:e,new Set),r=[];for(let e of t)s.has(e.id)||r.push(e.id);return r}(r);return o.length>0&&n.push({error:`Loop contains unreachable nodes: ${o.join(", ")}`,errorType:i.T.DisconnectedNode,involvedNodes:o}),n}},77999:(e,t,n)=>{n.d(t,{m:()=>d});var i=n(74848),a=n(34164),s=n(37367),r=n(34743),l=n(71988),o=n(96540);let d=(0,o.forwardRef)(({text:e,position:t,children:n,relationship:d="description",offset:c=8,...u},m)=>{let[p,h]=(0,o.useState)(!1),f=(0,o.useRef)(null),{refs:g,floatingStyles:y,context:x,isPositioned:v}=(0,s.we)({open:p,onOpenChange:h,placement:t,middleware:[(0,r.cY)(c),...t?[]:[(0,r.RK)()]],whileElementsMounted:l.ll}),b=(0,s.Mk)(x,{move:!1,delay:{open:100,close:0}}),_=(0,s.iQ)(x),j=(0,s.s9)(x),w=(0,s.It)(x,{role:"tooltip",enabled:"description"===d}),{getReferenceProps:N,getFloatingProps:C}=(0,s.bv)([b,_,j,w]),S=N();"label"===d?u["aria-label"]=e:"description"===d&&(u["aria-describedby"]=x.floatingId);let I=(0,s.SV)([g.setReference,m]),k=(0,o.cloneElement)(n,{...S,...u,onTouchEnd:e=>{n.props.onTouchEnd&&n.props.onTouchEnd(e),setTimeout(()=>h(!1),10)},onMouseEnter:e=>{n.props.onMouseEnter&&n.props.onMouseEnter(e),f.current&&(clearTimeout(f.current),f.current=null)},ref:I});return(0,i.jsxs)(i.Fragment,{children:[k,p&&(0,i.jsx)(s.XF,{children:(0,i.jsx)("div",{ref:g.setFloating,id:x.floatingId,style:{...y,visibility:v?"visible":"hidden"},className:(0,a.$)("Tooltip-module__tooltip--hAat9"),...C(),children:e})})]})});d.displayName="Tooltip"},78456:(e,t,n)=>{n.d(t,{Io:()=>i});let i=[{id:"dummy-1",dummy:!0,owned:!0,title:"Edit writing",description:"Update writing to make it more engaging",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1a",title:"Your writing",description:"The writing you want to edit",type:"text",metadata:{inputType:"text"},content:`There is huge potential in building complex, repeatable pipelines that take advantage of LLM capabilities. A way for anyone to create and share tools. A few examples:

- Scientists sharing workflows for turning conference notes into a queryable artifact
- Scientists creating a pipeline for polishing a draft to adhere to proposal writing requirements
- Developers building a \u{201C}check for security flaws\u{201D} pipeline, accessible via API / vscode extension
- Library maintainers creating a \u{201C}make a new codebase with Next.js" or \u{201C}add Tailwind to your codebase\u{201D} pipeline
- Artists building a pipeline to generate images of a certain style. Or process a sketch into a branded image.
- Generating a customized analysis of all of a lawyer\u{2019}s cases
- Summarize medical research on a topic, using only the most trustable sources

I wager there\u{2019}s a huge market in building and discovering pipelines, and a good implementation will look a bit like ChatGPT with people of many stripes building and using them.

GitHub is the right place for this kind of ecosystem for a few reasons:

- It ties into the spirit of Open Source
- It already has a huge audience to help with the cold start problem
- It mirror\u{2019}s GitHub\u{2019}s mission to make \u{201C}code\u{201D} accessible to a larger audience and the platform valuable to more than just developers. The future will look like people of any occupation \u{201C}writing code\u{201D} (really, just building things with logic)`},{id:"2a",title:"Edit guide",description:"The guide on how to edit writing",type:"text",metadata:{inputType:"text"},content:`# Academish Voice

pvh / Aug 2022

Our publications follow what we call \u{201C}*academish*\u{201D} voice. We follow a largely academic style in our writing but avoid certain academic tendencies.

## Academic Style

- **Make no claims without support.** If you have made an unsupported claim consider its centrality to your argument. If \u{201C}many developers agree\u{201D}, we should be able to link to a source or describe how we know that. If you can\u{2019}t defend it, you should get rid of it.
- **Avoid absolutist language.** It\u{2019}s not \u{201C}the main problem\u{201D}, it\u{2019}s \u{201C}a problem\u{201D}. (Unless, of course, you can defend the claim.)
- **Be precise and specific with your descriptions.** Instead of saying something \u{201C}feels great\u{201D}, describe how it feels. Don\u{2019}t say something \u{201C}is a problem\u{201D} unless you describe what the problem is or to whom. If you\u{2019}re tempted to say something vague because you\u{2019}re not sure, either do enough research until you\u{2019}re sure, or don\u{2019}t say it.
- **Avoid hyperbole.** Use adjectives to add precision, not to persuade. Claiming \u{201C}immense benefits\u{201D} is only appropriate if you have developed a commercially viable fusion power plant. Delete words that are only for emphasis, and keep only those that add substance (e.g. quantify).
- **Structure your writing for incremental reading.** Don\u{2019}t bury the lede. A reader should be able to understand the goals and conclusions of an essay by reading the first couple of paragraphs. Individual sections should briefly reiterate any important material and/or link back to where it is introduced. This may feel repetitive at times but aids readers who take several sessions to read a piece or who jump straight to the sections that interest them.
- **Give credit to others.** Cite earlier work. Link to sources for terms and ideas. Give thanks to contributors, reviewers, and advisors.
- **Be humble and transparent about shortcomings and problems.** We want readers to build on our work, not buy our product.

## Ink & Switch Style

- **Assume the reader is an interested generalist.** Explain jargon. Academic writing is dense with domain terminology because it assumes readers are \u{201C}up to date on the field.\u{201D}  Ink & Switch Essays make use of marginalia in what we call \u{201C}asides\u{201D} to define uncommon terminology. Concretely, you don\u{2019}t need to gloss \u{201C}HTML\u{201D}, but you should probably gloss \u{201C}CRDT\u{201D}.
- **Carefully consider section headings.** Headings should legibly communicate the shape of the essay and serve as a roadmap for a reader to skip to the part of an essay that\u{2019}s most interesting to them. Similarly, avoid including unrelated material in a section with a particular title. If a user already knows \u{201C}How CRDTs Work\u{201D} then they shouldn\u{2019}t miss (much) important information about the project by skipping reading that section.
- **Embrace interactive demonstrations, animations, illustration, and videos.** Sometimes an illustration or demo can offer more clarity on a topic than text alone. As long as the content is self-contained and doesn\u{2019}t rely on external sources, it should be legible for many years to come and viewable offline.
- **It\u{2019}s okay to share hunches and beliefs as long as they\u{2019}re appropriately labeled.** Don\u{2019}t be shy about drawing conclusions, just be clear about the degree of confidence you have and where it comes from.
- **Ensure content looks good in PDF / printed form.** Obviously you lose the elements above, but the PDF version of a paper shouldn\u{2019}t have giant \u{25B6}\u{FE0F} icons obscuring an image. Interactive figures should display a meaningful static view.
- **Use \u{201C}asides\u{201D} for supportive content and marginalia.** Asides can expand on references to other work, link out to related projects, or just share interesting context or historical tidbits.
- **Deploy persuasive or emotional writing appropriately.** You can be enthusiastic in describing your goals but be modest in how you describe your solutions.
- **Keep it classy.** We don\u{2019}t dismiss other people\u{2019}s work or insult their products. Everything around you was made by someone working really hard on it. If we have found a better way, we should show gratitude to those who helped us realize the path forward and humility about our contributions.
- **Sweat the details.** Make sure your colors are carefully chosen. Images should be clear and at the right bit rate. Choose your words carefully. Interactions should be delightful.

The result of these elements should be an essay that is confident, accurate, and readable to almost anyone with a background in technology. Our essays are often long (probably too long) but should consistently reward patient reading and serve as a reference to their readers for many years to come.

---

## About this page

This document aims to articulate the stylistic elements and voice of Ink & Switch Essays.

### **September 1, 2022**

@Martin Kleppmann added some details on academic style.

### **August 17, 2022**

@Todd Matthews made some formatting edits for continuity and scanability.

### **August 16, 2022**

@Peter van Hardenberg created this document. Began with @Adam Wiggins\u{2019} "Essay Playbook" and added notes about Academish Voice, which aim to capture the stylistic elements he looks for when I reading essay drafts. Many of these elements came from @Martin Kleppmann  and @Adam Wiggins reviews of my past writing, so credit to them. This is probably quite useful for everyone working on an essay right now, but is probably not comprehensive. If I've missed anything or anything here is controversial or unclear please feel free to inquire.`},{id:"3a",title:"Edited writing",description:"Writing with suggested changes",type:"prompt",content:"You're a helpful writing tutor here to suggest changes to the writing. Use this guide: {{2a}}. Respond with a full, edited version of {{1a}}. You're a helpful writing tutor here to suggest changes to the writing. Use this guide: {{2a}}. Respond with a full, edited version of {{1a}}. You're a helpful writing tutor here to suggest changes to the writing. Use this guide: {{2a}}. Respond with a full, edited version of {{1a}}."}]},{id:"dummy-2",dummy:!0,title:"Document this function",owned:!0,description:"Document this function so it's easy to understand",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1b",title:"Function to document",description:"The function to document",content:`export function createNodePrompt(node: Node, nodeMap: Record<string, Node>): string {
  let content = node.content;
  const regex = /{{([\\w-]+)}}/g;
  let match;

  while ((match = regex.exec(content)) !== null) {
    const id = match[1];
    const referencedNode = nodeMap[id];
    if (referencedNode) {
      const replacementContent = createNodePrompt(referencedNode, nodeMap);
      content = content.replace(match[0], replacementContent);
    }
  }

  return content;
}`,type:"code"},{id:"2b",title:"Documentation guide",description:"The documentation for the function",content:`Minimum Viable Documentation
A small set of fresh and accurate docs is better than a large assembly of \u{201C}documentation\u{201D} in various states of disrepair.

Write short and useful documents. Cut out everything unnecessary, including out-of-date, incorrect, or redundant information. Also make a habit of continually massaging and improving every doc to suit your changing needs. Docs work best when they are alive but frequently trimmed, like a bonsai tree.

See also these Agile Documentation best practices.

Update Docs with Code
Change your documentation in the same CL as the code change. This keeps your docs fresh, and is also a good place to explain to your reviewer what you\u{2019}re doing.

A good reviewer can at least insist that docstrings, header files, README.md files, and any other docs get updated alongside the CL.

Delete Dead Documentation
Dead docs are bad. They misinform, they slow down, they incite despair in engineers and laziness in team leads. They set a precedent for leaving behind messes in a code base. If your home is clean, most guests will be clean without being asked.

Just like any big cleaning project, it\u{2019}s easy to be overwhelmed. If your docs are in bad shape:

Take it slow, doc health is a gradual accumulation.
First delete what you\u{2019}re certain is wrong, ignore what\u{2019}s unclear.
Get your whole team involved. Devote time to quickly scan every doc and make a simple decision: Keep or delete?
Default to delete or leave behind if migrating. Stragglers can always be recovered.
Iterate.
Prefer the Good Over the Perfect
Documentation is an art. There is no perfect document, there are only proven methods and prudent guidelines. See Better is better than best.

Documentation is the Story of Your Code
Writing excellent code doesn\u{2019}t end when your code compiles or even if your test coverage reaches 100%. It\u{2019}s easy to write something a computer understands, it\u{2019}s much harder to write something both a human and a computer understand. Your mission as a Code Health-conscious engineer is to write for humans first, computers second. Documentation is an important part of this skill.

There\u{2019}s a spectrum of engineering documentation that ranges from terse comments to detailed prose:

Meaningful names: Good naming allows the code to convey information that would otherwise be relegated to comments or documentation. This includes nameable entities at all levels, from local variables to classes, files, and directories.

Inline comments: The primary purpose of inline comments is to provide information that the code itself cannot contain, such as why the code is there.

Method and class comments:

Method API documentation: The header / Javadoc / docstring comments that say what methods do and how to use them. This documentation is the contract of how your code must behave. The intended audience is future programmers who will use and modify your code.

It is often reasonable to say that any behavior documented here should have a test verifying it. This documentation details what arguments the method takes, what it returns, any \u{201C}gotchas\u{201D} or restrictions, and what exceptions it can throw or errors it can return. It does not usually explain why code behaves a particular way unless that\u{2019}s relevant to a developer\u{2019}s understanding of how to use the method. \u{201C}Why\u{201D} explanations are for inline comments. Think in practical terms when writing method documentation: \u{201C}This is a hammer. You use it to pound nails.\u{201D}

Class / Module API documentation: The header / Javadoc / docstring comments for a class or a whole file. This documentation gives a brief overview of what the class / file does and often gives a few short examples of how you might use the class / file.

Examples are particularly relevant when there\u{2019}s several distinct ways to use the class (some advanced, some simple). Always list the simplest use case first.

README.md: A good README.md orients the new user to the directory and points to more detailed explanation and user guides:

What is this directory intended to hold?
Which files should the developer look at first? Are some files an API?
Who maintains this directory and where I can learn more?
See the README.md guidelines.

docs: The contents of a good docs directory explain how to:

Get started using the relevant API, library, or tool.
Run its tests.
Debug its output.
Release the binary.
Design docs, PRDs: A good design doc or PRD discusses the proposed implementation at length for the purpose of collecting feedback on that design. However, once the code is implemented, design docs should serve as archives of these decisions, not as half-correct docs (they are often misused).

Other external docs: Some teams maintain documentation in other locations, separate from the code, such as Google Sites, Drive, or wiki. If you do maintain documentation in other locations, you should clearly point to those locations from your project directory (for example, by adding an obvious link to the location from your project\u{2019}s README.md).

Duplication is Evil
Do not write your own guide to a common Google technology or process. Link to it instead. If the guide doesn\u{2019}t exist or it\u{2019}s badly out of date, submit your updates to the appropriate directory or create a package-level README.md. Take ownership and don\u{2019}t be shy: Other teams will usually welcome your contributions.`,type:"text",metadata:{inputType:"text"}},{id:"3b",title:"My personal skillset",description:"",content:"I'm a software engineer with 5 years of experience in building web applications. I'm skilled in JavaScript, TypeScript, React, and Node.js. I'm also familiar with Python and have experience with machine learning frameworks like TensorFlow and PyTorch. I'm comfortable with SQL and NoSQL databases, and have experience with Docker and Kubernetes. I'm a quick learner and I'm always looking to improve my skills.",type:"text",metadata:{inputType:"text"}},{id:"4b",title:"Documented code",description:"The code with documentation",content:`You're documenting your code for your team.

Update this code: {{1b}}

Using this guide: {{2b}}]

And incorporate {{3b}}`,type:"prompt"},{id:"5b",title:"Function tests",description:"Generate a test for the code",content:"You're generating a Jest test for {{4b}}. Our testing guidelines: {{6b}}",type:"prompt"},{id:"6b",title:"Testing guidelines",description:"The guidelines for testing",content:`The Test Anatomy

\u{26AA} \u{FE0F} 1.1 Include 3 parts in each test name
\u{2705} Do: A test report should tell whether the current application revision satisfies the requirements for the people who are not necessarily familiar with the code: the tester, the DevOps engineer who is deploying and the future you two years from now. This can be achieved best if the tests speak at the requirements level and include 3 parts:

(1) What is being tested? For example, the ProductsService.addNewProduct method

(2) Under what circumstances and scenario? For example, no price is passed to the method

(3) What is the expected result? For example, the new product is not approved


\u{274C} Otherwise: A deployment just failed, a test named \u{201C}Add product\u{201D} failed. Does this tell you what exactly is malfunctioning?


\u{1F447} Note: Each bullet has code examples and sometime also an image illustration. Click to expand



\u{26AA} \u{FE0F} 1.2 Structure tests by the AAA pattern
\u{2705} Do: Structure your tests with 3 well-separated sections Arrange, Act & Assert (AAA). Following this structure guarantees that the reader spends no brain-CPU on understanding the test plan:

1st A - Arrange: All the setup code to bring the system to the scenario the test aims to simulate. This might include instantiating the unit under test constructor, adding DB records, mocking/stubbing on objects, and any other preparation code

2nd A - Act: Execute the unit under test. Usually 1 line of code

3rd A - Assert: Ensure that the received value satisfies the expectation. Usually 1 line of code


\u{274C} Otherwise: Not only do you spend hours understanding the main code but what should have been the simplest part of the day (testing) stretches your brain


\u{26AA} \u{FE0F}1.3 Describe expectations in a product language: use BDD-style assertions
\u{2705} Do: Coding your tests in a declarative-style allows the reader to get the grab instantly without spending even a single brain-CPU cycle. When you write imperative code that is packed with conditional logic, the reader is forced to exert more brain-CPU cycles. In that case, code the expectation in a human-like language, declarative BDD style using expect or should and not using custom code. If Chai & Jest doesn't include the desired assertion and it\u{2019}s highly repeatable, consider extending Jest matcher (Jest) or writing a custom Chai plugin

\u{274C} Otherwise: The team will write less tests and decorate the annoying ones with .skip()


\u{26AA}  1.4 Stick to black-box testing: Test only public methods
\u{2705} Do: Testing the internals brings huge overhead for almost nothing. If your code/API delivers the right results, should you really invest your next 3 hours in testing HOW it worked internally and then maintain these fragile tests? Whenever a public behavior is checked, the private implementation is also implicitly tested and your tests will break only if there is a certain problem (e.g. wrong output). This approach is also referred to as behavioral testing. On the other side, should you test the internals (white box approach) \u{2014} your focus shifts from planning the component outcome to nitty-gritty details and your test might break because of minor code refactors although the results are fine - this dramatically increases the maintenance burden

\u{274C} Otherwise: Your tests behave like the boy who cried wolf: shouting false-positive cries (e.g., A test fails because a private variable name was changed). Unsurprisingly, people will soon start to ignore the CI notifications until someday, a real bug gets ignored\u{2026}


\u{26AA}  1.5 Choose the right test doubles: Avoid mocks in favor of stubs and spies
\u{2705} Do: Test doubles are a necessary evil because they are coupled to the application internals, yet some provide immense value (Read here a reminder about test doubles: mocks vs stubs vs spies).

Before using test doubles, ask a very simple question: Do I use it to test functionality that appears, or could appear, in the requirements document? If not, it\u{2019}s a white-box testing smell.

For example, if you want to test that your app behaves reasonably when the payment service is down, you might stub the payment service and trigger some \u{2018}No Response\u{2019} return to ensure that the unit under test returns the right value. This checks our application behavior/response/outcome under certain scenarios. You might also use a spy to assert that an email was sent when that service is down \u{2014} this is again a behavioral check which is likely to appear in a requirements doc (\u{201C}Send an email if payment couldn\u{2019}t be saved\u{201D}). On the flip side, if you mock the Payment service and ensure that it was called with the right JavaScript types \u{2014} then your test is focused on internal things that have nothing to do with the application functionality and are likely to change frequently

\u{274C} Otherwise: Any refactoring of code mandates searching for all the mocks in the code and updating accordingly. Tests become a burden rather than a helpful friend



\u{26AA} 1.6 Don\u{2019}t \u{201C}foo\u{201D}, use realistic input data
\u{2705} Do: Often production bugs are revealed under some very specific and surprising input \u{2014} the more realistic the test input is, the greater the chances are to catch bugs early. Use dedicated libraries like Chance or Faker to generate pseudo-real data that resembles the variety and form of production data. For example, such libraries can generate realistic phone numbers, usernames, credit cards, company names, and even \u{2018}lorem ipsum\u{2019} text. You may also create some tests (on top of unit tests, not as a replacement) that randomize fakers' data to stretch your unit under test or even import real data from your production environment. Want to take it to the next level? See the next bullet (property-based testing).

\u{274C} Otherwise: All your development testing will falsely show green when you use synthetic inputs like \u{201C}Foo\u{201D}, but then production might turn red when a hacker passes-in a nasty string like \u{201C}@3e2ddsf . ##\u{2019} 1 fdsfds . fds432 AAAA\u{201D}

`,type:"text",metadata:{inputType:"text"}},{id:"7b",title:"Test results",description:"Run the test for the code",content:"You're running tests for {{5b}}. Respond with the results of the tests.",type:"prompt"},{id:"8",title:"Documented and tested code",description:"The code with documentation and test",content:`Here's the documented code: {{4b}}.

Here's the {{5b}} and the {{7b}}.

Respond with "\u{2705} OK" if the tests all pass, and show a code block with the documented code and tests.`,type:"prompt"}]},{id:"dummy-3",dummy:!0,title:"Generate a course teaching me how this code works",owned:!0,description:"Generate a course teaching me how this code works",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1c",title:"Code to explain",description:"The code to explain",content:`import {ticks, tickIncrement} from "d3-array";
import continuous, {copy} from "./continuous.js";
import {initRange} from "./init.js";
import tickFormat from "./tickFormat.js";

export function linearish(scale) {
  var domain = scale.domain;

  scale.ticks = function(count) {
    var d = domain();
    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);
  };

  scale.tickFormat = function(count, specifier) {
    var d = domain();
    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);
  };

  scale.nice = function(count) {
    if (count == null) count = 10;

    var d = domain();
    var i0 = 0;
    var i1 = d.length - 1;
    var start = d[i0];
    var stop = d[i1];
    var prestep;
    var step;
    var maxIter = 10;

    if (stop < start) {
      step = start, start = stop, stop = step;
      step = i0, i0 = i1, i1 = step;
    }

    while (maxIter-- > 0) {
      step = tickIncrement(start, stop, count);
      if (step === prestep) {
        d[i0] = start
        d[i1] = stop
        return domain(d);
      } else if (step > 0) {
        start = Math.floor(start / step) * step;
        stop = Math.ceil(stop / step) * step;
      } else if (step < 0) {
        start = Math.ceil(start * step) / step;
        stop = Math.floor(stop * step) / step;
      } else {
        break;
      }
      prestep = step;
    }

    return scale;
  };

  return scale;
}

export default function linear() {
  var scale = continuous();

  scale.copy = function() {
    return copy(scale, linear());
  };

  initRange.apply(scale, arguments);

  return linearish(scale);
}`,type:"code"},{id:"2c",title:"My skillset",description:"My skillset",content:"I'm a software engineer with 5 years of experience in building web applications. I'm skilled in JavaScript, TypeScript, React, and Node.js. I'm also familiar with Python and have experience with machine learning frameworks like TensorFlow and PyTorch. I'm comfortable with SQL and NoSQL databases, and have experience with Docker and Kubernetes. I'm a quick learner and I'm always looking to improve my skills.",type:"text",metadata:{inputType:"text"}},{id:"3c",title:"Course outline",description:"The outline of the course",content:"You're generating a course teaching me how to understand {{1c}}. I have the following skillset: {{2c}}. Keep it short and concise, with 2-3 sections.",type:"prompt"},{id:"4c",title:"Course content",description:"The content of the course",content:`Generate a short walkthrough that teaches me how to understand {{1c}}. I have the following skillset: {{2c}}.

Flesh out the {{3c}}. Respond with a short walkthrough, using code blocks for code samples.`,type:"prompt"}]},{id:"dummy-4",dummy:!0,title:"Generate app name",owned:!0,description:"Generate and validate potential names for your app",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1d",title:"App description",description:"Describe your app's purpose and target audience",type:"text",metadata:{inputType:"text"},content:"An email app that uses AI to help you write emails faster."},{id:"2d",title:"Generate names",description:"Generate potential names based on description",type:"prompt",content:`You're a creative app naming expert. Generate 10 potential names for an app based on this description: {{1d}}

Rules for the names:
- Keep them short and memorable
- Make sure they're easy to spell
- Consider domain name availability
- Avoid trademarked terms

Format: a JSON array with one name per line`},{id:"3d",title:"Check domain availability",description:"Check if domains are available for the generated names",type:"code",content:`// This code checks domain availability using DNS lookup
  const nameList = {{2d}}

  const results = [];

  for (const name of nameList) {
    const cleanName = name.toLowerCase().replace(/[^a-z0-9]/g, '');
    const domain = cleanName + '.com';

    try {
      // Try to resolve the domain - if it fails, domain might be available
      const response = await fetch(\`https://dns.google/resolve?name=\${domain}\`);
      const data = await response.json();

      results.push({
        name: name,
        domain: domain,
        available: data.Status === 3 || !data.Answer // NXDOMAIN status or no answer means likely available
      });
    } catch (error) {
      results.push({
        name: name,
        domain: domain,
        error: 'Failed to check availability'
      });
    }
  }

  return results;
`}]},{id:"dummy-5",dummy:!0,title:"Wikipedia",owned:!0,description:"Generate a wiki article on a topic or question",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1e",title:"Topic or question",description:"The topic or question to generate a wiki article on",type:"text",metadata:{inputType:"text"},content:"When do babies start to crawl?"},{id:"2e",title:"Split into topics",description:"Split the topic or question into topics",type:"text",metadata:{inputType:"text"},content:`You're creating a write-up on a concept. You need to split it into 5-6 sections that cover interesting aspects of the concept. Respond with a JSON array with one string per topic.

For example:
Concept: Dogs as pets
Topics:
["Dog breeds", "Dog training", "Dog costs", "Dog health", "Dog accessories"]


Concept: {{1e}}
Topics:`},{id:"3e",title:"Generate article",description:"Generate a wiki article on the concept",type:"prompt",content:"You're a wiki article generator. Generate a wiki article on the concept: {{1e}}. Split it into sections: {{2e}} with a title, a bolded key statement, and a list or 2 paragraphs."},{id:"4e",title:"Image",description:"An image for the article",type:"prompt",content:"Generate an ascii art image for the article: {{3e}}"}]},{id:"dummy-6",dummy:!0,title:"Compare two prompts",owned:!0,description:"Compare the performance of two prompts",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1f",title:"Prompt 1",description:"The first prompt to compare",type:"prompt",content:"Make me a haiku about the color blue"},{id:"2f",title:"Prompt 2",description:"The second prompt to compare",type:"prompt",content:"You are a haiku generator. Make a haiku about the color blue. Your job depends on it."},{id:"3f",title:"Important metrics",description:"The important metrics to compare the prompts on",type:"text",metadata:{inputType:"text"},content:"Relevance, creativity, accuracy, completeness, and style"},{id:"4f",title:"Compare",description:"Compare the performance of the two prompts",type:"prompt",content:"For each of the {{3f}}, compare the two prompts: {{1f}} and {{2f}}. Respond with a JSON array with one object per metric, with the metric name and a winner key that says which prompt is better (just say 1 or 2)."}]},{id:"dummy-7",dummy:!0,title:"testing node with offset",owned:!0,description:"Test the edge render behavior for diagram with node offset",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1",type:"text",title:"First Responder Username",description:"GitHub username of the first responder",content:"lichin-lin",metadata:{inputType:"text"}},{id:"2",type:"text",title:"Start Date",description:"Start date for the report (1 week ago)",content:"@today-7d",metadata:{inputType:"date"}},{id:"repos",type:"text",title:"Repositories",description:"List of repositories to include in the report (one per line, e.g. primer/react)",content:`primer/react
primer/css
primer/components`,metadata:{inputType:"text"}},{id:"repo_query",type:"prompt",title:"Repository Query Builder",description:"Builds the repository query string for GitHub search",content:`Convert this list of repositories into a GitHub search query format. For each repository on a new line in {{repos}}, add 'repo:' prefix and combine with OR operators.

For example:
- If input is 'primer/react\\nprimer/css'
- Output should be 'repo:primer/react OR repo:primer/css'

Only return the query string, nothing else.`},{id:"3",type:"github-graphql",title:"Created Issues",description:"Issues created by the user in the past week across all repositories",content:`query {
  search(query: "({{repo_query}}) author:{{1}} is:issue created:>={{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on Issue {
          title
          url
          createdAt
          state
          repository {
            nameWithOwner
          }
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
        }
      }
    }
  }
}`},{id:"4",type:"github-graphql",title:"PR Reviews",description:"PR reviews submitted by the user in the past week across all repositories",content:`query {
  search(query: "({{repo_query}}) is:pr reviewed-by:{{1}} updated:>={{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          repository {
            nameWithOwner
          }
          reviews(first: 5, author: "{{1}}") {
            edges {
              node {
                state
                submittedAt
              }
            }
          }
        }
      }
    }
  }
}`},{id:"involved_issues",type:"github-graphql",title:"Involved Issues",description:"Issues where the user was involved (commented or assigned) in the past week across all repositories",content:`query {
  search(query: "({{repo_query}}) involves:{{1}} is:issue updated:>={{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on Issue {
          title
          url
          updatedAt
          state
          repository {
            nameWithOwner
          }
          comments(last: 5) {
            nodes {
              author {
                login
              }
              createdAt
            }
          }
          assignees(first: 5) {
            nodes {
              login
            }
          }
        }
      }
    }
  }
}`},{id:"5",type:"prompt",title:"Combined Activity Summary",description:"Summary report of the first responder's activity across all repositories",content:`Generate a comprehensive summary report of the first responder's ({{1}}) activity across multiple repositories over the past week. The repositories included are: {{repos}}

Issues Created:
{{3}}

PR Reviews:
{{4}}

Issue Involvement:
{{involved_issues}}

Please format the report with these sections:
1. Overview (total numbers across all repositories)
2. Repository Breakdown (activity summary per repository)
3. Issue Activity
   - Created Issues (grouped by repository)
   - Issue Involvement (comments, assignments, grouped by repository)
4. PR Review Activity (highlight significant reviews, grouped by repository)
5. Key Observations (patterns across repositories, areas needing attention)

Keep the tone professional and focus on what the next first responder needs to know about as they come in for the next shift. Pay special attention to cross-repository patterns and any repositories that may need extra attention.`}]}]},79196:(e,t,n)=>{n.d(t,{U:()=>a1});var i,a,s,r,l,o,d,c,u,m,p,h,f,g,y,x,v,b,_,j,w,N,C,S,I,k,T,E,R,L,A,D,P,O,F,B,M,V,$,U,q,W,H,G,z=n(74848),K=n(21728),Q=n(2635),Z=n(33592),J=n(7730),Y=n(25641),X=n(35247),ee=n(72206),et=n(53419),en=n(894),ei=n(75202),ea=n(6551),es=n(69676),er=n(38621),el=n(45800),eo=n(26108),ed=n(94236),ec=n(5524),eu=n(71941),em=n(34164),ep=n(96540),eh=n(22116);let ef="ContentPreview-module__slimLineTopTabs--GBdF0",eg="ContentPreview-module__toolbar--_XWuB",ey="ContentPreview-module__actions--o_YRg",ex="ContentPreview-module__rightDivider--LY__Z",ev="ContentPreview-module__content--FgZZL";var eb=n(1747),e_=n(47789),ej=n(90651),ew=n(49246),eN=n(66827),eC=n(29731),eS=n(46251),eI=n(11680),ek=n(43715),eT=n(38598);function eE(e){let t,n,i,a,s,r=(0,K.c)(11),{title:l,description:o,icon:d}=e;return r[0]!==d?(t=(0,z.jsx)(d,{size:24,className:"FailureState-module__icon--TP632"}),r[0]=d,r[1]=t):t=r[1],r[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,z.jsx)("h1",{className:"sr-only",children:"Content preview panel"}),r[2]=n):n=r[2],r[3]!==l?(i=(0,z.jsx)("h2",{className:"FailureState-module__heading--ohXqD",children:l}),r[3]=l,r[4]=i):i=r[4],r[5]!==o?(a=(0,z.jsx)("p",{className:"FailureState-module__subtitle--VM7x1",children:o}),r[5]=o,r[6]=a):a=r[6],r[7]!==t||r[8]!==i||r[9]!==a?(s=(0,z.jsxs)("div",{className:"FailureState-module__container--EliAz",children:[t,n,i,a]}),r[7]=t,r[8]=i,r[9]=a,r[10]=s):s=r[10],s}try{eE.displayName||(eE.displayName="FailureState")}catch{}var eR=n(26100),eL=n(7812);function eA(e){let t,n,i,a,s,r=(0,K.c)(16),{item:l,onVersionSelect:o}=e,{versionedItems:d,openItem:c}=(0,eb.xx)(),u=(0,eL.oy)(l.id),m=d.get(u)??[],p=m.indexOf(l.id);if((0,ep.useEffect)(()=>{o&&m.length>1&&o(`Version${p+1}`)},[p,o,m.length]),m.length<=1)return null;let h=ed.W,f=p+1;r[0]!==f?(t=(0,z.jsx)(ed.W.Button,{variant:"invisible",className:"VersionSelector-module__anchor--Tx_UX",children:(0,z.jsx)(eR.g,{version:f,"data-testid":"version-selector"})}),r[0]=f,r[1]=t):t=r[1];let g=ed.W,y=ec.l;r[2]!==l.id||r[3]!==o||r[4]!==c?(n=(e,t)=>(0,z.jsxs)(ec.l.Item,{onSelect:()=>{c(e),o&&o(`Version${t+1}`)},selected:e===l.id,children:[(0,z.jsx)(ec.l.LeadingVisual,{children:(0,z.jsx)(eR.g,{version:t+1})}),"Version ",t+1]},e),r[2]=l.id,r[3]=o,r[4]=c,r[5]=n):n=r[5];let x=m.map(n);return r[6]!==y||r[7]!==x?(i=(0,z.jsx)(y,{selectionVariant:"single",children:x}),r[6]=y,r[7]=x,r[8]=i):i=r[8],r[9]!==g.Overlay||r[10]!==i?(a=(0,z.jsx)(g.Overlay,{children:i}),r[9]=g.Overlay,r[10]=i,r[11]=a):a=r[11],r[12]!==h||r[13]!==t||r[14]!==a?(s=(0,z.jsxs)(h,{children:[t,a]}),r[12]=h,r[13]=t,r[14]=a,r[15]=s):s=r[15],s}try{eA.displayName||(eA.displayName="VersionSelector")}catch{}var eD=n(17831),eP=n(83494),eO=n(15220),eF=n(69726),eB=n(21373),eM=n(79431),eV=n(28177),e$=n(39344),eU=n(62559),eq=n(81724),eW=n(977),eH=n(81171),eG=n(18501),ez=n(30721),eK=n(40961),eQ=n(5338),eZ=n(18312),eJ=n(46461);let eY={kind:"InlineDataFragment",name:"useIssueQueryIssueContent"};eY.hash="a175c12fb4b38762491470789bca7dee";let eX=(i={defaultValue:null,kind:"LocalArgument",name:"name"},a={defaultValue:null,kind:"LocalArgument",name:"number"},s={defaultValue:null,kind:"LocalArgument",name:"owner"},r=[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"owner",variableName:"owner"}],l=[{kind:"Variable",name:"number",variableName:"number"}],o={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"databaseId",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"number",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"body",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},g=[f={alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null}],y={alias:null,args:null,kind:"ScalarField",name:"isArchived",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"isCopilotAgentEnabled",storageKey:null},v=[h],_={alias:null,args:b=[{kind:"Literal",name:"first",value:20}],concreteType:"ProjectV2ItemConnection",kind:"LinkedField",name:"projectItems",plural:!1,selections:[{alias:null,args:null,concreteType:"ProjectV2Item",kind:"LinkedField",name:"nodes",plural:!0,selections:[o,{alias:null,args:null,concreteType:"ProjectV2",kind:"LinkedField",name:"project",plural:!1,selections:[o,u],storageKey:null}],storageKey:null}],storageKey:"projectItems(first:20)"},j={alias:null,args:[{kind:"Literal",name:"first",value:1}],concreteType:"IssueConnection",kind:"LinkedField",name:"subIssues",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null}],storageKey:"subIssues(first:1)"},w=[h,o],{fragment:{argumentDefinitions:[i,a,s],kind:"Fragment",metadata:null,name:"useIssueQueryQuery",selections:[{alias:null,args:r,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:l,concreteType:"Issue",kind:"LinkedField",name:"issue",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"useIssueQueryIssueContent",selections:[o,d,c,u,m,p,{alias:null,args:null,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[o,d,h,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:g,storageKey:null},y,x,{alias:null,args:null,concreteType:"Ref",kind:"LinkedField",name:"defaultBranchRef",plural:!1,selections:v,storageKey:null}],storageKey:null},{alias:null,args:b,concreteType:"UserConnection",kind:"LinkedField",name:"assignees",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nodes",plural:!0,selections:g,storageKey:null}],storageKey:"assignees(first:20)"},{alias:null,args:b,concreteType:"LabelConnection",kind:"LinkedField",name:"labels",plural:!1,selections:[{alias:null,args:null,concreteType:"Label",kind:"LinkedField",name:"nodes",plural:!0,selections:v,storageKey:null}],storageKey:"labels(first:20)"},{alias:null,args:null,concreteType:"Milestone",kind:"LinkedField",name:"milestone",plural:!1,selections:[u],storageKey:null},{alias:null,args:null,concreteType:"IssueType",kind:"LinkedField",name:"issueType",plural:!1,selections:v,storageKey:null},_,j],args:null,argumentDefinitions:[]}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[s,i,a],kind:"Operation",name:"useIssueQueryQuery",selections:[{alias:null,args:r,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:l,concreteType:"Issue",kind:"LinkedField",name:"issue",plural:!1,selections:[o,d,c,u,m,p,{alias:null,args:null,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[o,d,h,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},f,o],storageKey:null},y,x,{alias:null,args:null,concreteType:"Ref",kind:"LinkedField",name:"defaultBranchRef",plural:!1,selections:w,storageKey:null}],storageKey:null},{alias:null,args:b,concreteType:"UserConnection",kind:"LinkedField",name:"assignees",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nodes",plural:!0,selections:[f,o],storageKey:null}],storageKey:"assignees(first:20)"},{alias:null,args:b,concreteType:"LabelConnection",kind:"LinkedField",name:"labels",plural:!1,selections:[{alias:null,args:null,concreteType:"Label",kind:"LinkedField",name:"nodes",plural:!0,selections:w,storageKey:null}],storageKey:"labels(first:20)"},{alias:null,args:null,concreteType:"Milestone",kind:"LinkedField",name:"milestone",plural:!1,selections:[u,o],storageKey:null},{alias:null,args:null,concreteType:"IssueType",kind:"LinkedField",name:"issueType",plural:!1,selections:w,storageKey:null},_,j],storageKey:null},o],storageKey:null}]},params:{id:"74cdd586b6f12a28054626de37364e0a",metadata:{},name:"useIssueQueryQuery",operationKind:"query",text:null}});async function e0(e,t,n,i,a=!1){try{var s;let r=await (0,eZ.fetchQuery)(e,eX,{owner:t,name:n,number:i},{fetchPolicy:a?"network-only":"store-or-network"}).toPromise();if(r?.repository?.issue==null)return null;return s=r.repository.issue,(0,eZ.readInlineData)(eY,s)}catch(e){if("object"==typeof e&&null!=e&&"name"in e&&"ValidationError"===e.name&&"message"in e&&"string"==typeof e.message&&e.message.includes("NOT_FOUND"))return null;throw e}}eX.hash="a1c6e44ba1445bc4d870fb9c11487d4d";var e1=n(62670),e2=n(93997),e3=n(97286);function e4(e){let t,n,i,a,s=(0,K.c)(13),{repoId:r,filename:l}=e,o=(0,eZ.useRelayEnvironment)();return s[0]!==o?(t=JSON.stringify(o),s[0]=o,s[1]=t):t=s[1],s[2]!==l||s[3]!==r||s[4]!==t?(n=["copilot-immersive-template-payload",t,r,l],s[2]=l,s[3]=r,s[4]=t,s[5]=n):n=s[5],s[6]!==o||s[7]!==l||s[8]!==r?(i=async()=>r&&l?await e5(o,r,l):null,s[6]=o,s[7]=l,s[8]=r,s[9]=i):i=s[9],s[10]!==n||s[11]!==i?(a={queryKey:n,queryFn:i},s[10]=n,s[11]=i,s[12]=a):a=s[12],(0,e3.I)(a)}async function e5(e,t,n){let i=await (0,eZ.fetchQuery)(e,e1.d,{repoId:t,filename:n}).toPromise();return i&&i.node?(0,e2.EV)(i.node)??null:null}let e6=crypto.randomUUID();async function e7(e,t,n){let i={},a=new Map;if((0,eJ.YR)(n,e=>a.set(e.item.tag,e)),a.size>60)return i[e6]={errorMessages:["You cannot create more than 60 new issues at a time. Please remove some draft issues from the tree and try again."]},i;if(function e(t,n=0){if(n>7)return!0;if(!t.children||0===t.children.length)return!1;for(let i of t.children)if(e(i,n+1))return!0;return!1}(n))return i[e6]={errorMessages:["You cannot add more than 7 levels of sub-issues. Please remove some issues from the tree and try again."]},i;for(let[n,s]of a){let r=s.item;if(i[n]={errorMessages:[]},"new-issue"===r.type&&(!r.repository&&r.parentTag&&(r.repository=a.get(r.parentTag)?.item?.repository),!r.repository)){i[n].errorMessages.push("Repository is required");continue}let[l,o]=r.repository?.split("/")||[];if(!l||!o){i[n].errorMessages.push('Repository must be in the format "owner/repo"');continue}let d=await (0,eH.tZ)(e,l,o);if(!d){i[n].errorMessages.push("Repository not found");continue}if(d.isArchived){i[n].errorMessages.push("Repository is archived");continue}if(!d.hasIssuesEnabled){i[n].errorMessages.push("Repository does not have issues enabled");continue}if(d.viewerInteractionLimitReasonHTML){i[n].errorMessages.push(d.viewerInteractionLimitReasonHTML);continue}if(s.children.length>0&&(d.isLocked||!1===d.viewerCanPush&&d.viewerIssueCreationPermissions?.triageable===!1)){i[n].errorMessages.push("You do not have permission to create subissues in this repository");continue}if("existing-issue"===r.type){if(!r.number){i[n].errorMessages.push("Issue number is required");continue}let t=await e0(e,l,o,r.number);if(!t){i[n].errorMessages.push("Issue not found");continue}if(s.children.length>0){let e=t.subIssues?.totalCount??0,a=s.children.length;e+a>100&&i[n].errorMessages.push(`This issue already has ${e} sub-issue${1===e?"":"s"}. Adding ${a} more would exceed the maximum of 100 sub-issues.`)}continue}let c=r.template?.split("/").findLast(Boolean),u=c?await e5(e,d.id,c):void 0;if(r.template&&!u){i[n].errorMessages.push("Issue template not found");continue}if(!d.isBlankIssuesEnabled&&!u){i[n].errorMessages.push("Issue template is required");continue}let m=(0,eU.O_)(r.name);if(m.isValid||i[n].errorMessages.push(m.errorMessage||"Issue title is invalid"),u&&(0,eq.GQ)(u.data)){t.current=null;let a=document.createElement("div"),s=(0,eQ.H)(a);if((0,eK.flushSync)(()=>{s.render((0,z.jsx)(eG.c,{partialName:"copilot-creates-issues-bulk-validation",wasServerRendered:!1,children:(0,z.jsx)(ez.mf,{environment:e,children:(0,z.jsx)(e9,{repository:d,draftIssue:r,template:u,outputRef:t})})}))}),!t.current)throw Error("IssueFormRef is not set");let l=t.current;try{if(l.getInvalidInputs().length>0){i[n].errorMessages.push("Invalid form input");continue}r.body=l.markdown()}finally{l.clearSessionStorage(),s.unmount(),a.remove()}}let p=(0,eU.QK)(r.body??"");p.isValid||i[n].errorMessages.push(p.errorMessage||"Issue body is invalid")}return i}function e9(e){let t,n,i=(0,K.c)(10),{repository:a,draftIssue:s,template:r,outputRef:l}=e,o=`${a.owner.login}/${a.name}`;i[0]!==a.databaseId||i[1]!==a.slashCommandsEnabled||i[2]!==o?(t={type:"issue",repository:{databaseId:a.databaseId,nwo:o,slashCommandsEnabled:a.slashCommandsEnabled}},i[0]=a.databaseId,i[1]=a.slashCommandsEnabled,i[2]=o,i[3]=t):t=i[3];let d=t;if(!(0,eq.GQ)(r.data))return;let c=`copilot-creates-issues:${s.tag}`;return i[4]!==s.defaultValuesById||i[5]!==l||i[6]!==d||i[7]!==c||i[8]!==r.data?(n=(0,z.jsx)(eW.Z,{outputRef:l,issueFormRef:r.data,subject:d,sessionStorageKey:c,defaultValuesById:s.defaultValuesById}),i[4]=s.defaultValuesById,i[5]=l,i[6]=d,i[7]=c,i[8]=r.data,i[9]=n):n=i[9],n}try{e6.displayName||(e6.displayName="TREE_ERROR_KEY")}catch{}try{e9.displayName||(e9.displayName="IssueFormWrapper")}catch{}var e8=n(50467),te=n(17855),tt=n(72994),tn=n(69599),ti=n(94747),ta=n(96379);let ts={fragment:{argumentDefinitions:[N={defaultValue:null,kind:"LocalArgument",name:"name"},C={defaultValue:null,kind:"LocalArgument",name:"owner"}],kind:"Fragment",metadata:null,name:"useRepositoryDefaultBranchQuery",selections:[{alias:null,args:S=[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"owner",variableName:"owner"}],concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:null,concreteType:"Ref",kind:"LinkedField",name:"defaultBranchRef",plural:!1,selections:[I={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[C,N],kind:"Operation",name:"useRepositoryDefaultBranchQuery",selections:[{alias:null,args:S,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:null,concreteType:"Ref",kind:"LinkedField",name:"defaultBranchRef",plural:!1,selections:[I,k={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},k],storageKey:null}]},params:{id:"cc890d4a355bf52f7d7b18263e22f595",metadata:{},name:"useRepositoryDefaultBranchQuery",operationKind:"query",text:null}};ts.hash="606cda456dcdccbb61e31c769c1ea96c";var tr=n(69487);let tl=async(e,t,n)=>{let i=await (0,tr.fetchQuery)(e,ts,{owner:t,name:n},{fetchPolicy:"store-or-network"}).toPromise();return i?.repository?.defaultBranchRef?.name||null};var to=n(16049),td=n(73952);function tc(){let e,t,n=(0,K.c)(4),{messages:i}=(0,Q.Pk)();n[0]!==i?(e=(0,td.B)(i),n[0]=i,n[1]=e):e=n[1];let a=e;return n[2]!==a?(t=(e,t)=>null==e?Promise.resolve(t):tu(t,e.databaseId,a[0]?.threadID),n[2]=a,n[3]=t):t=n[3],t}async function tu(e,t,n){let i=e.match(/(!\[.*\]\(https:\/\/(?:.+\.)?github\.com\/github-copilot\/chat\/attachments\/[0-9a-fA-F-]+\))/g),a=new Set;for(let e of i||[]){let t=e.match(/https:\/\/(?:.+\.)?github\.com\/github-copilot\/chat\/attachments\/[0-9a-fA-F-]+/)?.[0];t&&a.add(t)}if(a.size>0){let i=Array.from(a).map(async e=>{let t=await fetch(e),n=await t.blob(),i=n.type.split("/")[1],a=`copilot-image.${i}`,s=await createImageBitmap(n),r=s.width;return s.close(),{file:new File([n],a,{type:n.type}),url:e,width:r}}),s=await Promise.all(i);for(let n of(await Promise.all(s.map(async e=>{if(e)return{uploadedFile:await (0,to.QM)(e.file,t?.toString()),originalUrl:e.url,width:e.width}}))))if(n){let{uploadedFile:t,originalUrl:i,width:a}=n,s=t.url;if(s){let t=RegExp(`!\\[(.*?)\\]\\(${i}\\)`,"g");e=e.replace(t,`<img alt="$1" width="${a}" src="${s}" />`)}}(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_CREATED_IMAGES",mode:"immersive",imageCount:a.size,threadId:n})}return e}function tm(e){return e.item.tag}function tp(e){return e.item.tag}async function th(e,t){if(!(0,tn.G7)("copilot_api_bulk_create_agent_assignments")||!e.assignees?.some(e=>(0,te.v)(e)))return;let[n,i]=e.repository.split("/"),a=await tl(t,n,i);if(a)return{target_repo:e.repository,base_ref:a}}function tf(e){return!e.state.error&&e.state.data?.job.state!=="success"&&e.state.data?.job.state!=="error"&&2e3}var tg=n(51213),ty=n(72303),tx=n(20382);let tv={project:"Project assignment errors",dependency:"Dependency errors",update:"Partial update errors",other:"Other errors"};function tb(){let e,t=(0,K.c)(8),n=(0,Z.b)(),i=(0,Q.Pk)(),{closeItems:a,openItem:s,openPreviewPane:r,versionedItems:l,updateItem:o}=(0,eb.xx)();return t[0]!==a||t[1]!==n||t[2]!==s||t[3]!==r||t[4]!==i||t[5]!==o||t[6]!==l?(e=async e=>{if(0===e.length)return;let t=e.find(tT)??e[0];(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUES_SAVED",mode:"immersive",threadId:(0,ty.W)(i)?.id,chatReferrer:document.referrer,repositoryId:t.repository.databaseId,draftType:t.draftType,issueTag:t.tag,issueNumber:t.number,templateType:t.template?t.template.endsWith(".md")?"markdown":"yaml":"none",issuesWithCopilotAssigned:e.filter(tI).length,savedIssuesCount:e.length});let d=[],c=[],u=[];for(let t of e){let n=t.repository.owner.login,i=t.repository.name,a=t.number;o({type:"issue",id:tL(t),messageId:tg.Wp,name:t.title,owner:n,repo:i,number:a,href:t.url});let s=e.find(e=>e.tag===t.parentTag),r=t.blockedByTags?.map(t=>e.find(e=>e.tag===t)).filter(tS),l=t.isBlockingTags?.map(t=>e.find(e=>e.tag===t)).filter(tC),m=r?.length?r.map(tN):void 0,p=l?.length?l.map(tw):void 0;c.push({tag:`${n}/${i}#${a}`,parentTag:s?tR(s):void 0,blockedByTags:m,isBlockingTags:p,title:t.title,repository:`${t.repository.owner.login}/${t.repository.name}`,number:t.number,state:"open",url:t.url}),d.push(tE(t)),u.push(t.tag)}a(e.map(tj).flatMap(e=>l.get(e)??[])),s(tL(t)),r();let m=[{type:"text",name:`timeline-event: {"type": "issue-saved", "markdownContent": "${function(e){if(e.length>1)return`Saved ${e.length} issues`;{let t=e[0],n=tE(t),i="new-issue"===t.draftType?"Created":"Updated";return`${i} issue ${n}`}}(e)}"}`,text:`${e.length>1?"Fetch the details for all saved issues and return them in a code block with YAML following this example format:":"Fetch the issue details and return them in a code block with YAML following this example format:"}
\`\`\`\`yaml type="issue-tree"
${(0,tx.Bh)({data:c},{forceQuotes:!0,noArrayIndent:!0,lineWidth:-1})}\`\`\`\``},{type:"text",name:"ignore-obsolete-drafts",text:`From now on, you should only interact with these newly saved issues and not their corresponding drafts. You MUST exclude the draft issues with the following tags from any future tree creation: ${u.join(", ")}`},...i.currentReferences],p=e.flatMap(t_);p.length&&m.push({type:"text",name:"summarize-continuable-errors",text:`These issues were saved with some errors. You MUST give a high-level summary of these errors at the end of your message in the language used in the conversation. Always prefix it with the word "Note:" in bold for visibility. Be clear but succinct. Here are the errors, grouped by type:
${function(e){let t={};for(let n of e){let e=tv[n.type]||"Other errors";t[e]||(t[e]=[]),t[e].push(n.message)}return Object.entries(t).map(([e,t])=>`${e}:
${t.map(e=>`- ${e}`).join(`
`)}
`).join(`
`)}(p)}`});let h=d.length>1?`Saved the issues: ${d.join(", ")}`:`Saved the issue: ${d[0]}`;await n.sendChatMessage({thread:(0,ty.W)(i),content:h,references:m,topic:i.currentTopic,context:i.context,customInstructions:i.customInstructions,model:i.model})},t[0]=a,t[1]=n,t[2]=s,t[3]=r,t[4]=i,t[5]=o,t[6]=l,t[7]=e):e=t[7],e}function t_(e){return e.errors||[]}function tj(e){return`${e.draftType}:${e.tag}`}function tw(e){return tR(e)}function tN(e){return tR(e)}function tC(e){return null!=e}function tS(e){return null!=e}function tI(e){return e.assignees.some(tk)}function tk(e){return(0,te.v)(e)}function tT(e){return!e.parentTag}function tE(e){return`[${tR(e)}](${e.url})`}function tR(e){let t=e.repository.owner.login,n=e.repository.name,i=e.number;return`${t}/${n}#${i}`}function tL(e){let t=e.repository.owner.login,n=e.repository.name,i=e.number;return`issue:${t}/${n}/${i}`}let CreateError=class CreateError extends Error{constructor(e){super(e),(0,e8._)(this,"type",void 0),(0,e8._)(this,"bannerTitle",void 0),(0,e8._)(this,"bannerVariant",void 0),this.name="CreateError",this.type="creation",this.bannerTitle="Errors in issue creation",this.bannerVariant="critical"}};let ValidationError=class ValidationError extends Error{constructor(e){super(e),(0,e8._)(this,"type",void 0),(0,e8._)(this,"bannerTitle",void 0),(0,e8._)(this,"bannerVariant",void 0),this.name="ValidationError",this.type="validation",this.bannerTitle="Validation errors in issue content",this.bannerVariant="warning"}};function tA(e){let t,n,i,a,s,r,l,o,d=(0,K.c)(34),{issueNode:c,onComplete:u,onError:m,issueFormRef:p,issueTemplate:h}=e;d[0]!==p||d[1]!==c||d[2]!==h?(t={issueNode:c,issueFormRef:p,issueTemplate:h},d[0]=p,d[1]=c,d[2]=h,d[3]=t):t=d[3];let{mutate:f,isLoading:g,data:y,isComplete:x,isError:v,error:b}=function(e){var t;let n,i,a,s,r,l,o,d,c=(0,K.c)(15),{issueNode:u,issueFormRef:m,issueTemplate:p}=e;c[0]!==m||c[1]!==u||c[2]!==p?(l={issueNode:u,issueFormRef:m,issueTemplate:p},c[0]=m,c[1]=u,c[2]=p,c[3]=l):l=c[3];let h=function(e){let t,n,i,a=(0,K.c)(12),{issueNode:s,issueFormRef:r,issueTemplate:l}=e,o=(0,eZ.useRelayEnvironment)(),d=tc(),c=!s.parent&&0===s.children.length;return a[0]!==s.item.tag?(t=["copilot-issues-bulk-create",s.item.tag],a[0]=s.item.tag,a[1]=t):t=a[1],a[2]!==o||a[3]!==c||a[4]!==r||a[5]!==s||a[6]!==l||a[7]!==d?(n=async()=>{let e=[],t=new Map;await (0,eJ.Pq)(s,async n=>{let i=n.item;if("existing-issue"===i.type)return void e.push({tag:i.tag,parent_tag:i.parentTag,repository_nwo:i.repository,number:i.number,blocked_by_tags:n.blockedBy.length?n.blockedBy.map(tp):void 0});let a=i.body;if(c&&l&&(0,eq.GQ)(l.data)&&r?.current&&(a=r.current.markdown()??i.body),a&&i.repository){let e=t.get(i.repository);if(!e){let[n,a]=i.repository.split("/");null!=n&&null!=a&&(e=await (0,eH.tZ)(o,n,a),t.set(i.repository,e))}a=await d(e,a)}e.push({title:i.name,tag:i.tag,repository_nwo:i.repository,body:a,parent_tag:i.parentTag,labels:i.labels,assignees:i.assignees,milestone:i.milestone,issue_type:i.issueType,template:l?.fileName,projects:(0,tt.t)(i.projects),blocked_by_tags:n.blockedBy.length?n.blockedBy.map(tm):void 0,agent_assignment:await th(i,o)})});let n=await (0,ta.Sr)("/copilot_issues/bulk_create",{method:"POST",body:{data:{issues:e}}});if(429===n.status)throw Error((await n.json()).error||"Rate limit exceeded. Please try again later.");if(!n.ok)throw Error((await n.json()).error.message||"Failed to create issues.");return await n.json()},a[2]=o,a[3]=c,a[4]=r,a[5]=s,a[6]=l,a[7]=d,a[8]=n):n=a[8],a[9]!==t||a[10]!==n?(i={mutationKey:t,mutationFn:n},a[9]=t,a[10]=n,a[11]=i):i=a[11],(0,ti.n)(i)}(l),f=(t=h.data?.jobStatusUrl,s=(0,K.c)(7),r=!!t,s[0]!==t?(n=["copilot-issues-bulk-create-status",t],i=async e=>{let n=await (0,ta.Sr)(t);if(!n.ok){let t=await n.json();throw e.client.setQueryData(e.queryKey,t),Error(t?.job.error_message||"Failed to fetch job status")}return await n.json()},s[0]=t,s[1]=n,s[2]=i):(n=s[1],i=s[2]),s[3]!==r||s[4]!==n||s[5]!==i?(a={enabled:r,queryKey:n,queryFn:i,refetchInterval:tf},s[3]=r,s[4]=n,s[5]=i,s[6]=a):a=s[6],(0,e3.I)(a)),g=h.error||f.error,y=h.isError||f.isError;c[4]!==h.isPending||c[5]!==f.data?.job.state||c[6]!==f.isLoading?(o=h.isPending||f.isLoading||["pending","queued","started"].includes(f.data?.job.state||""),c[4]=h.isPending,c[5]=f.data?.job.state,c[6]=f.isLoading,c[7]=o):o=c[7];let x=f.data?.job.state==="success";return c[8]!==h.mutate||c[9]!==f.data||c[10]!==g||c[11]!==y||c[12]!==o||c[13]!==x?(d={mutate:h.mutate,data:f.data,error:g,isError:y,isLoading:o,isComplete:x},c[8]=h.mutate,c[9]=f.data,c[10]=g,c[11]=y,c[12]=o,c[13]=x,c[14]=d):d=c[14],d}(t),_=tb();d[4]!==p||d[5]!==c||d[6]!==h||d[7]!==m?(n=()=>{let e;if(!c)return!1;let t=c.item;if("new-issue"!==t.type)return!0;let n=t.name||"",i=(0,eU.O_)(n);if(!i.isValid)return m?.(new ValidationError(i.errorMessage||"Issue title is invalid")),!1;let a=(0,eU.QK)(t.body||"");if(!a.isValid)return m?.(new ValidationError(a.errorMessage||"Issue body is invalid")),!1;if(h&&(0,eq.GQ)(h.data)&&p.current){let t=p.current.getInvalidInputs();if(t.length>0)return e=t[0],m?.(new ValidationError("Please fix the validation errors in the form")),e?.focus(),!1}return!0},d[4]=p,d[5]=c,d[6]=h,d[7]=m,d[8]=n):n=d[8];let j=n;d[9]!==x||d[10]!==g||d[11]!==c||d[12]!==f||d[13]!==j?(i=()=>{!g&&!x&&(c.parent||0!==c.children.length||j())&&f()},d[9]=x,d[10]=g,d[11]=c,d[12]=f,d[13]=j,d[14]=i):i=d[14];let w=i,N=tD;return d[15]!==b||d[16]!==v||d[17]!==m?(a=()=>{v&&b&&m?.(new CreateError(b.message))},s=[v,b,m],d[15]=b,d[16]=v,d[17]=m,d[18]=a,d[19]=s):(a=d[18],s=d[19]),(0,ep.useEffect)(a,s),d[20]!==y||d[21]!==x||d[22]!==c||d[23]!==u||d[24]!==_?(r=()=>{if(!y||!x)return;let e=N(y,c);u(),_(e)},l=[y,x,c,u,_,N],d[20]=y,d[21]=x,d[22]=c,d[23]=u,d[24]=_,d[25]=r,d[26]=l):(r=d[25],l=d[26]),(0,ep.useEffect)(r,l),d[27]!==y||d[28]!==b||d[29]!==w||d[30]!==x||d[31]!==v||d[32]!==g?(o={handleCreate:w,isLoading:g,isComplete:x,isError:v,error:b,data:y},d[27]=y,d[28]=b,d[29]=w,d[30]=x,d[31]=v,d[32]=g,d[33]=o):o=d[33],o}function tD(e,t){if(!e||0===e.job.completed_issues.length)return[];let n=new Map;return(0,eJ.Pt)(t,e=>{n.set(e.item.tag,e.item)}),e.job.completed_issues.map(e=>{let t=n.get(e.tag),[i,a]=t.repository.split("/");return{draftType:t.type,tag:e.tag,parentTag:t.parentTag,blockedByTags:t.blockedByTags,isBlockingTags:t.isBlockingTags,template:"new-issue"===t.type?t.template:void 0,repository:{databaseId:e.repository_id,name:a,owner:{login:i}},number:e.number,title:t.name,url:e.href,assignees:"assignees"in t?t.assignees??[]:[],errors:e.errors||[]}})}function tP({issueNode:e,onComplete:t,onCancel:n}){let i=(0,ep.useMemo)(()=>{let t=e;for(;t?.parent;)t=t.parent;return t},[e]),a=(0,ep.useMemo)(()=>{let e=0;return(0,eJ.YR)(i,t=>{"new-issue"===t.item.type&&e++}),e},[i]),{handleCreate:s,isLoading:r,isComplete:l,isError:o,error:d,data:c}=tA({issueNode:i,onComplete:t}),{loading:u,result:m}=function(e){let t,n,i,a,s=(0,K.c)(8),[r,l]=(0,ep.useState)(!1);s[0]===Symbol.for("react.memo_cache_sentinel")?(t={},s[0]=t):t=s[0];let[o,d]=(0,ep.useState)(t),c=(0,eZ.useRelayEnvironment)(),u=(0,ep.useRef)(null);return s[1]!==c||s[2]!==e?(n=()=>{!async function(){l(!0),d(await e7(c,u,e)),l(!1)}()},i=[c,e],s[1]=c,s[2]=e,s[3]=n,s[4]=i):(n=s[3],i=s[4]),(0,ep.useEffect)(n,i),s[5]!==r||s[6]!==o?(a={loading:r,result:o},s[5]=r,s[6]=o,s[7]=a):a=s[7],a}(i),p=(0,ep.useMemo)(()=>m&&Object.values(m).some(e=>e.errorMessages.length>0),[m]),h=(0,ep.useCallback)(()=>{r||l||n()},[r,l,n]),f=(0,ep.useMemo)(()=>{let e=new Set;return((0,eJ.YR)(i,t=>e.add(t.item.type)),1===e.size&&"existing-issue"===i.item.type)?{title:"Update existing issues?",description:"Clicking Update will update the relationships between the issues shown below.",button:"Update issues"}:e.size>1&&"existing-issue"===i.item.type?{title:"Create all linked draft issues?",description:"Clicking Create will publish all Copilot draft issues shown below. Existing sub-issues aren't displayed and remain unchanged.",button:1===a?"Create 1 issue":`Create ${a} issues`}:e.size>1&&"new-issue"===i.item.type?{title:"Create all linked draft issues?",description:"Clicking Create will publish the Copilot draft issues shown below.",button:1===a?"Create 1 issue":`Create ${a} issues`}:{title:"Create all linked draft issues?",description:"These drafts are linked. Creating a sub-issue automatically publishes its parent and any nested drafts.",button:1===a?"Create 1 issue":`Create ${a} issues`}},[i,a]),{openItem:g,openPreviewPane:y}=(0,eb.xx)(),x=(0,ep.useCallback)(e=>{r||l||(g(e.item.id,!0),y(),n())},[l,r,n,g,y]),v=(0,ep.useMemo)(()=>m[e6]?m[e6]?.errorMessages[0]:"Fill out missing required fields to create all of these issues.",[m]);return(0,z.jsx)(eO.l,{title:f.title,onClose:h,renderFooter:()=>u?null:(0,z.jsxs)(eO.l.Footer,{className:"BulkCreateDialog-module__dialogFooter--aWAd9",children:[(0,z.jsx)("div",{className:"BulkCreateDialog-module__dialogFooterStatus--RMt1N",children:o&&(0,z.jsx)(eM.v,{variant:"critical",children:d?.message})}),(0,z.jsxs)("div",{className:"BulkCreateDialog-module__dialogFooterActions--BvuR4",children:[(0,z.jsx)(eB.Q,{variant:"default",onClick:h,inactive:r||l,children:"Cancel"}),(0,z.jsx)(eB.Q,{variant:"primary",onClick:s,loading:r||l,disabled:p||o,children:f.button})]})]}),children:u?(0,z.jsx)("div",{className:"BulkCreateDialog-module__loadingIndicator--sRZcS",role:"status","aria-label":"Validating issues",children:(0,z.jsx)(eF.A,{})}):p?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(eI.l,{variant:"warning",hideTitle:!0,title:"Validation errors",description:v,className:"mb-3"}),(0,z.jsx)(tO,{issueNode:i,onNodeClick:x,statusSelector:e=>{let t=m[e.item.tag]?.errorMessages[0];if(t)return{trailingVisual:(0,z.jsx)(er.AlertIcon,{className:"fgColor-attention","data-testid":`warning-icon-${e.item.tag}`}),description:(0,z.jsx)("span",{className:"fgColor-attention",children:t})}}})]}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("p",{children:f.description}),(0,z.jsx)(tO,{issueNode:i,onNodeClick:x,statusSelector:e=>({trailingVisual:c?.job.completed_issues.some(t=>t.tag===e.item.tag)&&(0,z.jsx)(er.CheckIcon,{className:"fgColor-success","data-testid":`success-icon-${e.item.tag}`})})})]})})}function tO({issueNode:e,onNodeClick:t,statusSelector:n}){let{versionedItems:i}=(0,eb.xx)(),a=(0,ep.useMemo)(()=>{let t=0;return(0,eJ.YR)(e,e=>{e.parent&&t++}),t},[e]),s=e=>e.blockedBy.map(e=>({title:e.item.name??"",onClick:()=>{t(e)}})),r=e=>{let a=(0,eL.LU)(e.item.id,i),l=n?.(e);return(0,z.jsx)(e$.K.Item,{title:e.item.name,leadingVisual:(0,z.jsx)(eV.n,{...e.item}),trailingBadge:(0,z.jsxs)(z.Fragment,{children:[null!=a?(0,z.jsx)(eR.g,{version:a}):void 0,(0,z.jsx)(tF,{node:e})]}),trailingVisual:l?.trailingVisual,description:l?.description,onClick:()=>t(e),blockedBy:s(e),children:e.children.map(r)},e.item.tag)},l=(0,eL.LU)(e.item.id,i),o=n?.(e);return(0,z.jsxs)(e$.K,{subIssueHeaderText:"existing-issue"===e.item.type?"New sub-issues":void 0,subIssueCount:a,hasTrailingVisuals:!0,children:[(0,z.jsx)(e$.K.RootItem,{title:e.item.name,leadingVisual:(0,z.jsx)(eV.n,{...e.item}),trailingBadge:(0,z.jsxs)(z.Fragment,{children:[null!=l?(0,z.jsx)(eR.g,{version:l}):void 0,(0,z.jsx)(tF,{node:e})]}),trailingVisual:o?.trailingVisual,description:o?.description,onClick:()=>t(e),blockedBy:s(e)}),e.children.map(r)]})}function tF(e){let t,n=(0,K.c)(2),{node:i}=e;if(i.item.repository&&i.item.repository!==i.parent?.item.repository)return n[0]!==i.item.repository?(t=(0,z.jsx)("span",{className:"fgColor-muted",children:i.item.repository}),n[0]=i.item.repository,n[1]=t):t=n[1],t}try{tP.displayName||(tP.displayName="BulkCreateDialog")}catch{}try{tO.displayName||(tO.displayName="IssueTree")}catch{}try{tF.displayName||(tF.displayName="IssueLocation")}catch{}function tB(e){let t,n,i,a,s,r=(0,K.c)(11),{issueNode:l,disabled:o,onSuccess:d}=e,c=void 0!==o&&o,[u,m]=(0,ep.useState)(!1),p=l;for(;p?.parent;)p=p.parent;let h=p,f=new Set;(0,eJ.YR)(h,e=>f.add(e.item.type));e:{if(1===f.size&&f.has("existing-issue")){t="Review and update";break e}t="Review and create"}let g=t;return f.size>1&&"existing-issue"===l.item.type?null:(r[0]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{e.preventDefault(),m(!0)},r[0]=n):n=r[0],r[1]!==g||r[2]!==c?(i=(0,z.jsx)(eP.cQ,{commandId:"github:submit-form",variant:"primary",disabled:c,"data-testid":"create-bulk-issue-dialog-button",showKeybindingHint:!0,onClick:n,children:g}),r[1]=g,r[2]=c,r[3]=i):i=r[3],r[4]!==d||r[5]!==h||r[6]!==u?(a=u&&(0,z.jsx)(tP,{issueNode:h,onComplete:()=>{m(!1),d()},onCancel:()=>{m(!1)}}),r[4]=d,r[5]=h,r[6]=u,r[7]=a):a=r[7],r[8]!==i||r[9]!==a?(s=(0,z.jsxs)(z.Fragment,{children:[i,a]}),r[8]=i,r[9]=a,r[10]=s):s=r[10],s)}try{tB.displayName||(tB.displayName="BulkCreateButton")}catch{}function tM(e){let t,n,i,a,s,r,l=(0,K.c)(29),{issueTemplate:o,issueNode:d,issueFormRef:c,noRepoAccess:u,onClose:m,onError:p,onClearError:h}=e,f=void 0!==u&&u,[g,y]=ep.useState(!1),x=ep.useRef(null),[v,b]=ep.useState(!1),{repository:_}=(0,eD.u)(),j=_&&!o&&!_.isBlankIssuesEnabled,{clearSessionData:w}=(0,eD.u)();l[0]!==w||l[1]!==c?(t=()=>{w(),c.current?.clearSessionStorage()},l[0]=w,l[1]=c,l[2]=t):t=l[2];let N=t;l[3]!==N||l[4]!==m?(n=()=>{N(),m?.(),b(!1)},l[3]=N,l[4]=m,l[5]=n):n=l[5];let C=n;l[6]!==p?(i=e=>{p?.(e),b(!1)},l[6]=p,l[7]=i):i=l[7];let S=i;l[8]!==C||l[9]!==S||l[10]!==c||l[11]!==d||l[12]!==o?(a={issueNode:d,onComplete:C,onError:S,issueFormRef:c,issueTemplate:o},l[8]=C,l[9]=S,l[10]=c,l[11]=d,l[12]=o,l[13]=a):a=l[13];let{handleCreate:I}=tA(a);if(d?.parent||d?.children.length){let e;return l[14]!==C||l[15]!==d||l[16]!==f?(e=(0,z.jsx)(tB,{issueNode:d,disabled:f,onSuccess:C}),l[14]=C,l[15]=d,l[16]=f,l[17]=e):e=l[17],e}if(!_||!_.hasIssuesEnabled)return null;if(j){let e,t,n;return l[18]===Symbol.for("react.memo_cache_sentinel")?(e=(0,z.jsx)(eP.cQ,{commandId:"github:submit-form",variant:"primary","data-testid":"create-issue-dialog-button",ref:x,showKeybindingHint:!0,onClick:e=>{e.preventDefault(),y(!0)},children:"Create"}),l[18]=e):e=l[18],l[19]!==g?(t=g&&(0,z.jsx)(eO.l,{title:"Select a template",onClose:()=>y(!1),footerButtons:[{buttonType:"primary",content:"OK",onClick:()=>y(!1)}],returnFocusRef:x,children:"This repository requires all issues to have a template. To create this issue, first select the appropriate template from the template dropdown."}),l[19]=g,l[20]=t):t=l[20],l[21]!==t?(n=(0,z.jsxs)(z.Fragment,{children:[e,t]}),l[21]=t,l[22]=n):n=l[22],n}return l[23]!==I||l[24]!==h?(s=e=>{e.preventDefault(),h?.(),b(!0),I()},l[23]=I,l[24]=h,l[25]=s):s=l[25],l[26]!==v||l[27]!==s?(r=(0,z.jsx)(z.Fragment,{children:(0,z.jsx)(eP.cQ,{commandId:"github:submit-form",variant:"primary","data-testid":"single-create-issue-button",ref:x,inactive:v,showKeybindingHint:!0,onClick:s,children:"Create"})}),l[26]=v,l[27]=s,l[28]=r):r=l[28],r}try{tM.displayName||(tM.displayName="CreateIssueButton")}catch{}var tV=n(89659),t$=n(73189),tU=n(38447),tq=n(15106),tW=n(66457),tH=n(58321),tG=n(921),tz=n(85391),tK=n(97764),tQ=n(46036),tZ=n(43063),tJ=n(57478);function tY(e){let t,n,i,a,s,r,l,o,d,c,u=(0,K.c)(32),{listItem:m,actions:p}=e,{openItem:h,versionedItems:f}=(0,eb.xx)(),{item:g}=m;u[0]!==g.id||u[1]!==f?(t=(0,eL.LU)(g.id,f),u[0]=g.id,u[1]=f,u[2]=t):t=u[2];let y=t,x=g.tag;if(u[3]!==g.id||u[4]!==h?(n=()=>h(g.id,!0),u[3]=g.id,u[4]=h,u[5]=n):n=u[5],u[6]!==g.tag||u[7]!==y?(i=null!=y?[(0,z.jsx)(eR.g,{version:y},`${g.tag}#${y}`)]:void 0,u[6]=g.tag,u[7]=y,u[8]=i):i=u[8],u[9]!==g.name||u[10]!==n||u[11]!==i?(a=(0,z.jsx)(tK.T,{value:g.name,onClick:n,trailingBadges:i}),u[9]=g.name,u[10]=n,u[11]=i,u[12]=a):a=u[12],u[13]===Symbol.for("react.memo_cache_sentinel")?(s=[],u[13]=s):s=u[13],u[14]!==p||u[15]!==g){let e;u[17]!==g?(e=e=>({key:e.key,render:()=>(0,z.jsxs)(ec.l.Item,{onSelect:()=>e.onSelect(g),children:[(0,z.jsx)(ec.l.LeadingVisual,{children:e.icon}),e.label]},`${g.tag}-${e.key}`)}),u[17]=g,u[18]=e):e=u[18],r=p.map(e),u[14]=p,u[15]=g,u[16]=r}else r=u[16];return u[19]!==r?(l=(0,z.jsx)(tH.o,{actions:s,staticMenuActions:r}),u[19]=r,u[20]=l):l=u[20],u[21]!==p||u[22]!==m.children?(o=m.children?.length?m.children?.map(e=>(0,z.jsx)(tY,{listItem:e,actions:p},e.item.tag)):void 0,u[21]=p,u[22]=m.children,u[23]=o):o=u[23],u[24]!==g?(d=(0,z.jsx)(tG.Q,{children:(0,z.jsx)(tz.D,{children:(0,z.jsx)(eV.n,{...g})})}),u[24]=g,u[25]=d):d=u[25],u[26]!==g.tag||u[27]!==d||u[28]!==a||u[29]!==l||u[30]!==o?(c=(0,z.jsx)(tW.r,{title:a,secondaryActions:l,subItems:o,defaultExpanded:!0,children:d},x),u[26]=g.tag,u[27]=d,u[28]=a,u[29]=l,u[30]=o,u[31]=c):c=u[31],c}function tX(e){let t,n,i,a,s,r=(0,K.c)(15),{title:l,items:o,totalCount:d,actions:c}=e;if(0===o.length)return null;if(r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,em.$)("RelationshipList-module__container--djndN","mt-2 pb-1 border rounded-2"),r[0]=t):t=r[0],r[1]!==d?(n=(0,z.jsx)(tJ.A,{children:d}),r[1]=d,r[2]=n):n=r[2],r[3]!==n||r[4]!==l?(i=(0,z.jsx)(tQ.s,{title:(0,z.jsx)(tZ.c,{title:l,className:"p-0",children:n}),className:"border-0 bgColor-default px-3"}),r[3]=n,r[4]=l,r[5]=i):i=r[5],r[6]!==c||r[7]!==o){let e;r[9]!==c?(e=e=>(0,z.jsx)(tY,{listItem:e,actions:c},e.item.tag),r[9]=c,r[10]=e):e=r[10],a=o.map(e),r[6]=c,r[7]=o,r[8]=a}else a=r[8];return r[11]!==i||r[12]!==a||r[13]!==l?(s=(0,z.jsx)("div",{className:t,children:(0,z.jsx)(tq.v,{title:l,header:i,children:a})}),r[11]=i,r[12]=a,r[13]=l,r[14]=s):s=r[14],s}try{tY.displayName||(tY.displayName="RelationshipListItemComponent")}catch{}try{tX.displayName||(tX.displayName="RelationshipList")}catch{}function t0(){let e,t=(0,K.c)(4),n=(0,Z.b)(),i=(0,Q.Pk)(),{updateItem:a}=(0,eb.xx)();return t[0]!==n||t[1]!==i||t[2]!==a?(e=async(e,t)=>{(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_REMOVE_DEPENDENCY",mode:"immersive",threadId:(0,ty.W)(i)?.id,chatReferrer:document.referrer,issueTag:e.tag,issueRepository:e.repository,blockingIssueTag:t.tag});let s={type:"text",name:`timeline-event: {"type": "remove-dependency", "markdownContent": "Removed dependency on '${t.name}'"}`,text:`Remove the dependency between '${e.tag}' and '${t.tag}'. Return the updated issues.`},r={...e,blockedByTags:e.blockedByTags?.filter(e=>e!==t.tag),isUserEdited:!1};a(r);let l={...t,isBlockingTags:t.isBlockingTags?.filter(t=>t!==e.tag),isUserEdited:!1};a(l);let o=[r,l].map(t1);await n.sendChatMessage({thread:(0,ty.W)(i),content:"Remove the blocking dependency from the issue",references:[s,...o],topic:i.currentTopic,context:i.context,customInstructions:i.customInstructions,model:i.model})},t[0]=n,t[1]=i,t[2]=a,t[3]=e):e=t[3],e}function t1(e){return"existing-issue"===e.type?(0,eL.yA)(e):(0,eL.PO)(e)}function t2(e){let t,n,i,a,s,r=(0,K.c)(11),{issueNode:l}=e,o=t0();e:{if("existing-issue"===l.item.type){t="Newly blocked by";break e}t="Blocked by"}let d=t;return r[0]!==l.blockedBy?(n=l.blockedBy.map(t3),r[0]=l.blockedBy,r[1]=n):n=r[1],r[2]===Symbol.for("react.memo_cache_sentinel")?(i=(0,z.jsx)(er.UnlinkIcon,{}),r[2]=i):i=r[2],r[3]!==l.item||r[4]!==o?(a=[{key:"unlink",label:"Remove dependency",icon:i,onSelect:e=>{o(l.item,e)}}],r[3]=l.item,r[4]=o,r[5]=a):a=r[5],r[6]!==l.blockedBy.length||r[7]!==n||r[8]!==a||r[9]!==d?(s=(0,z.jsx)(tX,{title:d,items:n,totalCount:l.blockedBy.length,actions:a}),r[6]=l.blockedBy.length,r[7]=n,r[8]=a,r[9]=d,r[10]=s):s=r[10],s}function t3(e){return{item:e.item}}try{t2.displayName||(t2.displayName="BlockedByList")}catch{}function t4(e){let t,n,i,a,s,r=(0,K.c)(11),{issueNode:l}=e,o=t0();e:{if("existing-issue"===l.item.type){t="Newly blocking";break e}t="Is blocking"}let d=t;return r[0]!==l.isBlocking?(n=l.isBlocking.map(t5),r[0]=l.isBlocking,r[1]=n):n=r[1],r[2]===Symbol.for("react.memo_cache_sentinel")?(i=(0,z.jsx)(er.UnlinkIcon,{}),r[2]=i):i=r[2],r[3]!==l.item||r[4]!==o?(a=[{key:"unlink",label:"Remove dependency",icon:i,onSelect:e=>{o(e,l.item)}}],r[3]=l.item,r[4]=o,r[5]=a):a=r[5],r[6]!==l.isBlocking.length||r[7]!==n||r[8]!==a||r[9]!==d?(s=(0,z.jsx)(tX,{title:d,items:n,totalCount:l.isBlocking.length,actions:a}),r[6]=l.isBlocking.length,r[7]=n,r[8]=a,r[9]=d,r[10]=s):s=r[10],s}function t5(e){return{item:e.item}}try{t4.displayName||(t4.displayName="BlockingList")}catch{}function t6({issueNode:e}){let t=function(){let e,t=(0,K.c)(4),n=(0,Z.b)(),i=(0,Q.Pk)(),{updateItem:a}=(0,eb.xx)();return t[0]!==n||t[1]!==i||t[2]!==a?(e=async e=>{(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_UNLINK_FROM_PARENT",mode:"immersive",threadId:(0,ty.W)(i)?.id,chatReferrer:document.referrer,issueRepository:e.repository,issueTab:e.tag,parentIssueTag:e.parentTag});let t={type:"text",name:`timeline-event: {"type": "unlink-sub-issue", "markdownContent": "Unlinked sub-issue '${e.name}'"}`,text:`Unlink the sub issue '${e.tag}' from its parent issue by removing the 'parentTag' field. Return the updated '${e.tag}' draft-issue.`},s={...e,parentTag:void 0,isUserEdited:!1};a(s);let r="existing-issue"===s.type?(0,eL.yA)(s):(0,eL.PO)(s);await n.sendChatMessage({thread:(0,ty.W)(i),content:"Unlink the sub-issue from its parent issue",references:[t,r],topic:i.currentTopic,context:i.context,customInstructions:i.customInstructions,model:i.model})},t[0]=n,t[1]=i,t[2]=a,t[3]=e):e=t[3],e}(),n=(0,ep.useMemo)(()=>"existing-issue"===e.item.type?"New sub-issues":"Sub-issues",[e]),i=(0,ep.useMemo)(()=>{if(!e)return 0;let t=-1;return(0,eJ.YR)(e,()=>t++),t},[e]);return(0,z.jsx)(tX,{title:n,items:function e(t){return t.map(t=>({item:t.item,children:e(t.children)}))}(e.children),totalCount:i,actions:[{key:"unlink",label:"Unlink sub-issue",icon:(0,z.jsx)(er.UnlinkIcon,{}),onSelect:e=>{t(e)}}]})}try{t6.displayName||(t6.displayName="SubissuesList")}catch{}function t7(e){let t,n=(0,K.c)(2),{issueNode:i}=e;return n[0]!==i?(t=(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(t6,{issueNode:i}),(0,z.jsx)(t2,{issueNode:i}),(0,z.jsx)(t4,{issueNode:i})]}),n[0]=i,n[1]=t):t=n[1],t}try{t7.displayName||(t7.displayName="RelationshipsSection")}catch{}var t9=n(11770),t8=n(46996),ne=n(31877),nt=n(97665);function nn(e,t){let n,i,a,s,r,l,o,d,c,u,m,p=(0,K.c)(45),{draftValue:h,formValue:f,setFormValue:g,onChange:y,resolverResult:x,hasPermission:v,isEqual:b,defaultValue:_}=t,{repository:j}=(0,eD.u)(),w=(0,ep.useRef)(!0),N=(0,ep.useRef)(void 0),C=(0,ep.useRef)(e.id);p[0]!==e.id?(n=()=>{C.current!==e.id&&(w.current=!0,N.current=void 0,C.current=e.id)},p[0]=e.id,p[1]=n):n=p[1],p[2]!==e.id||p[3]!==f?(i=[e.id,f],p[2]=e.id,p[3]=f,p[4]=i):i=p[4],(0,ep.useEffect)(n,i),j?.nameWithOwner;let S=e.repository&&j?.nameWithOwner===e.repository,{isLoading:I,data:k}=x,T=(null!=h||!e.isStreaming)&&!I;p[5]!==S||p[6]!==T?(a=()=>{S&&!T&&(w.current=!0)},s=[S,T],p[5]=S,p[6]=T,p[7]=a,p[8]=s):(a=p[7],s=p[8]),(0,ep.useEffect)(a,s),p[9]!==b||p[10]!==y?(r=(e,t)=>{void 0!==N.current&&b(N.current,e)||(y(e,t),N.current=e)},p[9]=b,p[10]=y,p[11]=r):r=p[11];let E=r;p[12]!==_||p[13]!==S||p[14]!==v||p[15]!==T||p[16]!==E||p[17]!==j||p[18]!==k||p[19]!==g?(l=()=>{S&&T&&(v(j)?(g(k),E(k,!0)):null!=j&&(g(_),E(_,!0)))},o=[S,T,E,j,k,g,v,_],p[12]=_,p[13]=S,p[14]=v,p[15]=T,p[16]=E,p[17]=j,p[18]=k,p[19]=g,p[20]=l,p[21]=o):(l=p[20],o=p[21]),(0,ep.useEffect)(l,o),p[22]!==_||p[23]!==f||p[24]!==S||p[25]!==v||p[26]!==b||p[27]!==T||p[28]!==j||p[29]!==k?(d=()=>{if(!w.current||void 0===N.current||!S||!T||!j)return;let e=v(j);e&&f===k?w.current=!1:!e&&b(f,_)&&(w.current=!1)},p[22]=_,p[23]=f,p[24]=S,p[25]=v,p[26]=b,p[27]=T,p[28]=j,p[29]=k,p[30]=d):d=p[30],p[31]!==_||p[32]!==e.id||p[33]!==f||p[34]!==S||p[35]!==v||p[36]!==b||p[37]!==T||p[38]!==j||p[39]!==k?(c=[e.id,S,T,k,j,f,v,_,b],p[31]=_,p[32]=e.id,p[33]=f,p[34]=S,p[35]=v,p[36]=b,p[37]=T,p[38]=j,p[39]=k,p[40]=c):c=p[40],(0,ep.useEffect)(d,c),p[41]!==f||p[42]!==E?(m=()=>{w.current||E(f,!1)},u=[f,E],p[41]=f,p[42]=E,p[43]=u,p[44]=m):(u=p[43],m=p[44]),(0,ep.useEffect)(m,u)}var ni=n(40104);function na(e){let{openItem:t,updateItem:n}=(0,eb.xx)(),{selectedThreadID:i}=(0,Q.Pk)(),a=function(e){let{messages:t}=(0,Q.Pk)(),{tag:n,issueNumber:i}=e,a=i&&X.W.draftUpdateIssue?"update-issue":"new-issue";return`${a}:${n}#${t.length}`}(e),s=`edited-${i}-${a}`,[r,l]=(0,ni.Fo)(s,void 0);return(0,ep.useCallback)((s,r=!1)=>{let o,d=!1;for(o in s)(0,t8.A)(s[o],e[o])||(d=!0,"name"!==o&&"body"!==o&&"defaultValuesById"!==o&&(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_USER_CHANGED_FIELD",mode:"immersive",threadId:i,repository:e.repository,issueTag:e.tag,userChangedField:o,wasEmpty:function(e){switch(typeof e){case"string":return!e;case"object":if(Array.isArray(e))return!e||0===e.length;return null==e;default:return null==e}}(e[o])}));if(!d)return;let c={...e,...s};!r&&(c.id=a,c.isUserEdited=!0,X.W.copilotPersistEditedDraftIssues&&l(c)),n(c),t(c.id)},[e,n,t,i,a,l])}function ns(e){return e?.viewerIssueCreationPermissions?.assignable}function nr(e){return(0,t9.i)(e)}let nl={fragment:{argumentDefinitions:[T={defaultValue:100,kind:"LocalArgument",name:"count"},E={defaultValue:"",kind:"LocalArgument",name:"labelNames"},R={defaultValue:null,kind:"LocalArgument",name:"owner"},L={defaultValue:null,kind:"LocalArgument",name:"repo"}],kind:"Fragment",metadata:null,name:"useLabelsQueryQuery",selections:[{alias:null,args:A=[{kind:"Variable",name:"name",variableName:"repo"},{kind:"Variable",name:"owner",variableName:"owner"}],concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[P={alias:null,args:[{kind:"Variable",name:"first",variableName:"count"},{kind:"Variable",name:"names",variableName:"labelNames"},{kind:"Literal",name:"orderBy",value:{direction:"ASC",field:"NAME"}}],concreteType:"LabelConnection",kind:"LinkedField",name:"labels",plural:!1,selections:[{alias:null,args:null,concreteType:"Label",kind:"LinkedField",name:"nodes",plural:!0,selections:[D={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nameHTML",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[R,L,E,T],kind:"Operation",name:"useLabelsQueryQuery",selections:[{alias:null,args:A,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[P,D],storageKey:null}]},params:{id:"b83819e3267088a514ba0c0458c33d5e",metadata:{},name:"useLabelsQueryQuery",operationKind:"query",text:null}};function no(e){return e}function nd(e){return!!e}function nc(e){return e?.viewerIssueCreationPermissions?.labelable}function nu(e){return e.name}nl.hash="d071175b5fcd3e6223eb6f9ac83d6996";var nm=n(90921);function np(e,t){var n,i;return n=e?.title,i=t?.title,n?.toLowerCase()===i?.toLowerCase()}function nh(e){return e?.viewerIssueCreationPermissions?.milestoneable}var nf=n(25820);function ng(e){return!1===e.hasReachedItemsLimit}function ny(e){return!1===e.closed}function nx(e,t){return e.set(t.id,t),e}function nv(e){return!!e.id}function nb(e){return e.toLowerCase()}function n_(e){return!!e}function nj(e){return e.title}function nw(e){return e.id}function nN(e){return!!e.id}function nC(e){return e?.viewerIssueCreationPermissions?.triageable}function nS(e){return{id:e.id,title:e.title}}var nI=n(85346);function nk(e,t){return e?.toLowerCase()===t?.toLowerCase()}function nT(e,t){return nk(e?.name,t?.name)}function nE(e){return e?.viewerIssueCreationPermissions?.typeable}function nR(e){let t,n,i,a,s,r,l,o,d,c,u,m,p,h,f=(0,K.c)(44),{draftIssue:g,issueNode:y,template:x,issueFormRef:v,loadingDraftIssueRepo:b,onChange:_,onClose:j,onBeforeCreate:w,onFieldChange:N}=e,{name:C,body:S,defaultValuesById:I}=g,k=void 0===S?"":S,{repository:T,clearSessionData:E}=(0,eD.u)(),[R,L]=(0,ep.useState)(C),[A,D]=(0,ep.useState)(k),P=(m=(0,K.c)(3),p=(0,Z.b)(),h=(0,Q.Pk)(),m[0]!==p||m[1]!==h?(u=async(e,t,n)=>{let i;if(e.parentMessageID&&(i=h.messages.findLast(t=>t.id===e.parentMessageID&&"root"!==t.id)),!i||!i.content)return;(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_RETRY_MESSAGE",mode:"immersive",threadId:(0,ty.W)(h)?.id,customMessage:t});let a={type:"text",name:`timeline-event: {"type": "automatic-retry", "markdownContent": "${t??"Copilot failed to generate a response, retrying\u2026"}"}`,text:n,icon:er.XIcon};await p.sendChatMessage({thread:(0,ty.W)(h),content:i.content,references:[...i.references??[],a],topic:h.currentTopic,context:h.context,customInstructions:h.customInstructions,model:h.model,parentMessageId:e.id})},m[0]=p,m[1]=h,m[2]=u):u=m[2],u),O=(0,Q.Pk)();f[0]!==E||f[1]!==v?(t=()=>{E(),v.current?.clearSessionStorage()},f[0]=E,f[1]=v,f[2]=t):t=f[2];let F=t;f[3]!==F||f[4]!==j?(n=()=>{F(),j?.()},f[3]=F,f[4]=j,f[5]=n):n=f[5];let B=n;if(f[6]!==k||f[7]!==C?(i=()=>{L(C),D(k)},a=[k,C],f[6]=k,f[7]=C,f[8]=i,f[9]=a):(i=f[8],a=f[9]),(0,ep.useEffect)(i,a),!function(e){let t,n,i,a,s,r=(0,K.c)(15),{repository:l,assignees:o,setAssignees:d}=(0,eD.u)(),c=na(e),u=e.assignees;r[0]!==c?(t=(e,t)=>c({assignees:e.map(nr)},t),r[0]=c,r[1]=t):t=r[1];let m=l?.owner.login,p=l?.name;r[2]!==e.assignees?(n=e.assignees??[],r[2]=e.assignees,r[3]=n):n=r[3],r[4]!==m||r[5]!==p||r[6]!==n?(i={owner:m,repo:p,assignees:n},r[4]=m,r[5]=p,r[6]=n,r[7]=i):i=r[7];let h=function(e){let t,n,i,a,s,r=(0,K.c)(16),{owner:l,repo:o,assignees:d}=e,c=(0,nt.jE)();r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,t9.M)({includeAuthorableBots:!1,includeAssignableBots:!0}),r[0]=t):t=r[0];let u=t;r[1]!==c?(n=JSON.stringify(c),r[1]=c,r[2]=n):n=r[2],r[3]!==d||r[4]!==l||r[5]!==o||r[6]!==n?(i=["copilot-immersive-assignees",n,u,l,o,d],r[3]=d,r[4]=l,r[5]=o,r[6]=n,r[7]=i):i=r[7];let m=i;r[8]!==d||r[9]!==l||r[10]!==c||r[11]!==o?(a=async()=>l&&o&&d?(await (0,ne.nH)(c,{owner:l,repo:o,query:"",loginNames:d,capabilities:u})).assignees:[],r[8]=d,r[9]=l,r[10]=c,r[11]=o,r[12]=a):a=r[12];let p=a;return r[13]!==p||r[14]!==m?(s={queryKey:m,queryFn:p},r[13]=p,r[14]=m,r[15]=s):s=r[15],(0,e3.I)(s)}(i);r[8]===Symbol.for("react.memo_cache_sentinel")?(a=[],r[8]=a):a=r[8],r[9]!==e.assignees||r[10]!==o||r[11]!==d||r[12]!==t||r[13]!==h?(s={draftValue:u,formValue:o,setFormValue:d,onChange:t,resolverResult:h,hasPermission:ns,isEqual:t8.A,defaultValue:a},r[9]=e.assignees,r[10]=o,r[11]=d,r[12]=t,r[13]=h,r[14]=s):s=r[14],nn(e,s)}(g),!function(e){let t,n,i,a,s,r=(0,K.c)(15),{repository:l,labels:o,setLabels:d}=(0,eD.u)(),c=na(e),u=e.labels;r[0]!==c?(t=(e,t)=>c({labels:e.map(nu)},t),r[0]=c,r[1]=t):t=r[1];let m=l?.owner.login,p=l?.name;r[2]!==e.labels?(n=e.labels??[],r[2]=e.labels,r[3]=n):n=r[3],r[4]!==m||r[5]!==p||r[6]!==n?(i={owner:m,repo:p,labels:n},r[4]=m,r[5]=p,r[6]=n,r[7]=i):i=r[7];let h=function(e){let t,n,i,a,s=(0,K.c)(15),{owner:r,repo:l,labels:o}=e,d=(0,eZ.useRelayEnvironment)();return s[0]!==d?(t=JSON.stringify(d),s[0]=d,s[1]=t):t=s[1],s[2]!==o||s[3]!==r||s[4]!==l||s[5]!==t?(n=["copilot-immersive-labels",t,r,l,o],s[2]=o,s[3]=r,s[4]=l,s[5]=t,s[6]=n):n=s[6],s[7]!==d||s[8]!==o||s[9]!==r||s[10]!==l?(i=async()=>{if(!r||!l||!o)return[];let e=await (0,ez.SD)({environment:d,query:nl,variables:{owner:r,repo:l,labelNames:o.join(","),count:o.length}}).toPromise();return(e?.repository?.labels?.nodes??[]).filter(nd).map(no)},s[7]=d,s[8]=o,s[9]=r,s[10]=l,s[11]=i):i=s[11],s[12]!==n||s[13]!==i?(a={queryKey:n,queryFn:i},s[12]=n,s[13]=i,s[14]=a):a=s[14],(0,e3.I)(a)}(i);r[8]===Symbol.for("react.memo_cache_sentinel")?(a=[],r[8]=a):a=r[8],r[9]!==e.labels||r[10]!==o||r[11]!==d||r[12]!==t||r[13]!==h?(s={draftValue:u,formValue:o,setFormValue:d,onChange:t,resolverResult:h,hasPermission:nc,isEqual:t8.A,defaultValue:a},r[9]=e.labels,r[10]=o,r[11]=d,r[12]=t,r[13]=h,r[14]=s):s=r[14],nn(e,s)}(g),!function(e){let t,n,i,a,s,r=(0,K.c)(16),{repository:l,issueType:o,setIssueType:d}=(0,eD.u)(),c=na(e),u=l?.owner.login;r[0]!==u?(t={owner:u},r[0]=u,r[1]=t):t=r[1];let m=function(e){let t,n,i,a,s=(0,K.c)(11),{owner:r}=e,l=(0,nt.jE)();s[0]!==l?(t=JSON.stringify(l),s[0]=l,s[1]=t):t=s[1],s[2]!==r||s[3]!==t?(n=["copilot-immersive-issue-types",t,r],s[2]=r,s[3]=t,s[4]=n):n=s[4];let o=n;s[5]!==r||s[6]!==l?(i=async()=>r?(await (0,nI.R)(l,{owner:r,query:"",count:25})).issueTypes:[],s[5]=r,s[6]=l,s[7]=i):i=s[7];let d=i;return s[8]!==d||s[9]!==o?(a={queryKey:o,queryFn:d},s[8]=d,s[9]=o,s[10]=a):a=s[10],(0,e3.I)(a)}(t);e:{let t;if(m.isLoading||!e.issueType){n=null;break e}r[2]!==e.issueType||r[3]!==m.data?(t=m.data?.find(t=>nk(t.name,e.issueType))||null,r[2]=e.issueType,r[3]=m.data,r[4]=t):t=r[4],n=t}let p=n;r[5]!==c?(i=(e,t)=>c({issueType:e?.name},t),r[5]=c,r[6]=i):i=r[6],r[7]!==p||r[8]!==m.isLoading?(a={isLoading:m.isLoading,data:p},r[7]=p,r[8]=m.isLoading,r[9]=a):a=r[9],r[10]!==e.issueType||r[11]!==o||r[12]!==d||r[13]!==i||r[14]!==a?(s={draftValue:e.issueType,formValue:o,setFormValue:d,onChange:i,resolverResult:a,hasPermission:nE,isEqual:nT,defaultValue:null},r[10]=e.issueType,r[11]=o,r[12]=d,r[13]=i,r[14]=a,r[15]=s):s=r[15],nn(e,s)}(g),!function(e){let t,n,i,a,s=(0,K.c)(15),{repository:r,milestone:l,setMilestone:o}=(0,eD.u)(),d=na(e),c=r?.owner.login,u=r?.name;s[0]!==e.milestone||s[1]!==c||s[2]!==u?(t={owner:c,repo:u,milestone:e.milestone},s[0]=e.milestone,s[1]=c,s[2]=u,s[3]=t):t=s[3];let m=function(e){let t,n,i,a,s=(0,K.c)(15),{owner:r,repo:l,milestone:o}=e,d=(0,nt.jE)();return s[0]!==d?(t=JSON.stringify(d),s[0]=d,s[1]=t):t=s[1],s[2]!==o||s[3]!==r||s[4]!==l||s[5]!==t?(n=["copilot-immersive-milestones",t,r,l,o],s[2]=o,s[3]=r,s[4]=l,s[5]=t,s[6]=n):n=s[6],s[7]!==o||s[8]!==r||s[9]!==d||s[10]!==l?(i=async()=>r&&l&&o?(await (0,nm.U)(d,{owner:r,repo:l,query:o,count:1})).milestones:[],s[7]=o,s[8]=r,s[9]=d,s[10]=l,s[11]=i):i=s[11],s[12]!==n||s[13]!==i?(a={queryKey:n,queryFn:i},s[12]=n,s[13]=i,s[14]=a):a=s[14],(0,e3.I)(a)}(t),p=m.data?.[0]??null;s[4]!==d?(n=(e,t)=>d({milestone:e?.title},t),s[4]=d,s[5]=n):n=s[5],s[6]!==p||s[7]!==m.isLoading?(i={isLoading:m.isLoading,data:p},s[6]=p,s[7]=m.isLoading,s[8]=i):i=s[8],s[9]!==e.milestone||s[10]!==l||s[11]!==o||s[12]!==n||s[13]!==i?(a={draftValue:e.milestone,formValue:l,setFormValue:o,onChange:n,resolverResult:i,hasPermission:nh,isEqual:np,defaultValue:null},s[9]=e.milestone,s[10]=l,s[11]=o,s[12]=n,s[13]=i,s[14]=a):a=s[14],nn(e,a)}(g),!function(e){let t,n,i,a,s,r=(0,K.c)(15),{repository:l,projects:o,setProjects:d}=(0,eD.u)(),c=na(e),u=e.projects;r[0]!==c?(t=(e,t)=>c({projects:e.map(nS)},t),r[0]=c,r[1]=t):t=r[1];let m=l?.owner.login,p=l?.name;r[2]!==e.projects?(n=e.projects??[],r[2]=e.projects,r[3]=n):n=r[3],r[4]!==m||r[5]!==p||r[6]!==n?(i={owner:m,repo:p,projects:n},r[4]=m,r[5]=p,r[6]=n,r[7]=i):i=r[7];let h=function(e){let t,n,i,a=(0,K.c)(12),{owner:s,repo:r,projects:l}=e,o=(0,nt.jE)();return a[0]!==s||a[1]!==l||a[2]!==r?(t=["copilot-immersive-projects",s,r,l],a[0]=s,a[1]=l,a[2]=r,a[3]=t):t=a[3],a[4]!==s||a[5]!==l||a[6]!==o||a[7]!==r?(n=async()=>{if(!s||!r||!l||!l.length)return[];let e=new Set(l.filter(nN).map(nw)),t=l.map(nj).filter(n_),n=new Set(t.map(nb)),i=l.length>0&&l.every(nv),a=t.length>0?Array.from(new Set(t)).join(","):"",{repositoryProjects:d,recentRepositoryProjects:c,ownerProjects:u,recentOwnerProjects:m}=await o.fetchQuery((0,nf.D)({owner:s,repo:r,query:a})),p=[...[...d,...c,...u,...m].reduce(nx,new Map).values()].filter(ny).filter(ng).filter(t=>i?t.id&&e.has(t.id):!!(t.id&&e.has(t.id))||n.has(t.title.toLowerCase()));if(i)return p;{let t=new Set;return p.sort((t,n)=>{let i=e.has(t.id),a=e.has(n.id);return i&&!a?-1:!i&&a?1:0}).filter(e=>{let n=e.title.toLowerCase();return!t.has(n)&&(t.add(n),!0)})}},a[4]=s,a[5]=l,a[6]=o,a[7]=r,a[8]=n):n=a[8],a[9]!==t||a[10]!==n?(i={queryKey:t,queryFn:n},a[9]=t,a[10]=n,a[11]=i):i=a[11],(0,e3.I)(i)}(i);r[8]===Symbol.for("react.memo_cache_sentinel")?(a=[],r[8]=a):a=r[8],r[9]!==e.projects||r[10]!==o||r[11]!==d||r[12]!==t||r[13]!==h?(s={draftValue:u,formValue:o,setFormValue:d,onChange:t,resolverResult:h,hasPermission:nC,isEqual:t8.A,defaultValue:a},r[9]=e.projects,r[10]=o,r[11]=d,r[12]=t,r[13]=h,r[14]=s):s=r[14],nn(e,s)}(g),null==T){let e;if(void 0===g.repository&&g.isStreaming||b){let e;return f[10]===Symbol.for("react.memo_cache_sentinel")?(e=(0,z.jsx)(eN.Q,{optionConfig:{useViewportQueries:!1}}),f[10]=e):e=f[10],e}return f[11]===Symbol.for("react.memo_cache_sentinel")?(e=(0,z.jsx)(eE,{title:"Repository required",description:"Please select a repository above to continue creating your issue.",icon:er.IssueDraftIcon}),f[11]=e):e=f[11],e}let M=O.messages.at(-1);if(M&&(0,tU.E)(M,["switch-issue-template","switch-issue-repo"])){let e;return f[12]===Symbol.for("react.memo_cache_sentinel")?(e=(0,z.jsx)(eN.Q,{optionConfig:{useViewportQueries:!1}}),f[12]=e):e=f[12],e}let V=O.messages;if(f[13]!==I||f[14]!==g.messageId||f[15]!==P||f[16]!==O.isWaitingOnCopilot||f[17]!==O.messages||f[18]!==x){s=Symbol.for("react.early_return_sentinel");e:{let e=V.find(e=>e.id===g.messageId),t=e?.parentMessageIndex!==void 0?O.messages[e.parentMessageIndex]:void 0;if(e&&t){let n=x&&(0,eq.GQ)(x.data),i=0===Object.keys(I||{}).length,a=!O.isWaitingOnCopilot,r=e.messageIndex===O.messages.length-1,l="assistant"===e.role,o=(0,tU.E)(t,["automatic-retry"]);if(n&&i)if(a)if(r&&l&&!o){let t;P(e,"Copilot failed to use the issue template, retrying\u2026","Force a retry of the user's request and make sure to generate template form values properly. Do not send the same response as the previous attempt."),f[21]===Symbol.for("react.memo_cache_sentinel")?(t=(0,z.jsx)(eN.Q,{optionConfig:{useViewportQueries:!1}}),f[21]=t):t=f[21],s=t;break e}else{let e;f[22]===Symbol.for("react.memo_cache_sentinel")?(e=(0,z.jsx)(eE,{title:"Copilot failed to create an issue",description:"Copilot failed to use the issue template. Please retry or choose a different template.",icon:er.IssueDraftIcon}),f[22]=e):e=f[22],s=e;break e}else{let e;f[20]===Symbol.for("react.memo_cache_sentinel")?(e=(0,z.jsx)(eN.Q,{optionConfig:{useViewportQueries:!1}}),f[20]=e):e=f[20],s=e;break e}}}f[13]=I,f[14]=g.messageId,f[15]=P,f[16]=O.isWaitingOnCopilot,f[17]=O.messages,f[18]=x,f[19]=s}else s=f[19];return s!==Symbol.for("react.early_return_sentinel")?s:(f[23]!==_?(r=e=>{L(e),_?.({name:e})},l=e=>{D(e),_?.({body:e})},f[23]=_,f[24]=r,f[25]=l):(r=f[24],l=f[25]),f[26]!==I||f[27]!==A||f[28]!==g.messageId||f[29]!==v||f[30]!==w||f[31]!==B||f[32]!==N||f[33]!==T||f[34]!==r||f[35]!==l||f[36]!==x||f[37]!==R?(o=(0,z.jsx)(tV.e,{repository:T,title:R,body:A,setTitle:r,setBody:l,clearOnCreate:B,issueFormRef:v,onCreateSuccess:t$.l,onCreateError:t$.l,onCancel:B,onBeforeCreate:w,defaultValuesById:I,selectedTemplate:x,onFieldChange:N,clientMutationId:g.messageId}),f[26]=I,f[27]=A,f[28]=g.messageId,f[29]=v,f[30]=w,f[31]=B,f[32]=N,f[33]=T,f[34]=r,f[35]=l,f[36]=x,f[37]=R,f[38]=o):o=f[38],f[39]!==y?(d=y&&(0,z.jsx)(t7,{issueNode:y}),f[39]=y,f[40]=d):d=f[40],f[41]!==o||f[42]!==d?(c=(0,z.jsxs)(z.Fragment,{children:[o,d]}),f[41]=o,f[42]=d,f[43]=c):c=f[43],c)}try{nR.displayName||(nR.displayName="CreateIssueForm")}catch{}let nL="CreateIssuePreview-module__container--xRZfA IssuePreview-module__container--O4xBI",nA="CreateIssuePreview-module__toolbar--DOlv4 FilePreview-module__toolbar--ZZWN1",nD="CreateIssuePreview-module__toolbarLeft--kUeFB FilePreview-module__toolbarLeft--RCKxW",nP="CreateIssuePreview-module__toolbarActions--n_D57 FilePreview-module__toolbarActions--h04aW",nO="CreateIssuePreview-module__form--X4Vwp";var nF=n(12683);function nB({node:e,onItemSelected:t}){let n=(0,ep.useMemo)(()=>{let t=[],n=e;for(;n;)t.push(n),n=n.parent;return t.reverse()},[e]);if(e.parent)return(0,z.jsxs)(ed.W,{children:[(0,z.jsxs)(ed.W.Button,{variant:"invisible",className:"CreateIssuePreview-module__parentSelectorAnchor--qiqro",children:[(0,z.jsx)("span",{className:"fgColor-muted",children:"Parent:"})," ",e?.parent?.item.name]}),(0,z.jsx)(ed.W.Overlay,{width:"large",children:(0,z.jsx)(nF.lF,{children:n.map((n,i)=>(0,z.jsxs)(nF.lF.Item,{active:n.item.tag===e.item.tag,onSelect:()=>t(n),sx:{paddingLeft:`calc(${i} * var(--base-size-12))`},children:[(0,z.jsx)(nF.lF.LeadingVisual,{children:(0,z.jsx)(eV.n,{...n.item})}),(0,z.jsx)("div",{className:"CreateIssuePreview-module__truncateText--Cyrbf",children:n.item.name})]},n.item.tag))})})]})}try{nB.displayName||(nB.displayName="ParentSelector")}catch{}var nM=n(3398);let nV="RepositoryPicker-module__container--codNO",n$="RepositoryPicker-module__label--WplGo";function nU(e){let t,n,i,a,s,r,l=(0,K.c)(16),{draftIssue:o,resolvedDraftIssueRepo:d,loadingDraftIssueRepo:c,topRepos:u}=e,[m,p]=(0,ep.useState)(void 0),{repository:h}=(0,eD.u)(),f=function(e){let t,n=(0,K.c)(5),i=(0,Z.b)(),a=(0,Q.Pk)(),{updateItem:s}=(0,eb.xx)();return n[0]!==e||n[1]!==i||n[2]!==a||n[3]!==s?(t=async(t,n)=>{let r=`${n}/${t}`,l=[{type:"text",name:`timeline-event: {"type": "switch-issue-repo", "markdownContent": "Changing repository to ${r}\u{2026}"}`,text:`Update draft issue with tag \`${e.tag}\` to use the \`${r}\` repository. DO NOT ask the user for a template. If there is a template in the new repository that makes sense to use, use it. If you cannot find a template, draft a blank issue. Regenerate the title and description. Maintain all conversation context. Update the metadata to follow the new repository and template. DO NOT change the \`tag\` or \`parentTag\` fields.`}];if(e.isUserEdited){let t={...e,...r&&{repository:r},isUserEdited:!1};s(t),l.push((0,eL.PO)(t))}await i.sendChatMessage({thread:(0,ty.W)(a),content:`Use the ${r} repository`,references:[...l,...a.currentReferences],topic:a.currentTopic,context:a.context,customInstructions:a.customInstructions,model:a.model})},n[0]=e,n[1]=i,n[2]=a,n[3]=s,n[4]=t):t=n[4],t}(o);l[0]!==f?(t=e=>{null!=e&&f(e.name,e.owner.login)},l[0]=f,l[1]=t):t=l[1];let g=t;!function(e,t,n,i){let a,s,r,l,o,d,c,u,m,p,h,f=(0,K.c)(32),{repository:g,setRepository:y}=(0,eD.u)(),x=(0,ep.useRef)(!0),v=(0,ep.useRef)(null),b=(0,ep.useRef)(void 0),_=na(e);f[0]!==e.id?(a=()=>{v.current!==e.id&&(x.current=!0,b.current=void 0,v.current=e.id)},f[0]=e.id,f[1]=a):a=f[1],f[2]!==e.id||f[3]!==g?(s=[e.id,g],f[2]=e.id,f[3]=g,f[4]=s):s=f[4],(0,ep.useEffect)(a,s);let j=(null!=e.repository||!e.isStreaming)&&!n;f[5]!==j?(r=()=>{j||(x.current=!0)},l=[j],f[5]=j,f[6]=r,f[7]=l):(r=f[6],l=f[7]),(0,ep.useEffect)(r,l),f[8]!==_?(o=(e,t)=>{var n,i;(void 0===b.current||(n=b.current?.nameWithOwner,i=e?.nameWithOwner,n?.toLowerCase()!==i?.toLowerCase()))&&(_({repository:e?.nameWithOwner},t),b.current=e??null)},f[8]=_,f[9]=o):o=f[9];let w=o;f[10]!==j||f[11]!==w||f[12]!==t||f[13]!==y||f[14]!==i?(d=()=>{j&&(null!=t?(y(t),w(t,!0)):i.length>0?(y(i[0]),w(i[0],!0)):(y(void 0),w(void 0,!0)))},c=[j,w,t,y,i],f[10]=j,f[11]=w,f[12]=t,f[13]=y,f[14]=i,f[15]=d,f[16]=c):(d=f[15],c=f[16]),(0,ep.useEffect)(d,c),f[17]!==g||f[18]!==j||f[19]!==t||f[20]!==i?(u=()=>{x.current&&void 0!==b.current&&j&&(null!=t&&t===g||null==t&&i.length>0&&g===i[0]?x.current=!1:null==t&&i.length<=0&&void 0===g&&(x.current=!1))},f[17]=g,f[18]=j,f[19]=t,f[20]=i,f[21]=u):u=f[21],f[22]!==e.id||f[23]!==g||f[24]!==j||f[25]!==t||f[26]!==i?(m=[e.id,j,t,i,g],f[22]=e.id,f[23]=g,f[24]=j,f[25]=t,f[26]=i,f[27]=m):m=f[27],(0,ep.useEffect)(u,m),f[28]!==g||f[29]!==w?(h=()=>{x.current||w(g,!1)},p=[g,w],f[28]=g,f[29]=w,f[30]=p,f[31]=h):(p=f[30],h=f[31]),(0,ep.useEffect)(h,p)}(o,d,c,u),l[2]!==h||l[3]!==c||l[4]!==u?(n=()=>{c||null==h||null==u||u.find(e=>e.id===h.id)||p(h.id)},i=[h,c,u],l[2]=h,l[3]=c,l[4]=u,l[5]=n,l[6]=i):(n=l[5],i=l[6]),(0,ep.useEffect)(n,i);let y=h??u?.[0],x=o.isStreaming||c;return l[7]===Symbol.for("react.memo_cache_sentinel")?(a=(0,z.jsx)(nM.A,{className:(0,em.$)(n$,"sr-only"),required:!0,children:"Repository"}),l[7]=a):a=l[7],l[8]!==x?(s={hasIssuesEnabled:!0,readonly:x},l[8]=x,l[9]=s):s=l[9],l[10]!==m||l[11]!==g||l[12]!==y||l[13]!==s||l[14]!==u?(r=(0,z.jsxs)("div",{className:nV,children:[a,(0,z.jsx)(eH.f0,{initialRepository:y,onSelect:g,options:s,topRepositories:u,enforceAtleastOneSelected:!0},m)]}),l[10]=m,l[11]=g,l[12]=y,l[13]=s,l[14]=u,l[15]=r):r=l[15],r}try{nU.displayName||(nU.displayName="RepositoryPicker")}catch{}let nq=(O=[{defaultValue:null,kind:"LocalArgument",name:"owner"},{defaultValue:null,kind:"LocalArgument",name:"repo"}],F=[{kind:"Variable",name:"name",variableName:"repo"},{kind:"Variable",name:"owner",variableName:"owner"}],$=[B={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},M={alias:null,args:null,kind:"ScalarField",name:"filename",storageKey:null},V={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null}],U=[B,M,V,{alias:null,args:null,kind:"ScalarField",name:"about",storageKey:null}],{fragment:{argumentDefinitions:O,kind:"Fragment",metadata:null,name:"TemplatePickerQuery",selections:[{alias:null,args:F,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:null,concreteType:"IssueForm",kind:"LinkedField",name:"issueForms",plural:!0,selections:[B,{kind:"InlineDataFragmentSpread",name:"TemplatePickerForm",selections:$,args:null,argumentDefinitions:[]}],storageKey:null},{alias:null,args:null,concreteType:"IssueTemplate",kind:"LinkedField",name:"issueTemplates",plural:!0,selections:[B,{kind:"InlineDataFragmentSpread",name:"TemplatePickerTemplate",selections:U,args:null,argumentDefinitions:[]}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:O,kind:"Operation",name:"TemplatePickerQuery",selections:[{alias:null,args:F,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:null,concreteType:"IssueForm",kind:"LinkedField",name:"issueForms",plural:!0,selections:$,storageKey:null},{alias:null,args:null,concreteType:"IssueTemplate",kind:"LinkedField",name:"issueTemplates",plural:!0,selections:U,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:"453f03781d915408c3c338e5d346e0be",metadata:{},name:"TemplatePickerQuery",operationKind:"query",text:null}});nq.hash="582a468668cd62a5a95ad0f91f7ea5e5";let nW={kind:"InlineDataFragment",name:"TemplatePickerForm"};nW.hash="277026edd019ed6ef2c9d27b3d3d6c4a";let nH={kind:"InlineDataFragment",name:"TemplatePickerTemplate"};nH.hash="fa6038bb9389af7bff23ba3491dd0507";var nG=n(86391);function nz(e,t){return e.filename.localeCompare(t.filename)}function nK(e){return(0,tr.readInlineData)(nW,e)}function nQ(e){return(0,tr.readInlineData)(nH,e)}function nZ(e){let t,n,i,a,s=(0,K.c)(10),{draftIssue:r}=e,{repository:l}=(0,eD.u)(),o=l?.owner.login,d=l?.name;s[0]!==o||s[1]!==d?(t={owner:o,repo:d},s[0]=o,s[1]=d,s[2]=t):t=s[2];let{data:c}=function(e){let t,n,i,a,s=(0,K.c)(13),{owner:r,repo:l}=e,o=(0,eZ.useRelayEnvironment)();return s[0]!==o?(t=JSON.stringify(o),s[0]=o,s[1]=t):t=s[1],s[2]!==r||s[3]!==l||s[4]!==t?(n=["copilot-immersive-templates",t,r,l],s[2]=r,s[3]=l,s[4]=t,s[5]=n):n=s[5],s[6]!==o||s[7]!==r||s[8]!==l?(i=async()=>{if(!r||!l)return[];let e=await (0,tr.fetchQuery)(o,nq,{owner:r,repo:l}).toPromise();return[...(e?.repository?.issueTemplates||[]).map(nQ),...(e?.repository?.issueForms||[]).map(nK)].sort(nz)},s[6]=o,s[7]=r,s[8]=l,s[9]=i):i=s[9],s[10]!==n||s[11]!==i?(a={queryKey:n,queryFn:i},s[10]=n,s[11]=i,s[12]=a):a=s[12],(0,e3.I)(a)}(t);if(null==c||0===c.length)return null;s[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,z.jsx)("span",{children:"/"}),s[3]=n):n=s[3],s[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,z.jsx)(nM.A,{className:(0,em.$)(n$,"sr-only"),children:"Template"}),s[4]=i):i=s[4];let u=l?.nameWithOwner,m=l?.isBlankIssuesEnabled;return s[5]!==r||s[6]!==u||s[7]!==m||s[8]!==c?(a=(0,z.jsxs)(z.Fragment,{children:[n,(0,z.jsxs)("div",{className:nV,children:[i,(0,z.jsx)(nJ,{templates:c,draftIssue:r,repositoryNwo:u,isBlankIssuesEnabled:m})]})]}),s[5]=r,s[6]=u,s[7]=m,s[8]=c,s[9]=a):a=s[9],a}function nJ(e){let t,n,i,a,s,r,l,o,d=(0,K.c)(23),{templates:c,draftIssue:u,isBlankIssuesEnabled:m,repositoryNwo:p}=e,[h,f]=(0,ep.useState)("");e:{let e;if(!h){t=c;break e}d[0]!==h||d[1]!==c?(e=c?.filter(e=>e.name?.toLowerCase().includes(h.toLowerCase())),d[0]=h,d[1]=c,d[2]=e):e=d[2],t=e}let g=t,[y,x]=(0,ep.useState)(void 0);d[3]!==u.template||d[4]!==c?(n=()=>{if(!u.template)return void x(void 0);let e=u.template.split("/").findLast(Boolean);x(c?.find(t=>t.filename===e||t.name===e))},i=[c,u.template],d[3]=u.template,d[4]=c,d[5]=n,d[6]=i):(n=d[5],i=d[6]),(0,ep.useEffect)(n,i);let v=function(){let e,t=(0,K.c)(4),n=(0,Z.b)(),i=(0,Q.Pk)(),{updateItem:a}=(0,eb.xx)();return t[0]!==n||t[1]!==i||t[2]!==a?(e=async(e,t,s)=>{let r=[{type:"text",name:`timeline-event: {"type": "switch-issue-template", "markdownContent": "${t?`Changing template to '${t.name}'\u{2026}`:"Removing template\u2026"}"}`,text:t?`Update the draft issue with tag \`${e.tag}\` with the \`${t.filename}\` template${s?` in the \`${s}\` repository`:""}. Regenerate the title and description following the new template. Maintain all conversation context. Update the metadata to follow the new template. DO NOT change the \`tag\` or \`parentTag\` fields.`:`Update draft issue with tag \`${e.tag}\` to remove the template formatting. Regenerate the title and description to follow a generic format. Maintain all conversation context. DO NOT change the \`tag\` or \`parentTag\` fields.`}];if(e.isUserEdited){let t={...e,...s&&{repository:s},isUserEdited:!1};a(t),r.push((0,eL.PO)(t))}await n.sendChatMessage({thread:(0,ty.W)(i),content:t?`Use the '${t.name}' template`:"Remove the template",references:[...r,...i.currentReferences],topic:i.currentTopic,context:i.context,customInstructions:i.customInstructions,model:i.model})},t[0]=n,t[1]=i,t[2]=a,t[3]=e):e=t[3],e}(),b=(0,ep.useRef)(null),_="new-issue"===u.type&&null!=m&&!m;return d[7]!==g?(a=g??[],d[7]=g,d[8]=a):a=d[8],d[9]!==y?(s=y?[y]:[],d[9]=y,d[10]=s):s=d[10],d[11]!==y||d[12]!==_?(r=e=>(0,z.jsxs)(eB.Q,{trailingVisual:er.TriangleDownIcon,...e,ref:b,children:[y?(0,z.jsx)("span",{children:y.name}):"Select a template",_&&(0,z.jsx)("span",{style:{color:"red",marginLeft:4},children:"*"})]}),d[11]=y,d[12]=_,d[13]=r):r=d[13],d[14]!==u||d[15]!==v||d[16]!==p?(l=async e=>{let[t]=e;x(t),await v(u,t,p)},d[14]=u,d[15]=v,d[16]=p,d[17]=l):l=d[17],d[18]!==a||d[19]!==s||d[20]!==r||d[21]!==l?(o=(0,z.jsx)(nG.O,{items:a,initialSelectedItems:s,placeholderText:"Search",selectionVariant:"single",filterItems:f,title:"Select a template",renderAnchor:r,getItemKey:nX,convertToItemProps:nY,onSelectionChange:l,selectPanelRef:b,height:"large",width:"medium"}),d[18]=a,d[19]=s,d[20]=r,d[21]=l,d[22]=o):o=d[22],o}function nY(e){return{id:e.filename,text:e.name,description:("IssueTemplate"===e.__typename?e.about:e.description)||void 0,descriptionVariant:"block",source:e}}function nX(e){return e.filename}try{nZ.displayName||(nZ.displayName="TemplatePicker")}catch{}try{nJ.displayName||(nJ.displayName="TemplatePickerInternal")}catch{}var n0=n(10286);function n1(e,t){return(0,ep.useCallback)((n,i,a)=>{let s=n||`${n0.y}-${i}`;if(e.defaultValuesById&&e.defaultValuesById[s]===a)return;let r={...e,defaultValuesById:{...e.defaultValuesById}};r.defaultValuesById[s]=a,t(r,!1)},[e,t])}function n2(e){let t,n,i,a,s=(0,K.c)(13),{owner:r,repo:l}=e,o=(0,eZ.useRelayEnvironment)();return s[0]!==o?(t=JSON.stringify(o),s[0]=o,s[1]=t):t=s[1],s[2]!==r||s[3]!==l||s[4]!==t?(n=["copilot-immersive-current-repo",t,r,l],s[2]=r,s[3]=l,s[4]=t,s[5]=n):n=s[5],s[6]!==o||s[7]!==r||s[8]!==l?(i=async()=>r&&l?await (0,eH.tZ)(o,r,l):null,s[6]=o,s[7]=r,s[8]=l,s[9]=i):i=s[9],s[10]!==n||s[11]!==i?(a={queryKey:n,queryFn:i},s[10]=n,s[11]=i,s[12]=a):a=s[12],(0,e3.I)(a)}function n3(e){var t,n;let i,a,s,r,l,o,d,c,u,m,p,h,f,g,y,x,v,b,_,j,w,N,C,S,I,k,T,E,R,L,A,D,P,O,F,B,M,V,$,U=(0,K.c)(84),{isPreviewOpening:q,issue:W,onClose:H}=e,{openItem:G}=(0,eb.xx)(),Z=(0,eJ.u0)();U[0]!==W.tag||U[1]!==Z?(r=Z.get(W.tag),U[0]=W.tag,U[1]=Z,U[2]=r):r=U[2];let J=r,[Y,X]=(0,ep.useState)(q);U[3]!==Y?(l=()=>{if(Y){let e=setTimeout(()=>X(!1),eT.t);return()=>clearTimeout(e)}},o=[Y],U[3]=Y,U[4]=l,U[5]=o):(l=U[4],o=U[5]),(0,ep.useEffect)(l,o);let[ee,et]=(0,ep.useState)(null),en=(0,ep.useRef)(null),{selectedThreadID:ei}=(0,Q.Pk)(),{isLoading:ea,data:es}=(V=(0,K.c)(9),$=(0,eZ.useRelayEnvironment)(),V[0]!==$?(O=JSON.stringify($),V[0]=$,V[1]=O):O=V[1],V[2]!==O?(F=["copilot-immersive-top-repos",O],V[2]=O,V[3]=F):F=V[3],V[4]!==$?(B=async()=>await (0,eH.St)($,{first:10,hasIssuesEnabled:!0}),V[4]=$,V[5]=B):B=V[5],V[6]!==F||V[7]!==B?(M={queryKey:F,queryFn:B},V[6]=F,V[7]=B,V[8]=M):M=V[8],(0,e3.I)(M));U[6]!==W.repository?(d=W.repository?.split("/")??[],U[6]=W.repository,U[7]=d):d=U[7];let[el,eo]=d;U[8]!==el||U[9]!==eo?(c={owner:el,repo:eo},U[8]=el,U[9]=eo,U[10]=c):c=U[10];let{isLoading:ed,data:ec}=n2(c),[eu,em]=(0,ep.useState)(ec);U[11]!==ec?(u=()=>{ec&&em(ec)},m=[ec],U[11]=ec,U[12]=u,U[13]=m):(u=U[12],m=U[13]),(0,ep.useEffect)(u,m);let eh=null!=eu&&(!eu.hasIssuesEnabled||null!=eu.viewerInteractionLimitReasonHTML&&eu.viewerInteractionLimitReasonHTML?.length>0);U[14]===Symbol.for("react.memo_cache_sentinel")?(p=e=>{et(e)},U[14]=p):p=U[14];let ef=p;U[15]===Symbol.for("react.memo_cache_sentinel")?(h=()=>{et(null)},U[15]=h):h=U[15];let eg=h;U[16]!==ee?(f=()=>{ee&&en?.current&&en.current.focus()},g=[ee],U[16]=ee,U[17]=f,U[18]=g):(f=U[17],g=U[18]),(0,ep.useEffect)(f,g);let ey=na(W),ex=n1(W,ey),ev=(0,ep.useRef)(null),e_=(t=ev,(a=(0,K.c)(2))[0]!==t?(i=()=>!t.current||t.current.clientWidth<1024,a[0]=t,a[1]=i):i=a[1],s=i,(0,ep.useSyncExternalStore)(n4,s)),eR=J?.parent!=null,eL=(0,ep.useRef)(null),eD=ec?.id??"",eP=W.template||"";U[19]!==eD||U[20]!==eP?(y={repoId:eD,filename:eP},U[19]=eD,U[20]=eP,U[21]=y):y=U[21];let{isLoading:eO,data:eF}=e4(y),eB=ec??void 0;U[22]!==eB?(x={repository:eB},U[22]=eB,U[23]=x):x=U[23];let eM=x;if(Y||ea||eO){let e;return U[24]===Symbol.for("react.memo_cache_sentinel")?(e=(0,z.jsx)(eN.Q,{optionConfig:{useViewportQueries:!1}}),U[24]=e):e=U[24],e}let eV=`${W.id}@${ei}`;return U[25]!==e_||U[26]!==eV?(v=(0,ej.S)({storageKeyPrefix:eV,insidePortal:e_,disableCopilotAssignmentModal:!0}),U[25]=e_,U[26]=eV,U[27]=v):v=U[27],U[28]===Symbol.for("react.memo_cache_sentinel")?(b=(0,eC.G)("create-issue-preview"),U[28]=b):b=U[28],U[29]!==W?(_=(0,z.jsx)("div",{children:(0,z.jsx)(eA,{item:W})}),U[29]=W,U[30]=_):_=U[30],U[31]!==J||U[32]!==G||U[33]!==eR?(j=eR&&(0,z.jsx)("div",{children:(0,z.jsx)(nB,{node:J,onItemSelected:e=>G(e.item.id,!0)})}),U[31]=J,U[32]=G,U[33]=eR,U[34]=j):j=U[34],U[35]!==_||U[36]!==j?(w=(0,z.jsxs)("div",{className:nD,children:[_,j]}),U[35]=_,U[36]=j,U[37]=w):w=U[37],U[38]!==J||U[39]!==eh||U[40]!==H||U[41]!==eF?(N=(0,z.jsx)("div",{className:nP,children:(0,z.jsx)(tM,{issueTemplate:eF,issueNode:J,issueFormRef:eL,noRepoAccess:eh,onClose:H,onError:ef,onClearError:eg})}),U[38]=J,U[39]=eh,U[40]=H,U[41]=eF,U[42]=N):N=U[42],U[43]!==w||U[44]!==N?(C=(0,z.jsxs)("div",{className:nA,children:[w,N]}),U[43]=w,U[44]=N,U[45]=C):C=U[45],U[46]!==es?(S=es||[],U[46]=es,U[47]=S):S=U[47],U[48]!==W||U[49]!==ec||U[50]!==ed||U[51]!==S?(I=(0,z.jsx)(nU,{draftIssue:W,resolvedDraftIssueRepo:ec,loadingDraftIssueRepo:ed,topRepos:S}),U[48]=W,U[49]=ec,U[50]=ed,U[51]=S,U[52]=I):I=U[52],U[53]!==W?(k=(0,z.jsx)(nZ,{draftIssue:W}),U[53]=W,U[54]=k):k=U[54],U[55]!==I||U[56]!==k?(T=(0,z.jsxs)(eS.B,{direction:"horizontal",align:"center",gap:"condensed",className:"py-2",children:[I,k]}),U[55]=I,U[56]=k,U[57]=T):T=U[57],U[58]!==ee?(E=ee&&(0,z.jsx)(eI.l,{ref:en,hideTitle:!0,title:ee.bannerTitle,description:(0,z.jsx)(ek.o,{children:ee.message}),variant:ee.bannerVariant,role:"alert","data-testid":"create-issue-error-banner"}),U[58]=ee,U[59]=E):E=U[59],U[60]!==ec||U[61]!==eh?(R=eh&&((n=ec)&&!n.hasIssuesEnabled?(0,z.jsx)(eE,{title:"Issues are disabled",description:"Issues are disabled on this repository. Please select a different repository above to continue creating your issue.",icon:er.IssueDraftIcon}):n&&n.viewerInteractionLimitReasonHTML?(0,z.jsx)(eE,{title:"You cannot create issues in this repository",description:n.viewerInteractionLimitReasonHTML,icon:er.IssueDraftIcon}):void 0),U[60]=ec,U[61]=eh,U[62]=R):R=U[62],U[63]!==J||U[64]!==W||U[65]!==ed||U[66]!==eh||U[67]!==ey||U[68]!==H||U[69]!==ex||U[70]!==eF?(L=!eh&&(0,z.jsx)(nR,{draftIssue:W,issueNode:J,template:eF??void 0,issueFormRef:eL,loadingDraftIssueRepo:ed,onChange:ey,onClose:H,onFieldChange:ex}),U[63]=J,U[64]=W,U[65]=ed,U[66]=eh,U[67]=ey,U[68]=H,U[69]=ex,U[70]=eF,U[71]=L):L=U[71],U[72]!==T||U[73]!==E||U[74]!==R||U[75]!==L?(A=(0,z.jsxs)("div",{className:nO,children:[T,E,R,L]}),U[72]=T,U[73]=E,U[74]=R,U[75]=L,U[76]=A):A=U[76],U[77]!==C||U[78]!==A?(D=(0,z.jsxs)("div",{className:nL,ref:ev,children:[C,A]}),U[77]=C,U[78]=A,U[79]=D):D=U[79],U[80]!==eM||U[81]!==v||U[82]!==D?(P=(0,z.jsx)(ew.S,{optionConfig:v,preselectedData:eM,...b,children:D}),U[80]=eM,U[81]=v,U[82]=D,U[83]=P):P=U[83],P}function n4(e){let t=new ResizeObserver(e);return t.observe(document.documentElement),()=>{t.unobserve(document.documentElement),t.disconnect()}}try{n3.displayName||(n3.displayName="CreateIssuePreview")}catch{}var n5=n(34410),n6=n(76158);function n7({isPreviewOpening:e,issue:t,onClose:n}){let[i,a]=(0,ep.useState)(e),{openItem:s}=(0,eb.xx)(),r=(0,eJ.u0)().get(t.tag);(0,ep.useEffect)(()=>{if(i){let e=setTimeout(()=>a(!1),eT.t);return()=>clearTimeout(e)}},[i]);let l=(0,ep.useMemo)(()=>(0,z.jsx)(eo.K,{icon:er.LinkExternalIcon,variant:"invisible","aria-label":"Open issue in new tab",onClick:()=>{window.open(t.href,"_blank")}}),[t.href]),o=(0,ep.useMemo)(()=>({isReadonly:!0,hideTimeline:!0,navigate:t$.l,insideSidePanel:!0,shouldSkipSetDocumentTitle:!0,useViewportQueries:!1,onIssueDelete:n,onRemovedFromProject:t$.l,onIssueUpdate:t$.l,additionalHeaderActions:l,showRepositoryPill:!0}),[n,l]),d=(0,ep.useMemo)(()=>{let[e,n]=t.repository.split("/");if(e&&n)return{owner:e,repo:n,number:t.number,type:"Issue"}},[t.number,t.repository]);return i||!d?(0,z.jsx)(eN.Q,{optionConfig:o}):(0,z.jsxs)("div",{className:"ExistingIssuePreview-module__container--U4DdB CreateIssuePreview-module__container--xRZfA IssuePreview-module__container--O4xBI",children:[(0,z.jsxs)("div",{className:"ExistingIssuePreview-module__toolbar--wnxSx CreateIssuePreview-module__toolbar--DOlv4 FilePreview-module__toolbar--ZZWN1",children:[(0,z.jsx)("div",{className:"ExistingIssuePreview-module__toolbarLeft--NWSuI CreateIssuePreview-module__toolbarLeft--kUeFB FilePreview-module__toolbarLeft--RCKxW",children:r.parent&&(0,z.jsx)(nB,{node:r,onItemSelected:e=>s(e.item.id,!0)})}),(0,z.jsx)("div",{className:"ExistingIssuePreview-module__toolbarActions--ASiVq CreateIssuePreview-module__toolbarActions--n_D57 FilePreview-module__toolbarActions--h04aW",children:(0,z.jsx)(tB,{issueNode:r,onSuccess:n})})]}),(0,z.jsxs)("div",{className:"ExistingIssuePreview-module__viewerContainer--C5tZ7 CreateIssuePreview-module__viewerContainer--bRxNh",children:[(0,z.jsx)(n6.e,{children:(0,z.jsx)(n5.cI,{itemIdentifier:d,optionConfig:o})}),(0,z.jsx)("div",{className:"ExistingIssuePreview-module__relationshipsContainer--CHUGP",children:(0,z.jsx)(t7,{issueNode:r})})]})]})}try{n7.displayName||(n7.displayName="ExistingIssuePreview")}catch{}let n9={fragment:{argumentDefinitions:q=[{defaultValue:null,kind:"LocalArgument",name:"input"}],kind:"Fragment",metadata:null,name:"updateIssueMutationContentOnlyMutation",selections:W=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"UpdateIssuePayload",kind:"LinkedField",name:"updateIssue",plural:!1,selections:[{alias:null,args:null,concreteType:"Issue",kind:"LinkedField",name:"issue",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"body",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"bodyVersion",storageKey:null}],storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:q,kind:"Operation",name:"updateIssueMutationContentOnlyMutation",selections:W},params:{id:"d1d9840a47a7be6dd0ad285ce57f1c7f",metadata:{},name:"updateIssueMutationContentOnlyMutation",operationKind:"mutation",text:null}};n9.hash="470cf4272c31ec8565dec1240c55030a";let n8={fragment:{argumentDefinitions:H=[{defaultValue:null,kind:"LocalArgument",name:"input"}],kind:"Fragment",metadata:null,name:"updateIssueMutationDeleteProjectMutation",selections:G=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"DeleteProjectV2ItemPayload",kind:"LinkedField",name:"deleteProjectV2Item",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"deletedItemId",storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:H,kind:"Operation",name:"updateIssueMutationDeleteProjectMutation",selections:G},params:{id:"ad9e6eaf34525daacc17362653e63272",metadata:{},name:"updateIssueMutationDeleteProjectMutation",operationKind:"mutation",text:null}};n8.hash="f03ef95aad392077538992e2c84a9752";var ie=n(61491),it=n(75908),ii=n(36285),ia=n(78137),is=n(37630),ir=n(52590),il=n(81688);async function io({environment:e,currentIssue:t,draftIssue:n,proposedChanges:i,canUseCopilotAssignment:a,onCompleted:s}){let r,l,o=t.labels?.nodes?.filter(e=>null!=e).map(e=>e.name)||[],d=i.labels?.map(e=>e.name)||[],c=void 0!==i.labels&&!(0,t8.A)(o.sort(),d.sort()),u=void 0!==i.milestone&&(i.milestone?.title||null)!==(t.milestone?.title||null),m=void 0!==i.issueType&&i.issueType?.name!==t.issueType?.name,p=t.projectItems?.nodes?.filter(e=>null!=e).map(e=>e.project).filter(e=>null!=e).map(e=>e.id).filter(Boolean)||[],h=i.projects?.map(e=>e.id)||[],f=void 0!==i.projects&&!(0,t8.A)(p.sort(),h.sort()),g=n.name!==t.title,y=void 0!==i.body&&i.body!==(t.body||""),x=[];if(c){let a=new Promise((a,s)=>{(0,ii.N)({environment:e,input:{labelableId:t.id,labels:i.labels||[],labelableTypeName:"Issue"},clientMutationId:n.messageId,onCompleted:()=>{a()},onError:e=>{s(e)}})});x.push({operation:"labels",promise:a})}let v=t.assignees?.nodes?.filter(e=>null!=e),b=function({currentIssue:e,currentAssignees:t,selectedAssignees:n,canUseCopilotAssignment:i,environment:a,messageId:s}){if(void 0===n)return;let r=n.filter(e=>!(0,te.v)(e.login))??[],l=i?r:n;if(!((e,t)=>{if(e.length!==t.length)return!1;let n=new Set(e.map(e=>e.login));return t.every(e=>n.has(e.login))})(l,t??[]))return new Promise((t,n)=>{(0,ia.j)({environment:a,input:{issueId:e.id,assignedActors:l,participants:[]},clientMutationId:s,onCompleted:()=>{t()},onError:e=>{n(e)}})})}({currentIssue:t,currentAssignees:v,selectedAssignees:i.assignees,canUseCopilotAssignment:a,environment:e,messageId:n.messageId});if(b&&x.push({operation:"assignees",promise:b}),u){let a=new Promise((a,s)=>{(0,ir.v)({environment:e,input:{issueId:t.id,milestone:i.milestone??null,clientMutationId:n.messageId},onCompleted:()=>{a()},onError:e=>{s(e)}})});x.push({operation:"milestone",promise:a})}if(m){let a=new Promise((a,s)=>{(0,is._)({environment:e,input:{issueId:t.id,issueTypeId:i.issueType?.id||null,clientMutationId:n.messageId},onCompleted:()=>{a()},onError:e=>{s(e)}})});x.push({operation:"issueType",promise:a})}if(f){let a=new Promise((a,s)=>{let r=t.projectItems?.nodes||[];(async()=>{try{await ic(t.id,i.projects||[],r,e,n.messageId,i.hasInaccessibleProject),a()}catch(t){let e=t instanceof Error?t.message:"Project update failed";s(Error(`Project update failed: ${e}`))}})()});x.push({operation:"projects",promise:a})}if(g||y){let a=new Promise((a,s)=>{(0,eZ.commitMutation)(e,{mutation:n9,variables:{input:{id:t.id,clientMutationId:n.messageId,...g&&{title:n.name},...y&&{body:i.body,bodyVersion:n?.bodyVersion}}},onCompleted:()=>{a()},onError:e=>{s(e)}})});x.push({operation:"content",promise:a})}let _=[],j=[];if(x.length>0)for(let[e,t]of(await Promise.allSettled(x.map(e=>e.promise))).entries()){let n=x[e]?.operation;n&&("fulfilled"===t.status?_.push(n):j.push({operation:n,error:t.reason instanceof Error?t.reason:Error("Unknown error")}))}let w="assignCopilot";try{await id({currentIssue:t,selectedAssignees:i.assignees,canUseCopilotAssignment:a,hasOtherUpdateErrors:j.length>0,onCompleted:()=>_.push(w)})}catch(e){j.push({operation:w,error:e instanceof Error?e:Error("Unknown error")})}if(0===_.length&&0===j.length){let e={draftType:"update-issue",tag:n?.tag||"",parentTag:n?.parentTag,blockedByTags:n?.blockedByTags,isBlockingTags:n?.isBlockingTags,title:t.title,number:n?.issueNumber||t.number||0,url:t.url||"",repository:{databaseId:t.repository?.databaseId||0,name:t.repository?.name||"",owner:{login:t.repository?.owner.login||""}},template:n?.template,assignees:t.assignees?.nodes?.map(e=>e?.login).filter(e=>!!e)||[]};s&&s({result:{successful:[],failed:[],issue:e}});return}let N=(r=_.includes("content")?n.name:t.title,l=_.includes("assignees")&&void 0!==i.assignees?i.assignees.map(e=>e.login):t.assignees?.nodes?.map(e=>e?.login).filter(e=>!!e)||[],{draftType:"update-issue",tag:n?.tag||"",parentTag:n?.parentTag,blockedByTags:n?.blockedByTags,isBlockingTags:n?.isBlockingTags,title:r,number:n?.issueNumber||t.number||0,url:t.url||"",repository:{databaseId:t.repository?.databaseId||0,name:t.repository?.name||"",owner:{login:t.repository?.owner.login||""}},template:n?.template,assignees:l});s&&s({result:{successful:_,failed:j,issue:N}})}async function id({currentIssue:e,selectedAssignees:t,canUseCopilotAssignment:n,hasOtherUpdateErrors:i,onCompleted:a}){if(void 0!==t&&n&&t?.some(e=>(0,te.v)(e.login)))return(async()=>{if(i)throw Error("Copilot assignment skipped due to other update error(s)");let t=e.repository.defaultBranchRef?.name??"";if(!t)throw Error("Cannot assign to Copilot: default branch not found");try{let n=await (0,ie.J)(e.repository.owner.login,e.repository.name,[e.number],{instructions:"",targetRepo:`${e.repository.owner.login}/${e.repository.name}`,targetBranch:t});if(!n.ok){let e=(0,it.v0)(n,"Assignment failed");throw Error(e)}a?.()}catch(e){throw e instanceof Error?e:Error("Unknown error")}})()}async function ic(e,t,n,i,a,s){let r=n.filter(e=>null!=e&&null!=e.project),l=t.filter(e=>!r.some(t=>t?.project.id===e.id)),o=s?[]:r.filter(e=>!t.some(t=>t.id===e?.project.id));if(0===l.length&&0===o.length)return;let d=[],c=[];for(let t of l){let n=new Promise(n=>{(0,il.Z)({environment:i,projectId:t.id,issueId:e,clientMutationId:a,onCompleted:()=>{n()},onError:e=>{d.push({projectId:t.id,projectTitle:t.title,operation:"add",error:e.message}),n()}})});c.push(n)}for(let e of o){let t=new Promise(t=>{(0,eZ.commitMutation)(i,{mutation:n8,variables:{input:{clientMutationId:a,itemId:e?.id,projectId:e?.project.id}},onCompleted:()=>{t()},onError:n=>{d.push({projectId:e?.project.id||"unknown",projectTitle:e?.project.title||"unknown",operation:"remove",error:n.message}),t()}})});c.push(t)}if(await Promise.all(c),d.length>0){let e=`Failed to update ${d.length} project(s): ${d.map(e=>`${e.operation} "${e.projectTitle}" (${e.error})`).join(", ")}`,t=Error("Unable to update issue projects");throw t.projectErrors=d,t.detailedMessage=e,t}}function iu({issueRepo:e,draftIssue:t,template:n,issueFormRef:i,onUpdate:a,onUpdateError:s,onClose:r}){let l=(0,eZ.useRelayEnvironment)(),[o,d]=(0,ep.useState)(!1),{clearSessionData:c,assignees:u,labels:m,milestone:p,issueType:h,projects:f}=(0,eD.u)(),g=(0,ep.useCallback)(()=>{let n=e.viewerIssueCreationPermissions;return{assignees:n?.assignable?u:void 0,labels:n?.labelable?m:void 0,milestone:n?.milestoneable?p:void 0,issueType:n?.typeable?h||null:void 0,projects:n?.triageable?f:void 0,hasInaccessibleProject:n?.triageable?t.rawProjectsInput?.includes(""):void 0}},[u,t.rawProjectsInput,e.viewerIssueCreationPermissions,h,m,p,f]),y=(0,ep.useCallback)(()=>{c(),i.current?.clearSessionStorage()},[c,i]),x=(0,ep.useCallback)(()=>{y(),r?.()},[y,r]),v=tc(),b=(0,ep.useCallback)(async o=>{o.preventDefault(),d(!0);try{let[o,c]=t.repository?.split("/")??[];if(!o||!c||!t.issueNumber){let e=Error("Invalid repository information");e.name="OTHER",s?.(e),d(!1);return}let u=await e0(l,o,c,t.issueNumber,!0);if(!u){let e=Error("Issue not found or no longer accessible");e.name="ISSUE_NOT_FOUND",s?.(e),d(!1);return}let m=(0,eU.O_)(t.name);if(!m.isValid){let e=Error(m.errorMessage||"Invalid title");e.name="INVALID_TITLE",s?.(e);return}let p=t.body??"";if(n&&(0,eq.GQ)(n.data)&&i.current){let e=i.current.getInvalidInputs();if(e.length>0){let t=Error("Please fix the highlighted errors in the form.");t.name="INVALID_FORM_INPUTS",s?.(t),e[0]?.focus();return}p=i.current.markdown()??""}p=await v(e,p);let h=(u.assignees?.nodes?.filter(e=>null!=e)??[]).some(e=>(0,te.v)(e.login)),f=(e.viewerIssueCreationPermissions?.assignable??!1)&&!u.repository?.isArchived&&!!u.repository?.isCopilotAgentEnabled&&!h,y=g(),b={body:p,assignees:y.assignees,labels:y.labels,milestone:y.milestone,issueType:y.issueType,projects:y.projects,hasInaccessibleProject:y.hasInaccessibleProject};await io({environment:l,currentIssue:u,draftIssue:t,proposedChanges:b,canUseCopilotAssignment:f,onCompleted:e=>{e.result.failed.length>0?s?.(e):e.result.successful.length>0&&e.result.issue?(x(),r(),a?.(e.result.issue)):(x(),r())}})}catch{let e=Error("Update failed");e.name="OTHER",s?.(e)}finally{d(!1)}},[x,t,l,g,i,e,r,a,s,n,v]);return(0,z.jsx)(z.Fragment,{children:(0,z.jsx)(eB.Q,{variant:"primary","data-testid":"update-issue-button",onClick:b,disabled:o||!t.bodyVersion,children:o?"Updating...":"Update"})})}try{iu.displayName||(iu.displayName="UpdateIssueButton")}catch{}function im(e){var t,n,i;let a,s,r,l,o,d,c,u,m,p,h,f,g,y,x,v,b,_,j,w,N,C,S,I,k,T,E=(0,K.c)(72),{isPreviewOpening:R,issue:L,onClose:A}=e,[D,P]=(0,ep.useState)(R),[O,F]=(0,ep.useState)(null),[B,M]=(0,ep.useState)(L.id);E[0]!==D?(l=()=>{if(D){let e=setTimeout(()=>P(!1),eT.t);return()=>clearTimeout(e)}},o=[D],E[0]=D,E[1]=l,E[2]=o):(l=E[1],o=E[2]),(0,ep.useEffect)(l,o),B!==L.id&&(M(L.id),F(null));let{selectedThreadID:V}=(0,Q.Pk)(),$=null!=L.repository||!L.isStreaming,U=(null!=L.bodyVersion||!L.isStreaming)&&!L.bodyVersion;E[3]!==L.repository?(d=L.repository?.split("/")??[],E[3]=L.repository,E[4]=d):d=E[4];let[q,W]=d;E[5]!==q||E[6]!==W?(c={owner:q,repo:W},E[5]=q,E[6]=W,E[7]=c):c=E[7];let{isLoading:H,data:G}=n2(c),Z=G?.id??"",J=L.template||"";E[8]!==Z||E[9]!==J?(u={repoId:Z,filename:J},E[8]=Z,E[9]=J,E[10]=u):u=E[10];let{isLoading:Y,data:X}=e4(u),ee=null!=G&&(!G.hasIssuesEnabled||null!=G.viewerInteractionLimitReasonHTML&&G.viewerInteractionLimitReasonHTML?.length>0),en=tc(),ei=tb();E[11]!==ei?(m=async e=>{await ei([e])},E[11]=ei,E[12]=m):m=E[12];let ea=m;E[13]!==ei||E[14]!==L.id||E[15]!==L.repository?(p=async e=>{if(e&&"object"==typeof e&&"result"in e){let{result:t}=e;if(void 0===t.issue){let e=Error("Issue data is unavailable");e.name="UNKNOWN_ERROR",F([e]);return}let n=t.issue?.repository?.databaseId;if(t.failed.length>0&&0===t.successful.length)(0,et.BI)("dotcom_chat.activate.error",{target:"ERROR_ISSUE_UPDATE_FAILED",mode:"immersive",message:`Issue update failed: ${t.failed.length} operations failed`,draftIssueId:L.id,sourceIssueId:n,repository:L.repository,errorType:"MULTIPLE_UPDATE_FAILURES",failedOperationCount:t.failed.length,failedOperations:JSON.stringify(t.failed.map(iw))}),F(t.failed.map(ij));else if(t.failed.length>0&&t.successful.length>0){let e=t.failed.map(i_).join(", ");t.issue.errors=t.failed.map(ib);let i=t.successful.join(", ");(0,et.BI)("dotcom_chat.activate.error",{target:"ERROR_ISSUE_UPDATE_PARTIAL_FAILURE",mode:"immersive",message:`Issue update partial failure. Failed: ${e}. Succeeded: ${i}`,draftIssueId:L.id,sourceIssueId:n,repository:L.repository,errorType:"PARTIAL_UPDATE_FAILURE",failedOperationCount:t.failed.length,failedOperations:JSON.stringify(t.failed.map(iv)),successfulOperations:JSON.stringify(t.successful)});try{await ei([t.issue])}catch{let t=Error(`Partial failure: ${e} failed`);t.name="PARTIAL_UPDATE_FAILURE",F([t])}}return}if(e instanceof Error){let t=Error(e.message);"name"in e?t.name=e.name:t.name="OTHER",(0,et.BI)("dotcom_chat.activate.error",{target:"ERROR_ISSUE_UPDATE_FAILED",mode:"immersive",message:e.message,issueId:L.id,errorType:"OTHER"}),F([t])}},E[13]=ei,E[14]=L.id,E[15]=L.repository,E[16]=p):p=E[16];let es=p,el=na(L),eo=n1(L,el),ed=(0,ep.useRef)(null),ec=(t=ed,(s=(0,K.c)(2))[0]!==t?(a=()=>!t.current||t.current.clientWidth<1024,s[0]=t,s[1]=a):a=s[1],r=a,(0,ep.useSyncExternalStore)(iN,r)),eu=(0,ep.useRef)(null);e:{let e;if(!O||0===O.length){h=null;break e}E[17]!==O?(e=O.map(ip),E[17]=O,E[18]=e):e=E[18],h=e}let em=h,eh=G??void 0;E[19]!==eh?(f={repository:eh},E[19]=eh,E[20]=f):f=E[20];let ef=f;if(D||!$||H||Y){let e;return E[21]===Symbol.for("react.memo_cache_sentinel")?(e=(0,z.jsx)(eN.Q,{optionConfig:{useViewportQueries:!1}}),E[21]=e):e=E[21],e}if(!G){let e;return E[22]!==L.repository?(e=(n=L.repository)?(0,z.jsx)(eE,{title:`${n} is not found`,description:"Please verify if the repository exists and is accessible before trying again.",icon:er.IssueDraftIcon}):(0,z.jsx)(eE,{title:"Malformed draft issue",description:"The drafted issue contains malformed data and the preview is not available. Please retry.",icon:er.IssueDraftIcon}),E[22]=L.repository,E[23]=e):e=E[23],e}if(ee){let e;return E[24]!==G?(e=(i=G).hasIssuesEnabled?i.viewerInteractionLimitReasonHTML?(0,z.jsx)(eE,{title:"You cannot update issues in this repository",description:i.viewerInteractionLimitReasonHTML,icon:er.IssueDraftIcon}):void 0:(0,z.jsx)(eE,{title:"Issues are disabled",description:"Issues are disabled on this repository. Please select a different repository above to continue updating your issue.",icon:er.IssueDraftIcon}),E[24]=G,E[25]=e):e=E[25],e}if(U){let e;return E[26]===Symbol.for("react.memo_cache_sentinel")?(e=(0,z.jsx)(eE,{title:"Malformed draft issue",description:"The drafted issue contains malformed data and the preview is not available. Please retry.",icon:er.IssueDraftIcon}),E[26]=e):e=E[26],e}let eg=`${L.id}@${V}`;E[27]!==ec||E[28]!==eg?(g=(0,ej.S)({storageKeyPrefix:eg,insidePortal:ec,disableCopilotAssignmentModal:!0}),E[27]=ec,E[28]=eg,E[29]=g):g=E[29],E[30]===Symbol.for("react.memo_cache_sentinel")?(y=(0,eC.G)("update-issue-preview"),E[30]=y):y=E[30],E[31]!==L?(x=(0,z.jsx)("div",{className:nD,children:(0,z.jsx)(eA,{item:L})}),E[31]=L,E[32]=x):x=E[32];let ey=X??void 0;E[33]!==G||E[34]!==A||E[35]!==ea||E[36]!==es||E[37]!==ey||E[38]!==L?(v=(0,z.jsx)("div",{className:nP,children:(0,z.jsx)(iu,{issueRepo:G,draftIssue:L,template:ey,issueFormRef:eu,onUpdate:ea,onUpdateError:es,onClose:A})}),E[33]=G,E[34]=A,E[35]=ea,E[36]=es,E[37]=ey,E[38]=L,E[39]=v):v=E[39],E[40]!==x||E[41]!==v?(b=(0,z.jsxs)("div",{className:nA,children:[x,v]}),E[40]=x,E[41]=v,E[42]=b):b=E[42];let ex=O&&em;E[43]===Symbol.for("react.memo_cache_sentinel")?(_=(0,z.jsx)(er.RepoIcon,{}),E[43]=_):_=E[43];let ev=`${G.owner.login}/${G.name}`;E[44]!==ev?(j=(0,z.jsx)("b",{children:ev}),E[44]=ev,E[45]=j):j=E[45],E[46]!==L?(w=(0,z.jsx)(nZ,{draftIssue:L}),E[46]=L,E[47]=w):w=E[47],E[48]!==j||E[49]!==w?(N=(0,z.jsxs)(eS.B,{direction:"horizontal",align:"center",gap:"condensed",className:"py-2",children:[_,j,w]}),E[48]=j,E[49]=w,E[50]=N):N=E[50];let eb=X??void 0;return E[51]!==G||E[52]!==en?(C=e=>en(G,e),E[51]=G,E[52]=en,E[53]=C):C=E[53],E[54]!==el||E[55]!==A||E[56]!==eo||E[57]!==eb||E[58]!==C||E[59]!==L?(S=(0,z.jsx)(nR,{draftIssue:L,template:eb,issueFormRef:eu,onChange:el,onClose:A,onBeforeCreate:C,onFieldChange:eo}),E[54]=el,E[55]=A,E[56]=eo,E[57]=eb,E[58]=C,E[59]=L,E[60]=S):S=E[60],E[61]!==ex||E[62]!==N||E[63]!==S?(I=(0,z.jsxs)("div",{className:nO,children:[ex,N,S]}),E[61]=ex,E[62]=N,E[63]=S,E[64]=I):I=E[64],E[65]!==b||E[66]!==I?(k=(0,z.jsxs)("div",{className:nL,ref:ed,children:[b,I]}),E[65]=b,E[66]=I,E[67]=k):k=E[67],E[68]!==ef||E[69]!==g||E[70]!==k?(T=(0,z.jsx)(ew.S,{optionConfig:g,preselectedData:ef,...y,children:k}),E[68]=ef,E[69]=g,E[70]=k,E[71]=T):T=E[71],T}function ip(e){let t,n;switch(e.name){case"LABELS_UPDATE_FAILED":t="Failed to update labels",n="Could not update issue labels. Please try again.";break;case"ASSIGNEES_UPDATE_FAILED":t="Failed to update assignees",n="Could not update issue assignees. Please try again.";break;case"ASSIGNCOPILOT_UPDATE_FAILED":t="Failed to update assignees",n="Could not assign Copilot to the issue. Please try again.";break;case"MILESTONE_UPDATE_FAILED":t="Failed to update milestone",n="Could not update issue milestone. Please try again.";break;case"ISSUETYPE_UPDATE_FAILED":t="Failed to update issue type",n="Could not update issue type. Please try again.";break;case"PROJECTS_UPDATE_FAILED":t="Failed to update projects",n="Could not update project assignments. Please try again.";break;case"CONTENT_UPDATE_FAILED":t="Failed to update content",n="Could not update issue title or body. Please try again.";break;case"FORBIDDEN":t="Permission Denied",n="You don't have permission to update this issue. Please contact the repo owner.";break;case"NOT_FOUND":t="Issue Not Found",n="The issue you are trying to update could not be found or no longer exists.";break;case"INVALID_TITLE":t="Invalid issue title",n=e.message;break;case"INVALID_FORM_INPUTS":t="Invalid form inputs",n=e.message;break;case"STALE_DATA":t="Issue Outdated",n="The issue you are editing has changed. Please copy your edits and have Copilot draft a new update.";break;case"PROJECT_UPDATE_FAILED":{t="Failed to update project assignment";let i=e.projectErrors??[];if(i.length>0){let e=i.filter(ix),t=i.filter(iy),a=[];e.length>0&&a.push(`Failed to add to ${e.length} project(s): ${e.map(ig).join(", ")}`),t.length>0&&a.push(`Failed to remove ${t.length} project(s): ${t.map(ih).join(", ")}`),n=`The issue was updated successfully, but there were problems with project assignments. ${a.join(". ")}.`}else n="The issue was updated successfully, but there were problems with project assignments.";break}default:t="An error has occurred",n="Please try again later."}let i="PROJECT_UPDATE_FAILED"===e.name?"warning":"critical";return(0,z.jsx)(eI.l,{variant:i,title:t,description:n},`error-${e.name}`)}function ih(e){return`"${e.projectTitle}"`}function ig(e){return`"${e.projectTitle}"`}function iy(e){return"remove"===e.operation}function ix(e){return"add"===e.operation}function iv(e){return{operation:e.operation,error:e.error.message}}function ib(e){return{message:e.error.message,type:"update"}}function i_(e){return e.operation}function ij(e){let t=Error(e.error.message);if(t.name=`${e.operation.toUpperCase()}_UPDATE_FAILED`,t.operation=e.operation,"projects"===e.operation){let n=e.error;n.projectErrors&&(t.projectErrors=n.projectErrors)}return t}function iw(e){return{operation:e.operation,error:e.error.message}}function iN(e){let t=new ResizeObserver(e);return t.observe(document.documentElement),()=>{t.unobserve(document.documentElement),t.disconnect()}}try{im.displayName||(im.displayName="UpdateIssuePreview")}catch{}var iC=n(98755);function iS(e,t,n){let i="head"===n?e.headFile:e.baseFile,a=i.reference,s=(0,Z.b)(),{isLoading:r,isError:l,data:o}=(0,e3.I)({queryKey:["copilot-reference-preview","copilot","references","file",a?(0,Y.Vb)(a):void 0,n],queryFn:async()=>{if(!a||"file"!==a.type||""!==i.value)return null;let r=await s.service.hydrateReference(a);return r.ok?(t({...e,["head"===n?"headFile":"baseFile"]:{...i,value:r.payload.contents,isStreaming:!1}}),r.payload):null},staleTime:1/0});return(0,ep.useEffect)(()=>{o?.contents&&i.value!==o.contents&&t({...e,["head"===n?"headFile":"baseFile"]:{...i,value:o.contents,isStreaming:!1}})},[o?.contents,e,t,i,n]),{isLoading:r,isError:l,data:o}}var iI=n(36903),ik=n(55099),iT=n(25506);function iE(e){let t,n,i,a,s,r=(0,K.c)(24),{left:l,right:o,view:d}=e,c=(0,ep.useId)(),u=(0,ep.useId)(),m=(0,ep.useId)(),p=(0,iT.a)(l);return r[0]!==l.name||r[1]!==c?(t=(0,z.jsxs)("span",{id:c,className:"sr-only",children:[l.name," original file contents"]}),r[0]=l.name,r[1]=c,r[2]=t):t=r[2],r[3]!==o.name||r[4]!==u?(n=(0,z.jsxs)("span",{id:u,className:"sr-only",children:[o.name," modified file contents"]}),r[3]=o.name,r[4]=u,r[5]=n):n=r[5],r[6]!==l.name||r[7]!==o.name||r[8]!==m?(i=(0,z.jsxs)("span",{id:m,className:"sr-only",children:[l.name," and ",o.name," unified diff view"]}),r[6]=l.name,r[7]=o.name,r[8]=m,r[9]=i):i=r[9],r[10]!==p||r[11]!==l.name||r[12]!==l.value||r[13]!==c||r[14]!==o.value||r[15]!==u||r[16]!==m||r[17]!==d?(a=(0,z.jsx)(ik.C,{fileName:l.name,left:l.value,leftLabelledBy:c,right:o.value,rightLabelledBy:u,spacing:p,unifiedLabelledBy:m,view:d}),r[10]=p,r[11]=l.name,r[12]=l.value,r[13]=c,r[14]=o.value,r[15]=u,r[16]=m,r[17]=d,r[18]=a):a=r[18],r[19]!==t||r[20]!==n||r[21]!==i||r[22]!==a?(s=(0,z.jsxs)("div",{children:[t,n,i,a]}),r[19]=t,r[20]=n,r[21]=i,r[22]=a,r[23]=s):s=r[23],s}try{iE.displayName||(iE.displayName="DiffView")}catch{}function iR(e){let t,n,i,a,s,r,l,o=(0,K.c)(15),{isUnifiedDiff:d,setIsUnifiedDiff:c}=e;o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,z.jsx)(ed.W.Anchor,{children:(0,z.jsx)(eo.K,{icon:er.GearIcon,"aria-label":"Open diff view settings",variant:"invisible"})}),o[0]=t):t=o[0],o[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,z.jsx)(ec.l.GroupHeading,{children:"Layout"}),o[1]=n):n=o[1],o[2]!==c?(i=()=>c(!0),o[2]=c,o[3]=i):i=o[3],o[4]!==d||o[5]!==i?(a=(0,z.jsx)(ec.l.Item,{selected:d,onSelect:i,children:"Unified"}),o[4]=d,o[5]=i,o[6]=a):a=o[6];let u=!d;return o[7]!==c?(s=()=>c(!1),o[7]=c,o[8]=s):s=o[8],o[9]!==u||o[10]!==s?(r=(0,z.jsx)(ec.l.Item,{selected:u,onSelect:s,children:"Split"}),o[9]=u,o[10]=s,o[11]=r):r=o[11],o[12]!==a||o[13]!==r?(l=(0,z.jsxs)(ed.W,{children:[t,(0,z.jsx)(ed.W.Overlay,{children:(0,z.jsx)(ec.l,{children:(0,z.jsxs)(ec.l.Group,{selectionVariant:"single",children:[n,a,r]})})})]}),o[12]=a,o[13]=r,o[14]=l):l=o[14],l}try{iR.displayName||(iR.displayName="DiffViewSettings")}catch{}let iL=e=>{let t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download=e.name||"file",n.click(),URL.revokeObjectURL(t)};function iA(e){let t,n,i,a,s,r,l,o,d,c=(0,K.c)(29),{fileDiff:u}=e,{updateItem:m}=(0,eb.xx)(),p=u.baseFile,h=u.headFile,[f,g]=(0,ep.useState)(!0),y=p.value&&h.value,x=!p.value&&h.value,v=p.value&&!h.value,{linesOfCode:b,size:_}=(0,iI.K3)(x||y?h:p),j=`${x?"Added: ":v?"Deleted: ":""} ${b} `;iS(u,m,"base"),iS(u,m,"head");let w=1===b?"line":"lines";c[0]!==j||c[1]!==_||c[2]!==w?(t=(0,z.jsx)("div",{className:"DiffPreview-module__toolbarLeft--o4LQ6",children:(0,z.jsxs)("p",{className:"DiffPreview-module__toolbarLoC--xR8Qi",children:[j," ",w," \xb7 ",_]})}),c[0]=j,c[1]=_,c[2]=w,c[3]=t):t=c[3],c[4]!==p.reference?(n=p.reference&&"url"in p.reference&&(0,z.jsx)(eo.K,{as:"a","aria-label":"Open file in a new tab",icon:er.LinkExternalIcon,variant:"invisible",href:p.reference.url,target:"_blank",rel:"noopener noreferrer"}),c[4]=p.reference,c[5]=n):n=c[5],c[6]!==h.value?(i=(0,z.jsx)(iC.T,{textToCopy:h.value,ariaLabel:"Copy code",onCopy:iD}),c[6]=h.value,c[7]=i):i=c[7],c[8]!==h.name||c[9]!==h.value?(a=(0,z.jsx)(eo.K,{"aria-label":"Download code",icon:er.DownloadIcon,variant:"invisible",onClick:()=>{let e=h.name;iL(new File([h.value],e)),(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_DOWNLOAD",mode:"immersive"})}}),c[8]=h.name,c[9]=h.value,c[10]=a):a=c[10],c[11]!==y||c[12]!==f?(s=y&&(0,z.jsx)(iR,{setIsUnifiedDiff:g,isUnifiedDiff:f}),c[11]=y,c[12]=f,c[13]=s):s=c[13],c[14]!==n||c[15]!==i||c[16]!==a||c[17]!==s?(r=(0,z.jsxs)("div",{className:"DiffPreview-module__toolbarActions--EAoyT",children:[n,i,a,s]}),c[14]=n,c[15]=i,c[16]=a,c[17]=s,c[18]=r):r=c[18],c[19]!==t||c[20]!==r?(l=(0,z.jsxs)("div",{className:"DiffPreview-module__toolbar--RiBuK",children:[t,r]}),c[19]=t,c[20]=r,c[21]=l):l=c[21];let N=f?"unified":"split";return c[22]!==p||c[23]!==h||c[24]!==N?(o=(0,z.jsx)(iE,{left:p,right:h,view:N}),c[22]=p,c[23]=h,c[24]=N,c[25]=o):o=c[25],c[26]!==o||c[27]!==l?(d=(0,z.jsxs)("div",{className:"DiffPreview-module__container--BN04s",children:[l,o]}),c[26]=o,c[27]=l,c[28]=d):d=c[28],d}function iD(){return(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_COPY",mode:"immersive"})}try{iA.displayName||(iA.displayName="DiffPreview")}catch{}var iP=n(34522),iO=n(72439),iF=n(50899),iB=n(39768),iM=n(84268),iV=n(23125);let i$="FilePreview-module__previewContainer--KRQup";var iU=n(74807),iq=n(79634);let iW="ERROR",iH="LOADING",iG="READY";function iz(e,t){e&&e.postMessage&&e.postMessage(JSON.stringify(t),"*")}var iK=n(71315);function iQ(e){let t,n=(0,K.c)(4),{error:i}=e;if(n[0]!==i){let e,a,s=i?.split(`
`)??[];n[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,z.jsx)("span",{className:"ErrorMessage-module__errorIcon--ODD8l",children:(0,z.jsx)(er.StopIcon,{size:24})}),a=(0,z.jsx)("h2",{className:"ErrorMessage-module__errorHeader--hmJF7",children:"HTML rendering failed"}),n[2]=e,n[3]=a):(e=n[2],a=n[3]),t=(0,z.jsxs)("div",{className:"ErrorMessage-module__error--xol56",children:[e,a,s.length>0?(0,z.jsx)("p",{children:s.map(iZ)}):(0,z.jsx)("p",{children:"Refresh the page or check the HTML"})]}),n[0]=i,n[1]=t}else t=n[1];return t}function iZ(e){return(0,z.jsxs)(z.Fragment,{children:[e,(0,z.jsx)("br",{})]},`error-line-${e}}`)}try{iQ.displayName||(iQ.displayName="ErrorMessage")}catch{}function iJ(e){let t,n,i,a,s=(0,K.c)(14),{content:r,inlineScripts:l,inlineStyles:o,headScripts:d,bodyScripts:c,styles:u,viewscreenUrl:m}=e,p=(0,tn.G7)("viewscreen_sandbox");s[0]!==m?(n=new URL("view/sandbox?url=client://sandbox",m).toString(),t=new URL(n,iK.fV.origin),s[0]=m,s[1]=t,s[2]=n):(t=s[1],n=s[2]);let h=t.origin,f=(0,ep.useRef)(null),g=(0,ep.useRef)(null);s[3]!==c||s[4]!==r||s[5]!==d||s[6]!==l||s[7]!==o||s[8]!==u?(i={content:r,headScripts:d,bodyScripts:c,inlineScripts:l,inlineStyles:o,styles:u},s[3]=c,s[4]=r,s[5]=d,s[6]=l,s[7]=o,s[8]=u,s[9]=i):i=s[9];let{renderState:y,errorMessage:x}=function(e,t,n,i){let a,s,r,l,o,d,c=(0,K.c)(16),[u,m]=(0,ep.useState)(iH),[p,h]=(0,ep.useState)();c[0]!==t||c[1]!==e||c[2]!==i?(a=n=>(function(e,t,n,i,a,s){let r=function(e){var t;let n=e.data;if(!n)return null;if("string"==typeof n)try{n=JSON.parse(n)}catch{return null}return"object"==typeof(t=n)&&t&&"render"===t.type&&"string"==typeof t.body&&"object"==typeof t.payload?n:null}(e);if(!r)return;let l=r.body,o=n.current?.contentWindow;switch(l){case"hello":iz(o,{type:"render:cmd",body:{cmd:"ack",ack:!0}}),iz(o,{type:"render:cmd",body:{cmd:"branding",branding:!1}});break;case"error":case"error:fatal":case"error:invalid":s(iW),r.payload?.error&&a(r.payload.error);break;case"loading":s(iH);break;case"loaded":if(!n.current||!i.current)return;s("LOADED");break;case"ready":if(!n.current||!i.current)return;s(iG)}})(n,0,e,t,h,m),c[0]=t,c[1]=e,c[2]=i,c[3]=a):a=c[3];let f=a;return c[4]!==f?(s=()=>(window.addEventListener("message",f),()=>window.removeEventListener("message",f)),r=[f],c[4]=f,c[5]=s,c[6]=r):(s=c[5],r=c[6]),(0,ep.useEffect)(s,r),c[7]!==t||c[8]!==e||c[9]!==n||c[10]!==u?(l=()=>{if(u===iG&&e.current&&t.current){var i;let a;i=e.current,t.current,a={type:"render:cmd",body:{cmd:"sandbox:data","sandbox:data":{...n}}},iz(i.contentWindow,a)}},o=[t,e,n,u],c[7]=t,c[8]=e,c[9]=n,c[10]=u,c[11]=l,c[12]=o):(l=c[11],o=c[12]),(0,ep.useEffect)(l,o),c[13]!==p||c[14]!==u?(d={renderState:u,errorMessage:p},c[13]=p,c[14]=u,c[15]=d):d=c[15],d}(f,g,i,h);if(!p)return null;for(let e of((0,et.BI)("sandbox_view.activate",{target:"SANDBOX_INITIALIZED",enabled:p}),Array.from(new Set([...d||[],...c||[],...u||[]].map(e=>{try{return new URL(e,h).origin}catch{return null}}).filter(Boolean)))))(0,et.BI)("sandbox_view.activate",{target:"SANDBOX_RESOURCE_ORIGIN",origin:e});return s[10]!==x||s[11]!==y||s[12]!==n?(a=(0,z.jsx)("div",{ref:g,className:"SandboxView-module__container--PAb4m",children:y===iW?(0,z.jsx)(iQ,{error:x}):(0,z.jsx)("iframe",{ref:f,className:"SandboxView-module__iframe--r6S4N",sandbox:"allow-scripts allow-same-origin",title:"Preview page for the user provided code",src:n})}),s[10]=x,s[11]=y,s[12]=n,s[13]=a):a=s[13],a}try{iJ.displayName||(iJ.displayName="SandboxView")}catch{}function iY(e,t,n){let i=`file:${e}`;if(!n.has(i))return null;let a=n.get(i)??[],s=a[a.length-1];if(!s)return null;let r=t.get(s);return r&&"file"===r.type?r:null}function iX(e){var t;let n,i,a,s,r,l=(0,K.c)(15),{file:o}=e,{previewUrl:d}=(0,iq.X)(),{items:c,versionedItems:u}=(0,eb.xx)(),{scripts:m,styles:p,files:h}=(t=o.value,a=Array.from(t.matchAll(/<script.*?src="(.*?)"/g)).map(e=>e[1]).filter(e=>void 0!==e).map(e=>iY(e,c,u)),s=(function(e){let t=Array.from(e.matchAll(/<link([^>]+)>/g)).map(e=>e[1]).filter(e=>void 0!==e),n=[];for(let e of t){if("stylesheet"!==/rel\s*=\s*"([^"]+)"/.exec(e)?.[1])continue;let t=/href\s*=\s*"([^"]+)"/.exec(e)?.[1];t&&n.push(t)}return n})(t).map(e=>iY(e,c,u)),r=Array.from(t.matchAll(/<script(?![^>]*\bsrc=).*?>(.*?)<\/script>/gms)).map(e=>e[1]).filter(e=>void 0!==e),{scripts:[...a.map(e=>e?.value??""),...r,'document.dispatchEvent(new Event("DOMContentLoaded"))'].join(`
`),styles:s.map(e=>e?.value??"").join(`
`),files:a.concat(s)}),[f,g]=(0,ep.useState)(!1),y=(o.isStreaming||h.some(i0))&&!f;l[0]!==y||l[1]!==g?(n=()=>{if(y){let e=setTimeout(()=>{g(!0)},3e3);return()=>clearTimeout(e)}},l[0]=y,l[1]=g,l[2]=n):n=l[2],(0,ep.useEffect)(n),l[3]!==o.value?(i=function(e){let t=Array.from(e.matchAll(/<script.*?src="(https:\/\/.*?)"/g)).map(e=>e[1]).filter(e=>void 0!==e),n=[],i=[];for(let a of t)e.substring(e.indexOf("<head"),e.indexOf("</head>")).includes(a)?n.push(a):i.push(a);return{headScripts:n,bodyScripts:i,styles:Array.from(e.matchAll(/<link rel="stylesheet" href="(https:\/\/.*?)"/g)).map(e=>e[1]).filter(e=>void 0!==e)}}(o.value),l[3]=o.value,l[4]=i):i=l[4];let{headScripts:x,bodyScripts:v,styles:b}=i;if(y){let e;return l[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,z.jsxs)("div",{className:"HtmlPreview-module__loadingContainer--t3YC7",children:[(0,z.jsx)("div",{className:"HtmlPreview-module__loadingHead--XAabR",children:(0,z.jsx)(iU.N,{animationType:"thinking",loopAnimation:!0})}),(0,z.jsx)("p",{className:"HtmlPreview-module__loadingText--WYn1B",children:"Preparing your preview\u2026"})]}),l[5]=e):e=l[5],e}{let e;return l[6]!==v||l[7]!==b||l[8]!==o.id||l[9]!==o.value||l[10]!==x||l[11]!==d||l[12]!==m||l[13]!==p?(e=(0,z.jsx)(iJ,{inlineScripts:m,inlineStyles:p,headScripts:x,bodyScripts:v,styles:b,content:o.value,viewscreenUrl:d},o.id),l[6]=v,l[7]=b,l[8]=o.id,l[9]=o.value,l[10]=x,l[11]=d,l[12]=m,l[13]=p,l[14]=e):e=l[14],e}}function i0(e){return!e||e.isStreaming}try{iX.displayName||(iX.displayName="HtmlPreview")}catch{}var i1=n(70840);let i2={code:er.CodeIcon,preview:er.EyeIcon,diff:er.FileDiffIcon};function i3({isPreviewOpening:e,file:t,onClose:n}){let{updateItem:i,items:a,versionedItems:s}=(0,eb.xx)(),r=(0,Q.Pk)(),l=t.isStreaming?r.messages[r.messages.length-1]:r.messages.find(e=>e.id===t.messageId),{linesOfCode:o,isPreviewable:d,size:c}=(0,iI.K3)(t);!function(e,t){let n,i,a,s,r,l,o,d=(0,K.c)(25),{reference:c}=e,u=(0,Z.b)(),m=c?.type;d[0]!==c?(n=c?(0,Y.Vb)(c):void 0,d[0]=c,d[1]=n):n=d[1],d[2]!==m||d[3]!==n?(i=["copilot-reference-preview","copilot","references",m,n],d[2]=m,d[3]=n,d[4]=i):i=d[4],d[5]!==e||d[6]!==u||d[7]!==c||d[8]!==t?(a=async()=>{if(!c||"file"!==c.type||e.value)return null;let n=await u.service.hydrateReference(c);return n.ok?(t({...e,value:n.payload.contents,isStreaming:!1}),n.payload):null},d[5]=e,d[6]=u,d[7]=c,d[8]=t,d[9]=a):a=d[9],d[10]!==i||d[11]!==a?(s={queryKey:i,queryFn:a,staleTime:1/0},d[10]=i,d[11]=a,d[12]=s):s=d[12];let{isLoading:p,isError:h,data:f}=(0,e3.I)(s);d[13]!==f||d[14]!==e||d[15]!==t?(r=()=>{f?.contents&&e.value!==f.contents&&t({...e,value:f.contents,isStreaming:!1})},d[13]=f,d[14]=e,d[15]=t,d[16]=r):r=d[16];let g=f?.contents;d[17]!==e||d[18]!==g||d[19]!==t?(l=[g,e,t],d[17]=e,d[18]=g,d[19]=t,d[20]=l):l=d[20],(0,ep.useEffect)(r,l),d[21]!==f||d[22]!==h||d[23]!==p?(o={isLoading:p,isError:h,data:f},d[21]=f,d[22]=h,d[23]=p,d[24]=o):o=d[24]}(t,i);let[u,m]=(0,ep.useState)("code"),[p,h]=(0,ep.useState)(!0),[f,g]=(0,ep.useState)(void 0),y=(0,ep.useCallback)(e=>{g(e)},[]),x=(0,eL.SX)(t,a,s),v=!!x;(0,ep.useEffect)(()=>{(l?.error?.type==="publicCode"||l?.error?.type==="filtered")&&n()},[l?.error,n]);let b=[["code","Code"]],_="code";return d&&(b.unshift(["preview","Preview"]),_="preview"===u?"preview":_),v&&(b.push(["diff","Diff"]),_="diff"===u?"diff":_),(0,z.jsxs)("div",{className:"FilePreview-module__container--P2h3J",children:[(0,z.jsxs)("div",{className:"FilePreview-module__toolbar--ZZWN1",children:[(0,z.jsxs)("div",{className:"FilePreview-module__toolbarLeft--RCKxW",children:[(d||v)&&(0,z.jsx)(iB.I,{"aria-label":"File view",size:"small",onChange:e=>{let t=b[e]?.[0]||"code";m(t),(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_VIEW_OPTION",option:t})},children:b.map(([e,t])=>{let n=i2[e];return(0,z.jsx)(iB.I.IconButton,{"aria-label":t,icon:(0,z.jsx)(n,{size:"small"}),selected:u===e},e)})}),(0,z.jsx)(eA,{item:t,onVersionSelect:y}),(0,z.jsx)(i7,{file:t}),(!t.reference||!("url"in t.reference))&&(0,z.jsxs)("p",{className:"FilePreview-module__toolbarLoC--I7tcY",children:[o," ",1===o?"line":"lines"," \xb7 ",c]})]}),(0,z.jsxs)("div",{className:"FilePreview-module__toolbarActions--h04aW",children:[t.reference&&"url"in t.reference&&(0,z.jsx)(eo.K,{as:"a",type:void 0,"aria-label":"Open file in a new tab",icon:er.LinkExternalIcon,variant:"invisible",href:t?.reference?.url,target:"_blank",rel:"noopener noreferrer",size:"small"}),(0,z.jsx)(iC.T,{textToCopy:t.value,ariaLabel:"Copy code",onCopy:()=>(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_COPY",mode:"immersive"}),size:"small"}),(0,z.jsx)(eo.K,{"aria-label":"Download code",icon:er.DownloadIcon,variant:"invisible",onClick:()=>{let e=(()=>{let e=t.name.lastIndexOf(".");if(e>0){let n=t.name.substring(0,e),i=t.name.substring(e);return void 0!==f?`${n}_${f}${i}`:t.name}return void 0!==f?`${t.name}_${f}`:t.name})();iL(new File([t.value],e)),(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_DOWNLOAD",mode:"immersive"})},size:"small"}),"diff"===_&&(0,z.jsx)(iR,{isUnifiedDiff:p,setIsUnifiedDiff:h})]})]}),(0,z.jsx)("div",{className:"FilePreview-module__content--HoIot",children:"preview"===_?(0,z.jsx)(i6,{file:t}):"diff"===_?(0,z.jsx)(iE,{left:x,right:t,view:p?"unified":"split"}):(0,z.jsx)(i5,{file:t,isPreviewOpening:e})})]})}let i4=(0,iV.A)((e,t,n)=>{n({...e,value:t})},500,{leading:!1,trailing:!0});function i5({file:e,isPreviewOpening:t}){var n,i;let a,{openItem:s,updateItem:r,versionedItems:l}=(0,eb.xx)(),o=(0,Z.b)(),d=(0,ep.useRef)(!1),c=(n=l,i=e,(a=n.get((0,eL.oy)(i.id))??[])[a.length-1]===i.id),u=!e.reference||"thread-scoped-file"===e.reference.type,m=u&&!e.isStreaming&&c,p=(0,ep.useId)(),h=(0,iT.a)(e),[f,g]=(0,ep.useState)(),y=f?.id===e.id?f.value:e.value,[x,v]=(0,ep.useState)(!0),{messages:b,currentReferences:_}=(0,Q.Pk)(),j=(0,ep.useRef)(""),w=(0,ep.useRef)(null),[N,C]=(0,ep.useState)(void 0);(0,ep.useEffect)(()=>{!_||_.some(t=>"thread-scoped-snippet"===t.type&&t.name===e.name)||C(null)},[_,e.name]);let S=(0,ep.useMemo)(()=>{if(!X.W.selectionAttachments)return;let t=iO.E.getAttachmentSizeLimit();return{debounceMs:0,onSelection:({view:n,text:i,fromLine:a,toLine:s})=>{if(!i||""===i.trim()||!o)return;let r=n.state.doc.line(a),l=n.state.doc.line(s),d=r.from,c=l.to,u=n.state.doc.sliceString(d,c),m=`${e.id}:${d}-${c}:${e.value.length}`;if(j.current===m||new Blob([u]).size>t)return;let p={type:"thread-scoped-snippet",name:e.name,snippetText:u,language:e.language||"text",range:{start:a,end:s}};w.current?o.replaceReference(w.current,p):o.addReference(p,"immersive-selection"),w.current=p,C({from:d,to:c}),j.current=m},onClear:()=>{j.current&&(o&&w.current&&o.removeReference(w.current),j.current="",w.current=null,C(null))}}},[e.id,e.name,e.value,e.language,o]);(0,ep.useEffect)(()=>{o&&w.current&&o.removeReference(w.current),w.current=null,j.current="",C(null)},[e.id,o]),(0,ep.useEffect)(()=>()=>{o&&w.current&&o.removeReference(w.current),w.current=null,j.current=""},[o]),(0,ep.useEffect)(()=>{v(!1)},[]),(0,ep.useEffect)(()=>{t&&(d.current=!0)},[t]);let I=(0,iF.K)((0,ep.useCallback)(t=>{if(m&&t!==e.value)if(e.isUserEdited)g({value:t,id:e.id}),i4(e,t,r);else{let n={...e,messageId:tg.Wp,id:`file:${e.name}#${b.length}`,timestamp:new Date,isUserEdited:!0,value:t};r(n),s(n.id),g({value:t,id:n.id})}},[e,m,b.length,s,r]));return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("span",{id:p,className:"sr-only",children:[e.name," file contents"]}),(0,z.jsx)(iP.default,{ariaLabelledBy:p,containerClassName:"FilePreview-module__codeMirrorContainer--lxGn_",fileName:e.name,height:"100%",isReadOnly:!m,spacing:h,value:x?"":y,onChange:I,focusNextRenderRef:d,placeholder:"Loading...",hideHelp:!0,selectionListenerOptions:S,selectionAttachmentRange:N}),u&&!c&&(0,z.jsx)("div",{className:"FilePreview-module__footer--o2xcM",children:"Switch to the latest version to edit this file."})]})}function i6({file:e}){return"markdown"===e.language?(0,z.jsx)("div",{className:i$,children:(0,z.jsx)(i1.G,{content:e})}):"html"===e.language?(0,z.jsx)("div",{className:i$,children:(0,z.jsx)(iX,{file:e})}):null}function i7({file:e}){let t=e.reference;if(!t||"file"!==t.type||!t.url)return null;let n=(0,iI.as)(t.url);if(!n)return null;let{repoOwner:i,repoName:a,filePath:s}=n;return(0,z.jsx)("div",{className:"FilePreview-module__fileLinkContainer--FTT5B",children:(0,z.jsx)(iM.A,{className:"FilePreview-module__filePath--rER6j",href:t.url,rel:"noopener noreferrer",children:(0,iI.L2)(i,a,s)})})}try{i3.displayName||(i3.displayName="FilePreview")}catch{}try{i5.displayName||(i5.displayName="CodeMirrorView")}catch{}try{i6.displayName||(i6.displayName="PreviewComponent")}catch{}try{i7.displayName||(i7.displayName="FileLink")}catch{}function i9(e){let t,n=(0,K.c)(3),{image:i}=e;return n[0]!==i.altText||n[1]!==i.url?(t=(0,z.jsx)("div",{className:"ImagePreview-module__container--lxQZb",children:(0,z.jsx)("img",{className:"ImagePreview-module__imageElement--WTRgY",src:i.url,alt:i.altText})}),n[0]=i.altText,n[1]=i.url,n[2]=t):t=n[2],t}try{i9.displayName||(i9.displayName="ImagePreview")}catch{}let i8=(0,ep.memo)(function(e){let t,n,i,a,s,r,l=(0,K.c)(17),{isPreviewOpening:o,issue:d,onClose:c}=e,[u,m]=(0,ep.useState)(o);l[0]!==u?(t=()=>{if(u){let e=setTimeout(()=>m(!1),eT.t);return()=>clearTimeout(e)}},n=[u],l[0]=u,l[1]=t,l[2]=n):(t=l[1],n=l[2]),(0,ep.useEffect)(t,n),l[3]!==d.href?(i=(0,z.jsx)(eo.K,{icon:er.LinkExternalIcon,variant:"invisible","aria-label":"Open issue in new tab",onClick:()=>{window.open(d.href,"_blank")}}),l[3]=d.href,l[4]=i):i=l[4];let p=i;l[5]!==c||l[6]!==p?(a={navigate:t$.l,insideSidePanel:!0,shouldSkipSetDocumentTitle:!0,useViewportQueries:!1,onIssueDelete:c,onRemovedFromProject:t$.l,onIssueUpdate:t$.l,additionalHeaderActions:p,showRepositoryPill:!0},l[5]=c,l[6]=p,l[7]=a):a=l[7];let h=a;l[8]!==d.number||l[9]!==d.owner||l[10]!==d.repo?(s={owner:d.owner,repo:d.repo,number:d.number,type:"Issue"},l[8]=d.number,l[9]=d.owner,l[10]=d.repo,l[11]=s):s=l[11];let f=s;if(u){let e;return l[12]!==h?(e=(0,z.jsx)(eN.Q,{optionConfig:h}),l[12]=h,l[13]=e):e=l[13],e}return l[14]!==f||l[15]!==h?(r=(0,z.jsx)("div",{className:"IssuePreview-module__container--O4xBI",children:(0,z.jsx)(n6.e,{children:(0,z.jsx)(n5.cI,{itemIdentifier:f,optionConfig:h})})}),l[14]=f,l[15]=h,l[16]=r):r=l[16],r});try{i8.displayName||(i8.displayName="IssuePreview")}catch{}function ae(e){e.stopPropagation()}function at(e){let t,n,i,a,s=(0,K.c)(7),{jobResult:r}=e,l=ep.useRef(null),[o,d]=(0,ep.useState)(null),[c,u]=(0,ep.useState)(null);s[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{e.detail.fetchResponse.succeeded||(u("Failed to load markdown preview"),e.preventDefault(),e.stopPropagation())},s[0]=t):t=s[0];let m=t;return s[1]!==r?(n=()=>{if(l.current){var e;let t,n,i=l.current;return i.addEventListener("turbo:before-fetch-request",ae),i.addEventListener("turbo:before-fetch-response",m),d((t=[(e=r).repoOwner,e.repoName,"actions","runs",e.workflowId,"job",e.jobId],(n=new URL(`/${t.map(String).map(encodeURIComponent).join("/")}`,window.location.origin)).searchParams.set("partial","true"),n.toString())),()=>{i.removeEventListener("turbo:before-fetch-request",ae),i.removeEventListener("turbo:before-fetch-response",m)}}},i=[m,r],s[1]=r,s[2]=n,s[3]=i):(n=s[2],i=s[3]),(0,ep.useEffect)(n,i),s[4]!==c||s[5]!==o?(a=(0,z.jsx)("div",{className:"JobResultPreview-module__container--ITPQp",children:c?(0,z.jsxs)("div",{className:"JobResultPreview-module__error--UiqJQ",children:[(0,z.jsx)("span",{className:"JobResultPreview-module__errorIcon--Gr5_m",children:(0,z.jsx)(er.StopIcon,{size:24})}),(0,z.jsx)("h2",{className:"JobResultPreview-module__errorHeader--u1d_F",children:"Failed to load job results"})]}):(0,z.jsx)("turbo-frame",{src:o,ref:l,id:"workflow_run_content",target:"_top",children:(0,z.jsx)("div",{className:"JobResultPreview-module__spinner--NGGeF",children:(0,z.jsx)(eF.A,{srText:"Loading Markdown preview\u2026"})})})}),s[4]=c,s[5]=o,s[6]=a):a=s[6],a}try{at.displayName||(at.displayName="JobResultPreview")}catch{}var an=n(97189),ai=n(73783);function aa(e){let t,n,i,a,s,r,l,o,d,c,u,m,p,h,f=(0,K.c)(18),{spec:g}=e,[y,x]=(0,ep.useState)(!1),{createBreakdown:v}=(u=(0,K.c)(6),m=(0,Z.b)(),p=(0,Q.Pk)(),u[0]!==m||u[1]!==g||u[2]!==p?(d=async e=>{let t=g.name||g.tag;(0,et.BI)("copilot.planning_tasklist",{target:`PLANNING_TASK_SPEC_BREAKDOWN_${e.toUpperCase()}`,mode:"immersive",threadId:(0,ty.W)(p)?.id,messageId:g.messageId});let n={type:"text",name:`timeline-event: {"type": "planning-breakdown", "markdownContent": "Breaking down '${t}' into ${e}s..."}`},i="task"===e?`
Break down the ${g.tag} spec into tasks.
`:`
Break down the ${g.tag} spec into tasks, but instead of returning a task list, create an issue for each task.
- The issues should be nested under one parent issue, which is a feature-level issue containing the ${g.tag} spec contents. The name should be the same as the spec name.
- Issues should be blocked by their logical dependencies.
`;await m.sendChatMessage({thread:(0,ty.W)(p),content:i,references:[n],topic:p.currentTopic,context:p.context,customInstructions:p.customInstructions,model:p.model,intent:tg.wh.planningAgent})},u[0]=m,u[1]=g,u[2]=p,u[3]=d):d=u[3],h=d,u[4]!==h?(c={createBreakdown:h},u[4]=h,u[5]=c):c=u[5],c),b=g.isStreaming||!g.content;return f[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,z.jsx)("div",{className:"SpecPreviewFooter-module__footerText--NBYrK",children:"Consider breaking this up into multiple tasks"}),f[0]=t):t=f[0],f[1]!==v?(n=()=>v("task"),f[1]=v,f[2]=n):n=f[2],f[3]!==b||f[4]!==n?(i=(0,z.jsx)(eB.Q,{className:"SpecPreviewFooter-module__button--jMuoa",leadingVisual:er.TasklistIcon,onClick:n,disabled:b,inactive:b,children:"Break down into smaller tasks"}),f[3]=b,f[4]=n,f[5]=i):i=f[5],f[6]===Symbol.for("react.memo_cache_sentinel")?(a=(0,z.jsx)("div",{className:"SpecPreviewFooter-module__divider--U_nTw"}),f[6]=a):a=f[6],f[7]!==b?(s=(0,z.jsx)(ed.W.Anchor,{children:(0,z.jsx)(eo.K,{"aria-label":"Task break down options\u2026",className:"SpecPreviewFooter-module__menuButton--r_s5t",icon:er.TriangleDownIcon,disabled:b,inactive:b})}),f[7]=b,f[8]=s):s=f[8],f[9]!==v?(r=(0,z.jsx)(ed.W.Overlay,{children:(0,z.jsx)(ec.l,{children:(0,z.jsx)(ec.l.Item,{onSelect:()=>v("issue"),children:"Break down into issues"})})}),f[9]=v,f[10]=r):r=f[10],f[11]!==y||f[12]!==s||f[13]!==r?(l=(0,z.jsxs)(ed.W,{open:y,onOpenChange:x,children:[s,r]}),f[11]=y,f[12]=s,f[13]=r,f[14]=l):l=f[14],f[15]!==i||f[16]!==l?(o=(0,z.jsxs)("div",{className:"SpecPreviewFooter-module__footer--M1fJw",children:[t,(0,z.jsxs)(ai.A,{className:"SpecPreviewFooter-module__buttonGroup--ZKWsL",children:[i,a,l]})]}),f[15]=i,f[16]=l,f[17]=o):o=f[17],o}try{aa.displayName||(aa.displayName="SpecPreviewFooter")}catch{}function as(e){let t,n,i,a=(0,K.c)(7),{error:s,onDismiss:r}=e,[l,o]=(0,ep.useState)(0);return a[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{o(ar)},a[0]=t):t=a[0],a[1]!==s?(n=[s],a[1]=s,a[2]=n):n=a[2],(0,ep.useEffect)(t,n),a[3]!==l||a[4]!==s.message||a[5]!==r?(i=(0,z.jsx)(eI.l,{"aria-atomic":"true",role:"alert",variant:"critical",title:"Failed to start task",hideTitle:!0,description:s.message,onDismiss:r},l),a[3]=l,a[4]=s.message,a[5]=r,a[6]=i):i=a[6],i}function ar(e){return e+1}try{as.displayName||(as.displayName="TaskErrorBanner")}catch{}var al=n(62189),ao=n(91747);let ad=(0,ep.forwardRef)((e,t)=>{let n,i,a,s,r,l,o,d=(0,K.c)(23),{children:c,inactive:u,isLoading:m,isMenuOpen:p,loadingAnnouncement:h,menuItems:f,onMenuOpenChange:g,onStartClick:y,primaryButtonText:x}=e,v=void 0===h?"Starting task\u2026":h,b=void 0===x?"Start agent task":x;return d[0]!==u||d[1]!==m||d[2]!==v||d[3]!==y||d[4]!==b||d[5]!==t?(n=(0,z.jsx)(eB.Q,{className:"TaskActions-module__button--mfKv1",inactive:u,leadingVisual:er.AgentIcon,loading:m,loadingAnnouncement:v,onClick:y,ref:t,variant:"primary",children:b}),d[0]=u,d[1]=m,d[2]=v,d[3]=y,d[4]=b,d[5]=t,d[6]=n):n=d[6],d[7]===Symbol.for("react.memo_cache_sentinel")?(i=(0,z.jsx)("div",{className:"TaskActions-module__divider--mfTun"}),d[7]=i):i=d[7],d[8]!==m?(a=(0,z.jsx)(ed.W.Anchor,{"aria-label":"Task options",children:(0,z.jsx)(eo.K,{"aria-label":"Task options\u2026",className:"TaskActions-module__menuButton--KexmI",disabled:m,icon:er.TriangleDownIcon,variant:"primary"})}),d[8]=m,d[9]=a):a=d[9],d[10]!==f?(s=f.map(ac),d[10]=f,d[11]=s):s=d[11],d[12]!==s?(r=(0,z.jsx)(ed.W.Overlay,{children:(0,z.jsx)(ec.l,{children:s})}),d[12]=s,d[13]=r):r=d[13],d[14]!==p||d[15]!==g||d[16]!==a||d[17]!==r?(l=(0,z.jsxs)(ed.W,{open:p,onOpenChange:g,children:[a,r]}),d[14]=p,d[15]=g,d[16]=a,d[17]=r,d[18]=l):l=d[18],d[19]!==c||d[20]!==n||d[21]!==l?(o=(0,z.jsxs)(ai.A,{className:"TaskActions-module__buttonGroup--HfUFm",children:[n,c,i,l]}),d[19]=c,d[20]=n,d[21]=l,d[22]=o):o=d[22],o});function ac(e){return(0,z.jsx)(ec.l.Item,{disabled:e.disabled,onSelect:e.onSelect,children:e.label},e.label)}ad.displayName="TaskActions";var au=n(65529),am=n(14496),ap=n(25811),ah=n(66990),af=n(86877),ag=n(82156),ay=n(44095);function ax(e){var t,n;let i,a,s,r,l,o,d,c,u,m,p,h,f,g,y,x,v,b,_,j,w,N,C,S,I,k,T=(0,K.c)(52),{previewItem:E,initialRepo:R,topRepos:L,onStart:A,onCancel:D}=e,[P,O]=(0,ep.useState)(R),[F,B]=(0,ep.useState)(""),[M,V]=(0,ep.useState)(""),[$,U]=(0,ap.s)();T[0]===Symbol.for("react.memo_cache_sentinel")?(i=(0,tn.G7)("copilot_swe_agent_use_subagents"),T[0]=i):i=T[0];let q=i&&M,{data:W,isLoading:H}=(t=P?.owner?.login,n=P?.name,I=(0,K.c)(13),k=(0,eZ.useRelayEnvironment)(),I[0]!==k?(w=JSON.stringify(k),I[0]=k,I[1]=w):w=I[1],I[2]!==n||I[3]!==t||I[4]!==w?(N=["repository-default-branch",w,t,n],I[2]=n,I[3]=t,I[4]=w,I[5]=N):N=I[5],I[6]!==k||I[7]!==n||I[8]!==t?(C=async()=>t&&n?tl(k,t,n):null,I[6]=k,I[7]=n,I[8]=t,I[9]=C):C=I[9],I[10]!==N||I[11]!==C?(S={queryKey:N,queryFn:C},I[10]=N,I[11]=C,I[12]=S):S=I[12],(0,e3.I)(S));T[1]!==W?(a=()=>{null!=W?(B(W),V(W)):B("")},s=[W],T[1]=W,T[2]=a,T[3]=s):(a=T[2],s=T[3]),(0,ep.useEffect)(a,s),T[4]===Symbol.for("react.memo_cache_sentinel")?(r=e=>{V(e)},T[4]=r):r=T[4];let G=r;T[5]===Symbol.for("react.memo_cache_sentinel")?(l=e=>{O(e)},T[5]=l):l=T[5];let Q=l;T[6]!==A||T[7]!==$||T[8]!==M||T[9]!==P?(o=()=>{A(P,M,$)},T[6]=A,T[7]=$,T[8]=M,T[9]=P,T[10]=o):o=T[10];let Z=o,J=!!P&&!!M;T[11]!==D?(d={buttonType:"default",content:"Cancel",onClick:D},T[11]=D,T[12]=d):d=T[12];let Y=!J;T[13]!==Z||T[14]!==Y?(c={buttonType:"primary",content:"Start",onClick:Z,disabled:Y},T[13]=Z,T[14]=Y,T[15]=c):c=T[15],T[16]!==d||T[17]!==c?(u=[d,c],T[16]=d,T[17]=c,T[18]=u):u=T[18],T[19]===Symbol.for("react.memo_cache_sentinel")?(m=(0,z.jsx)(af.A.Label,{children:"Target repository"}),T[19]=m):m=T[19];let X=P||void 0;if(T[20]===Symbol.for("react.memo_cache_sentinel")?(p={includeForks:!0},T[20]=p):p=T[20],T[21]!==X||T[22]!==L?(h=(0,z.jsxs)(af.A,{children:[m,(0,z.jsx)(eH.f0,{initialRepository:X,onSelect:Q,topRepositories:L,enforceAtleastOneSelected:!0,options:p,preventDefault:!0,responsiveOnNarrow:!0})]}),T[21]=X,T[22]=L,T[23]=h):h=T[23],T[24]===Symbol.for("react.memo_cache_sentinel")?(f=(0,z.jsx)(af.A.Label,{children:"Base branch"}),T[24]=f):f=T[24],T[25]!==H||T[26]!==F||T[27]!==M||T[28]!==P?(g=(0,z.jsxs)(af.A,{children:[f,P||M?(0,z.jsx)(ah.PI,{useFocusZone:!0,cacheKey:"brainstorm-start-task-ref-selector",canCreate:!1,currentCommitish:F?M:"None available",defaultBranch:F,owner:P?.owner?.login||"",repo:P?.name||"",types:["branch"],selectedRefType:"branch",closeOnSelect:!0,hideShowAll:!0,disabled:H,onSelectItem:G,anchoredOverlayProps:{variant:{regular:"anchored",narrow:"fullscreen"},height:"small"}}):(0,z.jsx)(ag.f,{height:"32px",width:"100px"})]}),T[25]=H,T[26]=F,T[27]=M,T[28]=P,T[29]=g):g=T[29],T[30]!==H||T[31]!==F||T[32]!==$||T[33]!==M||T[34]!==P||T[35]!==U||T[36]!==q)y=q&&P&&(0,z.jsxs)(af.A,{children:[(0,z.jsx)(af.A.Label,{children:"Custom agent"}),(0,z.jsx)(am.b,{repo:{id:P.databaseId||0,graphQLId:P.id,name:P.nameWithOwner,nameWithOwner:P.nameWithOwner,nameOnly:P.name,owner:P.owner.login,private:P.isPrivate||!1,defaultBranch:F||"",isEmpty:!1,enabled:!0},branch:M,selectedAgent:$,onSelectAgent:e=>U(e),iconOnly:!1,disabled:H})]}),T[30]=H,T[31]=F,T[32]=$,T[33]=M,T[34]=P,T[35]=U,T[36]=q,T[37]=y;else y=T[37];return T[38]!==h||T[39]!==g||T[40]!==y?(x=(0,z.jsxs)("div",{className:"StartTaskDialog-module__selectorsRow--t23fd",children:[h,g,y]}),T[38]=h,T[39]=g,T[40]=y,T[41]=x):x=T[41],T[42]===Symbol.for("react.memo_cache_sentinel")?(v=(0,z.jsx)(af.A.Label,{children:"Task"}),T[42]=v):v=T[42],T[43]!==E?(b=(0,z.jsx)("div",{className:"StartTaskDialog-module__taskContainer--jUtk2",children:(0,z.jsxs)(af.A,{children:[v,(0,z.jsx)(ay.m,{previewItem:E})]})}),T[43]=E,T[44]=b):b=T[44],T[45]!==x||T[46]!==b?(_=(0,z.jsxs)("div",{className:"StartTaskDialog-module__formContainer--fvFyc",children:[x,b]}),T[45]=x,T[46]=b,T[47]=_):_=T[47],T[48]!==D||T[49]!==u||T[50]!==_?(j=(0,z.jsx)(eO.l,{width:"xlarge",title:"Start task",onClose:D,footerButtons:u,children:_}),T[48]=D,T[49]=u,T[50]=_,T[51]=j):j=T[51],j}try{ax.displayName||(ax.displayName="StartTaskDialog")}catch{}function av(e){let t,n,i,a,s,r,l,o,d,c,u,m,p,h,f,g,y,x,v,b,_,j,w,N,C,S=(0,K.c)(37),{spec:I,onError:k}=e,[T,E]=(0,ep.useState)(!1),[R,L]=(0,ep.useState)(!1);S[0]!==I?(t={messageId:I.messageId,name:I.name,isUserEdited:I.isUserEdited,tag:I.tag,repository:I.repository,type:"planning-task",id:I.id.replace("planning-spec:","planning-task:"),description:I.content,isStreaming:I.isStreaming,dependencyTags:void 0,subtaskTags:void 0,aggregateTag:void 0},S[0]=I,S[1]=t):t=S[1];let A=t,{repositoryData:D,isLoading:P}=function(e){let t,n,i,a,s,r,l=(0,K.c)(18);l[0]!==e.repository?(t=e.repository?.split("/")??[],l[0]=e.repository,l[1]=t):t=l[1];let[o,d]=t,c=(0,eZ.useRelayEnvironment)();l[2]!==c?(n=JSON.stringify(c),l[2]=c,l[3]=n):n=l[3],l[4]!==o||l[5]!==d||l[6]!==n?(i=["copilot-immersive-spec-repo",n,o,d],l[4]=o,l[5]=d,l[6]=n,l[7]=i):i=l[7],l[8]!==c||l[9]!==o||l[10]!==d?(a=async()=>o&&d?await (0,eH.tZ)(c,o,d):null,l[8]=c,l[9]=o,l[10]=d,l[11]=a):a=l[11],l[12]!==i||l[13]!==a?(s={queryKey:i,queryFn:a},l[12]=i,l[13]=a,l[14]=s):s=l[14];let{data:u,isLoading:m}=(0,e3.I)(s);return l[15]!==m||l[16]!==u?(r={repositoryData:u,isLoading:m},l[15]=m,l[16]=u,l[17]=r):r=l[17],r}(I),{isLoading:O,data:F}=(x=(0,K.c)(9),v=(0,eZ.useRelayEnvironment)(),x[0]!==v?(h=JSON.stringify(v),x[0]=v,x[1]=h):h=x[1],x[2]!==h?(f=["copilot-immersive-spec-top-repos",h],x[2]=h,x[3]=f):f=x[3],x[4]!==v?(g=async()=>await (0,eH.St)(v,{first:10,hasIssuesEnabled:!0}),x[4]=v,x[5]=g):g=x[5],x[6]!==f||x[7]!==g?(y={queryKey:f,queryFn:g},x[6]=f,x[7]=g,x[8]=y):y=x[8],(0,e3.I)(y)),{start:B,error:M}=(0,au.vQ)(A),{pullRequest:V,isLoading:$}=(0,au.as)(A),{createIssue:U}=(j=(0,K.c)(6),w=(0,Z.b)(),N=(0,Q.Pk)(),j[0]!==w||j[1]!==I||j[2]!==N?(b=async()=>{let e=I.name||I.tag,t=(0,ty.W)(N);(0,et.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_SPEC_CREATE_ISSUE",mode:"immersive",threadId:t?.id,messageId:I.messageId});let n={type:"text",name:`timeline-event: {"type": "planning-spec-to-issue", "markdownContent": "Drafting '${e}' spec as an issue..."}`},i=`
Create an issue based on the ${I.tag} spec${I.repository?` in the ${I.repository} repository`:""}.
- The issue title should be the same as the spec name.
- Use the spec content to draft the issue body. The issue body should include the full spec content and any relevant implementation details.
`;await w.sendChatMessage({thread:t,content:i,references:[n],topic:N.currentTopic,context:N.context,customInstructions:N.customInstructions,model:N.model,intent:tg.wh.planningAgent})},j[0]=w,j[1]=I,j[2]=N,j[3]=b):b=j[3],C=b,j[4]!==C?(_={createIssue:C},j[4]=C,j[5]=_):_=j[5],_);S[2]!==M||S[3]!==k?(n=()=>{k?.(M)},i=[M,k],S[2]=M,S[3]=k,S[4]=n,S[5]=i):(n=S[4],i=S[5]),(0,ep.useEffect)(n,i);let q=(0,ao.u)("copilot_swe_agent_progress_commands");S[6]!==q||S[7]!==V?(a=V?q?(0,al.UV)(V.global_relay_id):`/${V.repository_nwo}/pull/${V.number}`:void 0,S[6]=q,S[7]=V,S[8]=a):a=S[8];let W=a,H=q?"View task":"View pull request",G=I.isStreaming??!1;S[9]!==I.content?(s=I.content?.trim(),S[9]=I.content,S[10]=s):s=S[10];let J=G||P||O||$,Y=!s||J;S[11]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{L(!0)},S[11]=r):r=S[11];let X=r;S[12]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{L(!1)},S[12]=l):l=S[12];let ee=l;S[13]!==B?(o=(e,t,n)=>{B({nameWithOwner:e.nameWithOwner,branch:t,subAgent:n?.subAgentSlug}),L(!1)},S[13]=B,S[14]=o):o=S[14];let en=o;S[15]!==U?(d=()=>{U()},S[15]=U,S[16]=d):d=S[16];let ei=d;if(V){let e;return S[17]!==W||S[18]!==H?(e=(0,z.jsx)(eB.Q,{as:"a",href:W,variant:"primary",size:"small",children:H}),S[17]=W,S[18]=H,S[19]=e):e=S[19],e}let ea=Y||D?.hasIssuesEnabled===!1;return S[20]!==ei||S[21]!==ea?(c=[{label:"Create issue",onSelect:ei,disabled:ea}],S[20]=ei,S[21]=ea,S[22]=c):c=S[22],S[23]!==Y||S[24]!==J||S[25]!==T||S[26]!==c?(u=(0,z.jsx)(ad,{inactive:Y,isLoading:J,isMenuOpen:T,loadingAnnouncement:"Loading spec\u2026",menuItems:c,onMenuOpenChange:E,onStartClick:X,primaryButtonText:"Start task"}),S[23]=Y,S[24]=J,S[25]=T,S[26]=c,S[27]=u):u=S[27],S[28]!==en||S[29]!==R||S[30]!==D||S[31]!==I||S[32]!==F?(m=R&&(0,z.jsx)(ax,{previewItem:I,initialRepo:D,topRepos:F||[],onStart:en,onCancel:ee}),S[28]=en,S[29]=R,S[30]=D,S[31]=I,S[32]=F,S[33]=m):m=S[33],S[34]!==u||S[35]!==m?(p=(0,z.jsxs)(z.Fragment,{children:[u,m]}),S[34]=u,S[35]=m,S[36]=p):p=S[36],p}try{av.displayName||(av.displayName="SpecActions")}catch{}function ab(e){let t,n,i,a,s,r,l,o,d,c,u,m,p,h,f,g,y,x,v,b,_,j=(0,K.c)(60),{spec:w,linesOfCode:N,size:C,isDiffable:S,onViewModeChange:I}=e,{selectedThreadID:k}=(0,Q.Pk)(),[T,E]=(0,ep.useState)("preview"),[R,L]=(0,ep.useState)(void 0),[A,D]=(0,ep.useState)(null),[P,O]=(0,ep.useState)(null),F=A&&A!==P;j[0]!==A?(t=()=>{O(A)},j[0]=A,j[1]=t):t=j[1];let B=t;j[2]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{D(e)},j[2]=n):n=j[2];let M=n;if(j[3]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{O(null)},j[3]=i):i=j[3],j[4]!==w.id?(a=[w.id],j[4]=w.id,j[5]=a):a=j[5],(0,ep.useEffect)(i,a),j[6]===Symbol.for("react.memo_cache_sentinel")?(s=["preview","Preview"],j[6]=s):s=j[6],j[7]!==S){if(r=[s],S){let e;j[9]===Symbol.for("react.memo_cache_sentinel")?(e=["diff","Diff"],j[9]=e):e=j[9],r.push(e)}j[7]=S,j[8]=r}else r=j[8];let V=r;j[10]===Symbol.for("react.memo_cache_sentinel")?(l=e=>{L(e)},j[10]=l):l=j[10];let $=l;j[11]!==V||j[12]!==I||j[13]!==w.messageId||j[14]!==k?(o=e=>{let t=V[e]?.[0]||"preview";E(t),I(t),(0,et.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_SPEC_CHANGE_VIEW_MODE",option:t,threadId:k,messageId:w.messageId})},j[11]=V,j[12]=I,j[13]=w.messageId,j[14]=k,j[15]=o):o=j[15];let U=o;j[16]!==R||j[17]!==w.content||j[18]!==w.messageId||j[19]!==w.tag||j[20]!==k?(d=()=>{let e,t=(e=w.tag,void 0!==R?`${e}_${R}.md`:`${e}.md`);iL(new File([w.content],t)),(0,et.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_SPEC_DOWNLOAD_FILE",mode:"immersive",threadId:k,messageId:w.messageId})},j[16]=R,j[17]=w.content,j[18]=w.messageId,j[19]=w.tag,j[20]=k,j[21]=d):d=j[21];let q=d;j[22]!==w.messageId||j[23]!==k?(c=()=>{(0,et.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_SPEC_COPY_CODE",mode:"immersive",threadId:k,messageId:w.messageId})},j[22]=w.messageId,j[23]=k,j[24]=c):c=j[24];let W=c;j[25]!==A||j[26]!==B||j[27]!==F?(u=F&&(0,z.jsx)(as,{error:A,onDismiss:B}),j[25]=A,j[26]=B,j[27]=F,j[28]=u):u=j[28],j[29]!==V||j[30]!==U||j[31]!==T?(m=V.length>1&&(0,z.jsx)(iB.I,{"aria-label":"Spec view",onChange:U,children:V.map(e=>{let[t,n]=e;return(0,z.jsx)(iB.I.Button,{selected:T===t,children:n},t)})}),j[29]=V,j[30]=U,j[31]=T,j[32]=m):m=j[32],j[33]!==w?(p=(0,z.jsx)(eA,{item:w,onVersionSelect:$}),j[33]=w,j[34]=p):p=j[34];let H=1===N?"line":"lines";return j[35]!==N||j[36]!==C||j[37]!==H?(h=(0,z.jsxs)("p",{className:"SpecToolbar-module__toolbarLoC--Zemt9 FilePreview-module__toolbarLoC--I7tcY",children:[N," ",H," \xb7 ",C]}),j[35]=N,j[36]=C,j[37]=H,j[38]=h):h=j[38],j[39]!==m||j[40]!==p||j[41]!==h?(f=(0,z.jsxs)("div",{className:"SpecToolbar-module__toolbarLeft--R4qo5 FilePreview-module__toolbarLeft--RCKxW",children:[m,p,h]}),j[39]=m,j[40]=p,j[41]=h,j[42]=f):f=j[42],j[43]!==W||j[44]!==w.content?(g=(0,z.jsx)(iC.T,{textToCopy:w.content,ariaLabel:"Copy spec content",onCopy:W}),j[43]=W,j[44]=w.content,j[45]=g):g=j[45],j[46]!==q?(y=(0,z.jsx)(eo.K,{"aria-label":"Download spec",icon:er.DownloadIcon,variant:"invisible",onClick:q}),j[46]=q,j[47]=y):y=j[47],j[48]!==w?(x=(0,z.jsx)(av,{spec:w,onError:M}),j[48]=w,j[49]=x):x=j[49],j[50]!==g||j[51]!==y||j[52]!==x?(v=(0,z.jsxs)("div",{className:"SpecToolbar-module__toolbarActions--wO9eJ FilePreview-module__toolbarActions--h04aW",children:[g,y,x]}),j[50]=g,j[51]=y,j[52]=x,j[53]=v):v=j[53],j[54]!==f||j[55]!==v?(b=(0,z.jsxs)("div",{className:"SpecToolbar-module__toolbar--tdSZU FilePreview-module__toolbar--ZZWN1",children:[f,v]}),j[54]=f,j[55]=v,j[56]=b):b=j[56],j[57]!==u||j[58]!==b?(_=(0,z.jsxs)(z.Fragment,{children:[u,b]}),j[57]=u,j[58]=b,j[59]=_):_=j[59],_}try{ab.displayName||(ab.displayName="SpecToolbar")}catch{}function a_(e){return{messageId:e.messageId,name:`${e.tag}.md`,id:e.id.replace("planning-spec:","file:"),type:"file",value:e.content,language:"markdown",timestamp:e.timestamp,isStreaming:e.isStreaming??!1,isUserEdited:e.isUserEdited}}function aj(e){let t,n,i,a,s,r,l,o,d=(0,K.c)(23),{spec:c}=e,{items:u,versionedItems:m}=(0,eb.xx)(),[p,h]=(0,ep.useState)("preview");d[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{h(e)},d[0]=t):t=d[0];let f=t;if(d[1]!==u||d[2]!==c||d[3]!==m){let e=(0,eL.SX)(c,u,m);n=!!e,i=e?a_(e):null,d[1]=u,d[2]=c,d[3]=m,d[4]=n,d[5]=i}else n=d[4],i=d[5];let g=i;d[6]!==c?(a=a_(c),d[6]=c,d[7]=a):a=d[7];let y=a,{linesOfCode:x,size:v}=(0,iI.K3)(y);return d[8]!==n||d[9]!==x||d[10]!==v||d[11]!==c?(s=(0,z.jsx)(ab,{spec:c,linesOfCode:x,size:v,isDiffable:n,onViewModeChange:f}),d[8]=n,d[9]=x,d[10]=v,d[11]=c,d[12]=s):s=d[12],d[13]!==g||d[14]!==y||d[15]!==p?(r=(0,z.jsx)("div",{className:"SpecPreview-module__content--ES0hY FilePreview-module__content--HoIot",children:"preview"===p?(0,z.jsx)(i1.G,{content:{value:y.value,name:y.name},fallbackToRaw:!0,hideHeadingAnchors:!0}):(0,z.jsx)(iE,{left:g,right:y,view:"unified"})}),d[13]=g,d[14]=y,d[15]=p,d[16]=r):r=d[16],d[17]!==c?(l=(0,z.jsx)(aa,{spec:c}),d[17]=c,d[18]=l):l=d[18],d[19]!==s||d[20]!==r||d[21]!==l?(o=(0,z.jsx)(an.Fn,{children:(0,z.jsxs)("div",{className:"SpecPreview-module__container--WG_WF FilePreview-module__container--P2h3J",children:[s,r,l]})}),d[19]=s,d[20]=r,d[21]=l,d[22]=o):o=d[22],o}try{aj.displayName||(aj.displayName="SpecPreview")}catch{}function aw(e){let t,n,i,a,s=(0,K.c)(14),{title:r,description:l,onClose:o,onSubmit:d,buttonRef:c}=e;return s[0]!==o?(t={buttonType:"default",content:"Cancel",onClick:o},s[0]=o,s[1]=t):t=s[1],s[2]!==o||s[3]!==d?(n={buttonType:"danger",content:"Proceed to PR creation",onClick:()=>{d(),o()}},s[2]=o,s[3]=d,s[4]=n):n=s[4],s[5]!==t||s[6]!==n?(i=[t,n],s[5]=t,s[6]=n,s[7]=i):i=s[7],s[8]!==c||s[9]!==l||s[10]!==o||s[11]!==i||s[12]!==r?(a=(0,z.jsx)(eO.l,{title:r,onClose:o,returnFocusRef:c,footerButtons:i,children:l}),s[8]=c,s[9]=l,s[10]=o,s[11]=i,s[12]=r,s[13]=a):a=s[13],a}try{aw.displayName||(aw.displayName="StartTaskWarningDialog")}catch{}function aN(e){let t,n=(0,K.c)(4),{buttonRef:i,onClose:a,onSubmit:s}=e;return n[0]!==i||n[1]!==a||n[2]!==s?(t=(0,z.jsx)(aw,{buttonRef:i,description:"This task has unmerged dependencies. Please consider waiting until all dependencies are completed before starting the task.",onClose:a,onSubmit:s,title:"Unmerged dependencies"}),n[0]=i,n[1]=a,n[2]=s,n[3]=t):t=n[3],t}try{aN.displayName||(aN.displayName="UnmergedDependenciesWarningDialog")}catch{}var aC=n(35104);function aS(e){return e.isLoading||null==e.pullRequest||"merged"!==e.pullRequest.state}function aI(e){return null!=e}function ak(e){let t,n,i,a,s,r,l,o,d,c,u=(0,K.c)(33),{loading:m,task:p,startTask:h}=e,[f,g]=(0,ep.useState)(!1),[y,x]=(0,ep.useState)(!1),{convertToDraftIssue:v}=(0,aC.Y)(p),b=(0,ep.useRef)(null),[_,j]=(0,ep.useState)(!1),w=function(e){let t,n,i=(0,K.c)(6),{items:a,versionedItems:s}=(0,eb.xx)();i[0]!==a||i[1]!==e.dependencyTags||i[2]!==s?(t=e.dependencyTags?.map(e=>{let t=s.get(`planning-task:${e}`);return null==t||0===t.length?null:a.get(t.at(-1))}).filter(aI)??[],i[0]=a,i[1]=e.dependencyTags,i[2]=s,i[3]=t):t=i[3];let r=t,l=(0,au.fp)(r);return i[4]!==l?(n=l.some(aS),i[4]=l,i[5]=n):n=i[5],n}(p);u[0]!==m||u[1]!==p?(t={externalLoading:m,task:p},u[0]=m,u[1]=p,u[2]=t):t=u[2];let{selectedRepo:N,topRepos:C,isLoading:S}=function(e){let t,n,i,a,s,r,l,o,d,c,u,m,p,h,f=(0,K.c)(42),{externalLoading:g,task:y}=e;f[0]!==y.repository?(t=y.repository?.split("/")??[],f[0]=y.repository,f[1]=t):t=f[1];let[x,v]=t,[b,_]=(0,ep.useState)(void 0),{updateItem:j}=(0,eb.xx)(),w=(0,eZ.useRelayEnvironment)();f[2]!==w?(n=JSON.stringify(w),f[2]=w,f[3]=n):n=f[3],f[4]!==n?(i=["copilot-immersive-top-repos",n],f[4]=n,f[5]=i):i=f[5],f[6]!==w?(a=async()=>await (0,eH.St)(w,{first:10}),f[6]=w,f[7]=a):a=f[7],f[8]!==i||f[9]!==a?(s={queryKey:i,queryFn:a},f[8]=i,f[9]=a,f[10]=s):s=f[10];let{data:N,isLoading:C}=(0,e3.I)(s);f[11]!==N?(r=void 0===N?[]:N,f[11]=N,f[12]=r):r=f[12];let S=r;f[13]!==w?(l=JSON.stringify(w),f[13]=w,f[14]=l):l=f[14],f[15]!==x||f[16]!==v||f[17]!==l?(o=["copilot-immersive-current-repo",l,x,v],f[15]=x,f[16]=v,f[17]=l,f[18]=o):o=f[18],f[19]!==w||f[20]!==x||f[21]!==v?(d=async()=>x&&v?await (0,eH.tZ)(w,x,v):null,f[19]=w,f[20]=x,f[21]=v,f[22]=d):d=f[22],f[23]!==o||f[24]!==d?(c={queryKey:o,queryFn:d},f[23]=o,f[24]=d,f[25]=c):c=f[25];let{data:I,isLoading:k}=(0,e3.I)(c),T=void 0!==g&&g||C||k;f[26]!==y||f[27]!==j?(u=e=>{_(e),e&&j({...y,isUserEdited:!0,repository:e.nameWithOwner})},f[26]=y,f[27]=j,f[28]=u):u=f[28];let E=u;return f[29]!==I||f[30]!==E||f[31]!==T||f[32]!==b||f[33]!==y.repository||f[34]!==S?(m=()=>{if(!T){if(y.repository){I&&I.nameWithOwner!==b?.nameWithOwner&&_(I);return}!b&&S&&S.length>0&&E(S[0])}},p=[I,E,T,b,y.repository,S],f[29]=I,f[30]=E,f[31]=T,f[32]=b,f[33]=y.repository,f[34]=S,f[35]=m,f[36]=p):(m=f[35],p=f[36]),(0,ep.useEffect)(m,p),f[37]!==E||f[38]!==T||f[39]!==b||f[40]!==S?(h={handleRepoSelect:E,isLoading:T,selectedRepo:b,topRepos:S},f[37]=E,f[38]=T,f[39]=b,f[40]=S,f[41]=h):h=f[41],h}(t);u[3]!==w?(n=()=>{w?j(!0):x(!0)},u[3]=w,u[4]=n):n=u[4];let I=n;u[5]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{x(!1)},u[5]=i):i=u[5];let k=i;u[6]!==h?(a=(e,t,n)=>{h({nameWithOwner:e.nameWithOwner,branch:t,subAgent:n?.subAgentSlug}),x(!1)},u[6]=h,u[7]=a):a=u[7];let T=a;u[8]!==v?(s=()=>{v()},u[8]=v,u[9]=s):s=u[9];let E=s,R=!N,L=S?"Loading\u2026":"Starting task\u2026",A=N?.hasIssuesEnabled===!1;return u[10]!==E||u[11]!==A?(r=[{disabled:A,label:"Draft issue",onSelect:E}],u[10]=E,u[11]=A,u[12]=r):r=u[12],u[13]!==I||u[14]!==_?(l=_&&(0,z.jsx)(aN,{buttonRef:b,onClose:()=>j(!1),onSubmit:I}),u[13]=I,u[14]=_,u[15]=l):l=u[15],u[16]!==I||u[17]!==S||u[18]!==f||u[19]!==l||u[20]!==R||u[21]!==L||u[22]!==r?(o=(0,z.jsx)("div",{className:"NoPullRequestTaskToolbar-module__toolbarActions--nHT53 FilePreview-module__toolbarActions--h04aW",children:(0,z.jsx)(ad,{inactive:R,isLoading:S,isMenuOpen:f,loadingAnnouncement:L,menuItems:r,onMenuOpenChange:g,onStartClick:I,ref:b,children:l})}),u[16]=I,u[17]=S,u[18]=f,u[19]=l,u[20]=R,u[21]=L,u[22]=r,u[23]=o):o=u[23],u[24]!==T||u[25]!==y||u[26]!==p||u[27]!==N||u[28]!==C?(d=y&&(0,z.jsx)(ax,{previewItem:p,initialRepo:N,topRepos:C||[],onStart:T,onCancel:k}),u[24]=T,u[25]=y,u[26]=p,u[27]=N,u[28]=C,u[29]=d):d=u[29],u[30]!==o||u[31]!==d?(c=(0,z.jsxs)(z.Fragment,{children:[o,d]}),u[30]=o,u[31]=d,u[32]=c):c=u[32],c}try{ak.displayName||(ak.displayName="NoPullRequestTaskToolbar")}catch{}var aT=n(26607);function aE(e){let t,n,i,a,s,r,l=(0,K.c)(19),{pullRequest:o}=e,d=(0,ao.u)("copilot_swe_agent_progress_commands");l[0]!==d||l[1]!==o.global_relay_id||l[2]!==o.number||l[3]!==o.repository_nwo?(t=d?(0,al.UV)(o.global_relay_id):`/${o.repository_nwo}/pull/${o.number}`,l[0]=d,l[1]=o.global_relay_id,l[2]=o.number,l[3]=o.repository_nwo,l[4]=t):t=l[4];let c=t,u=d?"View task":"View pull request";l[5]!==o.repository_nwo?(n=(0,z.jsx)("div",{className:"PullRequestTaskToolbar-module__toolbarLeft--zhjF9 FilePreview-module__toolbarLeft--RCKxW",children:(0,z.jsx)(aT.A,{variant:"accent",size:"large",className:"PullRequestTaskToolbar-module__toolbarRepo--V_hWp",children:o.repository_nwo})}),l[5]=o.repository_nwo,l[6]=n):n=l[6];let m="merged"===o.state?"success":"accent",p="merged"===o.state?"Merged":"In progress";return l[7]!==m||l[8]!==p?(i=(0,z.jsx)(aT.A,{variant:m,size:"small",children:p}),l[7]=m,l[8]=p,l[9]=i):i=l[9],l[10]!==c||l[11]!==u?(a=(0,z.jsx)(eB.Q,{as:"a",href:c,variant:"primary",size:"small",children:u}),l[10]=c,l[11]=u,l[12]=a):a=l[12],l[13]!==i||l[14]!==a?(s=(0,z.jsxs)("div",{className:"PullRequestTaskToolbar-module__toolbarActions--chqDS FilePreview-module__toolbarActions--h04aW",children:[i,a]}),l[13]=i,l[14]=a,l[15]=s):s=l[15],l[16]!==n||l[17]!==s?(r=(0,z.jsxs)(z.Fragment,{children:[n,s]}),l[16]=n,l[17]=s,l[18]=r):r=l[18],r}try{aE.displayName||(aE.displayName="PullRequestTaskToolbar")}catch{}function aR(e){let t,n,i,a,s,r,l,o,d=(0,K.c)(22),{className:c,task:u}=e,{pullRequest:m,isLoading:p}=(0,au.as)(u),{start:h,error:f}=(0,au.vQ)(u),[g,y]=(0,ep.useState)(null),x=f&&f!==g;d[0]!==f?(t=()=>{y(f)},d[0]=f,d[1]=t):t=d[1];let v=t;return d[2]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{y(null)},d[2]=n):n=d[2],d[3]!==u.id?(i=[u.id],d[3]=u.id,d[4]=i):i=d[4],(0,ep.useEffect)(n,i),d[5]!==f||d[6]!==v||d[7]!==x?(a=x&&(0,z.jsx)(as,{error:f,onDismiss:v}),d[5]=f,d[6]=v,d[7]=x,d[8]=a):a=d[8],d[9]!==c?(s=(0,em.$)("TaskToolbar-module__toolbar--lRGiC FilePreview-module__toolbar--ZZWN1",c),d[9]=c,d[10]=s):s=d[10],d[11]!==p||d[12]!==m||d[13]!==h||d[14]!==u?(r=m?(0,z.jsx)(aE,{pullRequest:m}):(0,z.jsx)(ak,{loading:p,task:u,startTask:h}),d[11]=p,d[12]=m,d[13]=h,d[14]=u,d[15]=r):r=d[15],d[16]!==s||d[17]!==r?(l=(0,z.jsx)("div",{className:s,children:r}),d[16]=s,d[17]=r,d[18]=l):l=d[18],d[19]!==a||d[20]!==l?(o=(0,z.jsxs)(z.Fragment,{children:[a,l]}),d[19]=a,d[20]=l,d[21]=o):o=d[21],o}try{aR.displayName||(aR.displayName="TaskToolbar")}catch{}function aL(e){let t,n,i,a=(0,K.c)(8),{task:s}=e,r=s.description;s.name&&(r=`# ${s.name}

${r}`);let l=r;a[0]!==s?(t=(0,z.jsx)(aR,{task:s}),a[0]=s,a[1]=t):t=a[1];let o=`${s.tag}.md`;return a[2]!==l||a[3]!==o?(n=(0,z.jsx)(i1.G,{content:{value:l,name:o},fallbackToRaw:!0,hideHeadingAnchors:!0}),a[2]=l,a[3]=o,a[4]=n):n=a[4],a[5]!==t||a[6]!==n?(i=(0,z.jsx)(an.Fn,{children:(0,z.jsxs)("div",{className:"TaskPreview-module__container--RZnMV",children:[t,n]})}),a[5]=t,a[6]=n,a[7]=i):i=a[7],i}try{aL.displayName||(aL.displayName="TaskPreview")}catch{}function aA(e){let t,n=(0,K.c)(35),{isOpening:i,onClose:a,previewItem:s}=e,r=(0,e_.qw)(),l=null;switch(s.type){case"file":{let e;n[0]!==i||n[1]!==a||n[2]!==s?(e=(0,z.jsx)(i3,{isPreviewOpening:i,file:s,onClose:a}),n[0]=i,n[1]=a,n[2]=s,n[3]=e):e=n[3],l=e;break}case"file-diff":{let e;n[4]!==s?(e=(0,z.jsx)(iA,{fileDiff:s}),n[4]=s,n[5]=e):e=n[5],l=e;break}case"issue":{let e;n[6]!==i||n[7]!==a||n[8]!==s?(e=(0,z.jsx)(i8,{isPreviewOpening:i,issue:s,onClose:a}),n[6]=i,n[7]=a,n[8]=s,n[9]=e):e=n[9],l=e;break}case"new-issue":{let e;n[10]!==i||n[11]!==a||n[12]!==s?(e=(0,z.jsx)(n3,{isPreviewOpening:i,issue:s,onClose:a}),n[10]=i,n[11]=a,n[12]=s,n[13]=e):e=n[13],l=e;break}case"update-issue":{let e;n[14]!==i||n[15]!==a||n[16]!==s?(e=(0,z.jsx)(im,{isPreviewOpening:i,issue:s,onClose:a}),n[14]=i,n[15]=a,n[16]=s,n[17]=e):e=n[17],l=e;break}case"existing-issue":{let e;n[18]!==i||n[19]!==a||n[20]!==s?(e=(0,z.jsx)(n7,{isPreviewOpening:i,issue:s,onClose:a}),n[18]=i,n[19]=a,n[20]=s,n[21]=e):e=n[21],l=e;break}case"image":{let e;n[22]!==s?(e=(0,z.jsx)(i9,{image:s}),n[22]=s,n[23]=e):e=n[23],l=e;break}case"planning-task":{let e;n[24]!==s?(e=(0,z.jsx)(aL,{task:s}),n[24]=s,n[25]=e):e=n[25],l=e;break}case"planning-spec":{let e;n[26]!==s?(e=(0,z.jsx)(aj,{spec:s}),n[26]=s,n[27]=e):e=n[27],l=e;break}case"plugin-content":if(n[28]!==r||n[29]!==s.reference){for(let e of r){let t=e.previewComponents?.[s.reference.type];if(t){l=(0,z.jsx)(t,{reference:s.reference});break}}n[28]=r,n[29]=s.reference,n[30]=l}else l=n[30];break;case"job-result":{let e;n[31]!==s?(e=(0,z.jsx)(at,{jobResult:s}),n[31]=s,n[32]=e):e=n[32],l=e}}return n[33]!==l?(t=l?(0,z.jsx)(ei.t,{fallback:(0,z.jsx)(eh.x,{regionName:"This workbench item"}),children:l}):null,n[33]=l,n[34]=t):t=n[34],t}try{aA.displayName||(aA.displayName="ContentPreviewItem")}catch{}var aD=n(77999),aP=n(88431);function aO(e){let t=(0,K.c)(3),{file:n}=e;if(n.isStreaming){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,z.jsx)(eF.A,{size:"small"}),t[0]=e):e=t[0],e}if("markdown"===n.language){let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,z.jsx)(er.MarkdownIcon,{}),t[1]=e):e=t[1],e}{let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,z.jsx)(er.CodeIcon,{}),t[2]=e):e=t[2],e}}function aF(e){let t=(0,K.c)(12),{item:n}=e;switch(n.type){case"file":{let e;return t[0]!==n?(e=(0,z.jsx)(aO,{file:n}),t[0]=n,t[1]=e):e=t[1],e}case"file-diff":{let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,z.jsx)(er.FileDiffIcon,{}),t[2]=e):e=t[2],e}case"image":{let e;return t[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,z.jsx)(er.ImageIcon,{}),t[3]=e):e=t[3],e}case"issue":{let e;return t[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,z.jsx)(er.IssueOpenedIcon,{}),t[4]=e):e=t[4],e}case"new-issue":{let e;return t[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,z.jsx)(er.IssueDraftIcon,{}),t[5]=e):e=t[5],e}case"update-issue":{let e;return t[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,z.jsx)(er.IssueDraftIcon,{}),t[6]=e):e=t[6],e}case"existing-issue":{let e;return t[7]===Symbol.for("react.memo_cache_sentinel")?(e=(0,z.jsx)(er.IssueOpenedIcon,{}),t[7]=e):e=t[7],e}case"planning-task":{let e;return t[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,z.jsx)(er.TasklistIcon,{}),t[8]=e):e=t[8],e}case"planning-spec":{let e;return t[9]===Symbol.for("react.memo_cache_sentinel")?(e=(0,z.jsx)(er.NoteIcon,{}),t[9]=e):e=t[9],e}case"plugin-content":{let e;return t[10]!==n.icon?(e=n.icon?(0,z.jsx)(n.icon,{}):null,t[10]=n.icon,t[11]=e):e=t[11],e}default:return null}}let aB=(0,ep.forwardRef)(function(e,t){let n,i,a,s,r,l,o,d,c,u,m,p,h,f,g,y,x,v,b,_,j,w,N,C=(0,K.c)(56);C[0]!==e?({onClick:s,onClose:r,isActive:i,item:a,controlHintId:n,tabPanelId:o,...l}=e,C[0]=e,C[1]=n,C[2]=i,C[3]=a,C[4]=s,C[5]=r,C[6]=l,C[7]=o):(n=C[1],i=C[2],a=C[3],s=C[4],r=C[5],l=C[6],o=C[7]);let[S,I]=(0,ep.useState)(!1),k=(0,ep.useRef)(null),T=!a.disableCloseButton;C[8]!==r?(d=()=>{r&&r(),(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_TAB_CLOSE",mode:"immersive"})},C[8]=r,C[9]=d):d=C[9];let E=d,R=(0,ep.useRef)(null),L=a.name;C[10]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{let e=k.current;if(!e)return;let t=e.scrollWidth>e.clientWidth;I(e=>t!==e?t:e)},C[10]=c):c=C[10];let A=c;C[11]===Symbol.for("react.memo_cache_sentinel")?(u=()=>{A()},C[11]=u):u=C[11],C[12]!==L?(m=[L],C[12]=L,C[13]=m):m=C[13],(0,aP.N)(u,m),C[14]!==S?(p=(0,em.$)("ContentPreviewTab-module__title--l571P",{"ContentPreviewTab-module__isClipped--G4HHE":S}),C[14]=S,C[15]=p):p=C[15];let D=`content-preview-tab-${a.id}`;C[16]!==p||C[17]!==D||C[18]!==L?(h=(0,z.jsx)("span",{className:p,"data-title":L,"data-testid":D,ref:k,onMouseEnter:A,children:L}),C[16]=p,C[17]=D,C[18]=L,C[19]=h):h=C[19];let P=h;C[20]!==i?(f=(0,em.$)("ContentPreviewTab-module__tabContent--xe28k",{"ContentPreviewTab-module__slimLineTopTabs--ntJs1":X.W.copilotWorkbenchSlimLineTopTabs,"ContentPreviewTab-module__isActive--Pi2gz":i}),C[20]=i,C[21]=f):f=C[21];let O=i?"true":void 0;return C[22]!==s?(g=e=>{s&&s(e),(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_TAB_SELECT",mode:"immersive"})},C[22]=s,C[23]=g):g=C[23],C[24]!==E||C[25]!==T?(y=e=>{switch(e.key.toLowerCase()){case"delete":case"backspace":T&&E();break;case"tab":if(e.shiftKey)break;T&&(e.preventDefault(),R.current?.focus())}},x=e=>{1===e.button&&T&&E()},C[24]=E,C[25]=T,C[26]=y,C[27]=x):(y=C[26],x=C[27]),C[28]!==a?(v=(0,z.jsx)("span",{className:"ContentPreviewTab-module__icon--lefqk",children:(0,z.jsx)(aF,{item:a})}),C[28]=a,C[29]=v):v=C[29],C[30]!==S||C[31]!==L||C[32]!==P?(b=S?(0,z.jsx)(aD.m,{text:L,position:"bottom",children:P}):P,C[30]=S,C[31]=L,C[32]=P,C[33]=b):b=C[33],C[34]!==a.trailingComponent?(_=a.trailingComponent?(0,z.jsx)("div",{className:"ContentPreviewTab-module__trailingComponent--lAh8u",children:a.trailingComponent}):null,C[34]=a.trailingComponent,C[35]=_):_=C[35],C[36]!==n||C[37]!==t||C[38]!==l||C[39]!==g||C[40]!==y||C[41]!==x||C[42]!==v||C[43]!==b||C[44]!==_||C[45]!==O||C[46]!==o?(j=(0,z.jsxs)("button",{className:"ContentPreviewTab-module__mainButton--vLx58",type:"button",role:"tab","aria-selected":O,"aria-describedby":n,"aria-controls":o,onClick:g,onKeyDown:y,onAuxClick:x,ref:t,...l,children:[v,b,_]}),C[36]=n,C[37]=t,C[38]=l,C[39]=g,C[40]=y,C[41]=x,C[42]=v,C[43]=b,C[44]=_,C[45]=O,C[46]=o,C[47]=j):j=C[47],C[48]!==E||C[49]!==T||C[50]!==L?(w=T&&(0,z.jsx)("div",{className:"ContentPreviewTab-module__closeButton--SByWv",children:(0,z.jsx)(eo.K,{icon:er.XIcon,size:"small",variant:"invisible","aria-label":`Close ${L}`,"aria-hidden":!0,tabIndex:-1,unsafeDisableTooltip:!0,onClick:E,ref:R})}),C[48]=E,C[49]=T,C[50]=L,C[51]=w):w=C[51],C[52]!==j||C[53]!==w||C[54]!==f?(N=(0,z.jsx)("div",{className:"ContentPreviewTab-module__tabContainer--ApaB_",children:(0,z.jsxs)("div",{className:f,children:[j,w]})}),C[52]=j,C[53]=w,C[54]=f,C[55]=N):N=C[55],N});try{aO.displayName||(aO.displayName="CodeTabIcon")}catch{}try{aF.displayName||(aF.displayName="TabIcon")}catch{}try{aB.displayName||(aB.displayName="ContentPreviewTab")}catch{}var aM=n(61526);function aV(){let e,t=(0,K.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,z.jsx)("svg",{"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",children:(0,z.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M13 .5H3A2.5 2.5 0 0 0 .5 3v10A2.5 2.5 0 0 0 3 15.5h10a2.5 2.5 0 0 0 2.5-2.5V3A2.5 2.5 0 0 0 13 .5M2 3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1zm6 6.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5M12.25 5a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0M5 12.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5",clipRule:"evenodd"})}),t[0]=e):e=t[0],e}try{aV.displayName||(aV.displayName="DiceIcon")}catch{}function a$(e){let t,n,i,a,s,r,l,o,d,c,u,m,p=(0,K.c)(23),{isOpening:h}=e,f=(0,Z.b)(),g=(0,Q.Pk)(),y=(0,aM.zy)(),x=(0,ep.useRef)(null);p[0]!==g?(t=(0,ty.W)(g),p[0]=g,p[1]=t):t=p[1];let v=t,b=(0,iq.X)();p[2]===Symbol.for("react.memo_cache_sentinel")?(n=[],p[2]=n):n=p[2];let[_,j]=(0,ep.useState)(n);p[3]!==b.icebreakers?(i=()=>{var e;if(Array.isArray(e=b.icebreakers)&&e.every(e=>"type"in e&&"data"in e)){let e=b.icebreakers.find(aU);e&&e.data.length>0&&j(e.data)}},p[3]=b.icebreakers,p[4]=i):i=p[4],p[5]!==y||p[6]!==b.icebreakers?(a=[b.icebreakers,y],p[5]=y,p[6]=b.icebreakers,p[7]=a):a=p[7],(0,ep.useEffect)(i,a),p[8]!==h?(s=()=>{h&&x.current&&window.requestAnimationFrame(()=>{x.current?.focus({preventScroll:!0})})},r=[h],p[8]=h,p[9]=s,p[10]=r):(s=p[9],r=p[10]),(0,ep.useEffect)(s,r),p[11]!==v||p[12]!==_||p[13]!==f||p[14]!==g?(l=()=>{if(0===_.length)return;let e=function(e){let t=Math.floor(Math.random()*e.length),n=e[t];if(!n)throw Error("No icebreaker found");return n}(_),t=0===g.messages.length?v:(0,ty.W)(g),n=g.currentUserLogin,i=e.message;f.sendChatMessage({thread:t,content:i.replaceAll("$$USERNAME$$",n),references:g.currentReferences,topic:g.currentTopic,context:g.context,customInstructions:g.customInstructions,model:g.model}),(0,et.BI)("dotcom_chat.activate",{target:"CONTENT_PREVIEW_EMPTY_STATE_ICEBREAKER_BUTTON",topic:g.currentTopic?.name,mode:"immersive",suggestionId:e.id})},p[11]=v,p[12]=_,p[13]=f,p[14]=g,p[15]=l):l=p[15];let w=l;return p[16]===Symbol.for("react.memo_cache_sentinel")?(c=(0,z.jsx)(er.BrowserIcon,{size:24,className:"EmptyState-module__icon--Ur91O"}),u=(0,z.jsx)("h1",{className:"sr-only",children:"Content preview panel"}),o=(0,z.jsx)("h2",{className:"EmptyState-module__heading--fStvv",children:"View files directly within Copilot"}),d=(0,z.jsx)("p",{className:"EmptyState-module__subtitle--tjaBc",children:"Ask to generate a file or app, or use the button below to try it yourself."}),p[16]=o,p[17]=d,p[18]=c,p[19]=u):(o=p[16],d=p[17],c=p[18],u=p[19]),p[20]!==w||p[21]!==g.isWaitingOnCopilot?(m=(0,z.jsxs)("div",{className:"EmptyState-module__container--LAYqE",children:[c,u,o,d,(0,z.jsx)(eB.Q,{ref:x,leadingVisual:aV,onClick:w,disabled:g.isWaitingOnCopilot,children:"I\u2019m feeling lucky"})]}),p[20]=w,p[21]=g.isWaitingOnCopilot,p[22]=m):m=p[22],m}function aU(e){return"interactional"===e.type}try{a$.displayName||(a$.displayName="EmptyState")}catch{}function aq(){let e,t=(0,K.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,z.jsx)("div",{className:"LoadingState-module__container--dKvYJ",children:(0,z.jsx)(eF.A,{size:"large"})}),t[0]=e):e=t[0],e}try{aq.displayName||(aq.displayName="LoadingState")}catch{}function aW(e,t,n={}){(0,et.BI)(e,{contentPreviewType:t.type,mode:"immersive",path:t.id,...n})}function aH(){let e,t=(0,K.c)(5),{closePreviewPane:n}=(0,eb.xx)(),{secondaryColumnFullWidth:i,toggleSecondaryColumnFullWidth:a,setDesktopLayoutState:s}=(0,en.L)();return t[0]!==n||t[1]!==i||t[2]!==s||t[3]!==a?(e=()=>{i&&(a(),s(aG)),n()},t[0]=n,t[1]=i,t[2]=s,t[3]=a,t[4]=e):e=t[4],e}function aG(e){return{...e,fullWidth:!1}}function az(e){let t,n,i,a,s,r,l,o,d,c,u,m,p,h,f,g,y,x,v,b,_,j,w,N,C,S,I,k,T,E,R,L,A,D,P,O,F,B,M,V,$,U,q=(0,K.c)(131),{returnFocusRef:W,disableResourcePanel:H,disableActionsMenu:G}=e,en=void 0!==G&&G,ei=(0,eb.tZ)(),eh=(0,eb.wI)(),{selectedThreadID:e_}=(0,Q.bP)("selectedThreadID"),ej=(0,ee.tD)(),ew=(0,Z.b)(),eN=(0,ea.S)(e_),{items:eC,allOpenItems:eS,selectedItem:eI,openItem:ek,closeItem:eT,closeItems:eE,showLoadingState:eR,openResourcePanel:eL,returnFocusElementRef:eA}=(0,eb.xx)(),eD=aH(),eP=(0,ea.S)(ei),eO=ei&&!eP,eF=eP&&!ei;if(q[0]!==eC||q[1]!==eS){let e;q[3]!==eC?(e=e=>eC.get(e),q[3]=eC,q[4]=e):e=q[4],t=eS.map(e).filter(aY),q[0]=eC,q[1]=eS,q[2]=t}else t=q[2];let eB=t,eM=(0,ep.useId)(),eV=(0,ep.useId)(),e$=(0,ep.useId)();if(q[5]!==eC||q[6]!==eS||q[7]!==eI){let e;q[10]!==eC?(e=e=>eC.get(e),q[10]=eC,q[11]=e):e=q[11],i=(n=eS.map(e).filter(aJ)).find(e=>e.id===eI)??n[0],q[5]=eC,q[6]=eS,q[7]=eI,q[8]=n,q[9]=i}else n=q[8],i=q[9];let eU=i,eq=(0,ea.S)(eI),eW=X.W.copilotResourcePanel&&!(void 0!==H&&H),eH=(0,ep.useRef)(!0);q[12]!==eF||q[13]!==eO||q[14]!==eA||q[15]!==W||q[16]!==eU?(a=()=>{if(eF||X.W.focusTextAreaInsteadOfWorkbench&&eH.current&&eU&&"file"===eU.type&&!eO){eH.current=!1;let e=eA.current;e?e.focus():W.current?.focus()}},s=[eF,eO,W,eU,eA],q[12]=eF,q[13]=eO,q[14]=eA,q[15]=W,q[16]=eU,q[17]=a,q[18]=s):(a=q[17],s=q[18]),(0,ep.useEffect)(a,s),q[19]!==eD||q[20]!==eN||q[21]!==e_?(r=()=>{null!=eN&&eN!==e_&&eD()},l=[eD,eN,e_],q[19]=eD,q[20]=eN,q[21]=e_,q[22]=r,q[23]=l):(r=q[22],l=q[23]),(0,ep.useEffect)(r,l),q[24]!==ei||q[25]!==n||q[26]!==eI?(d=()=>{if(!eI||!ei)return;let e=n.findIndex(e=>e.id===eI),t=eK.current[e];t?.scrollIntoView({block:"nearest",inline:"nearest"})},o=[eI,n,ei],q[24]=ei,q[25]=n,q[26]=eI,q[27]=o,q[28]=d):(o=q[27],d=q[28]),(0,ep.useEffect)(d,o),q[29]!==eh||q[30]!==eL||q[31]!==eq||q[32]!==eW||q[33]!==eI||q[34]!==eU?(c=()=>{eW&&eI&&eI!==eq&&!eh&&eU?.type==="file"&&(0,Y.SI)(eU.reference)&&eL()},u=[eh,eL,eq,eW,eI,eU],q[29]=eh,q[30]=eL,q[31]=eq,q[32]=eW,q[33]=eI,q[34]=eU,q[35]=c,q[36]=u):(c=q[35],u=q[36]),(0,ep.useEffect)(c,u),q[37]!==ej||q[38]!==ew||q[39]!==eq||q[40]!==eI||q[41]!==eU?(m=()=>{if(!X.W.copilotResourcePanel||eI===eq)return;let{currentReferences:e,implicitReferences:t}=ej();if(eI&&eU?.type==="file"){let n=eU.reference;(0,Y.SI)(n)&&!e.some(e=>(0,Y.x_)(e,n))&&(t.size>0&&ew.clearImplicitReferences(),ew.addReference(n,"ContentPreview",{implicit:!0}))}else t.size>0&&ew.clearImplicitReferences()},p=[ej,ew,eq,eI,eU],q[37]=ej,q[38]=ew,q[39]=eq,q[40]=eI,q[41]=eU,q[42]=m,q[43]=p):(m=q[42],p=q[43]),(0,ep.useEffect)(m,p),q[44]!==eB?(h=async()=>{let e=eB.map(aZ);iL(new File([await (0,eu._6)(e).blob()],"files.zip"))},q[44]=eB,q[45]=h):h=q[45];let eG=h;q[46]!==eT||q[47]!==eD||q[48]!==n.length||q[49]!==eU?(f=e=>{if(eU){let t=void 0!==e&&e&&1===n.length;eT(eU.id),t&&(eD(),(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_CLOSE",mode:"immersive"}))}},q[46]=eT,q[47]=eD,q[48]=n.length,q[49]=eU,q[50]=f):f=q[50];let ez=f;q[51]===Symbol.for("react.memo_cache_sentinel")?(g=[],q[51]=g):g=q[51];let eK=(0,ep.useRef)(g),eQ=(0,ep.useRef)(null);q[52]===Symbol.for("react.memo_cache_sentinel")?(y={containerRef:eQ,focusableElementFilter:aQ,bindKeys:es.z0.ArrowHorizontal|es.z0.HomeAndEnd,focusInStrategy:"first",focusOutBehavior:"wrap"},q[52]=y):y=q[52],q[53]!==n?(x=[n],q[53]=n,q[54]=x):x=q[54],(0,el.G)(y,x);let eZ=!(0,J.g)(eQ);if(q[55]!==eM||q[56]!==eT||q[57]!==eE||q[58]!==e$||q[59]!==eD||q[60]!==eh||q[61]!==ek||q[62]!==n||q[63]!==eL||q[64]!==eW||q[65]!==eI||q[66]!==eV){let e;q[78]!==eE||q[79]!==eD?(e=()=>{eE(),eD(),(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_CLOSE_ALL_TABS",mode:"immersive"})},q[78]=eE,q[79]=eD,q[80]=e):e=q[80],v=e,q[81]===Symbol.for("react.memo_cache_sentinel")?(k=(0,em.$)(eg,X.W.copilotWorkbenchSlimLineTopTabs&&ef),q[81]=k):k=q[81],q[82]!==eh||q[83]!==eL||q[84]!==eW?(T=eW&&!eh&&(0,z.jsx)("div",{className:(0,em.$)(ey,ex),children:(0,z.jsx)(eo.K,{icon:er.ListUnorderedIcon,"aria-label":"Open resource panel",onClick:eL,variant:"invisible"})}),q[82]=eh,q[83]=eL,q[84]=eW,q[85]=T):T=q[85],I="ContentPreview-module__tabsContainer--t0I1P",b="ContentPreview-module__tabs--X2Pn9",_="tablist",j="Workbench items",w=eQ,N=-1,C=aK,S=n.map((e,t)=>(0,z.jsx)(aB,{id:e.id===eI?eM:void 0,tabPanelId:e.id===eI?eV:void 0,controlHintId:e$,isActive:e.id===eI,onClick:()=>{ek(e.id),aW("filePreviewTab.click",e)},onClose:()=>(e=>{let t=n[e];if(!t)return;let i=eK.current[e+1]??eK.current[e-1]??eQ.current;i?.focus();let a=1===n.length;eT(t.id),a&&eD(),aW("filePreviewTab.close",t)})(t),item:e,ref:e=>{eK.current[t]=e}},e.id)),q[55]=eM,q[56]=eT,q[57]=eE,q[58]=e$,q[59]=eD,q[60]=eh,q[61]=ek,q[62]=n,q[63]=eL,q[64]=eW,q[65]=eI,q[66]=eV,q[67]=v,q[68]=b,q[69]=_,q[70]=j,q[71]=w,q[72]=N,q[73]=C,q[74]=S,q[75]=I,q[76]=k,q[77]=T}else v=q[67],b=q[68],_=q[69],j=q[70],w=q[71],N=q[72],C=q[73],S=q[74],I=q[75],k=q[76],T=q[77];q[86]!==e$?(E=(0,z.jsx)("span",{id:e$,"aria-hidden":"true",className:"sr-only",children:"Press Delete to close."}),q[86]=e$,q[87]=E):E=q[87],q[88]===Symbol.for("react.memo_cache_sentinel")?(R=(0,z.jsx)("span",{}),q[88]=R):R=q[88],q[89]!==b||q[90]!==_||q[91]!==j||q[92]!==w||q[93]!==N||q[94]!==C||q[95]!==S||q[96]!==E?(L=(0,z.jsxs)("div",{className:b,role:_,"aria-label":j,ref:w,tabIndex:N,onWheel:C,children:[S,E,R]}),q[89]=b,q[90]=_,q[91]=j,q[92]=w,q[93]=N,q[94]=C,q[95]=S,q[96]=E,q[97]=L):L=q[97],q[98]!==I||q[99]!==L?(A=(0,z.jsx)("div",{className:I,children:L}),q[98]=I,q[99]=L,q[100]=A):A=q[100];let eJ=eZ&&"ContentPreview-module__leftDivider--FCyvC";return q[101]!==eJ?(D=(0,em.$)(ey,eJ),q[101]=eJ,q[102]=D):D=q[102],q[103]!==v||q[104]!==en||q[105]!==eG||q[106]!==eB.length||q[107]!==eS.length?(P=!en&&eS.length>0&&(0,z.jsxs)(ed.W,{children:[(0,z.jsx)(ed.W.Anchor,{children:(0,z.jsx)(eo.K,{icon:er.KebabHorizontalIcon,"aria-label":"More options",variant:"invisible"})}),(0,z.jsx)(ed.W.Overlay,{children:(0,z.jsxs)(ec.l,{children:[eB.length>0&&(0,z.jsxs)(ec.l.Item,{onSelect:eG,children:[(0,z.jsx)(ec.l.LeadingVisual,{children:(0,z.jsx)(er.FileZipIcon,{})}),"Download all files"]}),(0,z.jsxs)(ec.l.Item,{onSelect:v,children:[(0,z.jsx)(ec.l.LeadingVisual,{children:(0,z.jsx)(er.XIcon,{})}),"Close all tabs"]})]})})]}),q[103]=v,q[104]=en,q[105]=eG,q[106]=eB.length,q[107]=eS.length,q[108]=P):P=q[108],q[109]===Symbol.for("react.memo_cache_sentinel")?(O=(0,z.jsx)(aX,{}),q[109]=O):O=q[109],q[110]!==D||q[111]!==P?(F=(0,z.jsxs)("div",{className:D,children:[P,O]}),q[110]=D,q[111]=P,q[112]=F):F=q[112],q[113]!==k||q[114]!==T||q[115]!==A||q[116]!==F?(B=(0,z.jsxs)("div",{className:k,children:[T,A,F]}),q[113]=k,q[114]=T,q[115]=A,q[116]=F,q[117]=B):B=q[117],q[118]===Symbol.for("react.memo_cache_sentinel")?(M=(0,em.$)(ev,"content-preview-content"),q[118]=M):M=q[118],q[119]!==ez||q[120]!==eO||q[121]!==eU||q[122]!==eR?(V=eR?(0,z.jsx)(aq,{}):eU?(0,z.jsx)(aA,{isOpening:eO,previewItem:eU,onClose:ez}):(0,z.jsx)(a$,{isOpening:eO}),q[119]=ez,q[120]=eO,q[121]=eU,q[122]=eR,q[123]=V):V=q[123],q[124]!==eM||q[125]!==eV||q[126]!==V?($=(0,z.jsx)("div",{className:M,role:"tabpanel",id:eV,"aria-labelledby":eM,children:V}),q[124]=eM,q[125]=eV,q[126]=V,q[127]=$):$=q[127],q[128]!==B||q[129]!==$?(U=(0,z.jsxs)(z.Fragment,{children:[B,$]}),q[128]=B,q[129]=$,q[130]=U):U=q[130],U}function aK(e){e.deltaY&&(e.preventDefault(),e.currentTarget.scrollLeft=e.currentTarget.scrollLeft+e.deltaY)}function aQ(e){return"tab"===e.role}function aZ(e){return new File([e.value],e.name)}function aJ(e){return!!e}function aY(e){return e?.type==="file"}function aX(){let e,t,n,i,a=(0,K.c)(11),s=aH(),{secondaryColumnFullWidth:r,toggleSecondaryColumnFullWidth:l}=(0,en.L)(),o=r?er.MinimizeIcon:er.MaximizeIcon,d=r?"Collapse workbench":"Expand workbench";return a[0]!==l?(e=()=>{l()},a[0]=l,a[1]=e):e=a[1],a[2]!==o||a[3]!==d||a[4]!==e?(t=(0,z.jsx)(eo.K,{variant:"invisible",icon:o,"aria-label":d,onClick:e,className:"ContentPreview-module__onlyShowOnLargeViewports--pV5gG"}),a[2]=o,a[3]=d,a[4]=e,a[5]=t):t=a[5],a[6]!==s?(n=(0,z.jsx)(eo.K,{variant:"invisible",icon:er.XIcon,"aria-label":"Close workbench",onClick:()=>{s(),(0,et.BI)("dotcom_chat.activate",{target:"CLOSE_PREVIEW_PANE_BUTTON",mode:"immersive"})}}),a[6]=s,a[7]=n):n=a[7],a[8]!==t||a[9]!==n?(i=(0,z.jsxs)("div",{className:"d-flex gap-1",children:[t,n]}),a[8]=t,a[9]=n,a[10]=i):i=a[10],i}function a0(){let e,t=(0,K.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{className:eg,children:(0,z.jsx)("div",{className:(0,em.$)(ey,ex),children:(0,z.jsx)(aX,{})})}),(0,z.jsx)("div",{className:(0,em.$)(ev),children:(0,z.jsx)(eh.x,{regionName:"The workbench"})})]}),t[0]=e):e=t[0],e}function a1(e){let t,n,i,a,s,r=(0,K.c)(16),{returnFocusRef:l,disableResourcePanel:o,disableActionsMenu:d,className:c}=e,u=void 0!==o&&o,m=void 0!==d&&d,p=(0,ep.useId)(),{contentPreviewRef:h}=(0,eb.xx)(),f=(0,eb.tZ)(),g=(0,eb.wI)()&&"ContentPreview-module__resourcePanelOpen--YIQql";r[0]!==c||r[1]!==g?(t=(0,em.$)("ContentPreview-module__container--y5_MG",X.W.copilotWorkbenchSlimLineTopTabs&&ef,g,c),r[0]=c,r[1]=g,r[2]=t):t=r[2];let y=f?h:void 0;return r[3]!==p?(n=(0,z.jsx)("h2",{id:p,className:"sr-only",children:"Workbench"}),r[3]=p,r[4]=n):n=r[4],r[5]===Symbol.for("react.memo_cache_sentinel")?(i=(0,z.jsx)(a0,{}),r[5]=i):i=r[5],r[6]!==m||r[7]!==u||r[8]!==l?(a=(0,z.jsx)(ei.t,{fallback:i,children:(0,z.jsx)(az,{returnFocusRef:l,disableResourcePanel:u,disableActionsMenu:m})}),r[6]=m,r[7]=u,r[8]=l,r[9]=a):a=r[9],r[10]!==p||r[11]!==t||r[12]!==y||r[13]!==n||r[14]!==a?(s=(0,z.jsxs)("div",{"aria-labelledby":p,className:t,tabIndex:-1,"data-testid":"content-preview",role:"dialog",ref:y,children:[n,a]}),r[10]=p,r[11]=t,r[12]=y,r[13]=n,r[14]=a,r[15]=s):s=r[15],s}try{az.displayName||(az.displayName="ContentPreviewInner")}catch{}try{aX.displayName||(aX.displayName="CloseContentPreviewButton")}catch{}try{a0.displayName||(a0.displayName="ContentPreviewFallback")}catch{}try{a1.displayName||(a1.displayName="ContentPreview")}catch{}},79684:(e,t,n)=>{n.d(t,{B:()=>g});var i=n(74848),a=n(21728),s=n(96540),r=n(61526),l=n(94236),o=n(5524);let d="Breadcrumbs-module__container--bnnIp",c="Breadcrumbs-module__list--hG7n1",u="Breadcrumbs-module__item--fekY7",m="Breadcrumbs-module__link--A48Bt",p="Breadcrumbs-module__text--yZS1N";var h=n(38621),f=n(40090);let g=e=>{let t,n,r,p,h,f=(0,a.c)(31),{children:g,"aria-label":_,condensed:j}=e,w=void 0===_?"Breadcrumbs":_;if(f[0]!==g){t=[];let e=(n,i)=>{let a=void 0===i?"":i;for(let[i,r]of s.Children.toArray(n).entries())(0,s.isValidElement)(r)&&(r.type===s.Fragment||"Symbol(react.fragment)"===r.type.toString()?e(r.props.children,`${a}fragment-${i}-`):r.type===y?t.push({key:r.key?.toString()||`${a}item-${i}`,href:r.props.href,children:r.props.children,hasMenu:!1}):r.type===x&&t.push({key:r.key?.toString()||`${a}item-${i}`,children:r.props.children,hasMenu:!0,menuOverlay:r.props.menuOverlay}))};e(g),f[0]=g,f[1]=t}else t=f[1];let N=t[t.length-1];f[2]!==t?(n=t.slice(0,-1),f[2]=t,f[3]=n):n=f[3];let C=n,S=t.length>=3,I=void 0!==j&&j&&S,k=s.useRef(null);if(void 0!==j)if(I){let e,t,n,a,s;return f[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(l.W.Button,{ref:k,className:m,children:"..."}),f[4]=e):e=f[4],f[5]!==C?(t=(0,i.jsx)("li",{className:u,children:(0,i.jsxs)(l.W,{children:[e,(0,i.jsx)(l.W.Overlay,{children:(0,i.jsx)(o.l,{children:C.map(v)})})]})}),f[5]=C,f[6]=t):t=f[6],f[7]!==N?(n=N&&(N.hasMenu&&N.menuOverlay?(0,i.jsx)(x,{menuOverlay:N.menuOverlay,children:N.children}):N.href?(0,i.jsx)(y,{href:N.href,children:N.children}):null),f[7]=N,f[8]=n):n=f[8],f[9]!==t||f[10]!==n?(a=(0,i.jsxs)("ol",{className:c,children:[t,n]}),f[9]=t,f[10]=n,f[11]=a):a=f[11],f[12]!==w||f[13]!==a?(s=(0,i.jsx)("nav",{className:`${d} Breadcrumbs-module__condensed--l60Z1`,"aria-label":w,children:a}),f[12]=w,f[13]=a,f[14]=s):s=f[14],s}else{let e,t;return f[15]!==g?(e=(0,i.jsx)("ol",{className:c,children:g}),f[15]=g,f[16]=e):e=f[16],f[17]!==w||f[18]!==e?(t=(0,i.jsx)("nav",{className:d,"aria-label":w,children:e}),f[17]=w,f[18]=e,f[19]=t):t=f[19],t}let T=`${c} ${S?"Breadcrumbs-module__fullList--aHVvT":"Breadcrumbs-module__alwaysVisible--dK_nL"}`;return f[20]!==g||f[21]!==T?(r=(0,i.jsx)("ol",{className:T,children:g}),f[20]=g,f[21]=T,f[22]=r):r=f[22],f[23]!==S||f[24]!==N||f[25]!==C?(p=S&&(0,i.jsxs)("ol",{className:`${c} Breadcrumbs-module__condensedList--vpMXO`,children:[(0,i.jsx)("li",{className:u,children:(0,i.jsxs)(l.W,{children:[(0,i.jsx)(l.W.Button,{ref:k,className:m,children:"..."}),(0,i.jsx)(l.W.Overlay,{children:(0,i.jsx)(o.l,{children:C.map(b)})})]})}),N&&(N.hasMenu&&N.menuOverlay?(0,i.jsx)(x,{menuOverlay:N.menuOverlay,children:N.children}):N.href?(0,i.jsx)(y,{href:N.href,children:N.children}):null)]}),f[23]=S,f[24]=N,f[25]=C,f[26]=p):p=f[26],f[27]!==w||f[28]!==r||f[29]!==p?(h=(0,i.jsxs)("nav",{className:d,"aria-label":w,children:[r,p]}),f[27]=w,f[28]=r,f[29]=p,f[30]=h):h=f[30],h},y=e=>{let t,n,s,l,o,d=(0,a.c)(14);if(d[0]!==e?({href:n,loading:s,children:t,...l}=e,d[0]=e,d[1]=t,d[2]=n,d[3]=s,d[4]=l):(t=d[1],n=d[2],s=d[3],l=d[4]),s){let e;return d[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("li",{className:u,children:(0,i.jsx)(f.r,{className:"Breadcrumbs-module__skeleton--_d2ba"})}),d[5]=e):e=d[5],e}if(n){let e,a;return d[6]!==t?(e=(0,i.jsx)("span",{className:p,children:t}),d[6]=t,d[7]=e):e=d[7],d[8]!==n||d[9]!==l||d[10]!==e?(a=(0,i.jsx)("li",{className:u,children:(0,i.jsx)(r.N_,{...l,to:n,className:m,"aria-current":"page",children:e})}),d[8]=n,d[9]=l,d[10]=e,d[11]=a):a=d[11],a}return d[12]!==t?(o=(0,i.jsx)("li",{className:u,children:(0,i.jsx)("span",{className:"Breadcrumbs-module__textOnly--v7ypW",children:t})}),d[12]=t,d[13]=o):o=d[13],o},x=e=>{let t,n,s,r,o=(0,a.c)(9),{buttonRef:d,children:c,menuOverlay:f}=e;return o[0]!==c?(t=(0,i.jsx)("span",{className:p,children:c}),o[0]=c,o[1]=t):t=o[1],o[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)("span",{className:"Breadcrumbs-module__icon--CWnGJ",children:(0,i.jsx)(h.TriangleDownIcon,{})}),o[2]=n):n=o[2],o[3]!==t?(s=(0,i.jsx)(l.W.Anchor,{children:(0,i.jsxs)("button",{className:m,"aria-current":"page","aria-haspopup":"true",children:[t,n]})}),o[3]=t,o[4]=s):s=o[4],o[5]!==d||o[6]!==f||o[7]!==s?(r=(0,i.jsx)("li",{className:u,children:(0,i.jsxs)(l.W,{anchorRef:d,children:[s,f]})}),o[5]=d,o[6]=f,o[7]=s,o[8]=r):r=o[8],r};g.Item=y,g.ItemWithMenu=x;try{g.displayName||(g.displayName="Breadcrumbs")}catch{}try{y.displayName||(y.displayName="Item")}catch{}try{x.displayName||(x.displayName="ItemWithMenu")}catch{}function v(e){return(0,i.jsx)(o.l.LinkItem,{href:e.href,children:e.children},e.key)}function b(e){return(0,i.jsx)(o.l.LinkItem,{href:e.href,children:e.children},e.key)}},80770:(e,t,n)=>{n.d(t,{C:()=>l,n:()=>r});var i=n(21728),a=n(97286),s=n(99519);let r="all-loops";function l(){let e,t,n=(0,i.c)(3),l=(0,s.EY)();return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=[r],n[0]=e):e=n[0],n[1]!==l?(t={queryKey:e,queryFn:async()=>{let e=await l.getAllLoops();if(!e.success)throw Error(e.error);return e.data.sort(o)},refetchOnMount:!0},n[1]=l,n[2]=t):t=n[2],(0,a.I)(t)}function o(e,t){return t.updatedAt-e.updatedAt}},80947:(e,t,n)=>{n.d(t,{G:()=>tB,o:()=>tM});var i=n(74848),a=n(4817),s=n(96540),r=n(48881),l=n(85094),o=n(47970),d=n(21728),c=n(46665),u=n(26100),m=n(39876),p=n(51213),h=n(35247),f=n(23967),g=n(22072),y=n(53419),x=n(38621),v=n(69726),b=n(26108),_=n(34164),j=n(1747),w=n(36903);function N(e){let t,n,a,s=(0,d.c)(4),{className:r}=e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)("g",{clipPath:"url(#clip0_6911_7629)",fill:"currentColor",children:(0,i.jsx)("path",{d:"M14.722 6.047a.75.75 0 11-1.5 0V3.615L10.2 6.638a.75.75 0 01-1.06-1.06l3.023-3.024H9.729a.75.75 0 010-1.499h4.243a.75.75 0 01.75.75v4.242zM1.278 9.953a.75.75 0 111.5 0v2.432L5.8 9.362a.75.75 0 011.06 1.06l-3.023 3.024h2.433a.75.75 0 010 1.499H2.028a.75.75 0 01-.75-.75V9.953z"})}),s[0]=t):t=s[0],s[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_6911_7629",children:(0,i.jsx)("path",{fill:"#fff",d:"M0 0H16V16H0z"})})}),s[1]=n):n=s[1],s[2]!==r?(a=(0,i.jsxs)("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",role:"presentation",className:r,children:[t,n]}),s[2]=r,s[3]=a):a=s[3],a}try{N.displayName||(N.displayName="ExpandIcon")}catch{}let C="FileBlock-module__container--Dzsqa",S="FileBlock-module__header--AdNd3",I="FileBlock-module__language--hjnkp",k="FileBlock-module__name--PRLLi",T="FileBlock-module__previewCode--xp45Y",E="FileBlock-module__isClipped--g6E0E",R="FileBlock-module__expandIconContainer--re33w",L="FileBlock-module__actionsContainer--FCHFZ";function A(e){return e.replace(/#L\d+(-L\d+)?$/,"")}function D(e){let t,n,l,o,D,B,M,V,$,U,q,W,H,G,z,K,Q,Z,J,Y,X,ee,et,en,ei,ea=(0,d.c)(102),{language:es,name:er,url:el,code:eo,line:ed,children:ec,isClipped:eu,isStreaming:em,index:ep,startOffset:eh,endOffset:ef}=e,{message:eg}=(0,c.V)();if(ea[0]!==er||ea[1]!==el){let e=el?(0,w.as)(el):null;t=e?.repoOwner&&e?.repoName?(0,w.L2)(e.repoOwner,e.repoName,e.filePath):er,ea[0]=er,ea[1]=el,ea[2]=t}else t=ea[2];let ey=t,{updateItem:ex,openItem:ev,openPreviewPane:eb,versionedItems:e_,getOpenItems:ej}=(0,j.xx)(),{messageIndex:ew,messageId:eN,messageTimestamp:eC,autoOpenPreviewPane:eS,markdown:eI,hasAutoOpenedPreviewPaneRef:ek,setHasAutoOpenedPreviewPane:eT}=(0,r.H)(),{name:eE}=(0,f.vL)(es),eR=`file:${er}`,eL=`${eR}#${ew}.${ed}`,eA=!!eo;ea[3]!==eR||ea[4]!==eL||ea[5]!==e_?(n=(l=e_.get(eR)??[]).indexOf(eL),ea[3]=eR,ea[4]=eL,ea[5]=e_,ea[6]=n,ea[7]=l):(n=ea[6],l=ea[7]);let eD=n,eP=l.length>1&&-1!==eD?eD+1:null,eO=(0,s.useRef)(null);ea[8]!==eg.references||ea[9]!==el?(o=function(e,t){if(!h.W.fileBlockRefMatching||!e||!t)return;let n=A(e);return t.find(e=>A(e.url)===n)}(el,eg.references?.filter(F)),ea[8]=eg.references,ea[9]=el,ea[10]=o):o=ea[10];let eF=o;ea[11]!==eF||ea[12]!==ej||ea[13]!==eL||ea[14]!==ep||ea[15]!==ev||ea[16]!==eb?(D=(e,t)=>{(0,y.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_OPENED",mode:"immersive",...h.W.fileBlockRefMatching?{isRepoFile:!!eF}:{}}),ev(eL,void 0===t||t||ej().length<1||0===ep),e&&eb(eO.current)},ea[11]=eF,ea[12]=ej,ea[13]=eL,ea[14]=ep,ea[15]=ev,ea[16]=eb,ea[17]=D):D=ea[17];let eB=D;ea[18]!==eo||ea[19]!==eF||ea[20]!==eL||ea[21]!==em||ea[22]!==es||ea[23]!==eI||ea[24]!==eN||ea[25]!==eC||ea[26]!==er||ea[27]!==eA||ea[28]!==ex?(B=()=>{let e=eo?.trimEnd();eA&&eN!==p.Wp&&-1!==eI.indexOf(e)&&(h.W.fileBlockRefMatching?ex({messageId:eN,id:eL,language:es,name:er,value:eo,type:"file",timestamp:new Date(eC),isStreaming:em,isUserEdited:!1,reference:(()=>{if(!eF)return;let e=function(e){if(!h.W.fileBlockRefMatching||!e)return null;let t=/^https?:\/\/(?:github|.*\.ghe)\.com\/([^/]+)\/([^/]+)/.exec(e);return t&&t[1]&&t[2]?{owner:t[1],name:t[2]}:null}(eF.url);return{type:"file",url:A(eF.url),path:eF.path,repoID:eF.repoID,repoOwner:e?.owner??eF.repoOwner??"",repoName:e?.name??eF.repoName??"",ref:eF.ref,commitOID:eF.commitOID}})()}):ex({messageId:eN,id:eL,language:es,name:er,value:eo,type:"file",timestamp:new Date(eC),isStreaming:em,isUserEdited:!1}))},ea[18]=eo,ea[19]=eF,ea[20]=eL,ea[21]=em,ea[22]=es,ea[23]=eI,ea[24]=eN,ea[25]=eC,ea[26]=er,ea[27]=eA,ea[28]=ex,ea[29]=B):B=ea[29],ea[30]!==eo||ea[31]!==eF||ea[32]!==eL||ea[33]!==ep||ea[34]!==em||ea[35]!==es||ea[36]!==eI||ea[37]!==eN||ea[38]!==eC||ea[39]!==er||ea[40]!==eA||ea[41]!==ex||ea[42]!==el?(M=[eo,es,eN,er,el,ex,eL,eA,eC,em,eI,eF,ep],ea[30]=eo,ea[31]=eF,ea[32]=eL,ea[33]=ep,ea[34]=em,ea[35]=es,ea[36]=eI,ea[37]=eN,ea[38]=eC,ea[39]=er,ea[40]=eA,ea[41]=ex,ea[42]=el,ea[43]=M):M=ea[43],(0,s.useEffect)(B,M),ea[44]!==eS||ea[45]!==ek||ea[46]!==em||ea[47]!==eN||ea[48]!==eB||ea[49]!==eA||ea[50]!==eT?(V=()=>{em&&eA&&eN!==p.Wp&&(eB(eS&&!ek.current,!1),eT(!0))},$=[em,eA,eB,eS,eN,ek,eT],ea[44]=eS,ea[45]=ek,ea[46]=em,ea[47]=eN,ea[48]=eB,ea[49]=eA,ea[50]=eT,ea[51]=V,ea[52]=$):(V=ea[51],$=ea[52]),(0,s.useEffect)(V,$);let[eM,eV]=(0,s.useState)(!1),{publicCodeReferences:e$,codeVulnerabilities:eU}=(0,m.R)(eg.copilotAnnotations,eh,ef);ea[53]!==eB?(U=()=>eB(!0),q=e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),eB(!0))},ea[53]=eB,ea[54]=U,ea[55]=q):(U=ea[54],q=ea[55]);let eq=`View file: ${er}`,eW=`chat-message-view-file-${er}`,eH=em?(0,i.jsx)(v.A,{size:"small",className:a.sX}):f.Yr.has(eE)?(0,i.jsx)(x.MarkdownIcon,{className:a.sX}):(0,i.jsx)(x.CodeIcon,{className:a.sX});ea[56]!==ey?(W=(0,i.jsx)("span",{className:k,children:ey}),ea[56]=ey,ea[57]=W):W=ea[57],ea[58]!==eP?(H=null!==eP&&(0,i.jsx)(u.g,{version:eP}),ea[58]=eP,ea[59]=H):H=ea[59],ea[60]!==I||ea[61]!==eH||ea[62]!==W||ea[63]!==H?(G=(0,i.jsxs)("div",{className:I,children:[eH,W,H]}),ea[60]=I,ea[61]=eH,ea[62]=W,ea[63]=H,ea[64]=G):G=ea[64],ea[65]!==eU||ea[66]!==e$.length||ea[67]!==eV?(z=(e$.length>0||eU.length>0)&&(0,i.jsx)(b.K,{variant:"invisible",size:"small",icon:x.ShieldIcon,"aria-label":"Code insights",onClick:e=>{e.stopPropagation(),eV(!0)},onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.stopPropagation(),eV(!0))}}),ea[65]=eU,ea[66]=e$.length,ea[67]=eV,ea[68]=z):z=ea[68],ea[69]!==el?(K=el&&(0,i.jsx)(b.K,{as:"a",type:void 0,"aria-label":"Open file in a new tab",icon:x.LinkExternalIcon,variant:"invisible",href:el,target:"_blank",rel:"noopener noreferrer",size:"small",onClick:O,onKeyDown:P}),ea[69]=el,ea[70]=K):K=ea[70],ea[71]===Symbol.for("react.memo_cache_sentinel")?(Q=(0,i.jsx)("div",{className:R,children:(0,i.jsx)(N,{})}),ea[71]=Q):Q=ea[71],ea[72]!==z||ea[73]!==K?(Z=(0,i.jsxs)("div",{className:L,children:[z,K,Q]}),ea[72]=z,ea[73]=K,ea[74]=Z):Z=ea[74],ea[75]!==S||ea[76]!==G||ea[77]!==Z?(J=(0,i.jsxs)("div",{className:S,children:[G,Z]}),ea[75]=S,ea[76]=G,ea[77]=Z,ea[78]=J):J=ea[78];let eG=eu&&E;return ea[79]!==eG?(Y=(0,_.$)(T,eG),ea[79]=eG,ea[80]=Y):Y=ea[80],ea[81]!==ec?(X=(0,i.jsx)("code",{children:ec}),ea[81]=ec,ea[82]=X):X=ea[82],ea[83]!==Y||ea[84]!==X?(ee=(0,i.jsx)("pre",{className:Y,"aria-hidden":!0,children:X}),ea[83]=Y,ea[84]=X,ea[85]=ee):ee=ea[85],ea[86]!==C||ea[87]!==U||ea[88]!==q||ea[89]!==eq||ea[90]!==eW||ea[91]!==J||ea[92]!==ee?(et=(0,i.jsx)("div",{className:"position-relative",children:(0,i.jsxs)("div",{ref:eO,className:C,onClick:U,onKeyDown:q,role:"button",tabIndex:0,"aria-label":eq,"data-testid":eW,children:[J,ee]})}),ea[86]=C,ea[87]=U,ea[88]=q,ea[89]=eq,ea[90]=eW,ea[91]=J,ea[92]=ee,ea[93]=et):et=ea[93],ea[94]!==eU||ea[95]!==eM||ea[96]!==e$||ea[97]!==eV?(en=eM&&(0,i.jsx)(g.t,{publicCodeReferences:e$,codeVulnerabilities:eU,onClose:()=>eV(!1)}),ea[94]=eU,ea[95]=eM,ea[96]=e$,ea[97]=eV,ea[98]=en):en=ea[98],ea[99]!==et||ea[100]!==en?(ei=(0,i.jsxs)(i.Fragment,{children:[et,en]}),ea[99]=et,ea[100]=en,ea[101]=ei):ei=ea[101],ei}function P(e){("Enter"===e.key||" "===e.key)&&e.stopPropagation()}function O(e){return e.stopPropagation()}function F(e){return"file"===e.type||"file-v2"===e.type||"snippet"===e.type}try{D.displayName||(D.displayName="FileBlock")}catch{}let B="data-fileblock-props",M=(0,l.F)(B),V=/^name=(?<name>[^\s]+)/,$=/^name=(?<name>[^\s]+)\n?/,U=/url=(?<url>[^\s]+)/,q={code:(e,t)=>{let n=(0,l.k)(e,B);return n?(0,i.jsx)(D,{...n,children:e.children}):t}};var W=n(50467);let H=/^type=(?<type>[^\s]+)\n?/;let YamlBlockExtension=class YamlBlockExtension{get dataProperty(){return(0,l.F)(this.dataAttribute)}constructor(){(0,W._)(this,"transformMarkdown",e=>{(0,o.YR)(e,"code",e=>{let t,n=e.lang;if(!n)return;let i=(t=H.exec(e.meta??"")?.groups?.type??"").startsWith('"')&&t.endsWith('"')||t.startsWith("'")&&t.endsWith("'")?t.slice(1,-1):t;if(!i)return;let a={lang:n,type:i,value:e.value,isStreaming:e.isStreaming};if(!this.isSupported(a))return;let s=this.extractProps(a);e.data={hName:"div",hProperties:{[this.dataProperty]:JSON.stringify(s)},hChildren:[]}})}),(0,W._)(this,"transformHtml",e=>{(0,o.YR)(e,"element",(e,t,n)=>{let i=e.children?.[0];n&&null!=t&&"pre"===e.tagName&&e.children?.length===1&&i?.type==="element"&&this.dataProperty in i.properties&&n.children.splice(t,1,i)})}),(0,W._)(this,"reactComponents",{div:(e,t)=>{let n=(0,l.k)(e,this.dataAttribute);return n?this.createComponent(n):t}})}};var G=n(72994),z=n(20382),K=n(7812),Q=n(28177),Z=n(39344),J=n(2635),Y=n(73952);function X(){let{messages:e}=(0,J.Pk)(),t=(0,Y.B)(e);return(0,s.useMemo)(()=>t.flatMap(e=>e.mediaContent||[]),[t])}function ee(e){let t=X();return e?et(e,t):""}function et(e,t){if(!e)return"";let n=e.match(/(!\[.*?\]\(image\d+\))/g);if(null==n)return e;for(let i of n){let n=/\(image(\d+)\)/,a=parseInt(i.match(n)[1],10),s=t.length-a,r=t[s]?.chatAttachmentUrl||t[s]?.url;if(r){let t=i.replace(n,`(${r})`);e=e.replace(i,t)}}return e}var en=n(7026),ei=n(69599),ea=n(46996),es=n(99852);let er=e=>e.replace(/\\n/g,`
`).replace(/^\s+|\s+$/g,""),el=(e,t)=>{let n=(e||[]).map(e=>er(e)),i=(t||[]).map(e=>er(e));return n.length===i.length&&(0,ea.A)((0,es.A)(n),(0,es.A)(i))},eo=e=>null==e?"":er(e),ed=e=>{if(Array.isArray(e)){let t=e.map(e=>"string"==typeof e?er(e):String(e));return`[${t.join(",")}]`}return"string"==typeof e||null==e?eo(e):JSON.stringify(e)},ec=(e,t)=>{let n=[],i={};return eo(e.title)!==eo(t.title)&&(n.push("title"),i.title={expected:ed(t.title),actual:ed(e.title)}),eo(e.body)!==eo(t.description)&&(n.push("body"),i.body={expected:ed(t.description),actual:ed(e.body)}),eo(e.repository)!==eo(t.repository)&&(n.push("repository"),i.repository={expected:ed(t.repository),actual:ed(e.repository)}),eo(e.template)!==eo(t.template)&&(n.push("template"),i.template={expected:ed(t.template),actual:ed(e.template)}),eo(e.issueType)!==eo(t.issueType)&&(n.push("issueType"),i.issueType={expected:ed(t.issueType),actual:ed(e.issueType)}),eo(e.milestone)!==eo(t.milestone)&&(n.push("milestone"),i.milestone={expected:ed(t.milestone),actual:ed(e.milestone)}),el(e.assignees,t.assignees)||(n.push("assignees"),i.assignees={expected:ed(t.assignees),actual:ed(e.assignees)}),el(e.labels,t.labels)||(n.push("labels"),i.labels={expected:ed(t.labels),actual:ed(e.labels)}),((e,t)=>{let n=e||[],i=t||[];if(n.length!==i.length)return!1;if(0===n.length)return!0;if(!(n.some(e=>"string"==typeof e)||i.some(e=>"string"==typeof e))&&n.every(e=>"object"==typeof e&&e.id)&&i.every(e=>"object"==typeof e&&e.id)){let e=n.map(e=>er(e.id||"")),t=i.map(e=>er(e.id||""));return(0,ea.A)((0,es.A)(e),(0,es.A)(t))}let a=e=>"string"==typeof e?e:e.title||"",s=n.map(e=>er(a(e))),r=i.map(e=>er(a(e)));return(0,ea.A)((0,es.A)(s),(0,es.A)(r))})(e.projects,t.projects)||(n.push("projects"),i.projects={expected:ed(t.projects),actual:ed(e.projects)}),(0,ea.A)(e.templateFormValues,t.templateFormValuesById)||(n.push("templateFormValues"),i.templateFormValues={expected:ed(t.templateFormValuesById),actual:ed(e.templateFormValues)}),el(e.blockedByTags,t.blockedByTags)||(n.push("blockedByTags"),i.blockedByTags={expected:ed(t.blockedByTags),actual:ed(e.blockedByTags)}),el(e.isBlockingTags,t.isBlockingTags)||(n.push("isBlockingTags"),i.isBlockingTags={expected:ed(t.isBlockingTags),actual:ed(e.isBlockingTags)}),{isEqual:0===n.length,mismatchedFields:n,fieldComparisons:i}};function eu(e){let t,n,i=(0,d.c)(8),{issues:a,isStreaming:l,isIssueTree:o}=e,c=void 0!==o&&o,{messages:u,threadSelectedAt:m}=(0,J.Pk)(),{messageId:p}=(0,r.H)();i[0]!==c||i[1]!==l||i[2]!==a||i[3]!==p||i[4]!==u||i[5]!==m?(t=()=>{let e=(0,Y.B)(u),t=e[e.length-1],n=e.find(e=>e.id===p);if(!l&&n&&"assistant"===n.role&&n.id===t?.id&&new Date(n.createdAt)>=m&&n.references&&a.length>0){let e=n.references.filter(em);for(let t of a)if(t.tag){let n=e.find(e=>e.tag===t.tag);if(n){let e=ec(t,n);if(!e.isEqual)return void(0,y.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_DRAFT_ISSUE_REFERENCE_MISMATCH",mode:"immersive",messageId:p,issueTree:c,mismatchedFields:e.mismatchedFields.join(","),fieldComparisons:JSON.stringify(e.fieldComparisons),yamlMarshaled:(0,ei.G7)("copilot_api_agentic_issue_marshal_yaml")})}}}},n=[l,a,u,m,c,p],i[0]=c,i[1]=l,i[2]=a,i[3]=p,i[4]=u,i[5]=m,i[6]=t,i[7]=n):(t=i[6],n=i[7]),(0,s.useEffect)(t,n)}function em(e){return"draft-issue"===e.type||"draft-update-issue"===e.type}let ep=e=>{if("object"!=typeof e||null==e)return null;let t={};return"title"in e&&"string"==typeof e.title?t.title=e.title:"name"in e&&"string"==typeof e.name&&(t.title=e.name),"tag"in e&&"string"==typeof e.tag&&(t.tag=e.tag),"template-form-values"in e&&"object"==typeof e["template-form-values"]&&null!=e["template-form-values"]&&(t.templateFormValues=Object.fromEntries(Object.entries(e["template-form-values"]).map(([e,t])=>[e,"string"==typeof t?t.trim():t]))),"description"in e&&"string"==typeof e.description&&(t.body=e.description),"labels"in e&&Array.isArray(e.labels)&&(t.labels=e.labels.filter(e=>"string"==typeof e)),"assignees"in e&&Array.isArray(e.assignees)&&(t.assignees=e.assignees.filter(e=>"string"==typeof e)),"repository"in e&&"string"==typeof e.repository&&(t.repository=e.repository),"template"in e&&"string"==typeof e.template&&(t.template=e.template),"projects"in e&&Array.isArray(e.projects)&&(t.projects=e.projects.filter(e=>"string"==typeof e||"object"==typeof e&&null!=e)),"milestone"in e&&"string"==typeof e.milestone&&(t.milestone=e.milestone),"state"in e&&"string"==typeof e.state&&(t.state=e.state),"parentTag"in e&&"string"==typeof e.parentTag&&(t.parentTag=e.parentTag),"issueNumber"in e&&"number"==typeof e.issueNumber&&(t.issueNumber=e.issueNumber),"blockedByTags"in e&&Array.isArray(e.blockedByTags)&&(t.blockedByTags=e.blockedByTags.filter(e=>"string"==typeof e)),"isBlockingTags"in e&&Array.isArray(e.isBlockingTags)&&(t.isBlockingTags=e.isBlockingTags.filter(e=>"string"==typeof e)),"bodyVersion"in e&&"string"==typeof e.bodyVersion&&(t.bodyVersion=e.bodyVersion),"issueType"in e&&"string"==typeof e.issueType&&(t.issueType=e.issueType),"type"in e&&"string"==typeof e.type&&(t.type=e.type),t},eh=e=>{try{let t=(0,z.Hh)(e);return ep(t)}catch{return null}};function ef(e){let t,n,l,o,c,m,p,f,g,x,b,_,w,N,C,S,I,k,T,E=(0,d.c)(87),{yaml:R,isStreaming:L}=e,[A,D]=(0,s.useState)(L);E[0]!==L?(t=()=>{L&&D(!0)},n=[L],E[0]=L,E[1]=t,E[2]=n):(t=E[1],n=E[2]),(0,s.useEffect)(t,n);let{updateItem:P,openItem:O,openPreviewPane:F,closeItem:B,versionedItems:M,items:V}=(0,j.xx)(),{messageId:$,messageIndex:U,autoOpenPreviewPane:q,hasAutoOpenedPreviewPaneRef:W,setHasAutoOpenedPreviewPane:H}=(0,r.H)();R=ee(R),E[3]===Symbol.for("react.memo_cache_sentinel")?(l={},E[3]=l):l=E[3];let z=(0,en.M)(R,eh,l);E[4]!==z?(o=[z],E[4]=z,E[5]=o):o=E[5],E[6]!==L||E[7]!==o?(c={issues:o,isStreaming:L,isIssueTree:!1},E[6]=L,E[7]=o,E[8]=c):c=E[8],eu(c),E[9]===Symbol.for("react.memo_cache_sentinel")?(m=[],E[9]=m):m=E[9],(0,s.useEffect)(ex,m),E[10]!==L||E[11]!==z.type?(p="new-issue",h.W.draftUpdateIssue&&(p=null==z.type&&L?void 0:"draft-update-issue"===z.type?"update-issue":"new-issue"),E[10]=L,E[11]=z.type,E[12]=p):p=E[12];let J=null!=z.tag&&null!=p?`${p}:${z.tag}#${U}`:void 0;E[13]!==J||E[14]!==M?(f=null!=J?(0,K.LU)(J,M):null,E[13]=J,E[14]=M,E[15]=f):f=E[15];let Y=f;E[16]!==J||E[17]!==V?(g=null!=J?V.get(J):void 0,E[16]=J,E[17]=V,E[18]=g):g=E[18];let X=g,et=z.repository||null==p||X?.type!==p?z.repository:X.repository||"";E[19]!==q||E[20]!==W||E[21]!==J||E[22]!==O||E[23]!==F||E[24]!==H?(x=e=>{let{selectItem:t,event:n}=e;null!=J&&(O(J,t),(t||q&&!W.current)&&(F(n?.currentTarget),H(!0)),(0,y.BI)("dotcom_chat.activate",{target:"BROWSER_DRAFT_ISSUE_OPENED",mode:"immersive"}))},E[19]=q,E[20]=W,E[21]=J,E[22]=O,E[23]=F,E[24]=H,E[25]=x):x=E[25];let ei=x;E[26]!==z.projects?(b=(0,G.c)(z.projects),E[26]=z.projects,E[27]=b):b=E[27];let ea=b;E[28]!==B||E[29]!==p||E[30]!==J||E[31]!==L||E[32]!==z.assignees||E[33]!==z.body||E[34]!==z.bodyVersion||E[35]!==z.issueNumber||E[36]!==z.issueType||E[37]!==z.labels||E[38]!==z.milestone||E[39]!==z.parentTag||E[40]!==z.tag||E[41]!==z.template||E[42]!==z.templateFormValues||E[43]!==z.title||E[44]!==$||E[45]!==ea||E[46]!==et||E[47]!==P?(_=()=>{null!=J&&("update-issue"===p&&et&&z.issueNumber&&B(`issue:${et}/${z.issueNumber}`),P({messageId:$,name:z.title??"",body:z.body,bodyVersion:z.bodyVersion,repository:et,id:J,type:p,tag:z.tag??"",parentTag:z.parentTag,isStreaming:L,template:z.template,issueType:z.issueType,milestone:z.milestone,assignees:z.assignees?.sort(),labels:z.labels?.sort(),projects:ea,rawProjectsInput:ea.map(ey).filter(eg).sort(),isUserEdited:!1,defaultValuesById:z.templateFormValues??{},issueNumber:z.issueNumber}))},E[28]=B,E[29]=p,E[30]=J,E[31]=L,E[32]=z.assignees,E[33]=z.body,E[34]=z.bodyVersion,E[35]=z.issueNumber,E[36]=z.issueType,E[37]=z.labels,E[38]=z.milestone,E[39]=z.parentTag,E[40]=z.tag,E[41]=z.template,E[42]=z.templateFormValues,E[43]=z.title,E[44]=$,E[45]=ea,E[46]=et,E[47]=P,E[48]=_):_=E[48],E[49]!==B||E[50]!==p||E[51]!==J||E[52]!==L||E[53]!==z.assignees||E[54]!==z.body||E[55]!==z.bodyVersion||E[56]!==z.issueNumber||E[57]!==z.issueType||E[58]!==z.labels||E[59]!==z.milestone||E[60]!==z.parentTag||E[61]!==z.projects||E[62]!==z.tag||E[63]!==z.template||E[64]!==z.templateFormValues||E[65]!==z.title||E[66]!==$||E[67]!==ea||E[68]!==et||E[69]!==P?(w=[B,p,J,L,z.assignees,z.body,z.bodyVersion,z.issueNumber,z.issueType,z.labels,z.milestone,z.parentTag,z.projects,z.tag,z.template,z.templateFormValues,z.title,$,ea,et,P],E[49]=B,E[50]=p,E[51]=J,E[52]=L,E[53]=z.assignees,E[54]=z.body,E[55]=z.bodyVersion,E[56]=z.issueNumber,E[57]=z.issueType,E[58]=z.labels,E[59]=z.milestone,E[60]=z.parentTag,E[61]=z.projects,E[62]=z.tag,E[63]=z.template,E[64]=z.templateFormValues,E[65]=z.title,E[66]=$,E[67]=ea,E[68]=et,E[69]=P,E[70]=w):w=E[70],(0,s.useEffect)(_,w),E[71]!==A||E[72]!==J||E[73]!==ei?(N=()=>{null!=J&&A&&ei({selectItem:!0})},C=[J,ei,A],E[71]=A,E[72]=J,E[73]=ei,E[74]=N,E[75]=C):(N=E[74],C=E[75]),(0,s.useEffect)(N,C);let es=z.title??"";return E[76]!==L?(S=L?(0,i.jsx)(v.A,{size:"small",className:a.sX}):(0,i.jsx)(Q.n,{type:"new-issue"}),E[76]=L,E[77]=S):S=E[77],E[78]!==Y?(I=null!=Y&&(0,i.jsx)(u.g,{"data-testid":"version-label",version:Y}),E[78]=Y,E[79]=I):I=E[79],E[80]!==ei?(k=e=>ei({selectItem:!0,event:e}),E[80]=ei,E[81]=k):k=E[81],E[82]!==es||E[83]!==S||E[84]!==I||E[85]!==k?(T=(0,i.jsx)(Z.K,{subIssueCount:0,children:(0,i.jsx)(Z.K.RootItem,{title:es,leadingVisual:S,trailingBadge:I,onClick:k})}),E[82]=es,E[83]=S,E[84]=I,E[85]=k,E[86]=T):T=E[86],T}function eg(e){return""!==e}function ey(e){return e.title||""}function ex(){return(0,y.BI)("dotcom_chat.activate",{target:"ISSUE_DRAFT_BLOCK_RENDERED",mode:"immersive"})}try{ef.displayName||(ef.displayName="DraftIssueBlock")}catch{}let ev=new class extends YamlBlockExtension{get dataAttribute(){return"data-draft-issue-block"}isSupported(e){return"yaml"===e.lang&&"draft-issue"===e.type}extractProps(e){return{yaml:e.value,isStreaming:e.isStreaming??!1}}createComponent(e){return(0,i.jsx)(ef,{...e})}};var eb=n(46461),e_=n(13974);let ej="DraftIssueTreeBlock-module__container--framP",ew=e=>{if("object"!=typeof e||null===e)return null;let t={};return"tag"in e&&"string"==typeof e.tag&&(t.tag=e.tag),"parentTag"in e&&"string"==typeof e.parentTag&&(t.parentTag=e.parentTag),"title"in e&&"string"==typeof e.title?t.title=e.title:"name"in e&&"string"==typeof e.name&&(t.title=e.name),"repository"in e&&"string"==typeof e.repository&&(t.repository=e.repository),"number"in e&&"number"==typeof e.number&&(t.number=e.number),"state"in e&&"string"==typeof e.state&&(t.state=e.state),"url"in e&&"string"==typeof e.url&&(t.url=e.url),"blockedByTags"in e&&Array.isArray(e.blockedByTags)&&(t.blockedByTags=e.blockedByTags.filter(e=>"string"==typeof e)),"isBlockingTags"in e&&Array.isArray(e.isBlockingTags)&&(t.isBlockingTags=e.isBlockingTags.filter(e=>"string"==typeof e)),t};function eN(e){try{let t=(0,z.Hh)(e);if("object"==typeof t&&null!==t&&"data"in t&&Array.isArray(t.data))return t.data.map(ew).filter(e=>!!e).filter(e=>!!e.tag);return null}catch{return null}}function eC({data:e}){let t=(0,en.M)(e,eN,[]),{messageId:n}=(0,r.H)(),{updateItem:a,openItem:l,openPreviewPane:o}=(0,j.xx)(),d=(0,s.useMemo)(()=>Array.from((0,eb.G9)(t,e=>e.tag,e=>e.parentTag,e=>e.blockedByTags,e=>e.isBlockingTags).values()).filter(e=>!e.parent),[t]);function c(e,t){if(!e.url)return;let[i,s]=e.repository?.split("/")??[];if(!i||!s||!e.number)return;let r=`issue:${i}/${s}/${e.number}`;a({messageId:n,name:e.title??"",number:e.number,owner:i,repo:s,id:r,href:e.url,type:"issue"}),l(r),o(t?.currentTarget)}let u=e=>e.blockedBy.map(e=>({title:e.item.title??"",href:e.item.url,onClick:t=>{t.metaKey||t.ctrlKey||(t.preventDefault(),c(e.item,t))}}));function m(e){return(0,i.jsx)(Z.K.Item,{title:e.item.title??"",leadingVisual:(0,i.jsx)(eS,{item:e.item}),trailingBadge:(0,i.jsx)(eI,{node:e}),href:e.item.url,onClick:t=>{if(!t.metaKey&&!t.ctrlKey)return t.preventDefault(),c(e.item,t)},blockedBy:u(e),children:e.children.map(m)},e.item.tag)}return(0,i.jsx)("div",{className:ej,children:d.map(e=>{let t=-1;return(0,eb.YR)(e,()=>t++),(0,i.jsxs)(Z.K,{subIssueCount:t,children:[(0,i.jsx)(Z.K.RootItem,{leadingVisual:(0,i.jsx)(eS,{item:e.item}),title:e.item.title??"",trailingBadge:(0,i.jsx)(eI,{node:e}),href:e.item.url,onClick:t=>{if(!t.metaKey&&!t.ctrlKey)return t.preventDefault(),c(e.item,t)},blockedBy:u(e)}),e.children.map(m)]},e.item.tag)})})}function eS(e){let t=(0,d.c)(2),{item:n}=e;if("open"===n.state){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(x.IssueOpenedIcon,{className:"fgColor-open"}),t[0]=e):e=t[0],e}if("closed"===n.state){let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(x.IssueClosedIcon,{className:"fgColor-done"}),t[1]=e):e=t[1],e}}function eI(e){let t,n=(0,d.c)(5),{node:a}=e;if(!a.item.repository||!a.item.number)return null;if(a.item.repository===a.parent?.item.repository){let e;return n[0]!==a.item.number?(e=(0,i.jsxs)("span",{className:"fgColor-muted no-wrap",children:["#",a.item.number]}),n[0]=a.item.number,n[1]=e):e=n[1],e}return n[2]!==a.item.number||n[3]!==a.item.repository?(t=(0,i.jsxs)("span",{className:"fgColor-muted no-wrap",children:[a.item.repository,"#",a.item.number]}),n[2]=a.item.number,n[3]=a.item.repository,n[4]=t):t=n[4],t}try{eC.displayName||(eC.displayName="IssueTreeBlock")}catch{}try{eS.displayName||(eS.displayName="LeadingVisual")}catch{}try{eI.displayName||(eI.displayName="IssueLocation")}catch{}function ek(e){return"state"in e&&"draft"===e.state}function eT(e){return"state"in e&&("open"===e.state||"closed"===e.state)}function eE({data:e,isStreaming:t}){let{message:n}=(0,c.V)(),a=n.references?.filter(e=>"draft-issue"===e.type||"draft-update-issue"===e.type||"existing-issue"===e.type),l=ee(e),o=X(),d=(0,s.useRef)(o);(0,s.useEffect)(()=>{d.current=o},[o]);let m=(0,s.useMemo)(()=>{if(h.W.draftIssueUseRefForDraftBlock&&a){let t=function(e){try{let t=(0,z.gh)(e);if(Array.isArray(t))return t.filter(e=>"object"==typeof e&&null!=e).filter(e=>"tag"in e&&"string"==typeof e.tag).map(e=>e.tag);return[]}catch{return[]}}(l);if(t.length>0&&a.length>0){var e;return e=d.current,t.map(t=>{var n,i;let s=a.find(e=>e.tag===t);return s&&(n=[s],i=e,n.map(e=>{let t;if("existing-issue"===e.type)return{tag:e.tag,parentTag:e.parentTag,title:e.title,repository:e.repository,number:e.number,state:e.state,url:e.url};let n=et(e.description||"",i);if(e.templateFormValuesById){for(let[n,a]of(t={},Object.entries(e.templateFormValuesById)))if(a)try{let e=JSON.parse(a);if(e&&"object"==typeof e&&"string"==typeof e.content){let a=et(e.content,i);t[n]=a.trim()}else{let e=et("string"==typeof a?a:"",i);t[n]=e.trim()}}catch{let e=et("string"==typeof a?a:"",i);t[n]=e.trim()}}return{title:e.title,tag:e.tag,body:n,labels:e.labels,assignees:e.assignees,repository:e.repository,parentTag:e.parentTag,templateFormValues:t,issueType:e.issueType,projects:e.projects,milestone:e.milestone,issueNumber:e.issueNumber,blockedByTags:e.blockedByTags,bodyVersion:e.bodyVersion,type:e.type,template:e.template,state:"draft"}}).filter(e=>!!e.tag))[0]||null}).filter(e=>null!==e)}}return function(e){try{let t=(0,z.gh)(e);if(Array.isArray(t))return t.filter(e=>"object"==typeof e&&null!=e).map(e=>{switch("state"in e?e.state:void 0){case void 0:case"draft":return ep(e);case"open":case"closed":return ew(e)}}).filter(e=>!!e).filter(e=>!!e.tag);return null}catch{return null}}(l)||[]},[l,a]),{items:p,updateItem:f,openItem:g,openPreviewPane:x,closeItem:v,versionedItems:b}=(0,j.xx)(),{messageId:_,messageIndex:w,autoOpenPreviewPane:N,hasAutoOpenedPreviewPaneRef:C,setHasAutoOpenedPreviewPane:S}=(0,r.H)(),I=(0,s.useCallback)(e=>{if(ek(e)&&e.tag){let t="draft-update-issue"===e.type?"update-issue":"new-issue";return`${t}:${e.tag}#${w}`}if(eT(e)&&e.repository&&e.number)return`existing-issue:${e.repository}/${e.number}`},[w]);eu({issues:m,isStreaming:t,isIssueTree:!0}),(0,s.useEffect)(()=>{for(let e of m){if(!e.tag)continue;let n=I(e);if(n){if(h.W.draftIssueUseRefForDraftBlock&&a&&p.get(n))continue;if(ek(e)){let n="draft-update-issue"===e.type?"update-issue":"new-issue",i=`${n}:${e.tag}#${w}`;"update-issue"===n&&e.repository&&e.issueNumber&&v(`issue:${e.repository}/${e.issueNumber}`),f({messageId:_,type:n,id:i,tag:e.tag,parentTag:e.parentTag,name:e.title??"",body:e.body,bodyVersion:e.bodyVersion,repository:e.repository,template:e.template,issueType:e.issueType,milestone:e.milestone,assignees:e.assignees?.sort(),labels:e.labels?.sort(),projects:e.projects?.map(e=>"object"==typeof e&&null!==e?{id:"string"==typeof e.id?e.id:void 0,title:"string"==typeof e.title?e.title:void 0}:{title:String(e)}).filter(e=>!!e.title||!!e.id).sort((e,t)=>(e.title||"").localeCompare(t.title||"")),defaultValuesById:e.templateFormValues??{},isUserEdited:!1,isStreaming:t,blockedByTags:e.blockedByTags??[],isBlockingTags:e.isBlockingTags??[],issueNumber:e.issueNumber})}eT(e)&&e.repository&&e.number&&e.url&&(v(`issue:${e.repository}/${e.number}`),f({messageId:_,type:"existing-issue",id:`existing-issue:${e.repository}/${e.number}`,tag:e.tag,parentTag:e.parentTag,repository:e.repository,number:e.number,name:e.title??"",state:e.state??"open",href:e.url,blockedByTags:e.blockedByTags??[],isBlockingTags:e.isBlockingTags??[]}))}}},[I,t,m,_,w,f,v,a,p]);let k=(0,s.useCallback)((e,{selectItem:t,event:n})=>{let i=I(e);i&&(g(i,t),(t||N&&!C.current)&&(x(n?.currentTarget),S(!0)),(0,y.BI)("dotcom_chat.activate",{target:"BROWSER_DRAFT_ISSUE_OPENED",mode:"immersive"}))},[I,g,N,C,x,S]),T=(0,s.useCallback)(e=>{let t=[...p.entries()].find(([t,n])=>(t.startsWith("new-issue:")||t.startsWith("existing-issue:"))&&("new-issue"===n.type||"existing-issue"===n.type)&&n.tag===e);if(!t)return;let[n]=t,i=(0,K.oy)(n),a=b.get(i),s=a?.at(-1);if(!s)return;let r=p.get(s);if(r)switch(r?.type){case"new-issue":case"update-issue":return{...ep(r),state:"draft"};case"existing-issue":return ew(r);default:return}},[p,b]),E=(0,s.useMemo)(()=>{let e=new Set(m.map(e=>e.tag)),t=Array.from(new Set([...new Set(m.filter(e=>null!=e.parentTag).map(e=>e.parentTag)),...new Set(m.flatMap(e=>null!=e.blockedByTags?e.blockedByTags:[]).filter(e=>null!=e)),...new Set(m.flatMap(e=>null!=e.isBlockingTags?e.isBlockingTags:[]).filter(e=>null!=e))])).filter(t=>null!=t&&!e.has(t)).map(e=>T(e)).filter(e=>null!=e),n=[...m,...t];return Array.from((0,eb.G9)(n,e=>e.tag,e=>e.parentTag,e=>e.blockedByTags,e=>e.isBlockingTags).values()).filter(e=>!e.parent)},[m,T]),R=(0,e_.p)(t);(0,s.useEffect)(()=>{if(!R)return;let e=!0;for(let t of E.values()){if(ek(t.item)){k(t.item,{selectItem:e}),e=!1;continue}for(let n of t.children)ek(n.item)&&(k(n.item,{selectItem:e}),e=!1)}},[R,E,k]);let L=e=>e.blockedBy.map(e=>({title:e.item.title??"",href:eT(e.item)?e.item.url:void 0,onClick:t=>{t.metaKey||t.ctrlKey||(t.preventDefault(),k(e.item,{selectItem:!0,event:t}))}})),A=e=>{let n=I(e.item),a=n?(0,K.LU)(n,b):null;return(0,i.jsx)(Z.K.Item,{title:e.item.title??"",leadingVisual:(0,i.jsx)(eR,{isStreaming:t,item:e.item}),trailingBadge:null!=a?(0,i.jsx)(u.g,{version:a}):void 0,onClick:t=>{t.metaKey||t.ctrlKey||(t.preventDefault(),k(e.item,{selectItem:!0,event:t}))},href:eT(e.item)?e.item.url:void 0,blockedBy:L(e),children:e.children.map(A)},e.item.tag)};return(0,i.jsx)("div",{className:ej,children:E.map(e=>{let n=I(e.item),a=n?(0,K.LU)(n,b):null,s=-1;return(0,eb.YR)(e,()=>s++),(0,i.jsxs)(Z.K,{subIssueHeaderText:eT(e.item)?"New sub-issues":void 0,subIssueCount:s,children:[(0,i.jsx)(Z.K.RootItem,{title:e.item.title??"",leadingVisual:(0,i.jsx)(eR,{isStreaming:t,item:e.item}),trailingBadge:null!=a?(0,i.jsx)(u.g,{"data-testid":"version-label",version:a}):void 0,onClick:t=>{t.metaKey||t.ctrlKey||(t.preventDefault(),k(e.item,{selectItem:!0,event:t}))},href:eT(e.item)?e.item.url:void 0,blockedBy:L(e)}),e.children.map(A)]},e.item.tag)})})}function eR(e){let t=(0,d.c)(5),{isStreaming:n,item:s}=e;if(n){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(v.A,{size:"small",className:`${a.sX} mt-1`}),t[0]=e):e=t[0],e}if(ek(s)){let e,n="draft-update-issue"===s.type?"update-issue":"new-issue";return t[1]!==n?(e=(0,i.jsx)(Q.n,{type:n}),t[1]=n,t[2]=e):e=t[2],e}if(eT(s)){let e;return t[3]!==s.state?(e=(0,i.jsx)(Q.n,{type:"existing-issue",state:s.state}),t[3]=s.state,t[4]=e):e=t[4],e}}try{eE.displayName||(eE.displayName="DraftIssueTreeBlock")}catch{}try{eR.displayName||(eR.displayName="LeadingVisual")}catch{}let eL=new class extends YamlBlockExtension{get dataAttribute(){return"data-draft-tree-issue-block"}isSupported(e){return"yaml"===e.lang&&"draft-issue-tree"===e.type}extractProps(e){return{data:e.value,isStreaming:e.isStreaming??!1}}createComponent(e){return(0,i.jsx)(eE,{...e})}};var eA=n(72534),eD=n(84268);function eP(e){let t,n,a,l,o,c,u=(0,d.c)(28),{owner:m,repo:p,issueNumber:h,href:f,children:g}=e,{updateItem:x,openItem:v,openPreviewPane:b,items:_}=(0,j.xx)(),{messageId:w}=(0,r.H)(),N=(0,J.A3)("messages"),C=(0,s.useRef)(null),S=Number(h),I=`issue:${m}/${p}/${S}`;u[0]!==I||u[1]!==_?(t=_.get(I),u[0]=I,u[1]=_,u[2]=t):t=u[2];let k=t;u[3]!==k?.name||u[4]!==w||u[5]!==N||u[6]!==S||u[7]!==m||u[8]!==p?(n=function(e,t,n,i,a){if(!n||!i||!a||isNaN(a))return;let s=e.find(e=>e.id===t),r=s?.references,l=r?.find(e=>"issue"===e.type&&e.number===a&&e.repository.name===i&&e.repository.owner===n),o=l?.title;if(o)return o;let d=r?.find(e=>"api-response"===e.type&&"Issue"===e.resourceType&&e.repo===`${n}/${i}`&&e.data.number===a),c=d?.data;return c?.title}(N,w,m,p,S)??k?.name??`Issue #${S}`,u[3]=k?.name,u[4]=w,u[5]=N,u[6]=S,u[7]=m,u[8]=p,u[9]=n):n=u[9];let T=n;return u[10]!==f||u[11]!==I||u[12]!==w||u[13]!==S||u[14]!==m||u[15]!==p||u[16]!==T||u[17]!==x?(a=()=>{m&&p&&x({messageId:w,name:T,number:S,owner:m,repo:p,id:I,href:f,type:"issue"})},l=[I,w,f,S,m,p,T,x],u[10]=f,u[11]=I,u[12]=w,u[13]=S,u[14]=m,u[15]=p,u[16]=T,u[17]=x,u[18]=a,u[19]=l):(a=u[18],l=u[19]),(0,s.useEffect)(a,l),u[20]!==I||u[21]!==v||u[22]!==b?(o=e=>{e.metaKey||e.ctrlKey||(v(I),b(C.current),(0,y.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_OPENED",mode:"immersive"}),e.preventDefault())},u[20]=I,u[21]=v,u[22]=b,u[23]=o):o=u[23],u[24]!==g||u[25]!==f||u[26]!==o?(c=(0,i.jsx)(eD.A,{ref:C,href:f,onClick:o,target:"_blank",rel:"noreferrer",children:g}),u[24]=g,u[25]=f,u[26]=o,u[27]=c):c=u[27],c}try{eP.displayName||(eP.displayName="IssueLinkBlock")}catch{}let eO="data-issuelink-props",eF=(0,l.F)(eO),eB=/\/(?<owner>[^/]+)\/(?<repo>[^/]+)\/issues\/(?<number>\d+)/,eM={span:(e,t)=>{let n=(0,l.k)(e,eO);return n?(0,i.jsx)(eP,{...n}):t}};var eV=n(77430),e$=n(10422),eU=n(29731),eq=n(62935),eW=n(26607),eH=n(24494),eG=n(69497),ez=n(91865),eK=n(93654),eQ=n(97286);function eZ(){return{}}function eJ(){return[]}let eY="IssueListBlock-module__item--gmkkY",eX="IssueListBlock-module__content--bNFq8",e0="IssueListBlock-module__title--Di3wj",e1="IssueListBlock-module__description--Uf86U",e2="IssueListBlock-module__open--CQmwr",e3="IssueListBlock-module__draft--ymDJ6",e4="IssueListBlock-module__done--bWmcu",e5="IssueListBlock-module__closed--Iuz7v",e6=e=>{if("object"!=typeof e||null===e)return{};let t={};return"url"in e&&"string"==typeof e.url&&(t.url=e.url),"state"in e&&"string"==typeof e.state&&(t.state=e.state),"draft"in e&&"boolean"==typeof e.draft&&(t.draft=e.draft),"created_at"in e&&"string"==typeof e.created_at&&(t.created_at=e.created_at),"closed_at"in e&&"string"==typeof e.closed_at&&(t.closed_at=e.closed_at),"merged_at"in e&&"string"==typeof e.merged_at&&(t.merged_at=e.merged_at),"title"in e&&"string"==typeof e.title&&(t.title=e.title),"number"in e&&"number"==typeof e.number&&(t.number=e.number),"labels"in e&&Array.isArray(e.labels)&&(t.labels=e.labels.filter(e=>"string"==typeof e)),"author"in e&&"string"==typeof e.author&&(t.author=e.author),"comments"in e&&"number"==typeof e.comments&&(t.comments=e.comments),"assignees_avatar_urls"in e&&Array.isArray(e.assignees_avatar_urls)&&(t.assignees_avatar_urls=e.assignees_avatar_urls.filter(e=>"string"==typeof e)),"repository"in e&&"string"==typeof e.repository&&(t.repository=e.repository),t};function e7(e){let t,n,a,s,r,l,o,c=(0,d.c)(15),{item:u,isStreaming:m}=e,p=u.author;u.merged_at?(l=u.merged_at,o="Merged"):u.closed_at?(l=u.closed_at,o="Closed"):u.created_at&&(l=u.created_at,o="Opened"),c[0]!==l?(n=(t=l?new Date(l):null)&&isNaN(t.getTime()),c[0]=l,c[1]=t,c[2]=n):(t=c[1],n=c[2]),n&&(t=null);let h=!!u.repository;return p&&t||!m||h?(c[3]!==p||c[4]!==h||c[5]!==u.repository||c[6]!==t?(a=h&&(0,i.jsxs)(i.Fragment,{children:[u.repository,(p||t)&&" \xb7 "]}),c[3]=p,c[4]=h,c[5]=u.repository,c[6]=t,c[7]=a):a=c[7],c[8]!==o||c[9]!==p||c[10]!==t?(s=(p||t)&&o&&(0,i.jsxs)(i.Fragment,{children:[p," ",p?o.toLowerCase():o," ",t&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(eq.A,{date:t,format:"relative"})})]}),c[8]=o,c[9]=p,c[10]=t,c[11]=s):s=c[11],c[12]!==a||c[13]!==s?(r=(0,i.jsxs)("span",{className:e1,children:[a,s]}),c[12]=a,c[13]=s,c[14]=r):r=c[14],r):null}let e9=e=>{try{let t=(0,z.Hh)(e);if("object"==typeof t&&null!==t&&"data"in t&&Array.isArray(t.data))return t.data.map(e6);return null}catch{return null}};function e8(e){let t,n,a,l,o,c,u,m=(0,d.c)(17),{data:p,type:h,isStreaming:f}=e;m[0]!==p?(t=()=>e9(p)??[],m[0]=p,m[1]=t):t=m[1];let[g,v]=(0,s.useState)(t),{updateItem:b,openItem:w,openPreviewPane:N}=(0,j.xx)(),{messageId:C}=(0,r.H)(),[S,I]=(0,s.useState)(!0);m[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,ei.G7)("copilot_issue_list_show_more"),m[2]=n):n=m[2];let k=n,T=(0,ei.G7)("copilot_coding_agent_task_response"),E=function(){let e,t,n,i,a,s,r,l=(0,d.c)(13);l[0]===Symbol.for("react.memo_cache_sentinel")?(e={queryKey:eK.ZL,queryFn:eJ,enabled:!1,notifyOnChangeProps:["data"]},l[0]=e):e=l[0];let{data:o}=(0,eQ.I)(e);l[1]!==o?(t=o||[],l[1]=o,l[2]=t):t=l[2],l[3]!==t?(n=(0,ez.ms)(t),l[3]=t,l[4]=n):n=l[4];let c=n;l[5]!==c?(i=["agent-sessions-pull-requests",c],l[5]=c,l[6]=i):i=l[6],l[7]===Symbol.for("react.memo_cache_sentinel")?(a=["data"],l[7]=a):a=l[7],l[8]!==i?(s={queryKey:i,queryFn:eZ,enabled:!1,notifyOnChangeProps:a},l[8]=i,l[9]=s):s=l[9];let{data:u}=(0,eQ.I)(s);if(l[10]!==o||l[11]!==u){if(r=new Map,o&&o.length>0)for(let e of o){if(!e.resource_global_id)continue;let t=`https://github.com/copilot/tasks/pull/${e.resource_global_id}`,n=e.resource_id&&u?u[e.resource_id]:void 0,i={state:e.latest_session_state,title:n?.title};r.set(t,i)}l[10]=o,l[11]=u,l[12]=r}else r=l[12];return r}(),R=k&&S?g.slice(0,10):g,L=k&&g.length>10;m[3]!==p?(a=()=>v(e=>e9(p)??e),l=[p],m[3]=p,m[4]=a,m[5]=l):(a=m[4],l=m[5]),(0,s.useEffect)(a,l),(0,s.useEffect)(()=>{"issue"===h?(0,y.BI)("dotcom_chat.activate",{target:"ISSUE_LIST_BLOCK_RENDERED",mode:"immersive"}):"pr"===h?(0,y.BI)("dotcom_chat.activate",{target:"PR_LIST_BLOCK_RENDERED",mode:"immersive"}):"task"===h&&T&&(0,y.BI)("dotcom_chat.activate",{target:"TASK_LIST_BLOCK_RENDERED",mode:"immersive"})},[h,T]);let A=f&&"IssueListBlock-module__streaming--sTYSD";m[6]!==A?(o=(0,_.$)("IssueListBlock-module__list--hU3Jz",A),m[6]=A,m[7]=o):o=m[7];let D=R.map((e,t)=>{let n={...e,type:h};if("task"===h&&T&&e.url){let t=E.get(e.url);t&&(n={...n,state:t.state,title:t.title??n.title})}let a=f&&t===R.length-1,{icon:s,colorClass:r}=function(e,t){let n,a=null;if("issue"===e.type)"open"!==e.state||e.draft?"closed"!==e.state||e.draft?"open"===e.state&&e.draft?(a=(0,i.jsx)(x.IssueDraftIcon,{"aria-label":"Draft issue"}),n=e3):"closed"===e.state&&e.draft&&(a=(0,i.jsx)(x.SkipIcon,{"aria-label":"Closed draft issue"}),n=e3):(a=(0,i.jsx)(x.IssueClosedIcon,{"aria-label":"Closed issue"}),n=e4):(a=(0,i.jsx)(x.IssueOpenedIcon,{"aria-label":"Open issue"}),n=e2);else if("pr"===e.type){let t="string"==typeof e.merged_at&&e.merged_at.length>0;"open"===e.state&&!t&&e.draft?(a=(0,i.jsx)(x.GitPullRequestDraftIcon,{"aria-label":"Draft pull request"}),n=e3):"open"!==e.state||t||e.draft?"closed"!==e.state||t?"closed"===e.state&&t&&(a=(0,i.jsx)(x.GitMergeIcon,{"aria-label":"Merged pull request"}),n=e4):(a=(0,i.jsx)(x.GitPullRequestClosedIcon,{"aria-label":"Closed pull request"}),n=e5):(a=(0,i.jsx)(x.GitPullRequestIcon,{"aria-label":"Pull request"}),n=e2)}else"task"===e.type&&t&&("queued"===e.state?(a=(0,i.jsx)(x.ClockIcon,{"aria-label":"Task queued",className:"IssueListBlock-module__clockIcon--yllN9"}),n=e2):"pending"===e.state||"idle"===e.state?(a=(0,i.jsx)(x.DotFillIcon,{"aria-label":"Task pending",className:"IssueListBlock-module__dotFillIcon--jW2uo"}),n=e2):"running"===e.state||"in_progress"===e.state?(a=(0,i.jsx)(e$.gX,{animated:!0}),n=e2):"completed"===e.state||"waiting_for_user"===e.state?(a=(0,i.jsx)(x.CheckCircleFillIcon,{"aria-label":"Task completed",className:"IssueListBlock-module__checkCircleIcon--ZHYse"}),n=e4):"failed"===e.state||"timed_out"===e.state?(a=(0,i.jsx)(x.XCircleFillIcon,{"aria-label":"Task failed",className:"IssueListBlock-module__stopIcon--u2wRE"}),n=e5):"cancelled"===e.state&&(a=(0,i.jsx)(x.SkipIcon,{"aria-label":"Task cancelled",className:"IssueListBlock-module__skipIcon--glgzv"}),n=e5));return{icon:a,colorClass:n}}(n,T);return(0,i.jsx)("li",{className:eY,children:(0,i.jsxs)("div",{className:eX,children:[(0,i.jsx)("div",{className:(0,_.$)(r,"IssueListBlock-module__icon--qAaLP"),children:s}),(0,i.jsxs)("div",{className:"IssueListBlock-module__header--NtmSe",children:[a&&!n.title?null:(0,i.jsx)("a",{...(0,eU.G)("issue-list-item-link"),href:n.url??"#",className:"IssueListBlock-module__link--fc5wy",onClick:e=>{if(e.metaKey||e.ctrlKey)return;e.preventDefault();let t=n.url;if(t)if("issue"===n.type){(0,y.BI)("dotcom_chat.activate",{target:"ISSUE_LIST_BLOCK_ITEM_OPEN",mode:"immersive"});let{owner:i,repo:a,number:s}=function(e){let t=/^https?:\/\/[^/]+\/([^/]+)\/([^/]+)\/issues\/(\d+)(\/.*)?$/.exec(e);if(!t)return{};let n=parseInt(t[3]??"0",10);return{owner:t[1],repo:t[2],number:n}}(t);if(i&&a&&s){let r=`issue:${i}/${a}/${s}`;b({messageId:C,name:n.title??`Issue #${s}`,number:s,owner:i,repo:a,id:r,href:t,type:"issue"}),w(r),N(e.currentTarget)}}else"task"===n.type&&T?(0,y.BI)("dotcom_chat.activate",{target:"TASK_LIST_BLOCK_ITEM_OPEN",mode:"immersive"}):(0,y.BI)("dotcom_chat.activate",{target:"PR_LIST_BLOCK_ITEM_OPEN",mode:"immersive"}),window.open(t,"_self")},target:"_blank",rel:"noreferrer",children:n.title?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:e0,children:n.title}),void 0!==n.number&&"task"!==n.type&&(0,i.jsxs)("span",{className:"IssueListBlock-module__number--vsvJy",children:["#",n.number]})]}):void 0!==n.number?(0,i.jsxs)("span",{className:e0,children:["#",n.number]}):(0,i.jsx)("span",{className:(0,_.$)(e0,"IssueListBlock-module__unknownTitle--JszGm"),children:"task"===n.type?"Unknown task":"Unknown issue"})}),"task"!==n.type&&(0,i.jsxs)("div",{className:"IssueListBlock-module__labels--xeeTb",children:[n.labels?.length?n.labels.map(tt):null,0!==n.comments&&void 0!==n.comments&&(0,i.jsxs)(eW.A,{size:"small",variant:"secondary",children:[(0,i.jsx)(x.CommentIcon,{className:"IssueListBlock-module__labelIcon--g4B1V",size:12}),n.comments]})]})]}),"task"===n.type&&T?n.repository?(0,i.jsx)("div",{className:e1,children:n.repository}):null:(0,i.jsx)(e7,{item:n,isStreaming:a}),("task"!==n.type||!T)&&(0,i.jsx)("div",{className:"IssueListBlock-module__metadata--W4tCj",children:void 0===n.assignees_avatar_urls?null:0===n.assignees_avatar_urls.length?(0,i.jsx)("div",{className:"IssueListBlock-module__unassignedAvatar--RB1C7",role:"img","aria-label":"Unassigned",children:(0,i.jsx)(x.PersonIcon,{size:12})}):(0,i.jsx)("div",{role:"img","aria-label":`${n.assignees_avatar_urls.length} ${1===n.assignees_avatar_urls.length?"assignee":"assignees"}`,children:(0,i.jsx)(eH.A,{disableExpand:!0,children:n.assignees_avatar_urls.map(te)})})})]})},t)});return m[8]!==S||m[9]!==L||m[10]!==f||m[11]!==g?(c=L&&(0,i.jsx)("li",{className:eY,children:(0,i.jsx)("div",{className:(0,_.$)(eX,"IssueListBlock-module__toggleContent--NWbi1"),children:(0,i.jsxs)("button",{type:"button",className:(0,_.$)("IssueListBlock-module__toggleButton--C9dbQ",f&&"IssueListBlock-module__shimmer--xZ0Bt"),onClick:()=>I(!S),"aria-expanded":!S,"aria-controls":"issue-list",children:[(0,i.jsx)("span",{className:"IssueListBlock-module__toggleIcon--hynWs",children:S?(0,i.jsx)(x.UnfoldIcon,{size:16}):(0,i.jsx)(x.FoldIcon,{size:16})}),S?`Show ${g.length-10} more`:"Show less"]})})}),m[8]=S,m[9]=L,m[10]=f,m[11]=g,m[12]=c):c=m[12],m[13]!==o||m[14]!==D||m[15]!==c?(u=(0,i.jsx)("div",{children:(0,i.jsxs)("ul",{id:"issue-list",className:o,children:[D,c]})}),m[13]=o,m[14]=D,m[15]=c,m[16]=u):u=m[16],u}function te(e){return(0,i.jsx)(eV.r,{src:e,alt:"Assignee avatar"},e)}function tt(e){return(0,i.jsx)(eW.A,{size:"small",variant:"secondary",className:"IssueListBlock-module__label--tGgUZ",children:(0,i.jsx)(eG.A,{inline:!0,maxWidth:"100%",title:e,children:e})},e)}try{e7.displayName||(e7.displayName="Description")}catch{}try{e8.displayName||(e8.displayName="ListBlock")}catch{}let tn=new class extends YamlBlockExtension{get dataAttribute(){return"data-issues-list-block"}isSupported(e){return"list"===e.lang&&("issue"===e.type||"pr"===e.type||"task"===e.type)}extractProps(e){return{data:e.value,type:e.type,isStreaming:e.isStreaming??!1}}createComponent(e){return(0,i.jsx)(e8,{...e})}},ti=new class extends YamlBlockExtension{get dataAttribute(){return"data-tree-issue-block"}isSupported(e){return"yaml"===e.lang&&"issue-tree"===e.type}extractProps(e){return{data:e.value}}createComponent(e){return(0,i.jsx)(eC,{...e})}};var ta=n(5524),ts=n(35104);function tr(e){let t,n=(0,d.c)(3),{children:a,isStreaming:s,taskCount:r}=e;if(!s&&0===r){let e;return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("span",{children:"No tasks were created, please retry."}),n[0]=e):e=n[0],e}return n[1]!==a?(t=(0,i.jsx)(i.Fragment,{children:a}),n[1]=a,n[2]=t):t=n[2],t}try{tr.displayName||(tr.displayName="SubtasksGroup")}catch{}var tl=n(35673),to=n(57478),td=n(94236);function tc(e){let t,n,a,s=(0,d.c)(10),{onConvertAllToDraftIssues:r,taskCount:l,title:o}=e;return s[0]!==l?(t=(0,i.jsx)(to.A,{className:"ml-2 pb-1",children:l}),s[0]=l,s[1]=t):t=s[1],s[2]!==r||s[3]!==l||s[4]!==o?(n=l>0&&(0,i.jsx)("div",{className:"flex-justify-end d-flex flex-1",children:(0,i.jsxs)(td.W,{children:[(0,i.jsx)(td.W.Anchor,{children:(0,i.jsx)(b.K,{"aria-label":`Tasklist '${o}' options`,icon:x.KebabHorizontalIcon,variant:"invisible"})}),(0,i.jsx)(tl.UJ,{children:(0,i.jsx)(ta.l,{children:(0,i.jsx)(ta.l.Item,{onSelect:r,children:"Draft all as issues"})})})]})}),s[2]=r,s[3]=l,s[4]=o,s[5]=n):n=s[5],s[6]!==t||s[7]!==n||s[8]!==o?(a=(0,i.jsxs)(ta.l.Heading,{as:"h4",className:"mx-3 mt-3 mb-1 d-flex flex-items-center",children:[o,t,n]}),s[6]=t,s[7]=n,s[8]=o,s[9]=a):a=s[9],a}try{tc.displayName||(tc.displayName="TasklistHeader")}catch{}var tu=n(97189),tm=n(65529);function tp(e){let t,n=(0,d.c)(4),{isStreaming:a,onClick:s,task:r}=e;return n[0]!==a||n[1]!==s||n[2]!==r?(t=(0,i.jsx)(tu.Fn,{children:(0,i.jsx)(th,{isStreaming:a,onClick:s,task:r})}),n[0]=a,n[1]=s,n[2]=r,n[3]=t):t=n[3],t}function th(e){let t,n,s,r,l,o,c=(0,d.c)(19),{isStreaming:m,onClick:p,task:h}=e,{pullRequest:f,isLoading:g}=(0,tm.as)(h),{versionedItems:y}=(0,j.xx)();c[0]!==h.id||c[1]!==y?(t=(0,K.LU)(h.id,y),c[0]=h.id,c[1]=y,c[2]=t):t=c[2];let b=t;c[3]!==g||c[4]!==m||c[5]!==f?(n=()=>m||g?(0,i.jsx)(v.A,{size:"small",className:a.sX}):f?.state==="merged"?(0,i.jsx)(x.CheckIcon,{}):f?(0,i.jsx)(x.GitPullRequestIcon,{}):(0,i.jsx)(x.TasklistIcon,{}),c[3]=g,c[4]=m,c[5]=f,c[6]=n):n=c[6];let _=n;return c[7]!==_?(s=(0,i.jsx)(ta.l.LeadingVisual,{children:_()}),c[7]=_,c[8]=s):s=c[8],c[9]!==b?(r=null!=b&&(0,i.jsx)(u.g,{version:b}),c[9]=b,c[10]=r):r=c[10],c[11]!==r?(l=(0,i.jsx)(ta.l.TrailingVisual,{children:r}),c[11]=r,c[12]=l):l=c[12],c[13]!==p||c[14]!==s||c[15]!==l||c[16]!==h.id||c[17]!==h.name?(o=(0,i.jsxs)(ta.l.Item,{onSelect:p,children:[s,h.name,l]},h.id),c[13]=p,c[14]=s,c[15]=l,c[16]=h.id,c[17]=h.name,c[18]=o):o=c[18],o}try{tp.displayName||(tp.displayName="TasklistItem")}catch{}try{th.displayName||(th.displayName="TasklistItemImpl")}catch{}let tf=e=>"object"==typeof e&&null!==e&&"tag"in e&&"string"==typeof e.tag&&"title"in e&&"string"==typeof e.title&&"description"in e&&"string"==typeof e.description&&(!("dependencyTags"in e)||!!Array.isArray(e.dependencyTags))&&(!("repository"in e)||"string"==typeof e.repository)&&!0;function tg({yaml:e,isStreaming:t}){let n=(0,e_.p)(t),a=(0,s.useRef)(new Set),{selectedThreadID:l}=(0,J.Pk)(),{updateItem:o,openItem:d,openPreviewPane:c}=(0,j.xx)(),{messageId:u,messageIndex:m,setHasAutoOpenedPreviewPane:p}=(0,r.H)(),h=(0,s.useRef)({name:"Tasklist",tasks:[]}),f=(0,s.useMemo)(()=>{let t=((e,t)=>{try{var n=(0,z.Hh)(e);if("object"!=typeof n||null==n)return null;let t={name:"name"in n&&"string"==typeof n.name?n.name:"Tasklist",tasks:[]};if("tasks"in n&&Array.isArray(n.tasks))for(let e of n.tasks)"object"==typeof e&&null!=e&&tf(e)&&t.tasks.push(e);return t}catch{return(0,y.BI)("copilot.planning_tasklist",{type:"MALFORMED_YAML",mode:"immersive",threadId:t}),null}})(e,l);return null!=t?(h.current=t,t):h.current},[e,l]),g=(0,s.useMemo)(()=>f.tasks.map(e=>{let n=`planning-task:${e.tag}#${m}`,{title:i,...a}=e;return{...a,name:i,messageId:u,id:n,type:"planning-task",isUserEdited:!1,isStreaming:t,subtaskTags:[]}}),[f,m,u,t]),{convertAllToDraftIssues:x}=(0,ts.W)(g.map(e=>e.tag)),v=(0,s.useCallback)((e,t={})=>{let{selectItem:n,event:i}=t;d(e.id,n),c(i?.currentTarget),p(!0)},[d,c,p]);(0,s.useEffect)(()=>{for(let e=0;e<g.length;e++){let i=g[e];o(i),(t||n)&&!a.current.has(i.id)&&(a.current.add(i.id),v(i,{selectItem:0===e}))}},[t,n,v,g,o]);let b=(0,s.useCallback)((e,t)=>v(e,{event:t}),[v]);(0,s.useEffect)(()=>(0,y.BI)("copilot.planning_tasklist",{type:"BLOCK_RENDERED",mode:"immersive",threadId:l}),[l]),(0,s.useEffect)(()=>{n&&0===g.length&&(0,y.BI)("copilot.planning_tasklist",{type:"NO_TASKS",mode:"immersive",threadId:l})},[n,g.length,l]);let _=g.map(e=>(0,i.jsx)(tp,{isStreaming:!!t,onClick:t=>b(e,t),task:e},e.id));return(0,i.jsx)("div",{className:"PlanningTasklistBlock-module__container--Vl4PK",children:(0,i.jsxs)(ta.l,{variant:"full",showDividers:!0,children:[(0,i.jsx)(tc,{onConvertAllToDraftIssues:x,taskCount:g.length,title:f?.name??"Tasklist"}),(0,i.jsx)(tr,{isStreaming:!!t,taskCount:g.length,children:_})]})})}try{tg.displayName||(tg.displayName="PlanningTasklistBlock")}catch{}let ty=new class extends YamlBlockExtension{get dataAttribute(){return"data-planning-tasklist-block"}isSupported(e){return"yaml"===e.lang&&"planning-tasklist"===e.type}extractProps(e){return{yaml:e.value,isStreaming:e.isStreaming??!1}}createComponent(e){return(0,i.jsx)(tg,{...e})}};var tx=n(33592),tv=n(86877),tb=n(4175),t_=n(1903),tj=n(51933),tw=n(21373),tN=n(40090);let tC="PlanningQuestionsForm-module__container--Xi24c",tS="PlanningQuestionsForm-module__headerContainer--td62h",tI="PlanningQuestionsForm-module__headerSection--pbytI",tk="PlanningQuestionsForm-module__outlineSection--Tx0yi",tT="PlanningQuestionsForm-module__title2--Xmt0r",tE="PlanningQuestionsForm-module__questionContainer--Wr4q2",tR="PlanningQuestionsForm-module__footerContainer--Xpj2v";function tL({questions:e,isStreaming:t=!1,isReadOnly:n=!1,onSubmitAnswers:a,className:r}){let l=(0,s.useMemo)(()=>{let t={},n={};for(let[i,a]of e.questions.entries()){if(!a.suggestions||0===a.suggestions.length)continue;let e=a.suggestions[0];t[i]=e,n[i]=0}return{initialAnswers:t,initialSelectedSuggestions:n}},[e.questions]),[o,d]=(0,s.useState)(l.initialAnswers),[c,u]=(0,s.useState)(l.initialSelectedSuggestions),[m,p]=(0,s.useState)(""),h=(0,s.useCallback)((e,t)=>{u(t=>{let{[e]:n,...i}=t;return i}),d(n=>({...n,[e]:t}))},[]),f=(0,s.useCallback)((e,t,n)=>{u(n=>({...n,[e]:t})),d(t=>({...t,[e]:n}))},[]),g=(0,s.useMemo)(()=>e.questions.some((e,t)=>o[t]?.trim())||m.trim(),[o,e.questions,m]),y=(0,s.useCallback)(t=>{t.preventDefault();let n=[];for(let[t,i]of e.questions.entries()){let e=o[t]?.trim();e&&n.push(`Question: ${i.question.trim()}
Answer: ${e}`)}let i=m.trim();i&&n.push(`Additional comments: ${i}`),0!==n.length&&a(n.join(`

`))},[o,e.questions,m,a]);return n?e.questions.length>0?(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{children:"Open questions:"}),(0,i.jsx)("ul",{style:{listStyleType:"none"},children:e.questions.map(e=>(0,i.jsx)("li",{children:e.question},e.question))})]}):null:t?(0,i.jsxs)("div",{className:(0,_.$)(tC,r),children:[(0,i.jsx)("div",{className:tS,children:(0,i.jsxs)("div",{className:tI,children:[(0,i.jsx)(tN.r,{maxWidth:"50%",size:"titleLarge"}),(0,i.jsxs)("div",{className:tk,children:[(0,i.jsx)(tN.r,{maxWidth:"10%",size:"subtitle"}),(0,i.jsx)(tN.r,{maxWidth:"25%"}),(0,i.jsx)(tN.r,{maxWidth:"25%"}),(0,i.jsx)(tN.r,{maxWidth:"25%"})]})]})}),(0,i.jsxs)("div",{className:"pl-3 pt-3 width-full",children:[(0,i.jsx)(tN.r,{maxWidth:"10%",size:"subtitle"}),[1,2,3].map(e=>(0,i.jsxs)("div",{className:tE,children:[(0,i.jsx)(tN.r,{maxWidth:"80%",size:"subtitle"}),(0,i.jsx)(tN.r,{maxWidth:"70%",size:"bodyLarge"}),(0,i.jsx)(tN.r,{maxWidth:"50%",size:"bodySmall"})]},e))]}),(0,i.jsxs)("div",{className:tR,children:[(0,i.jsx)(tN.r,{maxWidth:"15%",size:"titleLarge"}),(0,i.jsx)(tN.r,{maxWidth:"15%",size:"titleLarge"})]})]}):(0,i.jsxs)("form",{className:(0,_.$)(tC,r),onSubmit:y,children:[(0,i.jsx)("div",{className:tS,children:(0,i.jsxs)("div",{className:tI,children:[(0,i.jsx)("div",{className:"PlanningQuestionsForm-module__title1--TtN_9",children:e.name}),e.outline.length>0&&(0,i.jsxs)("div",{className:tk,children:[(0,i.jsx)("div",{className:tT,children:"Outline"}),(0,i.jsx)("ul",{className:"PlanningQuestionsForm-module__outlineList--dnB7B",children:e.outline.map(e=>(0,i.jsx)("li",{children:e},e))})]})]})}),e.questions.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"pt-3",children:(0,i.jsx)("div",{className:tT,children:"Open questions"})}),e.questions.map(t=>{let n=e.questions.indexOf(t),a=t.suggestions||[];return(0,i.jsx)("div",{className:tE,children:(0,i.jsxs)(tv.A,{className:"flex-self-stretch",children:[(0,i.jsx)(tv.A.Label,{children:t.question}),(0,i.jsx)(tb.Ay,{block:!0,onChange:e=>h(n,e.target.value),rows:1,value:o[n]||""}),a.length>0&&(0,i.jsxs)(tv.A.Caption,{className:"PlanningQuestionsForm-module__suggestionsContainer--GZd8T",children:["Suggestions",(0,i.jsx)(t_.A,{className:"PlanningQuestionsForm-module__suggestions--rKk1X",children:a.map(e=>{let t=a.indexOf(e),s=c[n]===t;return(0,i.jsx)(tj.A,{as:"button",isSelected:s,onClick:()=>f(n,t,e),text:e,type:"button"},e)})})]})]})},t.question)})]}),(0,i.jsxs)(tv.A,{className:"flex-self-stretch",children:[(0,i.jsx)(tv.A.Label,{children:"Additional comments"}),(0,i.jsx)(tb.Ay,{block:!0,onChange:e=>p(e.target.value),rows:3,value:m})]}),(0,i.jsx)("div",{className:tR,children:(0,i.jsx)(tw.Q,{type:"submit",variant:"primary",disabled:!g,children:"Submit"})})]})}try{tL.displayName||(tL.displayName="PlanningQuestionsForm")}catch{}let tA=e=>"object"==typeof e&&null!==e&&"question"in e&&"string"==typeof e.question&&(!("suggestions"in e)||!!Array.isArray(e.suggestions)&&e.suggestions.every(e=>"string"==typeof e));function tD(e){let t,n,a,l,o,c,u=(0,d.c)(18),{yaml:m,isStreaming:p}=e,{selectedThreadID:h,messages:f,currentReferences:g}=(0,J.Pk)(),{messageIndex:x}=(0,r.H)(),v=(0,tx.b)();u[0]!==h||u[1]!==m?(t=((e,t)=>{try{var n=(0,z.Hh)(e);if("object"!=typeof n||null==n)return null;let t={name:"name"in n&&"string"==typeof n.name?n.name:"Brainstorm Questions",outline:[],questions:[]};if("outline"in n&&Array.isArray(n.outline))for(let e of n.outline)"string"==typeof e&&t.outline.push(e);if("questions"in n&&Array.isArray(n.questions))for(let e of n.questions)"object"==typeof e&&null!=e&&tA(e)&&t.questions.push(e);return t}catch{return(0,y.BI)("copilot.planning_questions",{type:"MALFORMED_YAML",mode:"immersive",threadId:t}),null}})(m,h),u[0]=h,u[1]=m,u[2]=t):t=u[2];let b=t;u[3]!==b?(n=b??{name:"Brainstorm Questions",outline:[],questions:[]},u[3]=b,u[4]=n):n=u[4];let _=n,j=f.length>x+1;u[5]!==g||u[6]!==v||u[7]!==_.questions.length||u[8]!==h?(a=e=>{(0,y.BI)("copilot.planning_questions",{type:"SUBMIT_ANSWERS_CLICKED",mode:"immersive",threadId:h,totalQuestionsCount:_.questions.length});let t=v.getThreadById(h);v.sendChatMessage({thread:t,content:e,references:g})},u[5]=g,u[6]=v,u[7]=_.questions.length,u[8]=h,u[9]=a):a=u[9];let w=a;return u[10]!==h?(l=()=>(0,y.BI)("copilot.planning_questions",{type:"BLOCK_RENDERED",mode:"immersive",threadId:h}),o=[h],u[10]=h,u[11]=l,u[12]=o):(l=u[11],o=u[12]),(0,s.useEffect)(l,o),u[13]!==w||u[14]!==j||u[15]!==p||u[16]!==_?(c=(0,i.jsx)(tL,{className:"mb-3",questions:_,isStreaming:p,isReadOnly:j,onSubmitAnswers:w}),u[13]=w,u[14]=j,u[15]=p,u[16]=_,u[17]=c):c=u[17],c}try{tD.displayName||(tD.displayName="PlanningQuestionsBlock")}catch{}let tP=new class extends YamlBlockExtension{get dataAttribute(){return"data-planning-questions-block"}isSupported(e){return"yaml"===e.lang&&"planning-questions"===e.type}extractProps(e){return{yaml:e.value,isStreaming:e.isStreaming??!1}}createComponent(e){return(0,i.jsx)(tD,{...e})}};var tO=n(44095);let tF=new class extends YamlBlockExtension{get dataAttribute(){return"data-planning-spec-block"}isSupported(e){return"yaml"===e.lang&&"planning-spec"===e.type}extractProps(e){return{yaml:e.value,isStreaming:e.isStreaming??!1}}createComponent(e){return(0,i.jsx)(tO._,{...e})}},tB=({messageId:e,messageIndex:t,messageTimestamp:n,autoOpenPreviewPane:l,markdown:d,...c})=>{let u=(0,s.useRef)(!1),m=(0,s.useCallback)(e=>{u.current=e},[]),p=(0,s.useMemo)(()=>{var e;return[...c.extensions??[],(e=[],{transformMarkdown:t=>(0,o.YR)(t,"code",t=>{let n=t.lang??"",{name:i,code:a}=function(e,t){let n=e&&V.exec(e);if(n)return{name:n.groups?.name,code:t};let i=$.exec(t);return i?{name:i.groups?.name,code:t.replace($,"")}:{code:t}}(t.meta??void 0,t.value);if(!i)return;e.includes(i)||e.push(i);let s=function(e){if(!e)return;let t=U.exec(e);return t?.groups?.url}(t.meta??void 0),r=a.split(`
`,6),l=6===r.length,o=l?r.join(`
`):`${r.join(`
`)}
`,d=t.position?.start.line??0;t.value=o,t.data={...t.data,hName:"code",hProperties:{[M]:JSON.stringify({language:n,name:i,url:s,code:a,line:d,isStreaming:t.isStreaming??!1,isClipped:l,index:e.indexOf(i),startOffset:t.position?.start.offset??-1,endOffset:t.position?.end.offset??-1})}}}),transformHtml:e=>(0,o.YR)(e,"element",(e,t,n)=>{let i=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&i?.type==="element"&&"code"===i.tagName&&M in i.properties&&n.children.splice(t,1,i)}),reactComponents:q}),{transformMarkdown:e=>(0,o.YR)(e,"link",e=>{try{if(new URL(e.url,window.location.origin).origin!==window.location.origin)return}catch{return}let t=eB.exec(e.url);if(!t?.groups)return;let{owner:n="",repo:i="",number:a=""}=t.groups;e.data={hName:"span",hProperties:{[eF]:JSON.stringify({owner:n,repo:i,issueNumber:a,href:e.url,children:(0,eA.d)(e)})}}}),reactComponents:eM},tn,ti,ev,eL,ty,tP,tF]},[c.extensions]);return(0,i.jsx)(r.A.Provider,{value:(0,s.useMemo)(()=>({messageId:e,messageIndex:t,messageTimestamp:n,autoOpenPreviewPane:l,markdown:d,hasAutoOpenedPreviewPaneRef:u,setHasAutoOpenedPreviewPane:m}),[e,t,n,l,d,u,m]),children:(0,i.jsx)(a.To,{...c,markdown:d,extensions:p,chatMode:"immersive",className:"MarkdownViewer-module__markdownOverrides--xtpOl"})})},tM=s.memo(tB);try{tB.displayName||(tB.displayName="MarkdownViewer")}catch{}try{tM.displayName||(tM.displayName="MemoizedMarkdownViewer")}catch{}},81453:(e,t,n)=>{n.d(t,{U:()=>ek});var i=n(74848),a=n(21728),s=n(82595),r=n(894),l=n(75202),o=n(91747),d=n(61526),c=n(38621),u=n(11196),m=n(94236),p=n(5524),h=n(34164),f=n(96540),g=n(2635),y=n(33592),x=n(53419),v=n(26108),b=n(81960),_=n(40090),j=n(40961),w=n(25641),N=n(18878);function C({selectedItemID:e,loadingState:t,onConversationSelect:n,isSidebarCondensed:a}){let s=(0,y.b)(),{threads:r}=(0,g.Pk)(),l=(0,f.useMemo)(()=>s.sortAndFilterThreads(r).map(e=>({id:e.id,text:(0,w.CB)(e),href:`${w.Jz}/c/${e.id}`,date:new Date(e.updatedAt)})),[r,s]),o=function(e){let t=new Date,n=new Date(t);n.setDate(t.getDate()-1);let i=new Date(t);i.setDate(t.getDate()-7);let a=new Date(t);a.setDate(t.getDate()-30);let s=[],r=[],l=[],o=[];for(let d of e)d.date.toDateString()===t.toDateString()?s.push(d):d.date.toDateString()===n.toDateString()?r.push(d):d.date>i?l.push(d):d.date>a&&o.push(d);return{Today:s,Yesterday:r,"Last 7 days":l,"Last 30 days":o}}(l),d=0===l.length,c=(0,f.useId)();return(0,i.jsx)("nav",{"aria-labelledby":`${c}-conversations`,id:`${c}-conversation-list`,tabIndex:-1,className:(0,h.$)("ConversationListV2-module__container--DfLLE",a&&"ConversationListV2-module__condensed--vCbJZ"),children:d&&("loading"===t||"pending"===t)?(0,i.jsx)(_.r,{lines:5}):d?(0,i.jsx)(I,{}):(0,i.jsxs)("div",{className:"ConversationListV2-module__section--G3Lm1",children:[(0,i.jsx)("h3",{id:`${c}-conversations`,className:"sr-only",children:"Chats"}),Object.entries(o).map(([t,a])=>a.length>0&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{id:`${c}_${t}`,className:"ConversationListV2-module__title--VKD9S",children:t}),(0,i.jsx)("ul",{className:"ConversationListV2-module__list--N8p2i",children:a.map(t=>(0,i.jsx)(S,{item:t,selectedItemId:e??void 0,onSelect:n,threads:r},t.id))})]},t))]})})}function S({item:e,selectedItemId:t,onSelect:n,threads:a}){let s=e.id===t,[r,l]=(0,f.useState)(null),[o,u]=(0,f.useState)(!1),h=(0,f.useCallback)(()=>u(!0),[]),g=(0,f.useCallback)(()=>u(!1),[]),y=a.get(t),b=!!y?.customCopilotID,_=(0,f.useRef)(null),w=(0,f.useCallback)(()=>{(0,j.flushSync)(()=>l(null)),_.current?.focus()},[_]);return e.href&&(0,i.jsxs)("li",{className:"ConversationListV2-module__item--cPXI6",children:[(0,i.jsx)(d.N_,{className:"ConversationListV2-module__link--J46j6",to:e.href,"aria-current":s?"page":void 0,onClick:()=>{n(),(0,x.BI)("dotcom_chat.activate",{target:"CONVERSATION_SELECT",threadId:e.id,mode:"immersive"})},children:(0,i.jsx)("span",{className:"ConversationListV2-module__text--IsNRP",children:e.text})}),(0,i.jsx)("span",{className:"ConversationListV2-module__context--a0pCE",children:(0,i.jsxs)(m.W,{anchorRef:_,children:[(0,i.jsx)(m.W.Anchor,{children:(0,i.jsx)(v.K,{loading:o,icon:c.KebabHorizontalIcon,"aria-label":"Manage chat",variant:"invisible",onClick:()=>(0,x.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU",mode:"immersive"})})}),(0,i.jsx)(m.W.Overlay,{children:(0,i.jsx)(p.l,{children:(0,i.jsx)(N.V,{onOpenDialog:l,isShared:!!a.get(e.id)?.sharedID,showShare:!b,threadName:e.text,threadId:e.id})})})]})}),(0,i.jsx)(N.p,{visibleDialog:r,onClose:w,threadName:e.text,threadId:e.id,selectedThreadId:t,onStartLoading:h,onFinishLoading:g,returnFocusRef:_})]},e.id)}function I(){return(0,i.jsxs)("div",{className:"ConversationListV2-module__empty--4TgQY",children:[(0,i.jsx)(b.A,{as:"h3",className:"ConversationListV2-module__emptyStateHeading--KkuQU",children:"No chats yet"}),(0,i.jsx)("span",{className:"ConversationListV2-module__emptyStateText--LsdKG",children:"Ask Copilot anything on the right to start your first chat."})]})}try{C.displayName||(C.displayName="ConversationList")}catch{}try{S.displayName||(S.displayName="ConversationListEntry")}catch{}try{I.displayName||(I.displayName="EmptyState")}catch{}var k=n(7554),T=n(61282),E=n(11607),R=n(71205),L=n(29607),A=n(77999),D=n(62421);function P({handleSidebarClick:e,title:t,trailingAction:n}){let a=(0,d.zy)().pathname.includes("/share/"),{threadsLoading:s,selectedThreadID:r,threads:l}=(0,g.bP)("threadsLoading","selectedThreadID","threads"),o=(0,y.b)(),c=(0,f.useMemo)(()=>o.sortAndFilterThreads(l).map(e=>({id:e.id,text:(0,w.CB)(e),href:`${w.Jz}/c/${e.id}`,date:new Date(e.updatedAt)})),[l,o]),u=0===c.length,m="loading"===s.state||"pending"===s.state;return(0,i.jsx)(L.s,{title:t,isEmpty:u,isLoading:m,trailingAction:n,children:c.map(t=>(0,i.jsx)(O,{item:t,selectedItemId:a?void 0:r??void 0,onSelect:e,threads:l},t.id))})}function O({item:e,selectedItemId:t,onSelect:n,threads:a}){let s=e.id===t,[r,l]=(0,f.useState)(null),[o,d]=(0,f.useState)(!1),u=(0,f.useCallback)(()=>d(!0),[]),h=(0,f.useCallback)(()=>d(!1),[]),g=a.get(t),y=!!g?.customCopilotID,b=(0,f.useRef)(null),_=(0,f.useCallback)(()=>{(0,j.flushSync)(()=>l(null)),b.current?.focus()},[b]),w=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(m.W,{anchorRef:b,children:[(0,i.jsx)(m.W.Anchor,{children:(0,i.jsx)(v.K,{loading:o,icon:c.KebabHorizontalIcon,"aria-label":"Manage chat",variant:"invisible",onClick:()=>(0,x.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU",mode:"immersive"})})}),(0,i.jsx)(m.W.Overlay,{children:(0,i.jsx)(p.l,{children:(0,i.jsx)(N.V,{onOpenDialog:l,isShared:!!a.get(e.id)?.sharedID,showShare:!y,threadName:e.text,threadId:e.id})})})]}),(0,i.jsx)(N.p,{visibleDialog:r,onClose:_,threadName:e.text,threadId:e.id,selectedThreadId:t,onStartLoading:u,onFinishLoading:h,returnFocusRef:b})]});return(0,i.jsx)(R.W,{href:e.href,text:e.text,isSelected:s,trailingAction:w,onClick:()=>{n(),(0,x.BI)("dotcom_chat.activate",{target:"CONVERSATION_SELECT",threadId:e.id,mode:"immersive"})}})}function F({handleSidebarClick:e,isCondensed:t,onToggleSidebar:n}){let[a,s]=(0,f.useState)(!1),r=(0,D.G)(),l=(0,f.useCallback)(()=>{t&&n()},[t,n]),o=(0,f.useCallback)(()=>s(!1),[]),d=(0,f.useCallback)(async()=>{t?o():e(),await r({clearTopic:!0,includeThreads:!1}),(0,x.BI)("dotcom_chat.activate",{target:"SIDEBAR_CONVERSATION_NEW",mode:"immersive"})},[e,r,t,o]),u=(0,i.jsx)(T.V,{isIconButton:!0,icon:c.PlusIcon,label:"New agent session",onOpen:()=>(0,x.BI)("agent_sessions.task_view",{target:"CREATE_TASK_FROM_CHAT_BUTTON"}),onClose:l,eventType:"activity_panel",size:"small",tooltipDirection:"e",variant:"invisible"}),p=()=>(0,i.jsxs)(L.j,{isCondensed:!1,"aria-label":"Navigation",children:[(0,i.jsx)(k.oR,{showTitle:!0,trailingAction:u,onTaskClick:t?o:void 0}),(0,i.jsx)(P,{title:"Chats",trailingAction:(0,i.jsx)(v.K,{icon:c.PlusIcon,variant:"invisible","aria-label":"New chat",size:"small",tooltipDirection:"e",onClick:d}),handleSidebarClick:e})]});return t?(0,i.jsx)("div",{className:"ActivityPanel-module__compactContainer--KLMAT",children:(0,i.jsxs)("div",{className:"ActivityPanel-module__compactAgentsMenu--MWK7t",children:[(0,i.jsxs)(m.W,{open:a,onOpenChange:s,children:[(0,i.jsx)(m.W.Anchor,{children:(0,i.jsx)(A.m,{text:"Agent sessions and chats",children:(0,i.jsx)(E.$,{"aria-label":"Agent sessions and chats",icon:(0,i.jsx)(c.HistoryIcon,{}),iconOnly:!0,size:"medium",variant:"invisible"})})}),(0,i.jsx)(m.W.Overlay,{width:"medium",side:"outside-right",align:"start",maxHeight:"xlarge",className:"ActivityPanel-module__overlay--OZPYs",children:(0,i.jsx)("div",{children:p()})})]}),(0,i.jsx)("div",{className:"ActivityPanel-module__largeButton--NUegB",children:u})]})}):p()}try{P.displayName||(P.displayName="ConversationListWrapper")}catch{}try{O.displayName||(O.displayName="ConversationListEntry")}catch{}try{F.displayName||(F.displayName="ActivityPanel")}catch{}let B="CopilotNavigation-module__toggleButtonIcon--__j1B",M="CopilotNavigation-module__footerButton--RlFpZ",V="CopilotNavigation-module__footerButtonContent--mIARB",$="CopilotNavigation-module__condensed--TzlR_",U="CopilotNavigation-module__footerButtonIcon--VWrey";var q=n(84646),W=n(69599),H=n(49851),G=n(26607),z=n(27359),K=n(47789),Q=n(23657);let Z="ServiceList-module__link--VJdHH",J="ServiceList-module__content--k6BSj",Y="ServiceList-module__textWrapper--jtpsQ",X="ServiceList-module__text--DxTKY",ee="ServiceList-module__label--eTRas",et="ServiceList-module__condensed--x5s6A";function en({"aria-current":e,"data-analytics-event":t,href:n,icon:a,onLinkClick:r,id:l,displayName:o,condensed:u,label:m,external:p}){let f=p?(0,i.jsxs)("a",{href:n,className:Z,"aria-label":o,rel:"noopener noreferrer",children:[(0,i.jsx)(s.I,{size:16,icon:a}),(0,i.jsxs)("div",{className:(0,h.$)(J,u&&et),children:[(0,i.jsx)("div",{className:Y,children:(0,i.jsx)("div",{className:X,children:o})}),(0,i.jsx)("div",{className:ee,children:(0,i.jsxs)("div",{className:"ServiceList-module__externalLabel--P9mcb",children:[(0,i.jsx)("span",{className:"ServiceList-module__previewLabel--JWC5Z",children:m}),(0,i.jsx)(c.ArrowUpRightIcon,{className:"ServiceList-module__externalIcon--lTFBq"})]})})]})]}):(0,i.jsxs)(d.N_,{to:n,...{"aria-current":e,"data-analytics-event":t,className:Z,onClick:e=>{r?.(e,l)}},"aria-label":o,children:[(0,i.jsx)(s.I,{size:16,icon:a}),(0,i.jsxs)("div",{className:(0,h.$)(J,u&&et),children:[(0,i.jsx)("div",{className:Y,children:(0,i.jsx)("div",{className:X,children:o})}),(0,i.jsx)("div",{className:ee,children:m})]})]});return(0,i.jsx)("li",{className:"ServiceList-module__section--k1uLc",children:(0,i.jsx)("div",{className:"ServiceList-module__item--fn806",children:(0,i.jsx)(A.m,{text:u?o:"",children:f})})})}let ei=JSON.stringify({source:"ServiceList"});function ea({toggleFloatingSidebar:e,isSidebarCondensed:t}){let{selectedThreadID:n}=(0,g.Pk)(),a=(0,z.v)()?.id,s=(0,K.qw)(),r=(0,D.G)(),l=(0,q.BV)(),o=(0,Q.mM)(),d=!n&&!a&&!o,u=async t=>{t.metaKey||t.ctrlKey||(e(),await r({clearTopic:!0,includeThreads:!1}),(0,x.BI)("dotcom_chat.activate",{target:"SIDEBAR_CONVERSATION_NEW",mode:"immersive"}))},m=(0,f.useCallback)(t=>{t.metaKey||t.ctrlKey||e()},[e]),p=(0,f.useCallback)(t=>{t.metaKey||t.ctrlKey||e()},[e]),h=!(0,W.G7)("copilot_spaces_ga"),y=(0,f.useMemo)(()=>{let e=l?[{type:"spaces",component:(0,i.jsx)(en,{"aria-current":o?"page":void 0,"data-analytics-event":ei,displayName:"Spaces",href:w.VR,icon:H.Dy,condensed:t,id:"spaces",onLinkClick:m,label:h&&(0,i.jsx)(G.A,{variant:"success",children:"Preview"})},"spaces"),displayName:"Spaces"}]:[],n=s.flatMap(e=>e.navigationItems&&e.navigationItems.length>0?e.navigationItems.map(n=>({type:"plugin",component:(0,i.jsx)(en,{"aria-current":a===e.id?"page":void 0,"data-analytics-event":ei,displayName:n.displayName,href:n.href,icon:n.icon,condensed:t,id:n.id,onLinkClick:n.external?void 0:p,label:n.label,external:n.external},`${e.id}-${n.id}`),displayName:n.displayName})):[]),r=(0,W.G7)("copilot_default_to_task_input");return[...e,...n].sort((e,t)=>{if(r){if("Agents"===e.displayName)return -1;if("Agents"===t.displayName)return 1}return e.displayName.localeCompare(t.displayName)})},[l,o,t,m,h,s,a,p]),v=(0,W.G7)("copilot_default_to_task_input"),b=y.map(e=>e.component),_=(0,i.jsx)(en,{"aria-current":d?"page":void 0,"data-analytics-event":ei,displayName:v?"Chat":"New chat",href:w.Jz,icon:v?c.CommentDiscussionIcon:H.KJ,condensed:t,id:"home",onLinkClick:u},"home"),j=(0,W.G7)("copilot_default_to_task_input")&&y[0]?.displayName==="Agents";return b.splice(+!!j,0,_),(0,i.jsx)("ul",{className:"ServiceList-module__list--nR74A",children:b})}try{en.displayName||(en.displayName="ServiceListItem")}catch{}try{ea.displayName||(ea.displayName="ServiceList")}catch{}var es=n(77430),er=n(84268),el=n(51213),eo=n(98755),ed=n(71315),ec=n(15220),eu=n(46251),em=n(69726),ep=n(76720),eh=n(25744),ef=n(3803);let eg="ManageSharedConversationsDialog-module__mutedText--_uOci";var ey=n(21373),ex=n(20139);let ev=e=>{let t,n,s,r,l,o,d,c,u,m,p,h,v,b,_,j,w,N,C,S,I=(0,a.c)(60),{closeDialog:k,threadId:T}=e,E=(0,g.Pk)(),R=(0,y.b)(),{selectedThreadID:L,ssoOrganizations:A,apiUrl:D,threads:P}=E,[O,F]=(0,f.useState)(E.messages);I[0]!==T||I[1]!==P?(t=()=>{let e=P.get(T);return e?.sharedID||""},I[0]=T,I[1]=P,I[2]=t):t=I[2];let[B,M]=(0,f.useState)(t),V=(0,f.useRef)(""!==B),$=(0,f.useRef)("");I[3]!==O||I[4]!==B||I[5]!==E.apiUrl||I[6]!==E.ssoOrganizations||I[7]!==T?(n=()=>{let e=async()=>{if(0===O.filter(e=>e.threadID===T).length){let e=new ex.k(E.apiUrl,E.ssoOrganizations),t=await e.listSharedThreadMessages(B);t.ok&&F(t.payload.messages)}};$.current!==B&&B&&($.current=B,e())},s=[B,T,O,E.apiUrl,E.ssoOrganizations],I[3]=O,I[4]=B,I[5]=E.apiUrl,I[6]=E.ssoOrganizations,I[7]=T,I[8]=n,I[9]=s):(n=I[8],s=I[9]),(0,f.useEffect)(n,s),I[10]!==L||I[11]!==T||I[12]!==P?(r=P.get(T||L),I[10]=L,I[11]=T,I[12]=P,I[13]=r):r=I[13];let U=r,q=O[O.length-1],W=q?.content||"";I[14]!==L||I[15]!==T||I[16]!==P?(l=()=>{let e=T||L;if(e){let t=P.get(e);M(t?.sharedID||"")}},I[14]=L,I[15]=T,I[16]=P,I[17]=l):l=I[17],I[18]!==R||I[19]!==L||I[20]!==T||I[21]!==P?(o=[R,M,L,P,T],I[18]=R,I[19]=L,I[20]=T,I[21]=P,I[22]=o):o=I[22],(0,f.useEffect)(l,o),I[23]!==D||I[24]!==k||I[25]!==R||I[26]!==L||I[27]!==B||I[28]!==A||I[29]!==T?(d=async()=>{let e=T||L,t=new ex.k(D,A),n=await t.unshareThread(e);if(n.ok){let{sharedID:t,sharedAt:i,sharedMessageID:a}=n.payload;R.dispatch({type:"SHARED_THREAD_UPDATED",thread:{id:e,sharedID:t,sharedAt:i,sharedMessageID:a}}),V.current=!1,k(),(0,x.BI)("dotcom_chat.activate",{target:"COPILOT_UNSHARE_CONVERSATION",mode:"immersive",originalThreadId:e,sharedThreadId:B})}},I[23]=D,I[24]=k,I[25]=R,I[26]=L,I[27]=B,I[28]=A,I[29]=T,I[30]=d):d=I[30];let H=d;I[31]!==k?(c=()=>{k()},I[31]=k,I[32]=c):c=I[32];let G=c;I[33]!==H||I[34]!==B?(u=()=>{if(B)return(0,i.jsx)(ey.Q,{onClick:H,variant:"danger",children:"Unshare"})},I[33]=H,I[34]=B,I[35]=u):u=I[35];let z=u;I[36]!==k?(m=()=>(0,i.jsx)(ey.Q,{onClick:k,children:"Cancel"}),I[36]=k,I[37]=m):m=I[37];let K=m;I[38]===Symbol.for("react.memo_cache_sentinel")?(p=(0,i.jsx)("span",{children:"You're about to unshare the link for the following conversation:"}),I[38]=p):p=I[38];let Q=U?.name||"";return I[39]!==Q?(h=(0,i.jsx)("span",{className:"UnshareConversationDialog-module__threadTitle--eBgrX",children:Q}),I[39]=Q,I[40]=h):h=I[40],I[41]!==W?(v=(0,i.jsx)("span",{className:"UnshareConversationDialog-module__threadDescription--E1H0T",children:W}),I[41]=W,I[42]=v):v=I[42],I[43]!==h||I[44]!==v?(b=(0,i.jsxs)(eu.B,{direction:"vertical",className:"UnshareConversationDialog-module__threadInfoStack--gcf6y",children:[h,v]}),I[43]=h,I[44]=v,I[45]=b):b=I[45],I[46]===Symbol.for("react.memo_cache_sentinel")?(_=(0,i.jsx)("span",{children:"Once unshared, the link will no longer be accessible."}),I[46]=_):_=I[46],I[47]!==K?(j=K(),I[47]=K,I[48]=j):j=I[48],I[49]!==z?(w=z(),I[49]=z,I[50]=w):w=I[50],I[51]!==j||I[52]!==w?(N=(0,i.jsxs)(eu.B,{direction:"horizontal",gap:"condensed",align:"end",justify:"end",className:"UnshareConversationDialog-module__buttonStack--JvbNF",children:[j,w]}),I[51]=j,I[52]=w,I[53]=N):N=I[53],I[54]!==b||I[55]!==N?(C=(0,i.jsxs)("div",{className:"UnshareConversationDialog-module__container--Tc1R_",children:[p,b,_,N]}),I[54]=b,I[55]=N,I[56]=C):C=I[56],I[57]!==G||I[58]!==C?(S=(0,i.jsx)(ec.l,{title:"Unshare conversation",onClose:G,width:"large",children:C}),I[57]=G,I[58]=C,I[59]=S):S=I[59],S};try{ev.displayName||(ev.displayName="UnshareConversationDialog")}catch{}let eb=e=>{let t=new Date(e);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"}).format(t)},e_=({closeDialog:e,returnFocusRef:t})=>{let n=(0,y.b)(),a=(0,g.Pk)(),[s,r]=(0,f.useState)(0),[l,o]=(0,f.useState)([]),[d,u]=(0,f.useState)(!0),[m,p]=(0,f.useState)(!1),[h,b]=(0,f.useState)(null),[_,j]=(0,f.useState)(!1),[w,N]=(0,f.useState)(5>l.length),C=5*s,S=l.slice(C,C+5);(0,f.useEffect)(()=>{(async()=>{let e=await n.fetchSharedThreads();e&&o(e.map(e=>({id:e.id,conversation:e.name||"New conversation",lastUpdated:eb(e.updatedAt),sharedUrl:`${ed.fV.origin}/copilot/share/${e.sharedID}`,threadUrl:`${ed.fV.origin}/copilot/c/${e.id}`}))),u(!1)})()},[n]),(0,f.useEffect)(()=>{w&&s>0&&l.length<=5*s&&r(0);let e=5<l.length;e!==w&&N(e)},[l,s,5,w]);let I=(0,f.useCallback)(()=>{e()},[e]),k=(0,f.useCallback)(async()=>{if(!_)return void j(!0);j(!1),u(!0);try{(await n.unshareAllThreads()).ok&&(o([]),await n.fetchThreads())}finally{u(!1)}},[_,n]),T=async()=>{p(!1),b(null),u(!0);let e=await n.fetchSharedThreads();e&&o(e.map(e=>({id:e.id,conversation:e.name||"New chat",lastUpdated:eb(e.updatedAt),sharedUrl:`${ed.fV.origin}/copilot/share/${e.sharedID}`,threadUrl:`${ed.fV.origin}/copilot/c/${e.id}`}))),u(!1)},E=d||"error"===a.sharedThreadsLoading.state||0===l.length,R=(0,f.useMemo)(()=>{if(!l.length)return[];let e={buttonType:"danger",content:"Unshare all",onClick:()=>{_?k():j(!0)}};return _?[{buttonType:"default",content:"Cancel",onClick:()=>j(!1)},e]:[e]},[l.length,_,k]),L=(0,f.useMemo)(()=>d?{result:"loading",heading:"Loading shared conversations",description:"Your shared conversations will appear here.",isSpinner:!0}:"error"===a.sharedThreadsLoading.state?{result:"error",heading:"We couldn't load the shared conversations",description:"Try again or, if the problem persists, contact support."}:{result:"empty",heading:"No shared conversations",description:"Your shared conversations will appear here."},[d,a.sharedThreadsLoading.state]);return(0,i.jsxs)(ec.l,{title:"Manage shared conversations",width:"xlarge",className:"ManageSharedConversationsDialog-module__dialog--_C8sX",position:{narrow:"fullscreen",regular:"center"},onClose:I,returnFocusRef:t,renderFooter:()=>{var e;return R?.length?(0,i.jsx)(ec.l.Footer,{className:"ManageSharedConversationsDialog-module__footer--aTXFp",children:(0,i.jsxs)("div",{className:"ManageSharedConversationsDialog-module__footerContent--yVU91",children:[(0,i.jsx)("div",{className:"ManageSharedConversationsDialog-module__footerLeft--eRZWV",children:_&&(0,i.jsx)("div",{className:"ManageSharedConversationsDialog-module__confirmationText--tYQ41 ManageSharedConversationsDialog-module__quickFadeUp--tiEAs",children:1===(e=l.length)?"Are you sure you want to unshare this conversation?":`Are you sure you want to unshare all ${e} conversations?`})}),(0,i.jsx)("div",{className:"ManageSharedConversationsDialog-module__footerRight--n1XJG",children:(0,i.jsx)(ec.l.Buttons,{buttons:R})})]})}):null},children:[E?(0,i.jsxs)(ep.E,{children:[(0,i.jsx)(ep.E.Visual,{children:L.isSpinner?(0,i.jsx)(eu.B,{direction:"horizontal",align:"center",children:(0,i.jsx)(em.A,{size:"medium",srText:"Loading shared conversations\u2026"})}):(0,i.jsx)("div",{className:eg,children:"error"===L.result?(0,i.jsx)(c.AlertIcon,{size:"medium",className:"ManageSharedConversationsDialog-module__alertIcon--mA28C","aria-label":"Error loading shared conversations"}):(0,i.jsx)(c.LinkIcon,{size:"medium","aria-label":"No shared conversations"})})}),(0,i.jsx)(ep.E.Heading,{children:L.heading}),(0,i.jsx)(ep.E.Description,{children:L.description})]}):(0,i.jsxs)(eh.X.Container,{children:[(0,i.jsx)(ef.b,{"aria-labelledby":"manage-shared-conversations",cellPadding:"normal",columns:[{header:"Chat",field:"conversation",width:"growCollapse",minWidth:"60%",rowHeader:!0,renderCell:e=>(0,i.jsx)(er.A,{href:e.threadUrl,className:"ManageSharedConversationsDialog-module__conversationLink--JqMKE",children:e.conversation})},{header:"Last updated",field:"lastUpdated",width:"growCollapse",renderCell:e=>(0,i.jsx)("span",{className:eg,children:e.lastUpdated})},{id:"actions",width:"growCollapse",align:"end",header:()=>(0,i.jsx)("div",{className:"sr-only",children:"Actions"}),renderCell:e=>(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"ManageSharedConversationsDialog-module__actionButtons--iuECd",children:[(0,i.jsx)(eo.T,{textToCopy:e.sharedUrl,onCopy:()=>{(0,x.BI)("dotcom_chat.activate",{target:"COPILOT_COPY_SHARED_CONVERSATION_LINK",mode:"immersive"})},ariaLabel:"Copy share link"}),(0,i.jsx)(v.K,{"aria-label":"Unshare chat",title:"Unshare chat",icon:c.UnlinkIcon,variant:"invisible",onClick:()=>{b(e),p(!0)}})]})})}],data:S}),l.length>5&&(0,i.jsx)(eh.X.Pagination,{"aria-label":"Shared chats pagination",pageSize:5,defaultPageIndex:s,totalCount:l.length,onChange:e=>{r(e.pageIndex)},showPages:!1})]}),m&&h&&(0,i.jsx)(ev,{threadId:h.id,closeDialog:T})]})};try{e_.displayName||(e_.displayName="ManageSharedConversationsDialog")}catch{}var ej=n(17005),ew=n(87255);let eN="UserMenu-module__userAvatar--sp40T";function eC(e){let t,n,s,r,l,o,d,u,y,v,b,_,j,w,N,C,S,I,k,T,E,R,L,A,D=(0,a.c)(55),{isCondensed:P}=e,O=void 0!==P&&P,F=(0,f.useRef)(null),B=(0,f.useRef)(null),[M,V]=(0,f.useState)(!1),[$,U]=(0,f.useState)(!1),{currentUserLogin:q,plan:W,optedInToUserFeedback:H}=(0,g.bP)("currentUserLogin","plan","optedInToUserFeedback"),G=(0,Q.mM)();D[0]!==W?(t=function(e){switch(e){case el.UH.IndividualFree:return"Free";case el.UH.IndividualPro:return"Pro";case el.UH.IndividualProPlus:return"Pro+";case el.UH.Business:return"Business";case el.UH.Enterprise:return"Enterprise";default:return"Free"}}(W),D[0]=W,D[1]=t):t=D[1];let z=`Copilot ${t}`,K=!W||W===el.UH.IndividualFree,Z=O&&"UserMenu-module__condensed--rjzRR";D[2]!==Z?(n=(0,h.$)("UserMenu-module__userButton--FuXsC",Z),D[2]=Z,D[3]=n):n=D[3];let J=O?"user":void 0,Y=`/${q}.png`;D[4]!==Y?(s=(0,i.jsx)("div",{className:eN,children:(0,i.jsx)(es.r,{src:Y,size:24})}),D[4]=Y,D[5]=s):s=D[5],D[6]!==z?(r=(0,i.jsx)("div",{className:"UserMenu-module__planLabel--wfY7B",children:z}),D[6]=z,D[7]=r):r=D[7],D[8]!==q||D[9]!==r?(l=(0,i.jsxs)("div",{className:"UserMenu-module__userContent--jXldm",children:[q,r]}),D[8]=q,D[9]=r,D[10]=l):l=D[10],D[11]!==n||D[12]!==J||D[13]!==s||D[14]!==l?(o=(0,i.jsx)(m.W.Anchor,{children:(0,i.jsxs)("button",{className:n,"aria-label":J,children:[s,l]})}),D[11]=n,D[12]=J,D[13]=s,D[14]=l,D[15]=o):o=D[15];let X=`/${q}.png`;return D[16]!==X?(d=(0,i.jsx)("div",{className:eN,children:(0,i.jsx)(es.r,{src:X,size:32})}),D[16]=X,D[17]=d):d=D[17],D[18]!==q?(u=(0,i.jsx)("div",{className:"UserMenu-module__username--n5Tln",children:q}),D[18]=q,D[19]=u):u=D[19],D[20]!==K?(y=K&&(0,i.jsxs)(i.Fragment,{children:[" \xb7 ",(0,i.jsx)(er.A,{onClick:eI,href:"https://github.com/github-copilot/pro",className:"UserMenu-module__upgradeLink--eI332",children:"Upgrade"})]}),D[20]=K,D[21]=y):y=D[21],D[22]!==z||D[23]!==y?(v=(0,i.jsxs)("span",{className:"UserMenu-module__description--FvI5s",children:[z,y]}),D[22]=z,D[23]=y,D[24]=v):v=D[24],D[25]!==u||D[26]!==v?(b=(0,i.jsxs)("div",{className:"UserMenu-module__userDetails--mes1V",children:[u,v]}),D[25]=u,D[26]=v,D[27]=b):b=D[27],D[28]!==d||D[29]!==b?(_=(0,i.jsxs)("div",{className:"UserMenu-module__menuItem--oXBxi",children:[d,b]}),D[28]=d,D[29]=b,D[30]=_):_=D[30],D[31]===Symbol.for("react.memo_cache_sentinel")?(j=(0,i.jsx)(p.l.Divider,{}),D[31]=j):j=D[31],D[32]===Symbol.for("react.memo_cache_sentinel")?(w=()=>{U(!0),(0,x.BI)("dotcom_chat.activate",{target:"USER_MENU_PERSONAL_INSTRUCTIONS",mode:"immersive"})},D[32]=w):w=D[32],D[33]===Symbol.for("react.memo_cache_sentinel")?(N=(0,i.jsxs)(p.l.Item,{onSelect:w,children:[(0,i.jsx)(p.l.LeadingVisual,{children:(0,i.jsx)(c.NoteIcon,{})}),"Personal instructions"]}),D[33]=N):N=D[33],D[34]!==G?(C=!G&&(0,i.jsxs)(p.l.Item,{onSelect:()=>{V(!0),(0,x.BI)("dotcom_chat.activate",{target:"USER_MENU_MANAGE_SHARED",mode:"immersive"})},children:[(0,i.jsx)(p.l.LeadingVisual,{children:(0,i.jsx)(c.ListUnorderedIcon,{})}),"Manage shared conversations"]}),D[34]=G,D[35]=C):C=D[35],D[36]!==H?(S=H&&(0,i.jsxs)(p.l.Item,{onSelect:()=>{B.current?.openDialog(),(0,x.BI)("dotcom_chat.activate",{target:"USER_MENU_GIVE_FEEDBACK",mode:"immersive"})},children:[(0,i.jsx)(p.l.LeadingVisual,{children:(0,i.jsx)(c.CommentIcon,{})}),"Give feedback"]}),D[36]=H,D[37]=S):S=D[37],D[38]===Symbol.for("react.memo_cache_sentinel")?(I=(0,i.jsxs)(p.l.LinkItem,{href:"/settings/copilot",onClick:eS,children:[(0,i.jsx)(p.l.LeadingVisual,{children:(0,i.jsx)(c.GearIcon,{})}),"Settings"]}),D[38]=I):I=D[38],D[39]!==_||D[40]!==C||D[41]!==S?(k=(0,i.jsx)(m.W.Overlay,{width:"small",align:"end",children:(0,i.jsxs)(p.l,{children:[_,j,N,C,S,I]})}),D[39]=_,D[40]=C,D[41]=S,D[42]=k):k=D[42],D[43]!==o||D[44]!==k?(T=(0,i.jsxs)(m.W,{anchorRef:F,children:[o,k]}),D[43]=o,D[44]=k,D[45]=T):T=D[45],D[46]===Symbol.for("react.memo_cache_sentinel")?(E=(0,i.jsx)(ej.l,{ref:B,mode:"immersive",returnFocusRef:F}),D[46]=E):E=D[46],D[47]!==M?(R=M&&(0,i.jsx)(e_,{closeDialog:()=>{V(!1)},returnFocusRef:F}),D[47]=M,D[48]=R):R=D[48],D[49]!==$?(L=$&&(0,i.jsx)(ew.Y,{onDismiss:()=>U(!1),returnFocusRef:F}),D[49]=$,D[50]=L):L=D[50],D[51]!==T||D[52]!==R||D[53]!==L?(A=(0,i.jsxs)(i.Fragment,{children:[T,E,R,L]}),D[51]=T,D[52]=R,D[53]=L,D[54]=A):A=D[54],A}function eS(){return(0,x.BI)("dotcom_chat.activate",{target:"USER_MENU_SETTINGS",mode:"immersive"})}function eI(){(0,x.BI)("dotcom_chat.activate",{target:"UPGRADE_USER_MENU_LINK",mode:"immersive"})}try{eC.displayName||(eC.displayName="UserMenu")}catch{}function ek(){let e,t=(0,a.c)(5),{sidebarExpanded:n,sidebarVisible:s,layoutBreakpoint:l,toggleSidebar:o}=(0,r.L)();return t[0]!==l||t[1]!==n||t[2]!==s||t[3]!==o?(e=(0,i.jsx)(eE,{sidebarExpanded:n,sidebarVisible:s,sidebarFloating:l,onToggleSidebar:o}),t[0]=l,t[1]=n,t[2]=s,t[3]=o,t[4]=e):e=t[4],e}function eT(e){let t,n=(0,a.c)(6),{children:s,showTooltip:r,text:l,direction:o}=e,d=void 0===o?"e":o;if(!r){let e;return n[0]!==s?(e=(0,i.jsx)(i.Fragment,{children:s}),n[0]=s,n[1]=e):e=n[1],e}return n[2]!==s||n[3]!==d||n[4]!==l?(t=(0,i.jsx)(u.m,{text:l,direction:d,children:s}),n[2]=s,n[3]=d,n[4]=l,n[5]=t):t=n[5],t}function eE(e){let t,n,r,u,x,v,b,_,j,w,N,S,I,k,T,E,R=(0,a.c)(47),{onSidebarClick:L,onToggleSidebar:A,sidebarExpanded:D,sidebarFloating:P,sidebarVisible:O}=e,q=!P&&!D,W=(0,y.b)(),{threadsLoading:H,threads:G,selectedThreadID:z,ssoOrganizations:K,agentsEnabled:Q}=(0,g.bP)("threadsLoading","threads","selectedThreadID","ssoOrganizations","agentsEnabled"),Z=(0,d.zy)(),J=Z.pathname.includes("/share/");R[0]!==W||R[1]!==G.size||R[2]!==H.state?(t=()=>{0===G.size&&"pending"===H.state&&W.fetchThreads()},n=[G.size,W,H.state],R[0]=W,R[1]=G.size,R[2]=H.state,R[3]=t,R[4]=n):(t=R[3],n=R[4]),(0,f.useEffect)(t,n),R[5]!==L||R[6]!==O||R[7]!==A?(r=()=>{L?.(),O&&A()},R[5]=L,R[6]=O,R[7]=A,R[8]=r):r=R[8];let Y=r,X=(0,f.useId)();R[9]!==Z.hash||R[10]!==Z.pathname||R[11]!==Z.search?(u=e=>{let t=`/orgs/${encodeURIComponent(e)}/sso`,n=Z.pathname+Z.search+Z.hash;return`${t}?return_to=${encodeURIComponent(n)}`},R[9]=Z.hash,R[10]=Z.pathname,R[11]=Z.search,R[12]=u):u=R[12];let ee=u;R[13]!==q||R[14]!==A?(x=()=>(0,i.jsx)(eT,{showTooltip:q,text:"Expand sidebar",children:(0,i.jsxs)("button",{className:M,"aria-label":q?"Expand sidebar":"Collapse sidebar",onClick:A,children:[q?(0,i.jsx)(c.SidebarCollapseIcon,{size:16,className:B}):(0,i.jsx)(c.SidebarExpandIcon,{size:16,className:B}),(0,i.jsx)("span",{className:(0,h.$)(V,q&&$),children:"Collapse"})]})}),R[13]=q,R[14]=A,R[15]=x):x=R[15];let et=x;R[16]!==ee||R[17]!==q||R[18]!==K?(v=()=>{if(0===K.length)return null;if(1===K.length){let e=K[0];return(0,i.jsx)(eT,{showTooltip:q,text:"Single sign-on",children:(0,i.jsxs)("a",{href:ee(e.login),className:M,children:[(0,i.jsx)(c.ShieldLockIcon,{size:16,className:U}),(0,i.jsx)("span",{className:(0,h.$)(V,q&&$),"aria-hidden":q,children:"Single sign-on"})]})})}return(0,i.jsx)(eT,{showTooltip:q,text:"Single sign-on",children:(0,i.jsx)("div",{children:(0,i.jsxs)(m.W,{children:[(0,i.jsx)(m.W.Anchor,{children:(0,i.jsxs)("button",{className:M,"aria-label":"Single sign-on",children:[(0,i.jsx)(s.I,{icon:c.ShieldLockIcon,size:16,className:U}),(0,i.jsx)("div",{className:(0,h.$)(V,q&&$),"aria-hidden":q,children:"Single sign-on"})]})}),(0,i.jsx)(m.W.Overlay,{children:(0,i.jsx)(p.l,{children:K.map(e=>(0,i.jsx)(p.l.LinkItem,{href:ee(e.login),children:e.login},e.login))})})]})})})},R[16]=ee,R[17]=q,R[18]=K,R[19]=v):v=R[19];let en=v;R[20]===Symbol.for("react.memo_cache_sentinel")?(b=(0,i.jsx)(eR,{}),R[20]=b):b=R[20];let ei=`${X}-quick-links`,es=`${X}-quick-links`;R[21]!==es?(_=(0,i.jsx)("h3",{id:es,className:"sr-only",children:"Quick links"}),R[21]=es,R[22]=_):_=R[22],R[23]!==Y||R[24]!==q?(j=(0,i.jsx)(ea,{isSidebarCondensed:q,toggleFloatingSidebar:Y}),R[23]=Y,R[24]=q,R[25]=j):j=R[25],R[26]!==_||R[27]!==j||R[28]!==ei?(w=(0,i.jsxs)("nav",{"aria-labelledby":ei,className:"CopilotNavigation-module__quicklinks--y91ru",children:[_,j]}),R[26]=_,R[27]=j,R[28]=ei,R[29]=w):w=R[29];let er=(0,o.u)("copilot_swe_agent_progress_commands")&&Q?(0,i.jsx)(F,{handleSidebarClick:Y,isCondensed:q,onToggleSidebar:A}):(0,i.jsx)(C,{selectedItemID:J?null:z,loadingState:H.state,onConversationSelect:Y,isSidebarCondensed:q});return R[30]!==w||R[31]!==er?(N=(0,i.jsxs)(l.t,{fallback:b,children:[w,er]}),R[30]=w,R[31]=er,R[32]=N):N=R[32],R[33]!==et||R[34]!==P?(S=!P&&et(),R[33]=et,R[34]=P,R[35]=S):S=R[35],R[36]!==en?(I=en(),R[36]=en,R[37]=I):I=R[37],R[38]!==q?(k=(0,i.jsx)(eC,{isCondensed:q}),R[38]=q,R[39]=k):k=R[39],R[40]!==S||R[41]!==I||R[42]!==k?(T=(0,i.jsxs)("div",{className:"CopilotNavigation-module__footer--WE0C5",children:[S,I,k]}),R[40]=S,R[41]=I,R[42]=k,R[43]=T):T=R[43],R[44]!==N||R[45]!==T?(E=(0,i.jsxs)(i.Fragment,{children:[N,T]}),R[44]=N,R[45]=T,R[46]=E):E=R[46],E}function eR(){let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("div",{className:"CopilotNavigation-module__blankslateContainer--nuX9Y",children:(0,i.jsx)("div",{children:"Error loading conversations"})}),t[0]=e):e=t[0],e}try{ek.displayName||(ek.displayName="CopilotNavigationWithContext")}catch{}try{eT.displayName||(eT.displayName="ConditionalTooltip")}catch{}try{eE.displayName||(eE.displayName="CopilotNavigation")}catch{}try{eR.displayName||(eR.displayName="SidebarContentsFallback")}catch{}},82130:(e,t,n)=>{n.d(t,{q:()=>l});var i=n(68273),a=n(21728),s=n(30459),r=n(96540);let l=(0,i.Z6)()?function(){let e,t,n=(0,a.c)(4),{sendAnalyticsEvent:i}=(0,s.s)();n[0]!==i?(e=(e,t,n)=>{i(e,t,void 0===n?{}:n)},n[0]=i,n[1]=e):e=n[1];let r=e;return n[2]!==r?(t={sendPullRequestAnalyticsEvent:r},n[2]=r,n[3]=t):t=n[3],t}:function(){let{sendAnalyticsEvent:e}=(0,s.s)();return{sendPullRequestAnalyticsEvent:(0,r.useCallback)((t,n,i={})=>{e(t,n,i)},[e])}}},87255:(e,t,n)=>{n.d(t,{Y:()=>C});var i,a=n(74848),s=n(21728),r=n(70170),l=n(53419),o=n(29731),d=n(83494),c=n(88431),u=n(96379),m=n(56149),p=n(86877),h=n(4175),f=n(21373),g=n(15220),y=n(96540),x=n(40961),v=n(2635),b=n(33592),_=n(38621),j=n(5524);let w={Role:{tooltip:"Role, domain, style, and focus areas",body:`Your role:
- {role_type} expert in {domain}
- Focus on {key_skill_area}
`},Communication:{tooltip:"Language, tone and format",body:`Communication:
- Write in {tone/language}
- Reference {source_type} documentation
- Structure responses as {format}
`},"Code preferences":{tooltip:"Code style, patterns, and conventions",body:`Code guidelines:
- Use {language} conventions
- Follow {pattern/code_guidelines}
- Optimize for {goal}
`}},N=(0,y.forwardRef)(function(e,t){let n,i,r,l,o,d,c,u,m=(0,s.c)(19),{onSelect:p}=e,[h,f]=(0,y.useState)(!1);m[0]!==h?(n=()=>f(!h),m[0]=h,m[1]=n):n=m[1];let g=n;m[2]===Symbol.for("react.memo_cache_sentinel")?(i={marginBottom:"1px"},m[2]=i):i=m[2],m[3]!==p||m[4]!==h?(r=h&&Object.entries(w)?.map(e=>{let[t,n]=e;return(0,a.jsxs)(j.l.Item,{"aria-label":`${n.tooltip}`,className:"mx-0 border fgColor-muted d-inline-block width-auto",onSelect:()=>p(t,n.body),children:[(0,a.jsx)(_.PlusIcon,{}),t]},t)}),m[3]=p,m[4]=h,m[5]=r):r=m[5],m[6]!==r?(l=(0,a.jsx)(j.l,{className:"d-inline-flex flex-wrap gap-2 rounded-2",children:r}),m[6]=r,m[7]=l):l=m[7];let x=h?"Hide templates":"Show templates";return m[8]===Symbol.for("react.memo_cache_sentinel")?(o={border:"1px solid transparent"},m[8]=o):o=m[8],m[9]!==h?(d=h?(0,a.jsx)(_.XIcon,{}):(0,a.jsx)(_.LightBulbIcon,{}),m[9]=h,m[10]=d):d=m[10],m[11]!==x||m[12]!==d||m[13]!==g?(c=(0,a.jsx)(j.l,{className:"d-flex flex-column flex-justify-end",children:(0,a.jsx)(j.l.Item,{"aria-label":x,"data-testid":"toggle-templates",className:"fgColor-muted d-inline-block width-auto flex-justify-end mx-0",style:o,onSelect:g,children:d})}),m[11]=x,m[12]=d,m[13]=g,m[14]=c):c=m[14],m[15]!==t||m[16]!==l||m[17]!==c?(u=(0,a.jsxs)("div",{ref:t,className:"d-inline-flex flex-justify-between position-absolute bgColor-default right-0 left-0 bottom-0 ml-2 mr-3",style:i,children:[l,c]}),m[15]=t,m[16]=l,m[17]=c,m[18]=u):u=m[18],u});try{N.displayName||(N.displayName="PersonalInstructionsTemplates")}catch{}try{(i=PersonalInstructionsTemplatesWithRef).displayName||(i.displayName="PersonalInstructionsTemplatesWithRef")}catch{}let C=({onDismiss:e,returnFocusRef:t})=>{let n=(0,v.Pk)(),i=(0,b.b)(),[_,j]=(0,y.useState)(n.personalInstructions??""),[w,C]=(0,y.useState)(void 0),[I,k]=(0,y.useState)(!1),T=(0,y.useRef)(null),E=(0,y.useRef)(null),[R,L]=(0,y.useState)(""),A=((e,t)=>{let n,i,a=(0,s.c)(4),[l,o]=(0,y.useState)(48);return a[0]!==e||500!==a[1]?(n=()=>{let t=(0,r.s)(()=>{e?.current&&o(e.current.clientHeight??48)},500),n=new ResizeObserver(t);return e?.current&&n.observe(e.current),()=>{t.cancel(),n?.disconnect?.()}},i=[e,500],a[0]=e,a[1]=500,a[2]=n,a[3]=i):(n=a[2],i=a[3]),(0,y.useEffect)(n,i),l})(E);(0,c.N)(()=>{T?.current&&(T.current.scrollTop=T.current.scrollHeight)},[_]);let D=(0,y.useCallback)(async()=>{if(!I){k(!0),R&&(0,l.BI)("copilot_personal_instruction_template_usage",{content:R});try{let t=await (0,u.lS)("/copilot/personal_instructions",{method:"POST",body:{prompt:_}});if(t.ok)(0,l.BI)("dotcom_chat.activate",{target:"PERSONAL_INSTRUCTIONS_SAVE",mode:"immersive"}),i.dispatch({type:"SET_PERSONAL_INSTRUCTIONS",personalInstructions:_}),(0,x.flushSync)(()=>e());else{let e=await t.json();C(String(e.errorMessage))}}catch{C("An error occurred while saving your personal instructions.")}finally{k(!1)}}},[I,_,i,e,R]),P=(e,t)=>{t&&(j(_?`${_}
${t}`:t),L(e),T?.current?.focus())},O=()=>{D()},F=(0,y.useCallback)(()=>{(0,l.BI)("dotcom_chat.dismiss",{target:"PERSONAL_INSTRUCTIONS_DISMISS",mode:"immersive"}),(0,x.flushSync)(()=>e())},[e]);return(0,a.jsx)(m.ZL,{children:(0,a.jsx)(g.l,{onClose:F,title:"Personal instructions",subtitle:"Set up Copilot to align with your workflows and preferences. These instructions will only impact your personal conversation.",width:"large",returnFocusRef:t,renderBody:()=>(0,a.jsx)(g.l.Body,{children:(0,a.jsx)("form",{onSubmit:D,children:(0,a.jsxs)(p.A,{children:[(0,a.jsx)(p.A.Label,{visuallyHidden:!0,children:"Instructions"}),(0,a.jsx)("div",{className:"width-full position-relative",children:(0,a.jsxs)(d.tL,{commands:{"github:submit-form":O},children:[(0,a.jsx)(h.Ay,{ref:T,className:"width-full",style:{paddingBottom:`${A}px`},"aria-label":"Prompt",rows:7,name:"prompt",placeholder:"Your instructions",value:_,validationStatus:w||_.length>4e3?"error":void 0,...(0,o.G)("prompt-input"),onChange:e=>{j(e.target.value),C(void 0)}}),(0,a.jsx)(N,{ref:E,onSelect:P})]})}),(0,a.jsx)(S,{text:_,promptCharLimit:4e3}),w&&(0,a.jsx)(p.A.Validation,{variant:"error",children:(0,a.jsx)("span",{...(0,o.G)("error-message"),children:w})})]})})}),renderFooter:()=>(0,a.jsxs)("div",{className:"PersonalInstructionsDialog-module__footerContainer--T9wxr",children:[(0,a.jsx)(f.Q,{variant:"default",onClick:F,children:"Cancel"}),(0,a.jsx)(f.Q,{loading:I,loadingAnnouncement:"Saving personal instructions",variant:"primary",onClick:D,children:"Save"})]})})})};function S(e){let t,n,i,r,l=(0,s.c)(10),{text:d,promptCharLimit:c}=e;l[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.G)("current-character-count"),l[0]=t):t=l[0],l[1]!==d.length?(n=(0,a.jsx)("span",{className:"text-tabular-nums",...t,children:d.length}),l[1]=d.length,l[2]=n):n=l[2],l[3]!==c||l[4]!==n?(i=(0,a.jsxs)(a.Fragment,{children:[n," ","/ ",c," characters"]}),l[3]=c,l[4]=n,l[5]=i):i=l[5];let u=i;return l[6]!==u||l[7]!==c||l[8]!==d.length?(r=(0,a.jsx)(a.Fragment,{children:d.length>c?(0,a.jsx)(p.A.Validation,{variant:"error",children:u}):(0,a.jsx)(p.A.Caption,{children:u})}),l[6]=u,l[7]=c,l[8]=d.length,l[9]=r):r=l[9],r}try{C.displayName||(C.displayName="PersonalInstructionsDialog")}catch{}try{S.displayName||(S.displayName="CharacterCount")}catch{}},89155:(e,t,n)=>{n.d(t,{F:()=>l});var i=n(68273),a=n(21728),s=n(39029),r=n(34261);let l=(0,i.Z6)()?function(e){let t,n=(0,a.c)(1),{refetch:i}=(0,r.W)();n[0]===Symbol.for("react.memo_cache_sentinel")?(t={git_updated:!0,title_updated:!0},n[0]=t):t=n[0],(0,s.og)(e,i,t)}:function(e){let{refetch:t}=(0,r.W)();(0,s.og)(e,t,{git_updated:!0,title_updated:!0})}},89781:(e,t,n)=>{n.d(t,{A:()=>C});var i=n(74848),a=n(21728),s=n(69093),r=n(17925),l=n(53419),o=n(96459),d=n(26607);let c=e=>{let t,n,s,r,l,o,c,u,m=(0,a.c)(16);m[0]!==e?({children:s,icon:t,isNew:r,...n}=e,m[0]=e,m[1]=t,m[2]=n,m[3]=s,m[4]=r):(t=m[1],n=m[2],s=m[3],r=m[4]);let p=void 0!==r&&r;return m[5]!==t?(l=(0,i.jsx)(t,{}),m[5]=t,m[6]=l):l=m[6],m[7]!==s?(o=(0,i.jsx)("span",{className:"CommandPill-module__text--ggGhT",children:s}),m[7]=s,m[8]=o):o=m[8],m[9]!==p?(c=p&&(0,i.jsx)(d.A,{size:"small",variant:"accent",children:"New"}),m[9]=p,m[10]=c):c=m[10],m[11]!==n||m[12]!==l||m[13]!==o||m[14]!==c?(u=(0,i.jsxs)("button",{className:"CommandPill-module__button--dwT_a",...n,children:[l,o,c]}),m[11]=n,m[12]=l,m[13]=o,m[14]=c,m[15]=u):u=m[15],u};try{c.displayName||(c.displayName="CommandPill")}catch{}let u=JSON.parse('{"Create issues":{"id":"create-issues-group","name":"Create issue","color":"var(--display-gray-fgColor)","icon":"issue-draft","entries":[{"id":"create-issue","message":"First, create a new draft issue. Then ask for additional information to fill out the issue.","titleHtml":"Create a new issue"},{"id":"create-issue-with-subissues","message":"First, create an issue with sub issues. Then ask for additional information to fill out these issues.","titleHtml":"Create an issue with sub-issues"}]},"Write code":{"id":"write-code-group","name":"Write code","color":"var(--display-gray-fgColor)","icon":"file","entries":[{"id":"create-profile-readme","message":"First, create an outstanding README for my GitHub profile using only Markdown. Then ask for key details (such as profession, top skills, favorite projects, or social links) to further refine and personalize it.","titleHtml":"Create a profile README"},{"id":"generate-html-calculator","message":"Generate a simple calculator using HTML, CSS, and JavaScript.","titleHtml":"Generate a simple calculator"},{"id":"make-pong","message":"Create a simple Pong game using HTML, CSS, and JavaScript. The player should control the left paddle with their mouse and arrow keys up/down, the right paddle is the computer. Make sure the game includes a bouncing ball, a scoreboard and collision detection for paddles and walls.","titleHtml":"Make a Pong game"},{"id":"mermaid-architecture","message":"Create a Markdown file with a Mermaid diagram showing an architecture overview.","titleHtml":"Design a Mermaid architecture overview"}]},"Git":{"id":"git-group","name":"Git","color":"var(--display-gray-fgColor)","icon":"git-branch","entries":[{"id":"basic-git-commands","message":"Explain what basic Git commands are and how to use them. Include commands like `git status`, `git init`, `git clone`, `git add`, `git commit`, `git push`, and `git pull`. Provide examples for each command.","titleHtml":"Basic Git commands"},{"id":"git-branching","message":"Explain how to create and manage branches in Git. Include commands like `git branch`, `git checkout`, `git merge`, and `git rebase`. Provide examples for each command.","titleHtml":"Git branching"},{"id":"advanced-git-commands","message":"Explain advanced Git commands and their usage. Include commands like `git stash`, `git cherry-pick`, `git revert`, and `git reset`. Provide examples for each command.","titleHtml":"Advanced Git commands"}]},"Issues":{"id":"issues-group","name":"Issues","color":"var(--display-gray-fgColor)","icon":"issue-opened","entries":[{"id":"list-open-issues","message":"List the latest open issues assigned to me.","titleHtml":"Issues assigned to me"},{"id":"create-issue","message":"First, create a new draft issue. Then ask for additional information to fill out the issue.","titleHtml":"Create a new issue"},{"id":"summarize-issue","message":"Summarize the latest issue that I\'ve opened including all comments.","titleHtml":"Summarize my latest issue"}]},"Pull requests":{"id":"pull-requests-group","name":"Pull requests","color":"var(--display-gray-fgColor)","icon":"git-pull-request","entries":[{"id":"list-open-prs","message":"List my latest open pull requests.","titleHtml":"My open pull requests"},{"id":"summarize-pr","message":"Search for my latest merged PR and summarize it. What was the purpose and the key changes made?","titleHtml":"Summarize my latest PR"}]}}'),m=JSON.parse('{"Write code":{"id":"write-code-group","name":"Write code","color":"var(--display-gray-fgColor)","icon":"file","entries":[{"id":"create-profile-readme","message":"First, create an outstanding README for my GitHub profile using only Markdown. Then ask for key details (such as profession, top skills, favorite projects, or social links) to further refine and personalize it.","titleHtml":"Create a profile README"},{"id":"generate-html-calculator","message":"Generate a simple calculator using HTML, CSS, and JavaScript.","titleHtml":"Generate a simple calculator"},{"id":"make-pong","message":"Create a simple Pong game using HTML, CSS, and JavaScript. The player should control the left paddle with their mouse and arrow keys up/down, the right paddle is the computer. Make sure the game includes a bouncing ball, a scoreboard and collision detection for paddles and walls.","titleHtml":"Make a Pong game"},{"id":"mermaid-architecture","message":"Create a Markdown file with a Mermaid diagram showing an architecture overview.","titleHtml":"Design a Mermaid architecture overview"}]},"Git":{"id":"git-group","name":"Git","color":"var(--display-gray-fgColor)","icon":"git-branch","entries":[{"id":"basic-git-commands","message":"Explain what basic Git commands are and how to use them. Include commands like `git status`, `git init`, `git clone`, `git add`, `git commit`, `git push`, and `git pull`. Provide examples for each command.","titleHtml":"Basic Git commands"},{"id":"git-branching","message":"Explain how to create and manage branches in Git. Include commands like `git branch`, `git checkout`, `git merge`, and `git rebase`. Provide examples for each command.","titleHtml":"Git branching"},{"id":"advanced-git-commands","message":"Explain advanced Git commands and their usage. Include commands like `git stash`, `git cherry-pick`, `git revert`, and `git reset`. Provide examples for each command.","titleHtml":"Advanced Git commands"}]},"Issues":{"id":"issues-group","name":"Issues","color":"var(--display-gray-fgColor)","icon":"issue-opened","entries":[{"id":"list-open-issues","message":"List the latest open issues assigned to me.","titleHtml":"Issues assigned to me"},{"id":"create-issue","message":"First, create a new draft issue. Then ask for additional information to fill out the issue.","titleHtml":"Create a new issue"},{"id":"create-issue-with-subissues","message":"First, create an issue with sub issues. Then ask for additional information to fill out these issues.","titleHtml":"Create an issue with sub-issues"},{"id":"summarize-issue","message":"Summarize the latest issue that I\'ve opened including all comments.","titleHtml":"Summarize my latest issue"}]},"Pull requests":{"id":"pull-requests-group","name":"Pull requests","color":"var(--display-gray-fgColor)","icon":"git-pull-request","entries":[{"id":"list-open-prs","message":"List my latest open pull requests.","titleHtml":"My open pull requests"},{"id":"summarize-pr","message":"Search for my latest merged PR and summarize it. What was the purpose and the key changes made?","titleHtml":"Summarize my latest PR"}]}}');var p=n(73017),h=n(94236),f=n(5524),g=n(96540),y=n(82595),x=n(38621);let v=g.forwardRef((e,t)=>{let n,s,r,l,o=(0,a.c)(15),{testId:d,name:c,icon:u,color:m,onClick:p,dropdown:h,open:f}=e,g=`starter-${d}`;return o[0]!==m||o[1]!==u?(n=y.I&&(0,i.jsx)("div",{className:"StarterPill-module__icon--GKvj8",children:(0,i.jsx)(y.I,{icon:u,color:m})}),o[0]=m,o[1]=u,o[2]=n):n=o[2],o[3]!==h?(s=h&&(0,i.jsx)("div",{className:"StarterPill-module__dropdown--NngRn",children:(0,i.jsx)(x.TriangleDownIcon,{})}),o[3]=h,o[4]=s):s=o[4],o[5]!==c||o[6]!==s?(r=(0,i.jsxs)("div",{className:"StarterPill-module__title--Nsp36",children:[c,s]}),o[5]=c,o[6]=s,o[7]=r):r=o[7],o[8]!==p||o[9]!==f||o[10]!==t||o[11]!==g||o[12]!==n||o[13]!==r?(l=(0,i.jsxs)("button",{ref:t,className:"StarterPill-module__container--d2dFs",onClick:p,"aria-expanded":f,"data-testid":g,children:[n,r]}),o[8]=p,o[9]=f,o[10]=t,o[11]=g,o[12]=n,o[13]=r,o[14]=l):l=o[14],l});function b(e){let t,n,s,r,l,o,d=(0,a.c)(21),{group:c,onEntrySelect:u}=e,[m,y]=(0,g.useState)(!1),x=(0,g.useRef)(null);d[0]!==m?(t=()=>{y(!m)},d[0]=m,d[1]=t):t=d[1];let b=t;if(d[2]!==c.color||d[3]!==c.icon||d[4]!==c.id||d[5]!==c.name||d[6]!==b||d[7]!==m?(n=(0,i.jsx)(h.W.Anchor,{children:(0,i.jsx)(v,{ref:x,testId:c.id,name:c.name,icon:c.icon,color:c.color,onClick:b,dropdown:!0,open:m})}),d[2]=c.color,d[3]=c.icon,d[4]=c.id,d[5]=c.name,d[6]=b,d[7]=m,d[8]=n):n=d[8],d[9]===Symbol.for("react.memo_cache_sentinel")?(s={width:"260px"},d[9]=s):s=d[9],d[10]!==c.entries||d[11]!==u){let e;d[13]!==u?(e=e=>(0,i.jsx)(f.l.Item,{onSelect:()=>u(e),children:(0,i.jsx)(p.$6,{html:e.titleHtml})},e.id),d[13]=u,d[14]=e):e=d[14],r=c.entries.map(e),d[10]=c.entries,d[11]=u,d[12]=r}else r=d[12];return d[15]!==r?(l=(0,i.jsx)(h.W.Overlay,{style:s,children:(0,i.jsx)(f.l,{children:r})}),d[15]=r,d[16]=l):l=d[16],d[17]!==m||d[18]!==n||d[19]!==l?(o=(0,i.jsx)("li",{children:(0,i.jsxs)(h.W,{open:m,onOpenChange:y,children:[n,l]})}),d[17]=m,d[18]=n,d[19]=l,d[20]=o):o=d[20],o}v.displayName="StarterPill";try{b.displayName||(b.displayName="StarterGroupWithMenu")}catch{}let _=e=>{let t,n,r,l,o,d,p,h,f=(0,a.c)(29),{onSelect:g,onIceBreakerSelect:y,iceBreakersExperimentEnabled:x,paidUser:v}=e;f[0]===Symbol.for("react.memo_cache_sentinel")?(t={enabled:!0},f[0]=t):t=f[0];let{availableCommands:_}=(0,s.j)(t);if(f[1]!==_||f[2]!==x||f[3]!==y||f[4]!==g||f[5]!==v){d=Symbol.for("react.early_return_sentinel");e:{let e,t;f[11]!==v?(e=e=>"git-group"===e.id||"pull-requests-group"===e.id||!v&&"write-code-group"===e.id,f[11]=v,f[12]=e):e=f[12];let a=(function(e=!1){return Object.values(e?m:u)})(!0).filter(e);f[13]!==_||f[14]!==x||f[15]!==v?(t=x?_.filter(e=>"brainstorm"!==e.key&&(!!v||"spark"!==e.key)):_,f[13]=_,f[14]=x,f[15]=v,f[16]=t):t=f[16];let s=t;if(0===s.length){d=null;break e}if(o="CommandStarters-module__container--y1QAx",n="CommandStarters-module__list--sK_4w",f[17]!==s||f[18]!==g){let e;f[20]!==g?(e=e=>(0,i.jsx)("li",{children:(0,i.jsx)(c,{icon:e.icon,onClick:()=>g(e),isNew:e.isNew,children:e.name})},e.key),f[20]=g,f[21]=e):e=f[21],r=s.map(e),f[17]=s,f[18]=g,f[19]=r}else r=f[19];l=x&&a.map(e=>(0,i.jsx)(b,{group:e,onEntrySelect:y},e.id))}f[1]=_,f[2]=x,f[3]=y,f[4]=g,f[5]=v,f[6]=n,f[7]=r,f[8]=l,f[9]=o,f[10]=d}else n=f[6],r=f[7],l=f[8],o=f[9],d=f[10];return d!==Symbol.for("react.early_return_sentinel")?d:(f[22]!==n||f[23]!==r||f[24]!==l?(p=(0,i.jsxs)("ul",{className:n,children:[r,l]}),f[22]=n,f[23]=r,f[24]=l,f[25]=p):p=f[25],f[26]!==o||f[27]!==p?(h=(0,i.jsx)("div",{className:o,children:p}),f[26]=o,f[27]=p,f[28]=h):h=f[28],h)};try{_.displayName||(_.displayName="CommandStarters")}catch{}var j=n(69676),w=n(79080);let N=e=>{let t,n,s,r,l,o,d,c,u,m,p,h,y,x,v,b,_,N,C,S,I,k,T,E,R=(0,a.c)(67),{chatCommand:L,suggestions:A,onSelect:D,anchorRef:P,textAreaRef:O}=e,[F,B]=(0,g.useState)(0),[M,V]=(0,g.useState)(0),[$,U]=(0,g.useState)(!1),[q,W]=(0,g.useState)(void 0),[H,G]=(0,g.useState)(-1),[z,K]=(0,g.useState)(""),Q=(0,g.useRef)(null),Z=(0,g.useRef)(null);if(R[0]!==L||R[1]!==A||R[2]!==z){let e;R[4]!==L||R[5]!==z?(e=e=>{let t=`/${L} ${e}`.toLowerCase(),n=z.toLowerCase().trim();return t.includes(n)&&t!==n},R[4]=L,R[5]=z,R[6]=e):e=R[6],t=A.filter(e),R[0]=L,R[1]=A,R[2]=z,R[3]=t}else t=R[3];let J=t,Y=$&&J.length>0;R[7]!==P?(n=()=>{if(Z.current&&P.current){let{top:e,left:t}=(0,j.uG)(Z.current,P.current,{align:"start",side:"outside-bottom",anchorOffset:4});B(e),V(t)}},R[7]=P,R[8]=n):n=R[8];let X=n;R[9]!==O?(s=()=>{O.current===document.activeElement&&U(!0)},r=[O],R[9]=O,R[10]=s,R[11]=r):(s=R[10],r=R[11]),(0,g.useEffect)(s,r),R[12]!==O?(l=()=>{let e=O.current;if(!e)return;let t=()=>{K(e.value)};return K(e.value),e.addEventListener("input",t),()=>{e.removeEventListener("input",t)}},o=[O],R[12]=O,R[13]=l,R[14]=o):(l=R[13],o=R[14]),(0,g.useEffect)(l,o),R[15]!==P||R[16]!==Y||R[17]!==X?(d=()=>{let e=P.current;if(!Y||!e)return;let t=()=>{P.current&&(W(P.current.getBoundingClientRect().width),X())};return t(),Q.current||(Q.current=new ResizeObserver(t)),Q.current.observe(e),()=>{Q.current&&Q.current.unobserve(e)}},c=[Y,P,X],R[15]=P,R[16]=Y,R[17]=X,R[18]=d,R[19]=c):(d=R[18],c=R[19]),(0,g.useEffect)(d,c),R[20]!==O?(u=e=>!!e&&((O.current?.contains(e)??!1)||(Z.current?.contains(e)??!1)),R[20]=O,R[21]=u):u=R[21];let ee=u;R[22]!==ee||R[23]!==O?(m=()=>{let e=O.current;if(!e)return;let t=e=>{ee(e.relatedTarget)||U(!1)};return e.addEventListener("blur",t),()=>{e.removeEventListener("blur",t)}},p=[O,ee],R[22]=ee,R[23]=O,R[24]=m,R[25]=p):(m=R[24],p=R[25]),(0,g.useEffect)(m,p),R[26]!==L||R[27]!==O?(h=()=>{let e=O.current;if(!e)return;let t=()=>{L&&U(!0)};return e.addEventListener("focus",t),()=>{e.removeEventListener("focus",t)}},y=[O,L],R[26]=L,R[27]=O,R[28]=h,R[29]=y):(h=R[28],y=R[29]),(0,g.useEffect)(h,y),R[30]===Symbol.for("react.memo_cache_sentinel")?(x=()=>{U(!1),G(-1)},R[30]=x):x=R[30];let et=x;R[31]!==Y||R[32]!==O?(v=()=>{let e=O.current;if(!e||!Y)return;let t=e=>{(1!==e.key.length||e.ctrlKey||e.metaKey||e.altKey||e.isComposing)&&"Backspace"!==e.key&&"Delete"!==e.key||G(-1)};return e.addEventListener("keydown",t),()=>{e.removeEventListener("keydown",t)}},b=[O,Y],R[31]=Y,R[32]=O,R[33]=v,R[34]=b):(v=R[33],b=R[34]),(0,g.useEffect)(v,b),R[35]!==L||R[36]!==Y||R[37]!==D||R[38]!==O||R[39]!==J?(_=()=>{let e=O.current;if(!e||!Y)return;let t=e=>{if("ArrowDown"===e.key||"ArrowUp"===e.key){e.preventDefault();let t="ArrowDown"===e.key?"down":"up";G(e=>{let n,i;return n="down"===t?-1===e?0:Math.min(e+1,J.length-1):-1===e?J.length-1:Math.max(e-1,0),(i=J[n])&&D(L,i),n})}};return e.addEventListener("keydown",t),()=>{e.removeEventListener("keydown",t)}},N=[O,Y,J,L,D],R[35]=L,R[36]=Y,R[37]=D,R[38]=O,R[39]=J,R[40]=_,R[41]=N):(_=R[40],N=R[41]),(0,g.useEffect)(_,N),R[42]!==ee?(C=e=>{e.target instanceof Node&&ee(e.target)||et()},R[42]=ee,R[43]=C):C=R[43];let en=C;R[44]!==L||R[45]!==D?(S=e=>{D(L,e),G(-1)},R[44]=L,R[45]=D,R[46]=S):S=R[46];let ei=S;if(!Y)return null;if(R[47]!==q?(I=q?{width:`${q}px`}:void 0,R[47]=q,R[48]=I):I=R[48],R[49]!==L||R[50]!==ei||R[51]!==H||R[52]!==J){let e;R[54]!==L||R[55]!==ei||R[56]!==H?(e=(e,t)=>(0,i.jsxs)(f.l.Item,{size:"large",onSelect:()=>ei(e),active:t===H,children:[(0,i.jsx)(f.l.LeadingVisual,{children:(0,i.jsxs)("span",{className:"fgColor-muted",children:["/",L]})}),e]},e),R[54]=L,R[55]=ei,R[56]=H,R[57]=e):e=R[57],k=J.map(e),R[49]=L,R[50]=ei,R[51]=H,R[52]=J,R[53]=k}else k=R[53];return R[58]!==k?(T=(0,i.jsx)(f.l,{children:k}),R[58]=k,R[59]=T):T=R[59],R[60]!==P||R[61]!==M||R[62]!==en||R[63]!==I||R[64]!==T||R[65]!==F?(E=(0,i.jsx)(w.Ay,{top:F,left:M,onClickOutside:en,onEscape:et,returnFocusRef:P,"aria-label":"Command suggestions",style:I,"data-testid":"command-suggestions-overlay",ref:Z,preventFocusOnOpen:!0,children:T}),R[60]=P,R[61]=M,R[62]=en,R[63]=I,R[64]=T,R[65]=F,R[66]=E):E=R[66],E};try{N.displayName||(N.displayName="CommandSuggestions")}catch{}function C(e){let t,n,d,c,u,m,p,h,f,g=(0,a.c)(33),{chatCommand:y,chatInputRef:x,containerRef:v,textAreaRef:b,iceBreakersExperimentEnabled:j,paidUser:w}=e;g[0]===Symbol.for("react.memo_cache_sentinel")?(t={enabled:!0},g[0]=t):t=g[0];let{availableCommands:C,availableCommandKeys:S}=(0,s.j)(t),I=(0,o.Z)();g[1]!==S||g[2]!==x||g[3]!==I||g[4]!==b?(n=e=>{((0,l.BI)("dotcom_chat.activate",{target:"COMMAND_STARTER_SELECTED",mode:"immersive",command:e.key}),e.enabled?.()===!1&&e.disabledAction)?e.disabledAction(I):(x.current?.setText(t=>{let n=(0,r.V)(t,S);return n?t.replace(`/${n}`,`/${e.key}`):`/${e.key} ${t}`}),b.current?.focus())},g[1]=S,g[2]=x,g[3]=I,g[4]=b,g[5]=n):n=g[5];let k=n;g[6]!==x||g[7]!==j||g[8]!==b?(d=(e,t)=>{(0,l.BI)("dotcom_chat.activate",{target:"COMMAND_SUGGESTION_SELECTED",mode:"immersive",command:e,suggestion:t,iceBreakerFFEnabled:j}),x.current?.setText(`/${e} ${t}`.trim()),b.current?.focus()},g[6]=x,g[7]=j,g[8]=b,g[9]=d):d=g[9];let T=d;g[10]!==x||g[11]!==j||g[12]!==b?(c=e=>{(0,l.BI)("dotcom_chat.activate",{target:"COMMAND_SUGGESTION_SELECTED",mode:"immersive",command:e.id,suggestion:e.message,iceBreakerFFEnabled:j}),x.current?.setText(`${e.message}`.trim()),b.current?.focus()},g[10]=x,g[11]=j,g[12]=b,g[13]=c):c=g[13];let E=c;g[14]!==C||g[15]!==y?(u=y?C.find(e=>e.key===y)?.suggestions:null,g[14]=C,g[15]=y,g[16]=u):u=g[16];let R=u,L=R&&R.length>0;return g[17]!==y||g[18]!==v||g[19]!==T||g[20]!==L||g[21]!==R||g[22]!==b?(m=y&&L&&(0,i.jsx)(N,{chatCommand:y,suggestions:R,onSelect:T,anchorRef:v,textAreaRef:b},y),g[17]=y,g[18]=v,g[19]=T,g[20]=L,g[21]=R,g[22]=b,g[23]=m):m=g[23],g[24]===Symbol.for("react.memo_cache_sentinel")?(p=(0,i.jsx)("h2",{className:"sr-only",children:"Chat Commands"}),g[24]=p):p=g[24],g[25]!==k||g[26]!==E||g[27]!==j||g[28]!==w?(h=(0,i.jsxs)(i.Fragment,{children:[p,(0,i.jsx)(_,{onSelect:k,onIceBreakerSelect:E,iceBreakersExperimentEnabled:j,paidUser:w})]}),g[25]=k,g[26]=E,g[27]=j,g[28]=w,g[29]=h):h=g[29],g[30]!==m||g[31]!==h?(f=(0,i.jsxs)(i.Fragment,{children:[m,h]}),g[30]=m,g[31]=h,g[32]=f):f=g[32],f}try{C.displayName||(C.displayName="CommandStartersAndSuggestions")}catch{}},90122:(e,t,n)=>{n.d(t,{DO:()=>r,Vq:()=>s,ZP:()=>i});let i=()=>/{{([\w-]+)(?:\.([.\w-]+))?(?:\|([\w-]+))?}}/g,a=`Respond with only the content \u{2014} no introductions, explanations, or extra text.
Only use code blocks when they add semantic value (e.g., mermaid diagrams, specific programming languages), not for general markdown formatting, unless the user explicitly asks for it.`;async function s(e){return[{role:"system",content:a},{role:"user",content:e.content}]}function r(e){return null==e?"":"string"==typeof e?e:e&&"object"==typeof e?JSON.stringify(e,null,2):Array.isArray(e)?e.map(r).join(`
`):String(e)}},90177:(e,t,n)=>{n.d(t,{c:()=>u});var i=n(74848),a=n(21728),s=n(38621),r=n(21373),l=n(94236),o=n(5524),d=n(73783),c=n(26108);let u=(0,n(96540).forwardRef)(function(e,t){let n,u,m,p,h=(0,a.c)(40),{value:f,isLoading:g,onClick:y,onStop:x,variant:v,disabled:b,iconOnly:_,showPickInputsOption:j,onRunWithInputs:w,leadingVisual:N}=e,C=void 0===v?"invisible":v;h[0]!==g||h[1]!==f?(n=()=>g?"Loading...":f?"Run node":"Run loop",h[0]=g,h[1]=f,h[2]=n):n=h[2];let S=n;h[3]!==g||h[4]!==y||h[5]!==x?(u=e=>{g?x?.(e):y(e)},h[3]=g,h[4]=y,h[5]=x,h[6]=u):u=h[6];let I=u;h[7]!==w?(m=()=>{w?.()},h[7]=w,h[8]=m):m=h[8];let k=m;if(void 0!==j&&j&&!g&&!_){let e,n,a,c,u;return h[9]!==b||h[10]!==I||h[11]!==N||h[12]!==t||h[13]!==C?(e=(0,i.jsx)(r.Q,{ref:t,disabled:b,variant:C,onClick:I,leadingVisual:N,children:"Run"}),h[9]=b,h[10]=I,h[11]=N,h[12]=t,h[13]=C,h[14]=e):e=h[14],h[15]!==b||h[16]!==C?(n=(0,i.jsx)(l.W.Button,{disabled:b,variant:C,icon:s.TriangleDownIcon,"aria-label":"More run options",className:"ExecuteButton-module__executeButtonSplitDropdown--WsP8k"}),h[15]=b,h[16]=C,h[17]=n):n=h[17],h[18]!==k?(a=(0,i.jsx)(l.W.Overlay,{children:(0,i.jsx)(o.l,{children:(0,i.jsx)(o.l.Item,{onSelect:k,children:"Run with custom inputs"})})}),h[18]=k,h[19]=a):a=h[19],h[20]!==n||h[21]!==a?(c=(0,i.jsxs)(l.W,{children:[n,a]}),h[20]=n,h[21]=a,h[22]=c):c=h[22],h[23]!==e||h[24]!==c?(u=(0,i.jsxs)(d.A,{children:[e,c]}),h[23]=e,h[24]=c,h[25]=u):u=h[25],u}if(!_){let e,n=g?"danger":C,a=g?"Stop":"Run";return h[26]!==b||h[27]!==I||h[28]!==N||h[29]!==t||h[30]!==n||h[31]!==a?(e=(0,i.jsx)(r.Q,{ref:t,disabled:b,variant:n,onClick:I,leadingVisual:N,children:a}),h[26]=b,h[27]=I,h[28]=N,h[29]=t,h[30]=n,h[31]=a,h[32]=e):e=h[32],e}let T=S(),E=g?s.SquareFillIcon:s.SyncIcon,R=g?"danger":C;return h[33]!==b||h[34]!==I||h[35]!==t||h[36]!==T||h[37]!==E||h[38]!==R?(p=(0,i.jsx)(c.K,{ref:t,disabled:b,"aria-label":T,icon:E,onClick:I,variant:R}),h[33]=b,h[34]=I,h[35]=t,h[36]=T,h[37]=E,h[38]=R,h[39]=p):p=h[39],p});try{u.displayName||(u.displayName="ExecuteButton")}catch{}},90756:(e,t,n)=>{n.d(t,{R:()=>a,j:()=>LoopError});var i=n(50467);let LoopError=class LoopError extends Error{constructor(e,t){super(e),(0,i._)(this,"httpStatus",void 0),this.httpStatus=t,this.name="LoopError"}};function a(e){return e instanceof LoopError}},91348:(e,t,n)=>{n.d(t,{FT:()=>f,Gx:()=>m,Hx:()=>y,NZ:()=>g,f0:()=>o,kX:()=>p,nT:()=>c});var i=n(31629),a=n(21046),s=n(90122),r=n(39087),l=n(45363);function o(e){let t={nodes:new Map,edges:[],layers:[]};if(!e)return t;for(let n of e){if(!n?.id)continue;let e=u(n.id);t.nodes.set(e,n)}for(let n of e)for(let e of d(n)){let i=u(e);n?.id&&i&&t.edges.push({from:i,to:n.id})}let n=function(e){let t={},n=new Set,i=(s,r=0)=>{try{if(n.has(s))throw Error(`Potential cycle detected at node ${s}`);if(n.add(s),r>100)return(0,a.FF)(`Maximum recursion depth reached for node ${s}`),0;if(void 0!==t[s])return t[s];let l=e.nodes.get(s);if(!l)return t[s]=0,0;let o=d(l);if(o&&0!==o.size){let e=[...o].map(e=>{let t=u(e);return i(t,r+1)});t[s]=Math.max(...e)+1}else{let n=e.edges.filter(e=>e.from===s).map(e=>e.to);0===n.length?t[s]=-1:t[s]=1}return t[s]}finally{n.delete(s)}};for(let[n]of e.nodes)if(!t[n])try{i(n)}catch(e){(0,a.vV)(`Error computing layer for node ${n}:`,e),t[n]=0}let s=Math.max(...Object.values(t))+1;for(let e of Object.keys(t))-1===t[e]&&(t[e]=s);let r=[];for(let[n,i]of Object.entries(t)){let t=e.nodes.get(n);t&&(r[i]||(r[i]=[]),r[i].push(t))}return r.filter(Boolean)}(t);return t.layers=n,t}function d(e){let t=(0,s.ZP)();return new Set((e.content.match(t)||[]).map(e=>e.replace(/[{}]/g,"")))}function c(e){return new Set([...d(e)].map(u))}function u(e){return e.match(/^[^|.]+/)?.[0]??e}let m=(e,t)=>{if(!e||"object"!=typeof e||!e.title&&!e.description&&!e.content)return null;let n={...e,title:e.title||"",description:e.description||"",type:l.C.getMetadata(e.type)?e.type:"text",content:e.content||"",id:(e.id||"").trim()};if("text"===n.type&&(n.metadata=function(e){if((0,i.ir)(e))return r.j[e.metadata.inputType]?e.metadata:{inputType:"text"}}(e)||{inputType:"text"}),"string"!=typeof n.content&&(n.content=""),(0,i.jq)(n)){let e=t.find(e=>e.id===n.loopId);if(e){let t=n.loopInputValues?.reduce((e,t)=>(e[t.inputId]=t,e),{})||{};n.loopInputValues=e.nodes?.filter(e=>(0,i.ir)(e)).map(e=>{let n=t[e.id];if(!n)throw Error(`Input not found for node ${e.id}`);return{inputId:e.id,nodeId:n.nodeId,doMapInput:!!n.doMapInput}})}}return n},p=(e,t)=>{var n;let i={...n=e,nodes:n.nodes.map(h)};return{...i,nodes:(i.nodes||[]).map(e=>m(e,t)).filter(e=>null!==e)}};function h(e){return"prompt"===e.type&&"model"in e&&"string"==typeof e.model?{...e,metadata:{model:e.model}}:"text"===e.type&&"inputType"in e?{...e,metadata:function(e){if("type"in e&&"string"==typeof e.type){let t="file"===e.type?"text":e.type;return{...e,inputType:t}}return e}(e.inputType)}:e}function f(e){let t=o(e.nodes);return e.nodes.filter(e=>x(e,t))}function g(e){let t={nodes:new Map,edges:[...e.edges],layers:[...e.layers]};for(let[n,i]of e.nodes)t.nodes.set(n,i);let n=[...e.nodes].filter(([,t])=>x(t,e));if(n.length>0){let e="virtual-output";for(let[,i]of(t.nodes.set(e,{type:"output",id:e}),n))t.edges.push({from:i.id,to:e})}return t}function y(e){return"virtual-output"===e}function x(e,t){return!t.edges.some(t=>t.from===e.id)&&t.edges.some(t=>t.to===e.id)}},93161:(e,t,n)=>{n.d(t,{D:()=>i});let i={value:null,startedAt:void 0,completedAt:void 0}},93364:(e,t,n)=>{function i(e){return{success:!0,data:e}}function a(e,t){var n;return{success:!1,error:(n=e)?"string"==typeof n?n:"object"!=typeof n?(void 0)??s:"message"in n&&"string"==typeof n.message?n.message:"error"in n&&"string"==typeof n.error?n.error:(void 0)??s:(void 0)??s,httpStatus:t?.status}}n.d(t,{$j:()=>i,YD:()=>a});let s="Unknown error"},93380:(e,t,n)=>{n.d(t,{B:()=>s});var i=n(21728),a=n(96540);function s(e){let t,n,s,r=(0,i.c)(4),[l,o]=(0,a.useState)(e);r[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>o(!0),r[0]=t):t=r[0];let d=t;r[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>o(!1),r[1]=n):n=r[1];let c=n;return r[2]!==l?(s=[l,d,c],r[2]=l,r[3]=s):s=r[3],s}},95807:(e,t,n)=>{n.d(t,{i:()=>v});var i=n(74848),a=n(68273),s=n(21728),r=n(96379),l=n(21373),o=n(69726),d=n(11196),c=n(96540),u=n(30459),m=n(57224),p=n(70263);let h="PullRequestsProcessingIndicator-module__button--IKkby",f="PullRequestsProcessingIndicator-module__indicator--iNiwb",g="PullRequestsProcessingIndicator-module__text--JUMXg";function y(e,t){return Math.round(e.getTime()-t.getTime())/1e3}let x={stale:!1,latest_unsynced_push_to_head_ref_at:null};function v({processingIndicatorUrl:e,repositoryId:t,pullRequestId:n}){let[a,s]=(0,c.useState)(x),l=(0,p.A)(),o=(0,c.useCallback)(async()=>{try{let t=await (0,r.lS)(e);if(t.ok){let e=await t.json();l()&&s(e)}}catch{l()&&s(x)}},[l,e]);(0,c.useEffect)(()=>{o()},[]);let{stale:d,latest_unsynced_push_to_head_ref_at:u}=a;return(0,i.jsx)("div",{className:"border-left pl-1",children:(0,i.jsx)(m.y,{appName:"pull-requests-processing-indicator",category:"render",metadata:{},children:(0,i.jsx)(b,{pullRequestId:n,repositoryId:t,stale:d,latest_unsynced_push_to_head_ref_at:u})})})}let b=(0,a.Z6)()?function(e){let t,n,a=(0,s.c)(6),{pullRequestId:r,repositoryId:c,stale:m,latest_unsynced_push_to_head_ref_at:p}=e,{sendAnalyticsEvent:x}=(0,u.s)();if(!m||!p)return null;if(a[0]!==p||a[1]!==r||a[2]!==c||a[3]!==x){t=Symbol.for("react.early_return_sentinel");e:{let e=y(new Date,new Date(p));if(e<20||e>=86400){t=null;break e}x("pull_requests.processing_indicator","",{repositoryId:c,pullRequestId:r,secondsSinceLastPush:e})}a[0]=p,a[1]=r,a[2]=c,a[3]=x,a[4]=t}else t=a[4];return t!==Symbol.for("react.early_return_sentinel")?t:(a[5]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(d.m,{text:"Recent push is being processed and will appear soon",direction:"s",children:(0,i.jsx)(l.Q,{as:"a",href:"https://gh.io/pr-sync-in-progress",variant:"invisible",className:h,children:(0,i.jsxs)("div",{className:f,children:[(0,i.jsx)(o.A,{size:"small"}),(0,i.jsx)("span",{className:g,children:"Processing updates"})]})})}),a[5]=n):n=a[5],n)}:function({pullRequestId:e,repositoryId:t,stale:n,latest_unsynced_push_to_head_ref_at:a}){let{sendAnalyticsEvent:s}=(0,u.s)();if(!n||!a)return null;let r=y(new Date,new Date(a));return r<20||r>=86400?null:(s("pull_requests.processing_indicator","",{repositoryId:t,pullRequestId:e,secondsSinceLastPush:r}),(0,i.jsx)(d.m,{text:"Recent push is being processed and will appear soon",direction:"s",children:(0,i.jsx)(l.Q,{as:"a",href:"https://gh.io/pr-sync-in-progress",variant:"invisible",className:h,children:(0,i.jsxs)("div",{className:f,children:[(0,i.jsx)(o.A,{size:"small"}),(0,i.jsx)("span",{className:g,children:"Processing updates"})]})})}))};try{v.displayName||(v.displayName="PullRequestsProcessingIndicatorWithDataFetching")}catch{}try{b.displayName||(b.displayName="PullRequestsProcessingIndicator")}catch{}},96002:(e,t,n)=>{n.d(t,{u:()=>c});var i=n(74848),a=n(21728),s=n(53419),r=n(74753),l=n(73077),o=n(11680),d=n(79184);function c(){let e,t,n,s,c=(0,a.c)(6),{resetDate:m}=(0,d.xR)();c[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(r.s,{children:(0,i.jsx)("h2",{children:"Limit reached"})}),c[0]=e):e=c[0],c[1]!==m?(t=(0,i.jsxs)(i.Fragment,{children:[e,"You have reached your free plan limit. Limit resets on ",m,"."]}),c[1]=m,c[2]=t):t=c[2];let p=t;c[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(l.z,{as:"a",href:"https://github.com/features/copilot#pricing",onClick:u,children:"Upgrade"}),c[3]=n):n=c[3];let h=n;return c[4]!==p?(s=(0,i.jsx)("div",{className:"FreeChatExceededBanner-module__container--yeDGw",children:(0,i.jsx)(o.l,{variant:"upsell",title:"Limit reached",description:p,hideTitle:!0,primaryAction:h})}),c[4]=p,c[5]=s):s=c[5],s}function u(){(0,s.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}try{c.displayName||(c.displayName="FreeChatExceededBanner")}catch{}},96868:(e,t,n)=>{n.d(t,{Fj:()=>s,Kh:()=>a,qB:()=>r});var i=n(33026);let a={CANVAS:"canvas",OUTPUT:"output"},s={CHAT:"chat",NODE:"node",ABOUT:"about"},r={focusedNodeId:null,hoveredNodeId:null,view:a.CANVAS,sidePanelView:s.CHAT,version:i.U8,showLinkCopiedBanner:!1,showDuplicatedBanner:!1}},99279:(e,t,n)=>{n.d(t,{G:()=>i});let i=n(12435).$h.create("pull-requests")},99519:(e,t,n)=>{n.d(t,{EY:()=>r,qT:()=>s});var i=n(96540);let a=(0,i.createContext)(null),s=a.Provider;function r(){let e=(0,i.useContext)(a);if(!e)throw Error("useLoopsService must be used inside a LoopsServiceProvider");return e}try{a.displayName||(a.displayName="LoopsServiceContext")}catch{}},99993:(e,t,n)=>{n.d(t,{M1:()=>m,_N:()=>h,c_:()=>p});var i=n(21728),a=n(97665),s=n(97286),r=n(61526),l=n(99519),o=n(78456),d=n(33026),c=n(50050),u=n(90756);let m="loop";function p(e,t){return[m,e,t]}function h(e,t){let n,h,y,x,v=(0,i.c)(15),{loopID:b}=(0,r.g)(),_=(0,l.EY)(),j=(0,a.jE)(),w=(0,c.Ud)(g),N=t||w||d.kj;v[0]!==b||v[1]!==N?(n=[m,b,N],v[0]=b,v[1]=N,v[2]=n):n=v[2];let C=n;v[3]!==b||v[4]!==j||v[5]!==_||v[6]!==N?(h=async()=>{if(!b)return null;let e=o.Io.find(e=>e.id===b)??null;if(e)return e;let t=await _.getLoop(b,N);if(!t||!t.success)throw new u.j(t?.error||"Failed to load loop",t?.httpStatus);return t.data.version&&t.data.version!==N&&j.setQueryData(p(t.data.id,t.data.version),t.data),t.data},v[3]=b,v[4]=j,v[5]=_,v[6]=N,v[7]=h):h=v[7];let S=!!b;return v[8]!==e?(y=e&&{select:e},v[8]=e,v[9]=y):y=v[9],v[10]!==C||v[11]!==h||v[12]!==S||v[13]!==y?(x={placeholderData:f,queryKey:C,queryFn:h,enabled:S,...y,staleTime:3e5},v[10]=C,v[11]=h,v[12]=S,v[13]=y,v[14]=x):x=v[14],(0,s.I)(x)}function f(e){return e}function g(e){return e?.version}}}]);
//# sourceMappingURL=19532-3c723b37d77b.js.map