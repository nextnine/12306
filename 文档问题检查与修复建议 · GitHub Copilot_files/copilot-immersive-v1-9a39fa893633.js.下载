"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([[14439,19973,36820,69677,94595],{22580:(e,t,a)=>{var s,r=a(27744),n=a(70103),i=a(1723),l=a(74848),o=a(21728);function c(e){let t,a=(0,o.c)(2);return a[0]!==e.children?(t=(0,l.jsx)(l.Fragment,{children:e.children}),a[0]=e.children,a[1]=t):t=a[1],t}try{c.displayName||(c.displayName="App")}catch{}var d=a(96540),u=a(2635),m=a(60460),h=a(79634),p=a(30721),x=a(48217),f=a(92130),g=a(53419),_=a(11680),y=a(73077);function b(){let e,t,a=(0,o.c)(2);return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)("div",{className:"ImmersiveDisabled-module__content--ZhI_r",children:(0,l.jsx)(f.A,{})}),a[0]=e):e=a[0],a[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,l.jsxs)("div",{className:"ImmersiveDisabled-module__container--MY4uP",children:[e,(0,l.jsx)("div",{className:"ImmersiveDisabled-module__footer--PVto2",children:(0,l.jsx)("div",{className:"ImmersiveDisabled-module__bannerContainer--QHoXa",children:(0,l.jsx)(_.l,{variant:"upsell",title:"Copilot is disabled",hideTitle:!0,description:"Copilot on GitHub is currently disabled by your organization.",primaryAction:(0,l.jsx)(y.z,{as:"a",href:"https://github.com/settings/copilot",onClick:j,children:"Settings"})})})})]}),a[1]=t):t=a[1],t}function j(){return(0,g.BI)("dotcom_chat.activate",{target:"NO_ACCESS_SETTING_DISABLED",mode:"immersive"})}try{b.displayName||(b.displayName="ImmersiveDisabled")}catch{}var S=a(81453),v=a(27359),C=a(38627),w=a(35247),N=a(23657),I=a(84646),T=a(42312),E=a(27912),A=a(61526),O=a(25641),R=a(62828),L=a(21502),k=a(38598),D=a(79196),P=a(1747),B=a(51438),F=a(18878),U=a(14521),M=a(72303),$=a(76143),W=a(79684),z=a(38621),V=a(94236),H=a(5524),G=a(26607),q=a(21373),K=a(26108),Q=a(40961),X=a(93380),J=a(23827),Z=a(90918),Y=a(62421),ee=a(49851);function et(){let e,t,a=(0,o.c)(4),s=(0,Y.G)();a[0]!==s?(e=async()=>{await s({clearTopic:!0,includeThreads:!1})},a[0]=s,a[1]=e):e=a[1];let r=e;return a[2]!==r?(t=(0,l.jsx)("div",{className:"NewChatButton-module__newChatButtonContainer--JlmNy",children:(0,l.jsx)(K.K,{icon:ee.KJ,onClick:r,"aria-label":"New chat"})}),a[2]=r,a[3]=t):t=a[3],t}try{et.displayName||(et.displayName="NewChatButton")}catch{}var ea=a(61767);let es=()=>{let e=(0,U.G)(),{data:t}=(0,I.Ao)(e),a=(0,N.mM)(),s=(0,N.FQ)(),r=a||t,n=!s&&t;return{updateGlobalNavigationBreadcrumbs:()=>{let e=[{label:"Copilot",href:"/copilot"}];r&&e.push({label:"Spaces",href:O.VR}),n&&t&&e.push({label:t.name,href:(0,N.Cb)(t)}),(0,ea.FC)(e)}}};var er=a(28259),en=a(37204),ei=a(37294),el=a(79064),eo=a(79575),ec=a(82518),ed=a(15220),eu=a(11196);function em(){let e,t,a,s,r,n,i,c,h,p,x,f,g,_,y,b,j,S,v=(0,o.c)(38),C=(0,m.y)(),{traceInfo:N}=(0,ei.Kf)(),I=(j=(0,o.c)(2),S=(0,u.bP)("selectedThreadID","threads"),j[0]!==S?(b=(0,M.W)(S),j[0]=S,j[1]=b):b=j[1],b),T=(0,J.H)(),[E,A]=(0,d.useState)(!1),[O,R]=(0,d.useState)(!1),[L,k]=(0,d.useState)(!1),D=(0,d.useRef)(null),P=(0,d.useRef)(null),[B,F]=(0,el.iI)("getTracingRequestedFlag","setTracingRequestedFlag");N?.traces,I?.id;let U=N?.traces,$=I?.id;v[0]!==T||v[1]!==U||v[2]!==$?(e=(0,eo.$1)(U,$,T),v[0]=T,v[1]=U,v[2]=$,v[3]=e):e=v[3];let W=e,G=!!N?.visible;if(!(0,ec.Xl)()||!w.W.staffToolsMenu)return null;v[4]!==G||v[5]!==C?(t=()=>{C.showTraceDisplay(!G)},v[4]=G,v[5]=C,v[6]=t):t=v[6];let q=t;v[7]!==F||v[8]!==B?(a=()=>{B?F(!1):A(!0)},v[7]=F,v[8]=B,v[9]=a):a=v[9];let K=a;v[10]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{R(!0)},v[10]=s):s=v[10];let Q=s;v[11]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{k(!0)},v[11]=r):r=v[11];let X=r,Z=B?"danger":void 0;return v[12]!==Z?(n=(0,l.jsx)(eu.m,{text:"Tracing",children:(0,l.jsx)(V.W.Button,{"aria-label":"Staff Tools",icon:z.ToolsIcon,variant:Z})}),v[12]=Z,v[13]=n):n=v[13],v[14]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.jsxs)(H.l.Item,{onSelect:Q,children:[(0,l.jsx)(H.l.LeadingVisual,{children:(0,l.jsx)(z.NoteIcon,{})}),"Adjust prompts"]}),v[14]=i):i=v[14],v[15]===Symbol.for("react.memo_cache_sentinel")?(c=(0,l.jsxs)(H.l.Item,{onSelect:X,children:[(0,l.jsx)(H.l.LeadingVisual,{children:(0,l.jsx)(z.BeakerIcon,{})}),"Configure experiments"]}),v[15]=c):c=v[15],v[16]!==K||v[17]!==q||v[18]!==W||v[19]!==B?(h=w.W.requestTracing&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(H.l.Item,{onSelect:K,variant:B?"danger":void 0,children:[(0,l.jsx)(H.l.LeadingVisual,{children:B?(0,l.jsx)(z.SquareCircleIcon,{}):(0,l.jsx)(z.ToolsIcon,{})}),B?"Stop tracing":"Start tracing"]}),(0,l.jsxs)(H.l.Item,{onSelect:q,disabled:!W,children:[(0,l.jsx)(H.l.LeadingVisual,{children:(0,l.jsx)(z.LogIcon,{})}),"View trace"]})]}),v[16]=K,v[17]=q,v[18]=W,v[19]=B,v[20]=h):h=v[20],v[21]!==h?(p=(0,l.jsx)(V.W.Overlay,{children:(0,l.jsxs)(H.l,{children:[i,c,h]})}),v[21]=h,v[22]=p):p=v[22],v[23]!==p||v[24]!==n?(x=(0,l.jsxs)(V.W,{children:[n,p]}),v[23]=p,v[24]=n,v[25]=x):x=v[25],v[26]!==F||v[27]!==E?(f=E&&(0,l.jsx)(ed.l,{footerButtons:[{buttonType:"default",content:"Cancel",onClick:()=>A(!1)},{buttonType:"primary",content:"Enable tracing",onClick:()=>{F(!0),A(!1)}}],onClose:()=>A(!1),title:"Enable tracing",children:"Enabling tracing will capture additional diagnostic information to secure storage. This will include the entire contents of the conversation and references used in it."}),v[26]=F,v[27]=E,v[28]=f):f=v[28],v[29]!==O?(g=O&&(0,l.jsx)(en.X,{promptDialogRef:D,onDismiss:()=>R(!1)}),v[29]=O,v[30]=g):g=v[30],v[31]!==L?(_=L&&(0,l.jsx)(er.J,{experimentsDialogRef:P,onDismiss:()=>k(!1)}),v[31]=L,v[32]=_):_=v[32],v[33]!==x||v[34]!==f||v[35]!==g||v[36]!==_?(y=(0,l.jsxs)("div",{className:"StaffToolsMenu-module__container--dQp76",children:[x,f,g,_]}),v[33]=x,v[34]=f,v[35]=g,v[36]=_,v[37]=y):y=v[37],y}try{em.displayName||(em.displayName="StaffToolsMenu")}catch{}function eh(e){let t,a,s,r,n,i,c,m,p,x,f,g,_,y,b,j,S,C,w,T,E=(0,o.c)(68),{showPreviewPaneButton:A,conversationSpecificItems:R,customButtons:L,defaultName:k,returnFocusRef:D,onBreadcrumbMenuRefReady:P}=e,B=void 0===A||A,M=void 0===k?"":k,{selectedThreadID:K,threads:Y,messagesLoading:ee,messages:ea,usePlanningIntent:er}=(0,u.Pk)(),en=(0,u.pn)(ep);E[0]!==en?(t=(0,O.CB)(en),E[0]=en,E[1]=t):t=E[1];let ei=t,el=(0,J.H)(),eo=(0,Z.g)(),ec=(0,U.G)(),{data:ed}=(0,I.Ao)(ec),eu=(0,I.BV)(),eh=(0,N.mM)(),ef=(0,v.v)(),[,eg,e_]=(0,X.B)(!1);E[2]!==K||E[3]!==Y?(a=Y.get(K),E[2]=K,E[3]=Y,E[4]=a):a=E[4];let ey=a,eb=K&&er,ej=!!(el?eo:ey?.sharedID),{updateGlobalNavigationBreadcrumbs:eS}=es();E[5]!==eS?(s=()=>{eS()},E[5]=eS,E[6]=s):s=E[6],E[7]!==ec||E[8]!==eS?(r=[eS,ec],E[7]=ec,E[8]=eS,E[9]=r):r=E[9],(0,d.useEffect)(s,r),E[10]!==el||E[11]!==eo||E[12]!==K?(n=()=>K?el&&eo?`/copilot/share/${eo}`:`/copilot/c/${K}`:O.Jz,E[10]=el,E[11]=eo,E[12]=K,E[13]=n):n=E[13];let ev=n;ef?.id;let eC=eh&&!ec||!K&&!ef?.id&&!eh,ew=(0,d.useRef)(null),eN=(0,d.useRef)(null),eI=(0,d.useRef)(null),[eT,eE]=(0,d.useState)(null),eA=D||(K?eN:ew);E[14]!==P||E[15]!==K?(i=()=>{P&&P(K?eN:ew)},c=[P,K,eN,ew],E[14]=P,E[15]=K,E[16]=i,E[17]=c):(i=E[16],c=E[17]),(0,d.useEffect)(i,c);let[eO,eR]=(0,d.useState)(null),{canShareThread:eL}=(0,h.X)(),ek="loaded"===ee.state,eD=eL&&!el&&K&&!ec&&ek;E[18]!==ea?(m=(0,O.Q7)(ea),E[18]=ea,E[19]=m):m=E[19];let eP=m.length>0;E[20]!==ea?(p=(0,O.UM)(ea),E[20]=ea,E[21]=p):p=E[21];let eB=p,eF=eP||eB;E[22]!==eF?(x=()=>{eF||(eE(eI),eR("share"))},E[22]=eF,E[23]=x):x=E[23];let eU=x;return ed?en?(0,$.D)(`${ei} \xb7 ${ed.name} \xb7 GitHub Copilot Spaces`):(0,$.D)(`${ed.name} \xb7 GitHub Copilot Spaces`):ec?en?(0,$.D)(`${ei} \xb7 GitHub Copilot Spaces`):(0,$.D)("GitHub Copilot Spaces"):eh?(0,$.D)("Spaces \xb7 GitHub Copilot"):el?(0,$.D)("Shared conversation \xb7 GitHub Copilot"):(0,$.D)(`${ei} \xb7 GitHub Copilot`),E[24]===Symbol.for("react.memo_cache_sentinel")?(f=(0,l.jsx)(et,{}),E[24]=f):f=E[24],E[25]!==ef||E[26]!==R||E[27]!==M||E[28]!==ev||E[29]!==ej||E[30]!==eu||E[31]!==el||E[32]!==eC||E[33]!==ed||E[34]!==ec||E[35]!==K||E[36]!==ei?(g=!eC&&!el&&(0,l.jsx)(W.B,{children:eu&&(ed||M)?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(W.B.Item,{href:O.VR,children:"Spaces"}),K||!R?(0,l.jsx)(W.B.Item,{href:ed?(0,N.Cb)(ed):O.VR,children:ed?.name||M}):(0,l.jsx)(W.B.ItemWithMenu,{buttonRef:ew,menuOverlay:(0,l.jsx)(V.W.Overlay,{children:(0,l.jsx)(H.l,{children:R})}),children:ed?.name||M}),K&&(0,l.jsx)(W.B.ItemWithMenu,{buttonRef:eN,menuOverlay:(0,l.jsx)(V.W.Overlay,{children:(0,l.jsx)(H.l,{children:(0,l.jsx)(F.V,{onOpenDialog:e=>{eE(eN),eR(e)},isShared:ej,showShare:!ec,hideShareOnDesktop:!0,threadName:ei,threadId:K})})}),children:ei})]}):ef?(0,l.jsx)(W.B.Item,{href:`/copilot/${ef.id}`,children:ef.displayName||"Plugin"}):K&&!el?(0,l.jsx)(W.B.ItemWithMenu,{buttonRef:eN,menuOverlay:(0,l.jsx)(V.W.Overlay,{children:(0,l.jsx)(H.l,{children:(0,l.jsx)(F.V,{onOpenDialog:e=>{eE(eN),eR(e)},isShared:ej,showShare:!ec,hideShareOnDesktop:!0,threadName:ei,threadId:K})})}),children:ei}):el?(0,l.jsx)(W.B.Item,{href:ev(),children:ei}):null}),E[25]=ef,E[26]=R,E[27]=M,E[28]=ev,E[29]=ej,E[30]=eu,E[31]=el,E[32]=eC,E[33]=ed,E[34]=ec,E[35]=K,E[36]=ei,E[37]=g):g=E[37],E[38]!==eb?(_=eb&&(0,l.jsx)(G.A,{variant:"accent",children:"Brainstorm"}),E[38]=eb,E[39]=_):_=E[39],E[40]!==g||E[41]!==_?(y=(0,l.jsxs)("div",{className:"Header-module__leftControls--LaO7p",children:[f,g,_]}),E[40]=g,E[41]=_,E[42]=y):y=E[42],E[43]!==ej||E[44]!==eF||E[45]!==eU||E[46]!==eD?(b=eD&&(0,l.jsx)("div",{className:"Header-module__hideOnMobile--OHZqN",children:(0,l.jsx)(q.Q,{ref:eI,leadingVisual:ej?(0,l.jsx)(z.UnlockIcon,{}):(0,l.jsx)(z.LockIcon,{}),disabled:eF,onClick:eU,children:"Share"})}),E[43]=ej,E[44]=eF,E[45]=eU,E[46]=eD,E[47]=b):b=E[47],E[48]===Symbol.for("react.memo_cache_sentinel")?(j=(0,l.jsx)(em,{}),E[48]=j):j=E[48],E[49]!==K||E[50]!==B?(S=B&&K&&(0,l.jsx)(ex,{}),E[49]=K,E[50]=B,E[51]=S):S=E[51],E[52]!==L||E[53]!==b||E[54]!==S?(C=(0,l.jsxs)("div",{className:"Header-module__rightControls--yQ1vI",children:[b,j,L,S]}),E[52]=L,E[53]=b,E[54]=S,E[55]=C):C=E[55],E[56]!==eA||E[57]!==eO||E[58]!==eT||E[59]!==K||E[60]!==eg||E[61]!==e_||E[62]!==ei?(w=K&&(0,l.jsx)(F.p,{visibleDialog:eO,onClose:()=>{(0,Q.flushSync)(()=>eR(null));let e=eT||eA;e.current?.focus(),eE(null)},threadName:ei,threadId:K,selectedThreadId:K,onStartLoading:eg,onFinishLoading:e_,returnFocusRef:eT||eA}),E[56]=eA,E[57]=eO,E[58]=eT,E[59]=K,E[60]=eg,E[61]=e_,E[62]=ei,E[63]=w):w=E[63],E[64]!==y||E[65]!==C||E[66]!==w?(T=(0,l.jsxs)("div",{className:"Header-module__container--x6PHc",children:[y,C,w]}),E[64]=y,E[65]=C,E[66]=w,E[67]=T):T=E[67],T}function ep(e){return(0,M.W)(e)}function ex(){let e,t=(0,o.c)(4),a=(0,P.tZ)(),{openPreviewPane:s}=(0,P.xx)(),r=(0,T.U)();return t[0]!==r||t[1]!==s||t[2]!==a?(e=!a&&(0,l.jsx)(K.K,{icon:z.SidebarExpandIcon,"aria-label":"Open workbench",onClick:()=>{(0,g.BI)("dotcom_chat.activate",{target:"BROWSER_OPEN_BUTTON",mode:"immersive"}),s()},ref:r}),t[0]=r,t[1]=s,t[2]=a,t[3]=e):e=t[3],e}try{eh.displayName||(eh.displayName="Header")}catch{}try{ex.displayName||(ex.displayName="PreviewPaneButton")}catch{}var ef=a(56487),eg=a(62491),e_=a(73783);function ey(){let e,t,a,s=(0,o.c)(3),r=eb;return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(y.z,{className:"EditorDownload-module__editorButton--A8J3X",href:eg.A.vscode.url,leadingVisual:(0,l.jsx)("img",{src:eg.A.vscode.icon,alt:"",height:"20",width:"20"}),onClick:()=>{r("vscode","ide_menu_primary_button_click")},children:"Download"}),s[0]=e):e=s[0],s[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,l.jsx)(V.W.Anchor,{children:(0,l.jsx)(K.K,{"aria-label":"More editors",icon:z.TriangleDownIcon,className:"EditorDownload-module__dropdownButton--pOfML",unsafeDisableTooltip:!0,onClick:()=>{r("menu","ide_menu_open")}})}),s[1]=t):t=s[1],s[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,l.jsxs)(e_.A,{className:"EditorDownload-module__actions--u7T1C",children:[e,(0,l.jsxs)(V.W,{children:[t,(0,l.jsx)(V.W.Overlay,{align:"end",children:(0,l.jsx)(H.l,{children:(0,l.jsxs)(H.l.Group,{variant:"subtle",children:[(0,l.jsx)(H.l.GroupHeading,{children:"Download for"}),(0,l.jsx)(ef.t,{menuLocation:"editor_cta",mode:"immersive"})]})})})]})]}),s[2]=a):a=s[2],a}function eb(e,t){w.W.freeToPaidTelemetry?(0,ef.F)({eventName:e,menuLocation:"editor_cta",mode:"immersive",action:t}):(0,g.BI)("dotcom_chat.activate",{target:`EDITOR_UPSELL_BANNER_${e.toUpperCase()}`,mode:"immersive"})}try{ey.displayName||(ey.displayName="EditorDownload")}catch{}let ej="https://github.com/features/copilot/cli";function eS(){let e,t,a=(0,o.c)(2);return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)("div",{className:"NewConversationDownloadActions-module__mobileActions--MXDvY",children:(0,l.jsx)(ev,{})}),a[0]=e):e=a[0],a[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,l.jsxs)(l.Fragment,{children:[e,(0,l.jsxs)("div",{className:"NewConversationDownloadActions-module__desktopActions--SOL35",children:[(0,l.jsx)(q.Q,{as:"a",href:ej,leadingVisual:z.TerminalIcon,children:"CLI"}),(0,l.jsx)(ey,{})]})]}),a[1]=t):t=a[1],t}function ev(){let e,t,a,s,r,n=(0,o.c)(5);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(V.W.Anchor,{id:"custom-anchor-id",children:(0,l.jsx)(K.K,{icon:z.KebabHorizontalIcon,"aria-label":"Open menu"})}),n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,l.jsx)(H.l.GroupHeading,{children:"Download for"}),a=(0,l.jsx)(ef.t,{menuLocation:"editor_cta",mode:"immersive"}),s=(0,l.jsx)(H.l.Divider,{}),n[1]=t,n[2]=a,n[3]=s):(t=n[1],a=n[2],s=n[3]),n[4]===Symbol.for("react.memo_cache_sentinel")?(r=(0,l.jsxs)(V.W,{children:[e,(0,l.jsx)(V.W.Overlay,{children:(0,l.jsxs)(H.l,{children:[t,a,s,(0,l.jsxs)(H.l.LinkItem,{href:ej,children:[(0,l.jsx)(H.l.LeadingVisual,{children:(0,l.jsx)(z.TerminalIcon,{})}),"CLI"]})]})})]}),n[4]=r):r=n[4],r}try{eS.displayName||(eS.displayName="NewConversationDownloadActions")}catch{}try{ev.displayName||(ev.displayName="MobileMenu")}catch{}var eC=a(50766),ew=a(17005),eN=a(33592),eI=a(76872),eT=a(84268),eE=a(56149);let eA=({reportUrl:e,onClose:t,returnFocusRef:a})=>{let s=(0,l.jsxs)("div",{className:"ReportSpaceDialog-module__ReportSpaceContainer--zrFJR",children:[(0,l.jsx)("span",{children:"Contact GitHub Support about this user's spammy or abusive behavior."}),(0,l.jsxs)("div",{className:"ReportSpaceDialog-module__ReportSpaceFooterSpacing--eTYaB",children:[(0,l.jsxs)("div",{className:"ReportSpaceDialog-module__ReportSpaceHelpText--dcoV2",children:[(0,l.jsx)("span",{children:"Learn more about "}),(0,l.jsx)(eT.A,{href:"https://docs.github.com/articles/reporting-abuse-or-spam",children:"reporting abuse to GitHub support"})]}),e&&(0,l.jsx)(q.Q,{variant:"danger",as:"a",href:e,target:"_blank",rel:"noopener noreferrer",className:"ReportSpaceDialog-module__ReportSpaceSubmitButton--c04jD",children:"Report abuse to GitHub support"})]})]});return(0,l.jsx)(eE.ZL,{children:(0,l.jsx)(ed.l,{title:"Report Space to GitHub Support",width:"xlarge",height:"auto",onClose:()=>{t(),setTimeout(()=>a?.current?.focus(),0)},className:"ReportSpaceDialog-module__ReportSpaceDialog--X_oiN",children:s})})};try{eA.displayName||(eA.displayName="ReportSpaceDialog")}catch{}var eO=a(29731),eR=a(96459),eL=a(72511),ek=a(72011),eD=a(97665),eP=a(94747),eB=a(96379),eF=a(69726),eU=a(59394),eM=a(51563),e$=a(40260),eW=a(77430),ez=a(71315),eV=a(46251),eH=a(69497),eG=a(34164),eq=a(99511),eK=a(97286);let eQ=(e,t)=>{let a,s,r,n,i,l,c,d,u,m,h,p,x,f,g,_,y,b,j=(0,o.c)(51),S=(0,eD.jE)();j[0]!==t||j[1]!==e?(a=(0,N.Cb)({id:t,owner:e}),j[0]=t,j[1]=e,j[2]=a):a=j[2];let v=a,C=`${v}/permissions`;j[3]!==C?(s={queryKey:["copilotSpaceCollaborators",C],queryFn:async()=>{let e=await (0,eB.lS)(C),t=await e.json();if(!e.ok)throw t.errorMessages;return t}},j[3]=C,j[4]=s):s=j[4];let{data:w,isLoading:I}=(0,eK.I)(s);j[5]!==C?(r=async e=>{let t=await (0,eB.lS)(C,{method:"POST",body:{permission:e}}),a=await t.json();if(!t.ok)throw a.errorMessages;return a},j[5]=C,j[6]=r):r=j[6],j[7]!==C||j[8]!==S||j[9]!==t||j[10]!==e?(n=()=>(S.invalidateQueries({queryKey:(0,ek.dp)({id:t,owner:e})}),S.invalidateQueries({queryKey:["copilotSpaceCollaborators",C]})),j[7]=C,j[8]=S,j[9]=t,j[10]=e,j[11]=n):n=j[11],j[12]!==r||j[13]!==n?(i={mutationFn:r,onSuccess:n},j[12]=r,j[13]=n,j[14]=i):i=j[14];let T=(0,eP.n)(i);j[15]!==T?({mutateAsync:l,...c}=T,j[15]=T,j[16]=l,j[17]=c):(l=j[16],c=j[17]),j[18]!==C?(d=async e=>{let t=await (0,eB.lS)(C,{method:"PUT",body:{permission:e}}),a=await t.json();if(!t.ok)throw a.errorMessages;return a},j[18]=C,j[19]=d):d=j[19],j[20]!==C||j[21]!==S?(u=()=>S.invalidateQueries({queryKey:["copilotSpaceCollaborators",C]}),j[20]=C,j[21]=S,j[22]=u):u=j[22],j[23]!==d||j[24]!==u?(m={mutationFn:d,onSuccess:u},j[23]=d,j[24]=u,j[25]=m):m=j[25];let E=(0,eP.n)(m);j[26]!==E?({mutateAsync:h,...p}=E,j[26]=E,j[27]=h,j[28]=p):(h=j[27],p=j[28]),j[29]!==C?(x=async e=>{let t=await (0,eB.lS)(C,{method:"DELETE",body:{permission:e}});if(!t.ok)throw(await t.json()).errorMessages},j[29]=C,j[30]=x):x=j[30],j[31]!==C||j[32]!==S||j[33]!==t||j[34]!==e?(f=()=>(S.invalidateQueries({queryKey:(0,ek.dp)({id:t,owner:e})}),S.invalidateQueries({queryKey:["copilotSpaceCollaborators",C]})),j[31]=C,j[32]=S,j[33]=t,j[34]=e,j[35]=f):f=j[35],j[36]!==x||j[37]!==f?(g={mutationFn:x,onSuccess:f},j[36]=x,j[37]=f,j[38]=g):g=j[38];let A=(0,eP.n)(g);return j[39]!==A?({mutateAsync:_,...y}=A,j[39]=A,j[40]=_,j[41]=y):(_=j[40],y=j[41]),j[42]!==l||j[43]!==c||j[44]!==w||j[45]!==I||j[46]!==_||j[47]!==y||j[48]!==h||j[49]!==p?(b={collaborators:w,isLoading:I,addCollaborator:l,updateCollaborator:h,removeCollaborator:_,isAddPending:c.isPending,isUpdatePending:p.isPending,isRemovePending:y.isPending,...c,...p,...y},j[42]=l,j[43]=c,j[44]=w,j[45]=I,j[46]=_,j[47]=y,j[48]=h,j[49]=p,j[50]=b):b=j[50],b};function eX(e){if("user"in e)return{...e.user,actor_type:"user"};if("team"in e)return{...e.team,actor_type:"team"};throw Error("suggestion has a value, but the types suggest this should not be possible. Did we account for all possible options properly in the typings?")}function eJ({copilotSpace:e,onError:t}){let a=(0,eN.b)(),[s,r]=(0,d.useState)(""),[n,i]=(0,d.useState)(!1),c=(0,d.useRef)(null),u=w.W.copilotSpacesReadAccessToUserOwnedSpaces,{data:m,isLoading:h}=(e=>{let t,a,s,r,n,i,l=(0,o.c)(17),{input:c}=e;l[0]!==c?(t=["suggestedSpaceCollaborators",c],l[0]=c,l[1]=t):t=l[1],l[2]!==c.allUsers||l[3]!==c.query||l[4]!==c.spaceId||l[5]!==c.spaceOwner?(a=async()=>{let e=(0,N.Cb)({id:c.spaceId,owner:c.spaceOwner}),t=c.allUsers?`${e}/suggested_collaborators?q=${encodeURIComponent(c.query)}&all_users=true`:`${e}/suggested_collaborators?q=${encodeURIComponent(c.query)}`,a=await (0,eB.lS)(t);if(!a.ok)throw Error("Failed to fetch suggested collaborators");return(await a.json()).suggestions.map(eX)},l[2]=c.allUsers,l[3]=c.query,l[4]=c.spaceId,l[5]=c.spaceOwner,l[6]=a):a=l[6];let d=!!c.query;l[7]!==t||l[8]!==a||l[9]!==d?(s={queryKey:t,queryFn:a,enabled:d},l[7]=t,l[8]=a,l[9]=d,l[10]=s):s=l[10];let u=(0,eK.I)(s);return l[11]!==u?({data:r,...n}=u,l[11]=u,l[12]=r,l[13]=n):(r=l[12],n=l[13]),l[14]!==r||l[15]!==n?(i={data:r,...n},l[14]=r,l[15]=n,l[16]=i):i=l[16],i})({input:{query:(0,d.useDeferredValue)(s.startsWith("@")?s.trim().slice(1):s.trim()),spaceOwner:e.owner,spaceId:e.id,allUsers:u&&!e.ownerIsOrg}}),{collaborators:p,addCollaborator:x,error:f,isLoading:g}=eQ(e.owner,e.id);async function y(s){if(p?.some(e=>e.actor_id===s.id&&e.actor_type===s.actor_type)){r(""),i(!1);return}try{await x({actor_id:s.id,role_name:"custom_copilot_reader",actor_type:s.actor_type}),r(""),!e.ownerIsOrg&&p&&p?.length<=1&&a.dispatch({type:"SET_CUSTOM_COPILOT",partial:!0,customCopilot:{...e,collaborative:!0}}),i(!1)}catch{t({base:"An error occurred while adding a collaborator."})}}return(0,d.useEffect)(()=>{function e(e){c.current&&!c.current.contains(e.target)&&i(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,d.useEffect)(()=>{i(!!(s&&!h&&m&&m.length>0))},[s,m,h]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(eV.B,{direction:"vertical",gap:"condensed",align:"start",children:[(0,l.jsx)("span",{className:"text-small text-bold color-fg-muted mb-1",children:"People with access"}),(0,l.jsxs)("div",{className:"SpaceCollaborators-module__copyLinkSection--G8YCd",style:{position:"relative"},children:[(0,l.jsx)(eq.A,{block:!0,placeholder:e.ownerIsOrg?`Search people within ${e.owner}`:"Search for any GitHub user",value:s,onChange:e=>r(e.target.value),className:"color-fg-default","aria-label":e.ownerIsOrg?"Search for users or teams to share this space with":"Search for any GitHub user to share this space with"}),n&&m&&(0,l.jsx)("div",{ref:c,children:(0,l.jsx)(e2,{items:m,onSelect:y})})]})]}),g?(0,l.jsx)("div",{className:"d-flex flex-justify-center p-2",children:(0,l.jsx)(eF.A,{})}):f?(0,l.jsx)(_.l,{variant:"critical",title:"There was a problem with loading this Space's collaborators."}):p&&p.length>0?(0,l.jsx)(eV.B,{direction:"vertical",gap:"condensed",align:"start",children:p.map(a=>(0,l.jsx)(eZ,{actor:a,copilotSpace:e,collaboratorsCount:p.length,onError:t},`${a.actor_type}-${a.actor_id}`))}):(0,l.jsx)("span",{className:"text-small color-fg-muted p-2",children:"This Space isn't shared with anyone yet"})]})}function eZ(e){let t,a,s,r,n,i,c,d,u,m=(0,o.c)(27),{actor:h,copilotSpace:p,onError:x,collaboratorsCount:f}=e,g="user"===h.actor_type?h.display_login:h.slug,_="team"===h.actor_type;return m[0]!==h.avatar_url||m[1]!==_?(t=(0,l.jsx)(eW.r,{src:h.avatar_url,className:"mr-2",square:_,size:32}),m[0]=h.avatar_url,m[1]=_,m[2]=t):t=m[2],m[3]!==g?(a=(0,l.jsx)("b",{children:g}),m[3]=g,m[4]=a):a=m[4],m[5]!==g||m[6]!==a?(s=(0,l.jsx)("span",{className:"ml-1",children:(0,l.jsx)(eH.A,{maxWidth:"230px",title:g,inline:!0,children:a})}),m[5]=g,m[6]=a,m[7]=s):s=m[7],m[8]!==h.name?(r=(0,l.jsx)("p",{children:h.name}),m[8]=h.name,m[9]=r):r=m[9],m[10]!==h.name||m[11]!==r?(n=(0,l.jsx)("span",{className:"text-small color-fg-muted ml-1",children:(0,l.jsx)(eH.A,{maxWidth:"230px",title:h.name,inline:!0,children:r})}),m[10]=h.name,m[11]=r,m[12]=n):n=m[12],m[13]!==s||m[14]!==n?(i=(0,l.jsxs)("div",{className:"d-flex flex-column mt-1",children:[s,n]}),m[13]=s,m[14]=n,m[15]=i):i=m[15],m[16]!==t||m[17]!==i?(c=(0,l.jsxs)("div",{className:"d-flex flex-items-center mt-1",children:[t,i]}),m[16]=t,m[17]=i,m[18]=c):c=m[18],m[19]!==h||m[20]!==f||m[21]!==p||m[22]!==x?(d=(0,l.jsx)(e1,{actor:h,onError:x,copilotSpace:p,collaboratorsCount:f}),m[19]=h,m[20]=f,m[21]=p,m[22]=x,m[23]=d):d=m[23],m[24]!==c||m[25]!==d?(u=(0,l.jsxs)("div",{className:"width-full d-flex flex-items-center flex-justify-between",children:[c,d]}),m[24]=c,m[25]=d,m[26]=u):u=m[26],u}let eY=[{text:"Admin",value:"custom_copilot_admin"},{text:"Editor",value:"custom_copilot_writer"},{text:"Viewer",value:"custom_copilot_reader"}],e0={custom_copilot_admin:"Can view, make changes and add new people",custom_copilot_writer:"Can view and make changes",custom_copilot_reader:"Can view"};function e1({actor:e,onError:t,copilotSpace:a,collaboratorsCount:s}){let r=(0,eN.b)(),[n,i]=(0,d.useState)(!1),o=(0,d.useRef)(null),c=eY.find(t=>t.value===e.role),{updateCollaborator:u,removeCollaborator:m,isUpdatePending:h,isRemovePending:p}=eQ(a.owner,a.id);async function x(a){try{await u({actor_id:e.actor_id,role_name:a,actor_type:e.actor_type})}catch{t({base:"An error occurred while updating an actor's permission level."})}finally{i(!1)}}async function f(){try{await m({actor_id:e.actor_id,actor_type:e.actor_type})}catch{t({base:"An error occurred while removing an actor's permissions."})}finally{!a.ownerIsOrg&&s<=2&&r.dispatch({type:"SET_CUSTOM_COPILOT",partial:!0,customCopilot:{...a,collaborative:!1}}),i(!1)}}let g=c?`Change role for ${e.name} ${c.text} ${e0[c.value]}`:`Change role for ${e.name}`;return(0,l.jsxs)(V.W,{onOpenChange:i,anchorRef:o,open:n,children:[(0,l.jsx)(V.W.Button,{disabled:e.disabled,loading:h||p,variant:"invisible",className:"text-small",ref:o,onClick:()=>i(!0),"aria-label":g,children:(0,l.jsx)(eH.A,{title:c?.text||"",inline:!0,children:c?.text})}),(0,l.jsx)(V.W.Overlay,{side:"outside-bottom",align:"end",width:"medium",children:(0,l.jsxs)(H.l,{selectionVariant:"single","aria-label":`Role options for ${e.name}`,children:[eY.map(e=>(0,l.jsxs)(H.l.Item,{selected:e.value===c?.value,onSelect:()=>x(e.value),children:[(0,l.jsx)("span",{className:"text-medium",children:(0,l.jsx)("b",{children:e.text})}),(0,l.jsx)("span",{className:"text-small color-fg-muted",children:(0,l.jsx)("p",{className:"m-0",children:e0[e.value]})})]},e.value)),(0,l.jsx)(H.l.Divider,{}),(0,l.jsxs)(H.l.Item,{variant:"danger",onSelect:()=>f(),children:[(0,l.jsx)("span",{className:"text-medium",children:(0,l.jsx)("b",{children:"Remove"})}),(0,l.jsx)("span",{className:"text-small color-fg-muted",children:(0,l.jsx)("p",{className:"m-0",children:"Loses access to this content"})})]},"remove")]})})]})}function e2(e){let t,a,s=(0,o.c)(7),{items:r,onSelect:n}=e;if(s[0]!==r||s[1]!==n){let e;s[3]!==n?(e=e=>{let t=`${e.actor_type}-${e.id}`,a="user"===e.actor_type?e.login:e.slug;return(0,l.jsxs)(H.l.Item,{onSelect:()=>n(e),role:"option",children:[(0,l.jsx)(H.l.LeadingVisual,{children:(0,l.jsx)(eW.r,{src:e.avatarUrl,square:"team"===e.actor_type,size:20})}),(0,l.jsx)("span",{className:"text-bold",children:a}),e.name&&(0,l.jsx)(H.l.Description,{children:e.name})]},t)},s[3]=n,s[4]=e):e=s[4],t=r.map(e),s[0]=r,s[1]=n,s[2]=t}else t=s[2];return s[5]!==t?(a=(0,l.jsx)("div",{role:"dialog","aria-label":"Suggested collaborators",className:"SpaceCollaborators-module__spacesSuggestionsList--oqwht",children:(0,l.jsx)(H.l,{role:"listbox",children:t})}),s[5]=t,s[6]=a):a=s[6],a}try{eJ.displayName||(eJ.displayName="SpaceCollaborators")}catch{}try{eZ.displayName||(eZ.displayName="SpaceCollaboratorRow")}catch{}try{2..displayName||(2..displayName="MIN_COLLABORATORS_TO_BE_COLLABORATIVE")}catch{}try{e1.displayName||(e1.displayName="ActorRoleSelect")}catch{}try{e2.displayName||(e2.displayName="SpacesSuggestionsList")}catch{}let e3="SpaceSharingDialog-module__visibilityDropdown--HMESi";function e4(e){let t,a,s,r,n,i,c,u,m,h,p=(0,o.c)(26),{closeDialog:x,customCopilotId:f,userOwned:g,returnFocusRef:y}=e;p[0]===Symbol.for("react.memo_cache_sentinel")?(t={},p[0]=t):t=p[0];let[b,j]=(0,d.useState)(t),[S,v]=(0,d.useState)(!1),C=(0,d.useRef)(null),{isPending:T,data:E}=(0,I.Ao)(f),A=w.W.copilotSpacesReadAccessToUserOwnedSpaces&&void 0!==g&&g,O=w.W.spacesIndividualPoliciesEnabled&&!T&&!E?.shareable,R=()=>O?null:(0,l.jsx)(e9,{copySharedLink:k,copied:S,isSpaceLoading:T,copilotSpace:E});p[1]===Symbol.for("react.memo_cache_sentinel")?(a=()=>()=>{C.current&&(clearTimeout(C.current),C.current=null)},s=[],p[1]=a,p[2]=s):(a=p[1],s=p[2]),(0,d.useEffect)(a,s),p[3]!==e.customCopilotId?(r=(0,N.Cb)(e.customCopilotId),p[3]=e.customCopilotId,p[4]=r):r=p[4];let L=`${ez.fV.origin}${r}`,k=()=>{(0,e$.D)(L),v(!0),C.current&&clearTimeout(C.current),C.current=setTimeout(()=>{v(!1),C.current=null},2e3)};return p[5]===Symbol.for("react.memo_cache_sentinel")?(n={narrow:"fullscreen"},p[5]=n):n=p[5],p[6]!==x||p[7]!==y?(i=()=>{x(),setTimeout(()=>y?.current?.focus(),0)},p[6]=x,p[7]=y,p[8]=i):i=p[8],p[9]!==O?(c=O&&(0,l.jsx)(_.l,{hideTitle:!0,variant:"warning",title:"individual sharing disabled",description:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("p",{children:["Individual space sharing is disabled within your organization. To learn more, check your"," ",(0,l.jsx)(eT.A,{href:`${ez.fV.origin}/settings/copilot/features#copilot-spaces-policy`,inline:!0,children:"Copilot Spaces policy settings"}),"."]}),(0,l.jsx)("p",{children:"In order to share this space, you must duplicate it and change ownership to an organization."})]})}),p[9]=O,p[10]=c):c=p[10],p[11]!==b.base||p[12]!==b.visibility?(u=b.base||b.visibility?(0,l.jsx)(_.l,{hideTitle:!0,title:"Unable to update space",description:b.visibility||b.base,"aria-label":"Critical",variant:"critical",className:"SpaceSharingDialog-module__errorBanner--SkBp1"}):null,p[11]=b.base,p[12]=b.visibility,p[13]=u):u=p[13],p[14]!==E||p[15]!==O||p[16]!==T||p[17]!==e||p[18]!==A?(m=!O&&(0,l.jsxs)(eV.B,{"data-testid":"custom-copilot-visibility",gap:"condensed",children:[E&&(0,l.jsx)(eJ,{copilotSpace:E,onError:j}),(0,l.jsx)(H.l.Divider,{}),A?(0,l.jsx)(ts,{copilotSpace:E,isSpaceLoading:T,onError:j}):(0,l.jsxs)(eV.B,{direction:"vertical",gap:"condensed",align:"start",children:[(0,l.jsx)("span",{className:"text-small text-bold color-fg-muted",children:"Settings"}),(0,l.jsx)(e5,{onError:j,copilotSpace:E,isSpaceLoading:T,...e})]})]}),p[14]=E,p[15]=O,p[16]=T,p[17]=e,p[18]=A,p[19]=m):m=p[19],p[20]!==R||p[21]!==i||p[22]!==c||p[23]!==u||p[24]!==m?(h=(0,l.jsxs)(ed.l,{position:n,title:"Share this space",renderFooter:R,onClose:i,className:"SpaceSharingDialog-module__spaceVisibilityDialog--q8XMu",width:"large","aria-label":"Share this space",children:[c,u,m]}),p[20]=R,p[21]=i,p[22]=c,p[23]=u,p[24]=m,p[25]=h):h=p[25],h}function e5(e){let t,a,s,r,n,i,c,u,m,h,p,x,f=(0,o.c)(36),{copilotSpace:g,isSpaceLoading:_,onError:y}=e,{data:b,isLoading:j,error:S}=(0,I.Tx)(g?.owner||"",g?.id??-1);if(f[0]!==g||f[1]!==_||f[2]!==j||f[3]!==y||f[4]!==b?(t=()=>{_||j||g&&b||y({visibility:"Could not load your space's visibility settings"})},a=[_,j,g,b,y],f[0]=g,f[1]=_,f[2]=j,f[3]=y,f[4]=b,f[5]=t,f[6]=a):(t=f[5],a=f[6]),(0,d.useEffect)(t,a),_){let e;return f[7]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)("div",{className:"color-fg-muted p-2",children:"Loading space information..."}),f[7]=e):e=f[7],e}if(!g){let e;return f[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)("div",{className:"color-fg-muted p-2",children:"Could not load data for your space."}),f[8]=e):e=f[8],e}let v=g.owner,C=b?.memberCount;return f[9]!==g.ownerAvatar?(s=(0,l.jsx)(eW.r,{src:g.ownerAvatar,className:"mr-2",square:!0,size:32}),f[9]=g.ownerAvatar,f[10]=s):s=f[10],f[11]!==g.ownerDisplayName?(r=(0,l.jsx)("b",{children:g.ownerDisplayName}),f[11]=g.ownerDisplayName,f[12]=r):r=f[12],f[13]!==g.ownerDisplayName||f[14]!==r?(n=(0,l.jsx)(eH.A,{maxWidth:"230px",title:g.ownerDisplayName,inline:!0,children:r}),f[13]=g.ownerDisplayName,f[14]=r,f[15]=n):n=f[15],f[16]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.jsx)("span",{className:"color-fg-muted ml-1",children:"(owner)"}),f[16]=i):i=f[16],f[17]!==n?(c=(0,l.jsxs)("span",{className:"ml-1",children:[n,i]}),f[17]=n,f[18]=c):c=f[18],f[19]!==S||f[20]!==j||f[21]!==C||f[22]!==v?(u=v&&(0,l.jsxs)(l.Fragment,{children:[!j&&null!==C&&(0,l.jsxs)("span",{className:"text-small color-fg-muted ml-1",children:[C," ",1===C?"person":"people"]}),(j||S||null===C)&&(0,l.jsx)("span",{className:"text-small color-fg-muted ml-1",children:"Organization"})]}),f[19]=S,f[20]=j,f[21]=C,f[22]=v,f[23]=u):u=f[23],f[24]!==c||f[25]!==u?(m=(0,l.jsxs)("div",{className:"d-flex flex-column",children:[c,u]}),f[24]=c,f[25]=u,f[26]=m):m=f[26],f[27]!==s||f[28]!==m?(h=(0,l.jsxs)("div",{className:"d-flex flex-items-center mt-1",children:[s,m]}),f[27]=s,f[28]=m,f[29]=h):h=f[29],f[30]!==g||f[31]!==y?(p=(0,l.jsx)(e8,{onError:y,copilotSpace:g}),f[30]=g,f[31]=y,f[32]=p):p=f[32],f[33]!==h||f[34]!==p?(x=(0,l.jsxs)("div",{className:"width-full d-flex flex-items-center flex-justify-between",children:[h,p]}),f[33]=h,f[34]=p,f[35]=x):x=f[35],x}let e6=[{text:"Admin",value:"custom_copilot_admin"},{text:"Editor",value:"custom_copilot_writer"},{text:"Viewer",value:"custom_copilot_reader"},{text:"No access",value:"none"}],e7={custom_copilot_admin:"Can view, make changes and add new people",custom_copilot_writer:"Can view and make changes",custom_copilot_reader:"Can view",none:"Hidden from your organization"};function e8({copilotSpace:e,onError:t}){let[a,s]=(0,d.useState)(!1),r=(0,d.useRef)(null),n=e6.find(t=>t.value===e.baseRole),{upsertCopilotSpace:i,isPending:o}=(0,eM.$)(e);async function c(e){if(!o)try{await i({baseRole:e})}catch{t({base:"An error occurred while updating your space's base role."})}finally{s(!1)}}let u=n?`Settings ${n.text} ${e7[n.value]}`:"Settings";return e.adminable?(0,l.jsxs)(V.W,{onOpenChange:s,anchorRef:r,open:a,children:[(0,l.jsx)(V.W.Button,{loading:o,variant:"invisible",className:"text-small",ref:r,onClick:()=>s(!0),"aria-label":u,children:(0,l.jsx)(eH.A,{title:n?.text||"",inline:!0,children:n?.text})}),(0,l.jsx)(V.W.Overlay,{side:"outside-bottom",align:"end",width:"medium",children:(0,l.jsx)(H.l,{selectionVariant:"single",children:e6.map(e=>(0,l.jsxs)(H.l.Item,{selected:e.value===n?.value,onSelect:()=>c(e.value),children:[(0,l.jsx)("span",{className:"text-medium",children:(0,l.jsx)("b",{children:e.text})}),(0,l.jsx)("span",{className:"text-small color-fg-muted",children:(0,l.jsx)("p",{className:"m-0",children:e7[e.value]})})]},e.value))})})]}):(0,l.jsx)("div",{children:(0,l.jsx)(eH.A,{title:n?.text||"",className:"text-small text-light",children:n?.text})})}function e9(e){let t,a,s,r,n,i,c,d=(0,o.c)(17),{copySharedLink:u,copied:m,isSpaceLoading:h,copilotSpace:p}=e;d[0]===Symbol.for("react.memo_cache_sentinel")?(t={borderBottomLeftRadius:"var(--borderRadius-large, 0.75rem)",borderBottomRightRadius:"var(--borderRadius-large, 0.75rem)",borderTop:"1px solid var(--borderColor-muted)",padding:"var(--base-size-12)"},d[0]=t):t=d[0],d[1]!==p?.ownerIsOrg?(a=!p?.ownerIsOrg&&(0,l.jsxs)("div",{className:"SpaceSharingDialog-module__footerText--TJavK",children:[(0,l.jsx)(z.InfoIcon,{}),(0,l.jsx)("span",{children:"Viewers will only see sources they have access to."})]}),d[1]=p?.ownerIsOrg,d[2]=a):a=d[2],d[3]===Symbol.for("react.memo_cache_sentinel")?(s={minWidth:"90px"},d[3]=s):s=d[3];let x=m?"Link copied":"";return d[4]!==x?(r=(0,l.jsx)("div",{"aria-live":"polite","aria-atomic":"true",className:"sr-only",children:x}),d[4]=x,d[5]=r):r=d[5],d[6]!==m||d[7]!==p||d[8]!==u||d[9]!==h?(n=m?(0,l.jsx)(q.Q,{className:"color-fg-success",disabled:h||!p,children:"Link copied"}):(0,l.jsx)(q.Q,{onClick:u,leadingVisual:z.LinkIcon,disabled:h||!p,children:"Copy link"}),d[6]=m,d[7]=p,d[8]=u,d[9]=h,d[10]=n):n=d[10],d[11]!==r||d[12]!==n?(i=(0,l.jsxs)("div",{style:s,className:"d-flex flex-items-center gap-2",children:[r,n]}),d[11]=r,d[12]=n,d[13]=i):i=d[13],d[14]!==a||d[15]!==i?(c=(0,l.jsxs)(ed.l.Footer,{style:t,className:"color-fg-muted flex-items-center flex-justify-between text-small",children:[a,i]}),d[14]=a,d[15]=i,d[16]=c):c=d[16],c}let te={text:"Restricted",value:"none",description:"Only people with access can open the link",icon:z.LockIcon,color:"attention"},tt={text:"Anyone with link",value:"custom_copilot_reader",description:"Everyone with access to the resources can access the link",icon:z.GlobeIcon,color:"accent"},ta=w.W.copilotSpacesPublicAccessToUserOwnedSpaces?[te,tt]:[te];function ts({copilotSpace:e,isSpaceLoading:t,onError:a}){let[s,r]=(0,d.useState)(!1),n=(0,d.useRef)(null),i=ta.find(t=>t.value===e?.baseRole)??te,{upsertCopilotSpace:o,isPending:c}=(0,eM.$)(e);async function u(e){if(!c)try{await o({baseRole:e})}catch{a({base:"An error occurred while updating your space's visibility."})}finally{r(!1)}}let m=i.icon,h=`General access grouping ${i.text} ${i.description}`;return t?(0,l.jsx)("div",{className:"color-fg-muted p-2",children:"Loading space information..."}):e?(0,l.jsxs)(eV.B,{direction:"vertical",gap:"condensed",align:"start",children:[(0,l.jsx)("span",{className:"text-small text-bold color-fg-muted",children:"General access"}),(0,l.jsx)("div",{className:"width-full d-flex flex-items-center flex-justify-between",children:(0,l.jsxs)("div",{className:"SpaceSharingDialog-module__visibilityChoice--Z75rm",children:[(0,l.jsx)("div",{className:(0,eG.$)("SpaceSharingDialog-module__visibilityIcon--KK57C","accent"===i.color?"SpaceSharingDialog-module__accentIcon--q8VZ5":"SpaceSharingDialog-module__attentionIcon--lZ9Sq"),children:(0,l.jsx)(m,{size:16})}),(0,l.jsxs)("div",{className:"d-flex flex-column",children:[w.W.copilotSpacesPublicAccessToUserOwnedSpaces?(0,l.jsxs)(V.W,{onOpenChange:r,anchorRef:n,open:s,children:[(0,l.jsx)(V.W.Button,{loading:c,variant:"invisible",className:e3,ref:n,onClick:()=>r(!0),disabled:!e.adminable,"aria-label":h,children:i.text}),(0,l.jsx)(V.W.Overlay,{side:"outside-top",align:"start",width:"small",children:(0,l.jsx)(H.l,{selectionVariant:"single",children:ta.map(t=>{let a=t.icon;return(0,l.jsxs)(H.l.Item,{selected:t.value===e.baseRole,onSelect:()=>u(t.value),children:[(0,l.jsx)(H.l.LeadingVisual,{children:(0,l.jsx)(a,{})}),(0,l.jsx)("div",{className:"d-flex flex-column",children:(0,l.jsx)("span",{className:"text-medium",children:t.text})})]},t.value)})})})]}):(0,l.jsx)("span",{className:e3,children:i.text}),(0,l.jsx)("span",{className:"text-small color-fg-muted p-1",children:i.description})]})]})})]}):(0,l.jsx)("div",{className:"color-fg-muted p-2",children:"Could not load data for your space."})}try{e4.displayName||(e4.displayName="SpaceSharingDialog")}catch{}try{e5.displayName||(e5.displayName="VisibilitySettings")}catch{}try{e8.displayName||(e8.displayName="BaseRoleSelect")}catch{}try{e9.displayName||(e9.displayName="CopilotSpaceSharingDialogFooter")}catch{}try{ts.displayName||(ts.displayName="UserOwnedVisibilitySettings")}catch{}function tr(e){let t,a,s,r,n,i,c,u,m,h,p,x,f,_,y,b,j,S,v=(0,o.c)(67),{onDelete:C,copilot:T}=e,[E,O]=(0,d.useState)(null),[R,L]=(0,d.useState)(!1),[k,D]=(0,d.useState)(!1),[P,B]=(0,d.useState)(!1),F=(0,d.useRef)(null),U=(0,A.Zp)(),M=w.W.copilotSpacesServerSideMenuActions,$=w.W.copilotSpacesReadAccessToUserOwnedSpaces,W="duplicate"===E,{data:G,isLoading:q}=(0,I.Ao)(W?T:null),{data:X,isLoading:J,error:Z}=(0,I.yV)(P&&M?T.owner:"",P&&M?T.id:-1);e:{let e;if(M&&X){let e;v[0]!==T.collaborative||v[1]!==T.ownerIsOrg||v[2]!==T.shared||v[3]!==X.adminable||v[4]!==X.baseRole||v[5]!==X.editable||v[6]!==X.public||v[7]!==X.shareable?(e={editable:X.editable,adminable:X.adminable,baseRole:X.baseRole,shareable:X.shareable,publicSpace:X.public,collaborative:T.collaborative,shared:T.shared,ownerIsOrg:T.ownerIsOrg},v[0]=T.collaborative,v[1]=T.ownerIsOrg,v[2]=T.shared,v[3]=X.adminable,v[4]=X.baseRole,v[5]=X.editable,v[6]=X.public,v[7]=X.shareable,v[8]=e):e=v[8],t=e;break e}v[9]!==T.adminable||v[10]!==T.baseRole||v[11]!==T.collaborative||v[12]!==T.editable||v[13]!==T.ownerIsOrg||v[14]!==T.public||v[15]!==T.shareable||v[16]!==T.shared?(e={editable:T.editable,adminable:T.adminable,baseRole:T.baseRole,shareable:T.shareable,publicSpace:T.public,collaborative:T.collaborative,shared:T.shared,ownerIsOrg:T.ownerIsOrg},v[9]=T.adminable,v[10]=T.baseRole,v[11]=T.collaborative,v[12]=T.editable,v[13]=T.ownerIsOrg,v[14]=T.public,v[15]=T.shareable,v[16]=T.shared,v[17]=e):e=v[17],t=e}let{editable:Y,adminable:ee,baseRole:et,shareable:ea,publicSpace:es,collaborative:er,shared:en,ownerIsOrg:ei}=t,el=ei&&ee,eo=$&&!ei&&ee,ec=M?ea:el||eo,ed=M?!!(T&&es&&"none"!==et):!!(T&&(ei&&("none"!==et||er)||en));v[18]!==T?(a=T?{id:T.id,owner:T.owner}:null,v[18]=T,v[19]=a):a=v[19];let eu=(0,I.$W)(a);"duplicate"===E&&k&&!q&&G&&D(!1),v[20]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{(0,Q.flushSync)(()=>O(null)),F.current?.focus()},v[20]=s):s=v[20];let em=s;v[21]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{(0,g.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_SHARE_DIALOG_CLOSE",mode:"immersive"}),em()},v[21]=r):r=v[21];let eh=r;v[22]===Symbol.for("react.memo_cache_sentinel")?(n=async e=>{em(),L(!0),await e(),L(!1)},v[22]=n):n=v[22];let ep=n;v[23]!==C?(i=async()=>{(0,g.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_LIST_ACTION_DELETE",mode:"immersive"}),await ep(C)},v[23]=C,v[24]=i):i=v[24];let ex=i;v[25]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{(0,g.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_SHARE",mode:"immersive"}),O("share")},v[25]=c):c=v[25];let ef=c;v[26]===Symbol.for("react.memo_cache_sentinel")?(u=e=>{(0,g.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_DUPLICATE",mode:"immersive"}),O("duplicate"),e.preventDefault()},v[26]=u):u=v[26];let eg=u;v[27]===Symbol.for("react.memo_cache_sentinel")?(m=()=>{(0,g.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_REPORT",mode:"immersive"}),O("report")},v[27]=m):m=v[27];let e_=m;return v[28]===Symbol.for("react.memo_cache_sentinel")?(h=e=>{D(e),e&&B(!0)},v[28]=h):h=v[28],v[29]!==R?(p=(0,l.jsx)(V.W.Anchor,{children:(0,l.jsx)(K.K,{loading:R,icon:z.KebabHorizontalIcon,"aria-label":"Manage space",variant:"invisible",onClick:tn})}),v[29]=R,v[30]=p):p=v[30],v[31]!==ee||v[32]!==T||v[33]!==Y||v[34]!==q||v[35]!==J||v[36]!==Z||v[37]!==U||v[38]!==ed||v[39]!==ec||v[40]!==E?(x=(0,l.jsx)(V.W.Overlay,{side:"outside-bottom",align:"end",children:M&&J?(0,l.jsx)(H.l,{children:(0,l.jsx)(H.l.Item,{children:(0,l.jsx)(eF.A,{size:"small"})})}):M&&Z?(0,l.jsx)(H.l,{children:(0,l.jsx)(H.l.Item,{disabled:!0,children:"Failed to load menu options"})}):(0,l.jsxs)(H.l,{children:[Y&&(0,l.jsxs)(H.l.Item,{onSelect:()=>{(0,g.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_EDIT",mode:"immersive"}),U((0,N.Cb)(T))},children:[(0,l.jsx)(H.l.LeadingVisual,{children:(0,l.jsx)(z.PencilIcon,{})}),"Edit"]}),ec&&(0,l.jsxs)(H.l.Item,{onSelect:ef,children:[(0,l.jsx)(H.l.LeadingVisual,{children:(0,l.jsx)(z.ShareIcon,{})}),"Share"]}),(ee||Y)&&(0,l.jsxs)(H.l.Item,{onSelect:e=>{eg(e)},loading:q&&"duplicate"===E,children:[(0,l.jsx)(H.l.LeadingVisual,{children:(0,l.jsx)(z.CopyIcon,{})}),"Duplicate"]}),w.W.copilotSpacesReportAbuse&&ed&&(0,l.jsxs)(H.l.Item,{onSelect:e_,children:[(0,l.jsx)(H.l.LeadingVisual,{children:(0,l.jsx)(z.ReportIcon,{})}),"Report content"]}),ee&&(0,l.jsxs)(H.l.Item,{variant:"danger",onSelect:()=>{(0,g.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_DELETE",mode:"immersive"}),O("delete")},children:[(0,l.jsx)(H.l.LeadingVisual,{children:(0,l.jsx)(z.TrashIcon,{})}),"Delete"]})]})}),v[31]=ee,v[32]=T,v[33]=Y,v[34]=q,v[35]=J,v[36]=Z,v[37]=U,v[38]=ed,v[39]=ec,v[40]=E,v[41]=x):x=v[41],v[42]!==k||v[43]!==p||v[44]!==x?(f=(0,l.jsxs)(V.W,{anchorRef:F,open:k,onOpenChange:h,children:[p,x]}),v[42]=k,v[43]=p,v[44]=x,v[45]=f):f=v[45],v[46]!==ex||v[47]!==E?(_="delete"===E?(0,l.jsx)(ti,{onCancel:em,onConfirm:ex,returnFocusRef:F}):null,v[46]=ex,v[47]=E,v[48]=_):_=v[48],v[49]!==T||v[50]!==el||v[51]!==eo||v[52]!==E?(y="share"===E?(0,l.jsx)(e4,{closeDialog:eh,customCopilotId:T,userOwned:!el&&eo}):null,v[49]=T,v[50]=el,v[51]=eo,v[52]=E,v[53]=y):y=v[53],v[54]!==G||v[55]!==E?(b="duplicate"===E&&G?(0,l.jsx)(eI.D,{dialogTitle:"Duplicate Space",closeDialog:()=>{(0,g.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DUPLICATE_DIALOG_CLOSE",mode:"immersive"}),O(null)},initialSpace:G,returnFocusRef:F}):null,v[54]=G,v[55]=E,v[56]=b):b=v[56],v[57]!==T||v[58]!==eu||v[59]!==E?(j="report"===E&&T&&eu?(0,l.jsx)(eA,{reportUrl:eu,onClose:()=>{(0,g.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_REPORT_DIALOG_CLOSE",mode:"immersive"}),O(null)},returnFocusRef:F}):null,v[57]=T,v[58]=eu,v[59]=E,v[60]=j):j=v[60],v[61]!==f||v[62]!==_||v[63]!==y||v[64]!==b||v[65]!==j?(S=(0,l.jsxs)(l.Fragment,{children:[f,_,y,b,j]}),v[61]=f,v[62]=_,v[63]=y,v[64]=b,v[65]=j,v[66]=S):S=v[66],S}function tn(){return(0,g.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU",mode:"immersive"})}let ti=({onConfirm:e,onCancel:t,returnFocusRef:a})=>{let[s,r]=(0,d.useState)(!1),n=async()=>{r(!0),(0,g.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DIALOG_DELETE_CONFIRM",mode:"immersive"});try{await e()}finally{r(!1)}};return(0,l.jsx)(eU.K,{title:"Delete space",onClose:async e=>{s||("confirm"===e?await n():((0,g.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DIALOG_DELETE_CANCEL",mode:"immersive"}),t(),setTimeout(()=>a?.current?.focus(),0)))},confirmButtonContent:s?(0,l.jsx)(eF.A,{size:"small"}):"Delete",confirmButtonType:"danger",children:"Are you sure you want to delete this space? This action cannot be undone."})};try{tr.displayName||(tr.displayName="CopilotSpacesMenu")}catch{}try{ti.displayName||(ti.displayName="DeleteDialog")}catch{}var tl=a(44956),to=a(86877),tc=a(4175);function td({copilotSpace:e,onClose:t,onSaved:a,returnFocusRef:s,maxDescriptionLength:r}){let{upsertCopilotSpace:n,isPending:i}=(0,eM.$)(e),[o,c]=(0,d.useState)(e.description??""),[u,m]=(0,d.useState)(null);async function h(){try{let e=await n({description:o});a?.(e),t()}catch(e){e instanceof Error?m(e.message):m("Failed to save description")}}function p(){c(e.description??""),t()}return(0,l.jsx)(ed.l,{title:"Description",onClose:p,returnFocusRef:s,position:{narrow:"fullscreen"},renderBody:()=>(0,l.jsxs)("div",{className:"p-3",children:[u&&(0,l.jsx)(_.l,{variant:"critical",title:u,className:"mb-2"}),(0,l.jsxs)(to.A,{children:[(0,l.jsx)(to.A.Label,{visuallyHidden:!0,children:"Description"}),(0,l.jsx)(tc.Ay,{block:!0,value:o,onChange:e=>c(e.target.value),placeholder:"Describe what this space is for",resize:"vertical",rows:5}),(0,l.jsx)(tu,{text:o,promptCharLimit:r})]})]}),renderFooter:()=>(0,l.jsx)(tl.m,{onCancel:p,onSave:h,isLoading:i,loadingAnnouncement:"Saving description",saveButtonText:"Save"})})}function tu(e){let t,a,s,r,n=(0,o.c)(10),{text:i,promptCharLimit:c}=e,d=i.length>c;n[0]!==i.length?(t=i.length.toLocaleString(),n[0]=i.length,n[1]=t):t=n[1],n[2]!==c?(a=c.toLocaleString(),n[2]=c,n[3]=a):a=n[3],n[4]!==t||n[5]!==a?(s=(0,l.jsxs)(l.Fragment,{children:[t," / ",a," characters"]}),n[4]=t,n[5]=a,n[6]=s):s=n[6];let u=s;return n[7]!==u||n[8]!==d?(r=d?(0,l.jsx)(to.A.Validation,{variant:"error",children:u}):(0,l.jsx)(to.A.Caption,{children:u}),n[7]=u,n[8]=d,n[9]=r):r=n[9],r}try{td.displayName||(td.displayName="DescriptionDialog")}catch{}try{tu.displayName||(tu.displayName="CharacterCount")}catch{}function tm(e){let t,a,s,r,n,i,c,m,p,x,f,_,y,b,j,S,v,C,T,E,R,L,k,D,P,B,F,M,$,W,G,Q,X,J,Z,Y,ee,et,ea,er,en,ei,el,eo,ec,ed,eu=(0,o.c)(116),{copilotSpace:em}=e,ep=(0,u.Pk)(),{optedInToUserFeedback:ex}=ep,ef=(0,eN.b)(),eg=(0,A.zy)(),e_=(0,U.G)(),{updateGlobalNavigationBreadcrumbs:ey}=es(),eb=(0,eR.Z)(),[ej,eS]=(0,d.useState)(!1),[ev,eC]=(0,d.useState)(!1),[eT,eE]=(0,d.useState)(!1),[eF,eU]=(0,d.useState)(!1),[eM,e$]=(0,d.useState)(!1),[eW,ez]=(0,d.useState)(null),eV=(0,d.useRef)(null),eH=(0,d.useRef)(null),[eG,eq]=(0,d.useState)(null),eK=(0,d.useRef)(null),eQ=(0,d.useRef)(null),eX=eg.pathname,eJ=e_&&eX!==O.VR,eZ=w.W.copilotSpacesReadAccessToUserOwnedSpaces,eY=eZ&&w.W.copilotSpacesPublicAccessToUserOwnedSpaces,{data:e0}=(0,I.Ao)(e_),{mutateAsync:e1}=(0,I.$7)(),{copilotSpacesConfig:e2}=(0,h.X)(),{maxDescriptionLength:e3}=e2;e:if(eY)t=em??e0??null;else{let e;if(!e_){t=null;break e}eu[0]!==e_||eu[1]!==ep.customCopilots?(e=(0,N.JB)(ep.customCopilots,e_),eu[0]=e_,eu[1]=ep.customCopilots,eu[2]=e):e=eu[2],t=e}let e5=t,e6=e5?.ownerIsOrg&&e5?.adminable,e7=eZ&&!e5?.ownerIsOrg&&e_&&e5?.adminable,e8=e6||e7,e9=e5?.ownerIsOrg&&("none"!==e5.baseRole||e5.collaborative),te=!!(e5&&e_&&(e9||e5?.shared)),tt=(0,I.$W)(e_),{starCopilotSpace:ta,isLoading:ts}=((e,t)=>{let a,s,r,n,i,l,c,d=(0,o.c)(20),u=w.W.copilotSpacesReadAccessToUserOwnedSpaces&&w.W.copilotSpacesPublicAccessToUserOwnedSpaces,m=(0,eN.b)(),h=(0,eD.jE)(),{data:p}=(0,I.Ao)(e);d[0]!==e||d[1]!==h||d[2]!==t?(a=async()=>{if(!u&&e&&await h.invalidateQueries({queryKey:(0,ek.dp)(e)}),u&&t){let e={id:t.id,owner:t.owner};await h.invalidateQueries({queryKey:(0,ek.dp)(e)})}return h.invalidateQueries({queryKey:ek.O6})},d[0]=e,d[1]=h,d[2]=t,d[3]=a):a=d[3],d[4]!==p||d[5]!==e||d[6]!==m||d[7]!==t?(s=async a=>{let s=u?t:p;if(!s)return;let r=u?{id:s.id,owner:s.owner}:e,n=`${(0,N.Cb)(r)}/stars`,i=a.starred?"POST":"DELETE";if((await (0,eB.lS)(n,{method:i})).ok)return s={...s,starred:a.starred},m.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:s}),s},d[4]=p,d[5]=e,d[6]=m,d[7]=t,d[8]=s):s=d[8],d[9]!==a||d[10]!==s?(r={onSuccess:a,mutationFn:s},d[9]=a,d[10]=s,d[11]=r):r=d[11];let x=(0,eP.n)(r);d[12]!==x?({mutateAsync:l,isPending:n,...i}=x,d[12]=x,d[13]=n,d[14]=i,d[15]=l):(n=d[13],i=d[14],l=d[15]);let f=n||!u;return d[16]!==i||d[17]!==l||d[18]!==f?(c={starCopilotSpace:l,isLoading:f,...i},d[16]=i,d[17]=l,d[18]=f,d[19]=c):c=d[19],c})(e_,e5);eu[3]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{eU(!1),eS(!1),eC(!1),eE(!1),e$(!1)},eu[3]=a):a=eu[3],eu[4]!==e_?(s=[e_],eu[4]=e_,eu[5]=s):s=eu[5],(0,d.useEffect)(a,s),eu[6]!==ey?(r=()=>{ey()},n=[ey],eu[6]=ey,eu[7]=r,eu[8]=n):(r=eu[7],n=eu[8]),(0,d.useEffect)(r,n),eu[9]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{(0,g.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DUPLICATE_DIALOG_CLOSE",mode:"immersive"}),eU(!1)},eu[9]=i):i=eu[9];let tr=i;eu[10]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{(0,g.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_SHARE_DIALOG_CLOSE",mode:"immersive"}),eC(!1)},eu[10]=c):c=eu[10];let tn=c;eu[11]===Symbol.for("react.memo_cache_sentinel")?(m=()=>{(0,g.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DELETE_DIALOG_CLOSE",mode:"immersive"}),eS(!1)},eu[11]=m):m=eu[11];let tl=m;eu[12]===Symbol.for("react.memo_cache_sentinel")?(p=()=>{(0,g.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_REPORT_DIALOG_CLOSE",mode:"immersive"}),e$(!1)},eu[12]=p):p=eu[12];let to=p;eu[13]===Symbol.for("react.memo_cache_sentinel")?(x=()=>{(0,g.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_DUPLICATE",mode:"immersive"}),eU(!0)},eu[13]=x):x=eu[13];let tc=x;eu[14]===Symbol.for("react.memo_cache_sentinel")?(f=()=>{(0,g.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_SHARE",mode:"immersive"}),eC(!0)},eu[14]=f):f=eu[14];let tu=f;eu[15]===Symbol.for("react.memo_cache_sentinel")?(_=()=>{(0,g.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_DELETE",mode:"immersive"}),eS(!0)},eu[15]=_):_=eu[15];let tm=_;eu[16]===Symbol.for("react.memo_cache_sentinel")?(y=()=>{(0,g.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_REPORT",mode:"immersive"}),e$(!0)},eu[16]=y):y=eu[16];let tx=y;eu[17]!==e1||eu[18]!==eb||eu[19]!==e_?(b=async()=>{if(e_)try{await e1(e_),eS(!1),eb(O.VR)}catch(e){ez(e instanceof Error?e:Error(String(e))),tl()}},eu[17]=e1,eu[18]=eb,eu[19]=e_,eu[20]=b):b=eu[20];let tf=b;eu[21]!==e5||eu[22]!==ta?(j=()=>{e5&&ta&&((0,g.BI)("dotcom_chat.activate",{target:e5.starred?"SPACE_UNSTAR":"SPACE_STAR",mode:"immersive"}),ta({starred:!e5.starred}))},eu[21]=e5,eu[22]=ta,eu[23]=j):j=eu[23];let tg=j,t_=e5?.adminable;eu[24]!==t_?(S=t_&&(0,l.jsxs)(H.l.Item,{variant:"danger",onSelect:tm,children:[(0,l.jsx)(H.l.LeadingVisual,{children:(0,l.jsx)(z.TrashIcon,{})}),"Delete"]}),eu[24]=t_,eu[25]=S):S=eu[25];let ty=S;eu[26]!==e5?(v=e5&&(0,l.jsxs)(H.l.Item,{onSelect:tc,children:[(0,l.jsx)(H.l.LeadingVisual,{children:(0,l.jsx)(z.CopyIcon,{})}),"Duplicate"]}),eu[26]=e5,eu[27]=v):v=eu[27];let tb=v;eu[28]!==ty||eu[29]!==tb||eu[30]!==eJ||eu[31]!==ep.selectedThreadID?(C=eJ&&!ep.selectedThreadID&&(tb||ty)?(0,l.jsxs)(l.Fragment,{children:[tb,ty]}):null,eu[28]=ty,eu[29]=tb,eu[30]=eJ,eu[31]=ep.selectedThreadID,eu[32]=C):C=eu[32];let tj=C;eu[33]!==ex?(T=ex?(0,l.jsx)(q.Q,{variant:"link",onClick:()=>{eK.current?.openDialog(),(0,g.BI)("dotcom_chat.activate",{target:"USER_MENU_GIVE_FEEDBACK",mode:"immersive"})},children:"Give feedback"}):null,eu[33]=ex,eu[34]=T):T=eu[34];let tS=T;eu[35]!==e8?(E=e8&&(0,l.jsx)(K.K,{ref:eH,icon:z.ShareIcon,onClick:tu,variant:"invisible","aria-label":"Share space",...(0,eO.G)("share-space-button")}),eu[35]=e8,eu[36]=E):E=eu[36];let tv=E;eu[37]!==te?(R=w.W.copilotSpacesReportAbuse&&te&&(0,l.jsx)(K.K,{icon:z.ReportIcon,onClick:tx,variant:"invisible","aria-label":"Report space content",...(0,eO.G)("report-space-button")}),eu[37]=te,eu[38]=R):R=eu[38];let tC=R;eu[39]!==e5||eu[40]!==tg||eu[41]!==ts||eu[42]!==e_?(L=e5&&e_&&(0,l.jsx)(K.K,{ref:eV,onClick:tg,disabled:ts,icon:e5.starred?z.StarFillIcon:z.StarIcon,className:e5.starred?"SpacesHeader-module__starButton--RT51O":void 0,variant:"invisible","aria-label":e5.starred?"Unstar space":"Star space"}),eu[39]=e5,eu[40]=tg,eu[41]=ts,eu[42]=e_,eu[43]=L):L=eu[43];let tw=L;eu[44]===Symbol.for("react.memo_cache_sentinel")?(k=()=>{eK.current?.openDialog(),(0,g.BI)("dotcom_chat.activate",{target:"USER_MENU_GIVE_FEEDBACK",mode:"immersive"})},eu[44]=k):k=eu[44];let tN=k;eu[45]===Symbol.for("react.memo_cache_sentinel")?(D=(0,l.jsx)(K.K,{icon:z.BookIcon,as:"a",href:"https://docs.github.com/copilot/how-tos/provide-context/use-copilot-spaces/create-and-use-copilot-spaces","aria-label":"Copilot Spaces documentation",target:"_blank",rel:"noopener noreferrer",variant:"invisible",onClick:th,...(0,eO.G)("spaces-doc-link")}),eu[45]=D):D=eu[45],eu[46]!==tw||eu[47]!==tS||eu[48]!==tC||eu[49]!==tv?(P=(0,l.jsxs)(l.Fragment,{children:[tS,D,tv,tC,tw]}),eu[46]=tw,eu[47]=tS,eu[48]=tC,eu[49]=tv,eu[50]=P):P=eu[50];let tI=P;eu[51]===Symbol.for("react.memo_cache_sentinel")?(B=(0,l.jsxs)(H.l.LinkItem,{href:"https://docs.github.com/copilot/how-tos/provide-context/use-copilot-spaces/create-and-use-copilot-spaces",target:"_blank",rel:"noopener noreferrer",onSelect:tp,children:[(0,l.jsx)(H.l.LeadingVisual,{children:(0,l.jsx)(z.BookIcon,{})}),"Copilot Spaces documentation"]}),eu[51]=B):B=eu[51],eu[52]!==e8?(F=e8&&(0,l.jsxs)(H.l.Item,{onSelect:tu,children:[(0,l.jsx)(H.l.LeadingVisual,{children:(0,l.jsx)(z.ShareIcon,{})}),"Share space"]}),eu[52]=e8,eu[53]=F):F=eu[53],eu[54]!==te?(M=w.W.copilotSpacesReportAbuse&&te&&(0,l.jsxs)(H.l.Item,{onSelect:tx,children:[(0,l.jsx)(H.l.LeadingVisual,{children:(0,l.jsx)(z.ReportIcon,{})}),"Report space content"]}),eu[54]=te,eu[55]=M):M=eu[55],eu[56]!==e5||eu[57]!==tg||eu[58]!==ts||eu[59]!==e_?($=e5&&e_&&(0,l.jsxs)(H.l.Item,{onSelect:tg,disabled:ts,children:[(0,l.jsx)(H.l.LeadingVisual,{children:e5.starred?(0,l.jsx)(z.StarFillIcon,{}):(0,l.jsx)(z.StarIcon,{})}),e5.starred?"Unstar space":"Star space"]}),eu[56]=e5,eu[57]=tg,eu[58]=ts,eu[59]=e_,eu[60]=$):$=eu[60],eu[61]===Symbol.for("react.memo_cache_sentinel")?(W=(0,l.jsx)(H.l.Divider,{}),G=(0,l.jsx)(H.l.Item,{onSelect:tN,children:"Give feedback"}),eu[61]=W,eu[62]=G):(W=eu[61],G=eu[62]),eu[63]!==F||eu[64]!==M||eu[65]!==$?(Q=(0,l.jsxs)(l.Fragment,{children:[B,F,M,$,W,G]}),eu[63]=F,eu[64]=M,eu[65]=$,eu[66]=Q):Q=eu[66];let tT=Q;eu[67]!==tI?(X=(0,l.jsx)("div",{className:"SpacesHeader-module__hideOnMobile--YtpPv",children:tI}),eu[67]=tI,eu[68]=X):X=eu[68],eu[69]===Symbol.for("react.memo_cache_sentinel")?(J=(0,l.jsx)(V.W.Anchor,{children:(0,l.jsx)(K.K,{icon:z.KebabHorizontalIcon,"aria-label":"Space options",variant:"invisible"})}),eu[69]=J):J=eu[69],eu[70]!==tT?(Z=(0,l.jsx)("div",{className:"SpacesHeader-module__showOnMobile--pZ0cW",children:(0,l.jsxs)(V.W,{children:[J,(0,l.jsx)(V.W.Overlay,{children:(0,l.jsx)(H.l,{children:tT})})]})}),eu[70]=tT,eu[71]=Z):Z=eu[71],eu[72]!==X||eu[73]!==Z?(Y=(0,l.jsxs)(l.Fragment,{children:[X,Z]}),eu[72]=X,eu[73]=Z,eu[74]=Y):Y=eu[74];let tE=Y;eu[75]!==ef?(ee=e=>{ef.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:e})},eu[75]=ef,eu[76]=ee):ee=eu[76];let tA=ee,tO=e5?.name||"";return eu[77]!==tE||eu[78]!==tj||eu[79]!==tO?(et=(0,l.jsx)(eh,{showPreviewPaneButton:!1,conversationSpecificItems:tj,customButtons:tE,defaultName:tO,onBreadcrumbMenuRefReady:eq}),eu[77]=tE,eu[78]=tj,eu[79]=tO,eu[80]=et):et=eu[80],eu[81]!==eW?(ea=eW&&(0,l.jsxs)(eL.A,{variant:"danger",children:[(0,l.jsx)(z.AlertIcon,{}),"There was a problem deleting your space."]}),eu[81]=eW,eu[82]=ea):ea=eu[82],eu[83]!==eG||eu[84]!==e0||eu[85]!==eF?(er=eF&&e0?(0,l.jsx)(eI.D,{dialogTitle:"Duplicate Space",closeDialog:tr,initialSpace:e0,returnFocusRef:eG}):null,eu[83]=eG,eu[84]=e0,eu[85]=eF,eu[86]=er):er=eu[86],eu[87]!==eG||eu[88]!==tf||eu[89]!==e_||eu[90]!==ej?(en=ej&&e_?(0,l.jsx)(ti,{onCancel:tl,onConfirm:tf,returnFocusRef:eG}):null,eu[87]=eG,eu[88]=tf,eu[89]=e_,eu[90]=ej,eu[91]=en):en=eu[91],eu[92]!==e6||eu[93]!==e_||eu[94]!==ev||eu[95]!==e7?(ei=ev&&e_?(0,l.jsx)(e4,{closeDialog:tn,customCopilotId:e_,userOwned:!!(!e6&&e7),returnFocusRef:eH}):null,eu[92]=e6,eu[93]=e_,eu[94]=ev,eu[95]=e7,eu[96]=ei):ei=eu[96],eu[97]!==e5||eu[98]!==tA||eu[99]!==e3||eu[100]!==eT?(el=eT&&e5?(0,l.jsx)(td,{copilotSpace:e5,onClose:()=>eE(!1),returnFocusRef:eV,maxDescriptionLength:e3,onSaved:tA}):null,eu[97]=e5,eu[98]=tA,eu[99]=e3,eu[100]=eT,eu[101]=el):el=eu[101],eu[102]!==e5||eu[103]!==tt||eu[104]!==e_||eu[105]!==eM?(eo=eM&&e5&&e_?(0,l.jsx)(eA,{reportUrl:tt,onClose:to}):null,eu[102]=e5,eu[103]=tt,eu[104]=e_,eu[105]=eM,eu[106]=eo):eo=eu[106],eu[107]===Symbol.for("react.memo_cache_sentinel")?(ec=(0,l.jsx)(ew.l,{ref:eK,mode:"immersive",returnFocusRef:eQ}),eu[107]=ec):ec=eu[107],eu[108]!==et||eu[109]!==ea||eu[110]!==er||eu[111]!==en||eu[112]!==ei||eu[113]!==el||eu[114]!==eo?(ed=(0,l.jsxs)(l.Fragment,{children:[et,ea,er,en,ei,el,eo,ec]}),eu[108]=et,eu[109]=ea,eu[110]=er,eu[111]=en,eu[112]=ei,eu[113]=el,eu[114]=eo,eu[115]=ed):ed=eu[115],ed}function th(){return(0,g.BI)("copilot-spaces.click",{target:"HELP_BUTTON_CLICKED"})}function tp(){(0,g.BI)("copilot-spaces.click",{target:"HELP_BUTTON_CLICKED"})}try{tm.displayName||(tm.displayName="SpacesHeader")}catch{}var tx=a(97315),tf=a(93505),tg=a(81829),t_=a(79184),ty=a(96002),tb=a(51213),tj=a(53627),tS=a(26956),tv=a(75202),tC=a(19579),tw=a(91497),tN=a(62935),tI=a(13475);function tT(e){let t=!!w.W.copilotSpacesReadAccessToUserOwnedSpaces&&e.collaborative;if(!e.shareable)return"Private";if(t)return"Shared";switch(e.baseRole){case"custom_copilot_reader":case"custom_copilot_writer":case"custom_copilot_admin":return"Shared"}return"org_public"===e.visibility?"Shared":"Private"}var tE=a(22116),tA=a(35952);let tO=()=>{let e,t=(0,o.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"SpaceNotFoundComponent-module__container--IrGEt",children:[(0,l.jsx)(z.AlertIcon,{className:"SpaceNotFoundComponent-module__icon--dQYtq"}),(0,l.jsx)("h3",{children:"Space not found"}),(0,l.jsx)("p",{className:"SpaceNotFoundComponent-module__description--klDGL",children:"This URL may be incorrect, you're signed out of your organization, or the Space may have been deleted."})]})}),t[0]=e):e=t[0],e};try{tO.displayName||(tO.displayName="SpaceNotFoundComponent")}catch{}var tR=a(71363),tL=a(97564),tk=a(6219),tD=a(60905),tP=a(30456),tB=a(81075),tF=a(75735),tU=a(72439);let UploadableFileExtensions=class UploadableFileExtensions{static get text(){if(null!=(0,tB._)(this,UploadableFileExtensions,tM))return(0,tB._)(this,UploadableFileExtensions,tM);let e=[...tU.E.getTextFileExtensions().split(","),".babelrc",".conf",".eslintrc",".lock",".log",".npmrc",".prettierrc",".sum",".yarnrc"];return(0,tF._)(this,UploadableFileExtensions,tM,new Set(e.map(e=>e.toLowerCase()))),(0,tB._)(this,UploadableFileExtensions,tM)}static images(e){return new Set(tD.s.getFileExtensions(e).map(e=>e.toLowerCase()))}};var tM={writable:!0,value:void 0},t$=a(31971);let tW=()=>{let e,t,a,s,r=(0,o.c)(7);r[0]===Symbol.for("react.memo_cache_sentinel")?(e={mutationFn:tV},r[0]=e):e=r[0];let n=(0,eP.n)(e);return r[1]!==n?({mutateAsync:t,...a}=n,r[1]=n,r[2]=t,r[3]=a):(t=r[2],a=r[3]),r[4]!==t||r[5]!==a?(s={getCopilotSpaceResourceSizes:t,...a},r[4]=t,r[5]=a,r[6]=s):s=r[6],s};function tz(e){return{id:e.id,copilot_chat_attachment_id:e.copilotChatAttachmentId,resource_type:e.type,metadata:(0,t$.M)(e)}}async function tV(e){let t={resources:e.resources?.map(tz)},a=await (0,eB.lS)("/copilot/spaces/resource_sizes",{method:"POST",body:t}),s=await a.json();if(!a.ok)throw s.errorMessages;return s}function tH({onResourcesAdded:e,onError:t,onUploadingChange:a}){let{availableModels:s}=(0,u.Pk)(),{hydrateResourcesWithSizePercentages:r}=function(){let{getCopilotSpaceResourceSizes:e}=tW();return{hydrateResourcesWithSizePercentages:(0,d.useCallback)(async t=>{if(0===t.length)return;let a=await e({resources:t});for(let e of t)e.sizePercentage=a[e.id]??0},[e])}}();return{processFiles:(0,d.useCallback)(async(n,{source:i})=>{if(n&&0!==n.length){(function(e,{source:t}){for(let a of((0,g.BI)("copilot-spaces.selected_local_files",{fileCount:e.length,source:t}),Array.from(e))){let e=tG(a.name);(0,g.BI)("copilot-spaces.selected_local_file",{fileExtension:e,contentType:a.type,fileSize:a.size,source:t})}})(n,{source:i}),a?.(!0),t?.([]);try{var l,o;let a,{imageFiles:c,nonImageFiles:d}=(l=n,o=s,a=UploadableFileExtensions.images(o),Array.from(l).reduce((e,t)=>(!function(e,t){if(e.type.startsWith("image/"))return!0;let a=tG(e.name);return t.has(a)}(t,a)?e.nonImageFiles.push(t):e.imageFiles.push(t),e),{imageFiles:[],nonImageFiles:[]})),[u,m]=await Promise.all([tX(d),tK(c,s)]),h=[...u.resources,...m.resources];await r(h),h.length>0&&(e(h),(0,N.Pg)(h,i));let p=[...u.errorMessages,...m.errorMessages];p.length>0&&t?.(p)}catch{t?.(["Something went wrong while trying to add the files. Please try again."])}finally{a?.(!1)}}},[s,e,t,r,a])}}function tG(e){let t=e.split(".");return t.length>1?`.${t.pop()?.toLowerCase()??""}`:""}function tq(e){let t=[],a=[];for(let s of e)"fulfilled"===s.status?"resource"in s.value?t.push(s.value.resource):a.push(s.value.error):a.push("An unexpected error occurred while processing a file.");return{errorMessages:a,resources:t}}async function tK(e,t){if(0===e.length)return{errorMessages:[],resources:[]};if(!w.W.spacesImagesEnabled)return{errorMessages:["Images are not yet supported"],resources:[]};let a=e.map(e=>tQ(e,tD.s.getMimeTypes(t)));return tq(await Promise.allSettled(a))}async function tQ(e,t){try{if(e.size>tD.s.getAttachmentSizeLimit())return{error:t0(e.name)};if(!t.includes(e.type))return{error:tY(e.name)};let{id:a,attachment:s}=tD.s.makeImageReference(e,""),r=await s.prefetch();return{resource:{id:a,type:"media_content",mediaType:e.type,name:e.name||"Image",url:r.href||"",copilotChatAttachmentId:r.id||0,height:s.height||0,width:s.width||0,markedForDestroy:!1}}}catch(t){var a,s;return a=t,s=e,a instanceof Error&&"FileSizeError"===a.name?{error:t0(s.name)}:{error:tZ(s.name)}}}async function tX(e){if(0===e.length)return{errorMessages:[],resources:[]};let t=e.map(e=>tJ(e));return tq(await Promise.allSettled(t))}async function tJ(e){try{var t;if(!e.type.startsWith("text/")){let t=tG(e.name);if(!UploadableFileExtensions.text.has(t))return{error:tY(e.name)}}e=(t=e).type.startsWith("text/")?t:new File([t],t.name,{type:"text/plain"});let a=crypto.randomUUID(),s=await new tP.N(a,e).prefetch();return{resource:{id:a,type:"uploaded_text_file",name:e.name,copilotChatAttachmentId:s.id,url:s.href,markedForDestroy:!1}}}catch(r){var a=r,s=e;if(!(a instanceof tk.ZK))return{error:tZ(s.name)};let t=a.errors?.[0];return"string"==typeof t?{error:t}:{error:t?.message||tZ(s.name)}}}function tZ(e){return`An error occurred uploading "${e}".`}function tY(e){return`File "${e}" is not a supported file type.`}function t0(e){let t=function(e){if(e<0)throw Error("File size cannot be negative");if(!Number.isInteger(e))throw Error("File size must be a whole number of bytes");let t=["B","KB","MB","GB","TB","PB"],a=e,s=0;for(;a>=1024&&s<t.length-1;)a/=1024,s++;let r=Math.round(100*a)/100;return`${r}${t[s]}`}(tD.s.getAttachmentSizeLimit());return`File "${e}" is too large. The maximum size for this file type is ${t}.`}let t1=(0,d.forwardRef)(({onResourcesAdded:e,onError:t,onUploadingChange:a},s)=>{let{processFiles:r}=tH({onResourcesAdded:e,onError:t,onUploadingChange:a}),{availableModels:n}=(0,u.Pk)(),i=(0,d.useMemo)(()=>["text/*",...Array.from(UploadableFileExtensions.text),...w.W.spacesImagesEnabled?Array.from(UploadableFileExtensions.images(n)):[]].join(","),[n]),o=(0,d.useRef)(null);return(0,d.useImperativeHandle)(s,()=>({addResources:()=>o.current?.click()})),(0,l.jsx)("input",{"data-testid":"file-upload-input",ref:o,type:"file",accept:i,multiple:!0,style:{display:"none"},onChange:e=>{e.target.files&&(r(e.target.files,{source:"file-upload"}),e.target.value="")}})});t1.displayName="FileUploadInput";var t2=a(73017),t3=a(83494),t4=a(46747),t5=a(50467);let UrlDetails=class UrlDetails{constructor(e,t="",a="",s="",r=0,n="",i="",l="unknown"){(0,t5._)(this,"url",void 0),(0,t5._)(this,"owner",void 0),(0,t5._)(this,"repo",void 0),(0,t5._)(this,"number",void 0),(0,t5._)(this,"type",void 0),(0,t5._)(this,"id",void 0),(0,t5._)(this,"file_path",void 0),(0,t5._)(this,"errorMessage",void 0),(0,t5._)(this,"sha",void 0),this.id=e,this.url=t,this.owner=a,this.repo=s,this.number=r,this.type=l,this.file_path=i,this.sha=n}};function t6(e){return{id:e.id,resource_type:e.type,metadata:function(e){switch(e.type){case"github_issue":case"github_pull_request":return{owner:e.owner,repo:e.repo,number:e.number};case"github_file":return{owner:e.owner,repo:e.repo,file_path:e.file_path,sha:e.sha};default:throw Error("Unsupported resource")}}(e)}}async function t7(e){let{input:t,spaceOwner:a}=e,s={resources_attributes:t.map(t6),space_owner:a},r=await (0,eB.lS)("/copilot/spaces/validate_url_resources",{method:"POST",body:s}),n=await r.json();if(!r.ok)throw n;return n}function t8(e){let t,a,s,r,n,i,c,u,m,h,p,x,f,g,y,b,j,S,v,C,w,I,T,E=(0,o.c)(62),{onClose:A,onSave:O,resourcesToSave:R,owner:L,resourceCounts:k}=e,[D,P]=(0,d.useState)(!1),[B,F]=(0,d.useState)(at),[U,M]=(0,d.useState)(!1),[$,W]=(0,d.useState)(!1),{validateUrlResources:V}=((I=(0,o.c)(7))[0]===Symbol.for("react.memo_cache_sentinel")?(S={mutationFn:t7},I[0]=S):S=I[0],T=(0,eP.n)(S),I[1]!==T?({mutateAsync:C,...v}=T,I[1]=T,I[2]=v,I[3]=C):(v=I[2],C=I[3]),I[4]!==v||I[5]!==C?(w={validateUrlResources:C,...v},I[4]=v,I[5]=C,I[6]=w):w=I[6],w);if(E[0]!==D||E[1]!==A||E[2]!==O||E[3]!==L||E[4]!==R||E[5]!==B||E[6]!==V){let e;t=e=>{e?.preventDefault(),e?.stopPropagation(),D||(P(!0),s().finally(()=>{P(!1)}))},E[8]===Symbol.for("react.memo_cache_sentinel")?(e=function(e){if("github_file"===e.type){let t="nwo"in e?e.nwo:`${e.owner}/${e.repo}`,a=e.sha,s="filePath"in e?e.filePath:e.file_path;return`${t}/github_file/${a}/${s}`}if("github_issue"===e.type||"github_pull_request"===e.type){let t="nwo"in e?e.nwo:`${e.owner}/${e.repo}`,a=e.number,s=e.type;return`${t}/${a}/${s}`}return""},E[8]=e):e=E[8];let a=e,s=async()=>{let e,t;M(!1),W(!1);let s=(e=new Set(R?.map(e=>a(e))??[]),t=new Set,B.filter(s=>{let r=a(s);return!(t.has(r)||e.has(r))&&""!==s.url.trim()&&(t.add(r),!0)})),r=ae,n=s.filter(e=>"unknown"===e.type||L&&e.owner!==L||e.file_path&&!r(e.file_path));if(n.length>0){F(B.map(e=>L&&e.owner&&e.owner!==L?{...e,errorMessage:`This doesn't belong to the ${L} organization.`}:e.file_path&&!r(e.file_path)?{...e,errorMessage:"Unsupported file type"}:n.some(t=>t.id===e.id)?{...e,errorMessage:"Invalid URL"}:e)),M(!0);return}if(0===s.length)return void A();try{let e=await V({input:s,spaceOwner:L});O(e),(0,N.Pg)(e,"url-dialog"),A()}catch(e){if(Array.isArray(e)){for(let t of e){let e=B.find(e=>e.id===t.id);e&&(e.errorMessage="Resource not found")}M(!0)}}};E[0]=D,E[1]=A,E[2]=O,E[3]=L,E[4]=R,E[5]=B,E[6]=V,E[7]=t}else t=E[7];let H=!!k&&k.currentResourceCount+B.length+1>k.maxResourceCount;E[9]!==B||E[10]!==H?(a=()=>{H?W(!0):F([...B,new UrlDetails(crypto.randomUUID())])},E[9]=B,E[10]=H,E[11]=a):a=E[11];let G=a,K=$&&k?`You can select a maximum of ${k.maxResourceCount} sources.`:null;E[12]!==$||E[13]!==k?(s=e=>{$&&k&&(k.currentResourceCount+e.length>k.maxResourceCount||W(!1))},E[12]=$,E[13]=k,E[14]=s):s=E[14];let Q=s;E[15]!==Q||E[16]!==B?(r=e=>{let t=[...B];t.splice(e,1),F(t),Q(t)},E[15]=Q,E[16]=B,E[17]=r):r=E[17];let X=r;if(E[18]!==Q||E[19]!==B){n=(t,a)=>{let s=[...B],r=e(a,s[t]||new UrlDetails(crypto.randomUUID()));s[t]=r,F(s),Q(s)};let e=t9;E[18]=Q,E[19]=B,E[20]=n}else n=E[20];if(E[21]===Symbol.for("react.memo_cache_sentinel")?(i={narrow:"fullscreen"},E[21]=i):i=E[21],E[22]!==t||E[23]!==D||E[24]!==A||E[25]!==K?(c=()=>(0,l.jsxs)(ed.l.Footer,{children:[(0,l.jsx)("div",{className:"d-flex flex-items-center",children:K&&(0,l.jsx)(to.A.Validation,{variant:"error",children:K})}),(0,l.jsxs)("div",{className:"d-flex flex-row flex-justify-end gap-2",children:[(0,l.jsx)(q.Q,{onClick:A,children:"Cancel"}),(0,l.jsx)(q.Q,{variant:"primary",onClick:t,loadingAnnouncement:"Saving resource",loading:D,children:"Add"})]})]}),E[22]=t,E[23]=D,E[24]=A,E[25]=K,E[26]=c):c=E[26],E[27]!==U?(u=U&&(0,l.jsx)(_.l,{title:"Failed to save URL(s)",variant:"critical",className:"mb-2"}),E[27]=U,E[28]=u):u=E[28],E[29]!==L?(m=L&&(0,l.jsx)(t2.JR,{html:`from the <b>${L}</b> organization`}),E[29]=L,E[30]=m):m=E[30],E[31]!==m?(h=(0,l.jsxs)("p",{children:["Paste the URLs of the GitHub content"," ",m," you want to add. You can include issues and pull requests."]}),E[31]=m,E[32]=h):h=E[32],E[33]!==t?(p={"github:submit-form":()=>t()},E[33]=t,E[34]=p):p=E[34],E[35]!==U||E[36]!==n||E[37]!==X||E[38]!==B){let e;E[40]!==U||E[41]!==n||E[42]!==X||E[43]!==B.length?(e=(e,t)=>(0,l.jsxs)("div",{style:{width:"100%"},children:[(0,l.jsx)(aa,{index:t,removeUrlTextInputRow:X,inputCount:B.length,updateUrls:n,setIsUpdating:P,urlValue:e.url}),U&&void 0!==e.errorMessage&&(0,l.jsx)(to.A.Validation,{className:"mt-1",variant:"error",children:e.errorMessage})]},e.id),E[40]=U,E[41]=n,E[42]=X,E[43]=B.length,E[44]=e):e=E[44],x=B.map(e),E[35]=U,E[36]=n,E[37]=X,E[38]=B,E[39]=x}else x=E[39];return E[45]!==x?(f=(0,l.jsx)(eV.B,{direction:"vertical",align:"center",children:x}),E[45]=x,E[46]=f):f=E[46],E[47]!==t||E[48]!==f?(g=(0,l.jsx)("form",{onSubmit:t,children:f}),E[47]=t,E[48]=f,E[49]=g):g=E[49],E[50]!==g||E[51]!==p?(y=(0,l.jsx)(t3.tL,{commands:p,children:g}),E[50]=g,E[51]=p,E[52]=y):y=E[52],E[53]!==G?(b=(0,l.jsx)(q.Q,{leadingVisual:z.PlusIcon,className:"mt-3",onClick:G,children:"Add another"}),E[53]=G,E[54]=b):b=E[54],E[55]!==A||E[56]!==y||E[57]!==b||E[58]!==c||E[59]!==u||E[60]!==h?(j=(0,l.jsxs)(ed.l,{position:i,width:"large",title:"Add via GitHub URL",onClose:A,renderFooter:c,children:[u,h,y,b]}),E[55]=A,E[56]=y,E[57]=b,E[58]=c,E[59]=u,E[60]=h,E[61]=j):j=E[61],j}function t9(e,t){let a=e.match(/\/([^/]+)\/([^/]+)\/issues\/(\d+)/),s=e.match(/\/([^/]+)\/([^/]+)\/pull\/(\d+)/),r=e.match(/\/([^/]+)\/([^/]+)\/blob\/([^/]+)\/(.+)$/);return t.url=e,a?(t.owner=a[1]??"",t.repo=a[2]??"",t.number=parseInt(a[3]??"0",10),t.type="github_issue"):s?(t.owner=s[1]??"",t.repo=s[2]??"",t.number=parseInt(s[3]??"0",10),t.type="github_pull_request"):r&&(t.owner=r[1]??"",t.repo=r[2]??"",t.sha=r[3]??"",t.file_path=r[4]??"",t.type="github_file"),t}function ae(e){let t=e.replace(/\?.*/,"").replace(/#L\d+(-L\d+)?$/,"").match(/\.([^.]+)$/);if(!t)return!0;let a=`.${t[1]?.toLowerCase()}`;return UploadableFileExtensions.text.has(a)}function at(){return[new UrlDetails(crypto.randomUUID())]}function aa(e){let t,a,s,r,n,i,c,u=(0,o.c)(18),{index:m,removeUrlTextInputRow:h,inputCount:p,updateUrls:x,setIsUpdating:f,urlValue:g}=e,[_,y]=(0,d.useState)(g),[b,j]=(0,d.useState)(!1);u[0]!==g?(t=()=>{y(g)},a=[g],u[0]=g,u[1]=t,u[2]=a):(t=u[1],a=u[2]),(0,d.useEffect)(t,a);let S=e=>{let t=e.target.value;y(t),b||(j(!0),f(!0)),v(t)};u[3]!==m||u[4]!==f||u[5]!==x?(s=e=>{x(m,e),j(!1),f(!1)},u[3]=m,u[4]=f,u[5]=x,u[6]=s):s=u[6];let v=(0,t4.d)(s,400);return u[7]===Symbol.for("react.memo_cache_sentinel")?(r=(0,l.jsx)(to.A.Label,{visuallyHidden:!0,children:"URL"}),u[7]=r):r=u[7],u[8]!==S||u[9]!==_?(n=(0,l.jsx)(eq.A,{placeholder:"https://github.com/mona/playground/issues/123",value:_,onChange:S,className:"width-full"}),u[8]=S,u[9]=_,u[10]=n):n=u[10],u[11]!==m||u[12]!==p||u[13]!==h?(i=p>1&&(0,l.jsx)(K.K,{icon:z.TrashIcon,variant:"invisible","aria-label":"Remove url",className:"ml-2",onClick:()=>h(m)}),u[11]=m,u[12]=p,u[13]=h,u[14]=i):i=u[14],u[15]!==n||u[16]!==i?(c=(0,l.jsxs)(to.A,{className:"d-flex flex-row flex-justify-between flex-items-center width-full",children:[r,n,i]}),u[15]=n,u[16]=i,u[17]=c):c=u[17],c}try{t8.displayName||(t8.displayName="GitHubUrlDialog")}catch{}try{(s=AddUrlTextInputRow).displayName||(s.displayName="AddUrlTextInputRow")}catch{}try{aa.displayName||(aa.displayName="UrlTextInputRow")}catch{}var as=a(59788);function ar(e){let t,a,s,r=(0,o.c)(14),{isOpen:n,onClose:i,onResourcesAdded:c,owner:u,resourceCounts:m,initialRepo:p,onRepoSelect:x,hideBackButton:f}=e,g=(0,d.useRef)(null),{getCopilotSpaceResourceSizes:_}=tW(),{searchWorkerFilePath:y}=(0,h.X)();r[0]!==i||r[1]!==c||r[2]!==_?(t=async e=>{let t=e.filter(an);if(0===t.length)return void i();let a=await _({resources:t}),s=t.map(e=>{let t=a[e.id];return{...e,fileExists:!0,markedForDestroy:!1,sizePercentage:t}});c(s),(0,N.Pg)(s,"file-picker"),i()},r[0]=i,r[1]=c,r[2]=_,r[3]=t):t=r[3];let b=t;return n?(r[4]===Symbol.for("react.memo_cache_sentinel")?(a=[],r[4]=a):a=r[4],r[5]!==f||r[6]!==p||r[7]!==i||r[8]!==x||r[9]!==u||r[10]!==m||r[11]!==b||r[12]!==y?(s=(0,l.jsx)(as.Q,{formData:a,onCancel:i,onSaveFiles:b,findFileWorkerPath:y,attachmentButtonRef:g,owner:u,resourceCounts:m,initialRepo:p,onRepoSelect:x,hideBackButton:f,maxFileCount:50}),r[5]=f,r[6]=p,r[7]=i,r[8]=x,r[9]=u,r[10]=m,r[11]=b,r[12]=y,r[13]=s):s=r[13],s):null}function an(e){return"github_file"===e.type}try{ar.displayName||(ar.displayName="SpacesFilePicker")}catch{}let ai="TextFileDialog-module__grow--TUgOh";function al({sizePercentage:e,onClose:t,onSave:a,resource:s,readOnly:r=!1}){let{copilotSpacesConfig:{maxContentSize:n}}=(0,h.X)(),[i,o]=(0,d.useState)(s?.name||""),[c,u]=(0,d.useState)(s?.text||""),[m,p]=(0,d.useState)(!1),[x,f]=(0,d.useState)(""),[g,y]=(0,d.useState)(!1),b=s?.text??"",[j,S]=(0,d.useState)({}),{getCopilotSpaceResourceSizes:v}=tW(),C=async e=>{e?.preventDefault(),e?.stopPropagation();let r=!i.trim(),n=!c.trim();if(r||n)return void S(e=>({...e,"resources.name":r?"Name is required":"","resources.text":n?"Content is required":""}));p(!0),f("");try{let e={id:s?.id||Date.now().toString(),databaseId:s?.databaseId,type:"free_text",name:i,text:c,markedForDestroy:!1},r=await v({resources:[e]}),n={...e,sizePercentage:r[e.id]};a(n),(0,N.Pg)([n],"text-file-dialog"),t()}catch{f("An unexpected error occurred while validating the text file")}finally{p(!1)}};return(0,l.jsx)(ed.l,{position:{narrow:"fullscreen"},title:"Add text content",onClose:t,width:"xlarge",height:"large",renderBody:()=>(0,l.jsxs)("div",{className:"TextFileDialog-module__dialogBody--e27Cv",children:[x&&(0,l.jsx)(_.l,{variant:"critical",className:"mb-2",title:x}),(0,l.jsx)(t3.tL,{className:ai,commands:{"github:submit-form":()=>void C()},children:(0,l.jsxs)("form",{onSubmit:C,className:"TextFileDialog-module__form--BVMha",children:[(0,l.jsxs)(to.A,{required:!0,children:[(0,l.jsx)(to.A.Label,{children:"Name"}),(0,l.jsx)(eq.A,{block:!0,placeholder:"Give the file a title",value:i,onChange:e=>{o(e.target.value),S(e=>({...e,"resources.name":""}))},maxLength:1e3,validationStatus:j["resources.name"]?"error":void 0,...(0,eO.G)("text-file-name-input"),readOnly:r}),j["resources.name"]&&(0,l.jsx)(to.A.Validation,{variant:"error",children:j["resources.name"]})]}),(0,l.jsxs)(to.A,{required:!0,className:ai,children:[(0,l.jsx)(to.A.Label,{children:"Content"}),(0,l.jsx)(tc.Ay,{block:!0,name:"content",value:c,placeholder:"Enter content here",resize:"none",className:ai,onChange:e=>{u(e.target.value),S(e=>({...e,"resources.text":""}))},...(0,eO.G)("text-file-content-input"),readOnly:r}),j["resources.text"]?(0,l.jsx)(to.A.Validation,{variant:"error",children:j["resources.text"]}):void 0!==e&&(0,l.jsx)(ao,{text:c,percentage:e,resourceContent:b,setOverSpaceLimit:y,maxContentSize:n})]})]})})]}),renderFooter:()=>(0,l.jsxs)("div",{className:"TextFileDialog-module__footerContainer--A_bOn",children:[(0,l.jsx)(q.Q,{onClick:t,children:"Cancel"}),(0,l.jsx)(q.Q,{variant:"primary",onClickCapture:g?void 0:C,loadingAnnouncement:"Validating resource",inactive:g,loading:m,...(0,eO.G)("save-text-file-button"),disabled:r,children:"Add"})]})})}function ao(e){let t,a,s,r,n=(0,o.c)(11),{text:i,percentage:c,resourceContent:u,setOverSpaceLimit:m,maxContentSize:h}=e;n[0]!==u.length||n[1]!==i.length?(t=i.length>u.length?Math.abs(i.length-u.length):-Math.abs(i.length-u.length),n[0]=u.length,n[1]=i.length,n[2]=t):t=n[2];let p=c/100*h+t,x=Math.floor(p/h*100),f=p>h;if(n[3]!==m||n[4]!==f?(a=()=>{m(f)},s=[f,m],n[3]=m,n[4]=f,n[5]=a,n[6]=s):(a=n[5],s=n[6]),(0,d.useEffect)(a,s),f){let e,t=`Total percent used: ${x}%`;return n[7]!==t?(e=(0,l.jsx)(to.A.Validation,{variant:"error",children:t}),n[7]=t,n[8]=e):e=n[8],e}let g=`Total percent used: ${x}%`;return n[9]!==g?(r=(0,l.jsx)(to.A.Caption,{children:g}),n[9]=g,n[10]=r):r=n[10],r}try{al.displayName||(al.displayName="TextFileDialog")}catch{}try{ao.displayName||(ao.displayName="CharacterCount")}catch{}let ac=({children:e,onResourcesAdded:t,onError:a,owner:s,sizePercentage:r,resourcesToSave:n,resourceCounts:i,onUploadingChange:o,initialRepo:c,onRepoSelect:u})=>{let[m,h]=(0,d.useState)(!1),[p,x]=(0,d.useState)(!1),[f,_]=(0,d.useState)(!1),[y,b]=(0,d.useState)(!1),[j,S]=(0,d.useState)(),v=(0,d.useRef)(null),C=(0,d.useRef)(null),w=(0,d.useRef)(!1),N=(0,d.useCallback)(async e=>{if(e){w.current=!0,S(void 0);try{let a=await (0,tL.V)(e),s={type:"repository",id:`${a.id}`,repositoryId:a.id,nwo:`${a.ownerLogin}/${a.name}`,ownerAvatarUrl:a.ownerAvatarUrl,ownerType:a.ownerType,markedForDestroy:!1};t([s]),(0,g.BI)("copilot-spaces.click",{target:"SAVED_REPOSITORY_FROM_REPO_PICKER"}),u?.(a),b(!1)}catch(t){let e=t instanceof Error?t.message:"An unknown error occurred";S("Error: failed to attach repository. Please try again."),a?.([e])}finally{w.current=!1}}},[a,u,t]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t1,{ref:v,onResourcesAdded:t,onError:a,onUploadingChange:o}),(0,l.jsxs)(V.W,{anchorRef:C,children:[(0,l.jsx)(V.W.Anchor,{ref:C,children:e}),(0,l.jsx)(V.W.Overlay,{align:"end",width:"small",children:(0,l.jsxs)(H.l,{children:[(0,l.jsxs)(H.l.Group,{children:[(0,l.jsx)(H.l.GroupHeading,{children:"Repository"}),(0,l.jsxs)(H.l.Item,{onSelect:()=>{(0,g.BI)("copilot-spaces.click",{target:"ADD_REPOSITORY_BUTTON"}),S(void 0),b(!0)},children:[(0,l.jsx)(H.l.LeadingVisual,{children:(0,l.jsx)(z.RepoIcon,{...(0,eO.G)("add-repository-menu-item-icon")})}),"Add repository"]}),(0,l.jsxs)(H.l.Item,{onSelect:()=>{(0,g.BI)("copilot-spaces.click",{target:"ADD_GITHUB_FILES_BUTTON"}),x(!0)},children:[(0,l.jsx)(H.l.LeadingVisual,{children:(0,l.jsx)(z.FileCodeIcon,{...(0,eO.G)("add-github-files-menu-item-icon")})}),"Add files from repository"]}),(0,l.jsxs)(H.l.Item,{onSelect:()=>{(0,g.BI)("copilot-spaces.click",{target:"ADD_GITHUB_URL_BUTTON"}),_(!0)},children:[(0,l.jsx)(H.l.LeadingVisual,{children:(0,l.jsx)(z.LinkIcon,{})}),"Link files, pull requests, and issues"]})]}),(0,l.jsx)(H.l.Divider,{}),(0,l.jsxs)(H.l.Group,{children:[(0,l.jsx)(H.l.GroupHeading,{children:"Local"}),(0,l.jsxs)(H.l.Item,{onSelect:()=>{(0,g.BI)("copilot-spaces.click",{target:"LOCAL_FILE_UPLOAD"}),v.current?.addResources()},children:[(0,l.jsx)(H.l.LeadingVisual,{children:(0,l.jsx)(z.UploadIcon,{})}),"Upload a file"]}),(0,l.jsxs)(H.l.Item,{onSelect:()=>{(0,g.BI)("copilot-spaces.click",{target:"ADD_TEXT_FILE_BUTTON"}),h(!0)},children:[(0,l.jsx)(H.l.LeadingVisual,{children:(0,l.jsx)(z.PasteIcon,{...(0,eO.G)("add-text-file-menu-item-icon")})}),"Add text content"]})]})]})})]}),m&&(0,l.jsx)(al,{sizePercentage:r,onClose:()=>h(!1),onSave:e=>t([e])}),p&&(0,l.jsx)(ar,{isOpen:p,onClose:()=>x(!1),onResourcesAdded:t,owner:s,resourceCounts:i,initialRepo:c,onRepoSelect:u}),f&&(0,l.jsx)(t8,{onClose:()=>_(!1),onSave:e=>t(e),resourcesToSave:n,resourceCounts:i,owner:s}),y&&(0,l.jsx)(tR.X,{cancelReturnFocusRef:C,submitReturnFocusRef:C,open:y,onOpenChange:e=>{w.current||b(e)},selectedRepoIds:new Set,onSelectRepo:N,selectionVariant:"instant",description:"Select a repository to add to this space.",error:j,ownerDisplayLogin:s,includeForks:!0})]})};try{ac.displayName||(ac.displayName="AddAttachmentMenu")}catch{}function ad(e){return{id:e.databaseId,copilot_chat_attachment_id:e.copilotChatAttachmentId,resource_type:e.type,_destroy:!0,metadata:(0,t$.M)(e)}}function au(e){let t,a,s,r,n,i=(0,o.c)(11),{value:c}=e,d=c>100?"CircleProgressBar-module__exceeded--aEYra":"";i[0]!==d?(t=(0,eG.$)("CircleProgressBar-module__circleProgressBar--hRkI1",d),i[0]=d,i[1]=t):t=i[1];let u=`${c}%`;return i[2]!==u?(a={"--progress":u},i[2]=u,i[3]=a):a=i[3],i[4]===Symbol.for("react.memo_cache_sentinel")?(s={visibility:"hidden",height:0,width:0},i[4]=s):s=i[4],i[5]!==c?(r=(0,l.jsxs)("progress",{value:c,max:"100",style:s,children:[c,"%"]}),i[5]=c,i[6]=r):r=i[6],i[7]!==t||i[8]!==a||i[9]!==r?(n=(0,l.jsx)("div",{className:t,style:a,children:r}),i[7]=t,i[8]=a,i[9]=r,i[10]=n):n=i[10],n}try{au.displayName||(au.displayName="CircleProgressBar")}catch{}function am(e){let t,a,s,r,n=(0,o.c)(13),{value:i,maxLength:c,onSave:d,onCancel:u}=e,m=!!(c&&c>0),h=m&&i.length>(c||0);return n[0]!==c||n[1]!==m||n[2]!==i?(t=m&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(ap,{text:i,promptCharLimit:c||0}),(0,l.jsx)(ah,{})]}),n[0]=c,n[1]=m,n[2]=i,n[3]=t):t=n[3],n[4]!==u?(a=(0,l.jsx)(K.K,{className:"InlineEditActions-module__cancelButton--U8ZhR",variant:"invisible",icon:z.XIcon,"aria-label":"Cancel",size:"small",onClick:u}),n[4]=u,n[5]=a):a=n[5],n[6]!==d||n[7]!==h?(s=(0,l.jsx)(K.K,{className:"InlineEditActions-module__saveButton--gEB1L",variant:"invisible",icon:z.CheckIcon,"aria-label":"Save",disabled:h,size:"small",onClick:d}),n[6]=d,n[7]=h,n[8]=s):s=n[8],n[9]!==t||n[10]!==a||n[11]!==s?(r=(0,l.jsxs)("div",{className:"InlineEditActions-module__actionButtons--pTPNY",children:[t,a,s]}),n[9]=t,n[10]=a,n[11]=s,n[12]=r):r=n[12],r}let ah=()=>{let e,t=(0,o.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)("div",{className:"InlineEditActions-module__line--_RREL"}),t[0]=e):e=t[0],e};function ap(e){let t,a,s,r,n=(0,o.c)(9),{text:i,promptCharLimit:c}=e,d=i.length/c*100;n[0]!==d?(t=(0,l.jsx)(au,{value:d}),n[0]=d,n[1]=t):t=n[1];let u=c-i.length;return n[2]!==u?(a=u.toLocaleString(),n[2]=u,n[3]=a):a=n[3],n[4]!==a?(s=(0,l.jsx)("span",{className:"InlineEditActions-module__characterCountText--wZa2z",children:a}),n[4]=a,n[5]=s):s=n[5],n[6]!==t||n[7]!==s?(r=(0,l.jsxs)("div",{className:"InlineEditActions-module__characterCountStatus--5NnYz",children:[t,s]}),n[6]=t,n[7]=s,n[8]=r):r=n[8],r}try{am.displayName||(am.displayName="InlineEditActions")}catch{}try{ah.displayName||(ah.displayName="Line")}catch{}try{ap.displayName||(ap.displayName="CharacterCountStatus")}catch{}function ax(e){let t,a,s,r,n,i,c,u,m,h,p,x,f,g=(0,o.c)(40),{value:_,onChange:y,maxLength:b,placeholder:j,className:S,defaultEditing:v,ariaPrefix:C}=e,w=void 0===b?null:b,N=void 0===j?"":j,I=void 0===S?"":S,T=void 0===C?"":C,[E,A]=(0,d.useState)(void 0!==v&&v),[O,R]=(0,d.useState)(_),[L,k]=(0,d.useState)(null),D=(0,d.useRef)(null),P=(0,d.useRef)(null),B=(0,d.useRef)(null);g[0]!==O||g[1]!==E||g[2]!==y?(t=()=>{let e=e=>{E&&B.current&&!B.current.contains(e.target)&&(A(!1),y(O.trim()))};return E&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},a=[E,O,B,y],g[0]=O,g[1]=E,g[2]=y,g[3]=t,g[4]=a):(t=g[3],a=g[4]),(0,d.useEffect)(t,a),g[5]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{D.current&&k(D.current.offsetHeight)},g[5]=s):s=g[5],g[6]!==_?(r=[_],g[6]=_,g[7]=r):r=g[7],(0,d.useEffect)(s,r),g[8]!==E||g[9]!==L?(n=()=>{E&&P.current&&(P.current.focus(),P.current.style.height=`${L}px`)},i=[E,L],g[8]=E,g[9]=L,g[10]=n,g[11]=i):(n=g[10],i=g[11]),(0,d.useEffect)(n,i),g[12]!==O||g[13]!==y?(c=()=>{A(!1),y(O.trim())},g[12]=O,g[13]=y,g[14]=c):c=g[14];let F=c;g[15]!==_?(u=()=>{A(!1),R(_)},g[15]=_,g[16]=u):u=g[16];let U=u;g[17]!==F?(m=e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),F())},g[17]=F,g[18]=m):m=g[18];let M=m;return g[19]!==I?(h=(0,eG.$)("InlineEditableText-module__container--cFwHs",I),g[19]=I,g[20]=h):h=g[20],g[21]!==T||g[22]!==I||g[23]!==O||g[24]!==M||g[25]!==E||g[26]!==L||g[27]!==N||g[28]!==_?(p=E?(0,l.jsx)(tc.Ay,{ref:P,value:O,onChange:e=>R(e.target.value),onKeyDown:M,placeholder:N,className:"InlineEditableText-module__textarea--TLSf0",style:{height:L||"auto"},resize:"none"}):(0,l.jsxs)("button",{ref:D,onClick:()=>A(!0),"aria-label":`${T} ${_.trim()||N}. Activate to edit.`.trim(),className:"InlineEditableText-module__readModeContainer--WowEK",children:[(0,l.jsx)("span",{className:(0,eG.$)("InlineEditableText-module__readModeText--EolGT",I),children:_?.trim()||(0,l.jsx)("span",{className:"InlineEditableText-module__placeholder--cxzop",children:N})}),(0,l.jsx)(z.PencilIcon,{className:"InlineEditableText-module__editIcon--nVeiq",size:16})]}),g[21]=T,g[22]=I,g[23]=O,g[24]=M,g[25]=E,g[26]=L,g[27]=N,g[28]=_,g[29]=p):p=g[29],g[30]!==O||g[31]!==U||g[32]!==F||g[33]!==E||g[34]!==w?(x=E&&(0,l.jsx)(am,{value:O,maxLength:w,onSave:F,onCancel:U}),g[30]=O,g[31]=U,g[32]=F,g[33]=E,g[34]=w,g[35]=x):x=g[35],g[36]!==h||g[37]!==p||g[38]!==x?(f=(0,l.jsxs)("div",{ref:B,className:h,children:[p,x]}),g[36]=h,g[37]=p,g[38]=x,g[39]=f):f=g[39],f}try{ax.displayName||(ax.displayName="InlineEditableText")}catch{}var af=a(46720),ag=a(74753),a_=a(25744),ay=a(3803);function ab(e){let t=(0,o.c)(14),{attachment:a,className:s}=e;switch(a.type){case"github_file":{let e;return t[0]!==s?(e=(0,l.jsx)(z.FileIcon,{className:s}),t[0]=s,t[1]=e):e=t[1],e}case"free_text":{let e;return t[2]!==s?(e=(0,l.jsx)(z.PasteIcon,{className:s}),t[2]=s,t[3]=e):e=t[3],e}case"uploaded_text_file":{let e;return t[4]!==s?(e=(0,l.jsx)(z.FileIcon,{className:s}),t[4]=s,t[5]=e):e=t[5],e}case"github_issue":{let e;return t[6]!==s?(e=(0,l.jsx)(z.IssueOpenedIcon,{className:s}),t[6]=s,t[7]=e):e=t[7],e}case"github_pull_request":{let e;return t[8]!==s?(e=(0,l.jsx)(z.GitPullRequestIcon,{className:s}),t[8]=s,t[9]=e):e=t[9],e}case"media_content":{let e;return t[10]!==s?(e=(0,l.jsx)(z.ImageIcon,{className:s}),t[10]=s,t[11]=e):e=t[11],e}case"repository":{let e;return t[12]!==s?(e=(0,l.jsx)(z.RepoIcon,{className:s}),t[12]=s,t[13]=e):e=t[13],e}default:return null}}try{ab.displayName||(ab.displayName="AttachmentIcon")}catch{}let aj="AttachmentPreview-module__attachmentText--ELczx";function aS(e){let t=(0,o.c)(13),{attachment:a}=e;if(!a){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)("p",{className:aj,children:"No attachment selected."}),t[0]=e):e=t[0],e}switch(a.type){case"free_text":{let e;return t[1]!==a.text?(e=(0,l.jsx)("p",{className:aj,children:a.text}),t[1]=a.text,t[2]=e):e=t[2],e}case"media_content":{let e,s,r,n=`image: ${a.name}`;return t[3]!==a.url||t[4]!==n?(e=(0,l.jsx)("img",{alt:n,src:a.url}),t[3]=a.url,t[4]=n,t[5]=e):e=t[5],t[6]!==a.name||t[7]!==a.url?(s=(0,l.jsx)(q.Q,{onClick:()=>(function(e,t,a="image"){let s=document.createElement("a");s.href=e,s.setAttribute("download",t||a),document.body.appendChild(s),s.click(),document.body.removeChild(s)})(a.url,a.name),children:"Download"}),t[6]=a.name,t[7]=a.url,t[8]=s):s=t[8],t[9]!==e||t[10]!==s?(r=(0,l.jsxs)("div",{className:"AttachmentPreview-module__attachmentPreviewImage--hqleR",children:[e,s]}),t[9]=e,t[10]=s,t[11]=r):r=t[11],r}default:{let e;return t[12]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)("p",{children:"No preview available for this attachment."}),t[12]=e):e=t[12],e}}}try{aS.displayName||(aS.displayName="AttachmentPreview")}catch{}let av="ReferencesTable-module__referenceTitle--X4GB2",aC="ReferencesTable-module__referenceSubtitle--cUDlc",aw="ReferencesTable-module__referenceTitleLink--rezaS";function aN({resources:e,resourceCounts:t,onDeleteResources:a,onUpdateResource:s,sizePercentage:r,onResourcesAdded:n,owner:i,readOnly:o=!1}){let c=(0,d.useMemo)(()=>Object.values(e.reduce((e,t)=>{let a=aE(t);return{...e,[a]:t}},{})),[e]),[u,m]=(0,d.useState)(!1),[h,p]=(0,d.useState)(null),x=(0,d.useRef)(null),[f,g]=(0,d.useState)([]),_=(0,d.useCallback)(()=>{f.length>0&&(a(f),g([]))},[a,f]),y=(0,d.useCallback)(()=>{f.length>0?g([]):g(c)},[f,c]),b=(0,d.useMemo)(()=>{let e={id:"id",header:()=>(0,l.jsx)("span",{className:"ReferencesTable-module__headerText--HR4t9",children:f.length>0?`${f.length} selected`:`${c.length} ${1===c.length?"source":"sources"}`}),rowHeader:!0,renderCell:e=>{switch(e.type){case"github_file":{let{filePath:t,fileName:a,fileUrl:s,sha:r}=(0,N.q5)(e);return(0,l.jsxs)(eV.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,l.jsx)(ab,{attachment:e,className:"fgColor-muted"}),(0,l.jsxs)(eV.B,{gap:"none",children:[(0,l.jsx)("div",{children:e.fileExists?(0,l.jsxs)(eV.B,{direction:"horizontal",wrap:"wrap",children:[(0,l.jsx)(eH.A,{title:a,className:av,children:(0,l.jsx)(eT.A,{rel:"noopener",target:"_blank",href:s,className:aw,children:a})}),r&&(0,l.jsx)(G.A,{className:"ml-1",children:r.substring(0,7)})]}):(0,l.jsx)(eH.A,{title:a,className:av,children:a})}),(0,l.jsx)("div",{children:(0,l.jsx)(eH.A,{title:t,className:(0,eG.$)(aC,"fgColor-muted"),children:t})})]})]})}case"free_text":return(0,l.jsxs)(eV.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,l.jsx)(ab,{attachment:e,className:"fgColor-muted"}),(0,l.jsx)("div",{children:(0,l.jsx)(eH.A,{title:e.name,maxWidth:300,className:av,children:e.name})})]});case"repository":return(0,l.jsxs)(eV.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,l.jsx)(eW.r,{square:"Organization"===e.ownerType,src:e.ownerAvatarUrl}),(0,l.jsxs)(eV.B,{gap:"none",children:[(0,l.jsx)("div",{children:(0,l.jsx)(eH.A,{title:e.nwo,maxWidth:300,className:av,children:(0,l.jsx)(eT.A,{className:aw,href:`/${e.nwo}`,rel:"noopener noreferrer",target:"_blank",children:e.nwo})})}),!o&&(0,l.jsx)("div",{className:"ReferencesTable-module__repositoryWarning--obEpu",...(0,eO.G)("repo-warning"),children:"Spaces work best with specific files added."})]})]});case"uploaded_text_file":return(0,l.jsxs)(eV.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,l.jsx)(ab,{attachment:e,className:"fgColor-muted"}),(0,l.jsx)("div",{children:(0,l.jsx)(eH.A,{title:e.name,maxWidth:300,className:av,children:(0,l.jsx)(eT.A,{className:aw,href:e.url,download:e.name,children:e.name})})})]});case"github_pull_request":case"github_issue":return(0,l.jsxs)(eV.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,l.jsx)("span",{children:(0,l.jsx)(ab,{attachment:e,className:"fgColor-success"})}),(0,l.jsxs)(eV.B,{gap:"none",children:[(0,l.jsx)("div",{children:(0,l.jsx)(eH.A,{title:e.title||"",className:av,children:(0,l.jsxs)(eT.A,{rel:"noopener",target:"_blank",href:e.url,className:aw,children:[e.title," ",(0,l.jsx)("span",{className:"fgColor-muted text-light",children:`#${e.number}`})]})})}),(0,l.jsx)("div",{children:(0,l.jsx)(eH.A,{title:e.nwo||"",className:(0,eG.$)(aC,"fgColor-muted"),children:e.nwo})})]})]});case"media_content":return(0,l.jsxs)(eV.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,l.jsx)("span",{className:"fgColor-muted",children:(0,l.jsx)(ab,{attachment:e,className:"fgColor-muted"})}),(0,l.jsx)(eT.A,{as:"button",className:aw,ref:x,onClick:t=>{t.preventDefault(),p(e),m(!0)},"aria-haspopup":"dialog","aria-expanded":u,children:(0,l.jsx)(eH.A,{title:e.name,maxWidth:300,className:(0,eG.$)(av),children:e.name})})]});default:return null}}},d={id:"size",header:()=>(0,l.jsx)(ag.s,{children:"Size"}),align:"end",maxWidth:"auto",width:"growCollapse",renderCell:e=>(0,l.jsx)(aI,{row:e,onResourcesAdded:n,owner:i,resourceCounts:t})},h={id:"actions",header:()=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(ag.s,{children:"Actions"}),(0,l.jsx)(q.Q,{style:{visibility:f.length>0&&!o?"visible":"hidden"},size:"small","aria-label":"Remove selected resources",onClick:_,children:"Remove"})]}),maxWidth:"auto",align:"end",renderCell:e=>{let t="github_file"===e.type&&!e.fileExists;return(0,l.jsxs)(l.Fragment,{children:[t&&(0,l.jsx)(K.K,{className:"ReferencesTable-module__warningIcon--ZQ8GD",icon:z.AlertIcon,variant:"invisible",size:"small","aria-label":"This file no longer exists"}),(0,l.jsx)(aT,{row:e,onEdit:s,onDelete:e=>a([e]),sizePercentage:r,readOnly:o})]})}};return o?[e,d,h]:[{id:"select",header:()=>(0,l.jsx)(af.A,{checked:f.length===c.length,indeterminate:f.length>0&&f.length<c.length,"aria-label":"Select all sources",value:"default",onChange:y}),width:"auto",renderCell:e=>(0,l.jsx)(af.A,{checked:f.some(t=>t.id===e.id),"aria-label":"Select source",value:e.id,onChange:t=>{g(a=>t.target.checked?[...a,e]:a.filter(t=>t.id!==e.id))}})},e,d,h]},[f,c.length,y,u,_,s,r,n,i,a,o,t]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a_.X.Container,{children:(0,l.jsx)(ay.b,{"aria-labelledby":"references-title",cellPadding:"normal",data:c,columns:b})}),u&&h&&"media_content"===h.type&&(0,l.jsx)(ed.l,{onClose:()=>{p(null),m(!1)},position:{narrow:"fullscreen"},returnFocusRef:x,title:h.name,children:(0,l.jsx)(aS,{attachment:h})})]})}let aI=({row:e,onResourcesAdded:t,owner:a,resourceCounts:s})=>{let[r,n]=(0,d.useState)(!1),[i,o]=(0,d.useState)(null),[c,u]=(0,d.useState)(!1),m=(0,d.useRef)(null),h=async e=>{u(!0);try{let t=await (0,tL.V)(e);o(t),n(!0)}finally{u(!1)}};return"repository"===e.type?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(K.K,{variant:"invisible",className:"float-left",ref:m,loading:c,"aria-label":"Add specific files",onClick:async()=>{await h(e.repositoryId)},icon:z.PencilIcon}),r&&i&&(0,l.jsx)(ar,{resourceCounts:s,isOpen:r,onClose:()=>n(!1),onResourcesAdded:t,owner:a,initialRepo:i,hideBackButton:!0})]}):"sizePercentage"in e?(0,l.jsx)("span",{className:"fgColor-muted",children:e.sizePercentage&&e.sizePercentage<1?"<1%":`${Math.round(e.sizePercentage||0)}%`}):void 0},aT=({row:e,onDelete:t,onEdit:a,sizePercentage:s,readOnly:r=!1})=>{let[n,i]=(0,d.useState)(null),o="";switch(e.type){case"github_pull_request":case"github_issue":o=e.title;break;case"github_file":o=e.filePath;break;case"repository":o=e.nwo;break;case"free_text":case"uploaded_text_file":case"media_content":o=e.name}return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"d-md-none",children:(!r||r&&"free_text"===e.type)&&(0,l.jsxs)(V.W,{children:[(0,l.jsx)(V.W.Anchor,{children:(0,l.jsx)(K.K,{"aria-label":`Attachment actions: ${o}`,title:"Attachment actions",icon:z.KebabHorizontalIcon,variant:"invisible"})}),(0,l.jsx)(V.W.Overlay,{align:"end",children:(0,l.jsxs)(H.l,{children:["free_text"===e.type&&(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(H.l.Item,{"aria-label":`${r?"View":"Edit"} attachment: ${e.id}`,onSelect:()=>i(e),children:[(0,l.jsx)(H.l.LeadingVisual,{children:r?(0,l.jsx)(z.EyeIcon,{}):(0,l.jsx)(z.PencilIcon,{})}),r?"View":"Edit"]})}),!r&&(0,l.jsxs)(H.l.Item,{"aria-label":`Delete attachment: ${e.id}`,variant:"danger",onSelect:()=>t(e),children:[(0,l.jsx)(H.l.LeadingVisual,{children:(0,l.jsx)(z.TrashIcon,{})}),"Delete"]})]})})]})}),(0,l.jsxs)("div",{className:"d-none d-md-flex flex-md-row",children:["free_text"===e.type&&(0,l.jsx)(K.K,{onClick:()=>i(e),variant:"invisible","aria-label":r?"View":"Edit",icon:r?z.EyeIcon:z.PencilIcon}),!r&&(0,l.jsx)(K.K,{onClick:()=>t(e),variant:"invisible","aria-label":"Delete",icon:z.TrashIcon})]}),n&&(0,l.jsx)(al,{sizePercentage:s,resource:n,onSave:a,onClose:()=>i(null),readOnly:r})]})},aE=e=>{switch(e.type){case"github_file":return`${e.repositoryId}@${e.filePath}@${e.sha}`;case"github_issue":case"github_pull_request":return e.url;default:return String(e.id)}};try{aN.displayName||(aN.displayName="ReferencesTable")}catch{}try{aI.displayName||(aI.displayName="RowSize")}catch{}try{aT.displayName||(aT.displayName="RowActions")}catch{}var aA=a(58855),aO=a(81945);function aR(e){let t,a=(0,o.c)(3),{height:s,width:r}=e;return a[0]!==s||a[1]!==r?(t=(0,l.jsx)(aO.O,{animationStyle:"pulse",height:s,variant:"rounded",width:r,"data-testid":"skeleton"}),a[0]=s,a[1]=r,a[2]=t):t=a[2],t}function aL(){let e,t,a,s,r,n,i=(0,o.c)(6);return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(aR,{height:"22px",width:"10%"}),t=(0,l.jsx)(aR,{height:"42px",width:"40%"}),a=(0,l.jsx)(aR,{height:"32px",width:"60%"}),s=(0,l.jsx)(aR,{height:"105px",width:"100%"}),r=(0,l.jsx)(aR,{height:"125px",width:"100%"}),i[0]=e,i[1]=t,i[2]=a,i[3]=s,i[4]=r):(e=i[0],t=i[1],a=i[2],s=i[3],r=i[4]),i[5]===Symbol.for("react.memo_cache_sentinel")?(n=(0,l.jsx)("div",{className:"SpaceLoader-module__container--SdiaA",children:(0,l.jsx)("div",{role:"region","aria-label":"Loading space",className:"SpaceLoader-module__wrapper--fqS0s",children:(0,l.jsxs)(eV.B,{direction:"vertical",gap:"spacious",children:[e,t,a,s,r,(0,l.jsxs)(eV.B,{direction:"horizontal",className:"SpaceLoader-module__horizontalStack--Y6yoV",children:[(0,l.jsxs)(eV.B,{direction:"horizontal",gap:"normal",className:"SpaceLoader-module__leftGroup--IaK8B",children:[(0,l.jsx)(aR,{height:"32px",width:"30%"}),(0,l.jsx)(aR,{height:"32px",width:"40%"})]}),(0,l.jsx)(aR,{height:"32px",width:"17%"})]}),(0,l.jsx)(aR,{height:"300px",width:"100%"})]})})}),i[5]=n):n=i[5],n}try{aR.displayName||(aR.displayName="Skeleton")}catch{}try{aL.displayName||(aL.displayName="SpaceLoader")}catch{}let ak="InstructionsDialog-module__grow--mfJpQ";function aD({copilotSpace:e,onClose:t,onSaved:a,returnFocusRef:s}){let{upsertCopilotSpace:r,isPending:n}=(0,eM.$)(e),[i,o]=(0,d.useState)(e.generalInstructions??""),[c,u]=(0,d.useState)(null);async function m(){try{let e=await r({generalInstructions:i});a?.(e),t()}catch(e){e instanceof Error?u(e.message):u("Failed to save instructions")}}function h(){o(e.generalInstructions??""),t()}return(0,l.jsx)(ed.l,{width:"xlarge",height:"large",title:"Instructions",onClose:h,returnFocusRef:s,position:{narrow:"fullscreen"},renderBody:()=>(0,l.jsxs)("div",{className:"InstructionsDialog-module__instructionsContainer--tvd1E",children:[c&&(0,l.jsx)(_.l,{variant:"critical",title:c,className:"mb-2"}),(0,l.jsxs)(to.A,{className:ak,disabled:!e.editable,children:[(0,l.jsx)(to.A.Label,{visuallyHidden:!0,children:"Instructions"}),(0,l.jsx)(tc.Ay,{block:!0,value:i,onChange:e=>o(e.target.value),placeholder:"Define Copilot's role, focus, and what to avoid in this space. Ex. \u201CYou are a [role]. Follow our [framework/patterns] to [type of task]. Avoid [practices or tools] unless specified\u201D.",resize:"none",className:ak}),(0,l.jsx)(aP,{text:i,promptCharLimit:4e3})]})]}),renderFooter:()=>e.editable&&(0,l.jsx)(tl.m,{onCancel:h,onSave:m,isLoading:n,loadingAnnouncement:"Saving instructions",saveButtonText:"Save"})})}function aP(e){let t,a,s,r,n=(0,o.c)(10),{text:i,promptCharLimit:c}=e,d=i.length>c;n[0]!==i.length?(t=i.length.toLocaleString(),n[0]=i.length,n[1]=t):t=n[1],n[2]!==c?(a=c.toLocaleString(),n[2]=c,n[3]=a):a=n[3],n[4]!==t||n[5]!==a?(s=(0,l.jsxs)(l.Fragment,{children:[t," / ",a," characters"]}),n[4]=t,n[5]=a,n[6]=s):s=n[6];let u=s;return n[7]!==u||n[8]!==d?(r=d?(0,l.jsx)(to.A.Validation,{variant:"error",children:u}):(0,l.jsx)(to.A.Caption,{children:u}),n[7]=u,n[8]=d,n[9]=r):r=n[9],r}try{aD.displayName||(aD.displayName="InstructionsDialog")}catch{}try{aP.displayName||(aP.displayName="CharacterCount")}catch{}let aB="SpacesConversation-module__tabEmptyContainer--dnmPR",aF="SpacesConversation-module__tabEmptyTitle--Pw6Ln",aU="SpacesConversation-module__tabEmptyText--SxP9A";function aM({customCopilotId:e,selectedThreadID:t,textAreaRef:a}){let{currentTopic:s,messages:r,streamingMessage:n,ambientError:i,threads:c}=(0,u.Pk)(),m=(0,eN.b)(),[p]=(0,A.ok)(),x=(0,Y.G)(),f=(0,tA.j)(),{chatQuotaExceeded:g,isLicensedLimited:y}=(0,t_.xR)(),b=y&&g,[j,S]=(0,d.useState)(()=>p.get("tab")||"attachments"),[v,C]=(0,d.useState)(!1),[w,T]=(0,d.useState)(null),E=(0,d.useRef)(null),[O,R]=(0,d.useState)(null),[L,k]=(0,d.useState)([]),[D,P]=(0,d.useState)(null),[B,F]=(0,d.useState)(null),[U,M]=(0,d.useState)(!1),[W,V]=(0,d.useState)([]),[H,K]=(0,d.useState)(null),Q=(0,d.useRef)(null),X=(0,d.useRef)(s),J=r.length,Z=(0,tI.T)(X,J),{isPending:ee,data:et,error:ea}=(0,I.Ao)(e),{upsertCopilotSpace:es,error:er}=(0,eM.$)(O||void 0),{deleteCopilotSpaceResources:en,error:ei}=(e=>{let t,a,s,r,n,i,l,c=(0,o.c)(15),u=(0,eD.jE)(),[m,h]=(0,d.useState)(!1);c[0]!==e?(t={mutationFn:async t=>{if(!e)return;h(!0);let a=(0,N.fn)(e),s={custom_copilot:{resources_attributes:t.map(ad)}},r=await (0,eB.lS)(a,{method:"PUT",body:s}),n=await r.json();if(!r.ok&&404!==r.status)throw Error("Unable to delete resources.");return n}},c[0]=e,c[1]=t):t=c[1];let p=(0,eP.n)(t);return c[2]!==p?({mutateAsync:a,isPending:s,...r}=p,c[2]=p,c[3]=a,c[4]=s,c[5]=r):(a=c[3],s=c[4],r=c[5]),c[6]!==e||c[7]!==s||c[8]!==u||c[9]!==m?(n=()=>{e&&m&&!s&&(h(!1),u.invalidateQueries({queryKey:(0,ek.dp)(e)}))},i=[m,s,e,u],c[6]=e,c[7]=s,c[8]=u,c[9]=m,c[10]=n,c[11]=i):(n=c[10],i=c[11]),(0,d.useEffect)(n,i),c[12]!==a||c[13]!==r?(l={deleteCopilotSpaceResources:a,...r},c[12]=a,c[13]=r,c[14]=l):l=c[14],l})(O||void 0);(0,d.useEffect)(()=>{(0,$.D)(O?.name?`${O.name} \xb7 Spaces \xb7 GitHub Copilot`:"Spaces \xb7 GitHub Copilot")},[O?.name]),(0,d.useEffect)(()=>{if(W.length>0){let e=setTimeout(()=>{Q.current?.focus()},100);return()=>clearTimeout(e)}},[W]);let{processFiles:el}=tH({onResourcesAdded:e=>void eb(e),onError:V,onUploadingChange:M}),{copilotSpacesConfig:{maxResourceCount:eo,maxDescriptionLength:ec}}=(0,h.X)(),ed=er||ea||B||ei,eu=(0,d.useRef)(!1),em=L.filter(e=>!e.markedForDestroy).length,eh=(0,d.useMemo)(()=>O?m.sortAndFilterThreads(c,t=>t.customCopilotOwner===e.owner&&t.customCopilotID===e.id).slice(0,10):[],[c,e,m,O]),ep=(0,d.useMemo)(()=>O?O.resources.reduce((e,t)=>e+(t.sizePercentage||0),0):0,[O]);(0,d.useEffect)(()=>{et&&(R(et),k(e=>et.resources?.filter(t=>!e.find(e=>e.id===t.id&&e.markedForDestroy))||[]),m.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:et})),m.clearCurrentReferences(["image"])},[et,m]),(0,d.useEffect)(()=>()=>{eu.current||(m.clearCurrentReferences(),eu.current=!1)},[m,e]);let ex=(0,d.useCallback)(async e=>{eu.current=!0,await Z(e)},[Z]),ef=(0,d.useCallback)(e=>{S(e);let t=new URLSearchParams(window.location.search);t.set("tab",e),(0,tj.MM)(t)},[]),eg=(0,d.useCallback)(e=>{m.deleteThread(e)},[m]);async function e_(e){let t=[];if(k(a=>{for(let s of(t=[...a],e))t=s.databaseId?t.map(e=>s.databaseId===e.databaseId?{...e,markedForDestroy:!0}:e):t.filter(e=>e.id!==s.id);return t}),O)try{await en(e),F(null)}catch{k(t=>[...t,...e])}}async function ey(e){let t=[];if(k(a=>t=a.map(t=>t.id===e.id?e:t)),O)try{await es({...O,resources:t}),F(null)}catch{k(O.resources)}}let eb=(0,d.useCallback)(async e=>{let t=function(e,t){let a=new Map(e.map(e=>[e.id,e]));for(let s of t){if("repository"===s.type){let t=e.find(e=>"repository"===e.type&&e.repositoryId===s.repositoryId);if(t){a.set(t.id,{...t,markedForDestroy:!1});continue}}a.set(s.id,s)}return Array.from(a.values())}(L,e);k(t);try{await es({...O,resources:t}),F(null)}catch{O&&k(O.resources)}},[O,es,L]),ej=(0,d.useCallback)(()=>{F(`You can select a maximum of ${eo} sources`)},[eo]),eS=(0,d.useCallback)(e=>{el(e,{source:"drag-and-drop"})},[el]),ev=(0,d.useCallback)(async e=>{if(O&&e){P(e);try{let t=await es({name:e});R(t),m.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:t}),P(null),F(null)}catch{R(O),m.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:O}),P(null)}}},[O,es,m]),eC=(0,d.useCallback)(async e=>{if(O){R({...O,description:e});try{let t=await es({description:e});R(t),m.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:t})}catch{R(O),m.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:O})}}},[O,es,m]);if(ea instanceof I.OW||ea instanceof I.i9)return(0,l.jsx)(tO,{});if(ee||!O)return(0,l.jsx)(aL,{});let ew=O.ownerIsOrg&&!O.allowsPrivateReposFromOtherOrgs?O.owner:void 0,eI=D??O.name,eT=(0,N.Hh)(et);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(tv.t,{fallback:(0,l.jsx)(tE.x,{regionName:"This space"}),children:(0,l.jsxs)(tS.Zf.Container,{width:"small",children:[(0,l.jsxs)("div",{className:"SpacesConversation-module__header--GkfTQ",children:[(0,l.jsxs)("div",{className:"SpacesConversation-module__headerTopRow--vpBF1",children:[(0,l.jsx)("div",{children:(0,l.jsx)(G.A,{children:tT(O)})}),(0,l.jsx)(q.Q,{leadingVisual:z.McpIcon,as:"a",href:N.Ku,target:"_blank",rel:"noopener noreferrer",children:"Install MCP"})]}),(0,l.jsx)("h1",{children:O.editable?(0,l.jsx)(ax,{ariaPrefix:"Space name:",className:"SpacesConversation-module__titleText--czjJm",value:eI,onChange:ev}):(0,l.jsx)("span",{className:"SpacesConversation-module__text--v551F",children:eI})}),O.editable?(0,l.jsx)(ax,{className:"SpacesConversation-module__descriptionText--hYXsZ",placeholder:"Add a short description to explain this space's purpose (e.g., 'Frontend design system' or 'API docs hub').",ariaPrefix:"Space description:",value:O.description||"",maxLength:ec,onChange:eC}):O.description&&(0,l.jsx)("p",{className:"SpacesConversation-module__spaceDescription--nRmSr",children:O.description})]}),(0,l.jsxs)("div",{className:"SpacesConversation-module__chatInput--Nrvmc",children:[i&&(0,l.jsx)(tx.P,{ambientError:i}),eT&&(0,l.jsx)(aA.Sy,{}),!eT&&f.visible&&(0,l.jsx)(tA.I,{onDismiss:f.onDismiss}),!eT&&(0,l.jsxs)("div",{className:"SpacesConversation-module__inputSection--D3JWF",children:[(0,l.jsx)(tf.V,{textAreaRef:a,onSubmit:ex,isStreaming:!!n,size:"large",disabled:b,modes:[{name:tb.II.Ask,supportsMCP:!1,supportsAttachments:!0,supportsModelSwitching:!0,icon:z.SpaceIcon,placeholder:"How can I help you?"}],showPlanningToggle:!t,onNewThreadSelected:x},t),b&&(0,l.jsx)(ty.u,{})]})]}),(0,l.jsxs)("button",{ref:E,className:"SpacesConversation-module__instructions--t36Ks",onClick:()=>C(!0),"aria-haspopup":"dialog","aria-expanded":v,children:[(0,l.jsxs)("div",{className:"SpacesConversation-module__instructionsHeader--ynDM7",children:[(0,l.jsx)(z.SlidersIcon,{size:16,className:"SpacesConversation-module__instructionsIcon--KKXjS"}),(0,l.jsx)("h2",{className:"SpacesConversation-module__instructionsTitle--xAAKT",children:"Instructions"})]}),O.generalInstructions?(0,l.jsx)("p",{className:"SpacesConversation-module__instructionsContent--DYqhz",children:O.generalInstructions}):(0,l.jsx)("p",{className:"SpacesConversation-module__instructionsEmptyState--wlbTe",children:"Define Copilot\u2019s role, focus, and what to avoid in this space. Ex. \u201CYou are a [role]. Follow our [framework/patterns] to [type of task]. Avoid [practices or tools] unless specified\u201D."})]}),ed&&(0,l.jsx)(_.l,{title:B?"Maximum source count reached":"Failed to save space",variant:"critical",description:"string"==typeof ed?ed:"object"==typeof ed&&null!==ed&&"base"in ed?String(ed.base):ed instanceof Error?ed.message:"An error occurred"}),W.length>0&&(0,l.jsx)(aA.kX,{errorMessages:W,onDismiss:()=>V([]),bannerRef:Q}),(0,l.jsxs)("div",{className:"SpacesConversation-module__content--FPhr6",children:[(0,l.jsxs)("div",{className:"SpacesConversation-module__tabContainer--rTZgf",children:[(0,l.jsx)("div",{className:"SpacesConversation-module__underlineNav--qjoAn",children:(0,l.jsxs)(tC.O,{"aria-label":"Space content",children:[(0,l.jsx)(tC.O.Item,{as:"button","aria-current":"attachments"===j?"page":void 0,onSelect:()=>ef("attachments"),counter:em,children:"Sources"}),(0,l.jsx)(tC.O.Item,{as:"button","aria-current":"conversations"===j?"page":void 0,onSelect:()=>ef("conversations"),counter:eh.length,children:"Conversations"})]})}),(0,l.jsxs)(eV.B,{direction:"horizontal",align:"center",gap:"none",children:[ep>80&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(tw.z,{inline:!0,barSize:"small",progress:ep,className:"SpacesConversation-module__referencesSizeProgressBar--pRjZw","aria-hidden":"true"}),(0,l.jsx)("span",{className:"sr-only",children:`${Math.max(0,Math.round(100-ep))}% remaining attachment capacity`}),(0,l.jsxs)("span",{className:"SpacesConversation-module__referencesSizeText--buwhH",children:[ep<1?"<1":Math.round(ep),"%"]})]}),O.editable&&(0,l.jsx)("div",{className:"SpacesConversation-module__attachButton--Hr8sv",children:em>=eo?(0,l.jsx)(q.Q,{leadingVisual:z.PlusIcon,onClick:ej,children:"Add sources"}):(0,l.jsx)(ac,{sizePercentage:ep,owner:ew,onResourcesAdded:eb,resourcesToSave:L,resourceCounts:{currentResourceCount:em,maxResourceCount:eo},onError:V,initialRepo:H,onRepoSelect:K,onUploadingChange:e=>{e&&V([]),M(e)},children:(0,l.jsx)(q.Q,{leadingVisual:z.PlusIcon,children:"Add sources"})})})]})]}),(0,l.jsx)("div",{className:"SpacesConversation-module__tabContent--zCP1V",children:(()=>{if("attachments"===j){let e=L.filter(e=>!e.markedForDestroy);return e.length>0?(0,l.jsx)(aN,{resources:e,resourceCounts:{currentResourceCount:em,maxResourceCount:eo},sizePercentage:ep,onDeleteResources:e_,onUpdateResource:ey,onResourcesAdded:eb,readOnly:!O?.editable}):(0,l.jsxs)("div",{className:aB,children:[(0,l.jsx)(z.FileIcon,{size:24,className:"fgColor-muted mb-2"}),(0,l.jsx)("h2",{className:aF,children:O?.editable?"Add sources to get started":"Welcome"}),(0,l.jsx)("p",{className:aU,children:O?.editable?"Provide files, docs, issues, or repositories so Copilot can give more relevant answers.":"This space doesn't have any sources yet. Someone with edit access can add them."})]})}if("conversations"===j)return eh.length>0?(0,l.jsx)("ul",{role:"menu",className:"SpacesConversation-module__conversationsList--KLG2n",children:eh.map(e=>(0,l.jsx)(a$,{conversation:e,activeMenuConversationId:w,setActiveMenuConversationId:T,onDelete:eg},e.id))}):(0,l.jsxs)("div",{className:aB,children:[(0,l.jsx)("h2",{className:aF,children:"No conversations yet"}),(0,l.jsx)("p",{className:aU,children:"Start a new conversation in this space by typing in the input box at the top."})]})})()}),v&&(0,l.jsx)(aD,{copilotSpace:O,onClose:()=>C(!1),returnFocusRef:E,onSaved:e=>{R(e),m.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:e})}})]})]})}),(0,l.jsx)(tg.A,{onFilesDrop:eS,isUploading:U})]})}function a$({conversation:e,activeMenuConversationId:t,setActiveMenuConversationId:a,onDelete:s}){let r=(0,eR.Z)(),n=(0,O.CB)(e),i=`${O.Jz}/c/${e.id}`;return(0,l.jsxs)("li",{role:"menuitem",onClick:()=>r(i),onKeyDown:e=>{"Enter"===e.key&&r(i)},className:(0,eG.$)("SpacesConversation-module__conversationItem--kxjxw",null!==t&&"SpacesConversation-module__conversationItemMenuOpen--Z1mQR"),children:[(0,l.jsxs)("div",{className:"SpacesConversation-module__conversationItemLeftColumn--YsHsM",children:[(0,l.jsx)("div",{className:"SpacesConversation-module__conversationName--wbn54",children:n}),(0,l.jsxs)("div",{className:"SpacesConversation-module__conversationTimestamp--tcI92",children:[(0,l.jsx)(z.ClockIcon,{})," ",(0,l.jsx)(tN.A,{format:"relative",prefix:"",date:new Date(e.updatedAt)})]})]}),(0,l.jsxs)(V.W,{open:t===e.id,onOpenChange:t=>{a(t?e.id:null)},children:[(0,l.jsx)(V.W.Anchor,{children:(0,l.jsx)(K.K,{variant:"invisible","aria-label":"Conversation options",icon:z.KebabHorizontalIcon,onClick:e=>{e.stopPropagation()}})}),(0,l.jsx)(V.W.Overlay,{onClick:e=>e.stopPropagation(),align:"end",children:(0,l.jsx)(H.l,{children:(0,l.jsxs)(H.l.Item,{variant:"danger",onSelect:()=>s(e),children:[(0,l.jsx)(H.l.LeadingVisual,{children:(0,l.jsx)(z.TrashIcon,{})}),"Delete"]})})})]})]})}try{aM.displayName||(aM.displayName="SpacesConversation")}catch{}try{a$.displayName||(a$.displayName="ConversationItem")}catch{}var aW=a(4559),az=a(69599),aV=a(30388);function aH(e,t){var a=["name","description","owner"],s=!1;if(!t.trim())return!0;let r=s?t.trim():t.toLowerCase().trim();return a.some(t=>{let a;return null!=(a="function"==typeof t?t(e):e[t])&&(s?String(a):String(a).toLowerCase()).includes(r)})}var aG=a(21229),aq=a(82156);function aK(e){let t,a,s,r,n,i=(0,o.c)(9),{primary:c}=e,[u,m]=(0,d.useState)(!1);i[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{(0,g.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CREATE_DIALOG_CLOSE",mode:"immersive"}),m(!1)},i[0]=t):t=i[0];let h=t;i[1]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{(0,g.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CREATE_DIALOG_OPEN",mode:"immersive"}),m(!0)},i[1]=a):a=i[1];let p=a;i[2]!==u?(s=u?(0,l.jsx)(eI.D,{closeDialog:h,onSubmit:aQ}):null,i[2]=u,i[3]=s):s=i[3];let x=void 0!==c&&c?"primary":"default";return i[4]!==x?(r=(0,l.jsx)(q.Q,{variant:x,onClick:p,children:"Create space"}),i[4]=x,i[5]=r):r=i[5],i[6]!==s||i[7]!==r?(n=(0,l.jsxs)(l.Fragment,{children:[s,r]}),i[6]=s,i[7]=r,i[8]=n):n=i[8],n}function aQ(){(0,g.BI)("dotcom_chat.activate",{target:"COPILOT_SPACES_SPACE_CREATED",mode:"immersive"})}try{aK.displayName||(aK.displayName="CreateSpaceButton")}catch{}let aX="SpacesView-module__button--j38nS",aJ="SpacesView-module__counter--ZdDOv",aZ="SpacesView-module__metadataItem--rLi5j",aY="SpacesView-module__benefitSection--GRkgW",a0="SpacesView-module__benefitIcon--Pk9zH",a1="SpacesView-module__benefitTitle--NOGgu",a2="SpacesView-module__benefitDescription--FU6Sj";function a3(){return(0,l.jsx)(eT.A,{href:"https://docs.github.com/copilot/how-tos/provide-context/use-copilot-spaces/create-and-use-copilot-spaces",className:"mt-4 f5",target:"_blank",inline:!0,rel:"noopener noreferrer",children:"Need help? Read the docs"})}function a4({copilotSpace:e,onDelete:t,onClick:a}){let s=e.ownerIsOrg?z.OrganizationIcon:z.PersonIcon,r=tT(e),n="Shared"===r?z.PeopleIcon:z.LockIcon,i=e.adminable||e.editable;return(0,l.jsxs)(aV.qJ.Item,{href:(0,N.Cb)(e),onClick:a,children:[(0,l.jsx)(aV.qJ.Item.Title,{children:e.name}),(0,l.jsx)(aV.qJ.Item.Description,{children:(0,l.jsx)("div",{className:"SpacesView-module__description--IyY7g",children:e.description})}),(0,l.jsx)(aV.qJ.Item.Metadata,{children:(0,l.jsxs)("div",{className:"SpacesView-module__metadata--Sw1rv",children:[(0,l.jsxs)("span",{className:aZ,children:[(0,l.jsx)(s,{size:16}),e.owner]}),(0,l.jsxs)("span",{className:aZ,children:[(0,l.jsx)(n,{size:16}),r]})]})}),(i||w.W.copilotSpacesReportAbuse)&&(0,l.jsx)(aV.qJ.Item.Actions,{children:(0,l.jsx)(tr,{copilot:e,onDelete:t})})]})}function a5(){return(0,l.jsxs)("li",{children:[(0,l.jsxs)("div",{className:"my-8 d-flex flex-column gap-3 text-center",children:[(0,l.jsx)("h2",{className:"f3 fgColor-default",children:"Start your first space"}),(0,l.jsxs)("div",{className:"d-flex flex-items-center flex-column",children:[(0,l.jsx)(aK,{}),(0,l.jsx)(a3,{})]})]}),(0,l.jsxs)("div",{className:"SpacesView-module__benefitSections--ZQRGR",children:[(0,l.jsxs)("div",{className:aY,children:[(0,l.jsx)("div",{className:a0,children:(0,l.jsx)(z.CodeIcon,{size:16})}),(0,l.jsx)("h3",{className:a1,children:"Generate code"}),(0,l.jsx)("p",{className:a2,children:"Produce code that follows your team's patterns."})]}),(0,l.jsxs)("div",{className:aY,children:[(0,l.jsx)("div",{className:a0,children:(0,l.jsx)(z.BookIcon,{size:16})}),(0,l.jsx)("h3",{className:a1,children:"Share knowledge"}),(0,l.jsx)("p",{className:a2,children:"Centralize docs so your team can quickly find answers."})]}),(0,l.jsxs)("div",{className:aY,children:[(0,l.jsx)("div",{className:a0,children:(0,l.jsx)(z.ProjectIcon,{size:16})}),(0,l.jsx)("h3",{className:a1,children:"Plan projects"}),(0,l.jsx)("p",{className:a2,children:"Create requirements and issues your team can ship."})]})]})]})}let a6=e=>e.shared&&e.collaborative;function a7(){return(0,l.jsx)(aq.f,{width:"1.75em",height:"1.4em",className:aJ})}function a8({spaces:e,categorizedSpaces:t,starredSpaces:a,isLoading:s,categorizedLoading:r,spacesCounts:n,isCountsLoading:i,onDelete:o,onSpaceClick:c,searchQuery:u,currentUserLogin:m}){let h=el.Jt.getSpacesSelectedTab(),[p,x]=(0,d.useState)(h),f=(0,d.useCallback)(e=>{x(e),el.Jt.setSpacesSelectedTab(e)},[]),g=a&&a.length>0,_=w.W.copilotSpacesReadAccessToUserOwnedSpaces;(0,d.useEffect)(()=>{g&&f("starred")},[g,f]);let y=(0,d.useMemo)(()=>{if(!r)return s;switch(p){case"starred":return r.starred;case"personal":return r.userOwned;case"org":return r.orgOwned;case"shared":return r.sharedWithUser;default:return s}},[r,p,s]),b=(0,d.useMemo)(()=>{if(t)switch(p){case"starred":return t.starred;case"personal":return t.userOwned;case"org":return t.orgOwned;case"shared":return t.sharedWithUser;default:return}if(e)return e.filter(e=>"starred"===p&&e.starred||"personal"===p&&!e.ownerIsOrg&&!e.shared||"org"===p&&e.ownerIsOrg||!!_&&"shared"===p&&a6(e))},[t,e,p,_]),j=(0,d.useMemo)(()=>b?u.trim()?b.filter(e=>aH(e,u)):b:[],[b,u]),{personalSpacesCount:S,orgSpacesCount:v,starredSpacesCount:C,sharedSpacesCount:N}=(0,d.useMemo)(()=>{if(n&&!u.trim())return{personalSpacesCount:n.user_owned_spaces,orgSpacesCount:n.org_owned_spaces,starredSpacesCount:n.starred_spaces,sharedSpacesCount:_?n.shared_with_me_spaces:0};if(t){let e=e=>e?u.trim()?e.filter(e=>aH(e,u)).length:e.length:0;return{personalSpacesCount:e(t.userOwned),orgSpacesCount:e(t.orgOwned),starredSpacesCount:e(t.starred),sharedSpacesCount:_?e(t.sharedWithUser):0}}if(!e)return{personalSpacesCount:0,orgSpacesCount:0,starredSpacesCount:0,sharedSpacesCount:0};let a=u.trim()?e.filter(e=>aH(e,u)):e;return{personalSpacesCount:a.filter(e=>!e.ownerIsOrg&&!e.shared).length,orgSpacesCount:a.filter(e=>e.ownerIsOrg).length,starredSpacesCount:a.filter(e=>e.starred).length,sharedSpacesCount:_?a.filter(a6).length:0}},[n,t,e,u,_]),I=(0,d.useCallback)(()=>n?n.starred_spaces+n.user_owned_spaces+n.org_owned_spaces+n.shared_with_me_spaces:t?(t.starred?.length??0)+(t.userOwned?.length??0)+(t.orgOwned?.length??0)+(t.sharedWithUser?.length??0):e?.length??0,[n,t,e]),T=(0,d.useCallback)(()=>t?[...t.starred??[],...t.userOwned??[],...t.orgOwned??[],...t.sharedWithUser??[]]:e??[],[t,e]),E=I()>0,A=(0,d.useMemo)(()=>{let e=T();return e.length>0&&!e.some(e=>e.creator===m)&&!y},[T,m,y]),O=E&&j?.length===0&&!y;return(0,d.useEffect)(()=>{if(y||!u.trim())return;let e=j.length,t=0===e?"No spaces found.":`${e} ${1===e?"space":"spaces"} found.`;(0,aW.i)(t)},[j.length,u,y]),(0,l.jsxs)(aV.qJ,{children:[(0,l.jsx)(aV.qJ.Header,{children:(0,l.jsxs)("div",{role:"tablist","aria-label":"Filter spaces",className:"SpacesView-module__filterButtons--qTV2E",children:[(0,l.jsxs)("button",{onClick:()=>f("starred"),role:"tab","aria-selected":"starred"===p,"aria-controls":"spaces-list",id:"starred-tab",className:aX,children:["Starred"," ",i&&!u?(0,l.jsx)(a7,{}):(0,l.jsx)("span",{className:aJ,children:C})]}),(0,l.jsxs)("button",{onClick:()=>f("personal"),role:"tab","aria-selected":"personal"===p,"aria-controls":"spaces-list",id:"personal-tab",className:aX,children:["Yours"," ",i&&!u?(0,l.jsx)(a7,{}):(0,l.jsx)("span",{className:aJ,children:S})]}),_&&(0,l.jsxs)("button",{onClick:()=>f("shared"),role:"tab","aria-selected":"shared"===p,"aria-controls":"spaces-list",id:"shared-with-me-tab",className:(0,eG.$)(aX,"SpacesView-module__sharedSpacesTab--dS9e3"),children:["Shared with me"," ",i&&!u?(0,l.jsx)(a7,{}):(0,l.jsx)("span",{className:aJ,children:N})]}),(0,l.jsxs)("button",{onClick:()=>f("org"),role:"tab","aria-selected":"org"===p,"aria-controls":"spaces-list",id:"org-tab",className:aX,children:["Organizations"," ",i&&!u?(0,l.jsx)(a7,{}):(0,l.jsx)("span",{className:aJ,children:v})]})]})}),(0,l.jsx)(aV.qJ.List,{loading:y,id:"spaces-list","aria-labelledby":p,children:E||y?A&&"personal"===p?(0,l.jsx)(a5,{}):O?(0,l.jsxs)(aV.qJ.EmptyState,{children:[(0,l.jsxs)("p",{children:["starred"===p&&"Spaces you star will appear here.","personal"===p&&"Spaces you create will appear here.","org"===p&&"Spaces belonging to your organizations will appear here.","shared"===p&&"Shared spaces will appear here."]}),(0,l.jsx)(aK,{}),(0,l.jsx)(a3,{})]}):j?.map(e=>(0,l.jsx)(a4,{copilotSpace:e,onDelete:()=>o(e),onClick:c},e.owner?`${e.owner}/${e.id}`:e.id)):(0,l.jsx)(a5,{})})]})}function a9({copilotSpaces:e}){let t=(0,u.Pk)(),a=(0,az.G7)("copilot_spaces_split_index_calls"),{categorizedSpaces:s,categorizedLoading:r}=(0,I.yk)(a),[n,i]=(0,d.useState)(null),[o,c]=(0,d.useState)(""),m=el.Jt.getSpacesMcpBannerDismissalCount(),[h,p]=(0,d.useState)(m<2),{data:x,isLoading:f}=(0,I.a5)(a),y=void 0===e,b=a?s?.starred:e?.filter(e=>e.starred),{mutateAsync:j}=(0,I.$7)(),S=async e=>{try{await j(e),i(null)}catch(e){i(e instanceof Error?e:Error(String(e)))}};return(0,l.jsxs)(tv.t,{fallback:(0,l.jsx)(tE.x,{regionName:"Spaces"}),children:[n&&(0,l.jsxs)(eL.A,{variant:"danger",children:[(0,l.jsx)(z.AlertIcon,{}),"There was a problem deleting your space."]}),(0,l.jsxs)(tS.Zf.Container,{width:"small",children:[h&&(0,l.jsx)(tS.Zf.Banner,{children:(0,l.jsx)(_.l,{title:"Try Spaces in VSCode",hideTitle:!0,icon:(0,l.jsx)(z.McpIcon,{}),description:"Spaces are now available through the GitHub MCP in VSCode.",variant:"upsell",primaryAction:(0,l.jsx)(_.l.PrimaryAction,{as:"a",href:N.Ku,target:"_blank",rel:"noopener noreferrer",children:"Install"}),onDismiss:()=>{let e;e=el.Jt.getSpacesMcpBannerDismissalCount(),el.Jt.setSpacesMcpBannerDismissalCount(e+1),p(!1)}})}),(0,l.jsxs)(tS.Zf.Header,{children:[(0,l.jsx)(tS.Zf.Title,{children:"Spaces"}),(0,l.jsx)(tS.Zf.Description,{children:"Spaces organize your files, pull requests, issues, and standards so Copilot can give more relevant help for your work."}),(0,l.jsx)(tS.Zf.Actions,{children:(0,l.jsx)(aK,{primary:!0})})]}),(0,l.jsx)(aG.D,{onSearch:c,"aria-label":"Search spaces"}),(0,l.jsx)(tS.Zf.Section,{children:(0,l.jsx)(a8,{spaces:e,categorizedSpaces:a?s:void 0,starredSpaces:b,isLoading:y,categorizedLoading:a?r:void 0,spacesCounts:x,isCountsLoading:f,onDelete:S,onSpaceClick:()=>{(0,g.BI)("dotcom_chat.activate",{target:"SPACES_VIEW_SPACE_SELECTED",mode:"immersive"})},searchQuery:o,currentUserLogin:t.currentUserLogin})})]})]})}try{a3.displayName||(a3.displayName="DocsLink")}catch{}try{a4.displayName||(a4.displayName="SpacesListItem")}catch{}try{a5.displayName||(a5.displayName="FirstSpaceEmptyState")}catch{}try{a7.displayName||(a7.displayName="CounterSkeleton")}catch{}try{a8.displayName||(a8.displayName="SpacesList")}catch{}try{a9.displayName||(a9.displayName="SpacesView")}catch{}function se(){let e,t,a,s,r,n,i,c,m,h,p,x,f,g,_=(0,o.c)(52),y=(0,u.Pk)(),{customCopilots:b}=y,j=(0,T.U)(),F=(0,v.v)(),U=(0,A.zy)(),M=(0,I.BV)(),$=(0,N.y_)(),W=M&&$,z=(0,N.iI)(),{isNarrowViewport:V}=(0,L.B)();(0,I.e9)(M),function(){let e,t=(0,u.Pk)(),{referenceId:a,messageIndex:s}=(e=(0,A.zy)(),(0,d.useMemo)(()=>{let t=new URLSearchParams(e.search),a=t.get("reference_id"),s=t.get("message_index"),r=null;if(null!==s){let e=parseInt(s,10);isNaN(e)||(r=e)}return{referenceId:a,messageIndex:r}},[e.search])),[,r]=(0,A.ok)(),{isNarrowViewport:n}=(0,L.B)(),i=(0,d.useMemo)(()=>t.messages??[],[t.messages]),l=(0,d.useMemo)(()=>null!==s&&s>=0&&s<i.length?i[s]:null,[i,s]),o=(0,d.useMemo)(()=>l?.references??t.currentReferences??[],[l?.references,t.currentReferences]),c=(0,d.useMemo)(()=>a&&o.length?o.find(e=>(0,O.Vb)(e)===a)??null:null,[a,o]),m=(0,R.I)({messageIndex:s??i.length,messageId:l?.id,messageTimestamp:l?.createdAt});(0,d.useEffect)(()=>{c&&(n||m(c),r(e=>{let t=new URLSearchParams(e);return t.delete("reference_id"),t.delete("message_index"),t}))},[c,n,m,r])}();let H=(0,P.tZ)(),G=(0,P.wI)(),{closePreviewPane:q,openPreviewPane:K,closeResourcePanel:Q,openResourcePanel:X}=(0,P.xx)();_[0]!==q||_[1]!==K?(e=e=>{e?K():q()},_[0]=q,_[1]=K,_[2]=e):e=_[2];let J=e;_[3]!==Q||_[4]!==X?(t=e=>{e?X():Q()},_[3]=Q,_[4]=X,_[5]=t):t=_[5];let Z=t;_[6]!==F||_[7]!==U?(a=(0,C.bG)(F,U),_[6]=F,_[7]=U,_[8]=a):a=_[8];let Y=a;if(F&&Y){let e,t,a=Y.Component;return _[9]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)("span",{"data-favicon-override":k.i}),_[9]=e):e=_[9],_[10]!==a||_[11]!==F||_[12]!==y?(t=(0,l.jsxs)(l.Fragment,{children:[e,(0,l.jsx)(d.Suspense,{children:(0,l.jsx)(a,{chatState:y,plugin:F})})]}),_[10]=a,_[11]=F,_[12]=y,_[13]=t):t=_[13],t}_[14]!==z||_[15]!==b||_[16]!==W||_[17]!==y.selectedThreadID||_[18]!==j?(s=W?(0,l.jsx)(a9,{copilotSpaces:b}):z?(0,l.jsx)(aM,{customCopilotId:z,selectedThreadID:y.selectedThreadID,textAreaRef:j}):null,_[14]=z,_[15]=b,_[16]=W,_[17]=y.selectedThreadID,_[18]=j,_[19]=s):s=_[19];let ee=s;if(ee){let e,t,a;return _[20]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(E.P.Header,{children:(0,l.jsx)(tm,{})}),_[20]=e):e=_[20],_[21]===Symbol.for("react.memo_cache_sentinel")?(t=(0,l.jsx)(E.P.Sidebar,{children:(0,l.jsx)(S.U,{})}),_[21]=t):t=_[21],_[22]!==ee?(a=(0,l.jsxs)(E.P,{"data-testid":"chat-layout","data-hpc":!0,faviconOverride:k.i,slimLineTopTabs:w.W.copilotWorkbenchSlimLineTopTabs,children:[e,t,(0,l.jsx)(E.P.ColumnLeft,{children:ee})]}),_[22]=ee,_[23]=a):a=_[23],a}_[24]!==H||_[25]!==J?(r=[H,J],_[24]=H,_[25]=J,_[26]=r):r=_[26],_[27]!==G||_[28]!==Z?(n=[G,Z],_[27]=G,_[28]=Z,_[29]=n):n=_[29],_[30]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.jsx)(E.P.Sidebar,{children:(0,l.jsx)(S.U,{})}),_[30]=i):i=_[30],_[31]!==y.selectedThreadID?(c=!y.selectedThreadID&&(0,l.jsx)(eS,{}),_[31]=y.selectedThreadID,_[32]=c):c=_[32],_[33]!==c?(m=(0,l.jsx)(E.P.Header,{children:(0,l.jsx)(eh,{customButtons:c})}),_[33]=c,_[34]=m):m=_[34];let et=w.W.stableConversationView?void 0:y.selectedThreadID;return _[35]!==V||_[36]!==et||_[37]!==j?(h=(0,l.jsx)(E.P.ColumnLeft,{children:(0,l.jsx)(B.L,{isMobile:V,textAreaRef:j},et)}),_[35]=V,_[36]=et,_[37]=j,_[38]=h):h=_[38],_[39]!==G?(p=w.W.copilotResourcePanel&&G&&(0,l.jsx)(eC.R,{}),_[39]=G,_[40]=p):p=_[40],_[41]!==j?(x=(0,l.jsx)(D.U,{returnFocusRef:j}),_[41]=j,_[42]=x):x=_[42],_[43]!==p||_[44]!==x?(f=(0,l.jsxs)(E.P.ColumnRight,{className:"d-flex",children:[p,x]}),_[43]=p,_[44]=x,_[45]=f):f=_[45],_[46]!==h||_[47]!==f||_[48]!==r||_[49]!==n||_[50]!==m?(g=(0,l.jsxs)(E.P,{"data-testid":"chat-layout","data-hpc":!0,faviconOverride:k.i,secondaryColumnState:r,resourcePanelState:n,slimLineTopTabs:w.W.copilotWorkbenchSlimLineTopTabs,children:[i,m,h,f]}),_[46]=h,_[47]=f,_[48]=r,_[49]=n,_[50]=m,_[51]=g):g=_[51],g}try{se.displayName||(se.displayName="Layout")}catch{}var st=a(31223),sa=a(40235);let ss=(0,p.E7)();function sr(){let e,t=(0,o.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(p.mf,{environment:ss,children:(0,l.jsx)(sn,{})}),t[0]=e):e=t[0],e}function sn(){let e=(0,o.c)(4),t=(0,h.X)();if(t?.copilotChatSettingEnabled){let a,s;return e[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,l.jsx)(si,{}),e[0]=a):a=e[0],e[1]!==t?(s=(0,l.jsx)(x.K,{payload:t,children:a}),e[1]=t,e[2]=s):s=e[2],s}{let t;return e[3]===Symbol.for("react.memo_cache_sentinel")?(t=(0,l.jsx)(b,{}),e[3]=t):t=e[3],t}}function si(){let e,t,a,s,r,n=(0,o.c)(1);return!function(){let e,t,a=(0,o.c)(7),s=(0,Z.g)(),r=(0,d.useRef)(!0),n=(0,d.useRef)(null),i=(0,eN.b)(),{threads:l,selectedThreadID:c}=(0,u.Pk)(),m=(0,J.H)();!function(){let{selectedThreadID:e,sharedThreadChannel:t}=(0,u.Pk)(),a=(0,eN.b)();(0,sa.x)(t,()=>{a.fetchSharedThreadMessages(e)})}(),a[0]!==m||a[1]!==i||a[2]!==c||a[3]!==s||a[4]!==l?(e=()=>{if(r.current){r.current=!1,n.current=s,m?i.fetchSharedThreadMessages(c):i.fetchMessages(c);return}if(n.current!==s){if(n.current=s,s===c)return;let e=s&&l?.get(s);i.selectThread(e||null,{includeThreads:!1,clearTopic:!0})}},t=[i,s,l,c,m],a[0]=m,a[1]=i,a[2]=c,a[3]=s,a[4]=l,a[5]=e,a[6]=t):(e=a[5],t=a[6]),(0,d.useEffect)(e,t)}(),function(){let e,t,a=(0,o.c)(12),{selectedThreadID:s,shouldReplaceHistoryOnNavigation:r}=(0,u.Pk)(),n=(0,v.v)(),i=(0,eN.b)(),l=(0,st.M)((0,A.Zp)());a[0]!==i||a[1]!==l||a[2]!==n?.skipSyncRouteToThread||a[3]!==s||a[4]!==r?(e=()=>{if(!s||n?.skipSyncRouteToThread)return;let e=`${O.Jz}/c/${s}`,t=`${O.Jz}/share/${s}`,a=window.location.pathname;if(!a.startsWith(e)&&!a.startsWith(t)){let t=r?{replace:!0}:void 0;r&&i.setShouldReplaceHistoryOnNavigation(!1),l.current(e,t)}},a[0]=i,a[1]=l,a[2]=n?.skipSyncRouteToThread,a[3]=s,a[4]=r,a[5]=e):e=a[5];let c=n?.skipSyncRouteToThread;a[6]!==i||a[7]!==l||a[8]!==s||a[9]!==r||a[10]!==c?(t=[l,c,s,r,i],a[6]=i,a[7]=l,a[8]=s,a[9]=r,a[10]=c,a[11]=t):t=a[11],(0,d.useEffect)(e,t)}(),s=(0,o.c)(3),r=(0,eN.b)(),s[0]!==r?(t=()=>{let e=()=>{window.location.href.includes("/r/")?(r.showTopicPicker(!1),r.selectThread(null)):window.location.href.includes("/c/")||(r.showTopicPicker(!0),r.selectThread(null))};return window.addEventListener("popstate",e),()=>{window.removeEventListener("popstate",e)}},a=[r],s[0]=r,s[1]=t,s[2]=a):(t=s[1],a=s[2]),(0,d.useEffect)(t,a),!function(){let e,t,a,s,r=(0,o.c)(11),n=(0,m.y)(),{selectedThreadID:i,fetchSharedThreads:l}=(0,u.bP)("selectedThreadID","fetchSharedThreads"),c=!!l?.shareId&&i===l?.shareId;r[0]!==c||r[1]!==i||r[2]!==n?(e=()=>{i&&!c&&n.fetchAndLoadTraces(i)},t=[i,n,c],r[0]=c,r[1]=i,r[2]=n,r[3]=e,r[4]=t):(e=r[3],t=r[4]),(0,d.useEffect)(e,t),r[5]!==l||r[6]!==c||r[7]!==i||r[8]!==n?(a=()=>{l?.ok&&l.originalThreadId&&c&&i&&n.fetchAndLoadTraces(l.originalThreadId,i)},s=[l,n,c,i],r[5]=l,r[6]=c,r[7]=i,r[8]=n,r[9]=a,r[10]=s):(a=r[9],s=r[10]),(0,d.useEffect)(a,s)}(),n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(se,{}),n[0]=e):e=n[0],e}try{sr.displayName||(sr.displayName="CopilotImmersive")}catch{}try{sn.displayName||(sn.displayName="CopilotImmersiveNoRelay")}catch{}try{si.displayName||(si.displayName="Immersive")}catch{}(0,i.o)("copilot-immersive-v1",()=>({App:c,routes:[(0,n.a)({path:"/copilot",Component:sr,transitionType:r.E.TRANSITION_WITHOUT_FETCH}),(0,n.a)({path:"/copilot/c/:threadID",Component:sr,transitionType:r.E.TRANSITION_WITHOUT_FETCH}),(0,n.a)({path:"/copilot/r/:owner/:repository",Component:sr}),(0,n.a)({path:"/copilot/share/:threadID",Component:sr}),(0,n.a)({path:"/copilot/loops",Component:sr,transitionType:r.E.TRANSITION_WITHOUT_FETCH}),(0,n.a)({path:"/copilot/l/:loopID",Component:sr,transitionType:r.E.TRANSITION_WITHOUT_FETCH}),(0,n.a)({path:"/copilot/workbench",Component:sr,transitionType:r.E.TRANSITION_WITHOUT_FETCH}),(0,n.a)({path:"/copilot/spark",Component:sr,transitionType:r.E.TRANSITION_WITHOUT_FETCH}),(0,n.a)({path:"/copilot/spaces",Component:sr}),(0,n.a)({path:"/copilot/spaces/:spaceID",Component:sr}),(0,n.a)({path:"/copilot/spaces/:owner/:spaceNumber",Component:sr}),(0,n.a)({path:"/copilot/spaces/:owner/:spaceNumber/edit",Component:sr}),(0,n.a)({path:"/copilot/spaces/:spaceID/edit",Component:sr}),(0,n.a)({path:"/copilot/spaces/new",Component:sr}),(0,n.a)({path:"/copilot/agents",Component:sr}),(0,n.a)({path:"/copilot/tasks/pull/:globalID",Component:sr,transitionType:r.E.TRANSITION_WITHOUT_FETCH})]}))},37351:(e,t,a)=>{a.d(t,{_:()=>s});function s(e,t){if(e!==t)throw TypeError("Private static access of wrong provenance")}},39595:(e,t,a)=>{let s;a.d(t,{CF:()=>x,p_:()=>A,FB:()=>u,Se:()=>C,aC:()=>T,zV:()=>E});let r=new WeakSet,n=new WeakMap;function i(e=document){if(n.has(e))return n.get(e);let t=!1,a=new MutationObserver(e=>{for(let t of e)if("attributes"===t.type&&t.target instanceof Element)d(t.target);else if("childList"===t.type&&t.addedNodes.length)for(let e of t.addedNodes)e instanceof Element&&l(e)});a.observe(e,{childList:!0,subtree:!0,attributeFilter:["data-action"]});let s={get closed(){return t},unsubscribe(){t=!0,n.delete(e),a.disconnect()}};return n.set(e,s),s}function l(e){for(let t of e.querySelectorAll("[data-action]"))d(t);e instanceof Element&&e.hasAttribute("data-action")&&d(e)}function o(e){let t=e.currentTarget;for(let a of c(t))if(e.type===a.type){let s=t.closest(a.tag);r.has(s)&&"function"==typeof s[a.method]&&s[a.method](e);let n=t.getRootNode();if(n instanceof ShadowRoot&&r.has(n.host)&&n.host.matches(a.tag)){let t=n.host;"function"==typeof t[a.method]&&t[a.method](e)}}}function*c(e){for(let t of(e.getAttribute("data-action")||"").trim().split(/\s+/)){let e=t.lastIndexOf(":"),a=Math.max(0,t.lastIndexOf("#"))||t.length;yield{type:t.slice(0,e),tag:t.slice(e+1,a),method:t.slice(a+1)||"handleEvent"}}}function d(e){for(let t of c(e))e.addEventListener(t.type,o)}function u(e,t){let a=e.tagName.toLowerCase();if(e.shadowRoot){for(let s of e.shadowRoot.querySelectorAll(`[data-target~="${a}.${t}"]`))if(!s.closest(a))return s}for(let s of e.querySelectorAll(`[data-target~="${a}.${t}"]`))if(s.closest(a)===e)return s}let m=e=>String("symbol"==typeof e?e.description:e).replace(/([A-Z]($|[a-z]))/g,"-$1").replace(/--/g,"-").replace(/^-|-$/,"").toLowerCase(),h=(e,t="property")=>{let a=m(e);if(!a.includes("-"))throw new DOMException(`${t}: ${String(e)} is not a valid ${t} name`,"SyntaxError");return a},p="attr";function x(e,t){I(e,p).add(t)}let f=new WeakSet;function g(e,t){if(f.has(e))return;f.add(e);let a=Object.getPrototypeOf(e),s=a?.constructor?.attrPrefix??"data-";for(let r of(t||(t=I(a,p)),t)){let t=e[r],a=h(`${s}${r}`),n={configurable:!0,get(){return this.getAttribute(a)||""},set(e){this.setAttribute(a,e||"")}};"number"==typeof t?n={configurable:!0,get(){return Number(this.getAttribute(a)||0)},set(e){this.setAttribute(a,e)}}:"boolean"==typeof t&&(n={configurable:!0,get(){return this.hasAttribute(a)},set(e){this.toggleAttribute(a,e)}}),Object.defineProperty(e,r,n),r in e&&!e.hasAttribute(a)&&n.set.call(e,t)}}let _=new Map,y=new Promise(e=>{"loading"!==document.readyState?e():document.addEventListener("readystatechange",()=>e(),{once:!0})}),b=new Promise(e=>{let t=new AbortController;t.signal.addEventListener("abort",()=>e());let a={once:!0,passive:!0,signal:t.signal},s=()=>t.abort();document.addEventListener("mousedown",s,a),document.addEventListener("touchstart",s,a),document.addEventListener("keydown",s,a),document.addEventListener("pointerdown",s,a)}),j={ready:()=>y,firstInteraction:()=>b,visible:e=>new Promise(t=>{let a=new IntersectionObserver(e=>{for(let s of e)if(s.isIntersecting){t(),a.disconnect();return}},{rootMargin:"0px 0px 256px 0px",threshold:.01});for(let t of document.querySelectorAll(e))a.observe(t)})},S=new WeakMap;function v(e){cancelAnimationFrame(S.get(e)||0),S.set(e,requestAnimationFrame(()=>{for(let t of _.keys()){let a=e instanceof Element&&e.matches(t)?e:e.querySelector(t);if(customElements.get(t)||a){let s=a?.getAttribute("data-load-on")||"ready",r=s in j?j[s]:j.ready;for(let e of _.get(t)||[])r(t).then(e);_.delete(t),S.delete(e)}}}))}function C(e,t){for(let[a,s]of("string"==typeof e&&t&&(e={[e]:t}),Object.entries(e)))_.has(a)||_.set(a,new Set),_.get(a).add(s);w(document)}function w(e){s||(s=new MutationObserver(e=>{if(_.size)for(let t of e)for(let e of t.addedNodes)e instanceof Element&&v(e)})),v(e),s.observe(e,{subtree:!0,childList:!0})}let N=Symbol.for("catalyst");let CatalystDelegate=class CatalystDelegate{constructor(e){const t=this,a=e.prototype.connectedCallback;e.prototype.connectedCallback=function(){t.connectedCallback(this,a)};const s=e.prototype.disconnectedCallback;e.prototype.disconnectedCallback=function(){t.disconnectedCallback(this,s)};const r=e.prototype.attributeChangedCallback;e.prototype.attributeChangedCallback=function(e,a,s){t.attributeChangedCallback(this,e,a,s,r)};let n=e.observedAttributes||[];Object.defineProperty(e,"observedAttributes",{configurable:!0,get(){return t.observedAttributes(this,n)},set(e){n=e}}),function(e){let t=e.observedAttributes||[],a=e.attrPrefix??"data-",s=e=>h(`${a}${e}`);Object.defineProperty(e,"observedAttributes",{configurable:!0,get:()=>[...I(e.prototype,p)].map(s).concat(t),set(e){t=e}})}(e),function(e){let t=m(e.name).replace(/-element$/,"");try{window.customElements.define(t,e),window[e.name]=customElements.get(t)}catch(e){if(!(e instanceof DOMException&&"NotSupportedError"===e.name))throw e}}(e)}observedAttributes(e,t){return t}connectedCallback(e,t){var a,s;for(let t of(e.toggleAttribute("data-catalyst",!0),customElements.upgrade(e),e.querySelectorAll("template[data-shadowroot]")))t.parentElement===e&&e.attachShadow({mode:"closed"===t.getAttribute("data-shadowroot")?"closed":"open"}).append(t.content.cloneNode(!0));(g(e),r.add(e),e.shadowRoot&&(l(s=e.shadowRoot),i(s)),l(e),i(e.ownerDocument),t?.call(e),e.shadowRoot)&&(l(a=e.shadowRoot),i(a),w(e.shadowRoot))}disconnectedCallback(e,t){t?.call(e)}attributeChangedCallback(e,t,a,s,r){g(e),"data-catalyst"!==t&&r&&r.call(e,t,a,s)}};function I(e,t){if(!Object.prototype.hasOwnProperty.call(e,N)){let t=e[N],a=e[N]=new Map;if(t)for(let[e,s]of t)a.set(e,new Set(s))}let a=e[N];return a.has(t)||a.set(t,new Set),a.get(t)}function T(e,t){I(e,"target").add(t),Object.defineProperty(e,t,{configurable:!0,get(){return u(this,t)}})}function E(e,t){I(e,"targets").add(t),Object.defineProperty(e,t,{configurable:!0,get(){let e=this.tagName.toLowerCase(),a=[];if(this.shadowRoot)for(let s of this.shadowRoot.querySelectorAll(`[data-targets~="${e}.${t}"]`))s.closest(e)||a.push(s);for(let s of this.querySelectorAll(`[data-targets~="${e}.${t}"]`))s.closest(e)===this&&a.push(s);return a}})}function A(e){new CatalystDelegate(e)}},44953:(e,t,a)=>{a.d(t,{_:()=>s});function s(e,t){if(void 0===e)throw TypeError("attempted to "+t+" private static field before its declaration")}},52475:(e,t,a)=>{a.d(t,{_S:()=>n,cB:()=>l,cW:()=>i});var s=a(53627),r=a(71315);let n=()=>{let e=(0,s.JV)().appId;return e&&"rails"!==e?e:crypto.randomUUID()},i=e=>{(0,s.C3)({appId:e})},l=()=>{let e=document.querySelector("react-app")||document.querySelector("projects-v2");return e?.uuid||"rails"};r.cg?.addEventListener("hashchange",()=>{(0,s.C3)({appId:l()})},!0)},56487:(e,t,a)=>{a.d(t,{F:()=>o,t:()=>c});var s=a(74848),r=a(35247),n=a(53419),i=a(5524),l=a(62491);function o({eventName:e,menuLocation:t,mode:a,action:s,text:r}){let i=`${t.toUpperCase()}_${e.toUpperCase()}`;(0,n.BI)("dotcom_chat.activate",{target:i,text:r,category:t,action:s,mode:a})}function c({menuLocation:e,mode:t,onItemClick:a}){return Object.entries(l.A).map(([n,{name:l,url:c,icon:d}])=>(0,s.jsxs)(i.l.LinkItem,{href:c,onClick:()=>{a?.(),r.W.freeToPaidTelemetry&&o({eventName:n,menuLocation:e,mode:t,action:"menu_item_click",text:l})},children:[l,(0,s.jsx)(i.l.LeadingVisual,{children:(0,s.jsx)("img",{src:d,alt:"",height:"20",width:"20"})})]},n))}try{c.displayName||(c.displayName="EditorMenuItems")}catch{}},61767:(e,t,a)=>{let s;a.d(t,{FC:()=>m,I0:()=>d,dV:()=>u,h$:()=>p,hW:()=>i,jK:()=>h,o:()=>o,zT:()=>l});let r=null,n=!1;function i(e){s&&s!==e||(s=e,r&&(r(e),r=null))}function l(){s=void 0}function o(e){let t=e?.source??"both",a=e?.silent??!0,r=null;return(("element"===t||"both"===t)&&(r=document.querySelector("context-region")),r||"react"!==t&&"both"!==t||(r=s??null),r)?"isConnected"in r&&!r.isConnected||!r.pushCrumb||"function"!=typeof r.pushCrumb?null:r:(a||console.error("The global navigation's context region cannot be found! Make sure the <context-region> element exists on the page before calling any of the global navigation breadcrumb methods."),null)}function c(e){let t=o();t?e(t):(r=e,function(){if(n)return;n=!0;let e=document.querySelector("context-region-controller");e&&e.addEventListener("context-region-connected",()=>{r&&(r(e.contextRegion),r=null)},{once:!0})}())}function d(e){c(t=>t.pushCrumb(e))}function u(){c(e=>e.popCrumb())}function m(e){c(t=>t.replaceCrumbs(e))}function h(e){c(t=>t.renameCurrentCrumb(e))}function p(e){c(t=>t.replaceCurrentCrumb(e))}},62491:(e,t,a)=>{a.d(t,{A:()=>i});let s=a.p+"eclipse-962a3cf29dea.png",r=a.p+"jetbrains-e16495e63a33.png",n=a.p+"neovim-3301f23c4307.png",i={vscode:{url:"https://marketplace.visualstudio.com/items?itemName=GitHub.copilot",icon:a.p+"vscode-380056900de8.png",name:"Visual Studio Code",eventName:"VSCODE"},visualstudio:{url:"https://visualstudio.microsoft.com/github-copilot/",icon:a.p+"vsstudio-806c4b726938.png",name:"Visual Studio",eventName:"VS"},xcode:{url:"https://github.com/github/CopilotForXcode",icon:a.p+"xcode-a6c2735aa7ac.png",name:"Xcode",eventName:"XCODE"},jetbrains:{url:"https://plugins.jetbrains.com/plugin/17718-github-copilot",icon:r,name:"JetBrains",eventName:"JETBRAINS"},eclipse:{url:"https://marketplace.eclipse.org/content/github-copilot",icon:s,name:"Eclipse",eventName:"ECLIPSE"},neovim:{url:"https://github.com/github/copilot.vim",icon:n,name:"Neovim",eventName:"NEOVIM"}}},75735:(e,t,a)=>{a.d(t,{_:()=>i});var s=a(5570),r=a(37351),n=a(44953);function i(e,t,a,i){return(0,r._)(e,t),(0,n._)(a,"set"),(0,s._)(e,a,i),i}},81075:(e,t,a)=>{a.d(t,{_:()=>i});var s=a(50894),r=a(37351),n=a(44953);function i(e,t,a){return(0,r._)(e,t),(0,n._)(a,"get"),(0,s._)(e,a)}}},e=>{e.O(0,[3088,43934,82216,67733,62094,69676,913,6488,31475,48775,42892,23832,99418,30587,72471,55229,33915,4712,3086,82081,96537,51220,34542,28546,26744,40489,18312,347,89332,15874,45230,5298,5853,16007,55368,88324,43862,20382,60023,1376,68988,36511,39671,9288,25407,83494,83463,87670,40771,5168,66990,29665,4817,37294,2635,30721,99808,52302,81171,67071,84597,10422,78192,34522,16442,92421,92135,34031,6623,44185,38028,39837,26548,1460,82590,97633,36183,20603,20166,82460,33721,50111,19532,8939,67891],()=>e(e.s=22580)),e.O()}]);
//# sourceMappingURL=copilot-immersive-v1-78526f7e195a.js.map