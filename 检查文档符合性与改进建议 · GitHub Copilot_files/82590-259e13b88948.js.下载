"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([[82590],{2265:(e,t,n)=>{n.d(t,{W:()=>d,j:()=>o});var i=n(74848),r=n(68273),a=n(21728),s=n(96540);let l=(0,s.createContext)({}),o=(0,r.GV)()?function(e){let t,n,r=(0,a.c)(5),{children:o}=e,[d,c]=(0,s.useState)(!1);r[0]!==d?(t={isDialogOpen:d,setIsDialogOpen:c},r[0]=d,r[1]=t):t=r[1];let u=t;return r[2]!==o||r[3]!==u?(n=(0,i.jsx)(l.Provider,{value:u,children:o}),r[2]=o,r[3]=u,r[4]=n):n=r[4],n}:function({children:e}){let[t,n]=(0,s.useState)(!1),r=(0,s.useMemo)(()=>({isDialogOpen:t,setIsDialogOpen:n}),[t,n]);return(0,i.jsx)(l.Provider,{value:r,children:e})},d=((0,r.GV)(),()=>(0,s.useContext)(l));try{l.displayName||(l.displayName="DialogStateContext")}catch{}try{o.displayName||(o.displayName="DialogStateProvider")}catch{}},3038:(e,t,n)=>{n.d(t,{Av:()=>D,Ji:()=>h,Ls:()=>N,Mk:()=>v,Po:()=>m,S4:()=>y,Yf:()=>w,a1:()=>S,a2:()=>o,dT:()=>j,dv:()=>g,j2:()=>C,oH:()=>d,qK:()=>f,qX:()=>c,u6:()=>u,x_:()=>p});var i=n(13083),r=n(61583),a=n(66358),s=n(36729),l=n(51391);function o(e,t,n){return"left"===n?!m(e)&&e.left===t:!m(e)&&(0,i.XU)(e.type)===n&&e.right===t}function d(e,t){return"LEFT"===t?`L${e}`:`R${e}`}function c(e,t,n){let i=`-${m(t)||"number"!=typeof t.left?"empty":t.left}`,r=n?`-${m(n)||"number"!=typeof n.right?"empty":n.right}`:"";return`${e}${i}${r}`}function u(e,t){return`${e}-${t}`}function m(e){return!!e&&e===s.Vv}function f(e){return!!e&&e!==s.Vv}function h(e){return"CONTEXT"===e.type}function g(e,t){return t===a.w$.Empty||t===a.w$.Hunk?[e,void 0]:b(e,a.JF[t])}function p(e,t){let n;switch(t){case a.w$.Addition:n=a.JF[a.w$.Addition];break;case a.w$.Deletion:n=a.JF[a.w$.Deletion];break;case a.w$.Context:case a.w$.InjectedContext:n=a.JF[a.w$.Context]}return b(e,n)}function b(e,t){if(!t||!e.startsWith(t))return[e,void 0];let n=e[0];return[e.substring(1),n]}function v(e){let t=[],n=[],i=()=>{for(;t.length<n.length;)t.push(s.Vv);for(;n.length<t.length;)n.push(s.Vv)};for(let r of e)switch(r.type){case"ADDITION":n.push(r);break;case"DELETION":t.push(r);break;case"CONTEXT":case"INJECTED_CONTEXT":case"HUNK":i(),t.push(r),n.push(r)}return i(),{leftLines:t,rightLines:n}}function x(e){return["HUNK","CONTEXT","INJECTED_CONTEXT","DELETION"].includes(e.type)}function C({line:e,range:t,fileAnchor:n}){let i,{origin:a,pathname:s}=window.location;if(e){let a=x(e)?e.left:e.right;i=t&&a&&t.startLineNumber<=a&&t.endLineNumber>=a?(0,r.j$)(t):function(e,t){let n=x(e),i=n?e.left:e.right,a=n?"left":"right";if(null!==i)return(0,r.j$)({diffAnchor:t,endLineNumber:i,endOrientation:a,startLineNumber:i,startOrientation:a})}(e,n)}else t&&(i=(0,r.j$)(t));if(i)return`${a}${s}#${i}`}function y({hasThreads:e}){return e?"80px":"24px"}let L=["ADDITION","DELETION","CONTEXT"],S=(e,t)=>{if(m(e)||!e)return!1;let n=t.leftLines.concat(t.rightLines),i=n.filter(e=>!m(e)).map(e=>(0,l.bo)(e)),r=(0,l.bo)(e);return n.length>0&&i.includes(r)?n.every(e=>!!m(e)||L.includes(e.type)):!!m(e)||L.includes(e.type)},N=e=>e?e.filter(e=>!m(e)).map(e=>{var t;let[n]=p((t=e.html,new DOMParser().parseFromString(t,"text/html").documentElement.textContent||""),e.type);return n}).join(`
`):"";function j(e){return!!(e.text.length<1&&("CONTEXT"===e.type||"INJECTED_CONTEXT"===e.type)||("DELETION"===e.type||"ADDITION"===e.type)&&1===e.text.length&&["+","-"].includes(e.text.charAt(0)))}let D=(e,t,n,i)=>{let r;if(e)return e;if(!m(t)){let e=(n?t.left:t.right)??0,a=n?"left":"right";r={startOrientation:a,endOrientation:a,startLineNumber:e,endLineNumber:e,diffAnchor:i}}return r};function w(e,t=!1,n=!1){let i;switch(e){case"ADDITION":i=t?"var(--diffBlob-additionNum-bgColor, var(--diffBlob-addition-bgColor-num))":"var(--diffBlob-additionLine-bgColor, var(--diffBlob-addition-bgColor-line))";break;case"DELETION":i=t?"var(--diffBlob-deletionNum-bgColor, var(--diffBlob-deletion-bgColor-num))":"var(--diffBlob-deletionLine-bgColor, var(--diffBlob-deletion-bgColor-line))";break;case"HUNK":i=t?"var(--diffBlob-hunkNum-bgColor-rest, var(--diffBlob-hunk-bgColor-num))":"var(--diffBlob-hunkLine-bgColor, var(--bgColor-accent-muted))";break;case"EMPTY":i=t?"var(--diffBlob-emptyNum-bgColor, var(--diffBlob-hunk-bgColor-num))":"var(--diffBlob-emptyLine-bgColor, var(--bgColor-accent-muted))";break;default:i="var(--bgColor-default)"}return n?"":i}},3252:(e,t,n)=>{function i(e){return[...e.querySelectorAll(".js-blob-code-addition")].map(e=>e.textContent).filter(e=>null!==e)}function r(e){if(!e||e.length>1e5)return null;let t=e.split(/\r?\n/),n=!1,i="",r=[];for(let e=0;e<t.length;e++){let a=t[e];if(void 0!==a)if(n){if(a.match(/^ {0,3}(`{3,}|~{3,})[ \t]*$/))return r;let e=a;if(i.length>0){let t=RegExp(`^ {0,${i.length}}`);e=a.replace(t,"")}r.push(e)}else{let e=a.match(/^( {0,3})(`{3,}|~{3,})suggestion[ \t]*$/);if(e){n=!0,i=e[1]||"";continue}}}return null}n.d(t,{T:()=>r,y:()=>i})},8431:(e,t,n)=>{n.d(t,{A:()=>i});let i={diff:"Diff-module__diff--Sofy4",diffTargetable:"Diff-module__diffTargetable--kW3Cm",diffHeaderWrapper:"Diff-module__diffHeaderWrapper--eH6zk",diffAddFileThread:"Diff-module__diffAddFileThread--f81Tx",diffFooter:"Diff-module__diffFooter--kHHJz"}},13814:(e,t,n)=>{n.d(t,{J:()=>DiffSelectedLineEvent,L:()=>DiffAddCommentButtonClickedEvent});var i=n(50467);let DiffAddCommentButtonClickedEvent=class DiffAddCommentButtonClickedEvent extends Event{constructor(e,t){super("DiffAddCommentButtonClickedEvent",{bubbles:!0,cancelable:!0,composed:!0}),(0,i._)(this,"endLineNumber",void 0),(0,i._)(this,"endOrientation",void 0),(0,i._)(this,"filePath",void 0),(0,i._)(this,"startOrientation",void 0),(0,i._)(this,"startLineNumber",void 0),this.startLineNumber=e.startLineNumber,this.endLineNumber=e.endLineNumber,this.startOrientation=e.startOrientation,this.endOrientation=e.endOrientation,this.filePath=t}};let DiffSelectedLineEvent=class DiffSelectedLineEvent extends Event{constructor(e,t){super("DiffSelectedLineEvent",{bubbles:!0,cancelable:!0,composed:!0}),(0,i._)(this,"endLineNumber",void 0),(0,i._)(this,"endOrientation",void 0),(0,i._)(this,"filePath",void 0),(0,i._)(this,"startOrientation",void 0),(0,i._)(this,"startLineNumber",void 0),this.startLineNumber=e.startLineNumber,this.endLineNumber=e.endLineNumber,this.startOrientation=e.startOrientation,this.endOrientation=e.endOrientation,this.filePath=t}}},15697:(e,t,n)=>{function i({paths:e,diffSummaries:t}){let n={};for(let i of e){let e=t[i];if(e&&e.markersMap){let t=[];for(let n in e.markersMap){let i=e.markersMap[n]?.ctx;i&&t.push(i)}n[i]=t}}return n}function r({diffSummary:e}){let t=[];if(e&&e.markersMap)for(let n in e.markersMap){let i=e.markersMap[n]?.ctx;i&&t.push({start:i[0],end:i[1]})}return t}n.d(t,{B:()=>r,i:()=>i})},18373:(e,t,n)=>{n.d(t,{U:()=>x});var i=n(74848),r=n(21728),a=n(96540),s=n(43883),l=n(21373),o=n(57478),d=n(72511),c=n(15837),u=n(86877),m=n(4175),f=n(46251),h=n(33989),g=n(15220),p=n(38621),b=n(55127),v=n.n(b);function x(e){let t,n,h,b,x,y,L,S,N,j,D,w,I,k,A,E,R,_,T,O,M=(0,r.c)(60),{setOpen:$,count:P,dismissalOptions:F,error:G,isPending:V,delegatedAlertDismissalEnabled:H,codeSecurity:U,onSubmit:K}=e,[B,q]=(0,a.useState)(""),[z,W]=(0,a.useState)(""),[X,Z]=(0,a.useState)(!1);M[0]!==H||M[1]!==z?(t=!H||!!z.trim(),M[0]=H,M[1]=z,M[2]=t):t=M[2];let Q=t,J=!!B&&Q;M[3]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{q(e??"")},M[3]=n):n=M[3];let Y=n,ee=U?"alert":"finding";if(M[4]!==P||M[5]!==ee){let e,t,n,i,r,a,s;e=v()(ee,P),t=P>1,n=`Dismiss ${e}`,i=`Select a reason to dismiss ${v()("this",P)} ${e}.`,r=`Request to dismiss ${e}`,a=t?`These ${e} need approval before they can be dismissed. Requests are sent to all approvers.`:`This ${e} needs approval before it can be dismissed. Requests are sent to all approvers.`,s=t?`These ${e} are not valid`:`This ${e} is not valid`,h={title:n,subtitle:i,submitButtonLabel:"Dismiss",delegatedAlertDismissal:{title:r,subtitle:a,submitButtonLabel:"Submit request"},reasons:{falsePositiveDescription:s,usedInTestsDescription:t?`These ${e} are not in production code`:`This ${e} is not in production code`,wontFixDescription:t?`These ${e} are not relevant`:`This ${e} is not relevant`}},M[4]=P,M[5]=ee,M[6]=h}else h=M[6];let{title:et,subtitle:en,submitButtonLabel:ei,delegatedAlertDismissal:er,reasons:ea}=h;M[7]!==ea.falsePositiveDescription?(b={value:"FALSE_POSITIVE",label:"False positive",description:ea.falsePositiveDescription},M[7]=ea.falsePositiveDescription,M[8]=b):b=M[8],M[9]!==ea.usedInTestsDescription?(x={value:"USED_IN_TESTS",label:"Used in tests",description:ea.usedInTestsDescription},M[9]=ea.usedInTestsDescription,M[10]=x):x=M[10],M[11]!==ea.wontFixDescription?(y={value:"WONT_FIX",label:"Won't fix",description:ea.wontFixDescription},M[11]=ea.wontFixDescription,M[12]=y):y=M[12],M[13]!==b||M[14]!==x||M[15]!==y?(L=[b,x,y],M[13]=b,M[14]=x,M[15]=y,M[16]=L):L=M[16];let es=L,el=F?.length?F:es;M[17]!==z||M[18]!==J||M[19]!==K||M[20]!==B?(S=async()=>{J?(Z(!1),K({resolution:B,dismissalComment:z})):Z(!0)},M[17]=z,M[18]=J,M[19]=K,M[20]=B,M[21]=S):S=M[21];let eo=S;M[22]!==$?(N=()=>$(!1),M[22]=$,M[23]=N):N=M[23];let ed=H?er.title:et,ec=H?er.subtitle:en;return M[24]!==P||M[25]!==er||M[26]!==H||M[27]!==V||M[28]!==J||M[29]!==eo||M[30]!==$||M[31]!==ei?(j=()=>(0,i.jsxs)(g.l.Footer,{children:[(0,i.jsx)(l.Q,{onClick:()=>$(!1),children:"Cancel"}),(0,i.jsxs)(l.Q,{variant:"primary",onClick:eo,disabled:!J||V,leadingVisual:V?p.SyncIcon:null,children:[(0,i.jsx)("span",{children:H?er.submitButtonLabel:ei}),P>1&&(0,i.jsx)(o.A,{scheme:"primary",className:"ml-2",children:(0,s.ai)(P)})]})]}),M[24]=P,M[25]=er,M[26]=H,M[27]=V,M[28]=J,M[29]=eo,M[30]=$,M[31]=ei,M[32]=j):j=M[32],M[33]!==G?(D=G&&(0,i.jsx)(d.A,{variant:"danger",children:G.message}),M[33]=G,M[34]=D):D=M[34],M[35]===Symbol.for("react.memo_cache_sentinel")?(w=(0,i.jsx)(c.A.Label,{visuallyHidden:!0,children:"Dismissal reason"}),M[35]=w):w=M[35],M[36]!==el?(I=el.map(C),M[36]=el,M[37]=I):I=M[37],M[38]!==V||M[39]!==I?(k=(0,i.jsxs)(c.A,{name:"resolution",onChange:Y,disabled:V,children:[w,I]}),M[38]=V,M[39]=I,M[40]=k):k=M[40],M[41]!==H?(A=(0,i.jsx)(u.A.Label,{required:H,children:"Comment"}),M[41]=H,M[42]=A):A=M[42],M[43]===Symbol.for("react.memo_cache_sentinel")?(E=(0,i.jsx)(m.Ay,{placeholder:"Add a comment",rows:5,maxLength:280,name:"dismissal_comment",onChange:e=>W(e.target.value),className:"BaseSharedDismissalDialog-module__dismissalCommentTextarea--xxBPO"}),M[43]=E):E=M[43],M[44]!==X?(R=X&&(0,i.jsx)(u.A.Validation,{variant:"error",children:"This field is required"}),M[44]=X,M[45]=R):R=M[45],M[46]!==V||M[47]!==A||M[48]!==R?(_=(0,i.jsx)("div",{children:(0,i.jsxs)(u.A,{disabled:V,children:[A,E,R]})}),M[46]=V,M[47]=A,M[48]=R,M[49]=_):_=M[49],M[50]!==D||M[51]!==k||M[52]!==_?(T=(0,i.jsxs)(f.B,{gap:"normal",children:[D,k,_]}),M[50]=D,M[51]=k,M[52]=_,M[53]=T):T=M[53],M[54]!==ed||M[55]!==ec||M[56]!==j||M[57]!==T||M[58]!==N?(O=(0,i.jsx)(g.l,{width:"large",height:"auto",onClose:N,title:ed,subtitle:ec,renderFooter:j,children:T}),M[54]=ed,M[55]=ec,M[56]=j,M[57]=T,M[58]=N,M[59]=O):O=M[59],O}function C(e){return(0,i.jsxs)(u.A,{children:[(0,i.jsx)(h.A,{value:e.value}),(0,i.jsx)(u.A.Label,{children:e.label}),(0,i.jsx)(u.A.Caption,{children:e.description})]},e.value)}try{x.displayName||(x.displayName="BaseSharedDismissalDialog")}catch{}},21132:(e,t,n)=>{n.d(t,{s:()=>i});let i={Loaded:"Loaded",Loading:"Loading",NotLoaded:"NotLoaded"}},27011:(e,t,n)=>{n.d(t,{JA:()=>B,YL:()=>q,qL:()=>eo,wI:()=>K,gt:()=>Y,xW:()=>W,wL:()=>Q,a_:()=>Z,TV:()=>X,iY:()=>z,wh:()=>em,kN:()=>eh,JR:()=>ef,L3:()=>C,yo:()=>y,HZ:()=>eb,$W:()=>ex,jT:()=>ep,QV:()=>ev,or:()=>eL,I8:()=>ey,l0:()=>k,Ud:()=>E,uh:()=>R,Fm:()=>_,qg:()=>A,mU:()=>T,y:()=>eg,GR:()=>F,SM:()=>ei,ww:()=>S,it:()=>eu,q6:()=>eS,j5:()=>L,RH:()=>ek,Fl:()=>J,Lh:()=>$,ne:()=>et,an:()=>el,rP:()=>ea,_N:()=>ed,ys:()=>ec,pV:()=>eC,mY:()=>O,Yp:()=>D,Kp:()=>w,r$:()=>j,GK:()=>I,zK:()=>P,mF:()=>G,m9:()=>M,E4:()=>N,CQ:()=>eN,WA:()=>ee,WK:()=>ew,xJ:()=>eI,Nk:()=>eA,_W:()=>er,Qb:()=>es,BI:()=>en,Mv:()=>ej,gi:()=>eD});var i=n(68273),r=n(21728),a=n(96540),s=n(70466),l=n(59914),o=n(43645),d=n(82603),c=n(71317),u=n(35311);let m="UNABLE_TO_GENERATE",f="NOT_GENERATED_YET";var h=n(69599),g=n(18799);let p={baseOid:void 0,headOid:void 0},b=[],v=[],x={threads:b,annotations:v,commentsPreference:g.sI.Visible},C=(0,i.Z6)()?()=>(0,o.n)(eE):()=>(0,o.n)(e=>e.comparisonInfo),y=(0,i.Z6)()?()=>(0,o.n)(eR):()=>(0,o.n)(e=>e.comparisonInfoActions),L=(0,i.Z6)()?()=>(0,o.n)(e_):()=>(0,o.n)(e=>e.isSingleFileMode),S=(0,i.Z6)()?()=>(0,o.n)(eT):()=>(0,o.n)(e=>"FULL"!==e.comparisonInfo.comparisonView),N=(0,i.Z6)()?()=>(0,o.n)(eO):()=>(0,o.n)(e=>e.comparisonInfo.selectedRange||p),j=(0,i.Z6)()?()=>(0,o.n)(eM):()=>(0,o.n)(e=>e.pullRequest.id),D=(0,i.Z6)()?()=>(0,o.n)(e$):()=>(0,o.n)(e=>e.pullRequest),w=(0,i.Z6)()?()=>(0,o.n)(eP):()=>(0,o.n)(e=>e.pullRequest.basePath);(0,i.Z6)()||(()=>(0,o.n)(e=>e.pullRequestActions));let I=(0,i.Z6)()?()=>(0,o.n)(eF):()=>(0,o.n)(e=>e.repository),k=(0,i.Z6)()?()=>(0,o.n)(eG):()=>(0,o.n)(e=>e.diffSummaries),A=(0,i.Z6)()?()=>(0,o.n)(eV):()=>(0,o.n)(e=>Object.values(e.diffSummaries).length??0),E=(0,i.Z6)()?()=>(0,o.n)(eH):()=>(0,o.n)(e=>e.diffSummariesActions);(0,i.Z6)()||(()=>(0,o.n)((0,l.k)(e=>Object.values(e.diffSummaries).map(e=>e.path))));let R=(0,i.Z6)()?()=>{let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=U([eU],eK,s.x),t[0]=e):e=t[0],(0,o.n)(e)}:()=>(0,o.n)(U([e=>e.diffSummaries],e=>Object.values(e),s.x)),_=(0,i.Z6)()?e=>{let t,n=(0,r.c)(2);return n[0]!==e?(t=t=>t.diffSummaries[e],n[0]=e,n[1]=t):t=n[1],(0,o.n)(t)}:e=>(0,o.n)(t=>t.diffSummaries[e]);(0,i.Z6)(),()=>V().hiddenFiles;let T=((0,i.Z6)(),()=>V().filteredDiffSummaries),O=(0,i.Z6)()?()=>(0,o.n)(eB):()=>(0,o.n)(e=>e.entries),M=(0,i.Z6)()?()=>(0,o.n)(eq):()=>(0,o.n)(e=>e.selectedPathDigest);(0,i.Z6)()||(()=>(0,o.n)(e=>e.progressiveDiffsActions.updateSelectedPathDigest));let $=(0,i.Z6)()?()=>(0,o.n)(ez):()=>(0,o.n)(e=>e.markerAndDiffNavigationActions),P=(0,i.Z6)()?()=>(0,o.n)(eW):()=>(0,o.n)(e=>e.markerAndDiffNavigation.commentId);(0,i.Z6)()||(()=>(0,o.n)(e=>e.markerAndDiffNavigation.getCommentId));let F=(0,i.Z6)()?()=>(0,o.n)(eX):()=>(0,o.n)(e=>e.markerAndDiffNavigation.getMarkerId),G=(0,i.Z6)()?()=>(0,o.n)(eZ):()=>(0,o.n)(e=>e.markerAndDiffNavigation.markerId),V=(0,i.Z6)()?()=>{let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=U([eQ,eJ,eY,e0,e1],e2,s.x),t[0]=e):e=t[0],(0,o.n)(e)}:()=>(0,o.n)(U([e=>e.diffSummaries,e=>e.codeowners,e=>e.diffFilter.state,e=>e.diffFilter.filtersInteractedWith,e=>e.changeGroupGeneration.changeGroups],(e,t,n,i,r)=>{let a=new Map,s=[],l=r.find(e=>e.id===n.activeChangeGroupId),o=l?.hunkPositions?new Set(Object.keys(l.hunkPositions)):void 0;for(let i of Object.values(e)){let e=(0,d.hG)({diffPath:i.path,codeownersData:t}).isOwnedByViewer;H(i,n,e,o)?(s.push(i),a.set(i.path,!1)):a.set(i.path,!0)}if(i){let e=s.length,t=`${e} file${1===e?"":"s"} remain${1===e?"s":""}`;(0,c.k)(t,150)}return{hiddenFiles:a,filteredDiffSummaries:s}},s.x));function H(e,t,n,i){return(!i||!!i.has(e.path))&&e.path.toLowerCase().includes(t.filterText.toLowerCase())&&!t.unselectedFileExtensions.has((0,u.QC)(e.path))&&(t.showDeletedFiles||"REMOVED"!==e.changeType&&"DELETED"!==e.changeType)&&(!t.showOnlyManifestFiles||!!e.isManifestFile)&&(!t.showOnlyOwnedFiles||n)&&(t.showViewedFiles||!e.markedAsViewed)&&(t.showVendoredFiles||!e.isVendored)}function U(e,t,n){let i,r;return a=>{let s=e.map(e=>e(a));if(i&&n(s,i))return r;let l=t(...s);return i=s,r=l,l}}let K=(0,i.Z6)()?()=>(0,o.n)((0,l.k)(e6)):()=>(0,o.n)((0,l.k)(e=>Object.values(e.markers||{}).flatMap(e=>Object.values(e).flatMap(e=>e?.annotations??v)))),B=(0,i.Z6)()?()=>(0,o.n)(e5):()=>(0,o.n)(e=>{let t=e.diffFilter.state.activeChangeGroupId;if(t)return e.changeGroupGeneration.changeGroups.find(e=>e.id===t)}),q=(0,i.Z6)()?()=>(0,o.n)(e7):()=>(0,o.n)(e=>e.diffFilter.state.activeChangeGroupId),z=(0,i.Z6)()?()=>(0,o.n)(e8):()=>(0,o.n)(e=>e.changeGroupGeneration.changeGroups),W=(0,i.Z6)()?()=>(0,o.n)(e9):()=>(0,o.n)(e=>e.changeGroupGeneration),X=(0,i.Z6)()?()=>(0,o.n)(te):()=>(0,o.n)(e=>e.changeGroupGeneration.unavailableReason?e.changeGroupGeneration.unavailableReason:e.changeGroupGeneration.changeGroups.length<1&&!e.changeGroupGeneration.latestChangeGroupOrchestration?(0,h.G7)("hide_groups_list_for_few_groups")?f:m:null),Z=(0,i.Z6)()?()=>(0,o.n)(tt):()=>(0,o.n)(e=>e.changeGroupGeneration.changeGroupGenerationChannel),Q=(0,i.Z6)()?()=>(0,o.n)(tn):()=>(0,o.n)(e=>e.changeGroupGenerationActions),J=(0,i.Z6)()?()=>(0,o.n)(ti):()=>(0,o.n)(e=>e.changeGroupGeneration.latestChangeGroupOrchestration),Y=(0,i.Z6)()?()=>(0,o.n)(tr):()=>(0,o.n)(e=>e.changeGroupGeneration.canAccessChangeGroups),ee=(0,i.Z6)()?()=>(0,o.n)(ta):()=>(0,o.n)(e=>e.showChangeGroupPreference),et=(0,i.Z6)()?e=>{let t,n=(0,r.c)(2);return n[0]!==e?(t=t=>t.markers?.[e],n[0]=e,n[1]=t):t=n[1],(0,o.n)((0,l.k)(t))}:e=>(0,o.n)((0,l.k)(t=>t.markers?.[e])),en=(0,i.Z6)()?e=>{let t,n=(0,r.c)(2);return n[0]!==e?(t=t=>{let n=Object.values(t.markers||{}).flatMap(tl),i=[];if(!e)return n;for(let t of e)if(n){for(let e of n)if(Number(e.id)===t){i.push(e);break}}return i},n[0]=e,n[1]=t):t=n[1],(0,o.n)((0,l.k)(t))}:e=>(0,o.n)((0,l.k)(t=>{let n=Object.values(t.markers||{}).flatMap(e=>Object.values(e).flatMap(e=>e?.threads??b)),i=[];if(!e)return n;for(let t of e)if(n){for(let e of n)if(Number(e.id)===t){i.push(e);break}}return i})),ei=(0,i.Z6)()?()=>(0,o.n)(to):()=>(0,o.n)(e=>e.getThread),er=(0,i.Z6)()?(e,t,n)=>{let i,a=(0,r.c)(4);return a[0]!==t||a[1]!==n||a[2]!==e?(i=i=>i.markers?.[t]?.[n]?.threads.find(t=>t.id===e),a[0]=t,a[1]=n,a[2]=e,a[3]=i):i=a[3],(0,o.n)(i)}:(e,t,n)=>(0,o.n)(i=>i.markers?.[t]?.[n]?.threads.find(t=>t.id===e)),ea=(0,i.Z6)()?(e,t)=>{let n,i=(0,r.c)(3);return i[0]!==e||i[1]!==t?(n=U([n=>n.markers?.[e]?.[t],td],tc,s.x),i[0]=e,i[1]=t,i[2]=n):n=i[2],(0,o.n)(n)}:(e,t)=>(0,o.n)(U([n=>n.markers?.[e]?.[t],e=>e.commentsPreference],(e,t)=>{let n=e?.threads??b,i=e?.annotations??v;return n.length||i.length?{threads:n,annotations:i,commentsPreference:t}:x},s.x)),es=(0,i.Z6)()?e=>{let t,n=(0,r.c)(2);return n[0]!==e?(t=t=>{let n=Object.values(t.markers||{}).flatMap(tm).filter(t=>t&&(!e||e.includes(parseInt(t.id))));return n?n.filter(tf).reduce(th,0):0},n[0]=e,n[1]=t):t=n[1],(0,o.n)(t)}:e=>(0,o.n)(t=>{let n=Object.values(t.markers||{}).flatMap(e=>Object.values(e).flatMap(e=>e?.threads??b)).filter(t=>t&&(!e||e.includes(parseInt(t.id))));return n?n.filter(e=>!e.isResolved&&!e.positioning?.isOutdated).reduce((e,t)=>e+(t.commentsData?.comments?.length??0),0):0}),el=(0,i.Z6)()?()=>(0,o.n)(tg):()=>(0,o.n)(e=>e.markersActions),eo=(0,i.Z6)()?()=>(0,o.n)(tp):()=>(0,o.n)(e=>e.markers),ed=(0,i.Z6)()?()=>(0,o.n)(tb):()=>(0,o.n)(e=>e.pendingReviewActions),ec=(0,i.Z6)()?()=>(0,o.n)(tv):()=>(0,o.n)(e=>e.pendingReview),eu=(0,i.Z6)()?()=>(0,o.n)(tx):()=>(0,o.n)(e=>(e.pendingReview?.pendingReviewIDs?.length??0)>0),em=(0,i.Z6)()?()=>(0,o.n)(tC):()=>(0,o.n)(e=>e.codeownersActions),ef=(0,i.Z6)()?()=>(0,o.n)(ty):()=>(0,o.n)(e=>e.filesCollapsedStatusActions),eh=(0,i.Z6)()?e=>{let t,n=(0,r.c)(2);return n[0]!==e?(t=t=>t.collapsedFilesMap?.[e]??!1,n[0]=e,n[1]=t):t=n[1],(0,o.n)(t)}:e=>(0,o.n)(t=>t.collapsedFilesMap?.[e]??!1),eg=(0,i.Z6)()?()=>(0,o.n)(tL):()=>(0,o.n)(e=>e.getCollapsedDiffStatus),ep=(0,i.Z6)()?e=>{let t,n=(0,r.c)(2);return n[0]!==e?(t=t=>t.diffEntries?.[e]??null,n[0]=e,n[1]=t):t=n[1],(0,o.n)(t)}:e=>(0,o.n)(t=>t.diffEntries?.[e]??null),eb=(0,i.Z6)()?()=>(0,o.n)(tS):()=>(0,o.n)(e=>e.diffEntries);(0,i.Z6)()||(()=>(0,o.n)(e=>Object.keys(e.diffEntries).length));let ev=(0,i.Z6)()?()=>(0,o.n)(tN):()=>(0,o.n)(e=>e.diffEntriesActions),ex=(0,i.Z6)()?e=>{let t,n,i=(0,r.c)(4);i[0]!==e?(t=new Set(e.map(tj)),i[0]=e,i[1]=t):t=i[1];let a=t;return i[2]!==a?(n=e=>e.entries.filter(e=>a.has(e.path)),i[2]=a,i[3]=n):n=i[3],(0,o.n)((0,l.k)(n))}:e=>{let t=(0,a.useMemo)(()=>new Set(e.map(e=>e.path)),[e]);return(0,o.n)((0,l.k)(e=>e.entries.filter(e=>t.has(e.path))))},eC=(0,i.Z6)()?()=>(0,o.n)(tD):()=>(0,o.n)(e=>e.progressiveDiffsActions),ey=(0,i.Z6)()?()=>(0,o.n)(tw):()=>(0,o.n)(e=>e.diffFilter.state),eL=(0,i.Z6)()?()=>(0,o.n)(tI):()=>(0,o.n)(e=>e.diffFilterActions),eS=(0,i.Z6)()?()=>(0,o.n)(tk):()=>(0,o.n)(e=>{let t=e.diffFilter.state;return t.filterText.length>0||t.unselectedFileExtensions.size>0||!0===t.showOnlyOwnedFiles||!1===t.showDeletedFiles||!0===t.showOnlyManifestFiles||!1===t.showVendoredFiles||!1===t.showViewedFiles}),eN=(0,i.Z6)()?()=>(0,o.n)(tA):()=>(0,o.n)(e=>e.settingsActions),ej=(0,i.Z6)()?e=>{let t,n=(0,r.c)(2);return n[0]!==e?(t=t=>t.summariesViewedStatus?.[e]??!1,n[0]=e,n[1]=t):t=n[1],(0,o.n)(t)}:e=>(0,o.n)(t=>t.summariesViewedStatus?.[e]??!1),eD=(0,i.Z6)()?()=>(0,o.n)(tE):()=>(0,o.n)(e=>e.summariesViewedCount),ew=(0,i.Z6)()?()=>(0,o.n)(tR):()=>(0,o.n)(e=>e.suggestionBatch),eI=(0,i.Z6)()?()=>(0,o.n)(t_):()=>(0,o.n)(e=>e.suggestionBatchActions),ek=(0,i.Z6)()?()=>(0,o.n)(tT):()=>(0,o.n)(e=>e.suggestionBatch.isSuggestionBatchPending),eA=(0,i.Z6)()?e=>{let t,n=(0,r.c)(2);return n[0]!==e?(t=t=>t.suggestionBatch.activeBatch.some(t=>t.commentDatabaseId===e.commentDatabaseId&&t.suggestionIndex===e.suggestionIndex),n[0]=e,n[1]=t):t=n[1],(0,o.n)(t)}:e=>(0,o.n)(t=>t.suggestionBatch.activeBatch.some(t=>t.commentDatabaseId===e.commentDatabaseId&&t.suggestionIndex===e.suggestionIndex));function eE(e){return e.comparisonInfo}function eR(e){return e.comparisonInfoActions}function e_(e){return e.isSingleFileMode}function eT(e){return"FULL"!==e.comparisonInfo.comparisonView}function eO(e){return e.comparisonInfo.selectedRange||p}function eM(e){return e.pullRequest.id}function e$(e){return e.pullRequest}function eP(e){return e.pullRequest.basePath}function eF(e){return e.repository}function eG(e){return e.diffSummaries}function eV(e){return Object.values(e.diffSummaries).length??0}function eH(e){return e.diffSummariesActions}function eU(e){return e.diffSummaries}function eK(e){return Object.values(e)}function eB(e){return e.entries}function eq(e){return e.selectedPathDigest}function ez(e){return e.markerAndDiffNavigationActions}function eW(e){return e.markerAndDiffNavigation.commentId}function eX(e){return e.markerAndDiffNavigation.getMarkerId}function eZ(e){return e.markerAndDiffNavigation.markerId}function eQ(e){return e.diffSummaries}function eJ(e){return e.codeowners}function eY(e){return e.diffFilter.state}function e0(e){return e.diffFilter.filtersInteractedWith}function e1(e){return e.changeGroupGeneration.changeGroups}function e2(e,t,n,i,r){let a=new Map,s=[],l=r.find(e=>e.id===n.activeChangeGroupId),o=l?.hunkPositions?new Set(Object.keys(l.hunkPositions)):void 0;for(let i of Object.values(e)){let e=(0,d.hG)({diffPath:i.path,codeownersData:t}).isOwnedByViewer;H(i,n,e,o)?(s.push(i),a.set(i.path,!1)):a.set(i.path,!0)}if(i){let e=s.length,t=`${e} file${1===e?"":"s"} remain${1===e?"s":""}`;(0,c.k)(t,150)}return{hiddenFiles:a,filteredDiffSummaries:s}}function e3(e){return e?.annotations??v}function e4(e){return Object.values(e).flatMap(e3)}function e6(e){return Object.values(e.markers||{}).flatMap(e4)}function e5(e){let t=e.diffFilter.state.activeChangeGroupId;if(t)return e.changeGroupGeneration.changeGroups.find(e=>e.id===t)}function e7(e){return e.diffFilter.state.activeChangeGroupId}function e8(e){return e.changeGroupGeneration.changeGroups}function e9(e){return e.changeGroupGeneration}function te(e){return e.changeGroupGeneration.unavailableReason?e.changeGroupGeneration.unavailableReason:e.changeGroupGeneration.changeGroups.length<1&&!e.changeGroupGeneration.latestChangeGroupOrchestration?(0,h.G7)("hide_groups_list_for_few_groups")?f:m:null}function tt(e){return e.changeGroupGeneration.changeGroupGenerationChannel}function tn(e){return e.changeGroupGenerationActions}function ti(e){return e.changeGroupGeneration.latestChangeGroupOrchestration}function tr(e){return e.changeGroupGeneration.canAccessChangeGroups}function ta(e){return e.showChangeGroupPreference}function ts(e){return e?.threads??b}function tl(e){return Object.values(e).flatMap(ts)}function to(e){return e.getThread}function td(e){return e.commentsPreference}function tc(e,t){let n=e?.threads??b,i=e?.annotations??v;return n.length||i.length?{threads:n,annotations:i,commentsPreference:t}:x}function tu(e){return e?.threads??b}function tm(e){return Object.values(e).flatMap(tu)}function tf(e){return!e.isResolved&&!e.positioning?.isOutdated}function th(e,t){return e+(t.commentsData?.comments?.length??0)}function tg(e){return e.markersActions}function tp(e){return e.markers}function tb(e){return e.pendingReviewActions}function tv(e){return e.pendingReview}function tx(e){return(e.pendingReview?.pendingReviewIDs?.length??0)>0}function tC(e){return e.codeownersActions}function ty(e){return e.filesCollapsedStatusActions}function tL(e){return e.getCollapsedDiffStatus}function tS(e){return e.diffEntries}function tN(e){return e.diffEntriesActions}function tj(e){return e.path}function tD(e){return e.progressiveDiffsActions}function tw(e){return e.diffFilter.state}function tI(e){return e.diffFilterActions}function tk(e){let t=e.diffFilter.state;return t.filterText.length>0||t.unselectedFileExtensions.size>0||!0===t.showOnlyOwnedFiles||!1===t.showDeletedFiles||!0===t.showOnlyManifestFiles||!1===t.showVendoredFiles||!1===t.showViewedFiles}function tA(e){return e.settingsActions}function tE(e){return e.summariesViewedCount}function tR(e){return e.suggestionBatch}function t_(e){return e.suggestionBatchActions}function tT(e){return e.suggestionBatch.isSuggestionBatchPending}},36472:(e,t,n)=>{n.d(t,{A:()=>a});var i=n(13083),r=n(3038);function a({selectedLineRange:e,leftLines:t,rightLines:n}){let a=!!n,{startOrientation:s,endOrientation:l}=e,o=m(s).findIndex(t=>(0,r.a2)(t,e.startLineNumber,e.startOrientation)),d=m(l).findIndex(t=>(0,r.a2)(t,e.endLineNumber,e.endOrientation)),c=o>=0&&d>=0;function u(e){if(!c||(0,r.Po)(e))return!1;let t=m((0,i.XU)(e.type)).indexOf(e);return t>=o&&t<=d}function m(e){var r;return a&&"left"!==("string"==typeof(r=e)?r:(0,i.XU)(r.type))?n:t}let f=m("left").filter(e=>u(e));return{selectedRightLines:m("right").filter(e=>u(e)),selectedLeftLines:f}}},36729:(e,t,n)=>{n.d(t,{Vv:()=>r,Wr:()=>a,zW:()=>i});let i="FILE",r="empty-diff-line",a={Line:"line",Multiline:"multiline",File:"file"}},39698:(e,t,n)=>{n.d(t,{i:()=>u});var i=n(68273),r=n(21728),a=n(48845),s=n(20622),l=n(97665),o=n(94747),d=n(69510),c=n(27011);let u=(0,i.Z6)()?function(e,t){let n,i,u,f=(0,r.c)(11),h=(0,c.Kp)(),g=`${h}/page_data/${s.uT.unresolveThread}`,p=(0,l.jE)(),{updateThread:b}=(0,c.an)();return f[0]!==g?(n=async e=>{let{threadId:t}=e,n=await (0,a.q$)(g,{method:"POST",body:{threadId:t}});(0,a.R)(n)},f[0]=g,f[1]=n):n=f[1],f[2]!==h||f[3]!==e||f[4]!==t||f[5]!==p||f[6]!==b?(i=(n,i)=>(b(Number(i.threadId),e,t,m),p.invalidateQueries({queryKey:(0,d.XG)(h)})),f[2]=h,f[3]=e,f[4]=t,f[5]=p,f[6]=b,f[7]=i):i=f[7],f[8]!==n||f[9]!==i?(u={mutationFn:n,onSuccess:i},f[8]=n,f[9]=i,f[10]=u):u=f[10],(0,o.n)(u)}:function(e,t){let n=(0,c.Kp)(),i=`${n}/page_data/${s.uT.unresolveThread}`,r=(0,l.jE)(),{updateThread:u}=(0,c.an)();return(0,o.n)({mutationFn:async({threadId:e})=>{let t=await (0,a.q$)(i,{method:"POST",body:{threadId:e}});(0,a.R)(t)},onSuccess:(i,a)=>(u(Number(a.threadId),e,t,e=>{if(e)return{...e,isResolved:!1,resolvedBy:void 0}}),r.invalidateQueries({queryKey:(0,d.XG)(n)}))})};function m(e){if(e)return{...e,isResolved:!1,resolvedBy:void 0}}},43362:(e,t,n)=>{n.d(t,{Be:()=>a,Sl:()=>l,Wp:()=>r,YY:()=>d,jH:()=>o,wm:()=>s});var i=n(36729);function r(e){return e.reduce((e,t)=>(e[t.path]=t,e),{})}function a(e){return e.reduce((e,t)=>(e[t.path]=!!t.markedAsViewed,e),{})}function s(e){let t=e.comments.map(e=>parseInt(e.threadId));return{id:e.id,pendingReviewIDs:t,comments:e.comments}}function l(e){return e.reduce((e,t)=>(e[t.path]=t,e),{})}function o(e,t){if(!e)return;let n={};if(!t)return n;for(let r of t){if(!r.markersMap||0===Object.keys(r.markersMap).length)continue;let t=r.path,a={};for(let t in r.markersMap){let n=r.markersMap[t];if(!n?.threads&&!n?.annotations)continue;let s={threads:[],annotations:[]};if(n.annotations)for(let t of n.annotations){let n=e.annotations[Number(t.id)];n&&s.annotations.push(n)}if(n.threads)for(let i of n.threads){let n=function(e,t){if("FILE"===e)return;let n=e[0];if(!u(n))return;let i=Number(e.slice(1)),r=-1,a="R";if(t.start){r=parseInt(t.start.slice(1));let e=t.start[0];u(e)&&(a=e)}else r=i,a=n;return{endLine:i,endDiffSide:c[n],startLine:r,startDiffSide:c[a],isOutdated:!!t.outdatedReason}}(t,i),r=e.threads[Number(i.id)];r&&n&&(r={...r,positioning:n,subject:n}),r&&s.threads.push(r)}"FILE"===t?a[i.zW]=s:a[t]=s}n[t]=a}return n}function d(e){return{endLine:e.line,endDiffSide:e.side?.toLowerCase()==="right"?"RIGHT":"LEFT",startLine:e.startLine??e.line,startDiffSide:e.startSide?e.startSide?.toLowerCase()==="right"?"RIGHT":"LEFT":e.side?.toLowerCase()==="right"?"RIGHT":"LEFT",isOutdated:!1}}let c={L:"LEFT",R:"RIGHT"};function u(e){return"L"===e||"R"===e}},43645:(e,t,n)=>{n.d(t,{v:()=>M,n:()=>O});var i=n(74848),r=n(68273),a=n(96540),s=n(71323),l=n(97283),o=n(87134),d=n(1932),c=n(21132),u=n(15697);function m({diffSummaries:e,diffSummariesArray:t,loadedPathDigests:n,loadingPathDigests:i,selectedPathDigest:r}){let a=!0,s=t??Object.values(e),l=s.findIndex(e=>e.pathDigest===r);return s.map(({path:e,pathDigest:t},r)=>{let s,o;switch(!0){case n.has(t):s=c.s.Loaded;break;case i.has(t):s=c.s.Loading;break;default:s=c.s.NotLoaded}let d=!1;return s===c.s.Loaded?(o="RENDER",d=!1):(r===l?(o="EAGER_AUTO_LOAD",d=!0):(o=r<l?"LAZY_AUTO_LOAD":r===l+1?"EAGER_AUTO_LOAD":a?"EAGER_AUTO_LOAD":"HIDE",d=!1),a&&"LAZY_AUTO_LOAD"!==o&&(a=!1)),{path:e,pathDigest:t,loadingStatus:s,renderMode:o,loadSolo:d}})}function f({progressiveDiffEntries:e,startingAt:t,preferAnySoloEntry:n}){if(n){let t=e.find(e=>e.loadSolo&&e.loadingStatus===c.s.NotLoaded);if(t)return[t]}let i=t?e.findIndex(e=>e.pathDigest===t.pathDigest):e.findIndex(e=>e.loadingStatus===c.s.NotLoaded);if(-1===i)return[];let r=e[i];if(r&&r.loadSolo&&r.loadingStatus===c.s.NotLoaded)return[r];let a=[];for(let t=i;t<e.length;t++){let n=e[t];if(!n||(n.loadingStatus===c.s.NotLoaded&&a.push(n),a.length>=4))break}return a}var h=n(70170);let g="undefined"!=typeof globalThis&&void 0!==globalThis.window,p="undefined"!=typeof process&&!1,b={timeout:150,useIdleCallback:!0};var v=n(69599),x=n(91747),C=n(61583),y=n(79472),L=n(43362),S=n(48845),N=n(20622),j=n(96379),D=n(16235);function w({basePath:e,effectiveRange:t,hideWhitespace:n}){return[N.uT.diffEntries,e,`baseOid:${t.baseOid}`,`headOid:${t.headOid}`,`hideWhitespace:${n}`]}async function I(e){let t=(0,D.S)(),n=w(e),i=await A(e);return i&&i.length>0&&t.setQueryData(n,(0,d.jM)(e=>{if(!e)return i;for(let t of i)e.find(e=>e.pathDigest===t.pathDigest)||e.push(t)})),i}async function k(e){let t,n=(0,D.S)(),i=w(e),r=n.getQueryData(i);if(r?.length){let n=new Set(r.map(e=>e.path));if(0===(t=e.paths.filter(e=>!n.has(e))).length)return r}else t=e.paths;let a=await A({...e,paths:t});return a&&a.length>0&&n.setQueryData(i,(0,d.jM)(e=>{if(!e)return a;for(let t of a)e.find(e=>e.pathDigest===t.pathDigest)||e.push(t)})),(n.getQueryData(i)||[]).filter(t=>e.paths.includes(t.path))}async function A({basePath:e,fullDiff:t,effectiveRange:n,paths:i,contextRanges:r,signal:a,hideWhitespace:s,isComparisonOutdated:l}){let o=new URLSearchParams,d=i.map(e=>encodeURIComponent(e));if(o.append("paths",d.join(",")),r){let e=i.map(e=>(r[e]??[]).map(([e,t])=>`${e}-${t}`).join(",")).join(":");o.append("ctx",e)}o.append("w",s?"1":"0"),n.baseOid===t.baseOid?o.append("range",n.headOid):o.append("range",`${n.baseOid}..${n.headOid}`),l&&o.append("outdated","1");let c=`${e}/page_data/${N.uT.diffEntries}?${o.toString()}`;try{let e=await (0,j.Sr)(c,{signal:a});if(a?.aborted)return;let t=await (0,S.hp)(e);return(0,S.R)(e,t),t??void 0}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;throw e}}function E(e,t,n,i){return[N.uT.diffContextLines,e,t,n,i]}async function R({contextLineRanges:e,basePath:t,path:n,w:i="0",fullDiff:r,effectiveRange:a}){let s=new URLSearchParams;for(let t of(s.append("path",n),e))s.append("context_line_ranges[]",JSON.stringify(t));s.append("w",i),a.baseOid===r.baseOid?s.append("range",a.headOid):s.append("range",`${a.baseOid}..${a.headOid}`);let l=`${t}/page_data/${N.uT.diffContextLines}?${s.toString()}`,o=await (0,j.QJ)(l);if(o.ok)return await o.json()??void 0}var _=n(88008);let T=(0,a.createContext)(null),O=(0,r.Z6)()?function(e){let t=(0,a.useContext)(T);if(!t)throw Error("Missing PullRequestStoreProvider in the tree");return(0,s.P)(t,e)}:function(e){let t=(0,a.useContext)(T);if(!t)throw Error("Missing PullRequestStoreProvider in the tree");return(0,s.P)(t,e)},M=({initData:e,children:t})=>{var n,r,s,l,o,d;let c,u,m=(0,a.useRef)(null),f=(0,x.u)("prx_files_lite_throttle"),h=(0,x.u)("prx_files_medium_throttle"),g=(0,y.Qn)(e.user.viewSettings.hideWhitespace),p=e.user.viewSettings.commentsPreference,b=(0,L.Wp)(e.diffSummaries),v=(0,L.Be)(e.diffSummaries),S=(0,L.wm)(e.viewerPendingReview),N=(0,L.Sl)(e.diffContents),j=(0,L.jH)(e.markers,e.diffSummaries),I=(0,_.Ol)(e.pullRequest.pathName,e.pullRequest.comparison.headOid);return m.current||(n=e.comparison.selectedRange?.baseOid,r=e.comparison.selectedRange?.headOid,s=e.pullRequest.pathName,l=e.diffContents,o=e.pullRequest.comparison,d=g,c=(0,D.S)(),u=w({basePath:s,effectiveRange:{baseOid:n??o.baseOid,headOid:r??o.headOid},hideWhitespace:d}),c.setQueryData(u,l),m.current=$({baseOid:e.pullRequest.comparison.baseOid,headOid:e.pullRequest.comparison.headOid,selectedCommitRange:e.comparison.selectedRange,comparisonView:e.comparison.viewing,changeGroupGeneration:e.changeGroupGeneration,hideWhitespace:g,isSingleFileMode:e.isSingleFileMode,collapsedFilesMap:v,initialSummariesViewedStatus:v,initialSummariesViewedCount:e.user.viewedFilesCount,diffEntries:N,commentsPreference:p,initialDiffSummaries:b,initialLoadedPathDigests:new Set(e.diffContents.map(e=>e.pathDigest)),markers:j,basePath:e.pullRequest.pathName,pendingReview:S,prxFilesLiteThrottle:f,prxFilesMediumThrottle:h,pullRequest:e.pullRequest,baseRepository:e.repository,selectedPathDigest:(0,C.jU)((0,C.o9)()),initialActiveBatch:I.length>0?I:void 0,showChangeGroupPreference:e.user.viewSettings.showChangeGroups})),(0,i.jsx)(T.Provider,{value:m.current,children:t})},$=e=>(0,l.y)()((0,o.lt)((...t)=>({...(({changeGroupGeneration:{canAccessChangeGroups:e,changeGroups:t,changeGroupFeedbackOptions:n,latestChangeGroupOrchestration:i,changeGroupGenerationChannel:r,unavailableReason:a},showChangeGroupPreference:s})=>l=>({changeGroupGeneration:{canAccessChangeGroups:e,changeGroups:t,changeGroupFeedbackOptions:n,latestChangeGroupOrchestration:i,changeGroupGenerationChannel:r,unavailableReason:a},showChangeGroupPreference:s,changeGroupGenerationActions:{updateChangeGroupGeneration:e=>l(t=>({changeGroupGeneration:{...t.changeGroupGeneration,...e},showChangeGroupPreference:t.showChangeGroupPreference}),void 0,"updateChangeGroupGeneration"),updateChangeGroupPreference:e=>l(t=>({changeGroupGeneration:t.changeGroupGeneration,showChangeGroupPreference:e}),void 0,"updateChangeGroupPreference")}}))(e)(...t),...((e,t)=>({codeowners:void 0,codeownersActions:{setCodeowners:t=>{e({codeowners:t},void 0,"updateCodeowners")}}}))(...t),...(({baseOid:e,headOid:t,selectedCommitRange:n,comparisonView:i,hideWhitespace:r})=>a=>({comparisonInfo:{fullDiff:{baseOid:e,headOid:t},selectedRange:n,effectiveRange:n??{baseOid:e,headOid:t},hideWhitespace:r,comparisonView:i},isComparisonOutdated:!1,comparisonInfoActions:{updateWhitespace:e=>a(t=>({comparisonInfo:{...t.comparisonInfo,hideWhitespace:e}}),void 0,"comparisonInfo#updateWhitespace"),markComparisonOutdated:()=>a(()=>({isComparisonOutdated:!0}),void 0,"comparisonInfo#markComparisonOutdated")}}))(e)(...t),...((e,t)=>({diffFilter:{state:{activeChangeGroupId:void 0,filterText:"",fileExtensions:{},unselectedFileExtensions:new Set,showDeletedFiles:!0,showOnlyManifestFiles:!1,showOnlyOwnedFiles:!1,showVendoredFiles:!0,showViewedFiles:!0},filtersInteractedWith:!1},diffFilterActions:{updateDiffFilter:(n,i)=>{e({diffFilter:{...t().diffFilter,state:{...t().diffFilter.state,...n},filtersInteractedWith:t().diffFilter.filtersInteractedWith||!!i}},void 0,"updateFilters")},clearAllFilters:()=>{e({diffFilter:{...t().diffFilter,state:{...t().diffFilter.state,filterText:"",unselectedFileExtensions:new Set,showOnlyOwnedFiles:!1,showDeletedFiles:!0,showOnlyManifestFiles:!1,showVendoredFiles:!0,showViewedFiles:!0},filtersInteractedWith:!0}},void 0,"clearAllFilters")}}}))(...t),...(({initialDiffSummaries:e,initialSummariesViewedStatus:t,initialSummariesViewedCount:n})=>(i,r)=>({diffSummaries:e,summariesViewedCount:n,summariesViewedStatus:t,codeowners:void 0,getPathDigestFromThreadID:e=>{for(let t of Object.values(r().diffSummaries))if(t.markersMap){for(let[n,i]of Object.entries(t.markersMap))if(i.threads.some(t=>Number(t.id)===Number(e)))return t.pathDigest}},getPathDigestFromAnnotationID:e=>{for(let t of Object.values(r().diffSummaries))if(t.markersMap){for(let[n,i]of Object.entries(t.markersMap))if(i.annotations.some(t=>t.id===e))return t.pathDigest}},diffSummariesActions:{setDiffSummaries:e=>{i({diffSummaries:e},void 0,"updateDiffSummaries")},setDiffViewed:(e,t)=>{i(n=>n.diffSummaries?{summariesViewedStatus:(0,d.jM)(n.summariesViewedStatus,n=>{n[e]=t}),summariesViewedCount:n.summariesViewedCount+(t?1:-1),diffSummaries:(0,d.jM)(n.diffSummaries,n=>{n[e]&&(n[e].markedAsViewed=t)})}:n)},onCommentThreadAdded:({path:e,diffLineKey:t,startPosition:n,threadID:r})=>{i((0,d.jM)(i=>{if(!i.diffSummaries)return;let a=i.diffSummaries[e];if(!a)return;let s=a.markersMap??{};s[t]||(s[t]={threads:[],annotations:[]}),s[t].threads.push({id:parseInt(r),start:n}),a.totalCommentsCount=(a.totalCommentsCount||0)+1}),void 0,"commentAddedForDiffSummary")},onCommentThreadDeleted:({path:e,threadID:t})=>{i((0,d.jM)(n=>{if(!n.diffSummaries)return;let i=n.diffSummaries[e];if(i&&i?.totalCommentsCount&&i?.markersMap)for(let[e,n]of Object.entries(i.markersMap))n.threads=n.threads.filter(e=>e.id!==parseInt(t)),0===n.threads.length&&0===n.annotations.length&&delete i.markersMap[e]}),void 0,"commentDeletedForDiffSummary")}}}))(e)(...t),...(({markers:e})=>(t,n)=>({markers:e,getThread:(e,t,i)=>{let r=n().markers;if(r)return r[t]?.[i]?.threads?.find(t=>Number(t.id)===e)},getThreadFromCommentID:e=>{let t=n().markers;if(!t)return;let i=Object.values(t).flatMap(e=>Object.values(e).flatMap(e=>e?.threads??[]));if(i){for(let t of Object.values(i))if(t?.commentsData?.comments.some(t=>t.databaseId===e))return t}},getAnnotationFromID:e=>{let t=n().markers;if(!t)return;let i=Object.values(t).flatMap(e=>Object.values(e).flatMap(e=>e?.annotations??[]));if(i){for(let t of Object.values(i))if(t.databaseId===e)return t}},markersActions:{updateThread:(e,i,r,a)=>{let s=n().markers;if(!s)return;let l=a(s[i]?.[r]?.threads?.find(t=>Number(t.id)===e));l&&t({markers:(0,d.jM)(s,t=>{let n=t[i]?.[r]?.threads?.findIndex(t=>Number(t.id)===e);if(void 0===n||-1===n)t[i]||(t[i]={}),t[i][r]||(t[i][r]={threads:[],annotations:[]}),t[i][r].threads.push(l);else if(t[i]&&t[i][r]&&-1!==n){let e=l.positioning??t[i][r].threads[n]?.positioning,a=l.subject??t[i][r].threads[n]?.subject,s={...l,positioning:e,subject:a};t[i][r].threads[n]=s}})},void 0,"updateThread")},updateThreads:e=>{let i=n().markers;i&&t({markers:(0,d.jM)(i,t=>{for(let n of Object.keys(i)){let i=t[n];if(i)for(let t of Object.keys(i)){let n=i[t];if(!n)continue;let r=n.threads;r&&(n.threads=e(r))}}})})},deleteThreadComment:(e,i,r,a)=>{let s="not_found",l=n().markers;return l&&t({markers:(0,d.jM)(l,t=>{let n=t[r]?.[a]?.threads?.find(t=>Number(t.id)===e);if(!n){s="not_found";return}let l=n.commentsData,o=l?.comments.filter(e=>e.id!==i)??[];if(!l||l.comments.length===o.length){s="not_found";return}if(0===o.length){s="thread_deleted";let n=t[r]?.[a]?.threads;if(n){let t=n.findIndex(t=>Number(t.id)===e);-1!==t&&n.splice(t,1)}}else s="comment_deleted",l&&(l.comments=o)})},void 0,"deleteThreadComment"),s},updateThreadComment:({threadID:e,filePath:i,lineMarkersKey:r,match:a,transform:s})=>{let l=n().markers;l&&t({markers:(0,d.jM)(l,t=>{let n,l=t[i]?.[r]?.threads?.find(t=>Number(t.id)===e);if(!l)return;let o=l.commentsData,d=o?.comments.findIndex(a);"number"==typeof d&&-1!==d&&(n=o?.comments[d]);let c=s(n);c&&(-1===d||"number"!=typeof d?o?.comments.push(c):o&&o.comments&&(o.comments[d]=c))})},void 0,"updateThreadComment")}}}))(e)(...t),...(({prxFilesLiteThrottle:e,prxFilesMediumThrottle:t,initialDiffSummaries:n,initialLoadedPathDigests:i,selectedPathDigest:r})=>(s,l)=>{let o,d=(0,v.G7)("pr_react_progressive_queue");return o=t?100:50*!!e,{entries:m({diffSummaries:n,loadedPathDigests:i,loadingPathDigests:new Set,selectedPathDigest:r}),selectedPathDigest:r,progressiveDiffQueue:[],queueRunning:!1,internalProgressiveDiffsActions:{loadSelectedEntries:(0,h.n)(async e=>{if(0===e.length)return;let t=e.map(e=>e.path),n=e.map(e=>e.pathDigest),i=l().entries.filter(e=>e.loadingStatus===c.s.Loaded).map(e=>e.pathDigest),r=l().entries.filter(e=>e.loadingStatus===c.s.Loading).map(e=>e.pathDigest);s(e=>({entries:m({diffSummaries:e.diffSummaries,loadedPathDigests:new Set(i),loadingPathDigests:new Set([...r,...n]),selectedPathDigest:e.selectedPathDigest})}),void 0,"loadSelectedEntries#preFetch");let{loadDiffEntries:a}=l().diffEntriesActions,o=(0,u.i)({paths:new Set(t),diffSummaries:l().diffSummaries}),d=await a({paths:t,contextRanges:o});if(!d||0===d.length){let e=[...l().entries.filter(e=>e.loadingStatus===c.s.Loaded).map(e=>e.pathDigest)],t=l().entries.filter(e=>e.loadingStatus===c.s.Loading).map(e=>e.pathDigest);return s({entries:m({diffSummaries:l().diffSummaries,loadedPathDigests:new Set(e),loadingPathDigests:new Set(t),selectedPathDigest:l().selectedPathDigest})},void 0,"loadSelectedEntries#postFetch#noAPIData")}let f=d.map(e=>e.pathDigest),h=[...l().entries.filter(e=>e.loadingStatus===c.s.Loaded).map(e=>e.pathDigest),...f],g=l().entries.filter(e=>e.loadingStatus===c.s.Loading).filter(e=>!f.includes(e.pathDigest)).map(e=>e.pathDigest);s(e=>({...e,entries:m({diffSummaries:l().diffSummaries,loadedPathDigests:new Set(h),loadingPathDigests:new Set(g),selectedPathDigest:l().selectedPathDigest})}),void 0,"loadSelectedEntries#postFetch")},o),enqueue:e=>{s(t=>({...t,progressiveDiffQueue:[...t.progressiveDiffQueue,e]}),void 0,"enqueue")},processQueue:async()=>{if(!d)return;let e=()=>(function(e,t={}){let{timeout:n,useIdleCallback:i}={...b,...t};if(!g||p)return void e();let r=()=>{"function"==typeof a.startTransition?(0,a.startTransition)(e):e()},s=globalThis;i&&"function"==typeof s.requestIdleCallback?s.requestIdleCallback(r,{timeout:n}):setTimeout(r,0)})(()=>l().internalProgressiveDiffsActions.processQueue(),{timeout:20}),t=l().progressiveDiffQueue;if(0===t.length)return l().entries?.some(e=>e.loadingStatus===c.s.Loading||e.loadingStatus===c.s.NotLoaded)?e():s(e=>({...e,queueRunning:!1}),void 0,"stopQueue");let[n,...i]=t.filter((e,t,n)=>t===n.findIndex(t=>t.startingAt.path===e.startingAt.path));s(e=>({...e,progressiveDiffQueue:i}),void 0,"processQueue#cleanQueue");let r=f({progressiveDiffEntries:l().entries,startingAt:n?.startingAt,preferAnySoloEntry:n?.preferAnySoloEntry});return await l().internalProgressiveDiffsActions.loadSelectedEntries(r),e()}},progressiveDiffsActions:{startQueue:()=>{d&&!l().queueRunning&&(s(e=>({...e,queueRunning:!0}),void 0,"startQueue"),l().internalProgressiveDiffsActions.processQueue())},loadMore:async(e,{preferAnySoloEntry:t}={})=>{if(d&&e)return l().internalProgressiveDiffsActions.enqueue({startingAt:e,preferAnySoloEntry:t});let n=f({progressiveDiffEntries:l().entries,startingAt:e,preferAnySoloEntry:t});return l().internalProgressiveDiffsActions.loadSelectedEntries(n)},updateSelectedPathDigest:e=>{s(t=>({...t,selectedPathDigest:e}));let t=l().entries.find(t=>t.pathDigest===e);if(t)return l().internalProgressiveDiffsActions.loadSelectedEntries([t])}}}})(e)(...t),...(({collapsedFilesMap:e})=>(t,n)=>({collapsedFilesMap:e,getCollapsedDiffStatus:e=>n().collapsedFilesMap?.[e]??!1,filesCollapsedStatusActions:{updateFileCollapsedStatus:(e,i)=>{let r=n().collapsedFilesMap;r&&t({collapsedFilesMap:(0,d.jM)(r,t=>{t[e]=i})},void 0,"updateFileCollapsedStatus")},updateAllFilesCollapsedStatus:e=>{let i=n().collapsedFilesMap;i&&t({collapsedFilesMap:(0,d.jM)(i,t=>{for(let n of Object.keys(t))t[n]=e})},void 0,"updateAllFilesCollapsedStatus")}}}))(e)(...t),...(({pendingReview:e})=>(t,n)=>({pendingReview:e,pendingReviewActions:{addPendingComment:e=>{let i=n().pendingReview;i&&t({pendingReview:(0,d.jM)(i,t=>{t.pendingReviewIDs||(t.pendingReviewIDs=[]),t.pendingReviewIDs.push(e)})},void 0,"addPendingComment")},removePendingComment:e=>{let i=n().pendingReview;i&&t({pendingReview:(0,d.jM)(i,t=>{let n=t.pendingReviewIDs?.filter(t=>t!==e);t.pendingReviewIDs=n})},void 0,"removePendingComment")},clearPendingReview:()=>{let e=n().pendingReview;e&&t({pendingReview:(0,d.jM)(e,e=>{e.id=void 0,e.pendingReviewIDs=[],e.comments=[]})},void 0,"clearPendingReview")}}}))(e)(...t),...(({basePath:e,diffEntries:t,baseOid:n,headOid:i,selectedCommitRange:r})=>(a,s)=>{let l=r??{baseOid:n,headOid:i},o=(0,D.S)();for(let[n,i]of Object.entries(t)){let t=E(e,i.path,l.baseOid,l.headOid);o.setQueryData(t,()=>i.diffLines)}return{diffEntries:t,diffEntriesActions:{updateDiffEntries:t=>{let n=s().diffEntries??{},i={};for(let n of t){let t=E(e,n.path,s().comparisonInfo.effectiveRange.baseOid,s().comparisonInfo.effectiveRange.headOid);o.setQueryData(t,n.diffLines),i[n.path]=n}a({diffEntries:(0,d.jM)(n,e=>{for(let t of Object.keys(i))i[t]&&(e[t]=i[t])})},void 0,"updateDiffEntriesInMap")},loadDiffEntries:async t=>{var n;let i=await (n={basePath:e,...t,...s().comparisonInfo,isComparisonOutdated:s().isComparisonOutdated},(0,v.G7)("pr_sfv_new_diff_fetch")?k(n):I(n));return i&&0!==i.length?(s().diffEntriesActions.updateDiffEntries(i),i):[]},fetchContextLines:async({path:t,contextLineRanges:n,w:i="0"})=>{let r=E(e,t,s().comparisonInfo.effectiveRange.baseOid,s().comparisonInfo.effectiveRange.headOid),l=s().diffEntries[t];l&&await o.fetchQuery({queryKey:r,queryFn:async()=>{let d=await R({contextLineRanges:n,basePath:e,path:t,w:i,...s().comparisonInfo}),c=l.diffLines,u=o.setQueryData(r,e=>c=function(e,t){let n=new Map;for(let t of e){let e=`${t.left}-${t.right}`;n.set(e,t)}return t.map(e=>{let t=`${e.left}-${e.right}`,i=n.get(t);return i?{...e,position:i.position,displayNoNewLineWarning:i.displayNoNewLineWarning}:{...e,position:null,threadsData:void 0}})}(e??l.diffLines,d?.diffEntryLines??[]));return a(e=>({...e,diffEntries:{...e.diffEntries,[t]:{...l,diffLines:c}}}),void 0,"addContextLinesToDiffEntry"),u}})}}}})(e)(...t),...(({markers:e})=>(t,n)=>{let i,r,a=(0,C.Gl)(),s=(0,C.e3)();if(e){if(a){let t=Object.values(e||{}).flatMap(e=>Object.values(e).flatMap(e=>e?.threads??[]));if(t){let e=Number(a);for(let n of Object.values(t)){let t=n?.commentsData?.comments;if(n&&t)for(let a of t)Number(a.databaseId)===e&&(i=n.id,r=e)}}}else if(s){let t=Object.values(e).flatMap(e=>Object.values(e).flatMap(e=>e?.annotations??[]));if(t){let e=Number(s);for(let n of Object.values(t))Number(n.databaseId)===e&&(i=n.id)}}}return{markerAndDiffNavigation:{markerId:i,commentId:r,getCommentId:()=>n().markerAndDiffNavigation.commentId,getMarkerId:()=>n().markerAndDiffNavigation.markerId},markerAndDiffNavigationActions:{navigateToSelectedComment:e=>{let i=n().getThreadFromCommentID(e);if(i){let r=n().getPathDigestFromThreadID(i.id);n().progressiveDiffsActions.updateSelectedPathDigest(r),t(t=>({markerAndDiffNavigation:{...t.markerAndDiffNavigation,commentId:e,markerId:i?.id}}))}},navigateToSelectedAnnotation:e=>{let i=n().getAnnotationFromID(e);if(i){let r=n().getPathDigestFromAnnotationID(e);n().progressiveDiffsActions.updateSelectedPathDigest(r),t(e=>({markerAndDiffNavigation:{...e.markerAndDiffNavigation,commentId:void 0,markerId:i.id}}))}},handleHashUpdate:()=>{let e=(0,C.Gl)(),t=(0,C.e3)(),i=(0,C.jU)(window.location.hash),r=n(),a=r.markerAndDiffNavigation.commentId,s=r.markerAndDiffNavigation.markerId,l=r.selectedPathDigest;if(e&&e!==a)r.markerAndDiffNavigationActions.navigateToSelectedComment(e);else if(t){let e=r.getAnnotationFromID(t),n=e?.id;n&&n!==s&&r.markerAndDiffNavigationActions.navigateToSelectedAnnotation(t)}else i&&i!==l?r.progressiveDiffsActions.updateSelectedPathDigest(i):e||t||i||!l||r.progressiveDiffsActions.updateSelectedPathDigest(void 0)}}}})(e)(...t),...(({isSingleFileMode:e,commentsPreference:t})=>n=>({isSingleFileMode:e,commentsPreference:t,settingsActions:{updateCommentsPreference:e=>{n(()=>({commentsPreference:e}))}}}))(e)(...t),...(({pullRequest:e})=>(t,n)=>({pullRequest:{state:e.state,basePath:e.pathName,id:e.id,number:e.number},pullRequestActions:{updatePullRequestState:e=>{t({pullRequest:{...n().pullRequest,state:e}},void 0,"pullRequest#updatePullRequestState")}}}))(e)(...t),...(({baseRepository:e})=>()=>({repository:{baseRepository:{id:e.id,ownerLogin:e.ownerLogin,name:e.name}}}))(e)(...t),...(t=>({suggestionBatch:{activeBatch:e.initialActiveBatch??[],isSuggestionBatchPending:(e.initialActiveBatch?.length??0)>0},suggestionBatchActions:{addSuggestionToBatch:e=>t(t=>{if(t.suggestionBatch.activeBatch.some(t=>t.commentDatabaseId===e.commentDatabaseId&&t.suggestionIndex===e.suggestionIndex))return t;let n=[...t.suggestionBatch.activeBatch,e];return{suggestionBatch:{...t.suggestionBatch,activeBatch:n,isSuggestionBatchPending:n.length>0}}}),removeSuggestionFromBatch:e=>t(t=>{let n=t.suggestionBatch.activeBatch.filter(t=>t.commentDatabaseId!==e.commentDatabaseId||t.suggestionIndex!==e.suggestionIndex);return{suggestionBatch:{...t.suggestionBatch,activeBatch:n,isSuggestionBatchPending:n.length>0}}}),clearSuggestionBatch:()=>t(e=>({suggestionBatch:{...e.suggestionBatch,activeBatch:[],isSuggestionBatchPending:!1}})),loadActiveBatchFromStorage:e=>t(t=>({suggestionBatch:{...t.suggestionBatch,activeBatch:e,isSuggestionBatchPending:e.length>0}}))}}))(...t)}),{name:"pull-request-store"}));try{T.displayName||(T.displayName="PullRequestStoreContext")}catch{}try{M.displayName||(M.displayName="PullRequestStoreProvider")}catch{}},43883:(e,t,n)=>{n.d(t,{Gl:()=>a,TC:()=>d,ai:()=>s,eh:()=>o});var i=n(21067);let r={};function a(e,t){let n=t?.currency??"USD";return(r[n]||(r[n]=new Intl.NumberFormat((0,i.JK)(),{currency:n,style:"currency"}))).format(e)}function s(e,t){return new Intl.NumberFormat((0,i.JK)(),{maximumFractionDigits:t?.precision}).format(e)}let l=["k","m","b"];function o(e,t){let{suffix:n=!0,capping:i=1/0,precision:r=1}=t??{},a="",o=Math.min(i,e);if(n){let e=c(o);a=l[e-1]||"",o/=1e3**e}let d=s(o,{precision:r})+a;return e>i?`${d}+`:d}function d(e){if(e<=1e4)return 1;let t=c(e);return e/1e3**t>=10?0:1}function c(e){let t=Math.floor(Math.log(Math.max(Math.abs(e),1))/Math.log(1e3));return Math.min(l.length,t)}},50625:(e,t,n)=>{n.d(t,{L:()=>m});var i=n(68273),r=n(21728),a=n(82075),s=n(96540);let{getItem:l,removeItem:o,setItem:d}=(0,a.D)("localStorage"),c=(e,t)=>{let{diffSide:n,filePath:i,line:r,subjectId:a}=e;if(t)return`PullRequest:${a}-File:${i}`;if(void 0!==r&&void 0!==n)return`PullRequest:${a}-File:${i}-Line:${r}-DiffSide:${n}`;throw Error("Cannot build diff line comment cache key for a comment without a line number or diff side")};function u(e,t){let n=l(e),i=!!n?.text?.trim();return(0,s.useEffect)(()=>{i&&t?.(n)},[i]),{hasPersistedComment:i,removePersistedCommentFromStorage:()=>{o(e),i=!1,n=null}}}(0,i.GV)();let m=(0,i.GV)()?function(e){let t,n,i,a,s=(0,r.c)(16),{diffSide:l,filePath:o,handlePersistedCommentExists:m,line:f,subjectId:h,threadId:g,fileLevelComment:p}=e;e:{let e;if(g){t=g;break e}s[0]!==l||s[1]!==p||s[2]!==o||s[3]!==f||s[4]!==h||s[5]!==g?(e=g??c({diffSide:l,filePath:o,line:f,subjectId:h},p),s[0]=l,s[1]=p,s[2]=o,s[3]=f,s[4]=h,s[5]=g,s[6]=e):e=s[6],t=e}let b=t,{hasPersistedComment:v,removePersistedCommentFromStorage:x}=u(b,m);s[7]!==b?(n=e=>{let t={text:e.text};e.startLine&&e.startSide&&(t={...t,startLine:e.startLine,startSide:e.startSide}),d(b,t)},s[7]=b,s[8]=n):n=s[8];let C=n;s[9]!==h?(i=e=>{let t={shouldFocus:!0};e.text&&(t={...t,text:e.text}),e.startLine&&(t={...t,startLine:e.startLine,startSide:e.givenLineDiffSide,startLineKey:e.startLineKey,endLineKey:e.endLineKey}),d(c({diffSide:e.givenLineDiffSide,filePath:e.givenFilePath,line:e.givenLine,subjectId:h},e.shouldBeFileLevelComment),t)},s[9]=h,s[10]=i):i=s[10];let y=i;return s[11]!==v||s[12]!==y||s[13]!==C||s[14]!==x?(a={hasPersistedComment:v,persistCommentToStorage:C,persistCommentOnGivenLineToStorage:y,removePersistedCommentFromStorage:x},s[11]=v,s[12]=y,s[13]=C,s[14]=x,s[15]=a):a=s[15],a}:function({diffSide:e,filePath:t,handlePersistedCommentExists:n,line:i,subjectId:r,threadId:a,fileLevelComment:l}){let o=(0,s.useMemo)(()=>a||(a??c({diffSide:e,filePath:t,line:i,subjectId:r},l)),[e,t,i,r,a,l]),{hasPersistedComment:m,removePersistedCommentFromStorage:f}=u(o,n);return{hasPersistedComment:m,persistCommentToStorage:e=>{let t={text:e.text};e.startLine&&e.startSide&&(t={...t,startLine:e.startLine,startSide:e.startSide}),d(o,t)},persistCommentOnGivenLineToStorage:e=>{let t={shouldFocus:!0};e.text&&(t={...t,text:e.text}),e.startLine&&(t={...t,startLine:e.startLine,startSide:e.givenLineDiffSide,startLineKey:e.startLineKey,endLineKey:e.endLineKey}),d(c({diffSide:e.givenLineDiffSide,filePath:e.givenFilePath,line:e.givenLine,subjectId:r},e.shouldBeFileLevelComment),t)},removePersistedCommentFromStorage:f}}},51391:(e,t,n)=>{n.d(t,{Aj:()=>u,EV:()=>d,KV:()=>m,M6:()=>o,bo:()=>l,sB:()=>c});var i=n(36472),r=n(3038),a=n(61583),s=n(71315);function l(e){return`b:${e.blobLineNumber}-l:${e.left}-r:${e.right}`}function o({current:e,currentOrientation:t,previous:n,previousOrientation:i}){return!!n&&("left"===i&&"left"===t&&!!e.left&&!!n.left&&n.left>e.left||"right"===i&&"right"===t&&!!e.right&&!!n.right&&n.right>e.right||"right"===i&&"left"===t&&!!e.right&&!!n.right&&n.right>e.right||"left"===i&&"right"===t&&!!e.left&&!!n.left&&n.left>e.left||!1)}function d({diffAnchor:e,diffLines:t,isSplitView:n,lineRange:a}){let s,o=new Set([]);if(0===t.length)return{selectedLineKeys:o};if(!a)return{selectedLineKeys:new Set([])};let{startLineNumber:d,startOrientation:c,endLineNumber:u,endOrientation:m}=a,f=t;if(n){let e=(0,r.Mk)(t);f=e.leftLines,s=e.rightLines}let h={diffAnchor:e,endLineNumber:u??d,endOrientation:m??c,startLineNumber:d,startOrientation:c},g=(0,i.A)({selectedLineRange:h,leftLines:f,rightLines:s});for(let e=0;e<g.selectedLeftLines.length;e++){let t=g.selectedLeftLines[e];t&&!(0,r.Po)(t)&&o.add(l(t))}for(let e=0;e<g.selectedRightLines.length;e++){let t=g.selectedRightLines[e];t&&!(0,r.Po)(t)&&o.add(l(t))}return{selectedLineKeys:o,startOrientation:c,selectedLineRange:h}}function c(e){let t;for(t of e);return t}function u(e){return e.values().next().value}function m(e){let t=(0,a.EW)(s.fV.hash);if(!t||t[1]!==e)return;let n=t[2]?"L"===t[2]?"left":"right":void 0,i=t[3]?parseInt(t[3]):void 0,r=t[4]?"L"===t[4]?"left":"right":void 0,l=t[5]?parseInt(t[5]):void 0;if(n&&i)return{diffAnchor:e,endOrientation:r??n,endLineNumber:l??i,startOrientation:n,startLineNumber:i}}},61219:(e,t,n)=>{n.d(t,{U:()=>ex});var i=n(74848),r=n(68273),a=n(21728),s=n(42118),l=n(26156),o=n(18559),d=n(81156),c=n(63352),u=n(73189),m=n(78809),f=n(73017),h=n(71315),g=n(43258),p=n(38621),b=n(72511),v=n(59394),x=n(34164),C=n(96540),y=n(25407),L=n(94747),S=n(27011),N=n(1932),j=n(96379);let D=(0,r.Z6)()?function(){let e,t=(0,a.c)(2),{updateThreads:n}=(0,S.an)();return t[0]!==n?(e={mutationFn:w,onSuccess:(e,t)=>{n((0,N.jM)(e=>{let n=e.flatMap(e=>e.commentsData?.comments.filter(e=>e.author?.login===t.userLogin));if(0!==n.length)for(let e of n)e&&(e.viewerCanBlockFromOrg=!1,e.viewerCanUnblockFromOrg=!0,e.isHidden=t.shouldHideComment||e.isHidden,e.minimizedReason=t.hiddenReason||null)}))}},t[0]=n,t[1]=e):e=t[1],(0,L.n)(e)}:function(){let{updateThreads:e}=(0,S.an)();return(0,L.n)({mutationFn:async({duration:e,hiddenReason:t,organizationLogin:n,notifyBlockedUser:i,shouldHideComment:r,userLogin:a})=>{let s=new FormData;s.append("duration",e),s.append("hide_comment",r.toString()),t&&s.append("hidden_reason",t),s.append("login",a),s.append("send_notification",i.toString()),await (0,j.DI)((0,y.ggd)({owner:n}),{method:"POST",body:s,redirect:"manual"})},onSuccess:(t,n)=>{e((0,N.jM)(e=>{let t=e.flatMap(e=>e.commentsData?.comments.filter(e=>e.author?.login===n.userLogin));if(0!==t.length)for(let e of t)e&&(e.viewerCanBlockFromOrg=!1,e.viewerCanUnblockFromOrg=!0,e.isHidden=n.shouldHideComment||e.isHidden,e.minimizedReason=n.hiddenReason||null)}))}})};async function w(e){let{duration:t,hiddenReason:n,organizationLogin:i,notifyBlockedUser:r,shouldHideComment:a,userLogin:s}=e,l=new FormData;l.append("duration",t),l.append("hide_comment",a.toString()),n&&l.append("hidden_reason",n),l.append("login",s),l.append("send_notification",r.toString()),await (0,j.DI)((0,y.ggd)({owner:i}),{method:"POST",body:l,redirect:"manual"})}var I=n(48845);let k=(0,r.Z6)()?function(e){let t,n,i,r=(0,a.c)(15),{filePath:s,lineMarkersKey:l,onSuccess:o}=e,d=(0,S.Kp)(),{deleteThreadComment:c}=(0,S.an)(),{onCommentThreadDeleted:u}=(0,S.Ud)(),m=(0,S.SM)(),{removePendingComment:f}=(0,S._N)();return r[0]!==d||r[1]!==s||r[2]!==m||r[3]!==l?(t=async e=>{let{commentId:t,threadId:n}=e,i=m(Number(n),s,l)?.commentsData?.comments?.find(e=>e.id===t);if(!i)return;let r=`${d}/page_data/review_comments/${i.databaseId}`,a=await (0,I.q$)(`${r}`,{method:"DELETE"});if(204===a.status||200===a.status)return;let o=await (0,I.hp)(a);(0,I.R)(a,o)},r[0]=d,r[1]=s,r[2]=m,r[3]=l,r[4]=t):t=r[4],r[5]!==c||r[6]!==s||r[7]!==l||r[8]!==u||r[9]!==o||r[10]!==f?(n=(e,t)=>{let{commentId:n,threadId:i}=t,r=c(Number(i),n,s,l);f(Number(i)),"thread_deleted"===r&&("thread_deleted"===r&&u({path:s,threadID:i}),o?.())},r[5]=c,r[6]=s,r[7]=l,r[8]=u,r[9]=o,r[10]=f,r[11]=n):n=r[11],r[12]!==t||r[13]!==n?(i={mutationFn:t,onSuccess:n},r[12]=t,r[13]=n,r[14]=i):i=r[14],(0,L.n)(i)}:function({filePath:e,lineMarkersKey:t,onSuccess:n}){let i=(0,S.Kp)(),{deleteThreadComment:r}=(0,S.an)(),{onCommentThreadDeleted:a}=(0,S.Ud)(),s=(0,S.SM)(),{removePendingComment:l}=(0,S._N)();return(0,L.n)({mutationFn:async({commentId:n,threadId:r})=>{let a=s(Number(r),e,t)?.commentsData?.comments?.find(e=>e.id===n);if(!a)return;let l=`${i}/page_data/review_comments/${a.databaseId}`,o=await (0,I.q$)(`${l}`,{method:"DELETE"});if(204===o.status||200===o.status)return;let d=await (0,I.hp)(o);(0,I.R)(o,d)},onSuccess:(i,{commentId:s,threadId:o})=>{let d=r(Number(o),s,e,t);l(Number(o)),"thread_deleted"===d&&("thread_deleted"===d&&a({path:e,threadID:o}),n?.())}})};var A=n(20622);let E=(0,r.Z6)()?function(e,t){let n,i,r,s=(0,a.c)(9),l=(0,S.Kp)(),o=`${l}/page_data/${A.uT.hideComment}`,{updateThreadComment:d}=(0,S.an)();return s[0]!==o?(n=async e=>{let{commentDatabaseId:t,reason:n}=e,i=await (0,I.q$)(o,{method:"POST",body:{classifier:n,commentId:t}}),r=await (0,I.hp)(i);return(0,I.R)(i,r),r},s[0]=o,s[1]=n):n=s[1],s[2]!==e||s[3]!==t||s[4]!==d?(i=n=>{d({threadID:n.threadId,filePath:e,lineMarkersKey:t,match:e=>e.databaseId===n.commentDatabaseId,transform:e=>{if(e)return{...e,isHidden:!0,minimizedReason:n.reason}}})},s[2]=e,s[3]=t,s[4]=d,s[5]=i):i=s[5],s[6]!==n||s[7]!==i?(r={mutationFn:n,onSuccess:i},s[6]=n,s[7]=i,s[8]=r):r=s[8],(0,L.n)(r)}:function(e,t){let n=(0,S.Kp)(),i=`${n}/page_data/${A.uT.hideComment}`,{updateThreadComment:r}=(0,S.an)();return(0,L.n)({mutationFn:async({commentDatabaseId:e,reason:t})=>{let n=await (0,I.q$)(i,{method:"POST",body:{classifier:t,commentId:e}}),r=await (0,I.hp)(n);return(0,I.R)(n,r),r},onSuccess:n=>{r({threadID:n.threadId,filePath:e,lineMarkersKey:t,match:e=>e.databaseId===n.commentDatabaseId,transform:e=>{if(e)return{...e,isHidden:!0,minimizedReason:n.reason}}})}})},R=(0,r.Z6)()?function(e,t){let n,i,r,s=(0,a.c)(9),l=(0,S.Kp)(),{updateThreadComment:o}=(0,S.an)();return s[0]!==l?(n=async e=>{let{commentDatabaseId:t,reaction:n,viewerHasReacted:i}=e,r=`${l}/page_data/${i?A.uT.removeCommentReaction:A.uT.addCommentReaction}`,a=await (0,I.q$)(r,{method:"POST",body:{reaction:n,commentId:t}}),s=await (0,I.hp)(a);return(0,I.R)(a,s),s},s[0]=l,s[1]=n):n=s[1],s[2]!==e||s[3]!==t||s[4]!==o?(i=(n,i)=>{o({threadID:parseInt(i.threadId),filePath:e,lineMarkersKey:t,match:e=>e.databaseId===i.commentDatabaseId,transform:e=>{if(e)return{...e,reactionGroups:n.reactionGroups}}})},s[2]=e,s[3]=t,s[4]=o,s[5]=i):i=s[5],s[6]!==n||s[7]!==i?(r={mutationFn:n,onSuccess:i},s[6]=n,s[7]=i,s[8]=r):r=s[8],(0,L.n)(r)}:function(e,t){let n=(0,S.Kp)(),{updateThreadComment:i}=(0,S.an)();return(0,L.n)({mutationFn:async({commentDatabaseId:e,reaction:t,viewerHasReacted:i})=>{let r=`${n}/page_data/${i?A.uT.removeCommentReaction:A.uT.addCommentReaction}`,a=await (0,I.q$)(r,{method:"POST",body:{reaction:t,commentId:e}}),s=await (0,I.hp)(a);return(0,I.R)(a,s),s},onSuccess:(n,r)=>{i({threadID:parseInt(r.threadId),filePath:e,lineMarkersKey:t,match:e=>e.databaseId===r.commentDatabaseId,transform:e=>{if(e)return{...e,reactionGroups:n.reactionGroups}}})}})},_=(0,r.Z6)()?function(){let e,t=(0,a.c)(2),{updateThreads:n}=(0,S.an)();return t[0]!==n?(e={mutationFn:T,onSuccess:(e,t)=>{n((0,N.jM)(e=>{let n=e.flatMap(e=>e.commentsData?.comments.filter(e=>e.author?.login===t.userLogin));if(0!==n.length)for(let e of n)e&&(e.viewerCanBlockFromOrg=!0,e.viewerCanUnblockFromOrg=!1)}))}},t[0]=n,t[1]=e):e=t[1],(0,L.n)(e)}:function(){let{updateThreads:e}=(0,S.an)();return(0,L.n)({mutationFn:async({organizationLogin:e,userLogin:t})=>{await (0,I.q$)(`${(0,y.ggd)({owner:e})}/${(0,y.QU3)(t)}`,{method:"DELETE",redirect:"manual"})},onSuccess:(t,n)=>{e((0,N.jM)(e=>{let t=e.flatMap(e=>e.commentsData?.comments.filter(e=>e.author?.login===n.userLogin));if(0!==t.length)for(let e of t)e&&(e.viewerCanBlockFromOrg=!0,e.viewerCanUnblockFromOrg=!1)}))}})};async function T(e){let{organizationLogin:t,userLogin:n}=e;await (0,I.q$)(`${(0,y.ggd)({owner:t})}/${(0,y.QU3)(n)}`,{method:"DELETE",redirect:"manual"})}let O=(0,r.Z6)()?function(e,t){let n,i,r,s=(0,a.c)(9),l=(0,S.Kp)(),o=`${l}/page_data/${A.uT.unhideComment}`,{updateThreadComment:d}=(0,S.an)();return s[0]!==o?(n=async e=>{let{commentDatabaseId:t}=e,n=await (0,I.q$)(o,{method:"POST",body:{commentId:t}}),i=await (0,I.hp)(n);return(0,I.R)(n,i),i},s[0]=o,s[1]=n):n=s[1],s[2]!==e||s[3]!==t||s[4]!==d?(i=n=>{d({threadID:n.threadId,filePath:e,lineMarkersKey:t,match:e=>e.databaseId===n.commentDatabaseId,transform:M})},s[2]=e,s[3]=t,s[4]=d,s[5]=i):i=s[5],s[6]!==n||s[7]!==i?(r={mutationFn:n,onSuccess:i},s[6]=n,s[7]=i,s[8]=r):r=s[8],(0,L.n)(r)}:function(e,t){let n=(0,S.Kp)(),i=`${n}/page_data/${A.uT.unhideComment}`,{updateThreadComment:r}=(0,S.an)();return(0,L.n)({mutationFn:async({commentDatabaseId:e})=>{let t=await (0,I.q$)(i,{method:"POST",body:{commentId:e}}),n=await (0,I.hp)(t);return(0,I.R)(t,n),n},onSuccess:n=>{r({threadID:n.threadId,filePath:e,lineMarkersKey:t,match:e=>e.databaseId===n.commentDatabaseId,transform:e=>{if(e)return{...e,isHidden:!1,minimizedReason:null}}})}})};function M(e){if(e)return{...e,isHidden:!1,minimizedReason:null}}let $=(0,r.Z6)()?function(e){let t,n,i,r=(0,a.c)(10),{filePath:s,lineMarkersKey:l,onSuccess:o}=e,d=(0,S.Kp)(),c=`${d}/page_data/${A.uT.updateReviewComment}`,{updateThreadComment:u}=(0,S.an)();return r[0]!==c?(t=async e=>{let{commentId:t,bodyVersion:n,body:i}=e,r=await (0,I.q$)(`${c}${n?`?body_version=${n}`:""}`,{method:"PUT",body:{body:i,commentId:t}}),a=await (0,I.hp)(r);return(0,I.R)(r,a),a},r[0]=c,r[1]=t):t=r[1],r[2]!==s||r[3]!==l||r[4]!==o||r[5]!==u?(n=e=>{u({threadID:e.threadId,filePath:s,lineMarkersKey:l,match:t=>t.databaseId===e.commentDatabaseId,transform:t=>{if(t)return{...t,body:e.body,bodyHTML:e.bodyHTML,bodyVersion:e.bodyVersion}}}),o?.()},r[2]=s,r[3]=l,r[4]=o,r[5]=u,r[6]=n):n=r[6],r[7]!==t||r[8]!==n?(i={mutationFn:t,onSuccess:n},r[7]=t,r[8]=n,r[9]=i):i=r[9],(0,L.n)(i)}:function({filePath:e,lineMarkersKey:t,onSuccess:n}){let i=(0,S.Kp)(),r=`${i}/page_data/${A.uT.updateReviewComment}`,{updateThreadComment:a}=(0,S.an)();return(0,L.n)({mutationFn:async({commentId:e,bodyVersion:t,body:n})=>{let i=await (0,I.q$)(`${r}${t?`?body_version=${t}`:""}`,{method:"PUT",body:{body:n,commentId:e}}),a=await (0,I.hp)(i);return(0,I.R)(i,a),a},onSuccess:i=>{a({threadID:i.threadId,filePath:e,lineMarkersKey:t,match:e=>e.databaseId===i.commentDatabaseId,transform:e=>{if(e)return{...e,body:i.body,bodyHTML:i.bodyHTML,bodyVersion:i.bodyVersion}}}),n?.()}})};var P=n(34784),F=n(8748),G=n(50625),V=n(93642),H=n(70109);let U="ReviewThreadComment-module__ReviewThreadContainer--mI1dg",K="ReviewThreadComment-module__anchorable--bXoU8",B="ReviewThreadComment-module__ReviewThreadWrapper--zXqpP",q="ReviewThreadComment-module__ReviewThreadBox--Ddyuz",z="ReviewThreadComment-module__ReviewThreadInnerContainer--xw85s",W="ReviewThreadComment-module__ReplyWrapper--yIUaX",X="ReviewThreadComment-module__SafeHTMLBox--SVSQJ",Z="ReviewThreadComment-module__BodyHTMLContainer--O6lsx";var Q=n(88431),J=n(40961),Y=n(80081),ee=n(3252);let et=(0,r.Z6)()?function(){let e,t=(0,a.c)(2),n=(0,S.Kp)(),i=`${n}/page_data/${A.uT.submitSuggestedChanges}`;return t[0]!==i?(e={mutationFn:async e=>{let{changes:t,currentOid:n,message:r}=e,a=await (0,I.q$)(i,{method:"POST",body:{changes:t,currentOid:n,message:r}}),s=await (0,I.hp)(a);return(0,I.R)(a,s),s},onSuccess:en},t[0]=i,t[1]=e):e=t[1],(0,L.n)(e)}:function(){let e=(0,S.Kp)(),t=`${e}/page_data/${A.uT.submitSuggestedChanges}`;return(0,L.n)({mutationFn:async({changes:e,currentOid:n,message:i})=>{let r=await (0,I.q$)(t,{method:"POST",body:{changes:e,currentOid:n,message:i}}),a=await (0,I.hp)(r);return(0,I.R)(r,a),a},onSuccess:()=>{h.cg?.location.reload()}})};function en(){h.cg?.location.reload()}var ei=n(91747),er=n(2265),ea=n(30459),es=n(26607),el=n(21373),eo=n(88008);let ed=(0,r.GV)()?function(e){let t,n,r,s,l,o=(0,a.c)(28),{onOpenDialog:d,suggestedChange:c}=e,{sendAnalyticsEvent:u}=(0,ea.s)(),m=(0,C.useRef)(null),f=c.commentDatabaseId||0;o[0]!==c.suggestionIndex||o[1]!==f?(t={commentDatabaseId:f,suggestionIndex:c.suggestionIndex},o[0]=c.suggestionIndex,o[1]=f,o[2]=t):t=o[2];let h=(0,S.Nk)(t),g=(0,S.RH)(),p=(0,ei.u)("batch_suggested_changes"),{addSuggestionToBatch:b,removeSuggestionFromBatch:v}=(0,S.xJ)(),x=(0,S.WK)(),y=(0,S.Kp)(),L=(0,S.L3)();o[3]!==b||o[4]!==L||o[5]!==y||o[6]!==u||o[7]!==c.commentDatabaseId||o[8]!==c.suggestionIndex||o[9]!==x?(n=()=>{if(!c.commentDatabaseId)return;let e={commentDatabaseId:c.commentDatabaseId,suggestionIndex:c.suggestionIndex};b(e),(0,eo.CE)(y,L.fullDiff.headOid,[...x.activeBatch,e]),u("comments.add_suggested_change_to_batch","ADD_SUGGESTED_CHANGE_TO_BATCH_BUTTON")},o[3]=b,o[4]=L,o[5]=y,o[6]=u,o[7]=c.commentDatabaseId,o[8]=c.suggestionIndex,o[9]=x,o[10]=n):n=o[10];let N=n;o[11]!==L||o[12]!==y||o[13]!==v||o[14]!==u||o[15]!==c.commentDatabaseId||o[16]!==c.suggestionIndex||o[17]!==x?(r=()=>{if(!c.commentDatabaseId)return;let e={commentDatabaseId:c.commentDatabaseId,suggestionIndex:c.suggestionIndex};v(e),(0,eo.CE)(y,L.fullDiff.headOid,x.activeBatch.filter(t=>t.commentDatabaseId!==e.commentDatabaseId||t.suggestionIndex!==e.suggestionIndex)),u("comments.remove_suggested_change_from_batch","REMOVE_SUGGESTED_CHANGE_FROM_BATCH_BUTTON")},o[11]=L,o[12]=y,o[13]=v,o[14]=u,o[15]=c.commentDatabaseId,o[16]=c.suggestionIndex,o[17]=x,o[18]=r):r=o[18];let j=r;o[19]!==d?(s=()=>{d(m)},o[19]=d,o[20]=s):s=o[20];let D=s;return o[21]!==p||o[22]!==N||o[23]!==D||o[24]!==j||o[25]!==h||o[26]!==g?(l=(0,i.jsx)("div",{className:"d-flex flex-row flex-items-center",children:p&&h?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(es.A,{variant:"attention",children:"Pending in batch"}),(0,i.jsx)("div",{className:"ml-auto",children:(0,i.jsx)(el.Q,{variant:"danger",onClick:j,children:"Remove from batch"})})]}):(0,i.jsxs)("div",{className:"d-flex gap-2 ml-auto flex-wrap-reverse",children:[!g&&(0,i.jsx)(el.Q,{variant:"default",onClick:D,ref:m,children:"Apply suggestion"}),p&&(0,i.jsx)(el.Q,{variant:"primary",onClick:N,children:"Add suggestion to batch"})]})}),o[21]=p,o[22]=N,o[23]=D,o[24]=j,o[25]=h,o[26]=g,o[27]=l):l=o[27],l}:function({onOpenDialog:e,suggestedChange:t}){let{sendAnalyticsEvent:n}=(0,ea.s)(),r=(0,C.useRef)(null),a=(0,S.Nk)({commentDatabaseId:t.commentDatabaseId||0,suggestionIndex:t.suggestionIndex}),s=(0,S.RH)(),l=(0,ei.u)("batch_suggested_changes"),{addSuggestionToBatch:o,removeSuggestionFromBatch:d}=(0,S.xJ)(),c=(0,S.WK)(),u=(0,S.Kp)(),m=(0,S.L3)(),f=(0,C.useCallback)(()=>{if(!t.commentDatabaseId)return;let e={commentDatabaseId:t.commentDatabaseId,suggestionIndex:t.suggestionIndex};o(e),(0,eo.CE)(u,m.fullDiff.headOid,[...c.activeBatch,e]),n("comments.add_suggested_change_to_batch","ADD_SUGGESTED_CHANGE_TO_BATCH_BUTTON")},[o,t.commentDatabaseId,t.suggestionIndex,c,u,m,n]),h=(0,C.useCallback)(()=>{if(!t.commentDatabaseId)return;let e={commentDatabaseId:t.commentDatabaseId,suggestionIndex:t.suggestionIndex};d(e),(0,eo.CE)(u,m.fullDiff.headOid,c.activeBatch.filter(t=>t.commentDatabaseId!==e.commentDatabaseId||t.suggestionIndex!==e.suggestionIndex)),n("comments.remove_suggested_change_from_batch","REMOVE_SUGGESTED_CHANGE_FROM_BATCH_BUTTON")},[d,t.commentDatabaseId,t.suggestionIndex,c,u,m,n]),g=(0,C.useCallback)(()=>{e(r)},[e]);return(0,i.jsx)("div",{className:"d-flex flex-row flex-items-center",children:l&&a?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(es.A,{variant:"attention",children:"Pending in batch"}),(0,i.jsx)("div",{className:"ml-auto",children:(0,i.jsx)(el.Q,{variant:"danger",onClick:h,children:"Remove from batch"})})]}):(0,i.jsxs)("div",{className:"d-flex gap-2 ml-auto flex-wrap-reverse",children:[!s&&(0,i.jsx)(el.Q,{variant:"default",onClick:g,ref:r,children:"Apply suggestion"}),l&&(0,i.jsx)(el.Q,{variant:"primary",onClick:f,children:"Add suggestion to batch"})]})})};try{ed.displayName||(ed.displayName="ApplyOrAddToBatch")}catch{}var ec=n(3585);let eu=(0,r.GV)()?function(e){let t,n,r=(0,a.c)(5),{reason:s,className:l}=e,o=void 0===l?"m-2":l;return r[0]!==s?(t=(0,i.jsx)("small",{className:"fgColor-muted",children:s}),r[0]=s,r[1]=t):t=r[1],r[2]!==o||r[3]!==t?(n=(0,i.jsx)("div",{className:o,children:t}),r[2]=o,r[3]=t,r[4]=n):n=r[4],n}:function({reason:e,className:t="m-2"}){return(0,i.jsx)("div",{className:t,children:(0,i.jsx)("small",{className:"fgColor-muted",children:e})})};try{eu.displayName||(eu.displayName="CodeSuggestionUnavailable")}catch{}let em=(0,r.GV)()?function(e){let t,n,r,s,l,o,d,c,u,m,f,h,g=(0,a.c)(38),{suggestedChange:p}=e,{setIsDialogOpen:b}=(0,er.W)(),[v,x]=(0,C.useState)(!1),y=(0,C.useRef)(void 0),L=(0,ei.u)("batch_suggested_changes"),N=(0,S.WK)();g[0]!==L||g[1]!==p||g[2]!==N?(t=L&&void 0!==p.commentDatabaseId&&null!==p.commentDatabaseId&&N.activeBatch.some(e=>e.commentDatabaseId===p.commentDatabaseId&&e.suggestionIndex===p.suggestionIndex),g[0]=L,g[1]=p,g[2]=N,g[3]=t):t=g[3];let j=t;g[4]!==p?(n=(0,Y.EJ)(p,[]),g[4]=p,g[5]=n):n=g[5];let{isValid:D,reason:w}=n;g[6]!==p?(r=[p],g[6]=p,g[7]=r):r=g[7];let I=r;g[8]!==I?(s=I.map(ef),g[8]=I,g[9]=s):s=g[9];let k=s;g[10]!==b?(l=e=>{x(e),b?.(e)},g[10]=b,g[11]=l):l=g[11];let A=l;g[12]!==A?(o=()=>{if(A(!1),y.current){let e=y.current.current;setTimeout(()=>e?.focus())}},g[12]=A,g[13]=o):o=g[13];let E=o;g[14]!==A?(d=e=>{A(!0),y.current=e},g[14]=A,g[15]=d):d=g[15];let R=d,{mutate:_}=et(),{fullDiff:T}=(0,S.L3)(),{headOid:O}=T;g[16]!==I||g[17]!==E||g[18]!==O||g[19]!==_?(c=(e,t,n)=>{_({changes:I,message:e,currentOid:O},{onSuccess:()=>{E(),n()},onError:e=>{t(e,"submitSuggestedChanges","Failed to submit suggested changes")}})},g[16]=I,g[17]=E,g[18]=O,g[19]=_,g[20]=c):c=g[20];let M=c;return g[21]!==R||g[22]!==p?(u=(0,i.jsx)(ed,{suggestedChange:p,onOpenDialog:R}),g[21]=R,g[22]=p,g[23]=u):u=g[23],g[24]!==j||g[25]!==D||g[26]!==w?(m=!j&&!D&&w&&(0,i.jsx)(eu,{reason:w,className:"m-0"}),g[24]=j,g[25]=D,g[26]=w,g[27]=m):m=g[27],g[28]!==k||g[29]!==I.length||g[30]!==E||g[31]!==M||g[32]!==v?(f=v&&(0,i.jsx)(ec.$,{authorLogins:k,batchSize:I.length,onClose:E,onCommit:M}),g[28]=k,g[29]=I.length,g[30]=E,g[31]=M,g[32]=v,g[33]=f):f=g[33],g[34]!==u||g[35]!==m||g[36]!==f?(h=(0,i.jsxs)("div",{className:"border-top p-2",children:[u,m,f]}),g[34]=u,g[35]=m,g[36]=f,g[37]=h):h=g[37],h}:function({suggestedChange:e}){let{setIsDialogOpen:t}=(0,er.W)(),[n,r]=(0,C.useState)(!1),a=(0,C.useRef)(void 0),s=(0,ei.u)("batch_suggested_changes"),l=(0,S.WK)(),o=s&&void 0!==e.commentDatabaseId&&null!==e.commentDatabaseId&&l.activeBatch.some(t=>t.commentDatabaseId===e.commentDatabaseId&&t.suggestionIndex===e.suggestionIndex),{isValid:d,reason:c}=(0,Y.EJ)(e,[]),u=(0,C.useMemo)(()=>[e],[e]),m=u.map(e=>e.authorLogin),f=(0,C.useCallback)(e=>{r(e),t?.(e)},[t]),h=(0,C.useCallback)(()=>{if(f(!1),a.current){let e=a.current.current;setTimeout(()=>e?.focus())}},[f]),g=(0,C.useCallback)(e=>{f(!0),a.current=e},[f,a]),{mutate:p}=et(),{fullDiff:{headOid:b}}=(0,S.L3)(),v=(0,C.useCallback)((e,t,n)=>{p({changes:u,message:e,currentOid:b},{onSuccess:()=>{h(),n()},onError:e=>{t(e,"submitSuggestedChanges","Failed to submit suggested changes")}})},[u,h,b,p]);return(0,i.jsxs)("div",{className:"border-top p-2",children:[(0,i.jsx)(ed,{suggestedChange:e,onOpenDialog:g}),!o&&!d&&c&&(0,i.jsx)(eu,{reason:c,className:"m-0"}),n&&(0,i.jsx)(ec.$,{authorLogins:m,batchSize:u.length,onClose:h,onCommit:v})]})};function ef(e){return e.authorLogin}try{em.displayName||(em.displayName="CodeSuggestionActions")}catch{}let eh=(0,r.GV)()?function(e,t,n,i,r){let s,l,o=(0,a.c)(19),[d,c]=(0,C.useState)();o[0]!==r.lineRange||o[1]!==t.author?.login||o[2]!==t.databaseId||o[3]!==t.id||o[4]!==t.subjectType||o[5]!==e||o[6]!==n||o[7]!==i?(s=()=>{if(!e.current||t.subjectType?.toUpperCase()!=="LINE")return;let a=[...e.current.getElementsByClassName("js-apply-changes")];if(a.length>0){let e=[];for(let s=0;s<a.length;s++){let l=a[s];if(!l)continue;let o=l.closest("div.js-suggested-changes-blob");if(!o||!r.lineRange)continue;let d=(0,ee.y)(o);e.push({authorLogin:t.author?.login??"ghost",commentId:t.id,commentDatabaseId:t.databaseId,path:n,ref:l,suggestion:d,lineRange:r.lineRange,threadId:i,suggestionIndex:s})}c(e)}},o[0]=r.lineRange,o[1]=t.author?.login,o[2]=t.databaseId,o[3]=t.id,o[4]=t.subjectType,o[5]=e,o[6]=n,o[7]=i,o[8]=s):s=o[8];let u=t.author?.login;return o[9]!==r.lineRange||o[10]!==t.bodyHTML||o[11]!==t.databaseId||o[12]!==t.id||o[13]!==t.subjectType||o[14]!==e||o[15]!==n||o[16]!==u||o[17]!==i?(l=[r.lineRange,u,t.bodyHTML,t.databaseId,t.id,t.subjectType,e,n,i],o[9]=r.lineRange,o[10]=t.bodyHTML,o[11]=t.databaseId,o[12]=t.id,o[13]=t.subjectType,o[14]=e,o[15]=n,o[16]=u,o[17]=i,o[18]=l):l=o[18],(0,Q.N)(s,l),d}:function(e,t,n,i,r){let[a,s]=(0,C.useState)();return(0,Q.N)(()=>{if(!e.current||t.subjectType?.toUpperCase()!=="LINE")return;let a=[...e.current.getElementsByClassName("js-apply-changes")];if(a.length>0){let e=[];for(let s=0;s<a.length;s++){let l=a[s];if(!l)continue;let o=l.closest("div.js-suggested-changes-blob");if(!o||!r.lineRange)continue;let d=(0,ee.y)(o);e.push({authorLogin:t.author?.login??"ghost",commentId:t.id,commentDatabaseId:t.databaseId,path:n,ref:l,suggestion:d,lineRange:r.lineRange,threadId:i,suggestionIndex:s})}s(e)}},[r.lineRange,t.author?.login,t.bodyHTML,t.databaseId,t.id,t.subjectType,e,n,i]),a},eg=(0,r.GV)()?function(e){let t,n,r=(0,a.c)(12),{applySuggestedChangesValidationData:s,comment:l,commentBodyRef:o,filePath:d,isOutdated:c,isThreadResolved:u,suggestedChangesConfig:m,databaseId:f,viewerCanApplySuggestion:h}=e,{state:g}=(0,S.Yp)(),p=(0,S.ww)(),b=eh(o,l,d,f,s);return r[0]!==s||r[1]!==l||r[2]!==p||r[3]!==c||r[4]!==u||r[5]!==g||r[6]!==b||r[7]!==m||r[8]!==h?(t=b?.length?b.map(e=>{let{isValid:t,reason:n}=(0,Y.o_)({suggestedChange:e,hasCommitRange:p,isOutdated:c,isPending:"PENDING"===l.state.toUpperCase(),isResolved:u,pullRequestIsClosed:void 0===g||"CLOSED"===g||"MERGED"===g,pullRequestIsInMergeQueue:"QUEUED"===g,userCanApplySuggestion:!!h,applySuggestedChangesValidationData:s,suggestedChangesConfig:m});return!t&&n?(0,J.createPortal)((0,i.jsx)(eu,{reason:n}),e.ref):(0,J.createPortal)((0,i.jsx)(em,{suggestedChange:e}),e.ref)}):null,r[0]=s,r[1]=l,r[2]=p,r[3]=c,r[4]=u,r[5]=g,r[6]=b,r[7]=m,r[8]=h,r[9]=t):t=r[9],r[10]!==t?(n=(0,i.jsx)(i.Fragment,{children:t}),r[10]=t,r[11]=n):n=r[11],n}:function({applySuggestedChangesValidationData:e,comment:t,commentBodyRef:n,filePath:r,isOutdated:a,isThreadResolved:s,suggestedChangesConfig:l,databaseId:o,viewerCanApplySuggestion:d}){let{state:c}=(0,S.Yp)(),u=(0,S.ww)(),m=eh(n,t,r,o,e);return(0,i.jsx)(i.Fragment,{children:m?.length?m.map(n=>{let{isValid:r,reason:o}=(0,Y.o_)({suggestedChange:n,hasCommitRange:u,isOutdated:a,isPending:"PENDING"===t.state.toUpperCase(),isResolved:s,pullRequestIsClosed:void 0===c||"CLOSED"===c||"MERGED"===c,pullRequestIsInMergeQueue:"QUEUED"===c,userCanApplySuggestion:!!d,applySuggestedChangesValidationData:e,suggestedChangesConfig:l});return!r&&o?(0,J.createPortal)((0,i.jsx)(eu,{reason:o}),n.ref):(0,J.createPortal)((0,i.jsx)(em,{suggestedChange:n}),n.ref)}):null})};try{eg.displayName||(eg.displayName="SuggestedChangeView")}catch{}var ep=n(30721),eb=n(83494),ev=n(20459);let ex=(0,r.GV)()?function(e){let t,n,r,y,L,N,j,w,I,A,T,M,Q,J,Y,ee,et,en,ei,er,ea,es,el,eo,ed,ec,eu,em,ef,eh,ex,ey,eL,eS,eN,ej,eD,ew,eI,ek,eA,eE,eR,e_,eT=(0,a.c)(176),{isAnchorable:eO,index:eM,isInlineComment:e$,isLastChild:eP,isOutdated:eF,isThreadResolved:eG,lineMarkersKey:eV,anchorPrefix:eH,comment:eU,disableDialogMode:eK,enableDialogMode:eB,filePath:eq,gridCellId:ez,hideActions:eW,isFirstComment:eX,isInDialogMode:eZ,onDeleteLineComment:eQ,onQuoteReply:eJ,threadCommentCount:eY,threadId:e0,threadPositionNumber:e1,suggestedChangesConfig:e2,applySuggestedChangesValidationData:e3,viewerData:e4,ghostUser:e6,originalDiffPathUri:e5,headingLevel:e7}=e,e8=void 0!==eO&&eO,e9=void 0===eM?0:eM,te=void 0!==eX&&eX,tt=void 0===eJ?u.l:eJ,tn=void 0===e6?d.t.ghostUser:e6,ti=void 0===e7?"h3":e7,{addToast:tr}=(0,g.Y6)(),[ta,ts]=(0,C.useState)(!1),[tl,to]=(0,C.useState)(eU.isHidden),[td,tc]=(0,C.useState)(!1),[tu,tm]=(0,C.useState)(eU.body),[tf,th]=(0,C.useState)(!1),[tg,tp]=(0,C.useState)(!1),[tb,tv]=(0,C.useState)(""),tx=(0,S.Kp)(),tC="FILE"===eU.subjectType;eT[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{let{text:t}=e;t&&tm(t)},eT[0]=t):t=eT[0],eT[1]!==tx||eT[2]!==eU.id||eT[3]!==eq||eT[4]!==tC?(n={subjectId:tx,filePath:eq,fileLevelComment:tC,threadId:eU.id,handlePersistedCommentExists:t},eT[1]=tx,eT[2]=eU.id,eT[3]=eq,eT[4]=tC,eT[5]=n):n=eT[5];let{persistCommentToStorage:ty,removePersistedCommentFromStorage:tL}=(0,G.L)(n),tS=(0,C.useRef)(null),tN=(0,C.useRef)(null),tj=(0,C.useRef)(null),[tD,tw]=(0,C.useState)("");eT[6]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{tS.current?.focus()},eT[6]=r):r=eT[6];let tI=r;eT[7]!==ta?(y=()=>{if(ta){let e=window.setTimeout(tI);return()=>{window.clearTimeout(e)}}},L=[ta],eT[7]=ta,eT[8]=y,eT[9]=L):(y=eT[8],L=eT[9]),(0,C.useEffect)(y,L),eT[10]!==eQ?(N=()=>{tc(!1),tp(!1),eQ?.()},eT[10]=eQ,eT[11]=N):N=eT[11],eT[12]!==eq||eT[13]!==eV||eT[14]!==N?(j={filePath:eq,lineMarkersKey:eV,onSuccess:N},eT[12]=eq,eT[13]=eV,eT[14]=N,eT[15]=j):j=eT[15];let{mutate:tk}=k(j);eT[16]!==eK?(w=async()=>{eK?.(),tc(!0)},eT[16]=eK,eT[17]=w):w=eT[17];let tA=w;eT[18]!==tr||eT[19]!==eU.id||eT[20]!==tk||eT[21]!==eB||eT[22]!==eq||eT[23]!==ez||eT[24]!==e0?(I=e=>{"confirm"===e?(tp(!0),tk({commentId:eU.id,threadId:e0,filePath:eq},{onError:()=>{tc(!1),tr({type:"error",message:"Failed to delete comment"}),tp(!1)}})):(ez&&eB?.(ez),tc(!1),tp(!1))},eT[18]=tr,eT[19]=eU.id,eT[20]=tk,eT[21]=eB,eT[22]=eq,eT[23]=ez,eT[24]=e0,eT[25]=I):I=eT[25];let tE=I,{mutate:tR}=E(eq,eV);eT[26]!==eU.databaseId||eT[27]!==tR?(A=e=>{if(!eU.databaseId)throw Error("Comment not found");tR({commentDatabaseId:eU.databaseId,reason:e},{onError:()=>{th(!1),tw("Failed to hide comment")},onSuccess:()=>to(!0)})},eT[26]=eU.databaseId,eT[27]=tR,eT[28]=A):A=eT[28];let t_=A,{mutate:tT}=O(eq,eV);eT[29]!==eU.databaseId||eT[30]!==tT?(T=()=>{if(!eU.databaseId)throw Error("Comment not found");tT({commentDatabaseId:eU.databaseId},{onError:()=>{th(!1),tw("Failed to unhide comment")},onSuccess:()=>to(!1)})},eT[29]=eU.databaseId,eT[30]=tT,eT[31]=T):T=eT[31];let tO=T,{mutate:tM}=D();eT[32]!==tM?(M=(e,t,n,i,r,a)=>tM({duration:e,shouldHideComment:t,hiddenReason:n,organizationLogin:i,notifyBlockedUser:r,userLogin:a},{onError:()=>tw("Failed to block user"),onSuccess:()=>{t&&to(!0)}}),eT[32]=tM,eT[33]=M):M=eT[33];let t$=M,{mutate:tP}=_();eT[34]!==tP?(Q=(e,t)=>tP({organizationLogin:e,userLogin:t},{onError:()=>tw("Failed to unblock user")}),eT[34]=tP,eT[35]=Q):Q=eT[35];let tF=Q,{mutate:tG}=R(eq,eV);eT[36]!==tr||eT[37]!==eU.databaseId||eT[38]!==tG||eT[39]!==e0?(J=(e,t)=>{if(!eU.databaseId)throw Error("Comment not found");setTimeout(()=>tj.current?.focus(),0),tG({commentDatabaseId:eU.databaseId,threadId:e0,reaction:e,viewerHasReacted:t},{onError:()=>{th(!1),tr({type:"error",message:"Failed to react to comment"})}})},eT[36]=tr,eT[37]=eU.databaseId,eT[38]=tG,eT[39]=e0,eT[40]=J):J=eT[40];let tV=J;eT[41]===Symbol.for("react.memo_cache_sentinel")?(Y=()=>{ts(!0)},eT[41]=Y):Y=eT[41];let tH=Y;eT[42]!==eU.body||eT[43]!==tL?(ee=()=>{ts(!1),tL(),tm(eU.body)},eT[42]=eU.body,eT[43]=tL,eT[44]=ee):ee=eT[44];let tU=ee;eT[45]!==ty?(et=e=>{ty({text:e}),tm(e),tv(void 0)},eT[45]=ty,eT[46]=et):et=eT[46];let tK=et;eT[47]!==tL?(en=()=>{ts(!1),th(!1),tL()},eT[47]=tL,eT[48]=en):en=eT[48],eT[49]!==eq||eT[50]!==eV||eT[51]!==en?(ei={filePath:eq,lineMarkersKey:eV,onSuccess:en},eT[49]=eq,eT[50]=eV,eT[51]=en,eT[52]=ei):ei=eT[52];let{mutate:tB}=$(ei);eT[53]!==tr||eT[54]!==tu||eT[55]!==eU.bodyVersion||eT[56]!==eU.databaseId||eT[57]!==e2?.sourceContentFromDiffLines||eT[58]!==tB?(er=()=>{th(!0);let e=(0,V.u)(tu,e2?.sourceContentFromDiffLines??"");if(!e.isValid){tv(e.errorMessage),th(!1);return}tB({commentId:String(eU.databaseId),body:tu,bodyVersion:eU.bodyVersion},{onError:()=>{th(!1),tr({type:"error",message:"Failed to update comment"})}})},eT[53]=tr,eT[54]=tu,eT[55]=eU.bodyVersion,eT[56]=eU.databaseId,eT[57]=e2?.sourceContentFromDiffLines,eT[58]=tB,eT[59]=er):er=eT[59],e2?.sourceContentFromDiffLines;let tq=er;eT[60]!==eU.databaseId?(ea=eU.databaseId?.toString(),eT[60]=eU.databaseId,eT[61]=ea):ea=eT[61];let tz=ea,tW=tz?`${void 0===eH?"r":eH}${tz}`:void 0;eT[62]!==tW?(es=tW&&h.fV?new URL(`${h.fV.pathname}#${tW}`,h.fV.origin).toString():"",eT[62]=tW,eT[63]=es):es=eT[63];let tX=es,tZ=(0,C.useRef)(null);eT[64]!==tW||eT[65]!==tz||eT[66]!==e8?(el={isAnchorable:e8,commentId:tz,commentAnchor:tW,containerRef:tZ},eT[64]=tW,eT[65]=tz,eT[66]=e8,eT[67]=el):el=eT[67],(0,F.u)(el);let tQ=e9>0,tJ=e9>1,tY=ta?"editing":tl?"hidden":"visible";eT[68]!==ti?(eo={as:ti},eT[68]=ti,eT[69]=eo):eo=eT[69];let t0=eo,t1=eU.author?.avatarUrl??tn.avatarUrl,t2=eU.reference.text??`#${eU.reference.number}`;eT[70]!==eU||eT[71]!==tX||eT[72]!==t2?(ed={...eU,url:tX,referenceText:t2},eT[70]=eU,eT[71]=tX,eT[72]=t2,eT[73]=ed):ed=eT[73];let t3=eU.author?.login??tn.login,t4=eU.reference?.author?.login??"";eT[74]===Symbol.for("react.memo_cache_sentinel")?(ec={},eT[74]=ec):ec=eT[74];let t6="copilot"===eU.reviewVariantType?"copilot-pull-request-reviewer":void 0,t5="copilot"===eU.reviewVariantType?l.S.Bot:void 0;eT[75]!==eW||eT[76]!==tl||eT[77]!==eF||eT[78]!==tQ||eT[79]!==t$||eT[80]!==tA||eT[81]!==t_||eT[82]!==tt||eT[83]!==tF||eT[84]!==tO||eT[85]!==e5||eT[86]!==t0||eT[87]!==t1||eT[88]!==ed||eT[89]!==t3||eT[90]!==t4||eT[91]!==t6||eT[92]!==t5?(eu={headingProps:t0,avatarUrl:t1,comment:ed,commentRef:tZ,deleteComment:tA,editComment:tH,editHistoryComponent:void 0,hideComment:t_,onBlock:t$,onUnblock:tF,onMinimize:to,onSuccessfulBlock:eC,isMinimized:tl,commentAuthorLogin:t3,navigate:u.l,commentSubjectAuthorLogin:t4,onReplySelect:tt,unhideComment:tO,hideActions:eW,isReply:tQ,forceInlineAvatar:!0,containerStyle:ec,originalDiffPathUri:e5,isOutdated:eF,commentAuthorSlug:t6,commentAuthorType:t5},eT[75]=eW,eT[76]=tl,eT[77]=eF,eT[78]=tQ,eT[79]=t$,eT[80]=tA,eT[81]=t_,eT[82]=tt,eT[83]=tF,eT[84]=tO,eT[85]=e5,eT[86]=t0,eT[87]=t1,eT[88]=ed,eT[89]=t3,eT[90]=t4,eT[91]=t6,eT[92]=t5,eT[93]=eu):eu=eT[93];let t7=eu;eT[94]!==e9||eT[95]!==tQ||eT[96]!==e1?(em=()=>tQ?void 0!==e1?`Reply ${e9} to Comment ${e1}`:`Reply ${e9}`:void 0!==e1?`Comment ${e1}`:"Comment",eT[94]=e9,eT[95]=tQ,eT[96]=e1,eT[97]=em):em=eT[97];let t8=em;eT[98]!==eU.body||eT[99]!==ta||eT[100]!==tt?(ef=()=>{if(ta)return;let e=h.cg?.getSelection(),t=e?.anchorNode?{anchorNode:e.anchorNode,range:e.getRangeAt(0)}:null;tt((0,ev.E)(tZ?.current,t,eU.body))},eT[98]=eU.body,eT[99]=ta,eT[100]=tt,eT[101]=ef):ef=eT[101];let t9=ef;eT[102]===Symbol.for("react.memo_cache_sentinel")?(eh=(0,ep.E7)(),eT[102]=eh):eh=eT[102];let ne=eh;eT[103]!==t9?(ex={"pull-requests-diff-view:quote-reply":t9},eT[103]=t9,eT[104]=ex):ex=eT[104];let nt=e8?tW:void 0,nn=e$?eZ?0:-1:0,ni=eU.id;eT[105]!==t8||eT[106]!==eZ?(ey=eZ?{role:"document","aria-roledescription":"comment","aria-label":t8()}:{},eT[105]=t8,eT[106]=eZ,eT[107]=ey):ey=eT[107];let nr=e8&&K,na="hidden"===tY&&"pb-2";return eT[108]!==nr||eT[109]!==na?(eL=(0,x.$)(U,nr,na),eT[108]=nr,eT[109]=na,eT[110]=eL):eL=eT[110],eT[111]!==tJ||eT[112]!==tQ?(eS=tJ&&(0,i.jsx)("div",{className:B,"data-is-reply":tQ,children:(0,i.jsx)("div",{className:q})}),eT[111]=tJ,eT[112]=tQ,eT[113]=eS):eS=eT[113],eT[114]!==t7||eT[115]!==eW?(eN=eW?void 0:(0,i.jsx)(P.RelayEnvironmentProvider,{environment:ne,children:(0,i.jsx)(o.p,{...t7})}),eT[114]=t7,eT[115]=eW,eT[116]=eN):eN=eT[116],eT[117]!==eU.body||eT[118]!==t7||eT[119]!==eZ||eT[120]!==eF||eT[121]!==eN||eT[122]!==eY?(ej=(0,i.jsx)(l.v,{...t7,commentBody:eU.body,threadCommentCount:eY,isInDialogMode:eZ,actions:eN,isOutdated:eF}),eT[117]=eU.body,eT[118]=t7,eT[119]=eZ,eT[120]=eF,eT[121]=eN,eT[122]=eY,eT[123]=ej):ej=eT[123],eT[124]!==tJ||eT[125]!==ej?(eD=(0,i.jsx)("div",{className:z,"data-is-nested-reply":tJ,children:ej}),eT[124]=tJ,eT[125]=ej,eT[126]=eD):eD=eT[126],eT[127]!==tD?(ew=tD&&(0,i.jsxs)(b.A,{variant:"danger",className:"m-3",children:[(0,i.jsx)(p.StopIcon,{className:"mr-2"}),tD]}),eT[127]=tD,eT[128]=ew):ew=eT[128],eT[129]!==eP||eT[130]!==tQ?(eI=tQ&&(0,i.jsx)("div",{className:W,"data-is-last-child":eP}),eT[129]=eP,eT[130]=tQ,eT[131]=eI):eI=eT[131],eT[132]!==tu||eT[133]!==tY||eT[134]!==tb||eT[135]!==tQ||eT[136]!==tf||eT[137]!==tU||eT[138]!==tK||eT[139]!==tq||eT[140]!==e2?(ek="editing"===tY&&(0,i.jsx)("div",{className:(0,x.$)("flex-1 min-width-0 pr-2 pt-1 pb-2",tQ?"pl-0":"pl-2"),children:(0,i.jsxs)(H.S,{ref:tS,label:"Update comment",value:tu,onChange:tK,onPrimaryAction:tq,suggestedChangesConfig:e2,markdownErrorMessage:tb,children:[(0,i.jsx)(s.xR,{variant:"default",onClick:tU,children:"Cancel"}),(0,i.jsx)(s.xR,{disabled:tf||!tu.length,loading:tf,variant:"primary",onClick:tq,children:"Update"})]})}),eT[132]=tu,eT[133]=tY,eT[134]=tb,eT[135]=tQ,eT[136]=tf,eT[137]=tU,eT[138]=tK,eT[139]=tq,eT[140]=e2,eT[141]=ek):ek=eT[141],eT[142]!==e3||eT[143]!==eU||eT[144]!==tY||eT[145]!==td||eT[146]!==eq||eT[147]!==tE||eT[148]!==tg||eT[149]!==eF||eT[150]!==tQ||eT[151]!==eG||eT[152]!==tV||eT[153]!==e2||eT[154]!==e4?.viewerCanApplySuggestion?(eA="visible"===tY&&(0,i.jsxs)("div",{className:Z,"data-is-reply":tQ,children:[eU.bodyHTML&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(f.vb,{ref:tN,className:(0,x.$)("markdown-body",X),"comment-testid":`Comment body html for comment ${eU.id}`,html:eU.bodyHTML}),"copilot"===eU.reviewVariantType&&(0,i.jsxs)("p",{className:"text-small color-fg-muted mt-2 mb-1",children:[(0,i.jsx)("a",{target:"_blank",rel:"noopener noreferrer",className:"Link--inTextBlock",href:"https://docs.github.com/en/copilot/responsible-use-of-github-copilot-features/responsible-use-of-github-copilot-code-review",children:"Copilot"})," ","uses AI. Check for mistakes."]}),(0,i.jsxs)("div",{className:"d-flex flex-direction-column gap-2",children:["copilot"===eU.reviewVariantType&&(0,i.jsx)("div",{className:"mt-2",children:(0,i.jsx)(c.Z,{commentUrl:eU.url,commentId:eU.databaseId?.toString()??""})}),eU.reactionGroups&&(0,i.jsx)("div",{className:"d-flex flex-direction-column mt-2",children:(0,i.jsx)(m.P,{ref:tj,reactionGroups:eU.reactionGroups,onReact:tV,canReact:eU.viewerCanReact})})]}),e3&&(0,i.jsx)(eg,{comment:eU,commentBodyRef:tN,filePath:eq,isOutdated:eF,isThreadResolved:eG,databaseId:eU.databaseId,suggestedChangesConfig:e2,applySuggestedChangesValidationData:e3,viewerCanApplySuggestion:e4?.viewerCanApplySuggestion})]}),td&&(0,i.jsx)(v.K,{title:"Delete comment?",confirmButtonContent:"Delete",confirmButtonType:"danger",confirmButtonLoading:tg,onClose:tE,children:"Are you sure you want to delete this comment?"})]}),eT[142]=e3,eT[143]=eU,eT[144]=tY,eT[145]=td,eT[146]=eq,eT[147]=tE,eT[148]=tg,eT[149]=eF,eT[150]=tQ,eT[151]=eG,eT[152]=tV,eT[153]=e2,eT[154]=e4?.viewerCanApplySuggestion,eT[155]=eA):eA=eT[155],eT[156]!==tQ||eT[157]!==eI||eT[158]!==ek||eT[159]!==eA?(eE=(0,i.jsxs)("div",{className:B,"data-is-reply":tQ,children:[eI,ek,eA]}),eT[156]=tQ,eT[157]=eI,eT[158]=ek,eT[159]=eA,eT[160]=eE):eE=eT[160],eT[161]!==eU.id||eT[162]!==te||eT[163]!==nt||eT[164]!==nn||eT[165]!==ey||eT[166]!==eL||eT[167]!==eS||eT[168]!==eD||eT[169]!==ew||eT[170]!==eE||eT[171]!==e0?(eR=(0,i.jsxs)("div",{ref:tZ,id:nt,tabIndex:nn,"data-first-thread-comment":te,"data-marker-navigation-comment-thread-id":e0,"data-marker-navigation-comment-id":ni,...ey,className:eL,children:[eS,eD,ew,eE]}),eT[161]=eU.id,eT[162]=te,eT[163]=nt,eT[164]=nn,eT[165]=ey,eT[166]=eL,eT[167]=eS,eT[168]=eD,eT[169]=ew,eT[170]=eE,eT[171]=e0,eT[172]=eR):eR=eT[172],eT[173]!==ex||eT[174]!==eR?(e_=(0,i.jsx)(eb.tL,{commands:ex,children:eR}),eT[173]=ex,eT[174]=eR,eT[175]=e_):e_=eT[175],e_}:function({isAnchorable:e=!1,index:t=0,isInlineComment:n,isLastChild:r,isOutdated:a,isThreadResolved:y,lineMarkersKey:L,anchorPrefix:N="r",comment:j,disableDialogMode:w,enableDialogMode:I,filePath:A,gridCellId:T,hideActions:M,isFirstComment:Q=!1,isInDialogMode:J,onDeleteLineComment:Y,onQuoteReply:ee=u.l,threadCommentCount:et,threadId:en,threadPositionNumber:ei,suggestedChangesConfig:er,applySuggestedChangesValidationData:ea,viewerData:es,ghostUser:el=d.t.ghostUser,originalDiffPathUri:eo,headingLevel:ed="h3"}){let{addToast:ec}=(0,g.Y6)(),[eu,em]=(0,C.useState)(!1),[ef,eh]=(0,C.useState)(j.isHidden),[ex,eC]=(0,C.useState)(!1),[ey,eL]=(0,C.useState)(j.body),[eS,eN]=(0,C.useState)(!1),[ej,eD]=(0,C.useState)(!1),[ew,eI]=(0,C.useState)(""),ek=(0,S.Kp)(),{persistCommentToStorage:eA,removePersistedCommentFromStorage:eE}=(0,G.L)({subjectId:ek,filePath:A,fileLevelComment:"FILE"===j.subjectType,threadId:j.id,handlePersistedCommentExists:({text:e})=>{e&&eL(e)}}),eR=(0,C.useRef)(null),e_=(0,C.useRef)(null),eT=(0,C.useRef)(null),[eO,eM]=(0,C.useState)(""),e$=()=>{eR.current?.focus()};(0,C.useEffect)(()=>{if(eu){let e=window.setTimeout(e$);return()=>{window.clearTimeout(e)}}},[eu]);let{mutate:eP}=k({filePath:A,lineMarkersKey:L,onSuccess:()=>{eC(!1),eD(!1),Y?.()}}),eF=async()=>{w?.(),eC(!0)},{mutate:eG}=E(A,L),{mutate:eV}=O(A,L),{mutate:eH}=D(),{mutate:eU}=_(),{mutate:eK}=R(A,L),{mutate:eB}=$({filePath:A,lineMarkersKey:L,onSuccess:()=>{em(!1),eN(!1),eE()}}),eq=(0,C.useCallback)(()=>{eN(!0);let e=(0,V.u)(ey,er?.sourceContentFromDiffLines??"");if(!e.isValid){eI(e.errorMessage),eN(!1);return}eB({commentId:String(j.databaseId),body:ey,bodyVersion:j.bodyVersion},{onError:()=>{eN(!1),ec({type:"error",message:"Failed to update comment"})}})},[ec,ey,j,er?.sourceContentFromDiffLines,eB]),ez=j.databaseId?.toString(),eW=ez?`${N}${ez}`:void 0,eX=eW&&h.fV?new URL(`${h.fV.pathname}#${eW}`,h.fV.origin).toString():"",eZ=(0,C.useRef)(null);(0,F.u)({isAnchorable:e,commentId:ez,commentAnchor:eW,containerRef:eZ});let eQ=t>0,eJ=t>1,eY=eu?"editing":ef?"hidden":"visible",e0={headingProps:{as:ed},avatarUrl:j.author?.avatarUrl??el.avatarUrl,comment:{...j,url:eX,referenceText:j.reference.text??`#${j.reference.number}`},commentRef:eZ,deleteComment:eF,editComment:()=>{em(!0)},editHistoryComponent:void 0,hideComment:e=>{if(!j.databaseId)throw Error("Comment not found");eG({commentDatabaseId:j.databaseId,reason:e},{onError:()=>{eN(!1),eM("Failed to hide comment")},onSuccess:()=>eh(!0)})},onBlock:(e,t,n,i,r,a)=>eH({duration:e,shouldHideComment:t,hiddenReason:n,organizationLogin:i,notifyBlockedUser:r,userLogin:a},{onError:()=>eM("Failed to block user"),onSuccess:()=>{t&&eh(!0)}}),onUnblock:(e,t)=>eU({organizationLogin:e,userLogin:t},{onError:()=>eM("Failed to unblock user")}),onMinimize:eh,onSuccessfulBlock:()=>{setTimeout(()=>h.cg?.location.reload(),800)},isMinimized:ef,commentAuthorLogin:j.author?.login??el.login,navigate:u.l,commentSubjectAuthorLogin:j.reference?.author?.login??"",onReplySelect:ee,unhideComment:()=>{if(!j.databaseId)throw Error("Comment not found");eV({commentDatabaseId:j.databaseId},{onError:()=>{eN(!1),eM("Failed to unhide comment")},onSuccess:()=>eh(!1)})},hideActions:M,isReply:eQ,forceInlineAvatar:!0,containerStyle:{},originalDiffPathUri:eo,isOutdated:a,commentAuthorSlug:"copilot"===j.reviewVariantType?"copilot-pull-request-reviewer":void 0,commentAuthorType:"copilot"===j.reviewVariantType?l.S.Bot:void 0},e1=(0,C.useMemo)(()=>(0,ep.E7)(),[]);return(0,i.jsx)(eb.tL,{commands:{"pull-requests-diff-view:quote-reply":()=>{if(eu)return;let e=h.cg?.getSelection(),t=e?.anchorNode?{anchorNode:e.anchorNode,range:e.getRangeAt(0)}:null;ee((0,ev.E)(eZ?.current,t,j.body))}},children:(0,i.jsxs)("div",{ref:eZ,id:e?eW:void 0,tabIndex:n?J?0:-1:0,"data-first-thread-comment":Q,"data-marker-navigation-comment-thread-id":en,"data-marker-navigation-comment-id":j.id,...J?{role:"document","aria-roledescription":"comment","aria-label":eQ?void 0!==ei?`Reply ${t} to Comment ${ei}`:`Reply ${t}`:void 0!==ei?`Comment ${ei}`:"Comment"}:{},className:(0,x.$)(U,e&&K,"hidden"===eY&&"pb-2"),children:[eJ&&(0,i.jsx)("div",{className:B,"data-is-reply":eQ,children:(0,i.jsx)("div",{className:q})}),(0,i.jsx)("div",{className:z,"data-is-nested-reply":eJ,children:(0,i.jsx)(l.v,{...e0,commentBody:j.body,threadCommentCount:et,isInDialogMode:J,actions:M?void 0:(0,i.jsx)(P.RelayEnvironmentProvider,{environment:e1,children:(0,i.jsx)(o.p,{...e0})}),isOutdated:a})}),eO&&(0,i.jsxs)(b.A,{variant:"danger",className:"m-3",children:[(0,i.jsx)(p.StopIcon,{className:"mr-2"}),eO]}),(0,i.jsxs)("div",{className:B,"data-is-reply":eQ,children:[eQ&&(0,i.jsx)("div",{className:W,"data-is-last-child":r}),"editing"===eY&&(0,i.jsx)("div",{className:(0,x.$)("flex-1 min-width-0 pr-2 pt-1 pb-2",eQ?"pl-0":"pl-2"),children:(0,i.jsxs)(H.S,{ref:eR,label:"Update comment",value:ey,onChange:e=>{eA({text:e}),eL(e),eI(void 0)},onPrimaryAction:eq,suggestedChangesConfig:er,markdownErrorMessage:ew,children:[(0,i.jsx)(s.xR,{variant:"default",onClick:()=>{em(!1),eE(),eL(j.body)},children:"Cancel"}),(0,i.jsx)(s.xR,{disabled:eS||!ey.length,loading:eS,variant:"primary",onClick:eq,children:"Update"})]})}),"visible"===eY&&(0,i.jsxs)("div",{className:Z,"data-is-reply":eQ,children:[j.bodyHTML&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(f.vb,{ref:e_,className:(0,x.$)("markdown-body",X),"comment-testid":`Comment body html for comment ${j.id}`,html:j.bodyHTML}),"copilot"===j.reviewVariantType&&(0,i.jsxs)("p",{className:"text-small color-fg-muted mt-2 mb-1",children:[(0,i.jsx)("a",{target:"_blank",rel:"noopener noreferrer",className:"Link--inTextBlock",href:"https://docs.github.com/en/copilot/responsible-use-of-github-copilot-features/responsible-use-of-github-copilot-code-review",children:"Copilot"})," ","uses AI. Check for mistakes."]}),(0,i.jsxs)("div",{className:"d-flex flex-direction-column gap-2",children:["copilot"===j.reviewVariantType&&(0,i.jsx)("div",{className:"mt-2",children:(0,i.jsx)(c.Z,{commentUrl:j.url,commentId:j.databaseId?.toString()??""})}),j.reactionGroups&&(0,i.jsx)("div",{className:"d-flex flex-direction-column mt-2",children:(0,i.jsx)(m.P,{ref:eT,reactionGroups:j.reactionGroups,onReact:(e,t)=>{if(!j.databaseId)throw Error("Comment not found");setTimeout(()=>eT.current?.focus(),0),eK({commentDatabaseId:j.databaseId,threadId:en,reaction:e,viewerHasReacted:t},{onError:()=>{eN(!1),ec({type:"error",message:"Failed to react to comment"})}})},canReact:j.viewerCanReact})})]}),ea&&(0,i.jsx)(eg,{comment:j,commentBodyRef:e_,filePath:A,isOutdated:a,isThreadResolved:y,databaseId:j.databaseId,suggestedChangesConfig:er,applySuggestedChangesValidationData:ea,viewerCanApplySuggestion:es?.viewerCanApplySuggestion})]}),ex&&(0,i.jsx)(v.K,{title:"Delete comment?",confirmButtonContent:"Delete",confirmButtonType:"danger",confirmButtonLoading:ej,onClose:e=>{"confirm"===e?(eD(!0),eP({commentId:j.id,threadId:en,filePath:A},{onError:()=>{eC(!1),ec({type:"error",message:"Failed to delete comment"}),eD(!1)}})):(T&&I?.(T),eC(!1),eD(!1))},children:"Are you sure you want to delete this comment?"})]})]})]})})};function eC(){setTimeout(ey,800)}function ey(){return h.cg?.location.reload()}try{ex.displayName||(ex.displayName="ReviewThreadComment")}catch{}},69510:(e,t,n)=>{n.d(t,{XG:()=>c,_l:()=>m});var i=n(68273),r=n(21728),a=n(65510),s=n(20622),l=n(96379);function o(e){return null!==e&&"object"==typeof e&&"previewInfo"in e}function d(e){return{thread:{id:e.threadId,isResolved:e.isResolved,isOutdated:e.isOutdated,line:e.line,subjectType:e.subjectType,subject:e.subject,commentsData:e.commentsData},previewInfo:{threadId:e.threadId,commentId:e.commentId,path:e.path,threadPreviewComments:e.threadPreviewComments,originalDiffPathUri:e.originalDiffPathUri,firstComment:e.firstComment,subject:e.subject}}}function c(e){return[s.uT.threadPreviews,e]}function u(e){let t=`${e}/page_data/${s.uT.threadPreviews}`;return{queryKey:c(e),queryFn:async()=>{let e=await (0,l.QJ)(t);if(!e.ok)throw Error(`HTTP ${e.status}`);let n=await e.json();return n.length>0&&!o(n[0])?n.map(d):n}}}let m=(0,i.Z6)()?function(e){let t,n,i,s=(0,r.c)(8),{pathName:l,initialData:c}=e;s[0]!==l?(t=u(l),s[0]=l,s[1]=t):t=s[1];let{queryFn:m,queryKey:f}=t;s[2]!==c?(n=c&&c.length>0&&!o(c[0])?c.map(d):c,s[2]=c,s[3]=n):n=s[3];let h=n;return s[4]!==m||s[5]!==f||s[6]!==h?(i={queryKey:f,queryFn:m,initialData:h,staleTime:1/0},s[4]=m,s[5]=f,s[6]=h,s[7]=i):i=s[7],(0,a.U)(i)}:function({pathName:e,initialData:t}){let{queryFn:n,queryKey:i}=u(e),r=t&&t.length>0&&!o(t[0])?t.map(d):t;return(0,a.U)({queryKey:i,queryFn:n,initialData:r,staleTime:1/0})}},70109:(e,t,n)=>{n.d(t,{S:()=>d});var i=n(74848),r=n(68273),a=n(21728),s=n(42118),l=n(96540),o=n(27011);let d=(0,l.forwardRef)((0,r.GV)()?(e,t)=>{let n,r,l,d,c,u,m,f=(0,a.c)(21);f[0]!==e?({children:n,...r}=e,f[0]=e,f[1]=n,f[2]=r):(n=f[1],r=f[2]);let h=(0,o.Yp)(),{baseRepository:g}=(0,o.GK)(),p=(0,o.L3)();f[3]!==h.id?(l={id:h.id},f[3]=h.id,f[4]=l):l=f[4];let b=`${g.ownerLogin}/${g.name}`;f[5]!==g.id||f[6]!==b?(d={databaseId:g.id,nwo:b,slashCommandsEnabled:!1},f[5]=g.id,f[6]=b,f[7]=d):d=f[7],f[8]!==p.effectiveRange.baseOid||f[9]!==p.effectiveRange.headOid?(c={startCommitOid:p.effectiveRange.baseOid,endCommitOid:p.effectiveRange.headOid},f[8]=p.effectiveRange.baseOid,f[9]=p.effectiveRange.headOid,f[10]=c):c=f[10],f[11]!==h.number||f[12]!==l||f[13]!==d||f[14]!==c?(u={type:"pull_request",id:l,pullRequestNumber:h.number,repository:d,comparison:c},f[11]=h.number,f[12]=l,f[13]=d,f[14]=c,f[15]=u):u=f[15];let v=u;return f[16]!==n||f[17]!==t||f[18]!==r||f[19]!==v?(m=(0,i.jsx)(s.hF,{...r,ref:t,placeholder:"Leave a comment",actions:n,subject:v,showLabel:!1}),f[16]=n,f[17]=t,f[18]=r,f[19]=v,f[20]=m):m=f[20],m}:({children:e,...t},n)=>{let r=(0,o.Yp)(),{baseRepository:a}=(0,o.GK)(),l=(0,o.L3)(),d={type:"pull_request",id:{id:r.id},pullRequestNumber:r.number,repository:{databaseId:a.id,nwo:`${a.ownerLogin}/${a.name}`,slashCommandsEnabled:!1},comparison:{startCommitOid:l.effectiveRange.baseOid,endCommitOid:l.effectiveRange.headOid}};return(0,i.jsx)(s.hF,{...t,ref:n,placeholder:"Leave a comment",actions:e,subject:d,showLabel:!1})});d.displayName="ConversationCommentBox"},71317:(e,t,n)=>{n.d(t,{k:()=>r});var i=n(71315);function r(e,t=0){if(void 0===i.XC)return;let n=i.XC.getElementById("screenReaderAnnouncementDiv")??void 0;if(n||(n=function(){if(void 0===i.XC)return;let e=i.XC.createElement("div");return e.classList.add("sr-only","mt-n1"),e.id="screenReaderAnnouncementDiv",e.setAttribute("role","alert"),e.setAttribute("data-testid","screenReaderAnnouncement"),e.setAttribute("aria-live","assertive"),i.XC.body.appendChild(e),e}()),!n)return;let a=n.textContent===e?`${e}\u00A0`:e;setTimeout(()=>{n&&(n.textContent=a)},t)}},73262:(e,t,n)=>{n.d(t,{K:()=>c});var i=n(74848),r=n(21728),a=n(96540),s=n(21373),l=n(34164),o=n(48505),d=n(18373);function c(e){let t,n,c,u,m,f,h,g,p,b,v=(0,r.c)(21),{automatedComment:x,isButtonDisabled:C,dismissError:y,onDismiss:L,onReopen:S,className:N}=e,[j,D]=(0,a.useState)(!1),{isDismissable:w,isReopenable:I,resourceName:k,toggleButtonLabel:A}=(f=(0,r.c)(6),g=!(h=x.isDismissed),p="alert",x.source===o.vk.CodeQuality&&(p="finding"),b=h?`Reopen ${p}`:`Dismiss ${p}`,f[0]!==g||f[1]!==h||f[2]!==h||f[3]!==p||f[4]!==b?(m={isDismissed:h,isDismissable:g,isReopenable:h,resourceName:p,toggleButtonLabel:b},f[0]=g,f[1]=h,f[2]=h,f[3]=p,f[4]=b,f[5]=m):m=f[5],m),E=C||!x.viewerCanDismiss,R=C||!x.viewerCanReopen;return v[0]!==x||v[1]!==j||v[2]!==y||v[3]!==L?(t=j&&(0,i.jsx)(d.U,{setOpen:D,count:1,error:y,dismissalOptions:x.dismissalOptions,onSubmit:e=>{let{resolution:t,dismissalComment:n}=e;return L({reason:t,resolutionNote:n},{onSuccess:()=>D(!1)})},delegatedAlertDismissalEnabled:!1,codeSecurity:x.source===o.vk.CodeScanning}),v[0]=x,v[1]=j,v[2]=y,v[3]=L,v[4]=t):t=v[4],v[5]!==N||v[6]!==E||v[7]!==w||v[8]!==k||v[9]!==A?(n=w&&(0,i.jsxs)("div",{className:(0,l.$)("d-flex flex-items-center flex-wrap",N),children:[(0,i.jsx)(s.Q,{"aria-label":A,className:"mr-2",onClick:()=>D(!0),disabled:E,children:A}),(0,i.jsxs)("span",{className:"fgColor-muted f6",children:["Dismissing the ",k," will mark this conversation as resolved."]})]}),v[5]=N,v[6]=E,v[7]=w,v[8]=k,v[9]=A,v[10]=n):n=v[10],v[11]!==N||v[12]!==R||v[13]!==I||v[14]!==S||v[15]!==A?(c=I&&(0,i.jsx)("div",{className:(0,l.$)("d-flex flex-items-center flex-wrap",N),children:(0,i.jsx)(s.Q,{"aria-label":A,onClick:S,disabled:R,children:A})}),v[11]=N,v[12]=R,v[13]=I,v[14]=S,v[15]=A,v[16]=c):c=v[16],v[17]!==t||v[18]!==n||v[19]!==c?(u=(0,i.jsxs)(i.Fragment,{children:[t,n,c]}),v[17]=t,v[18]=n,v[19]=c,v[20]=u):u=v[20],u}try{c.displayName||(c.displayName="BaseAutomatedReviewCommentActions")}catch{}},79036:(e,t,n)=>{n.d(t,{S:()=>c,Xh:()=>d,GF:()=>u});var i=n(74848),r=n(68273),a=n(21728),s=n(34164),l=n(48505);let o="AnnotationIcon-module__AnimatedAnnotationIcon--rXSEJ";function d({annotationLevel:e,...t}){let{icon:n,...r}=u[e];return function({fill:e,stroke:t,ariaLabel:n,svgHtml:r,className:a}){return(0,i.jsx)("svg",{"aria-label":n,className:a,fill:e,height:"24",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",style:{boxShadow:"none"},viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",children:r})}({...n,...r,...t})}let c=(0,r.GV)()?function(e){let t,n,r,l,c=(0,a.c)(8);return c[0]!==e?({className:t,...n}=e,c[0]=e,c[1]=t,c[2]=n):(t=c[1],n=c[2]),c[3]!==t?(r=(0,s.$)(o,t),c[3]=t,c[4]=r):r=c[4],c[5]!==n||c[6]!==r?(l=(0,i.jsx)(d,{...n,className:r}),c[5]=n,c[6]=r,c[7]=l):l=c[7],l}:function({className:e,...t}){return(0,i.jsx)(d,{...t,className:(0,s.$)(o,e)})},u={[l.UZ.Failure]:{priority:1,ariaLabel:"Check failure",primaryColor:"danger.fg",primaryColorClass:"fgColor-danger",borderColor:"borderColor-danger-emphasis",icon:{fill:"var(--bgColor-danger-emphasis, var(--color-danger-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,i.jsx)("line",{x1:"15",x2:"9",y1:"9",y2:"15"}),(0,i.jsx)("line",{x1:"9",x2:"15",y1:"9",y2:"15"})]})}},[l.UZ.Warning]:{priority:2,ariaLabel:"Check warning",primaryColor:"attention.fg",primaryColorClass:"fgColor-attention",borderColor:"borderColor-attention-emphasis",icon:{fill:"var(--bgColor-attention-emphasis, var(--color-attention-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"8",y2:"12"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"16",y2:"16"})]})}},[l.UZ.Notice]:{priority:3,ariaLabel:"Check notice",primaryColor:"fg.muted",primaryColorClass:"fgColor-muted",borderColor:"fgColor-muted",icon:{fill:"var(--bgColor-neutral-emphasis, var(--color-neutral-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"16",y2:"12"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"8",y2:"8"})]})}}};try{d.displayName||(d.displayName="AnnotationIcon")}catch{}try{c.displayName||(c.displayName="AnimatedAnnotationIcon")}catch{}},80081:(e,t,n)=>{n.d(t,{EJ:()=>r,Lm:()=>a,o_:()=>i});function i({suggestedChange:e,hasCommitRange:t,isOutdated:n,isPending:i,isResolved:r,pullRequestIsClosed:a,pullRequestIsInMergeQueue:s,userCanApplySuggestion:l,applySuggestedChangesValidationData:o,suggestedChangesConfig:d}){let{lineRange:c}=o;if(n)return{isValid:!1,reason:"This suggestion is outdated and cannot be applied."};if(i)return{isValid:!1,reason:"This suggestion is part of a pending comment and cannot be applied."};if(r)return{isValid:!1,reason:"This suggestion is part of a resolved comment and cannot be applied."};if(a)return{isValid:!1,reason:"This suggestion cannot be applied because the pull request is closed."};if(s)return{isValid:!1,reason:"This suggestion cannot be applied because the pull request is queued to merge."};if(!l)return{isValid:!1,reason:"You do not have permission to apply this suggestion."};if(!c)return{isValid:!1,reason:"This suggestion does not have a valid line range."};if(t)return{isValid:!1,reason:"Unable to apply suggestions when viewing a specific commit range."};if(!d)return{isValid:!1,reason:"Unable to determine the validity of this suggestion."};if(!d?.isValidSuggestionRange)return{isValid:!1,reason:"Unable to apply suggestions on deleted lines."};let u=d?.sourceContentFromDiffLines,m=e.suggestion.join(`
`);return 0!==e.suggestion.length&&m===u?{isValid:!1,reason:"This suggestion is invalid because no changes were made to the code."}:{isValid:!0}}function r(e,t){return t.length>=50?{isValid:!1,reason:"Unable to commit due to too many changes in the batch."}:t.find(t=>t.threadId===e.threadId)||function(e,t){for(let r of t)if(e.path===r.path){var n,i;return n=e.lineRange,i=r.lineRange,n.endLineNumber>=i.startLineNumber&&n.startLineNumber<=i.endLineNumber}return!1}(e,t)?{isValid:!1,reason:"Unable to commit due to other pending changes affecting this line."}:{isValid:!0}}function a(e){if(!e||e.subjectType?.toUpperCase()!=="LINE")return;let t=e.positioning??e.subject;if(!t)return;let n=t.startDiffSide??t.endDiffSide;if(!n||"isOutdated"in t&&t.isOutdated||!t.endLine||!t.endDiffSide)return;let i=t.startLine??t.endLine;return{endLineNumber:t.endLine,endOrientation:t.endDiffSide,startLineNumber:i,startOrientation:n||"RIGHT"}}},82590:(e,t,n)=>{n.d(t,{oO:()=>aQ,Ao:()=>aZ,Yf:()=>_.Yf});var i=n(74848),r=n(68273),a=n(21728),s=n(90047),l=n(96540),o=n(36729),d=n(77430),c=n(38621),u=n(81960),m=n(26108),f=n(53627);function h(e,t="r"){(0,f.Zu)(`#${t}${e}`)}var g=n(91835),p=n(71315),b=n(83494),v=n(34164),x=n(50625),C=n(93642);let y="AddCommentEditor-module__AddCommentEditor--JFfip",L="AddCommentEditor-module__ConversationCommentBox--Q4U7y",S="AddCommentEditor-module__hideMarkdownFooter--sfStq",N="AddCommentEditor-module__showMarkdownFooter--ZyiXk",j="AddCommentEditor-module__isReplying--DYCp6",D="AddCommentEditor-module__condensed--cPcHQ";var w=n(70109),I=n(27011),k=n(71323),A=n(97283),E=n(87134),R=n(36472),_=n(3038),T=n(51391),O=n(13814);let M=(0,l.createContext)(null),$=(0,r.GV)()?function(e){let t=(0,l.useContext)(M);if(!t)throw Error("Missing DiffStoreProvider in the tree");return(0,k.P)(t,e)}:function(e){let t=(0,l.useContext)(M);if(!t)throw Error("Missing DiffStoreProvider in the tree");return(0,k.P)(t,e)},P=({children:e,...t})=>{let n=(0,l.useRef)(null),r=(0,l.useRef)(t.diffLines),a=(0,l.useRef)(t.isSplitView),s=(0,l.useRef)(t.hiddenFeatures);return n.current||(n.current=F(t)),(0,l.useEffect)(()=>{n.current&&r.current.length!==t.diffLines.length&&(n.current.getState().diffLinesSliceUpdates.updateDiffLinesHash(t.diffLines),r.current=t.diffLines)},[t,t.diffLines]),(0,l.useEffect)(()=>{n.current&&a.current!==t.isSplitView&&(n.current.getState().diffLinesSliceUpdates.updateDiffView(t.isSplitView),a.current=t.isSplitView)},[t,t.isSplitView]),(0,l.useEffect)(()=>{n.current&&!function(e,t){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}(s.current,t.hiddenFeatures)&&(n.current.setState({hiddenFeatures:t.hiddenFeatures}),s.current=t.hiddenFeatures)},[t,t.hiddenFeatures]),(0,i.jsx)(M.Provider,{value:n.current,children:e})},F=e=>(0,A.y)()((0,E.lt)((...t)=>({...(e=>({dialogMode:{activeGridCellId:null},dialogModeActions:{enableDialogMode:t=>e(()=>({dialogMode:{activeGridCellId:t}}),void 0,"dialogMode#enabled"),disableDialogMode:()=>e(()=>({dialogMode:{activeGridCellId:null}}),void 0,"dialogMode#disabled")}}))(...t),...(({diffAnchor:e,path:t,diffLines:n,fileLineCount:i,isSplitView:r})=>(a,s)=>{let l=n.reduce((e,t)=>(e[(0,T.bo)(t)]=t,e),{}),{selectedLineKeys:o,selectedLineRange:d,startOrientation:c}=(0,T.EV)({diffAnchor:e,diffLines:n,isSplitView:r,lineRange:(0,T.KV)(e)}),u=(0,T.Aj)(o),m=(0,T.sB)(o),f=n.reduce((e,t)=>{let n=(0,T.bo)(t);return o.has((0,T.bo)(t))&&(e[n]={isSelected:!0,isFirstSelected:u===n,isLastSelected:m===n}),e},{}),h=null;if(u){let e=l[u];if(e&&c){let t="left"===c?e.left:e.right;t&&(h={lineNumber:t,orientation:c,shouldStartConversation:!1,lineKey:(0,T.bo)(e)})}}return{diffLines:{diffAnchor:e,_diffLines:n,_diffLinesHash:l,selectedLinesInfo:f,fileLineCount:i,firstLineSelectionOnDrag:h,_firstSelectedLineInfo:h?{lineKey:h.lineKey,lineNumber:h.lineNumber,orientation:h.orientation}:null,getDiffLinesInfo:()=>s().diffLines._diffLines,getSplitDiffLinesFromLineRange:e=>{let t=(0,_.Mk)(s().diffLines._diffLines),n=t.leftLines,i=t.rightLines;return(0,R.A)({selectedLineRange:e,leftLines:n,rightLines:i})},getSelectedDiffLines:()=>{let e=[];for(let t of s().diffLines.selectedLineKeys){let n=s().diffLines._diffLinesHash[t];n&&e.push(n)}return e},getfirstLineSelectionOnDrag:()=>s().diffLines.firstLineSelectionOnDrag,getSelectedLineRange:()=>s().diffLines.selectedLineRange,hasSelectedLines:()=>s().diffLines.selectedLineKeys.size>0,isSplitView:r,selectedLineKeys:o,selectedLineRange:d},diffLinesSliceUpdates:{updateDiffLinesHash:e=>{let t=e.reduce((e,t)=>(e[(0,T.bo)(t)]=t,e),{});a(n=>({diffLines:{...n.diffLines,_diffLines:e,_diffLinesHash:t}}),void 0,"updateDiffLines")},updateDiffView:e=>a(t=>({diffLines:{...t.diffLines,isSplitView:e}}),void 0,"update diff view settings")},diffLinesActions:{clearFirstLineSelectionOnDrag:()=>a(e=>({diffLines:{...e.diffLines,firstLineSelectionOnDrag:null}}),void 0,"clearFirstLineSelectionOnDrag"),addLineToSelection:({lineKey:n,orientation:i},r)=>{let l;if(!n)return;let o=s().diffLines._diffLinesHash[n];if(!o)return;let d=s().diffLines.firstLineSelectionOnDrag,c=s().diffLines._firstSelectedLineInfo,u=s().diffLines.selectedLineRange;if(d&&n===d.lineKey||!u){let e="right"===i?o.right:o.left;if(!e)return;s().diffLinesActions.selectLine({lineKey:n,firstLineSelectionOnDrag:{lineNumber:e,orientation:i,lineKey:n,shouldStartConversation:!1}},r);return}if(!c)return;let m=s().diffLines._diffLinesHash[c.lineKey];l=(0,T.M6)({current:o,currentOrientation:i,previous:m,previousOrientation:c.orientation})?{...u,startLineNumber:("left"===i?o?.left:o?.right)??-1,startOrientation:i,endLineNumber:c.lineNumber,endOrientation:c.orientation}:{...u,startLineNumber:c.lineNumber,startOrientation:c.orientation,endLineNumber:("left"===i?o?.left:o?.right)??-1,endOrientation:i};let{selectedLineKeys:f,selectedLineRange:h}=(0,T.EV)({diffAnchor:e,diffLines:s().diffLines._diffLines,isSplitView:s().diffLines.isSplitView,lineRange:l}),g=(0,T.Aj)(f),b=(0,T.sB)(f),v=Array.from(f).reduce((e,t)=>(e[t]={isFirstSelected:t===g,isLastSelected:t===b,isSelected:!0},e),{});if(!h?.endLineNumber||!h?.startLineNumber)return;let x=new O.J(h,t);p.cg?.dispatchEvent(x),a(e=>({diffLines:{...e.diffLines,selectedLineKeys:f,selectedLinesInfo:v,selectedLineRange:h}}),void 0,"addLineToSelection"),r(h)},clearSelectedLines:()=>{a(e=>({diffLines:{...e.diffLines,firstLineSelectionOnDrag:null,selectedLineKeys:new Set([]),selectedLinesInfo:{},selectedLineRange:void 0,_firstSelectedLineInfo:null}}),void 0,"clearSelectedLines")},selectLine:({lineKey:e,firstLineSelectionOnDrag:n},i)=>{if(!e)return;s().diffLinesActions.clearSelectedLines();let r=s().diffLines._diffLinesHash[e];if(!r)return;let l={[e]:{isFirstSelected:!0,isLastSelected:!0,isSelected:!0}},o="left"===n.orientation?r.left:r.right;if(!o)return;let d={diffAnchor:s().diffLines.diffAnchor,endLineNumber:o,endOrientation:n.orientation,startLineNumber:o,startOrientation:n.orientation},c=new O.J(d,t);p.cg?.dispatchEvent(c),a(t=>({diffLines:{...t.diffLines,firstLineSelectionOnDrag:{...n,lineKey:e},selectedLineKeys:new Set([e]),selectedLinesInfo:l,selectedLineRange:d,_firstSelectedLineInfo:{lineKey:e,lineNumber:n.lineNumber,orientation:n.orientation}}}),void 0,"selectLine"),i(d)},selectMultipleLines:({startLineKey:n,endLineKey:i,startOrientation:r,endOrientation:l,firstLineSelectionOnDrag:o},d)=>{if(!n||!i||!o)return;let c=s().diffLines._diffLinesHash[n],u=s().diffLines._diffLinesHash[i];if(!c||!u||!c.left&&!c.right||!u.left&&!u.right)return;let m={diffAnchor:e,endLineNumber:("right"===l?u.right:u.left)??-1,endOrientation:l,startLineNumber:("right"===r?c.right:c.left)??-1,startOrientation:r},{selectedLineKeys:f,selectedLineRange:h}=(0,T.EV)({diffAnchor:e,diffLines:s().diffLines._diffLines,isSplitView:s().diffLines.isSplitView,lineRange:m}),g=(0,T.Aj)(f),b=(0,T.sB)(f),v=Array.from(f).reduce((e,t)=>(e[t]={isFirstSelected:t===g,isLastSelected:t===b,isSelected:!0},e),{});if(!h?.endLineNumber||!h?.startLineNumber)return;let x=new O.J(h,t);p.cg?.dispatchEvent(x),a(e=>({diffLines:{...e.diffLines,selectedLinesInfo:v,selectedLineKeys:f,firstLineSelectionOnDrag:o,selectedLineRange:h,_firstSelectedLineInfo:{lineNumber:o.lineNumber,orientation:o.orientation,lineKey:o.lineKey}}}),void 0,"selectMultipleLines"),d(h)}}}})(e)(...t),...(({hiddenFeatures:e})=>()=>({hiddenFeatures:e}))(e)(...t),...(({addInjectedContextLines:e})=>()=>({injectedContextLinesActions:{addInjectedContextLines:e}}))(e)(...t),...(({startNewConversationForLineOrFileMap:e})=>(t,n)=>({startNewConversationForLineOrFileMap:e,getMoveNewCommentDataForLine:e=>n().startNewConversationForLineOrFileMap[e],addStartNewCommentOnLine:(t,n,i)=>{e[t]={diffLineKey:i,startNewComment:n}}}))(e)(...t),...(({newTreeEntry:e,oldTreeEntry:t})=>()=>({treeEntries:{newTreeEntry:e,oldTreeEntry:t}}))(e)(...t)}),{name:`diff-store-${e.diffAnchor}`}));try{M.displayName||(M.displayName="DiffStoreContext")}catch{}try{P.displayName||(P.displayName="DiffStoreProvider")}catch{}let G=(0,r.GV)()?()=>$(er):()=>$(e=>e.diffLines.getSplitDiffLinesFromLineRange),V=(0,r.GV)()?()=>$(ea):()=>$(e=>e.diffLines.getSelectedDiffLines),H=(0,r.GV)()?()=>$(es):()=>$(e=>e.diffLines.getDiffLinesInfo),U=(0,r.GV)()?()=>$(el):()=>$(e=>e.diffLines.getfirstLineSelectionOnDrag),K=(0,r.GV)()?()=>$(eo):()=>$(e=>e.diffLines.getSelectedLineRange),B=(0,r.GV)()?()=>$(ed):()=>$(e=>e.diffLines.hasSelectedLines),q=(0,r.GV)()?()=>$(ec):()=>$(e=>e.hiddenFeatures),z=(0,r.GV)()?e=>{let t,n=(0,a.c)(2);return n[0]!==e?(t=t=>!!e&&t.dialogMode.activeGridCellId===e,n[0]=e,n[1]=t):t=n[1],$(t)}:e=>$(t=>!!e&&t.dialogMode.activeGridCellId===e),W=(0,r.GV)()?()=>$(eu):()=>$(e=>e.dialogModeActions),X=(0,r.GV)()?()=>$(em):()=>$(e=>e.diffLines.diffAnchor),Z=(0,r.GV)()?()=>$(ef):()=>$(e=>e.diffLines.fileLineCount),Q={isSelected:!1,isFirstSelected:!1,isLastSelected:!1},J=(0,r.GV)()?e=>{let t,n=(0,a.c)(2);return n[0]!==e?(t=t=>e&&t.diffLines.selectedLinesInfo[(0,T.bo)(e)]||Q,n[0]=e,n[1]=t):t=n[1],$(t)}:e=>$(t=>e&&t.diffLines.selectedLinesInfo[(0,T.bo)(e)]||Q),Y=(0,r.GV)()?()=>$(eh):()=>$(e=>e.diffLinesActions),ee=(0,r.GV)()?()=>$(eg):()=>$(e=>e.injectedContextLinesActions),et=(0,r.GV)()?()=>$(ep):()=>$(e=>e.treeEntries),en=(0,r.GV)()?()=>$(eb):()=>$(e=>e.getMoveNewCommentDataForLine),ei=(0,r.GV)()?()=>$(ev):()=>$(e=>e.addStartNewCommentOnLine);function er(e){return e.diffLines.getSplitDiffLinesFromLineRange}function ea(e){return e.diffLines.getSelectedDiffLines}function es(e){return e.diffLines.getDiffLinesInfo}function el(e){return e.diffLines.getfirstLineSelectionOnDrag}function eo(e){return e.diffLines.getSelectedLineRange}function ed(e){return e.diffLines.hasSelectedLines}function ec(e){return e.hiddenFeatures}function eu(e){return e.dialogModeActions}function em(e){return e.diffLines.diffAnchor}function ef(e){return e.diffLines.fileLineCount}function eh(e){return e.diffLinesActions}function eg(e){return e.injectedContextLinesActions}function ep(e){return e.treeEntries}function eb(e){return e.getMoveNewCommentDataForLine}function ev(e){return e.addStartNewCommentOnLine}var ex=n(61583),eC=n(4559);function ey(){(0,eC.i)("Selection Cleared")}function eL({diffAnchor:e,endLineNumber:t,endOrientation:n,startLineNumber:i,startOrientation:r}){if(i&&t){var a;(0,ex.i8)({diffAnchor:e,endLineNumber:t,endOrientation:n,startLineNumber:i,startOrientation:r}),(a={diffAnchor:e,endLineNumber:t,endOrientation:n,startLineNumber:i,startOrientation:r}).startLineNumber===a.endLineNumber&&a.startOrientation===a.endOrientation?(0,eC.i)(`${"left"===a.startOrientation?"L":"R"}${a.startLineNumber} selected.`):(0,eC.i)(`${"left"===a.startOrientation?"L":"R"}${a.startLineNumber} to ${"left"===a.endOrientation?"L":"R"}${a.endLineNumber} selected.`)}}var eS=n(3252),eN=n(71317);let ej="comment",eD="review",ew=(0,r.GV)()?function(e){let t,n,r,s,o,d,c,u,m,f,h,k,A,E,R,_,T,O,M,$,P=(0,a.c)(78),{batchingEnabled:F,condensed:G,fileLevelComment:V,filePath:H,focusOnMount:U,isReplying:K,lineNumber:B,onAddComment:q,onCancelComment:z,onPersistedCommentExists:W,quotedText:X,side:Z,startLineNumber:Q,threadId:J,suggestedChangesConfig:ee,commentLineChangeConfig:et}=e,en=void 0===X?"":X,[ei,er]=(0,l.useState)(en),[ea,es]=(0,l.useState)(null),el=(0,l.useRef)(en),[eo,ed]=(0,l.useState)(),ec=(0,l.useRef)(null),eu=(0,l.useRef)(null),em=(0,I.it)(),ef=(0,l.useRef)(void 0),{selectMultipleLines:eh,clearSelectedLines:eg}=Y();P[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{(0,eN.k)(e??"",100),ed(e)},P[0]=t):t=P[0];let ep=t,eb=null!==ea,ev=(0,I.Kp)(),{persistCommentToStorage:ex,removePersistedCommentFromStorage:eC,persistCommentOnGivenLineToStorage:ey}=(0,x.L)({diffSide:Z,filePath:H,line:B,subjectId:ev,threadId:J,handlePersistedCommentExists:e=>{let{text:t,shouldFocus:n,startLine:i,startSide:r,startLineKey:a,endLineKey:s}=e;if(t){if(er(t),n&&ec.current&&(ec.current.focus(),ec.current.moveCursorToEnd(),ew({text:t,startLine:i,startSide:r,startLineKey:a,endLineKey:s}),i)){let e="LEFT"===Z?"left":"right";eh({endLineKey:s,endOrientation:e,startLineKey:a,startOrientation:e,firstLineSelectionOnDrag:{lineKey:a??"b:0-l:0-r:0",lineNumber:B??0,orientation:e,shouldStartConversation:!1}},eL)}W?.()}},fileLevelComment:!!V}),ew=ex;if(P[1]!==en?(n=()=>{en!==el.current&&(el.current=en,er(en))},r=[en],P[1]=en,P[2]=n,P[3]=r):(n=P[2],r=P[3]),(0,l.useEffect)(n,r),P[4]!==eg||P[5]!==et||P[6]!==ei||P[7]!==H||P[8]!==B||P[9]!==z||P[10]!==ey||P[11]!==eC||P[12]!==eh||P[13]!==Z?(s=()=>{if(et){if(null!==(0,eS.T)(ei))return void et.setErrorMessage("Changing the line number of a comment with a suggested change is not supported.");if(et.closeLineMovingDialog(),ey({text:ei,givenLineDiffSide:et.diffSide,givenFilePath:H,givenLine:et.endLineNumber,shouldBeFileLevelComment:et.isFileLevelComment,startLine:et.startLineNumber,startLineKey:et.startDiffLineKey,endLineKey:et.endDiffLineKey}),eC(),B!==et.endLineNumber||et.isFileLevelComment)et.startConversationOnNewLine(),z?.(!1);else if(et.endDiffLineKey&&et.startDiffLineKey&&ef.current!==et){ef.current=et;let e="LEFT"===Z?"left":"right";eh({endLineKey:et.endDiffLineKey,endOrientation:e,startLineKey:et.startDiffLineKey,startOrientation:e,firstLineSelectionOnDrag:{lineKey:et.startDiffLineKey??"b:0-l:0-r:0",lineNumber:B??0,orientation:e,shouldStartConversation:!1}},eL)}else et.startDiffLineKey||eg()}},o=[eg,et,ei,H,B,z,ey,eC,eh,Z],P[4]=eg,P[5]=et,P[6]=ei,P[7]=H,P[8]=B,P[9]=z,P[10]=ey,P[11]=eC,P[12]=eh,P[13]=Z,P[14]=s,P[15]=o):(s=P[14],o=P[15]),(0,l.useEffect)(s,o),P[16]!==U?(c=()=>{if(U){let e=setTimeout(()=>{if(p.XC&&p.cg){if(eu.current){let e=eu.current,t=e.getBoundingClientRect(),n=p.XC?.documentElement.clientHeight||0;if(!(t.top>=0&&t.bottom<=(p.cg?.innerHeight||n))){let i=t.top,r=p.XC?.documentElement.getBoundingClientRect().top||0,a=.6666666666666666*e.clientHeight;p.cg?.scrollTo({top:i-r-.6666666666666666*n+a,behavior:"smooth"})}}ec.current&&(ec.current.focus(),ec.current.moveCursorToEnd())}},100);return()=>{window.clearTimeout(e)}}},d=[U],P[16]=U,P[17]=d,P[18]=c):(d=P[17],c=P[18]),(0,l.useEffect)(c,d),P[19]!==ei||P[20]!==eb||P[21]!==q||P[22]!==z||P[23]!==eC||P[24]!==ee?.sourceContentFromDiffLines){let e,t=e=>{let{submitBatch:t,action:n}=e,i="Failed to save comment";if(eb)return;if(!ei.trim())return void ep(`${i}: Body can't be blank`);es(n),ed(void 0),ep(void 0);let r=(0,C.u)(ei,ee?.sourceContentFromDiffLines??"");if(!r.isValid){ep(r.errorMessage),ed(r.errorMessage),es(null);return}q?.({commentText:ei,onCompleted(){es(null),u()},onError(e){es(null),e.message&&(i=`${i}: ${e.message}`),ep(i)},submitBatch:t})};m=()=>{t({submitBatch:!1,action:eD})},f=()=>{t({submitBatch:!0,action:ej})},P[28]!==z||P[29]!==eC?(e=()=>{eC(),er(""),z?.()},P[28]=z,P[29]=eC,P[30]=e):e=P[30],u=e,P[19]=ei,P[20]=eb,P[21]=q,P[22]=z,P[23]=eC,P[24]=ee?.sourceContentFromDiffLines,P[25]=u,P[26]=m,P[27]=f}else u=P[25],m=P[26],f=P[27];P[31]!==ew||P[32]!==Z||P[33]!==Q?(h=e=>{ep(void 0),ew({text:e,startLine:Q,startSide:Q?Z:void 0}),er(e)},P[31]=ew,P[32]=Z,P[33]=Q,P[34]=h):h=P[34];let eI=h;P[35]!==f?(k={"pull-requests-conversations:submit-comment-and-review":f},P[35]=f,P[36]=k):k=P[36],P[37]!==u||P[38]!==ei?(A=e=>{"Escape"!==e.key||ei.trim()?e.stopPropagation():(e.preventDefault(),u())},P[37]=u,P[38]=ei,P[39]=A):A=P[39];let ek=F?m:f,eA=G||K?S:N,eE=K&&j,eR=G&&D;return P[40]!==eA||P[41]!==eE||P[42]!==eR?(E=(0,v.$)(L,eA,eE,eR),P[40]=eA,P[41]=eE,P[42]=eR,P[43]=E):E=P[43],P[44]!==u||P[45]!==z?(R=z&&(0,i.jsx)(g.x,{className:"py-1 px-2",variant:"default",onClick:u,children:"Cancel"}),P[44]=u,P[45]=z,P[46]=R):R=P[46],P[47]!==F||P[48]!==em||P[49]!==f||P[50]!==K||P[51]!==ea?(_=!em&&(0,i.jsx)(g.x,{className:"py-1 px-2",variant:F?"default":"primary",onClick:f,ref:eu,loading:ea===ej,children:K?"Reply":"Comment"}),P[47]=F,P[48]=em,P[49]=f,P[50]=K,P[51]=ea,P[52]=_):_=P[52],P[53]!==F||P[54]!==em||P[55]!==m||P[56]!==ea?(T=F&&(0,i.jsx)(g.x,{className:"py-1 px-2",variant:"primary",onClick:m,loading:ea===eD,children:em?"Add review comment":"Start a review"}),P[53]=F,P[54]=em,P[55]=m,P[56]=ea,P[57]=T):T=P[57],P[58]!==ei||P[59]!==eo||P[60]!==H||P[61]!==eI||P[62]!==eb||P[63]!==B||P[64]!==Q||P[65]!==ee||P[66]!==ek||P[67]!==E||P[68]!==R||P[69]!==_||P[70]!==T?(O=(0,i.jsxs)(w.S,{ref:ec,label:"Add diff comment",value:ei,onChange:eI,onPrimaryAction:ek,suggestedChangesConfig:ee,markdownErrorMessage:eo,lineNumber:B,filePath:H,startLineNumber:Q,disabled:eb,className:E,children:[R,_,T]}),P[58]=ei,P[59]=eo,P[60]=H,P[61]=eI,P[62]=eb,P[63]=B,P[64]=Q,P[65]=ee,P[66]=ek,P[67]=E,P[68]=R,P[69]=_,P[70]=T,P[71]=O):O=P[71],P[72]!==A||P[73]!==O?(M=(0,i.jsx)("div",{className:y,onKeyDown:A,children:O}),P[72]=A,P[73]=O,P[74]=M):M=P[74],P[75]!==k||P[76]!==M?($=(0,i.jsx)(b.tL,{commands:k,children:M}),P[75]=k,P[76]=M,P[77]=$):$=P[77],$}:function({batchingEnabled:e,condensed:t,fileLevelComment:n,filePath:r,focusOnMount:a,isReplying:s,lineNumber:o,onAddComment:d,onCancelComment:c,onPersistedCommentExists:u,quotedText:m="",side:f,startLineNumber:h,threadId:k,suggestedChangesConfig:A,commentLineChangeConfig:E}){let[R,_]=(0,l.useState)(m),[T,O]=(0,l.useState)(null),M=(0,l.useRef)(m),[$,P]=(0,l.useState)(),F=(0,l.useRef)(null),G=(0,l.useRef)(null),V=(0,I.it)(),H=(0,l.useRef)(void 0),{selectMultipleLines:U,clearSelectedLines:K}=Y(),B=(0,l.useCallback)(e=>{(0,eN.k)(e??"",100),P(e)},[P]),q=null!==T,z=(0,I.Kp)(),{persistCommentToStorage:W,removePersistedCommentFromStorage:X,persistCommentOnGivenLineToStorage:Z}=(0,x.L)({diffSide:f,filePath:r,line:o,subjectId:z,threadId:k,handlePersistedCommentExists:({text:e,shouldFocus:t,startLine:n,startSide:i,startLineKey:r,endLineKey:a})=>{if(e){if(_(e),t&&F.current&&(F.current.focus(),F.current.moveCursorToEnd(),W({text:e,startLine:n,startSide:i,startLineKey:r,endLineKey:a}),n)){let e="LEFT"===f?"left":"right";U({endLineKey:a,endOrientation:e,startLineKey:r,startOrientation:e,firstLineSelectionOnDrag:{lineKey:r??"b:0-l:0-r:0",lineNumber:o??0,orientation:e,shouldStartConversation:!1}},eL)}u?.()}},fileLevelComment:!!n});(0,l.useEffect)(()=>{m!==M.current&&(M.current=m,_(m))},[m]),(0,l.useEffect)(()=>{if(E){if(null!==(0,eS.T)(R))return void E.setErrorMessage("Changing the line number of a comment with a suggested change is not supported.");if(E.closeLineMovingDialog(),Z({text:R,givenLineDiffSide:E.diffSide,givenFilePath:r,givenLine:E.endLineNumber,shouldBeFileLevelComment:E.isFileLevelComment,startLine:E.startLineNumber,startLineKey:E.startDiffLineKey,endLineKey:E.endDiffLineKey}),X(),o!==E.endLineNumber||E.isFileLevelComment)E.startConversationOnNewLine(),c?.(!1);else if(E.endDiffLineKey&&E.startDiffLineKey&&H.current!==E){H.current=E;let e="LEFT"===f?"left":"right";U({endLineKey:E.endDiffLineKey,endOrientation:e,startLineKey:E.startDiffLineKey,startOrientation:e,firstLineSelectionOnDrag:{lineKey:E.startDiffLineKey??"b:0-l:0-r:0",lineNumber:o??0,orientation:e,shouldStartConversation:!1}},eL)}else E.startDiffLineKey||K()}},[K,E,R,r,o,c,Z,X,U,f]),(0,l.useEffect)(()=>{if(a){let e=setTimeout(()=>{if(p.XC&&p.cg){if(G.current){let e=G.current,t=e.getBoundingClientRect(),n=p.XC?.documentElement.clientHeight||0;if(!(t.top>=0&&t.bottom<=(p.cg?.innerHeight||n))){let i=t.top,r=p.XC?.documentElement.getBoundingClientRect().top||0,a=e.clientHeight*(2/3);p.cg?.scrollTo({top:i-r-2/3*n+a,behavior:"smooth"})}}F.current&&(F.current.focus(),F.current.moveCursorToEnd())}},100);return()=>{window.clearTimeout(e)}}},[a]);let Q=({submitBatch:e,action:t})=>{let n="Failed to save comment";if(q)return;if(!R.trim())return void B(`${n}: Body can't be blank`);O(t),P(void 0),B(void 0);let i=(0,C.u)(R,A?.sourceContentFromDiffLines??"");if(!i.isValid){B(i.errorMessage),P(i.errorMessage),O(null);return}d?.({commentText:R,onCompleted(){O(null),et()},onError(e){O(null),e.message&&(n=`${n}: ${e.message}`),B(n)},submitBatch:e})},J=()=>{Q({submitBatch:!1,action:eD})},ee=()=>{Q({submitBatch:!0,action:ej})},et=(0,l.useCallback)(()=>{X(),_(""),c?.()},[c,X]);return(0,i.jsx)(b.tL,{commands:{"pull-requests-conversations:submit-comment-and-review":ee},children:(0,i.jsx)("div",{className:y,onKeyDown:e=>{"Escape"!==e.key||R.trim()?e.stopPropagation():(e.preventDefault(),et())},children:(0,i.jsxs)(w.S,{ref:F,label:"Add diff comment",value:R,onChange:e=>{B(void 0),W({text:e,startLine:h,startSide:h?f:void 0}),_(e)},onPrimaryAction:e?J:ee,suggestedChangesConfig:A,markdownErrorMessage:$,lineNumber:o,filePath:r,startLineNumber:h,disabled:q,className:(0,v.$)(L,t||s?S:N,s&&j,t&&D),children:[c&&(0,i.jsx)(g.x,{className:"py-1 px-2",variant:"default",onClick:et,children:"Cancel"}),!V&&(0,i.jsx)(g.x,{className:"py-1 px-2",variant:e?"default":"primary",onClick:ee,ref:G,loading:T===ej,children:s?"Reply":"Comment"}),e&&(0,i.jsx)(g.x,{className:"py-1 px-2",variant:"primary",onClick:J,loading:T===eD,children:V?"Add review comment":"Start a review"})]})})})};try{ew.displayName||(ew.displayName="AddCommentEditor")}catch{}var eI=n(21373),ek=n(15220),eA=n(15837),eE=n(86877),eR=n(33989),e_=n(99511),eT=n(94236),eO=n(5524);let eM=(0,r.GV)()?function(e){let t,n,r,s,o,d,u=(0,a.c)(25),{ariaLabelId:m,currentLineNumberText:f,setCommentLineChangeConfig:h,baseEndLineNumber:g,diffSide:p,baseStartLineNumber:b}=e,[v,x]=(0,l.useState)(!1);u[0]!==g||u[1]!==b?(t=()=>b&&g?"lineRange":g?"line":"file",u[0]=g,u[1]=b,u[2]=t):t=u[2];let[C,y]=(0,l.useState)(t),[L,S]=(0,l.useState)("LEFT"===p),[N,j]=(0,l.useState)(b?String(b):""),[D,w]=(0,l.useState)(g?String(g):""),[I,k]=(0,l.useState)(""),A=en(),E=(0,l.useRef)(null);u[3]!==D||u[4]!==A||u[5]!==L||u[6]!==C||u[7]!==h||u[8]!==N?(n=()=>{let e=A(eG(L,Number(D),"file"===C)),t=A(eG(L,Number(N),"file"===C)),n=e?.startNewComment,i=e?.diffLineKey,r=t?.diffLineKey;(eH("lineRange"===C?N:void 0,D)||"file"===C)&&n&&i?h(eV({isLeftSide:L,startLineNumber:"lineRange"===C?Number(N):void 0,endDiffLineKey:i,endLineNumber:Number(D),isFileLevelComment:"file"===C,startDiffLineKey:"lineRange"===C?r:void 0,startConversationOnNewLine:n,closeLineMovingDialog:()=>x(!1),setErrorMessage:e=>k(e)})):k("Please enter a valid line number or range.")},u[3]=D,u[4]=A,u[5]=L,u[6]=C,u[7]=h,u[8]=N,u[9]=n):n=u[9];let R=n;return u[10]===Symbol.for("react.memo_cache_sentinel")?(r=()=>x(!0),u[10]=r):r=u[10],u[11]!==m||u[12]!==f?(s=(0,i.jsx)(eI.Q,{"aria-labelledby":m,"aria-description":"Select to change location",ref:E,type:"button",size:"small",onClick:r,trailingAction:c.TriangleDownIcon,children:f}),u[11]=m,u[12]=f,u[13]=s):s=u[13],u[14]!==D||u[15]!==I||u[16]!==v||u[17]!==L||u[18]!==C||u[19]!==N||u[20]!==R?(o=v&&(0,i.jsx)(ek.l,{onClose:()=>x(!1),returnFocusRef:E,title:"Add comment on",width:"medium",footerButtons:[{buttonType:"default",content:"Cancel",onClick:()=>{x(!1)}},{buttonType:"primary",content:"Save",onClick:R}],children:(0,i.jsxs)(eA.A,{name:"line-number-selection",onChange:e=>{y(e)},children:[(0,i.jsx)(eA.A.Label,{}),(0,i.jsxs)(eE.A,{children:[(0,i.jsx)(eR.A,{value:"line",defaultChecked:"line"===C}),(0,i.jsx)(eE.A.Label,{children:"Line number"}),"line"===C&&(0,i.jsxs)(eE.A.Caption,{className:"d-flex align-items-center",children:[(0,i.jsx)(eF,{isLeftSelected:L,setIsLeftSelected:S}),(0,i.jsx)(e_.A,{autoComplete:"off",className:"ml-1","aria-label":"Line number",name:"lineNumber",value:D,onChange:e=>w(e.target.value),onKeyDown:e=>{"Enter"===e.key&&R()}})]})]}),(0,i.jsxs)(eE.A,{children:[(0,i.jsx)(eR.A,{value:"lineRange",defaultChecked:"lineRange"===C}),(0,i.jsx)(eE.A.Label,{children:"Line range"}),"lineRange"===C&&(0,i.jsxs)(eE.A.Caption,{className:"d-flex align-items-center",children:[(0,i.jsx)(eF,{isLeftSelected:L,setIsLeftSelected:S}),(0,i.jsx)(e_.A,{autoComplete:"off",className:"ml-1","aria-label":"Line number",name:"lineNumber",value:N,onChange:e=>j(e.target.value),onKeyDown:e=>{"Enter"===e.key&&R()}}),(0,i.jsx)(c.ArrowRightIcon,{className:"mt-2 mx-2"}),(0,i.jsx)(e_.A,{autoComplete:"off",className:"ml-1","aria-label":"Line number",name:"lineNumber",value:D,onChange:e=>w(e.target.value),onKeyDown:e=>{"Enter"===e.key&&R()}})]})]}),(0,i.jsxs)(eE.A,{children:[(0,i.jsx)(eR.A,{value:"file",defaultChecked:"file"===C}),(0,i.jsx)(eE.A.Label,{children:"File"})]}),I&&(0,i.jsx)(eA.A.Validation,{variant:"error",children:I})]})}),u[14]=D,u[15]=I,u[16]=v,u[17]=L,u[18]=C,u[19]=N,u[20]=R,u[21]=o):o=u[21],u[22]!==s||u[23]!==o?(d=(0,i.jsxs)("div",{className:"ml-1",children:[s,o]}),u[22]=s,u[23]=o,u[24]=d):d=u[24],d}:function({ariaLabelId:e,currentLineNumberText:t,setCommentLineChangeConfig:n,baseEndLineNumber:r,diffSide:a,baseStartLineNumber:s}){let[o,d]=(0,l.useState)(!1),[u,m]=(0,l.useState)(()=>s&&r?"lineRange":r?"line":"file"),[f,h]=(0,l.useState)("LEFT"===a),[g,p]=(0,l.useState)(s?String(s):""),[b,v]=(0,l.useState)(r?String(r):""),[x,C]=(0,l.useState)(""),y=en(),L=(0,l.useRef)(null),S=(0,l.useCallback)(()=>{let e=y(eG(f,Number(b),"file"===u)),t=y(eG(f,Number(g),"file"===u)),i=e?.startNewComment,r=e?.diffLineKey,a=t?.diffLineKey;(eH("lineRange"===u?g:void 0,b)||"file"===u)&&i&&r?n(eV({isLeftSide:f,startLineNumber:"lineRange"===u?Number(g):void 0,endDiffLineKey:r,endLineNumber:Number(b),isFileLevelComment:"file"===u,startDiffLineKey:"lineRange"===u?a:void 0,startConversationOnNewLine:i,closeLineMovingDialog:()=>d(!1),setErrorMessage:e=>C(e)})):C("Please enter a valid line number or range.")},[y,f,b,u,g,n]);return(0,i.jsxs)("div",{className:"ml-1",children:[(0,i.jsx)(eI.Q,{"aria-labelledby":e,"aria-description":"Select to change location",ref:L,type:"button",size:"small",onClick:()=>d(!0),trailingAction:c.TriangleDownIcon,children:t}),o&&(0,i.jsx)(ek.l,{onClose:()=>d(!1),returnFocusRef:L,title:"Add comment on",width:"medium",footerButtons:[{buttonType:"default",content:"Cancel",onClick:()=>{d(!1)}},{buttonType:"primary",content:"Save",onClick:S}],children:(0,i.jsxs)(eA.A,{name:"line-number-selection",onChange:e=>{m(e)},children:[(0,i.jsx)(eA.A.Label,{}),(0,i.jsxs)(eE.A,{children:[(0,i.jsx)(eR.A,{value:"line",defaultChecked:"line"===u}),(0,i.jsx)(eE.A.Label,{children:"Line number"}),"line"===u&&(0,i.jsxs)(eE.A.Caption,{className:"d-flex align-items-center",children:[(0,i.jsx)(eF,{isLeftSelected:f,setIsLeftSelected:h}),(0,i.jsx)(e_.A,{autoComplete:"off",className:"ml-1","aria-label":"Line number",name:"lineNumber",value:b,onChange:e=>v(e.target.value),onKeyDown:e=>{"Enter"===e.key&&S()}})]})]}),(0,i.jsxs)(eE.A,{children:[(0,i.jsx)(eR.A,{value:"lineRange",defaultChecked:"lineRange"===u}),(0,i.jsx)(eE.A.Label,{children:"Line range"}),"lineRange"===u&&(0,i.jsxs)(eE.A.Caption,{className:"d-flex align-items-center",children:[(0,i.jsx)(eF,{isLeftSelected:f,setIsLeftSelected:h}),(0,i.jsx)(e_.A,{autoComplete:"off",className:"ml-1","aria-label":"Line number",name:"lineNumber",value:g,onChange:e=>p(e.target.value),onKeyDown:e=>{"Enter"===e.key&&S()}}),(0,i.jsx)(c.ArrowRightIcon,{className:"mt-2 mx-2"}),(0,i.jsx)(e_.A,{autoComplete:"off",className:"ml-1","aria-label":"Line number",name:"lineNumber",value:b,onChange:e=>v(e.target.value),onKeyDown:e=>{"Enter"===e.key&&S()}})]})]}),(0,i.jsxs)(eE.A,{children:[(0,i.jsx)(eR.A,{value:"file",defaultChecked:"file"===u}),(0,i.jsx)(eE.A.Label,{children:"File"})]}),x&&(0,i.jsx)(eA.A.Validation,{variant:"error",children:x})]})})]})},e$="Left (L)",eP="Right (R)",eF=(0,r.GV)()?function(e){let t,n,r,s,l,o=(0,a.c)(12),{isLeftSelected:d,setIsLeftSelected:c}=e,u=d?e$:eP;return o[0]!==u?(t=(0,i.jsx)(eT.W.Button,{children:u}),o[0]=u,o[1]=t):t=o[1],o[2]!==c?(n=(0,i.jsx)(eO.l.Item,{onSelect:()=>{c(!0)},children:e$}),o[2]=c,o[3]=n):n=o[3],o[4]!==c?(r=(0,i.jsx)(eO.l.Item,{onSelect:()=>{c(!1)},children:eP}),o[4]=c,o[5]=r):r=o[5],o[6]!==n||o[7]!==r?(s=(0,i.jsx)(eT.W.Overlay,{children:(0,i.jsxs)(eO.l,{children:[n,r]})}),o[6]=n,o[7]=r,o[8]=s):s=o[8],o[9]!==t||o[10]!==s?(l=(0,i.jsxs)(eT.W,{children:[t,s]}),o[9]=t,o[10]=s,o[11]=l):l=o[11],l}:function({isLeftSelected:e,setIsLeftSelected:t}){let n=e?e$:eP;return(0,i.jsxs)(eT.W,{children:[(0,i.jsx)(eT.W.Button,{children:n}),(0,i.jsx)(eT.W.Overlay,{children:(0,i.jsxs)(eO.l,{children:[(0,i.jsx)(eO.l.Item,{onSelect:()=>{t(!0)},children:e$}),(0,i.jsx)(eO.l.Item,{onSelect:()=>{t(!1)},children:eP})]})})]})};function eG(e,t,n){return n?"F0":`${e?"L":"R"}${t}`}function eV(e){return{diffSide:e.isLeftSide?"LEFT":"RIGHT",startLineNumber:e.startLineNumber,endLineNumber:e.endLineNumber,isFileLevelComment:e.isFileLevelComment,startDiffLineKey:e.startDiffLineKey,endDiffLineKey:e.endDiffLineKey,setErrorMessage:e.setErrorMessage,startConversationOnNewLine:e.startConversationOnNewLine,closeLineMovingDialog:e.closeLineMovingDialog}}function eH(e,t){let n=Number(e),i=Number(t);return Number.isInteger(i)&&i>0&&(void 0===e||Number.isInteger(n)&&n>0&&n<=i)}try{eM.displayName||(eM.displayName="ChangeCommentLineNumberButton")}catch{}try{eF.displayName||(eF.displayName="MoveCommentLineNumberDropdown")}catch{}var eU=n(91747);let eK="diff-comment-positioning-",eB=(0,r.GV)()?function(e){let t,n,r,s,o,f,g,p,b,v,x,C,y,L,S,N,j,D,w,I,k=(0,a.c)(52);if(k[0]!==e){let{addCommentDialogTitle:i,isLeftSide:a,fileLevelComment:l,filePath:d,focusOnMount:c,lineNumber:u,onAddComment:m,onClose:h,viewerData:C,threadsConnectionId:y,showOnCloseIcon:L,...S}=e;t=i,s=a,n=l,r=d,b=c,o=u,f=m,g=h,x=C,v=L,p=S,k[0]=e,k[1]=t,k[2]=n,k[3]=r,k[4]=s,k[5]=o,k[6]=f,k[7]=g,k[8]=p,k[9]=b,k[10]=v,k[11]=x}else t=k[1],n=k[2],r=k[3],s=k[4],o=k[5],f=k[6],g=k[7],p=k[8],b=k[9],v=k[10],x=k[11];let A=void 0===b||b,E=void 0===v||v,[R,_]=(0,l.useState)(void 0),T=(0,eU.u)("move_new_comments_ui");k[12]!==f?(C=e=>{let{commentText:t,onCompleted:n,onError:i,submitBatch:r}=e;f({text:t,onError:i,onCompleted:(e,t)=>{t&&h(t.toString()),n?.(e,t)},submitBatch:r})},k[12]=f,k[13]=C):C=k[13];let O=C,M=`${eK}${(0,l.useId)()}`,$=x.avatarUrl||"";k[14]!==$||k[15]!==x.login?(y=(0,i.jsx)(d.r,{alt:x.login,size:24,src:$,className:"mr-2"}),k[14]=$,k[15]=x.login,k[16]=y):y=k[16],k[17]!==t||k[18]!==n||k[19]!==T?(L=!T&&(n?(0,i.jsx)(i.Fragment,{children:"Add comment on file"}):(0,i.jsx)("span",{children:t?`Add a comment on ${t}`:"Add a comment"})),k[17]=t,k[18]=n,k[19]=T,k[20]=L):L=k[20],k[21]!==t||k[22]!==M||k[23]!==n||k[24]!==s||k[25]!==o||k[26]!==T||k[27]!==p?(S=T&&(0,i.jsxs)("div",{className:"d-flex flex-items-center",id:M,children:[(0,i.jsxs)("div",{className:"pt-1",children:["Add ",n?"":"a"," comment on "]}),(0,i.jsx)(eM,{ariaLabelId:M,currentLineNumberText:n?"file":t??"",baseEndLineNumber:o,baseStartLineNumber:p.startLineNumber,diffSide:s?"LEFT":"RIGHT",setCommentLineChangeConfig:_})]}),k[21]=t,k[22]=M,k[23]=n,k[24]=s,k[25]=o,k[26]=T,k[27]=p,k[28]=S):S=k[28],k[29]!==y||k[30]!==L||k[31]!==S?(N=(0,i.jsxs)(u.A,{as:"h4",className:"f5 ml-1 pt-1 pb-2 d-flex",children:[y,L,S]}),k[29]=y,k[30]=L,k[31]=S,k[32]=N):N=k[32],k[33]!==g||k[34]!==E?(j=g&&E&&(0,i.jsx)(m.K,{variant:"invisible",icon:c.XIcon,onClick:()=>g(),"aria-label":"Cancel"}),k[33]=g,k[34]=E,k[35]=j):j=k[35],k[36]!==N||k[37]!==j?(D=(0,i.jsxs)("div",{className:"d-flex flex-justify-between flex-items-center",children:[N,j]}),k[36]=N,k[37]=j,k[38]=D):D=k[38];let P=n??!1,F=s?"LEFT":"RIGHT";return k[39]!==R||k[40]!==r||k[41]!==A||k[42]!==O||k[43]!==o||k[44]!==g||k[45]!==p||k[46]!==P||k[47]!==F?(w=(0,i.jsx)(ew,{focusOnMount:A,condensed:!1,fileLevelComment:P,filePath:r,lineNumber:o,onAddComment:O,onCancelComment:g,commentLineChangeConfig:R,side:F,...p}),k[39]=R,k[40]=r,k[41]=A,k[42]=O,k[43]=o,k[44]=g,k[45]=p,k[46]=P,k[47]=F,k[48]=w):w=k[48],k[49]!==D||k[50]!==w?(I=(0,i.jsxs)("div",{className:"px-2 pb-2 pt-1",children:[D,w]}),k[49]=D,k[50]=w,k[51]=I):I=k[51],I}:function({addCommentDialogTitle:e,isLeftSide:t,fileLevelComment:n,filePath:r,focusOnMount:a=!0,lineNumber:s,onAddComment:o,onClose:f,viewerData:g,threadsConnectionId:p,showOnCloseIcon:b=!0,...v}){let[x,C]=(0,l.useState)(void 0),y=(0,eU.u)("move_new_comments_ui"),L=`${eK}${(0,l.useId)()}`;return(0,i.jsxs)("div",{className:"px-2 pb-2 pt-1",children:[(0,i.jsxs)("div",{className:"d-flex flex-justify-between flex-items-center",children:[(0,i.jsxs)(u.A,{as:"h4",className:"f5 ml-1 pt-1 pb-2 d-flex",children:[(0,i.jsx)(d.r,{alt:g.login,size:24,src:g.avatarUrl||"",className:"mr-2"}),!y&&(n?(0,i.jsx)(i.Fragment,{children:"Add comment on file"}):(0,i.jsx)("span",{children:e?`Add a comment on ${e}`:"Add a comment"})),y&&(0,i.jsxs)("div",{className:"d-flex flex-items-center",id:L,children:[(0,i.jsxs)("div",{className:"pt-1",children:["Add ",n?"":"a"," comment on "]}),(0,i.jsx)(eM,{ariaLabelId:L,currentLineNumberText:n?"file":e??"",baseEndLineNumber:s,baseStartLineNumber:v.startLineNumber,diffSide:t?"LEFT":"RIGHT",setCommentLineChangeConfig:C})]})]}),f&&b&&(0,i.jsx)(m.K,{variant:"invisible",icon:c.XIcon,onClick:()=>f(),"aria-label":"Cancel"})]}),(0,i.jsx)(ew,{focusOnMount:a,condensed:!1,fileLevelComment:n??!1,filePath:r,lineNumber:s,onAddComment:({commentText:e,onCompleted:t,onError:n,submitBatch:i})=>{o({text:e,onError:n,onCompleted:(e,n)=>{n&&h(n.toString()),t?.(e,n)},submitBatch:i})},onCancelComment:f,commentLineChangeConfig:x,side:t?"LEFT":"RIGHT",...v})]})};try{eB.displayName||(eB.displayName="StartThreadComment")}catch{}var eq=n(33671),ez=n(8934),eW=n(97286),eX=n(73017),eZ=n(69726);let eQ="RichDiff-module__fileRendererViewport--EBwd1",eJ="RichDiff-module__fileRendererIframe--svTsY",eY=(0,r.GV)()?function(e){let t,n,r,s,l,o,d=(0,a.c)(29),{queryConfig:c,initialData:u}=e;if(u&&(u.proseDiffHtml||u.renderInfo||u.dependencyDiffPath)){let e;d[0]!==u.dependencyDiffPath||d[1]!==u.proseDiffHtml||d[2]!==u.renderInfo?(e={proseDiffHtml:u.proseDiffHtml,renderInfo:u.renderInfo,dependencyDiffPath:u.dependencyDiffPath},d[0]=u.dependencyDiffPath,d[1]=u.proseDiffHtml,d[2]=u.renderInfo,d[3]=e):e=d[3],o=e}let m=c?.key,f=c?.args;d[4]!==m||d[5]!==f?(t=[m,f],d[4]=m,d[5]=f,d[6]=t):t=d[6],d[7]!==c?(n=async()=>await c?.fetcher(c.args)||{},d[7]=c,d[8]=n):n=d[8];let h=!!c;d[9]!==o||d[10]!==t||d[11]!==n||d[12]!==h?(r={queryKey:t,queryFn:n,initialData:o,staleTime:1/0,enabled:h},d[9]=o,d[10]=t,d[11]=n,d[12]=h,d[13]=r):r=d[13];let g=(0,eW.I)(r);d[14]!==o||d[15]!==c||d[16]!==g?(s=c?g:{data:o,isLoading:!1},d[14]=o,d[15]=c,d[16]=g,d[17]=s):s=d[17];let{data:p,isLoading:b}=s;d[18]!==p?(l=p||{},d[18]=p,d[19]=l):l=d[19];let{proseDiffHtml:v,renderInfo:x,dependencyDiffPath:C}=l;if(b){let e;return d[20]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("div",{className:"d-flex flex-justify-center p-4",children:(0,i.jsx)(eZ.A,{size:"large"})}),d[20]=e):e=d[20],e}if(v){let e;return d[21]!==v?(e=(0,i.jsx)("div",{className:"prose-diff position-relative",children:(0,i.jsx)(eX.vb,{html:v})}),d[21]=v,d[22]=e):e=d[22],e}if(x){let e;return d[23]!==x?(e=(0,i.jsx)(eq.default,{...x,viewportClassName:eQ,iframeClassName:eJ}),d[23]=x,d[24]=e):e=d[24],e}if(C){let e,t;return d[25]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsxs)("div",{className:"text-center py-3",children:[(0,i.jsx)(eZ.A,{size:"medium"}),(0,i.jsx)("p",{className:"color-fg-muted my-2",children:"Loading Dependency Review..."})]}),d[25]=e):e=d[25],d[26]!==C?(t=(0,i.jsx)("div",{children:(0,i.jsx)(ez.x,{src:C,children:e})}),d[26]=C,d[27]=t):t=d[27],t}{let e;return d[28]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("div",{className:"d-flex flex-justify-center p-4",children:"This rich diff is not supported at the moment."}),d[28]=e):e=d[28],e}}:function({queryConfig:e,initialData:t}){let n;t&&(t.proseDiffHtml||t.renderInfo||t.dependencyDiffPath)&&(n={proseDiffHtml:t.proseDiffHtml,renderInfo:t.renderInfo,dependencyDiffPath:t.dependencyDiffPath});let r=(0,eW.I)({queryKey:[e?.key,e?.args],queryFn:async()=>await e?.fetcher(e.args)||{},initialData:n,staleTime:1/0,enabled:!!e}),{data:a,isLoading:s}=e?r:{data:n,isLoading:!1},{proseDiffHtml:l,renderInfo:o,dependencyDiffPath:d}=a||{};return s?(0,i.jsx)("div",{className:"d-flex flex-justify-center p-4",children:(0,i.jsx)(eZ.A,{size:"large"})}):l?(0,i.jsx)("div",{className:"prose-diff position-relative",children:(0,i.jsx)(eX.vb,{html:l})}):o?(0,i.jsx)(eq.default,{...o,viewportClassName:eQ,iframeClassName:eJ}):d?(0,i.jsx)("div",{children:(0,i.jsx)(ez.x,{src:d,children:(0,i.jsxs)("div",{className:"text-center py-3",children:[(0,i.jsx)(eZ.A,{size:"medium"}),(0,i.jsx)("p",{className:"color-fg-muted my-2",children:"Loading Dependency Review..."})]})})}):(0,i.jsx)("div",{className:"d-flex flex-justify-center p-4",children:"This rich diff is not supported at the moment."})};try{eY.displayName||(eY.displayName="RichDiff")}catch{}var e0=n(59523),e1=n(19976),e2=n(13083),e3=n(84268),e4=n(69599);let e6="HiddenDiffPatch-module__gridColumnTemplate--gSfuk",e5=(0,r.GV)()?function(e){let t,n,r,s,o,d,u,m,f,h,g=(0,a.c)(27),{children:p,helpText:b,helpUrl:x,onLoadDiff:C,diffAnchor:y}=e,L=x&&b,[S,N]=(0,l.useState)("initial");g[0]!==C?(t=async()=>{try{N("loading"),await C()}catch{N("error")}},g[0]=C,g[1]=t):t=g[1];let j=t;return g[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,v.$)(e6),g[2]=n):n=g[2],g[3]===Symbol.for("react.memo_cache_sentinel")?(r={maxWidth:"340px"},g[3]=r):r=g[3],g[4]===Symbol.for("react.memo_cache_sentinel")?(s=(0,i.jsx)("svg",{"aria-hidden":!0,height:"84",style:r,viewBox:"0 0 340 84",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{clipPath:"url(#diff-placeholder)",d:"M0 0h340v84H0z",fillRule:"evenodd",style:{fill:"var(--bgColor-muted, var(--color-canvas-subtle))"}})}),g[4]=s):s=g[4],g[5]!==S?(o="loading"===S&&(0,i.jsx)(eZ.A,{size:"medium"}),g[5]=S,g[6]=o):o=g[6],g[7]!==S?(d="error"===S&&(0,i.jsx)(c.AlertIcon,{size:24}),g[7]=S,g[8]=d):d=g[8],g[9]!==S||g[10]!==j?(u="initial"===S&&(0,i.jsx)(eI.Q,{className:"h4 mx-auto fgColor-accent",variant:"invisible",onClick:()=>{j(),N("loading")},children:"Load Diff"}),g[9]=S,g[10]=j,g[11]=u):u=g[11],g[12]!==p||g[13]!==b||g[14]!==x||g[15]!==S||g[16]!==j||g[17]!==L?(m="error"===S?(0,i.jsxs)("span",{className:"fgColor-muted mt-1",children:["The contents of the file couldn't be loaded."," ",(0,i.jsx)(e3.A,{inline:!0,as:"button",onClick:()=>{j(),N("loading")},children:"Retry"})]}):(0,i.jsxs)("span",{className:"fgColor-muted mt-1",children:[p,L&&(0,i.jsx)(e3.A,{inline:!0,href:x,children:b})]}),g[12]=p,g[13]=b,g[14]=x,g[15]=S,g[16]=j,g[17]=L,g[18]=m):m=g[18],g[19]!==o||g[20]!==d||g[21]!==u||g[22]!==m?(f=(0,i.jsxs)("div",{className:n,children:[s," ",(0,i.jsxs)("div",{className:"d-flex flex-justify-center flex-column flex-column text-center flex-items-center",children:[o,d,u,m]})]}),g[19]=o,g[20]=d,g[21]=u,g[22]=m,g[23]=f):f=g[23],g[24]!==y||g[25]!==f?(h=(0,i.jsx)("div",{className:"px-3 py-4 fgColor-muted","data-diff-anchor":y,children:f}),g[24]=y,g[25]=f,g[26]=h):h=g[26],h}:function({children:e,helpText:t,helpUrl:n,onLoadDiff:r,diffAnchor:a}){let s=n&&t,[o,d]=(0,l.useState)("initial"),u=(0,l.useCallback)(async()=>{try{d("loading"),await r()}catch{d("error")}},[r,d]);return(0,i.jsx)("div",{className:"px-3 py-4 fgColor-muted","data-diff-anchor":a,children:(0,i.jsxs)("div",{className:(0,v.$)(e6),children:[(0,i.jsx)("svg",{"aria-hidden":!0,height:"84",style:{maxWidth:"340px"},viewBox:"0 0 340 84",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{clipPath:"url(#diff-placeholder)",d:"M0 0h340v84H0z",fillRule:"evenodd",style:{fill:"var(--bgColor-muted, var(--color-canvas-subtle))"}})})," ",(0,i.jsxs)("div",{className:"d-flex flex-justify-center flex-column flex-column text-center flex-items-center",children:["loading"===o&&(0,i.jsx)(eZ.A,{size:"medium"}),"error"===o&&(0,i.jsx)(c.AlertIcon,{size:24}),"initial"===o&&(0,i.jsx)(eI.Q,{className:"h4 mx-auto fgColor-accent",variant:"invisible",onClick:()=>{u(),d("loading")},children:"Load Diff"}),"error"===o?(0,i.jsxs)("span",{className:"fgColor-muted mt-1",children:["The contents of the file couldn't be loaded."," ",(0,i.jsx)(e3.A,{inline:!0,as:"button",onClick:()=>{u(),d("loading")},children:"Retry"})]}):(0,i.jsxs)("span",{className:"fgColor-muted mt-1",children:[e,s&&(0,i.jsx)(e3.A,{inline:!0,href:n,children:t})]})]})]})})};try{e5.displayName||(e5.displayName="HiddenDiffPatch")}catch{}let e7="final-hunk-header-line";function e8(e,t){return e.startBlobLineNumber-t.startBlobLineNumber}function e9(e,t){if("HUNK"===e.type&&e.__id===e7)return{currentHunk:t[t.length-1],previousHunk:t[t.length-2]};let n=t.sort(e8).findIndex(t=>t.startBlobLineNumber<=e.blobLineNumber&&t.endBlobLineNumber>=e.blobLineNumber);return{currentHunk:t[n],nextHunk:t[n+1],previousHunk:t[n-1]}}function te(e){let t,n=[],i=0;for(let r=1;r<e.length;r++){let a=e[r];if(a&&!(0,_.Po)(a)&&(t=a,"HUNK"===a.type)){let t,s=e[i];if(!s||(0,_.Po)(s))continue;let l=r-1;for(;(!t||(0,_.Po)(t))&&(t=e[l],-1!=--l););t&&!(0,_.Po)(t)&&n.push({startBlobLineNumber:s.blobLineNumber,endBlobLineNumber:t.blobLineNumber}),a.__id===e7&&n.push({startBlobLineNumber:a.blobLineNumber,endBlobLineNumber:a.blobLineNumber+20}),i=r;continue}}if(t&&"HUNK"!==t.type){let r=e[i];r&&!(0,_.Po)(r)&&n.push({startBlobLineNumber:r.blobLineNumber,endBlobLineNumber:t.blobLineNumber})}return n}var tt=n(45800),tn=n(35750),ti=n(18150),tr=n(85242),ta=n(88243),ts=n(16213),tl=n(50467),to=new WeakMap,td=new WeakMap,tc=new WeakMap,tu=new WeakMap,tm=new WeakMap,tf=new WeakMap,th=new WeakSet,tg=new WeakSet,tp=new WeakSet,tb=new WeakSet,tv=new WeakSet,tx=new WeakSet,tC=new WeakSet,ty=new WeakSet,tL=new WeakSet,tS=new WeakSet;let GridNavigator=class GridNavigator{moveToNextItem(e,t){let n,i=(0,tn._)(this,td).get(this.focusedGridCell?.cellId??"");if(!i)return;let[r]=i,[,a]=i;switch(("ArrowDown"===e||"ArrowUp"===e)&&(0,ta._)(this,tC,tA).call(this,r)&&(0,tn._)(this,tu)&&(a=(0,tn._)(this,tu),(0,tr._)(this,tu,void 0)),!0){case t&&"Home"===e:this.focusFirstGridCell();break;case t&&"End"===e:{let e=(0,tn._)(this,to).length-1,t=(0,tn._)(this,to)[e]?.length;t&&(n=(0,tn._)(this,to)[e]?.[t-1]);break}case"ArrowUp"===e:(0,ta._)(this,tC,tA).call(this,r-1)?((0,ta._)(this,tS,t_).call(this,a),n=(0,tn._)(this,to)[r-1]?.[0]):n=(0,tn._)(this,to)[r-1]?.[a];break;case"ArrowDown"===e:(0,ta._)(this,tC,tA).call(this,r+1)?((0,ta._)(this,tS,t_).call(this,a),n=(0,tn._)(this,to)[r+1]?.[0]):n=(0,tn._)(this,to)[r+1]?.[a];break;case"ArrowLeft"===e:n=(0,tn._)(this,to)[r]?.[a-1];break;case"ArrowRight"===e:n=(0,tn._)(this,to)[r]?.[a+1];break;case"PageUp"===e:{(0,ta._)(this,tS,t_).call(this,a);let e=(0,ta._)(this,tp,tD).call(this,r);n=(0,tn._)(this,to)[e]?.[0];break}case"PageDown"===e:{(0,ta._)(this,tS,t_).call(this,a);let e=(0,ta._)(this,tg,tj).call(this,r),t=0;e||(e=(0,tn._)(this,to).length-1,t=a),n=(0,tn._)(this,to)[e]?.[t];break}case"Home"===e:n=(0,tn._)(this,to)[r]?.[0];break;case"End"===e:{let e=(0,tn._)(this,to)[r];if(e&&!(0,ta._)(this,tC,tA).call(this,r)){let t=e.length-1;n=(0,tn._)(this,to)[r]?.[t]}}}return n&&(this.focusedGridCell=n),this.focusedGridCell}reinitializeGrid(e,t){(0,ta._)(this,tb,tw).call(this,e,t)}focusFirstGridCell(e){e&&(0,tn._)(this,td).get(e)?this.focusGridCell(e):this.focusedGridCell=(0,tn._)(this,to)[0]?.[0]}focusGridCell(e){if(this.focusedGridCell?.cellId===e)return;let t=(0,tn._)(this,td).get(e);if(!t)return;let[n,i]=t;this.focusedGridCell=(0,tn._)(this,to)[n]?.[i]}getNextSelectableCell(e){let t,n=this.getValidSelectableRowCell()||this.focusedGridCell,i=this.lastSelectedGridCell||n,r=(0,tn._)(this,td).get(i?.cellId??"");if(!r)return;let[a,s]=r;if("ArrowUp"===e){let e=a-1;for(;!t&&e>=0;)t=(0,ta._)(this,th,tN).call(this,{rowIndex:e,columnIndex:s}),e--}if("ArrowDown"===e){let e=a+1;for(;!t&&e<(0,tn._)(this,to).length;)t=(0,ta._)(this,th,tN).call(this,{rowIndex:e,columnIndex:s}),e++}return t&&(this.lastSelectedGridCell=t),t}getValidSelectableRowCell(){if(this.focusedGridCell?.isHunk)return;if(!this.focusedGridCell?.isEmpty)return this.focusedGridCell;let e=(0,tn._)(this,td).get(this.focusedGridCell.cellId)?.[0];if(e)return this.focusedGridCell.columnIndex<=1&&!(0,tn._)(this,tf)?(0,tn._)(this,to)[e]?.[this.focusedGridCell.columnIndex+1]:this.focusedGridCell.columnIndex<2&&(0,tn._)(this,tf)?(0,tn._)(this,to)[e]?.[this.focusedGridCell.columnIndex+2]:(0,tn._)(this,to)[e]?.[this.focusedGridCell.columnIndex-2]}clearLastSelectedCell(){this.lastSelectedGridCell=void 0}getFirstCodeCell(){let e=(0,tn._)(this,to).find(e=>e[0]&&!e[0].isHunk);return e?.find(e=>!e.isEmpty)}getLastCodeCell(){let e=(0,tn._)(this,to).slice().reverse().find(e=>e[0]&&!e[0].isHunk);return e?.slice().reverse().find(e=>!e.isEmpty)}hasLine(e,t,n){let i=(0,_.qX)((0,tn._)(this,tm),e,t),r=(0,_.u6)(i,0),a=(0,tn._)(this,td).get(r);if(!a)return!1;let[s]=a;return!!n===(0,ta._)(this,tC,tA).call(this,s)}constructor(e,t,n,i,r){(0,ts._)(this,th),(0,ts._)(this,tg),(0,ts._)(this,tp),(0,ts._)(this,tb),(0,ts._)(this,tv),(0,ts._)(this,tx),(0,ts._)(this,tC),(0,ts._)(this,ty),(0,ts._)(this,tL),(0,ts._)(this,tS),(0,ti._)(this,to,{writable:!0,value:[]}),(0,ti._)(this,td,{writable:!0,value:new Map}),(0,ti._)(this,tc,{writable:!0,value:new Set}),(0,tl._)(this,"focusedGridCell",void 0),(0,tl._)(this,"lastSelectedGridCell",void 0),(0,ti._)(this,tu,{writable:!0,value:void 0}),(0,ti._)(this,tm,{writable:!0,value:void 0}),(0,ti._)(this,tf,{writable:!0,value:void 0}),(0,tr._)(this,tm,e),(0,tr._)(this,tf,t),(0,ta._)(this,tb,tw).call(this,n,i),this.focusFirstGridCell(r)}};function tN({rowIndex:e,columnIndex:t}){let n=(0,tn._)(this,to)[e],i=n?.[t];switch(!0){case i?.isHunk:return;case i?.orientation==="left"&&i.isEmpty:return n?.[t+2];case i?.orientation==="right"&&i.isEmpty&&(0,tn._)(this,tf):return n?.[t-2];case i?.orientation==="right"&&i.isEmpty&&!(0,tn._)(this,tf):return n?.[t+1];default:return n?.[t]}}function tj(e){return Array.from((0,tn._)(this,tc)).sort((e,t)=>e-t).find(t=>t>e)}function tD(e){return Array.from((0,tn._)(this,tc)).sort((e,t)=>e-t).reverse().find(t=>t<e)??0}function tw(e,t){(0,tr._)(this,to,[]),(0,tr._)(this,td,new Map),(0,tr._)(this,tc,new Set);for(let n=0;n<e.length;n++){let i=[],r=e[n];if(void 0!==r){if((0,tn._)(this,tf)){let e=(t||[])[n],a=(0,_.qX)((0,tn._)(this,tm),r,e);(0,_.Po)(r)||"HUNK"!==r.type?(0,ta._)(this,ty,tE).call(this,{leftLine:r,rightLine:e,row:i,rowIdentifier:a,rowIndex:n}):(0,ta._)(this,tx,tk).call(this,i,a,n,r)}else{let e=(0,_.qX)((0,tn._)(this,tm),r,r);(0,_.Po)(r)||"HUNK"!==r.type?(0,ta._)(this,tL,tR).call(this,{diffLine:r,row:i,rowIdentifier:e,rowIndex:n}):(0,ta._)(this,tx,tk).call(this,i,e,n,r)}(0,tn._)(this,to).push(i)}}}function tI({cellIndex:e,diffLine:t,orientation:n,row:i,rowIdentifier:r,rowIndex:a,isSplit:s}){let l,o,d=(0,_.u6)(r,e);o=!(s||(0,_.Po)(t))&&t?.type==="DELETION"&&1===e||!(s||(0,_.Po)(t))&&t?.type==="ADDITION"&&0===e||(0,_.Po)(t),(0,_.Po)(t)||"left"!==n||(l=t?.left),(0,_.Po)(t)||"right"!==n||(l=t?.right),i.push({lineNumber:l,orientation:n,isEmpty:o,isHunk:!1,cellId:(0,_.u6)(r,e),columnIndex:e,lineKey:!(0,_.Po)(t)&&t?(0,T.bo)(t):void 0}),(0,tn._)(this,td).set(d,[a,e])}function tk(e,t,n,i){let r=(0,_.u6)(t,0);e.push({isHunk:!0,isEmpty:!1,cellId:r,columnIndex:0,lineKey:(0,T.bo)(i)}),(0,tn._)(this,td).set(r,[n,0]),(0,tn._)(this,tc).add(n)}function tA(e){return(0,tn._)(this,tc).has(e)}function tE({leftLine:e,rightLine:t,row:n,rowIdentifier:i,rowIndex:r}){(0,ta._)(this,tv,tI).call(this,{cellIndex:0,diffLine:e,orientation:"left",row:n,rowIdentifier:i,rowIndex:r,isSplit:!0}),(0,ta._)(this,tv,tI).call(this,{cellIndex:1,diffLine:e,orientation:"left",row:n,rowIdentifier:i,rowIndex:r,isSplit:!0}),(0,ta._)(this,tv,tI).call(this,{cellIndex:2,diffLine:t,orientation:"right",row:n,rowIdentifier:i,rowIndex:r,isSplit:!0}),(0,ta._)(this,tv,tI).call(this,{cellIndex:3,diffLine:t,orientation:"right",row:n,rowIdentifier:i,rowIndex:r,isSplit:!0})}function tR({diffLine:e,row:t,rowIdentifier:n,rowIndex:i}){let r=(0,_.Po)(e)||"DELETION"!==e.type?"right":"left";(0,ta._)(this,tv,tI).call(this,{cellIndex:0,diffLine:e,orientation:"left",row:t,rowIdentifier:n,rowIndex:i,isSplit:!1}),(0,ta._)(this,tv,tI).call(this,{cellIndex:1,diffLine:e,orientation:"right",row:t,rowIdentifier:n,rowIndex:i,isSplit:!1}),(0,ta._)(this,tv,tI).call(this,{cellIndex:2,diffLine:e,orientation:r,row:t,rowIdentifier:n,rowIndex:i,isSplit:!1})}function t_(e){(0,ta._)(this,tC,tA).call(this,e)||(0,tr._)(this,tu,e)}function tT(e){e&&setTimeout(()=>{0!==e.tabIndex&&(e.tabIndex=0)})}function tO(e,t,n){let i=[];for(let r=0;r<t.length;r++){let a=t[r],s=n?.[r]??a,l=!(0,_.Po)(a)&&a?.type==="HUNK";a&&s&&!e.hasLine(a,s,l)&&i.push(a)}return i}let tM=(0,r.GV)()?function(e,t,n,i,r,s){let o,d,c=(0,a.c)(8);c[0]!==i||c[1]!==e||c[2]!==n||c[3]!==t||c[4]!==r||c[5]!==s?(o=()=>{if(r&&document.activeElement){let a=tO(r,t,s);if(0!==a.length){if(document.activeElement===document.body){let i,r,s,l=t.indexOf(a[a.length-1]),o=t[l+1],d=a[0];o&&!(0,_.Po)(o)&&"HUNK"===o.type&&(i=(0,_.u6)((0,_.qX)(e,o,o),0),r=document.querySelector(`[data-grid-cell-id=${i}]`),s=r?.querySelector("button[data-direction=down], button[data-direction=all]")),s||(i=(0,_.u6)((0,_.qX)(e,d,d),0),r=document.querySelector(`[data-grid-cell-id=${i}]`),s=r?.querySelector("button[data-direction=up], button[data-direction=all]")),i&&r&&(s?s.focus():r.focus(),n.focusGridCell(i),tT(r))}else if("BUTTON"===document.activeElement.tagName)tT(document.activeElement.closest("td"));else if("TD"===document.activeElement.tagName){let e=document.activeElement.getAttribute("data-grid-cell-id"),t=n.focusedGridCell?.cellId;if(e!==t){let e=i.current?.querySelector(`[data-grid-cell-id=${t}]`);e?.focus()}}}}},d=[e,t,n,s,r,i],c[0]=i,c[1]=e,c[2]=n,c[3]=t,c[4]=r,c[5]=s,c[6]=o,c[7]=d):(o=c[6],d=c[7]),(0,l.useEffect)(o,d)}:function(e,t,n,i,r,a){(0,l.useEffect)(()=>{if(r&&document.activeElement){let s=tO(r,t,a);if(0!==s.length){if(document.activeElement===document.body){let i,r,a,l=t.indexOf(s[s.length-1]),o=t[l+1],d=s[0];o&&!(0,_.Po)(o)&&"HUNK"===o.type&&(i=(0,_.u6)((0,_.qX)(e,o,o),0),r=document.querySelector(`[data-grid-cell-id=${i}]`),a=r?.querySelector("button[data-direction=down], button[data-direction=all]")),a||(i=(0,_.u6)((0,_.qX)(e,d,d),0),r=document.querySelector(`[data-grid-cell-id=${i}]`),a=r?.querySelector("button[data-direction=up], button[data-direction=all]")),i&&r&&(a?a.focus():r.focus(),n.focusGridCell(i),tT(r))}else if("BUTTON"===document.activeElement.tagName)tT(document.activeElement.closest("td"));else if("TD"===document.activeElement.tagName){let e=document.activeElement.getAttribute("data-grid-cell-id"),t=n.focusedGridCell?.cellId;if(e!==t){let e=i.current?.querySelector(`[data-grid-cell-id=${t}]`);e?.focus()}}}}},[e,t,n,a,r,i])};var t$=n(69676);let tP={ArrowLeft:t$.z0.ArrowHorizontal,ArrowDown:t$.z0.ArrowVertical,ArrowUp:t$.z0.ArrowVertical,ArrowRight:t$.z0.ArrowHorizontal,h:t$.z0.HL,j:t$.z0.JK,k:t$.z0.JK,l:t$.z0.HL,a:t$.z0.AD,s:t$.z0.WS,w:t$.z0.WS,d:t$.z0.AD,Tab:t$.z0.Tab,Home:t$.z0.HomeAndEnd,End:t$.z0.HomeAndEnd,PageUp:t$.z0.PageUpDown,PageDown:t$.z0.PageUpDown,Backspace:t$.z0.Backspace},tF=t$.z0.ArrowAll|t$.z0.PageUpDown|t$.z0.HomeAndEnd|t$.z0.AD,tG={avatarUrl:"https://avatars.githubusercontent.com/ghost",id:"ghost",login:"ghost",url:"/ghost",__typename:"Author"},tV=(0,r.GV)()?function(e,t){let n,i,r,s=(0,a.c)(6);s[0]!==t?(n=e=>{let n=e.target.getAttribute("data-grid-cell-id");n&&t.focusGridCell(n)},s[0]=t,s[1]=n):n=s[1];let o=n;s[2]!==e||s[3]!==o?(i=()=>{let t=e.current;return t?.addEventListener("focusin",o),()=>t?.removeEventListener("focusin",o)},r=[e,o],s[2]=e,s[3]=o,s[4]=i,s[5]=r):(i=s[4],r=s[5]),(0,l.useEffect)(i,r)}:function(e,t){let n=(0,l.useCallback)(e=>{let n=e.target.getAttribute("data-grid-cell-id");n&&t.focusGridCell(n)},[t]);(0,l.useEffect)(()=>{let t=e.current;return t?.addEventListener("focusin",n),()=>t?.removeEventListener("focusin",n)},[e,n])};function tH(e){return e in tP&&(tP[e]&tF)>0}function tU({addLineToSelection:e,clearSelectedLines:t,containerRef:n,fileAnchor:i,getfirstLineSelectionOnDrag:r,isSplitDiff:a,leftLines:s,rightLines:o,selectMultipleLines:d,disabled:c}){let u=(0,l.useRef)(void 0),m=(0,l.useMemo)(()=>new GridNavigator(i,a,s,o,u.current?.focusedGridCell?.cellId),[i,a,s,o]);(0,l.useEffect)(()=>{u.current=m},[m]),(0,l.useEffect)(()=>{let e=n.current,t=()=>{m.clearLastSelectedCell()};return e?.addEventListener("mousedown",t),()=>e?.removeEventListener("mousedown",t)},[n,m]),tM(i,s,m,n,u.current,o),tV(n,m);let f=(0,l.useCallback)((n,i,a)=>{let s=m.getValidSelectableRowCell();switch(!0){case(a.metaKey||a.ctrlKey)&&"KeyA"===a.code:{let e=m.getFirstCodeCell(),t=m.getLastCodeCell();if(!e||!t)return i;return e.lineKey&&e.lineNumber&&e.orientation&&d({endLineKey:t.lineKey,endOrientation:t.orientation,startLineKey:e.lineKey,startOrientation:e.orientation,firstLineSelectionOnDrag:{lineKey:e.lineKey,lineNumber:e.lineNumber,orientation:e.orientation,shouldStartConversation:!1}},eL),i}case a.shiftKey&&"ArrowDown"===a.key:{let t=m.getNextSelectableCell("ArrowDown");if(!t||!s)return i;return r()?e({lineKey:t.lineKey,orientation:t.orientation},eL):s.lineKey&&s.lineNumber&&s.orientation&&d({endLineKey:t.lineKey,endOrientation:t.orientation,startLineKey:s.lineKey,startOrientation:s.orientation,firstLineSelectionOnDrag:{lineKey:s.lineKey,lineNumber:s.lineNumber,orientation:s.orientation,shouldStartConversation:!1}},eL),tK(t.cellId),i}case a.shiftKey&&"ArrowUp"===a.key:{let t=m.getNextSelectableCell("ArrowUp");if(!t||!s)return i;return r()?e({lineKey:t.lineKey,orientation:t.orientation},eL):s.lineKey&&s.lineNumber&&s.orientation&&d({endLineKey:s.lineKey,endOrientation:s.orientation,startLineKey:t.lineKey,startOrientation:t.orientation,firstLineSelectionOnDrag:{lineKey:s.lineKey,lineNumber:s.lineNumber,orientation:s.orientation,shouldStartConversation:!1}},eL),tK(t.cellId),i}case"ArrowLeft"===a.key&&a.metaKey&&a.shiftKey:return i;default:{let e=m.moveToNextItem(a.key,a.ctrlKey),n=e&&document.querySelector(`[data-grid-cell-id=${e.cellId}]`);return t(),m.clearLastSelectedCell(),n??void 0}}},[e,r,m,d,t]);return(0,tt.G)({containerRef:n,bindKeys:tF,getNextFocusable:f,focusableElementFilter:e=>"TD"===e.tagName&&"gridcell"===e.getAttribute("role"),focusInStrategy:"previous",disabled:c},[f]),{gridNavigator:m}}function tK(e){let t=p.XC?.querySelector(`[data-grid-cell-id=${e}]`);!function(e){if(!p.XC||!p.cg||!e)return!1;let t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(p.cg.innerHeight||p.XC.documentElement.clientHeight)&&t.right<=(p.cg.innerWidth||p.XC.documentElement.clientWidth)}(t)&&t?.scrollIntoView({block:"nearest",inline:"nearest"})}var tB=n(21537),tq=n(30459),tz=n(50899),tW=n(54571);let tX=(0,r.GV)()?function(e,t){let n,i,r,s,l,o=(0,a.c)(17),{sendAnalyticsEvent:d}=(0,tq.s)(),c=G(),u=(0,I.ww)(),m=K();o[0]===Symbol.for("react.memo_cache_sentinel")?(n=[],o[0]=n):n=o[0];let[f]=(0,tW.I)(tQ,!0,n);o[1]!==c||o[2]!==e?(i=function(t){if(!t)return"DELETION"!==e.type;let n=c(t)?.selectedLeftLines;return n?!!n?.every(tZ):"right"===t.startOrientation&&"right"===t.endOrientation||(t.startLineNumber===t.endLineNumber&&t.startOrientation===t.endOrientation?"DELETION"!==e.type:void 0)},o[1]=c,o[2]=e,o[3]=i):i=o[3];let h=i;o[4]!==c||o[5]!==f||o[6]!==e?(r=function(t){let n=t?c(t)?.selectedRightLines:[];if(t&&n&&n.length>1)return f?"":(0,_.Ls)(n);if(!e)return"";let[i]=(0,_.dv)(e.text,e.type);return i},o[4]=c,o[5]=f,o[6]=e,o[7]=r):r=o[7];let g=r;o[8]!==g||o[9]!==u||o[10]!==d||o[11]!==h?(s=function(e,t){let n=!!(h(e)&&!u);return{isValidSuggestionRange:n,showSuggestChangesButton:n,sourceContentFromDiffLines:n?g(e):void 0,onInsertSuggestedChange:()=>{d("diff.add_suggested_change","ADD_SUGGESTED_CHANGE_BUTTON")},shouldInsertSuggestedChange:t}},o[8]=g,o[9]=u,o[10]=d,o[11]=h,o[12]=s):s=o[12];let p=(0,tz.K)(s);return o[13]!==p||o[14]!==m||o[15]!==t?(l={getSelectedLineRange:m,configureSuggestedChangesFromLineRange:p,shouldStartNewConversationWithSuggestedChange:t},o[13]=p,o[14]=m,o[15]=t,o[16]=l):l=o[16],l}:function(e,t){let{sendAnalyticsEvent:n}=(0,tq.s)(),i=G(),r=(0,I.ww)(),a=K(),[s]=(0,tW.I)(()=>!1,!0,[]),o=(0,tz.K)(function(t,a){let l=!!(function(t){if(!t)return"DELETION"!==e.type;let n=i(t)?.selectedLeftLines;return n?!!n?.every(e=>"empty-diff-line"!==e&&"DELETION"!==e.type):"right"===t.startOrientation&&"right"===t.endOrientation||(t.startLineNumber===t.endLineNumber&&t.startOrientation===t.endOrientation?"DELETION"!==e.type:void 0)}(t)&&!r);return{isValidSuggestionRange:l,showSuggestChangesButton:l,sourceContentFromDiffLines:l?function(t){let n=t?i(t)?.selectedRightLines:[];if(t&&n&&n.length>1)return s?"":(0,_.Ls)(n);if(!e)return"";let[r]=(0,_.dv)(e.text,e.type);return r}(t):void 0,onInsertSuggestedChange:()=>{n("diff.add_suggested_change","ADD_SUGGESTED_CHANGE_BUTTON")},shouldInsertSuggestedChange:a}});return(0,l.useMemo)(()=>({getSelectedLineRange:a,configureSuggestedChangesFromLineRange:o,shouldStartNewConversationWithSuggestedChange:t}),[o,a,t])};function tZ(e){return"empty-diff-line"!==e&&"DELETION"!==e.type}function tQ(){return!1}var tJ=n(20622),tY=n(48845),t0=n(97665),t1=n(94747),t2=n(96379),t3=n(69510),t4=n(43362);let t6=(0,r.Z6)()?function(){let e,t,n,i=(0,a.c)(12),r=(0,I.Kp)(),s=(0,t0.jE)(),l=`${r}/page_data/${tJ.uT.createReviewComment}`,{updateThread:d}=(0,I.an)(),{onCommentThreadAdded:c}=(0,I.Ud)(),{addPendingComment:u,clearPendingReview:m}=(0,I._N)();return i[0]!==l?(e=async e=>{let t=await (0,t2.Sr)(`${l}`,{method:"POST",headers:{Accept:"application/json"},body:e}),n=await (0,tY.hp)(t);return(0,tY.R)(t,n),n},i[0]=l,i[1]=e):e=i[1],i[2]!==u||i[3]!==r||i[4]!==m||i[5]!==c||i[6]!==s||i[7]!==d?(t=(e,t)=>{let n=t.subjectType===o.Wr.File?"FILE":"right"===t.side?`R${t.line}`:`L${t.line}`,i=t.startSide&&t.startLine?"right"===t.startSide?`R${t.startLine}`:`L${t.startLine}`:void 0;void 0!==t.submitBatch&&!t.submitBatch&&e.thread&&u(Number(e.thread.id)),t.submitBatch&&m(),d(Number(e.thread.id),t.path,n,()=>{let n=(0,t4.YY)(t);return e.thread.subject=n,e.thread.positioning=n,e.thread}),c({path:t.path,diffLineKey:n,startPosition:i,threadID:e.thread.id}),s.invalidateQueries({queryKey:(0,t3.XG)(r)})},i[2]=u,i[3]=r,i[4]=m,i[5]=c,i[6]=s,i[7]=d,i[8]=t):t=i[8],i[9]!==e||i[10]!==t?(n={mutationFn:e,onSuccess:t},i[9]=e,i[10]=t,i[11]=n):n=i[11],(0,t1.n)(n)}:function(){let e=(0,I.Kp)(),t=(0,t0.jE)(),n=`${e}/page_data/${tJ.uT.createReviewComment}`,{updateThread:i}=(0,I.an)(),{onCommentThreadAdded:r}=(0,I.Ud)(),{addPendingComment:a,clearPendingReview:s}=(0,I._N)();return(0,t1.n)({mutationFn:async e=>{let t=await (0,t2.Sr)(`${n}`,{method:"POST",headers:{Accept:"application/json"},body:e}),i=await (0,tY.hp)(t);return(0,tY.R)(t,i),i},onSuccess:(n,l)=>{let d=l.subjectType===o.Wr.File?"FILE":"right"===l.side?`R${l.line}`:`L${l.line}`,c=l.startSide&&l.startLine?"right"===l.startSide?`R${l.startLine}`:`L${l.startLine}`:void 0;void 0!==l.submitBatch&&!l.submitBatch&&n.thread&&a(Number(n.thread.id)),l.submitBatch&&s(),i(Number(n.thread.id),l.path,d,()=>{let e=(0,t4.YY)(l);return n.thread.subject=e,n.thread.positioning=e,n.thread}),r({path:l.path,diffLineKey:d,startPosition:c,threadID:n.thread.id}),t.invalidateQueries({queryKey:(0,t3.XG)(e)})}})};var t5=new WeakMap,t7=new WeakMap,t8=new WeakMap,t9=new WeakMap,ne=new WeakMap,nt=new WeakMap,nn=new WeakMap,ni=new WeakSet,nr=new WeakSet,na=new WeakSet;let ReviewCommentFactory=class ReviewCommentFactory{fileRequestData(){return{...(0,ta._)(this,na,no).call(this),path:(0,tn._)(this,t7),subjectType:o.Wr.File}}lineRequestData(e,t){let n=t&&!(0,_.Ji)(e)?"left":"right";return{...(0,ta._)(this,na,no).call(this),line:e.blobLineNumber,path:(0,ta._)(this,ni,ns).call(this,n),positioning:{type:o.Wr.Line,baseCommitOid:(0,tn._)(this,t5),headCommitOid:(0,tn._)(this,t8),path:(0,ta._)(this,ni,ns).call(this,n),line:e.blobLineNumber,commitOid:(0,ta._)(this,nr,nl).call(this,n)},side:n,subjectType:o.Wr.Line}}multilineRequestData(e){let{endLineNumber:t,endOrientation:n,startLineNumber:i,startOrientation:r}=e,a="left"===n?"left":"right",s="left"===r?"left":"right";return{...(0,ta._)(this,na,no).call(this),line:t,path:(0,ta._)(this,ni,ns).call(this,a),positioning:{baseCommitOid:(0,tn._)(this,t5),headCommitOid:(0,tn._)(this,t8),type:o.Wr.Multiline,startPath:(0,ta._)(this,ni,ns).call(this,s),startLine:i,startCommitOid:(0,ta._)(this,nr,nl).call(this,s),endPath:(0,ta._)(this,ni,ns).call(this,a),endLine:t,endCommitOid:(0,ta._)(this,nr,nl).call(this,a)},side:a,startLine:i,startSide:s,subjectType:o.Wr.Multiline}}constructor({filePath:e,newTreeEntry:t,oldTreeEntry:n,effectiveDiffRange:i,submitBatch:r,text:a}){(0,ts._)(this,ni),(0,ts._)(this,nr),(0,ts._)(this,na),(0,ti._)(this,t5,{writable:!0,value:void 0}),(0,ti._)(this,t7,{writable:!0,value:void 0}),(0,ti._)(this,t8,{writable:!0,value:void 0}),(0,ti._)(this,t9,{writable:!0,value:void 0}),(0,ti._)(this,ne,{writable:!0,value:void 0}),(0,ti._)(this,nt,{writable:!0,value:void 0}),(0,ti._)(this,nn,{writable:!0,value:void 0}),(0,tr._)(this,t5,i.baseOid),(0,tr._)(this,t7,e),(0,tr._)(this,t8,i.headOid),(0,tr._)(this,t9,t),(0,tr._)(this,ne,n),(0,tr._)(this,nt,r),(0,tr._)(this,nn,a)}};function ns(e){return"left"===e&&(0,tn._)(this,ne)?.path&&(0,tn._)(this,t9)?.path&&(0,tn._)(this,ne).path!==(0,tn._)(this,t9).path?(0,tn._)(this,ne).path:(0,tn._)(this,t7)}function nl(e){return"left"===e?(0,tn._)(this,t5):(0,tn._)(this,t8)}function no(){return{comparisonEndOid:(0,tn._)(this,t8),comparisonStartOid:(0,tn._)(this,t5),text:(0,tn._)(this,nn),submitBatch:(0,tn._)(this,nt)}}let nd=(e,t)=>!!e&&!!t.startLineNumber&&!!t.endLineNumber&&t.startLineNumber!==t.endLineNumber,nc=(0,r.GV)()?function(e,t,n){let i,r=(0,a.c)(4),s=K();e:{let a,l;if(!e){i="";break e}r[0]!==s||r[1]!==n?(a=n?s():void 0,r[0]=s,r[1]=n,r[2]=a):a=r[2];let o=a,d=!!o&&o.startLineNumber!==o.endLineNumber;if(o&&d){let e;r[3]===Symbol.for("react.memo_cache_sentinel")?(e={left:"L",right:"R"},r[3]=e):e=r[3];let t=e,n=t[o.startOrientation],i=t[o.endOrientation];l=o.startLineNumber!==o.endLineNumber?` lines ${n}${o.startLineNumber} to ${i}${o.endLineNumber}`:` line ${n}${o.startLineNumber}`}else{let n=t&&!(0,_.Ji)(e)?"L":"R";l=` line ${n}${e.blobLineNumber}`}i=l}return i}:function(e,t,n){let i=K();return(0,l.useMemo)(()=>{if(!e)return"";let r=n?i():void 0,a="",s=!!r&&r.startLineNumber!==r.endLineNumber;if(r&&s){let e={left:"L",right:"R"},t=e[r.startOrientation],n=e[r.endOrientation];a+=r.startLineNumber!==r.endLineNumber?` lines ${t}${r.startLineNumber} to ${n}${r.endLineNumber}`:` line ${t}${r.startLineNumber}`}else{let n=t&&!(0,_.Ji)(e)?"L":"R";a+=` line ${n}${e.blobLineNumber}`}return a},[e,t,n,i])},nu=(0,r.GV)()?function(e){let t,n,r,s,o,d,c,u,m,f,h,g,p,b,v=(0,a.c)(38);if(v[0]!==e){let{diffAnchor:i,isInDialogMode:a,isOpen:l,onCloseCommentDialog:m,onAddComment:f,startLineNumber:h,diffLine:g,shouldStartNewConversationWithSuggestedChange:p,...b}=e;n=a,r=l,o=m,s=f,u=h,t=g,c=p,d=b,v[0]=e,v[1]=t,v[2]=n,v[3]=r,v[4]=s,v[5]=o,v[6]=d,v[7]=c,v[8]=u}else t=v[1],n=v[2],r=v[3],s=v[4],o=v[5],d=v[6],c=v[7],u=v[8];let{sendAnalyticsEvent:x}=(0,tq.s)(),C=(0,l.useRef)(null),y=K(),L=tX(t,c),{newTreeEntry:S,oldTreeEntry:N}=et(),{effectiveRange:j}=(0,I.L3)(),{baseOid:D,headOid:w}=(0,I.E4)(),k=(0,eU.u)("cotd_ui"),A=t?.type==="DELETION",E=nc(t,!!A,!1),{mutate:R}=t6();v[9]!==k||v[10]!==R||v[11]!==t||v[12]!==j||v[13]!==w||v[14]!==y||v[15]!==A||v[16]!==S||v[17]!==N||v[18]!==d||v[19]!==D?(m=e=>{let{onCompleted:n,onError:i,submitBatch:r,text:a}=e;if(!t)return;let s=y();if(k){let e=new ReviewCommentFactory({filePath:d.filePath,newTreeEntry:S,oldTreeEntry:N,effectiveDiffRange:j,submitBatch:r,text:a});R(s&&nd(!1,s)?e.multilineRequestData(s):e.lineRequestData(t,A),{onError:i,onSuccess:e=>{n?.(e.thread.id,e.comment?.databaseId)}})}else{s&&(s.startLineNumber,s.endLineNumber);let e,l,o=t.blobLineNumber,c=A&&!(0,_.Ji)(t)?"left":"right";R({text:a,line:o,path:d.filePath,side:c,startSide:l,submitBatch:r,startLine:e,comparisonEndOid:w,comparisonStartOid:D},{onError:i,onSuccess:e=>{n?.(e.thread.id,e.comment?.databaseId)}})}},v[9]=k,v[10]=R,v[11]=t,v[12]=j,v[13]=w,v[14]=y,v[15]=A,v[16]=S,v[17]=N,v[18]=d,v[19]=D,v[20]=m):m=v[20];let T=m;e:{if(r&&L?.configureSuggestedChangesFromLineRange){let e;if(v[21]!==y||v[22]!==L){let t=y();e=L.configureSuggestedChangesFromLineRange(t,L?.shouldStartNewConversationWithSuggestedChange),v[21]=y,v[22]=L,v[23]=e}else e=v[23];f=e;break e}f=void 0}let O=f;if(!r)return null;v[24]===Symbol.for("react.memo_cache_sentinel")?(h=e=>{e.target===C.current&&C.current.querySelector("textarea")?.focus()},v[24]=h):h=v[24];let M=h,$=n?0:-1;v[25]!==o||v[26]!==x?(g=e=>{o(e),x("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON")},v[25]=o,v[26]=x,v[27]=g):g=v[27];let P=s||T,F=u??void 0;return v[28]!==E||v[29]!==O||v[30]!==d||v[31]!==g||v[32]!==P||v[33]!==F?(p=(0,i.jsx)(eB,{onClose:g,showOnCloseIcon:!1,suggestedChangesConfig:O,onAddComment:P,addCommentDialogTitle:E,startLineNumber:F,...d}),v[28]=E,v[29]=O,v[30]=d,v[31]=g,v[32]=P,v[33]=F,v[34]=p):p=v[34],v[35]!==$||v[36]!==p?(b=(0,i.jsx)("div",{className:"rounded-2 bgColor-default","data-marker-navigation-new-thread":!0,"data-marker-id":"new-comment",ref:C,tabIndex:$,onFocus:M,children:p}),v[35]=$,v[36]=p,v[37]=b):b=v[37],b}:function({diffAnchor:e,isInDialogMode:t,isOpen:n,onCloseCommentDialog:r,onAddComment:a,startLineNumber:s,diffLine:o,shouldStartNewConversationWithSuggestedChange:d,...c}){let{sendAnalyticsEvent:u}=(0,tq.s)(),m=(0,l.useRef)(null),f=K(),h=tX(o,d),{newTreeEntry:g,oldTreeEntry:p}=et(),{effectiveRange:b}=(0,I.L3)(),{baseOid:v,headOid:x}=(0,I.E4)(),C=(0,eU.u)("cotd_ui"),y=o?.type==="DELETION",L=nc(o,!!y,!1),S=(0,l.useMemo)(()=>{},[f,!1]),{mutate:N}=t6(),j=(0,l.useMemo)(()=>{if(n&&h?.configureSuggestedChangesFromLineRange){let e=f();return h.configureSuggestedChangesFromLineRange(e,h?.shouldStartNewConversationWithSuggestedChange)}},[n,h,f]);return n?(0,i.jsx)("div",{className:"rounded-2 bgColor-default","data-marker-navigation-new-thread":!0,"data-marker-id":"new-comment",ref:m,tabIndex:t?0:-1,onFocus:e=>{e.target===m.current&&m.current.querySelector("textarea")?.focus()},children:(0,i.jsx)(eB,{onClose:e=>{r(e),u("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON")},showOnCloseIcon:!1,suggestedChangesConfig:j,onAddComment:a||(({onCompleted:e,onError:t,submitBatch:n,text:i})=>{if(!o)return;let r=f();if(C){let a=new ReviewCommentFactory({filePath:c.filePath,newTreeEntry:g,oldTreeEntry:p,effectiveDiffRange:b,submitBatch:n,text:i});N(r&&nd(!1,r)?a.multilineRequestData(r):a.lineRequestData(o,y),{onError:t,onSuccess:t=>{e?.(t.thread.id,t.comment?.databaseId)}})}else{let a,s,l=!!r&&r.startLineNumber!==r.endLineNumber,d=o.blobLineNumber,u=y&&!(0,_.Ji)(o)?"left":"right";N({text:i,line:d,path:c.filePath,side:u,startSide:s,submitBatch:n,startLine:a,comparisonEndOid:x,comparisonStartOid:v},{onError:t,onSuccess:t=>{e?.(t.thread.id,t.comment?.databaseId)}})}}),addCommentDialogTitle:L,startLineNumber:s??S,...c})}):null};try{nu.displayName||(nu.displayName="StartConversation")}catch{}var nm=n(2265);let nf=t$.z0.ArrowAll;t$.z0.ArrowHorizontal,t$.z0.ArrowVertical,t$.z0.ArrowVertical,t$.z0.ArrowHorizontal;let MarkerNavigator=class MarkerNavigator{focusMarker(e){let t=this.markers.findIndex(t=>t.id.toString()===e.toString());-1!==t&&(this.currentMarkerPosition={markerId:e,index:t})}get focusedMarker(){if(this.currentMarkerPosition)return this.markers[this.currentMarkerPosition.index]}moveToFirstComment(e){if(0!==this.markers.length&&!e)return}moveToNextMarker(e,t){let n;if(0===this.markers.length)return;if(t){let e=t.closest("[data-marker-id]"),n=e?.getAttribute("data-marker-id");n&&(this.currentMarkerPosition={markerId:n,index:this.markers.findIndex(e=>e.id.toString()===n.toString())})}if(!this.currentMarkerPosition){let t="ArrowUp"===e?this.markers.length-1:0,n=this.markers[t];if(!n)return;return this.currentMarkerPosition={markerId:n.id,index:t},this.markers[t]}let i=0===this.currentMarkerPosition.index,r=this.currentMarkerPosition.index===this.markers.length-1;switch(e){case"ArrowDown":if(r)return;n=(this.currentMarkerPosition.index+1)%this.markers.length;break;case"ArrowUp":if(i)return;n=(this.currentMarkerPosition.index-1+this.markers.length)%this.markers.length;break;default:return}let a=this.markers[n];if(a)return this.currentMarkerPosition={markerId:a.id,index:n},a}moveToNextMarkerItem(e,t){let n;if(!t||!this.markerComments)return;let i=t.closest("[data-marker-id]"),r=i?.getAttribute("data-marker-id");if(!i||!r)return;let a=this.markerComments[r]||[];if(0===a.length)return;let s=t.getAttribute("data-marker-navigation-comment-id"),l=a.findIndex(e=>e.id===s);if(-1===l)return;let o=l===a.length-1;switch(e){case"ArrowDown":if(o)return;n=l+1;break;case"ArrowUp":if(0===l)return;n=l-1;break;default:return}let d=a[n];if(d)return this.currentMarkerCommentPosition={markerId:d.id,index:n},d}constructor(e,t,n){if((0,tl._)(this,"markers",void 0),(0,tl._)(this,"markerComments",null),(0,tl._)(this,"currentMarkerPosition",null),(0,tl._)(this,"currentMarkerCommentPosition",null),this.markers=e.map(e=>{let t=e.id;return{...e,id:t}}),this.markerComments=e.reduce((e,t)=>{let n=document.querySelectorAll(`[data-marker-navigation-comment-thread-id="${t.id}"]`);if(n){let i=Array.from(n).map(e=>({id:e.getAttribute("data-marker-navigation-comment-id")}));return{...e,[t.id.toString()]:i}}return e},{}),t&&!n){const e=this.markers.findIndex(e=>e.id.toString()===t.toString());-1!==e&&(this.currentMarkerPosition={markerId:t,index:e})}}};function nh({containerRef:e,markers:t,disabled:n=!1,focusInStrategy:i="previous"}){let r=(0,l.useRef)(void 0),a=(0,l.useRef)(void 0);(0,l.useEffect)(()=>{a.current=new MarkerNavigator(t,r.current?.focusedMarker?.id||void 0),r.current=a.current},[t]);let s=(0,l.useCallback)((e,t,n)=>{let i=n.key,r=!ng(t)&&!np(t)&&!nC(t)&&!nb(t);switch(!0){case r&&("ArrowUp"===i||"ArrowDown"===i||"ArrowRight"===i||"ArrowLeft"===i):return nx(t)||nv(t)||void 0;case"ArrowUp"===i||"ArrowDown"===i:if(a.current&&ng(t)){let e=a.current.moveToNextMarker(i,nv(t));if(e)return document.querySelector(`[data-marker-id="${e.id}"]`)||void 0;return t}if(a.current&&nb(t)){let e=a.current.moveToNextMarker(i,nb(t));if(e)return document.querySelector(`[data-marker-id="${e.id}"]`)||void 0;return t}if(a.current&&nC(t)){let e=a.current.moveToNextMarkerItem(i,nC(t));if(e)return document.querySelector(`[data-marker-navigation-comment-id="${e.id}"]`)||void 0;return t}if(a.current&&np(t)){let e=a.current.moveToNextMarkerItem(i,t);if(e)return document.querySelector(`[data-marker-navigation-comment-id="${e.id}"]`)||void 0}return t;case"ArrowRight"===i:if(np(t))return nx(t);if(ng(t))return t?.querySelector('[data-first-thread-comment="true"]')||void 0;return t;case"ArrowLeft"===i:if(ng(t))return nv(t);if(nb(t))return nb(t);if(nC(t))return nC(t);if(np(t))return t?.closest("[data-marker-id]")||void 0;return t;default:return t??void 0}},[a]);return(0,tt.G)({containerRef:e,bindKeys:nf,getNextFocusable:s,focusableElementFilter:e=>!n&&!!(e.hasAttribute("data-marker-id")&&e.hasAttribute("data-marker-navigation-comment-id")),focusInStrategy:i,disabled:n},[s,n]),{markerNavigator:a}}function ng(e){return!!e?.hasAttribute("data-marker-id")}function np(e){return!!e?.hasAttribute("data-marker-navigation-comment-id")}function nb(e){return e?.closest("[data-marker-navigation-new-thread]")??void 0}function nv(e){return e?.closest("[data-marker-id]")??void 0}function nx(e){return e?.closest("[data-marker-navigation-comment-id]")??void 0}function nC(e){return e?.closest("[data-marker-navigation-thread-reply]")??void 0}var ny=n(48505);let nL="a, audio, button, details, embed, iframe, img, input, keygen, label, object, select, textarea, video";function nS(e){e?.setAttribute("aria-hidden","true"),!function t(n=0){setTimeout(()=>{let n=Array.from(e?.querySelectorAll("*")??[]),i=Array.from(e?.querySelectorAll(nL)??[]);if(0===i.length)return t(200);for(let e of n)e?.setAttribute("aria-hidden","true");for(let e of i)e.setAttribute("tabindex","-1")},n)}()}function nN(e){for(let t of(e?.setAttribute("aria-hidden","false"),Array.from(e?.querySelectorAll("*")??[])))t?.setAttribute("aria-hidden","false");for(let t of Array.from(e?.querySelectorAll(nL)??[]))t.setAttribute("tabindex","0")}let nj=(0,r.GV)()?function(e){let t,n,i=(0,a.c)(7),{commentSubjectType:r,gridCellId:s,markerRef:o,isThread:d,thread:c}=e,u=void 0!==d&&d,m=z(s);i[0]!==r||i[1]!==m||i[2]!==u||i[3]!==o||i[4]!==c?(t=()=>{let e=null;if(!u||c)return m?"commit"===r?e=setTimeout(()=>{nN(o.current)},100):nN(o.current):nS(o.current),()=>{e&&clearTimeout(e)}},n=[m,r,o,u,c],i[0]=r,i[1]=m,i[2]=u,i[3]=o,i[4]=c,i[5]=t,i[6]=n):(t=i[5],n=i[6]),(0,l.useEffect)(t,n)}:function({commentSubjectType:e,gridCellId:t,markerRef:n,isThread:i=!1,thread:r}){let a=z(t);(0,l.useEffect)(()=>{let t=null;if(!i||r)return a?"commit"===e?t=setTimeout(()=>{nN(n.current)},100):nN(n.current):nS(n.current),()=>{t&&clearTimeout(t)}},[a,e,n,i,r])};var nD=n(86909);let nw="InlineAnnotation-module__inlineAnnotation--bVDzc",nI=(0,r.GV)()?function(e){let t,n,r,s,o=(0,a.c)(14),{annotation:d,gridCellId:c,isFirstMarker:u}=e,m=(0,l.useRef)(null),f=z(c);o[0]!==c?(t={commentSubjectType:"pull request",gridCellId:c,markerRef:m},o[0]=c,o[1]=t):t=o[1],nj(t);let h=`annotation_${d.databaseId}`,g=u?"mb-1":"mb-2";o[2]!==g?(n=(0,v.$)("border rounded-2 color-border-default color-shadow-small overflow-hidden",g,nw),o[2]=g,o[3]=n):n=o[3];let p=`annotation-${d.id}`,b=`${d.id}`,x=f?0:-1;return o[4]!==d?(r=(0,i.jsx)(nD.YH,{annotation:d}),o[4]=d,o[5]=r):r=o[5],o[6]!==d.annotationLevel||o[7]!==h||o[8]!==n||o[9]!==p||o[10]!==b||o[11]!==x||o[12]!==r?(s=(0,i.jsx)("div",{id:h,ref:m,className:n,"data-level":d.annotationLevel,"data-testid":p,"data-marker-id":b,tabIndex:x,children:r}),o[6]=d.annotationLevel,o[7]=h,o[8]=n,o[9]=p,o[10]=b,o[11]=x,o[12]=r,o[13]=s):s=o[13],s}:function({annotation:e,gridCellId:t,isFirstMarker:n}){let r=(0,l.useRef)(null),a=z(t);return nj({commentSubjectType:"pull request",gridCellId:t,markerRef:r}),(0,i.jsx)("div",{id:`annotation_${e.databaseId}`,ref:r,className:(0,v.$)("border rounded-2 color-border-default color-shadow-small overflow-hidden",n?"mb-1":"mb-2",nw),"data-level":e.annotationLevel,"data-testid":`annotation-${e.id}`,"data-marker-id":`${e.id}`,tabIndex:a?0:-1,children:(0,i.jsx)(nD.YH,{annotation:e})})};try{nI.displayName||(nI.displayName="InlineAnnotation")}catch{}let nk="InlineMarkers-module__closeMarkersDialogButton--wdW2G",nA="InlineMarkers-module__markersWrapper--Fw1hl",nE="InlineMarkers-module__fileMarkersWrapper--rXaAB",nR="InlineMarkers-module__markersDialogActive--v0PSm";var n_=n(33643),nT=n(75202),nO=n(82075),nM=n(26607),n$=n(72511),nP=n(76720);let nF=(0,r.GV)()?function(){let e,t,n,r=(0,a.c)(3);return r[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(nP.E.Visual,{children:(0,i.jsx)(c.AlertIcon,{size:24,className:"fgColor-muted mt-3 mb-3"})}),r[0]=e):e=r[0],r[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(nP.E.Heading,{children:(0,i.jsx)("strong",{children:"Comments cannot be loaded right now"})}),r[1]=t):t=r[1],r[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)("div",{className:"position-relative",children:(0,i.jsxs)(nP.E,{border:!0,children:[e,t,(0,i.jsx)("div",{className:"mb-n2",children:(0,i.jsx)(nP.E.Description,{children:"Refresh the page or try again later"})}),(0,i.jsx)(nP.E.SecondaryAction,{href:"https://www.githubstatus.com/",children:"GitHub status"})]})}),r[2]=n):n=r[2],n}:function(){return(0,i.jsx)("div",{className:"position-relative",children:(0,i.jsxs)(nP.E,{border:!0,children:[(0,i.jsx)(nP.E.Visual,{children:(0,i.jsx)(c.AlertIcon,{size:24,className:"fgColor-muted mt-3 mb-3"})}),(0,i.jsx)(nP.E.Heading,{children:(0,i.jsx)("strong",{children:"Comments cannot be loaded right now"})}),(0,i.jsx)("div",{className:"mb-n2",children:(0,i.jsx)(nP.E.Description,{children:"Refresh the page or try again later"})}),(0,i.jsx)(nP.E.SecondaryAction,{href:"https://www.githubstatus.com/",children:"GitHub status"})]})})};try{nF.displayName||(nF.displayName="CommentErrorFallback")}catch{}let nG="InlineReviewThread-module__inlineReviewThreadHeading--CBLMR",nV="InlineReviewThread-module__ReviewThreadContainer--MW9GI",nH="InlineReviewThread-module__ResolvableContainer--FkZ8G",nU="InlineReviewThread-module__ThreadLoading--UIhR9";var nK=n(11738),nB=n(96760),nq=n(11680);let nz=(0,r.Z6)()?function(e,t){let n,i,r,s=(0,a.c)(13),l=(0,I.Kp)(),o=(0,t0.jE)(),d=`${l}/page_data/${tJ.uT.createReviewComment}`,{updateThread:c}=(0,I.an)(),{addPendingComment:u,clearPendingReview:m}=(0,I._N)();return s[0]!==d?(n=async e=>{let t=await (0,t2.Sr)(`${d}`,{method:"POST",headers:{Accept:"application/json"},body:e}),n=await (0,tY.hp)(t);return(0,tY.R)(t,n),n},s[0]=d,s[1]=n):n=s[1],s[2]!==u||s[3]!==l||s[4]!==m||s[5]!==e||s[6]!==t||s[7]!==o||s[8]!==c?(i=(n,i)=>(void 0!==i.submitBatch&&!i.submitBatch&&n.thread&&u(Number(n.thread.id)),i.submitBatch&&m(),c(Number(n.thread.id),e,t,e=>n.thread),o.invalidateQueries({queryKey:(0,t3.XG)(l)})),s[2]=u,s[3]=l,s[4]=m,s[5]=e,s[6]=t,s[7]=o,s[8]=c,s[9]=i):i=s[9],s[10]!==n||s[11]!==i?(r={mutationFn:n,onSuccess:i},s[10]=n,s[11]=i,s[12]=r):r=s[12],(0,t1.n)(r)}:function(e,t){let n=(0,I.Kp)(),i=(0,t0.jE)(),r=`${n}/page_data/${tJ.uT.createReviewComment}`,{updateThread:a}=(0,I.an)(),{addPendingComment:s,clearPendingReview:l}=(0,I._N)();return(0,t1.n)({mutationFn:async e=>{let t=await (0,t2.Sr)(`${r}`,{method:"POST",headers:{Accept:"application/json"},body:e}),n=await (0,tY.hp)(t);return(0,tY.R)(t,n),n},onSuccess:(r,o)=>(void 0!==o.submitBatch&&!o.submitBatch&&r.thread&&s(Number(r.thread.id)),o.submitBatch&&l(),a(Number(r.thread.id),e,t,e=>r.thread),i.invalidateQueries({queryKey:(0,t3.XG)(n)}))})};var nW=n(80081),nX=n(95542);let nZ="ReviewThread-module__ReviewThreadContainer--s6e8A";var nQ=n(61219);let nJ=(0,r.GV)()?function(e){let t,n,r,s,o,d,c,u,m,f,g=(0,a.c)(82),{batchingEnabled:b,commentAnchorPrefix:v,lineMarkersKey:x,disableDialogMode:C,enableDialogMode:y,filePath:L,gridCellId:S,isInlineComment:N,isInDialogMode:j,onDeleteLineComment:D,thread:w,threadPositionNumber:k,shouldLimitHeight:A,suggestedChangesConfig:E,viewerData:R,ghostUser:_}=e,T=void 0===A||A,[O,M]=(0,l.useState)(!1),[$,P]=(0,l.useState)(void 0),{sendAnalyticsEvent:F}=(0,tq.s)(),G=(0,I.Kp)(),V=(0,l.useRef)(null),H=(0,l.useRef)(null),{mutate:U}=nz(L,x),{baseOid:K,headOid:B}=(0,I.E4)();g[0]!==U||g[1]!==B||g[2]!==L||g[3]!==F||g[4]!==K||g[5]!==w.commentsData?.comments?(t=e=>{let{commentText:t,onCompleted:n,onError:i,submitBatch:r}=e,a=w.commentsData?.comments[w.commentsData?.comments.length-1];U({text:t,submitBatch:r,inReplyTo:a?.databaseId,path:L,comparisonEndOid:B,comparisonStartOid:K},{onError:i,onSuccess:e=>{var t;(t=e.comment.databaseId)&&h(t.toString()),n?.()}}),F("comments.add","ADD_COMMENT_BUTTON")},g[0]=U,g[1]=B,g[2]=L,g[3]=F,g[4]=K,g[5]=w.commentsData?.comments,g[6]=t):t=g[6];let q=t;g[7]!==F?(n=()=>{M(!1),P(void 0),F("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON"),p.cg?.requestAnimationFrame(()=>V.current?.focus())},g[7]=F,g[8]=n):n=g[8];let z=n;g[9]===Symbol.for("react.memo_cache_sentinel")?(r=e=>{P(e),M(!0)},g[9]=r):r=g[9];let W=r;if(!w.commentsData||null===w.commentsData.comments||w.commentsData.comments.length<1)return null;g[10]!==w?(s=(0,nW.Lm)(w),g[10]=w,g[11]=s):s=g[11];let X=s;g[12]!==X||g[13]!==w.subjectType?(o=w.subjectType?.toLowerCase()==="line"?{lineRange:X}:void 0,g[12]=X,g[13]=w.subjectType,g[14]=o):o=g[14];let Z=o;g[15]!==O?(d=e=>{H.current===e.target&&(O?H.current?.querySelector("textarea")?.focus():V.current?.focus())},g[15]=O,g[16]=d):d=g[16];let Q=d;if(g[17]!==Z||g[18]!==G||g[19]!==v||g[20]!==C||g[21]!==y||g[22]!==L||g[23]!==_||g[24]!==S||g[25]!==j||g[26]!==N||g[27]!==x||g[28]!==D||g[29]!==E||g[30]!==w.commentsData.__id||g[31]!==w.commentsData.comments||g[32]!==w.id||g[33]!==w.isResolved||g[34]!==w.positioning?.isOutdated||g[35]!==k||g[36]!==R){let e;g[38]!==Z||g[39]!==G||g[40]!==v||g[41]!==C||g[42]!==y||g[43]!==L||g[44]!==_||g[45]!==S||g[46]!==j||g[47]!==N||g[48]!==x||g[49]!==D||g[50]!==E||g[51]!==w.commentsData.__id||g[52]!==w.commentsData.comments.length||g[53]!==w.id||g[54]!==w.isResolved||g[55]!==w.positioning?.isOutdated||g[56]!==k||g[57]!==R?(e=(e,t)=>(function(e,t){return e.reviewVariantType===ny.hH.Automated&&0===t})(e,t)?(0,i.jsx)(nT.t,{fallback:(0,i.jsx)(nX.k,{}),boundaryName:"AutomatedReviewThreadComment",children:(0,i.jsx)(nX.y,{anchorPrefix:v,basePath:G,comment:e,isAnchorable:!0,isInDialogMode:j,isOutdated:w.positioning?.isOutdated,onQuoteReply:W,threadId:w.id,threadPositionNumber:k},e.id)},e.id):(0,i.jsx)(nQ.U,{lineMarkersKey:x,isAnchorable:!0,index:t,threadPositionNumber:k,isFirstComment:0===t,isInlineComment:N,isLastChild:t===(w.commentsData?.comments.length??0)-1,anchorPrefix:v,comment:e,commentConnectionId:w.commentsData?.__id,disableDialogMode:C,enableDialogMode:y,filePath:L,gridCellId:S,isInDialogMode:j,isOutdated:w.positioning?.isOutdated,threadId:w.id,onDeleteLineComment:D,onQuoteReply:W,threadCommentCount:w.commentsData?.comments.length,isThreadResolved:!!w.isResolved,suggestedChangesConfig:E,applySuggestedChangesValidationData:Z,viewerData:R,ghostUser:_},e.id),g[38]=Z,g[39]=G,g[40]=v,g[41]=C,g[42]=y,g[43]=L,g[44]=_,g[45]=S,g[46]=j,g[47]=N,g[48]=x,g[49]=D,g[50]=E,g[51]=w.commentsData.__id,g[52]=w.commentsData.comments.length,g[53]=w.id,g[54]=w.isResolved,g[55]=w.positioning?.isOutdated,g[56]=k,g[57]=R,g[58]=e):e=g[58],c=w.commentsData.comments.map(e),g[17]=Z,g[18]=G,g[19]=v,g[20]=C,g[21]=y,g[22]=L,g[23]=_,g[24]=S,g[25]=j,g[26]=N,g[27]=x,g[28]=D,g[29]=E,g[30]=w.commentsData.__id,g[31]=w.commentsData.comments,g[32]=w.id,g[33]=w.isResolved,g[34]=w.positioning?.isOutdated,g[35]=k,g[36]=R,g[37]=c}else c=g[37];return g[59]!==w.reviewCommentsLimit||g[60]!==w.reviewCommentsLimitExceeded?(u=w.reviewCommentsLimitExceeded&&(0,i.jsx)(nq.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:`Only the first ${(w.reviewCommentsLimit||0)-1} replies are currently being shown.`,className:"m-3"}),g[59]=w.reviewCommentsLimit,g[60]=w.reviewCommentsLimitExceeded,g[61]=u):u=g[61],g[62]!==q||g[63]!==b||g[64]!==z||g[65]!==L||g[66]!==Q||g[67]!==j||g[68]!==O||g[69]!==X?.endLineNumber||g[70]!==X?.startLineNumber||g[71]!==$||g[72]!==F||g[73]!==E||g[74]!==w.id||g[75]!==w.viewerCanReply?(m=w.viewerCanReply&&(0,i.jsxs)("div",{id:nB.Bq.issueCommentComposer,className:"rounded-bottom-2 p-2 bgColor-inset","data-marker-navigation-comment-thread-id":w.id,"data-marker-navigation-comment-id":`${w.id}-reply-comment`,"data-marker-navigation-thread-reply":!0,tabIndex:j?0:-1,onFocus:Q,ref:H,children:[O&&(0,i.jsx)(ew,{startLineNumber:X?.startLineNumber,lineNumber:X?.endLineNumber,batchingEnabled:b,condensed:!1,fileLevelComment:!0,filePath:L,focusOnMount:!0,isReplying:!0,onCancelComment:z,quotedText:$,threadId:w.id,onAddComment:q,suggestedChangesConfig:E}),!O&&(0,i.jsx)(nK.z,{ref:V,onClick:()=>{F("comments.start_thread_reply","REPLY_TO_THREAD_INPUT_BUTTON"),M(!0)},children:"Write a reply"})]}),g[62]=q,g[63]=b,g[64]=z,g[65]=L,g[66]=Q,g[67]=j,g[68]=O,g[69]=X?.endLineNumber,g[70]=X?.startLineNumber,g[71]=$,g[72]=F,g[73]=E,g[74]=w.id,g[75]=w.viewerCanReply,g[76]=m):m=g[76],g[77]!==T||g[78]!==m||g[79]!==c||g[80]!==u?(f=(0,i.jsx)("div",{"data-testid":"review-thread",children:(0,i.jsxs)("div",{className:nZ,"data-limit-height":T,children:[c,u,m]})}),g[77]=T,g[78]=m,g[79]=c,g[80]=u,g[81]=f):f=g[81],f}:function({batchingEnabled:e,commentAnchorPrefix:t,lineMarkersKey:n,disableDialogMode:r,enableDialogMode:a,filePath:s,gridCellId:o,isInlineComment:d,isInDialogMode:c,onDeleteLineComment:u,thread:m,threadPositionNumber:f,shouldLimitHeight:g=!0,suggestedChangesConfig:b,viewerData:v,ghostUser:x}){let[C,y]=(0,l.useState)(!1),[L,S]=(0,l.useState)(void 0),{sendAnalyticsEvent:N}=(0,tq.s)(),j=(0,I.Kp)(),D=(0,l.useRef)(null),w=(0,l.useRef)(null),{mutate:k}=nz(s,n),{baseOid:A,headOid:E}=(0,I.E4)(),R=e=>{S(e),y(!0)};if(!m.commentsData||null===m.commentsData.comments||m.commentsData.comments.length<1)return null;let _=(0,nW.Lm)(m),T=m.subjectType?.toLowerCase()==="line"?{lineRange:_}:void 0;return(0,i.jsx)("div",{"data-testid":"review-thread",children:(0,i.jsxs)("div",{className:nZ,"data-limit-height":g,children:[m.commentsData.comments.map((e,l)=>e.reviewVariantType===ny.hH.Automated&&0===l?(0,i.jsx)(nT.t,{fallback:(0,i.jsx)(nX.k,{}),boundaryName:"AutomatedReviewThreadComment",children:(0,i.jsx)(nX.y,{anchorPrefix:t,basePath:j,comment:e,isAnchorable:!0,isInDialogMode:c,isOutdated:m.positioning?.isOutdated,onQuoteReply:R,threadId:m.id,threadPositionNumber:f},e.id)},e.id):(0,i.jsx)(nQ.U,{lineMarkersKey:n,isAnchorable:!0,index:l,threadPositionNumber:f,isFirstComment:0===l,isInlineComment:d,isLastChild:l===(m.commentsData?.comments.length??0)-1,anchorPrefix:t,comment:e,commentConnectionId:m.commentsData?.__id,disableDialogMode:r,enableDialogMode:a,filePath:s,gridCellId:o,isInDialogMode:c,isOutdated:m.positioning?.isOutdated,threadId:m.id,onDeleteLineComment:u,onQuoteReply:R,threadCommentCount:m.commentsData?.comments.length,isThreadResolved:!!m.isResolved,suggestedChangesConfig:b,applySuggestedChangesValidationData:T,viewerData:v,ghostUser:x},e.id)),m.reviewCommentsLimitExceeded&&(0,i.jsx)(nq.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:`Only the first ${(m.reviewCommentsLimit||0)-1} replies are currently being shown.`,className:"m-3"}),m.viewerCanReply&&(0,i.jsxs)("div",{id:nB.Bq.issueCommentComposer,className:"rounded-bottom-2 p-2 bgColor-inset","data-marker-navigation-comment-thread-id":m.id,"data-marker-navigation-comment-id":`${m.id}-reply-comment`,"data-marker-navigation-thread-reply":!0,tabIndex:c?0:-1,onFocus:e=>{w.current===e.target&&(C?w.current?.querySelector("textarea")?.focus():D.current?.focus())},ref:w,children:[C&&(0,i.jsx)(ew,{startLineNumber:_?.startLineNumber,lineNumber:_?.endLineNumber,batchingEnabled:e,condensed:!1,fileLevelComment:!0,filePath:s,focusOnMount:!0,isReplying:!0,onCancelComment:()=>{y(!1),S(void 0),N("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON"),p.cg?.requestAnimationFrame(()=>D.current?.focus())},quotedText:L,threadId:m.id,onAddComment:({commentText:e,onCompleted:t,onError:n,submitBatch:i})=>{let r=m.commentsData?.comments[m.commentsData?.comments.length-1];k({text:e,submitBatch:i,inReplyTo:r?.databaseId,path:s,comparisonEndOid:E,comparisonStartOid:A},{onError:n,onSuccess:e=>{var n;(n=e.comment.databaseId)&&h(n.toString()),t?.()}}),N("comments.add","ADD_COMMENT_BUTTON")},suggestedChangesConfig:b}),!C&&(0,i.jsx)(nK.z,{ref:D,onClick:()=>{N("comments.start_thread_reply","REPLY_TO_THREAD_INPUT_BUTTON"),y(!0)},children:"Write a reply"})]})]})})};try{nJ.displayName||(nJ.displayName="ReviewThread")}catch{}var nY=n(97695),n0=n(39698),n1=n(25407),n2=n(21067);let n3=(0,r.Z6)()?function(e,t){let n,i,r,s,l=(0,a.c)(12),o=(0,I.Kp)();l[0]===Symbol.for("react.memo_cache_sentinel")?(n=(0,n2.cj)(),l[0]=n):n=l[0];let d=n,c=(0,t0.jE)(),{updateThread:u}=(0,I.an)();return l[1]!==o?(i=async e=>{let{automatedReviewCommentId:t,reason:n,resolutionNote:i}=e,r=(0,n1.L7I)({basePath:o,automatedReviewCommentId:t}),a=await (0,tY.q$)(r,{method:"PUT",body:{reason:n,resolution_note:i}});(0,tY.R)(a)},l[1]=o,l[2]=i):i=l[2],l[3]!==o||l[4]!==e||l[5]!==t||l[6]!==c||l[7]!==u?(r=(n,i)=>{u(Number(i.threadId),e,t,e=>{if(e?.commentsData?.comments[0]?.automatedComment){let t=e.commentsData?.comments[0]?.automatedComment;return{...e,isResolved:!0,resolvedBy:d,commentsData:{...e.commentsData,comments:[{...e.commentsData.comments[0],automatedComment:{...t,isDismissed:!0,viewerCanDismiss:!1,viewerCanReopen:!0}},...e.commentsData.comments.slice(1)]}}}}),c.invalidateQueries({queryKey:(0,t3.XG)(o)})},l[3]=o,l[4]=e,l[5]=t,l[6]=c,l[7]=u,l[8]=r):r=l[8],l[9]!==i||l[10]!==r?(s={mutationFn:i,onSuccess:r},l[9]=i,l[10]=r,l[11]=s):s=l[11],(0,t1.n)(s)}:function(e,t){let n=(0,I.Kp)(),i=(0,n2.cj)(),r=(0,t0.jE)(),{updateThread:a}=(0,I.an)();return(0,t1.n)({mutationFn:async({automatedReviewCommentId:e,reason:t,resolutionNote:i})=>{let r=(0,n1.L7I)({basePath:n,automatedReviewCommentId:e}),a=await (0,tY.q$)(r,{method:"PUT",body:{reason:t,resolution_note:i}});(0,tY.R)(a)},onSuccess:(s,l)=>{a(Number(l.threadId),e,t,e=>{if(e?.commentsData?.comments[0]?.automatedComment){let t=e.commentsData?.comments[0]?.automatedComment;return{...e,isResolved:!0,resolvedBy:i,commentsData:{...e.commentsData,comments:[{...e.commentsData.comments[0],automatedComment:{...t,isDismissed:!0,viewerCanDismiss:!1,viewerCanReopen:!0}},...e.commentsData.comments.slice(1)]}}}}),r.invalidateQueries({queryKey:(0,t3.XG)(n)})}})},n4=(0,r.Z6)()?function(e,t){let n,i,r,s=(0,a.c)(11),l=(0,I.Kp)(),o=(0,t0.jE)(),{updateThread:d}=(0,I.an)();return s[0]!==l?(n=async e=>{let{automatedReviewCommentId:t}=e,n=(0,n1.Aav)({basePath:l,automatedReviewCommentId:t}),i=await (0,tY.q$)(n,{method:"PUT"});(0,tY.R)(i)},s[0]=l,s[1]=n):n=s[1],s[2]!==l||s[3]!==e||s[4]!==t||s[5]!==o||s[6]!==d?(i=(n,i)=>{d(Number(i.threadId),e,t,n6),o.invalidateQueries({queryKey:(0,t3.XG)(l)})},s[2]=l,s[3]=e,s[4]=t,s[5]=o,s[6]=d,s[7]=i):i=s[7],s[8]!==n||s[9]!==i?(r={mutationFn:n,onSuccess:i},s[8]=n,s[9]=i,s[10]=r):r=s[10],(0,t1.n)(r)}:function(e,t){let n=(0,I.Kp)(),i=(0,t0.jE)(),{updateThread:r}=(0,I.an)();return(0,t1.n)({mutationFn:async({automatedReviewCommentId:e})=>{let t=(0,n1.Aav)({basePath:n,automatedReviewCommentId:e}),i=await (0,tY.q$)(t,{method:"PUT"});(0,tY.R)(i)},onSuccess:(a,s)=>{r(Number(s.threadId),e,t,e=>{if(e?.commentsData?.comments[0]?.automatedComment){let t=e.commentsData?.comments[0]?.automatedComment;return{...e,isResolved:!1,resolvedBy:void 0,commentsData:{...e.commentsData,comments:[{...e.commentsData.comments[0],automatedComment:{...t,isDismissed:!1,viewerCanDismiss:!0,viewerCanReopen:!1}},...e.commentsData.comments.slice(1)]}}}}),i.invalidateQueries({queryKey:(0,t3.XG)(n)})}})};function n6(e){if(e?.commentsData?.comments[0]?.automatedComment){let t=e.commentsData?.comments[0]?.automatedComment;return{...e,isResolved:!1,resolvedBy:void 0,commentsData:{...e.commentsData,comments:[{...e.commentsData.comments[0],automatedComment:{...t,isDismissed:!1,viewerCanDismiss:!0,viewerCanReopen:!1}},...e.commentsData.comments.slice(1)]}}}}var n5=n(73262);let n7=(0,r.GV)()?function(e){let t,n,r,s=(0,a.c)(20),{automatedComment:l,thread:o,filePath:d,lineMarkersKey:c,setErrorMessage:u,setIsCollapsed:m,safeLocalStorage:f}=e,{mutate:h,isPending:g,error:p}=n3(d,c);s[0]!==l.id||s[1]!==h||s[2]!==f||s[3]!==u||s[4]!==m||s[5]!==o.id?(t=(e,t)=>{let{reason:n,resolutionNote:i}=e,{onSuccess:r}=t;h({automatedReviewCommentId:l.id,threadId:o.id,reason:n,resolutionNote:i},{onError:()=>u("Failed to dismiss"),onSuccess:()=>{r(),m(!0),f.removeItem(`reviewThreadIsCollapsed_${o.id}`)}})},s[0]=l.id,s[1]=h,s[2]=f,s[3]=u,s[4]=m,s[5]=o.id,s[6]=t):t=s[6];let b=t,{mutate:v,isPending:x}=n4(d,c);s[7]!==l.id||s[8]!==v||s[9]!==f||s[10]!==u||s[11]!==m||s[12]!==o.id?(n=()=>{v({automatedReviewCommentId:l.id,threadId:o.id},{onError:()=>u("Failed to reopen"),onSuccess:()=>{m(!1),f.removeItem(`reviewThreadIsCollapsed_${o.id}`)}})},s[7]=l.id,s[8]=v,s[9]=f,s[10]=u,s[11]=m,s[12]=o.id,s[13]=n):n=s[13];let C=n,y=g||x;return s[14]!==l||s[15]!==p||s[16]!==b||s[17]!==C||s[18]!==y?(r=(0,i.jsx)(n5.K,{automatedComment:l,dismissError:p,isButtonDisabled:y,onDismiss:b,onReopen:C,className:"p-2 border-top"}),s[14]=l,s[15]=p,s[16]=b,s[17]=C,s[18]=y,s[19]=r):r=s[19],r}:function({automatedComment:e,thread:t,filePath:n,lineMarkersKey:r,setErrorMessage:a,setIsCollapsed:s,safeLocalStorage:l}){let{mutate:o,isPending:d,error:c}=n3(n,r),{mutate:u,isPending:m}=n4(n,r);return(0,i.jsx)(n5.K,{automatedComment:e,dismissError:c,isButtonDisabled:d||m,onDismiss:({reason:n,resolutionNote:i},{onSuccess:r})=>{o({automatedReviewCommentId:e.id,threadId:t.id,reason:n,resolutionNote:i},{onError:()=>a("Failed to dismiss"),onSuccess:()=>{r(),s(!0),l.removeItem(`reviewThreadIsCollapsed_${t.id}`)}})},onReopen:()=>{u({automatedReviewCommentId:e.id,threadId:t.id},{onError:()=>a("Failed to reopen"),onSuccess:()=>{s(!1),l.removeItem(`reviewThreadIsCollapsed_${t.id}`)}})},className:"p-2 border-top"})};try{n7.displayName||(n7.displayName="InlineAutomatedReviewThreadActions")}catch{}let n8=(0,r.GV)()?function(e){let t,n=(0,a.c)(2),{children:r}=e;return n[0]!==r?(t=(0,i.jsx)("span",{className:"text-semibold fgColor-default",children:r}),n[0]=r,n[1]=t):t=n[1],t}:function({children:e}){return(0,i.jsx)("span",{className:"text-semibold fgColor-default",children:e})};function n9({thread:e}){if(void 0===e)return null;let t=e.positioning??e.subject;return void 0!==t&&t.endDiffSide&&t.endLine?t.startLine&&t.startDiffSide&&t.startLine!==t.endLine?it({positioning:t}):ie({positioning:t}):null}let ie=(0,r.GV)()?function(e){let t,n=(0,a.c)(3),{positioning:r}=e,s="LEFT"===r.endDiffSide?"L":"R",l=r.endLine??"";return n[0]!==s||n[1]!==l?(t=(0,i.jsxs)("h2",{className:nG,children:["Comment on line"," ",(0,i.jsxs)(n8,{children:[s,l]})]}),n[0]=s,n[1]=l,n[2]=t):t=n[2],t}:function({positioning:e}){let t="LEFT"===e.endDiffSide?"L":"R";return(0,i.jsxs)("h2",{className:nG,children:["Comment on line"," ",(0,i.jsxs)(n8,{children:[t,e.endLine??""]})]})},it=(0,r.GV)()?function(e){let t,n,r,s=(0,a.c)(9),{positioning:l}=e,o="LEFT"===l.startDiffSide?"L":"R",d="LEFT"===l.endDiffSide?"L":"R",c=l.startLine??"";s[0]!==o||s[1]!==c?(t=(0,i.jsxs)(n8,{children:[o,c]}),s[0]=o,s[1]=c,s[2]=t):t=s[2];let u=l.endLine??"";return s[3]!==d||s[4]!==u?(n=(0,i.jsxs)(n8,{children:[d,u]}),s[3]=d,s[4]=u,s[5]=n):n=s[5],s[6]!==t||s[7]!==n?(r=(0,i.jsxs)("h2",{className:nG,children:["Comment on lines"," ",t," ","to"," ",n]}),s[6]=t,s[7]=n,s[8]=r):r=s[8],r}:function({positioning:e}){let t="LEFT"===e.startDiffSide?"L":"R",n="LEFT"===e.endDiffSide?"L":"R";return(0,i.jsxs)("h2",{className:nG,children:["Comment on lines"," ",(0,i.jsxs)(n8,{children:[t,e.startLine??""]})," ","to"," ",(0,i.jsxs)(n8,{children:[n,e.endLine??""]})]})},ii=(0,r.GV)()?function(e){let t,n,r,s,o,d,u,f,h,g,p,b,x,C,y,L,S,N,j,D,w,k,A,E,R,_,T,O,M,$,P,F,G=(0,a.c)(99);G[0]!==e?({fileAnchor:t,filePath:n,gridCellId:s,onDeleteLineComment:u,threadId:g,threadPositionNumber:p,lineMarkersKey:d,threadsConnectionId:b,isFirstThread:o,ghostUser:r,suggestedChangesConfig:h,...f}=e,G[0]=e,G[1]=t,G[2]=n,G[3]=r,G[4]=s,G[5]=o,G[6]=d,G[7]=u,G[8]=f,G[9]=h,G[10]=g,G[11]=p,G[12]=b):(t=G[1],n=G[2],r=G[3],s=G[4],o=G[5],d=G[6],u=G[7],f=G[8],h=G[9],g=G[10],p=G[11],b=G[12]);let V=(0,I._W)(g,n,d),{mutate:H}=(0,nY.H)(n,d),U=()=>{V&&(H({threadId:V.id},{onError:()=>Q("Failed to resolve thread"),onSuccess:()=>{ee(!0),B.removeItem(`reviewThreadIsCollapsed_${g}`)}}),el("comments.resolve_thread","RESOLVE_CONVERSATION_BUTTON"))},K=(0,l.useRef)(null),B=(0,nO.A)("localStorage"),q=V?.isResolved,[X,Z]=(0,l.useState)(""),Q=Z,[J,Y]=(0,l.useState)(q??!1),ee=Y,et=z(s),{disableDialogMode:en,enableDialogMode:ei}=W();G[13]!==q||G[14]!==g?(x=[q,g],G[13]=q,G[14]=g,G[15]=x):x=G[15],(0,l.useEffect)(()=>{let e=localStorage.getItem(`reviewThreadIsCollapsed_${g}`);null!==e?ee(JSON.parse(e)):q&&ee(!0)},x);let er=()=>{window.requestAnimationFrame(()=>{B.setItem(`reviewThreadIsCollapsed_${g}`,JSON.stringify(!J))}),ee(ia)};G[16]!==s||G[17]!==V?(C={commentSubjectType:"pull request",gridCellId:s,markerRef:K,isThread:!0,thread:V},G[16]=s,G[17]=V,G[18]=C):C=G[18],nj(C);e:{let e=V?.positioning??V?.subject;if(!e){y=void 0;break e}if(t&&V&&e.startDiffSide&&e.endDiffSide&&e.startLine&&e.endLine&&h?.configureSuggestedChangesFromLineRange){let n,i=e.startLine??e.endLine,r=e.startDiffSide??e.endDiffSide,a="LEFT"===e.endDiffSide?"left":"right",s="LEFT"===r?"left":"right",l="LEFT"===r?"left":"right";if(G[19]!==t||G[20]!==e.endLine||G[21]!==i||G[22]!==h||G[23]!==a||G[24]!==s||G[25]!==l){let r={diffAnchor:t,endLineNumber:e.endLine,endOrientation:a,startLineNumber:i,startOrientation:s,firstSelectedLineNumber:i,firstSelectedOrientation:l};n=h?.configureSuggestedChangesFromLineRange(r),G[19]=t,G[20]=e.endLine,G[21]=i,G[22]=h,G[23]=a,G[24]=s,G[25]=l,G[26]=n}else n=G[26];y=n;break e}y=void 0}let ea=y,{sendAnalyticsEvent:es}=(0,tq.s)(),el=es,{mutate:eo}=(0,n0.i)(n,d);G[27]!==B||G[28]!==el||G[29]!==Q||G[30]!==ee||G[31]!==V||G[32]!==eo?(L=()=>{V&&(eo({threadId:V.id},{onError:()=>Q("Failed to unresolve thread"),onSuccess:()=>{ee(!1),B.removeItem(`reviewThreadIsCollapsed_${V.id}`)}}),el("comments.unresolve_thread","RESOLVE_CONVERSATION_BUTTON"))},G[27]=B,G[28]=el,G[29]=Q,G[30]=ee,G[31]=V,G[32]=eo,G[33]=L):L=G[33];let ed=L,ec=V?.commentsData?.comments[0]?.reviewVariantType===ny.hH.Automated,eu=ec?V.commentsData?.comments[0]?.automatedComment:null,em=eu&&eu.dismissable,ef=eu&&eu.source===ny.vk.LicenseCompliance;if(!V||!((V.commentsData?.comments?.length??0)>0))return null;let eh=!!V.isResolved;G[34]===Symbol.for("react.memo_cache_sentinel")?(S=(0,n2.M3)(),G[34]=S):S=G[34];let eg=S;G[35]!==V.commentsData?.comments?(N=eg&&V.commentsData?.comments?.some(ir),G[35]=V.commentsData?.comments,G[36]=N):N=G[36];let ep=N,eb=V.commentsData?.comments?.[0]?.createdAt,ev=V.commentsData?.comments?.[0]?.author?.login??"Unknown Author",ex=`${q?"Unresolve":"Resolve"} comment`;if(eb){let e;G[37]!==eb?(e=(0,n_.C)(new Date(eb)),G[37]=eb,G[38]=e):e=G[38];let t=e;ex=`${q?"Unresolve":"Resolve"} ${ev}'s comment, ${t}`}G[39]===Symbol.for("react.memo_cache_sentinel")?(j=(0,i.jsx)(nF,{}),G[39]=j):j=G[39],G[40]===Symbol.for("react.memo_cache_sentinel")?(D=(0,v.$)("px-1",nV),G[40]=D):D=G[40];let eC=J?"Expand comment":"Collapse comment",ey=J?c.ChevronRightIcon:c.ChevronDownIcon;return G[41]!==er||G[42]!==o||G[43]!==eC||G[44]!==ey?(w=(0,i.jsx)(m.K,{"aria-label":eC,icon:ey,size:"small",variant:"invisible",onClick:er,"data-is-first-collapse-button":o}),G[41]=er,G[42]=o,G[43]=eC,G[44]=ey,G[45]=w):w=G[45],G[46]!==V?(k=(0,i.jsx)(n9,{thread:V}),G[46]=V,G[47]=k):k=G[47],G[48]!==V.positioning?.isOutdated?(A=V.positioning?.isOutdated&&(0,i.jsx)(nM.A,{variant:"secondary",children:"Outdated"}),G[48]=V.positioning?.isOutdated,G[49]=A):A=G[49],G[50]!==ec||G[51]!==eh?(E=eh&&!ec&&(0,i.jsx)(nM.A,{variant:"secondary",children:"Resolved"}),G[50]=ec,G[51]=eh,G[52]=E):E=G[52],G[53]!==eu?.isDismissed?(R=eu?.isDismissed&&(0,i.jsx)(nM.A,{variant:"secondary",children:"Dismissed"}),G[53]=eu?.isDismissed,G[54]=R):R=G[54],G[55]!==A||G[56]!==E||G[57]!==R?(_=(0,i.jsxs)("div",{className:nH,children:[A,E,R]}),G[55]=A,G[56]=E,G[57]=R,G[58]=_):_=G[58],G[59]!==w||G[60]!==k||G[61]!==_?(T=(0,i.jsxs)("div",{className:D,children:[w,k,_]}),G[59]=w,G[60]=k,G[61]=_,G[62]=T):T=G[62],G[63]===Symbol.for("react.memo_cache_sentinel")?(O=(0,i.jsxs)("div",{className:nU,children:[(0,i.jsx)(eZ.A,{}),(0,i.jsx)("p",{children:"Loading comments"})]}),G[63]=O):O=G[63],G[64]!==X?(M=X&&(0,i.jsxs)(n$.A,{variant:"danger",className:"m-2",children:[(0,i.jsx)(c.StopIcon,{className:"mr-2"}),X]}),G[64]=X,G[65]=M):M=G[65],G[66]!==eu||G[67]!==ea||G[68]!==en||G[69]!==em||G[70]!==ei||G[71]!==n||G[72]!==r||G[73]!==s||G[74]!==U||G[75]!==ed||G[76]!==J||G[77]!==et||G[78]!==ep||G[79]!==q||G[80]!==eh||G[81]!==ef||G[82]!==d||G[83]!==u||G[84]!==ex||G[85]!==f||G[86]!==B||G[87]!==Q||G[88]!==ee||G[89]!==V||G[90]!==p||G[91]!==b?($=!J&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(nJ,{lineMarkersKey:d,disableDialogMode:en,enableDialogMode:ei,filePath:n,gridCellId:s,onDeleteLineComment:u,isInlineComment:!0,isInDialogMode:et,thread:V,threadPositionNumber:p,threadsConnectionId:b,suggestedChangesConfig:ea,shouldLimitHeight:!1,...f,ghostUser:r}),ep&&!em&&!ef&&(0,i.jsxs)("div",{className:"d-flex flex-items-center p-2 border-top flex-wrap",children:[(0,i.jsx)(eI.Q,{"aria-label":ex,onClick:eh?ed:U,className:"mr-2",children:q?"Unresolve comment":"Resolve comment"}),eh&&V.resolvedBy&&(0,i.jsxs)("span",{className:"fgColor-muted f6",children:[(0,i.jsx)("b",{children:V.resolvedBy})," marked this comment as resolved"]})]}),em&&(0,i.jsx)(n7,{automatedComment:eu,thread:V,filePath:n,lineMarkersKey:d,setErrorMessage:Q,setIsCollapsed:ee,safeLocalStorage:B})]}),G[66]=eu,G[67]=ea,G[68]=en,G[69]=em,G[70]=ei,G[71]=n,G[72]=r,G[73]=s,G[74]=U,G[75]=ed,G[76]=J,G[77]=et,G[78]=ep,G[79]=q,G[80]=eh,G[81]=ef,G[82]=d,G[83]=u,G[84]=ex,G[85]=f,G[86]=B,G[87]=Q,G[88]=ee,G[89]=V,G[90]=p,G[91]=b,G[92]=$):$=G[92],G[93]!==M||G[94]!==$?(P=(0,i.jsxs)(l.Suspense,{fallback:O,children:[M,$]}),G[93]=M,G[94]=$,G[95]=P):P=G[95],G[96]!==T||G[97]!==P?(F=(0,i.jsx)(nT.t,{fallback:j,children:(0,i.jsxs)("div",{className:"rounded-2 bgColor-default",ref:K,children:[T,P]})}),G[96]=T,G[97]=P,G[98]=F):F=G[98],F}:function({fileAnchor:e,filePath:t,gridCellId:n,onDeleteLineComment:r,threadId:a,threadPositionNumber:s,lineMarkersKey:o,threadsConnectionId:d,isFirstThread:u,ghostUser:f,suggestedChangesConfig:h,...g}){let p=(0,I._W)(a,t,o),{mutate:b}=(0,nY.H)(t,o),x=(0,l.useRef)(null),C=(0,nO.A)("localStorage"),y=p?.isResolved,[L,S]=(0,l.useState)(""),[N,j]=(0,l.useState)(y??!1),D=z(n),{disableDialogMode:w,enableDialogMode:k}=W();(0,l.useEffect)(()=>{let e=localStorage.getItem(`reviewThreadIsCollapsed_${a}`);null!==e?j(JSON.parse(e)):y&&j(!0)},[y,a]),nj({commentSubjectType:"pull request",gridCellId:n,markerRef:x,isThread:!0,thread:p});let A=(0,l.useMemo)(()=>{let t=p?.positioning??p?.subject;if(t&&e&&p&&t.startDiffSide&&t.endDiffSide&&t.startLine&&t.endLine&&h?.configureSuggestedChangesFromLineRange){let n=t.startLine??t.endLine,i=t.startDiffSide??t.endDiffSide,r={diffAnchor:e,endLineNumber:t.endLine,endOrientation:"LEFT"===t.endDiffSide?"left":"right",startLineNumber:n,startOrientation:"LEFT"===i?"left":"right",firstSelectedLineNumber:n,firstSelectedOrientation:"LEFT"===i?"left":"right"};return h?.configureSuggestedChangesFromLineRange(r)}},[e,p,h]),{sendAnalyticsEvent:E}=(0,tq.s)(),{mutate:R}=(0,n0.i)(t,o),_=p?.commentsData?.comments[0]?.reviewVariantType===ny.hH.Automated,T=_?p.commentsData?.comments[0]?.automatedComment:null,O=T&&T.dismissable,M=T&&T.source===ny.vk.LicenseCompliance;if(!p||!((p.commentsData?.comments?.length??0)>0))return null;let $=!!p.isResolved,P=(0,n2.M3)()&&p.commentsData?.comments?.some(e=>e.state?.toUpperCase()!=="PENDING"),F=p.commentsData?.comments?.[0]?.createdAt,G=p.commentsData?.comments?.[0]?.author?.login??"Unknown Author",V=`${y?"Unresolve":"Resolve"} comment`;if(F){let e=(0,n_.C)(new Date(F));V=`${y?"Unresolve":"Resolve"} ${G}'s comment, ${e}`}return(0,i.jsx)(nT.t,{fallback:(0,i.jsx)(nF,{}),children:(0,i.jsxs)("div",{className:"rounded-2 bgColor-default",ref:x,children:[(0,i.jsxs)("div",{className:(0,v.$)("px-1",nV),children:[(0,i.jsx)(m.K,{"aria-label":N?"Expand comment":"Collapse comment",icon:N?c.ChevronRightIcon:c.ChevronDownIcon,size:"small",variant:"invisible",onClick:()=>{window.requestAnimationFrame(()=>{C.setItem(`reviewThreadIsCollapsed_${a}`,JSON.stringify(!N))}),j(e=>!e)},"data-is-first-collapse-button":u}),(0,i.jsx)(n9,{thread:p}),(0,i.jsxs)("div",{className:nH,children:[p.positioning?.isOutdated&&(0,i.jsx)(nM.A,{variant:"secondary",children:"Outdated"}),$&&!_&&(0,i.jsx)(nM.A,{variant:"secondary",children:"Resolved"}),T?.isDismissed&&(0,i.jsx)(nM.A,{variant:"secondary",children:"Dismissed"})]})]}),(0,i.jsxs)(l.Suspense,{fallback:(0,i.jsxs)("div",{className:nU,children:[(0,i.jsx)(eZ.A,{}),(0,i.jsx)("p",{children:"Loading comments"})]}),children:[L&&(0,i.jsxs)(n$.A,{variant:"danger",className:"m-2",children:[(0,i.jsx)(c.StopIcon,{className:"mr-2"}),L]}),!N&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(nJ,{lineMarkersKey:o,disableDialogMode:w,enableDialogMode:k,filePath:t,gridCellId:n,onDeleteLineComment:r,isInlineComment:!0,isInDialogMode:D,thread:p,threadPositionNumber:s,threadsConnectionId:d,suggestedChangesConfig:A,shouldLimitHeight:!1,...g,ghostUser:f}),P&&!O&&!M&&(0,i.jsxs)("div",{className:"d-flex flex-items-center p-2 border-top flex-wrap",children:[(0,i.jsx)(eI.Q,{"aria-label":V,onClick:$?()=>{p&&(R({threadId:p.id},{onError:()=>S("Failed to unresolve thread"),onSuccess:()=>{j(!1),C.removeItem(`reviewThreadIsCollapsed_${p.id}`)}}),E("comments.unresolve_thread","RESOLVE_CONVERSATION_BUTTON"))}:()=>{p&&(b({threadId:p.id},{onError:()=>S("Failed to resolve thread"),onSuccess:()=>{j(!0),C.removeItem(`reviewThreadIsCollapsed_${a}`)}}),E("comments.resolve_thread","RESOLVE_CONVERSATION_BUTTON"))},className:"mr-2",children:y?"Unresolve comment":"Resolve comment"}),$&&p.resolvedBy&&(0,i.jsxs)("span",{className:"fgColor-muted f6",children:[(0,i.jsx)("b",{children:p.resolvedBy})," marked this comment as resolved"]})]}),O&&(0,i.jsx)(n7,{automatedComment:T,thread:p,filePath:t,lineMarkersKey:o,setErrorMessage:S,setIsCollapsed:j,safeLocalStorage:C})]})]})]})})};function ir(e){return e.state?.toUpperCase()!=="PENDING"}function ia(e){return!e}try{n8.displayName||(n8.displayName="Emphasis")}catch{}try{n9.displayName||(n9.displayName="ThreadBanner")}catch{}try{ie.displayName||(ie.displayName="SingleLineThreadBanner")}catch{}try{it.displayName||(it.displayName="MultineLineThreadBanner")}catch{}try{ii.displayName||(ii.displayName="InlineReviewThread")}catch{}let is=(0,r.GV)()?function(e,t,n){let i,r=(0,a.c)(5),{enableDialogMode:s}=W();return r[0]!==t||r[1]!==n||r[2]!==s||r[3]!==e?(i=(i,r)=>{t.current?.classList.contains("diff-text-cell")&&(s(e),n("USER_EXPANDED_MARKERS"),(void 0===i?{shouldFocusFirstMarker:!0}:i).shouldFocusFirstMarker?setTimeout(()=>{t.current?.querySelector('[data-first-marker="true"]')?.focus()},0):r&&setTimeout(()=>{t.current?.querySelector(`[data-marker-id="${r}"]`)?.focus()},0))},r[0]=t,r[1]=n,r[2]=s,r[3]=e,r[4]=i):i=r[4],i}:function(e,t,n){let{enableDialogMode:i}=W();return(0,l.useCallback)((r={shouldFocusFirstMarker:!0},a)=>{t.current?.classList.contains("diff-text-cell")&&(i(e),n("USER_EXPANDED_MARKERS"),r.shouldFocusFirstMarker?setTimeout(()=>{t.current?.querySelector('[data-first-marker="true"]')?.focus()},0):a&&setTimeout(()=>{t.current?.querySelector(`[data-marker-id="${a}"]`)?.focus()},0))},[t,i,e,n])},il={[ny.UZ.Failure]:0,[ny.UZ.Warning]:1,[ny.UZ.Notice]:2},io=(0,r.GV)()?function(e){let t,n=(0,a.c)(2);return n[0]!==e?(t=(0,i.jsx)(nm.j,{children:(0,i.jsx)(id,{...e})}),n[0]=e,n[1]=t):t=n[1],t}:function(e){return(0,i.jsx)(nm.j,{children:(0,i.jsx)(id,{...e})})},id=(0,r.GV)()?function(e){let t,n,r,s,o,d,u,f,h,g,b,x,C,y,L,S,N,j,D,w,k,A,E,R,_,T,O,M,$,P,F,G,V,H,U,K,B=(0,a.c)(105);if(B[0]!==e){let{annotations:i,cellRef:a,diffLine:l,dispatchMarkersStatus:c,children:m,conversationListThreads:p,inlineMarkersRef:v,isRowSelected:w,lineMarkersKey:I,fileAnchor:k,filePath:A,gridCellId:E,gutterSizeOffset:R,lineType:_,onCloseConversationList:T,onCloseFocusMode:O,onDeleteLineComment:M,threadsConnectionId:$,shouldStartNewConversationWithSuggestedChange:P,ghostUser:F,...G}=e;t=i,n=a,o=l,d=c,r=m,s=p,x=v,C=w,y=I,u=k,f=A,g=E,b=R,L=O,S=M,D=$,j=P,h=F,N=G,B[0]=e,B[1]=t,B[2]=n,B[3]=r,B[4]=s,B[5]=o,B[6]=d,B[7]=u,B[8]=f,B[9]=h,B[10]=g,B[11]=b,B[12]=x,B[13]=C,B[14]=y,B[15]=L,B[16]=S,B[17]=N,B[18]=j,B[19]=D}else t=B[1],n=B[2],r=B[3],s=B[4],o=B[5],d=B[6],u=B[7],f=B[8],h=B[9],g=B[10],b=B[11],x=B[12],C=B[13],y=B[14],L=B[15],S=B[16],N=B[17],j=B[18],D=B[19];let q=z(g),{disableDialogMode:X,enableDialogMode:Z}=W(),Q=is(g,n,d),J=o?.type??"ADDITION";B[20]!==C||B[21]!==J?(w=(0,e2.gK)(J,!1,C),B[20]=C,B[21]=J,B[22]=w):w=B[22];let Y=w,ee=tX(o,j),et=(0,l.useRef)(null);B[23]!==t?(k=[...t].sort(ih),B[23]=t,B[24]=k):k=B[24];let en=k;e:{let e;if(r){let e,t;B[25]===Symbol.for("react.memo_cache_sentinel")?(e={id:"new-comment"},B[25]=e):e=B[25],B[26]!==s||B[27]!==en?(t=[...s,e,...en],B[26]=s,B[27]=en,B[28]=t):t=B[28],A=t;break e}B[29]!==s||B[30]!==en?(e=[...s,...en],B[29]=s,B[30]=en,B[31]=e):e=B[31],A=e}let ei=A,er=im;B[32]!==Z||B[33]!==g||B[34]!==q?(E=e=>{er(e),q||Z(g)},B[32]=Z,B[33]=g,B[34]=q,B[35]=E):E=B[35];let ea=E;B[36]!==X||B[37]!==q?(R=e=>{e.target&&q&&(e.target.closest("[data-inline-markers]")||X())},B[36]=X,B[37]=q,B[38]=R):R=B[38];let es=R;B[39]!==es?(_=()=>(p.XC?.addEventListener("mousedown",es),()=>p.XC?.removeEventListener("mousedown",es)),T=[es],B[39]=es,B[40]=_,B[41]=T):(_=B[40],T=B[41]),(0,l.useEffect)(_,T);let el=(0,I.mF)();B[42]!==t||B[43]!==s||B[44]!==Q||B[45]!==el?(M=()=>{if(el){let e=s.map(iu),n=t.map(ic);(e.includes(el)||n.includes(el))&&Q({shouldFocusFirstMarker:!1},el)}},O=[el,Q,s,t],B[42]=t,B[43]=s,B[44]=Q,B[45]=el,B[46]=O,B[47]=M):(O=B[46],M=B[47]),(0,l.useEffect)(M,O);let eo=!q;B[48]!==ei||B[49]!==eo?($={containerRef:et,markers:ei,disabled:eo},B[48]=ei,B[49]=eo,B[50]=$):$=B[50],nh($);let ed=q?nR:"";B[51]!==ed?(P=(0,v.$)("d-flex pt-1",ed),B[51]=ed,B[52]=P):P=B[52],B[53]!==Y||B[54]!==b||B[55]!==q?(F=q?{marginRight:`-${b}`,backgroundColor:Y}:{marginRight:`-${b}`},B[53]=Y,B[54]=b,B[55]=q,B[56]=F):F=B[56];let ec=q?"false":"true";if(B[57]!==s||B[58]!==u||B[59]!==f||B[60]!==h||B[61]!==g||B[62]!==q||B[63]!==y||B[64]!==ei||B[65]!==S||B[66]!==N||B[67]!==ee||B[68]!==D){let e;B[70]!==u||B[71]!==f||B[72]!==h||B[73]!==g||B[74]!==q||B[75]!==y||B[76]!==ei||B[77]!==S||B[78]!==N||B[79]!==ee||B[80]!==D?(e=(e,t)=>(0,i.jsx)("div",{className:(0,v.$)("mt-1 border rounded-2 color-border-default color-shadow-small",t===ei.length-1?"mb-1":"mb-2"),"data-first-marker":0===t,"data-marker-id":`${e.id}`,tabIndex:q?0:-1,children:(0,i.jsx)(ii,{threadPositionNumber:t+1,isFirstThread:0===t,filePath:f,lineMarkersKey:y,fileAnchor:u,gridCellId:g,onDeleteLineComment:S,threadId:e.id,threadsConnectionId:D,suggestedChangesConfig:ee,ghostUser:h,...N})},`review-thread-${e.id}`),B[70]=u,B[71]=f,B[72]=h,B[73]=g,B[74]=q,B[75]=y,B[76]=ei,B[77]=S,B[78]=N,B[79]=ee,B[80]=D,B[81]=e):e=B[81],G=s.map(e),B[57]=s,B[58]=u,B[59]=f,B[60]=h,B[61]=g,B[62]=q,B[63]=y,B[64]=ei,B[65]=S,B[66]=N,B[67]=ee,B[68]=D,B[69]=G}else G=B[69];if(B[82]!==g||B[83]!==ei||B[84]!==en){let e;B[86]!==g||B[87]!==ei?(e=(e,t)=>{let n=0===t&&e===ei[0];return(0,i.jsx)(nI,{annotation:e,gridCellId:g,isFirstMarker:n},`annotation-${e.id}`)},B[86]=g,B[87]=ei,B[88]=e):e=B[88],V=en.map(e),B[82]=g,B[83]=ei,B[84]=en,B[85]=V}else V=B[85];return B[89]!==r||B[90]!==G||B[91]!==V?(H=(0,i.jsxs)("div",{className:nA,ref:et,children:[G,r,V]}),B[89]=r,B[90]=G,B[91]=V,B[92]=H):H=B[92],B[93]!==s.length||B[94]!==q||B[95]!==L?(U=q&&(0,i.jsx)(m.K,{icon:c.UndoIcon,className:(0,v.$)(nk,"ml-2 position-relative",0===s.length?"mt-2":"mt-1"),"aria-label":"Return to code","data-exit-dialog-mode-button":"true",variant:"default",size:"small",onMouseUp:L,onKeyDown:e=>{("Enter"===e.key||"Space"===e.code)&&L()}}),B[93]=s.length,B[94]=q,B[95]=L,B[96]=U):U=B[96],B[97]!==ea||B[98]!==x||B[99]!==P||B[100]!==F||B[101]!==ec||B[102]!==H||B[103]!==U?(K=(0,i.jsxs)("div",{className:P,style:F,"aria-hidden":ec,onFocus:ea,onClick:er,onKeyUp:er,onMouseDown:er,onMouseUp:er,"data-inline-markers":!0,ref:x,children:[H,U]}),B[97]=ea,B[98]=x,B[99]=P,B[100]=F,B[101]=ec,B[102]=H,B[103]=U,B[104]=K):K=B[104],K}:function({annotations:e,cellRef:t,diffLine:n,dispatchMarkersStatus:r,children:a,conversationListThreads:s,inlineMarkersRef:o,isRowSelected:d,lineMarkersKey:u,fileAnchor:f,filePath:h,gridCellId:g,gutterSizeOffset:b,lineType:x,onCloseConversationList:C,onCloseFocusMode:y,onDeleteLineComment:L,threadsConnectionId:S,shouldStartNewConversationWithSuggestedChange:N,ghostUser:j,...D}){let w=z(g),{disableDialogMode:k,enableDialogMode:A}=W(),E=is(g,t,r),R=(0,e2.gK)(n?.type??"ADDITION",!1,d),_=tX(n,N),T=(0,l.useRef)(null),O=(0,l.useMemo)(()=>[...e].sort((e,t)=>il[e.annotationLevel]-il[t.annotationLevel]),[e]),M=(0,l.useMemo)(()=>a?[...s,{id:"new-comment"},...O]:[...s,...O],[a,s,O]),$=e=>e.stopPropagation(),P=(0,l.useCallback)(e=>{e.target&&w&&(e.target.closest("[data-inline-markers]")||k())},[k,w]);(0,l.useEffect)(()=>(p.XC?.addEventListener("mousedown",P),()=>p.XC?.removeEventListener("mousedown",P)),[P]);let F=(0,I.mF)();return(0,l.useEffect)(()=>{if(F){let t=s.map(e=>e.id),n=e.map(e=>e.id);(t.includes(F)||n.includes(F))&&E({shouldFocusFirstMarker:!1},F)}},[F,E,s,e]),nh({containerRef:T,markers:M,disabled:!w}),(0,i.jsxs)("div",{className:(0,v.$)("d-flex pt-1",w?nR:""),style:w?{marginRight:`-${b}`,backgroundColor:R}:{marginRight:`-${b}`},"aria-hidden":w?"false":"true",onFocus:e=>{$(e),w||A(g)},onClick:$,onKeyUp:$,onMouseDown:$,onMouseUp:$,"data-inline-markers":!0,ref:o,children:[(0,i.jsxs)("div",{className:nA,ref:T,children:[s.map((e,t)=>(0,i.jsx)("div",{className:(0,v.$)("mt-1 border rounded-2 color-border-default color-shadow-small",t===M.length-1?"mb-1":"mb-2"),"data-first-marker":0===t,"data-marker-id":`${e.id}`,tabIndex:w?0:-1,children:(0,i.jsx)(ii,{threadPositionNumber:t+1,isFirstThread:0===t,filePath:h,lineMarkersKey:u,fileAnchor:f,gridCellId:g,onDeleteLineComment:L,threadId:e.id,threadsConnectionId:S,suggestedChangesConfig:_,ghostUser:j,...D})},`review-thread-${e.id}`)),a,O.map((e,t)=>{let n=0===t&&e===M[0];return(0,i.jsx)(nI,{annotation:e,gridCellId:g,isFirstMarker:n},`annotation-${e.id}`)})]}),w&&(0,i.jsx)(m.K,{icon:c.UndoIcon,className:(0,v.$)(nk,"ml-2 position-relative",0===s.length?"mt-2":"mt-1"),"aria-label":"Return to code","data-exit-dialog-mode-button":"true",variant:"default",size:"small",onMouseUp:y,onKeyDown:e=>{("Enter"===e.key||"Space"===e.code)&&y()}})]})};function ic(e){return e.id}function iu(e){return e.id}function im(e){return e.stopPropagation()}function ih(e,t){return il[e.annotationLevel]-il[t.annotationLevel]}try{io.displayName||(io.displayName="InlineMarkers")}catch{}try{id.displayName||(id.displayName="InlineMarkersInternal")}catch{}var ig=n(18799),ip=n(40260);async function ib({diffLine:e,diffLines:t,getSelectedDiffLines:n,getSelectedLineRange:i,isSplit:r,isLeftSide:a}){let s,l=window.getSelection();if(l&&""!==l.toString())return void document.execCommand("copy");let o=n().length<=1;switch(!0){case o:s=ix(e);break;case r:s=iC({diffLines:t,diffOrientation:a?"left":"right",getSelectedLineRange:i});break;default:s=iv({diffLines:t,getSelectedLineRange:i})}await (0,ip.D)(s)}let iv=({diffLines:e,getSelectedLineRange:t})=>{let n=t();if(!n)return"";let{startOrientation:i,endOrientation:r,startLineNumber:a,endLineNumber:s}=n,l=0,o=0;return e.length>1&&(l=e.findIndex(e=>"left"===i?e.left===a:e.right===a),o=e.findIndex(e=>"left"===r?e.left===s:e.right===s)),(0,_.Ls)(e.slice(l,o+1))},ix=e=>(0,_.Po)(e)||!e?"":(0,_.Ls)([e]),iC=({diffLines:e,diffOrientation:t,getSelectedLineRange:n})=>{if(void 0===t)return"";let i=n();if(!i)return"";let r=(0,_.Mk)(e),a=r.leftLines,s=r.rightLines,{selectedRightLines:l,selectedLeftLines:o}=(0,R.A)({selectedLineRange:i,leftLines:a,rightLines:s});return"left"===t?(0,_.Ls)(o):(0,_.Ls)(l)},iy=(0,l.createContext)(null),iL=(0,r.GV)()?function(e){let t,n,r,s,o,d,c=(0,a.c)(14),{children:u}=e,[m,f]=(0,l.useState)(!1),[h,g]=(0,l.useState)(),[p,b]=(0,l.useState)(),[v,x]=(0,l.useState)(),[C,y]=(0,l.useState)(),L=!!h||!!p||!!v||!!C;c[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{f(!0)},c[0]=t):t=c[0];let S=t;c[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{f(!1)},c[1]=n):n=c[1];let N=n;c[2]===Symbol.for("react.memo_cache_sentinel")?(r=(e,t,n)=>{switch(e){case"context-menu":g(t),y(void 0),x(void 0),b(void 0);break;case"new-conversation":y({cellId:t,withSuggestedChange:n?.withSuggestedChange}),g(void 0),x(void 0),b(void 0);break;case"marker-details":x(t),g(void 0),b(void 0),y(void 0);break;case"marker-list":b(t),g(void 0),y(void 0),x(void 0)}},c[2]=r):r=c[2];let j=r;c[3]===Symbol.for("react.memo_cache_sentinel")?(s=e=>{switch(e){case"context-menu":g(void 0);break;case"new-conversation":y(void 0);break;case"marker-details":x(void 0);break;case"marker-list":b(void 0)}},c[3]=s):s=c[3];let D=s;c[4]!==L||c[5]!==m||c[6]!==h||c[7]!==v||c[8]!==p||c[9]!==C?(o={isActionBarVisible:m,showActionBar:S,hideActionBar:N,closeDialog:D,openDialog:j,anyMenuOpen:L,openContextMenuCell:h,openMarkersListCell:p,openMarkerDetailsCell:v,openNewConversationCell:C},c[4]=L,c[5]=m,c[6]=h,c[7]=v,c[8]=p,c[9]=C,c[10]=o):o=c[10];let w=o;return c[11]!==u||c[12]!==w?(d=(0,i.jsx)(iy.Provider,{value:w,children:u}),c[11]=u,c[12]=w,c[13]=d):d=c[13],d}:function({children:e}){let[t,n]=(0,l.useState)(!1),[r,a]=(0,l.useState)(),[s,o]=(0,l.useState)(),[d,c]=(0,l.useState)(),[u,m]=(0,l.useState)(),f=(0,l.useMemo)(()=>!!r||!!s||!!d||!!u,[r,d,s,u]),h=(0,l.useCallback)(()=>{n(!0)},[]),g=(0,l.useCallback)(()=>{n(!1)},[]),p=(0,l.useCallback)((e,t,n)=>{switch(e){case"context-menu":a(t),m(void 0),c(void 0),o(void 0);break;case"new-conversation":m({cellId:t,withSuggestedChange:n?.withSuggestedChange}),a(void 0),c(void 0),o(void 0);break;case"marker-details":c(t),a(void 0),o(void 0),m(void 0);break;case"marker-list":o(t),a(void 0),m(void 0),c(void 0)}},[]),b=(0,l.useCallback)(e=>{switch(e){case"context-menu":a(void 0);break;case"new-conversation":m(void 0);break;case"marker-details":c(void 0);break;case"marker-list":o(void 0)}},[]),v=(0,l.useMemo)(()=>({isActionBarVisible:t,showActionBar:h,hideActionBar:g,closeDialog:b,openDialog:p,anyMenuOpen:f,openContextMenuCell:r,openMarkersListCell:s,openMarkerDetailsCell:d,openNewConversationCell:u}),[t,h,g,b,p,f,r,s,d,u]);return(0,i.jsx)(iy.Provider,{value:v,children:e})},iS=(0,r.GV)()?function(){let e=(0,l.useContext)(iy);if(!e)throw Error("useMarkersDialogContext must be used within a MarkersDialogContextProvider");return e}:function(){let e=(0,l.useContext)(iy);if(!e)throw Error("useMarkersDialogContext must be used within a MarkersDialogContextProvider");return e};try{iy.displayName||(iy.displayName="MarkersDialogContext")}catch{}try{iL.displayName||(iL.displayName="MarkersDialogContextProvider")}catch{}let iN=(0,r.GV)()?function(e){let t,n,i,r,s,o,d,c=(0,a.c)(27),{cellId:u,actionBarRef:m}=e,[f,h]=(0,l.useState)(m),{openDialog:g,closeDialog:p,openContextMenuCell:b,anyMenuOpen:v}=iS(),x=b===u;c[0]!==u||c[1]!==g?(t=()=>{g("context-menu",u)},c[0]=u,c[1]=g,c[2]=t):t=c[2];let C=t;c[3]!==m||c[4]!==C?(n=()=>{h(m),C()},c[3]=m,c[4]=C,c[5]=n):n=c[5];let y=n;c[6]!==p?(i=()=>{p("context-menu")},c[6]=p,c[7]=i):i=c[7];let L=i;c[8]!==L||c[9]!==x||c[10]!==C?(r=()=>{x?L():C()},c[8]=L,c[9]=x,c[10]=C,c[11]=r):r=c[11];let S=r;c[12]!==m||c[13]!==S?(s=()=>{h(m),S()},c[12]=m,c[13]=S,c[14]=s):s=c[14];let N=s;c[15]!==p?(o=()=>{p("marker-list")},c[15]=p,c[16]=o):o=c[16];let j=o;return c[17]!==v||c[18]!==L||c[19]!==j||c[20]!==x||c[21]!==C||c[22]!==y||c[23]!==f||c[24]!==S||c[25]!==N?(d={isContextMenuOpen:x,openContextMenu:C,openContextMenuFromActionBar:y,closeContextMenu:L,toggleContextMenu:S,toggleContextMenuFromActionBar:N,closeMarkerListDialog:j,returnFocusRef:f,anyMenuOpen:v},c[17]=v,c[18]=L,c[19]=j,c[20]=x,c[21]=C,c[22]=y,c[23]=f,c[24]=S,c[25]=N,c[26]=d):d=c[26],d}:function({cellId:e,actionBarRef:t}){let[n,i]=(0,l.useState)(t),{openDialog:r,closeDialog:a,openContextMenuCell:s,anyMenuOpen:o}=iS(),d=(0,l.useMemo)(()=>s===e,[e,s]),c=(0,l.useCallback)(()=>{r("context-menu",e)},[e,r]),u=(0,l.useCallback)(()=>{i(t),c()},[t,c]),m=(0,l.useCallback)(()=>{a("context-menu")},[a]),f=(0,l.useCallback)(()=>{d?m():c()},[m,d,c]),h=(0,l.useCallback)(()=>{i(t),f()},[t,f]);return{isContextMenuOpen:d,openContextMenu:c,openContextMenuFromActionBar:u,closeContextMenu:m,toggleContextMenu:f,toggleContextMenuFromActionBar:h,closeMarkerListDialog:(0,l.useCallback)(()=>{a("marker-list")},[a]),returnFocusRef:n,anyMenuOpen:o}},ij=(0,r.GV)()?function(e){let t,n,i,r,s,l=(0,a.c)(17),{cellId:o,onOpenDialog:d}=e,{openDialog:c,closeDialog:u,openNewConversationCell:m}=iS(),{sendAnalyticsEvent:f}=(0,tq.s)(),h=m?.cellId===o;l[0]!==o||l[1]!==d||l[2]!==c?(t=e=>{d?.(),c("new-conversation",o,e)},l[0]=o,l[1]=d,l[2]=c,l[3]=t):t=l[3];let g=t;l[4]!==g?(n=()=>{g()},l[4]=g,l[5]=n):n=l[5];let p=n;l[6]!==g||l[7]!==f?(i=()=>{g({withSuggestedChange:!0}),f("diff.start_new_conversation_with_suggested_change","CELL_CONTEXT_MENU")},l[6]=g,l[7]=f,l[8]=i):i=l[8];let b=i;l[9]!==u?(r=()=>{u("new-conversation")},l[9]=u,l[10]=r):r=l[10];let v=r,x=m?.withSuggestedChange;return l[11]!==v||l[12]!==h||l[13]!==x||l[14]!==p||l[15]!==b?(s={isNewConversationDialogOpen:h,startNewConversation:p,startNewConversationWithSuggestedChange:b,closeNewConversation:v,shouldStartNewConversationWithSuggestedChange:x},l[11]=v,l[12]=h,l[13]=x,l[14]=p,l[15]=b,l[16]=s):s=l[16],s}:function({cellId:e,onOpenDialog:t}){let{openDialog:n,closeDialog:i,openNewConversationCell:r}=iS(),{sendAnalyticsEvent:a}=(0,tq.s)(),s=(0,l.useMemo)(()=>r?.cellId===e,[e,r]),o=(0,l.useCallback)(i=>{t?.(),n("new-conversation",e,i)},[e,t,n]),d=(0,l.useCallback)(()=>{o()},[o]),c=(0,l.useCallback)(()=>{o({withSuggestedChange:!0}),a("diff.start_new_conversation_with_suggested_change","CELL_CONTEXT_MENU")},[o,a]);return{isNewConversationDialogOpen:s,startNewConversation:d,startNewConversationWithSuggestedChange:c,closeNewConversation:(0,l.useCallback)(()=>{i("new-conversation")},[i]),shouldStartNewConversationWithSuggestedChange:(0,l.useMemo)(()=>r?.withSuggestedChange,[r])}},iD=(0,r.GV)()?function(e){let t,n,i,r,s,o,d,c,u=(0,a.c)(29),{cellRef:m}=e,{showActionBar:f,hideActionBar:h,anyMenuOpen:g}=iS(),[p,b]=(0,l.useState)(!1);u[0]!==f?(t=()=>{f()},u[0]=f,u[1]=t):t=u[1];let v=t;u[2]!==g||u[3]!==m||u[4]!==h?(n=e=>{g||m.current&&m.current.contains(e.relatedTarget)||h()},u[2]=g,u[3]=m,u[4]=h,u[5]=n):n=u[5];let x=n;u[6]!==f?(i=()=>{f()},u[6]=f,u[7]=i):i=u[7];let C=i;u[8]!==g||u[9]!==m||u[10]!==h?(r=()=>{g||m.current===document.activeElement||m.current?.contains(document.activeElement)&&document.activeElement?.getAttribute("data-add-comment-button")!=="true"||h()},u[8]=g,u[9]=m,u[10]=h,u[11]=r):r=u[11];let y=r;u[12]!==g||u[13]!==m||u[14]!==h?(s=e=>{m.current&&(g||(m.current.contains(e.relatedTarget)?m.current===e.relatedTarget&&b(!1):(h(),b(!1))))},u[12]=g,u[13]=m,u[14]=h,u[15]=s):s=u[15];let L=s;u[16]!==g?(o=e=>{g||(e.stopPropagation(),b(!0))},u[16]=g,u[17]=o):o=u[17];let S=o;u[18]!==g?(d=e=>{!g&&tH(e.key)&&e.stopPropagation()},u[18]=g,u[19]=d):d=u[19];let N=d;return u[20]!==L||u[21]!==S||u[22]!==N||u[23]!==x||u[24]!==v||u[25]!==C||u[26]!==y||u[27]!==p?(c={isActionBarFocused:p,handleCellBlur:x,handleCellFocus:v,handleCellMouseEnter:C,handleCellMouseLeave:y,handleActionBarBlur:L,handleActionBarFocusCapture:S,handleActionBarKeydownCapture:N},u[20]=L,u[21]=S,u[22]=N,u[23]=x,u[24]=v,u[25]=C,u[26]=y,u[27]=p,u[28]=c):c=u[28],c}:function({cellRef:e}){let{showActionBar:t,hideActionBar:n,anyMenuOpen:i}=iS(),[r,a]=(0,l.useState)(!1),s=(0,l.useCallback)(()=>{t()},[t]),o=(0,l.useCallback)(t=>{i||e.current&&e.current.contains(t.relatedTarget)||n()},[i,e,n]),d=(0,l.useCallback)(()=>{t()},[t]),c=(0,l.useCallback)(()=>{i||e.current===document.activeElement||e.current?.contains(document.activeElement)&&document.activeElement?.getAttribute("data-add-comment-button")!=="true"||n()},[i,e,n]),u=(0,l.useCallback)(t=>{e.current&&(i||(e.current.contains(t.relatedTarget)?e.current===t.relatedTarget&&a(!1):(n(),a(!1))))},[i,e,n]);return{isActionBarFocused:r,handleCellBlur:o,handleCellFocus:s,handleCellMouseEnter:d,handleCellMouseLeave:c,handleActionBarBlur:u,handleActionBarFocusCapture:(0,l.useCallback)(e=>{i||(e.stopPropagation(),a(!0))},[i]),handleActionBarKeydownCapture:(0,l.useCallback)(e=>{!i&&tH(e.key)&&e.stopPropagation()},[i])}};var iw=n(21513),iI=n(73783),ik=n(24494),iA=n(79036);let iE={compact:{avatarSize:18},relaxed:{avatarSize:20}};function iR({shouldAnimateRef:e,lineSpacingPreference:t="relaxed",threads:n,annotations:r}){(0,l.useEffect)(()=>{e?.current&&(e.current=!1)},[e]);let{avatarSize:a}=iE[t],s=n.length+r.length;if(0===s)return null;let o={},c=[];r.map(e=>{e?.annotationLevel&&c.push({id:e.id,level:e.annotationLevel})}),n.map(e=>e?.commentsData?.comments?.map(e=>{e?.author?o[e?.author.login]=e.author:tG?.login&&(o[tG.login]=tG)}));let u=[...c.sort((e,t)=>(iA.GF[e.level]?.priority||0)<(iA.GF[t.level]?.priority||0)?-1:1).map(t=>e?.current?(0,i.jsx)(iA.S,{annotationLevel:t.level},t.id):(0,i.jsx)(iA.Xh,{annotationLevel:t.level},t.id)),...Object.keys(o).map(e=>{let t=o[e]?.login,n=o[e]?.avatarUrl??(tG?.avatarUrl||" ");return(0,i.jsx)(d.r,{alt:t,size:20,src:n},t)})].slice(0,3),m=s>9?"9+":`${s}`;return(0,i.jsxs)("div",{className:(0,v.$)("d-flex","flex-justify-between","flex-items-center","CommentIndicator-module__commentIndicatorContainer--GS12p"),children:[(0,i.jsx)(ik.A,{disableExpand:!0,size:a,className:(0,v.$)("CommentIndicator-module__AvatarStack--LfU8D","relaxed"===t?"CommentIndicator-module__Relaxed--oSXaK":"CommentIndicator-module__Compact--Q1u86"),children:u}),(0,i.jsx)("span",{className:(0,v.$)("fgColor-default","ml-1","CommentIndicator-module__textStyles--ZLD5t"),children:m})]})}try{iR.displayName||(iR.displayName="CommentIndicator")}catch{}var i_=n(89141);let iT=(0,r.GV)()?function(e){let t,n,i,r,s=(0,a.c)(18),{currentHunk:l,nextHunk:o,previousHunk:d}=e,{addInjectedContextLines:c}=ee(),u=!!l&&0!==l.startBlobLineNumber,m=!!l&&!!o;s[0]!==c||s[1]!==u||s[2]!==l||s[3]!==d?(t=()=>{if(!u||!l)return;let e=d&&l&&d.endBlobLineNumber+20>l.startBlobLineNumber,t={start:Math.max(0,l.startBlobLineNumber-20),end:l.startBlobLineNumber};e&&(t.start=d.endBlobLineNumber+1),c(t)},s[0]=c,s[1]=u,s[2]=l,s[3]=d,s[4]=t):t=s[4];let f=t;s[5]!==c||s[6]!==m||s[7]!==l?(n=()=>{m&&l&&c({start:l.endBlobLineNumber+1,end:l.endBlobLineNumber+1+20})},s[5]=c,s[6]=m,s[7]=l,s[8]=n):n=s[8];let h=n;s[9]!==c||s[10]!==d?(i=()=>{d&&c({start:d.endBlobLineNumber+1,end:d.endBlobLineNumber+1+20})},s[9]=c,s[10]=d,s[11]=i):i=s[11];let g=i;return s[12]!==m||s[13]!==u||s[14]!==h||s[15]!==g||s[16]!==f?(r={expandStartOfHunk:f,expandEndOfHunk:h,expandEndOfPreviousHunk:g,canExpandEndOfHunk:m,canExpandStartOfHunk:u},s[12]=m,s[13]=u,s[14]=h,s[15]=g,s[16]=f,s[17]=r):r=s[17],r}:function({currentHunk:e,nextHunk:t,previousHunk:n}){let{addInjectedContextLines:i}=ee(),r=!!e&&0!==e.startBlobLineNumber,a=!!e&&!!t;return{expandStartOfHunk:()=>{if(!r||!e)return;let t=n&&e&&n.endBlobLineNumber+20>e.startBlobLineNumber,a={start:Math.max(0,e.startBlobLineNumber-20),end:e.startBlobLineNumber};t&&(a.start=n.endBlobLineNumber+1),i(a)},expandEndOfHunk:()=>{a&&e&&i({start:e.endBlobLineNumber+1,end:e.endBlobLineNumber+1+20})},expandEndOfPreviousHunk:()=>{n&&i({start:n.endBlobLineNumber+1,end:n.endBlobLineNumber+1+20})},canExpandEndOfHunk:a,canExpandStartOfHunk:r}};var iO=n(29255);let iM={left:"L",right:"R"},i$="Add comment",iP="Suggest change";function iF(e,t,n){let i=n&&!(0,_.Ji)(t)?iM.left:iM.right;return`${e} on line ${i}${t.blobLineNumber}`}function iG(e,t,n,i,r){return e.right===t.right?n||i&&r?` on line R${e.right}`:`, modified line R${t.right}`:n||i&&r?` on lines R${e.right}-R${t.right}`:`, modified lines R${e.right}-R${t.right}`}function iV(e,t,n){return e.left===t.left?n?` on line L${e.left}`:`, original line L${e.left}`:n?` on lines L${e.left}-L${t.right}`:`, original lines L${e.left}-L${t.left}`}let iH=(0,r.GV)()?function(e){let t,n,r,s,l,o,d,u,m,f,h,g,p,b,v,x,C,y,L,S,N,j=(0,a.c)(72),{diffLine:D,handleStartConversationWithSuggestedChange:w,handleStartConversation:I,isLeftSide:k,isSplit:A}=e,{selectMultipleLines:E}=Y(),R=V(),O=K();j[0]!==O?(t=O(),j[0]=O,j[1]=t):t=j[1];let M=t;j[2]!==R?(n=(0,_.Mk)(R()),j[2]=R,j[3]=n):n=j[3];let $=n;j[4]!==$.leftLines?(r=$.leftLines.find(iJ),j[4]=$.leftLines,j[5]=r):r=j[5];let P=r;j[6]!==$.leftLines?(s=$.leftLines.filter(iQ),j[6]=$.leftLines,j[7]=s):s=j[7];let F=s,G=F[F.length-1];j[8]!==$.leftLines?(l=$.leftLines.filter(iZ).every(iX),j[8]=$.leftLines,j[9]=l):l=j[9];let H=l;j[10]!==$.rightLines?(o=$.rightLines.find(iW),j[10]=$.rightLines,j[11]=o):o=j[11];let U=o;j[12]!==$.rightLines?(d=$.rightLines.filter(iz),j[12]=$.rightLines,j[13]=d):d=j[13];let B=d,q=B[B.length-1];j[14]!==$.rightLines?(u=$.rightLines.filter(iq),j[14]=$.rightLines,j[15]=u):u=j[15];let z=0===u.length;j[16]!==$.leftLines?(m=$.leftLines.filter(iB),j[16]=$.leftLines,j[17]=m):m=j[17];let W=0===m.length;e:{if($.leftLines.find(iK)||$.rightLines.find(iU)){f=!1;break e}f=!0}let X=f;j[18]!==P||j[19]!==I||j[20]!==w||j[21]!==G||j[22]!==E||j[23]!==M?(h=(e,t)=>{!(!M||!G||!P||(0,_.Po)(G)||(0,_.Po)(P))&&P.left&&G.left&&(E({endLineKey:(0,T.bo)(G),endOrientation:"left",startLineKey:(0,T.bo)(P),startOrientation:"left",firstLineSelectionOnDrag:{lineKey:(0,T.bo)(P),lineNumber:P.left,orientation:"left",shouldStartConversation:!1}},eL),t?.withSuggestedChange?w():I())},j[18]=P,j[19]=I,j[20]=w,j[21]=G,j[22]=E,j[23]=M,j[24]=h):h=j[24];let Z=h;j[25]!==U||j[26]!==I||j[27]!==w||j[28]!==q||j[29]!==E||j[30]!==M?(g=(e,t)=>{!(!M||!q||!U||(0,_.Po)(q)||(0,_.Po)(U))&&U.right&&q.right&&(E({endLineKey:(0,T.bo)(q),endOrientation:"right",startLineKey:(0,T.bo)(U),startOrientation:"right",firstLineSelectionOnDrag:{lineKey:(0,T.bo)(U),lineNumber:U.right,orientation:"right",shouldStartConversation:!1}},eL),t?.withSuggestedChange?w():I())},j[25]=U,j[26]=I,j[27]=w,j[28]=q,j[29]=E,j[30]=M,j[31]=g):g=j[31];let Q=g,J="DELETION"!==D.type;t:{if(!M){p=!1;break t}if(M.startOrientation!==M.endOrientation||M.startLineNumber!==M.endLineNumber){p=!0;break t}p=!1}let ee=p,et=!1,en=!1;if(M&&ee){let e,t=iM[M.startOrientation],n=iM[M.endOrientation];if(x=` on lines ${t}${M.startLineNumber}-${n}${M.endLineNumber}`,!(0,_.Po)(P)&&!(0,_.Po)(G)&&P&&G){let e;et=!0,j[32]!==P||j[33]!==G||j[34]!==z?(e=iV(P,G,z),j[32]=P,j[33]=G,j[34]=z,j[35]=e):e=j[35],b=e}if(!(0,_.Po)(U)&&!(0,_.Po)(q)&&U&&q){let e;en=!0,j[36]!==X||j[37]!==U||j[38]!==A||j[39]!==q||j[40]!==W?(e=iG(U,q,W,A,X),j[36]=X,j[37]=U,j[38]=A,j[39]=q,j[40]=W,j[41]=e):e=j[41],v=e}return j[42]!==X||j[43]!==H||j[44]!==J||j[45]!==I||j[46]!==w||j[47]!==Q||j[48]!==Z||j[49]!==A||j[50]!==z||j[51]!==v||j[52]!==b||j[53]!==en||j[54]!==et||j[55]!==x?(e=(0,i.jsx)(i.Fragment,{children:A?(0,i.jsx)(i.Fragment,{children:X?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eO.l.Item,{onSelect:Q,children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.PlusIcon,{})}),i$+v,(0,i.jsx)(eO.l.TrailingVisual,{children:(0,i.jsx)(iO.U,{keys:"Alt+n"})})]}),(0,i.jsxs)(eO.l.Item,{onSelect:e=>Q(e,{withSuggestedChange:!0}),children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.PlusCircleIcon,{})}),iP+v]})]}):(0,i.jsxs)(i.Fragment,{children:[et?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eO.l.Item,{onSelect:Z,children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.PlusIcon,{})}),i$+b,(0,i.jsx)(eO.l.TrailingVisual,{children:(0,i.jsx)(iO.U,{keys:z?"Alt+n":"Alt+Shift+N"})})]}),H&&(0,i.jsxs)(eO.l.Item,{onSelect:e=>Z(e,{withSuggestedChange:!0}),children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.PlusCircleIcon,{})}),iP+b]})]}):null,en?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eO.l.Item,{onSelect:Q,children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.PlusIcon,{})}),i$+v,(0,i.jsx)(eO.l.TrailingVisual,{children:(0,i.jsx)(iO.U,{keys:"Alt+n"})})]}),(0,i.jsxs)(eO.l.Item,{onSelect:e=>Q(e,{withSuggestedChange:!0}),children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.PlusCircleIcon,{})}),iP+v]})]}):null]})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eO.l.Item,{onSelect:I,children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.PlusIcon,{})}),i$+x]}),J&&H&&(0,i.jsxs)(eO.l.Item,{onSelect:w,children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.PlusCircleIcon,{})}),iP+x]})]})}),j[42]=X,j[43]=H,j[44]=J,j[45]=I,j[46]=w,j[47]=Q,j[48]=Z,j[49]=A,j[50]=z,j[51]=v,j[52]=b,j[53]=en,j[54]=et,j[55]=x,j[56]=e):e=j[56],e}return j[57]===Symbol.for("react.memo_cache_sentinel")?(C=(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.PlusIcon,{})}),j[57]=C):C=j[57],j[58]!==k||j[59]!==D?(y=iF(i$,D,k),j[58]=k,j[59]=D,j[60]=y):y=j[60],j[61]!==I||j[62]!==y?(L=(0,i.jsxs)(eO.l.Item,{onSelect:I,children:[C,y]}),j[61]=I,j[62]=y,j[63]=L):L=j[63],j[64]!==J||j[65]!==w||j[66]!==k||j[67]!==D?(S=J&&(0,i.jsxs)(eO.l.Item,{onSelect:w,children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.PlusCircleIcon,{})}),iF(iP,D,k)]}),j[64]=J,j[65]=w,j[66]=k,j[67]=D,j[68]=S):S=j[68],j[69]!==L||j[70]!==S?(N=(0,i.jsxs)(i.Fragment,{children:[L,S]}),j[69]=L,j[70]=S,j[71]=N):N=j[71],N}:function({diffLine:e,handleStartConversationWithSuggestedChange:t,handleStartConversation:n,isLeftSide:r,isSplit:a}){let s,o,d,{selectMultipleLines:u}=Y(),m=V(),f=K()(),h=(0,l.useMemo)(()=>(0,_.Mk)(m()),[m]),g=(0,l.useMemo)(()=>h.leftLines.find(e=>!(0,_.Po)(e)),[h.leftLines]),p=(0,l.useMemo)(()=>{let e=h.leftLines.filter(e=>!(0,_.Po)(e));return e[e.length-1]},[h.leftLines]),b=(0,l.useMemo)(()=>h.leftLines.filter(e=>!(0,_.Po)(e)).every(e=>"DELETION"!==e.type),[h.leftLines]),v=(0,l.useMemo)(()=>h.rightLines.find(e=>!(0,_.Po)(e)),[h.rightLines]),x=(0,l.useMemo)(()=>{let e=h.rightLines.filter(e=>!(0,_.Po)(e));return e[e.length-1]},[h.rightLines]),C=(0,l.useMemo)(()=>0===h.rightLines.filter(e=>!(0,_.Po)(e)).length,[h.rightLines]),y=(0,l.useMemo)(()=>0===h.leftLines.filter(e=>!(0,_.Po)(e)).length,[h.leftLines]),L=(0,l.useMemo)(()=>!(h.leftLines.find(e=>!(0,_.Po)(e)&&!(0,_.Ji)(e)&&"INJECTED_CONTEXT"!==e.type)||h.rightLines.find(e=>!(0,_.Po)(e)&&!(0,_.Ji)(e)&&"INJECTED_CONTEXT"!==e.type)),[h.leftLines,h.rightLines]),S=(0,l.useCallback)((e,i)=>{!(!f||!p||!g||(0,_.Po)(p)||(0,_.Po)(g))&&g.left&&p.left&&(u({endLineKey:(0,T.bo)(p),endOrientation:"left",startLineKey:(0,T.bo)(g),startOrientation:"left",firstLineSelectionOnDrag:{lineKey:(0,T.bo)(g),lineNumber:g.left,orientation:"left",shouldStartConversation:!1}},eL),i?.withSuggestedChange?t():n())},[f,p,g,u,t,n]),N=(0,l.useCallback)((e,i)=>{!(!f||!x||!v||(0,_.Po)(x)||(0,_.Po)(v))&&v.right&&x.right&&(u({endLineKey:(0,T.bo)(x),endOrientation:"right",startLineKey:(0,T.bo)(v),startOrientation:"right",firstLineSelectionOnDrag:{lineKey:(0,T.bo)(v),lineNumber:v.right,orientation:"right",shouldStartConversation:!1}},eL),i?.withSuggestedChange?t():n())},[f,x,v,u,t,n]),j="DELETION"!==e.type,D=(0,l.useMemo)(()=>!!f&&(f.startOrientation!==f.endOrientation||f.startLineNumber!==f.endLineNumber),[f]),w=!1,I=!1;if(f&&D){let e=iM[f.startOrientation],r=iM[f.endOrientation];return d=` on lines ${e}${f.startLineNumber}-${r}${f.endLineNumber}`,!(0,_.Po)(g)&&!(0,_.Po)(p)&&g&&p&&(w=!0,s=iV(g,p,C)),!(0,_.Po)(v)&&!(0,_.Po)(x)&&v&&x&&(I=!0,o=iG(v,x,y,a,L)),(0,i.jsx)(i.Fragment,{children:a?(0,i.jsx)(i.Fragment,{children:L?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eO.l.Item,{onSelect:N,children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.PlusIcon,{})}),i$+o,(0,i.jsx)(eO.l.TrailingVisual,{children:(0,i.jsx)(iO.U,{keys:"Alt+n"})})]}),(0,i.jsxs)(eO.l.Item,{onSelect:e=>N(e,{withSuggestedChange:!0}),children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.PlusCircleIcon,{})}),iP+o]})]}):(0,i.jsxs)(i.Fragment,{children:[w?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eO.l.Item,{onSelect:S,children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.PlusIcon,{})}),i$+s,(0,i.jsx)(eO.l.TrailingVisual,{children:(0,i.jsx)(iO.U,{keys:C?"Alt+n":"Alt+Shift+N"})})]}),b&&(0,i.jsxs)(eO.l.Item,{onSelect:e=>S(e,{withSuggestedChange:!0}),children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.PlusCircleIcon,{})}),iP+s]})]}):null,I?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eO.l.Item,{onSelect:N,children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.PlusIcon,{})}),i$+o,(0,i.jsx)(eO.l.TrailingVisual,{children:(0,i.jsx)(iO.U,{keys:"Alt+n"})})]}),(0,i.jsxs)(eO.l.Item,{onSelect:e=>N(e,{withSuggestedChange:!0}),children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.PlusCircleIcon,{})}),iP+o]})]}):null]})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eO.l.Item,{onSelect:n,children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.PlusIcon,{})}),i$+d]}),j&&b&&(0,i.jsxs)(eO.l.Item,{onSelect:t,children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.PlusCircleIcon,{})}),iP+d]})]})})}return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eO.l.Item,{onSelect:n,children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.PlusIcon,{})}),iF(i$,e,r)]}),j&&(0,i.jsxs)(eO.l.Item,{onSelect:t,children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.PlusCircleIcon,{})}),iF(iP,e,r)]})]})};function iU(e){return!(0,_.Po)(e)&&!(0,_.Ji)(e)&&"INJECTED_CONTEXT"!==e.type}function iK(e){return!(0,_.Po)(e)&&!(0,_.Ji)(e)&&"INJECTED_CONTEXT"!==e.type}function iB(e){return!(0,_.Po)(e)}function iq(e){return!(0,_.Po)(e)}function iz(e){return!(0,_.Po)(e)}function iW(e){return!(0,_.Po)(e)}function iX(e){return"DELETION"!==e.type}function iZ(e){return!(0,_.Po)(e)}function iQ(e){return!(0,_.Po)(e)}function iJ(e){return!(0,_.Po)(e)}try{iH.displayName||(iH.displayName="StartConversationContextMenuItems")}catch{}var iY=n(66358);let i0=(0,r.GV)()?function(e){let t,n,r,s,l,o,d,c=(0,a.c)(28);return c[0]!==e?(t=(0,i.jsx)(i6,{...e}),c[0]=e,c[1]=t):t=c[1],c[2]!==e.copilotChatReference||c[3]!==e.diffAnchor||c[4]!==e.diffLine||c[5]!==e.isLeftSide||c[6]!==e.viewerData.shouldDisplayComments?(n=e.viewerData.shouldDisplayComments&&(0,i.jsx)(i3,{diffAnchor:e.diffAnchor,diffLine:e.diffLine,fileDiffReference:e.copilotChatReference,isLeftSide:e.isLeftSide}),c[2]=e.copilotChatReference,c[3]=e.diffAnchor,c[4]=e.diffLine,c[5]=e.isLeftSide,c[6]=e.viewerData.shouldDisplayComments,c[7]=n):n=c[7],c[8]!==e.handleCopyCode?(r=(0,i.jsx)(re,{handleCopyCode:e.handleCopyCode}),c[8]=e.handleCopyCode,c[9]=r):r=c[9],c[10]!==e.diffAnchor?(s=(0,i.jsx)(i4,{diffAnchor:e.diffAnchor}),c[10]=e.diffAnchor,c[11]=s):s=c[11],c[12]!==e.diffAnchor||c[13]!==e.diffLine||c[14]!==e.viewerData.shouldDisplayComments?(l=e.viewerData.shouldDisplayComments&&(0,i.jsx)(i1,{diffAnchor:e.diffAnchor,diffLine:e.diffLine}),c[12]=e.diffAnchor,c[13]=e.diffLine,c[14]=e.viewerData.shouldDisplayComments,c[15]=l):l=c[15],c[16]!==e.currentHunk||c[17]!==e.diffAnchor||c[18]!==e.nextHunk||c[19]!==e.previousHunk?(o=(0,i.jsx)(rn,{currentHunk:e.currentHunk,diffAnchor:e.diffAnchor,nextHunk:e.nextHunk,previousHunk:e.previousHunk}),c[16]=e.currentHunk,c[17]=e.diffAnchor,c[18]=e.nextHunk,c[19]=e.previousHunk,c[20]=o):o=c[20],c[21]!==t||c[22]!==n||c[23]!==r||c[24]!==s||c[25]!==l||c[26]!==o?(d=(0,i.jsxs)(i.Fragment,{children:[t,n,r,s,l,o]}),c[21]=t,c[22]=n,c[23]=r,c[24]=s,c[25]=l,c[26]=o,c[27]=d):d=c[27],d}:function(e){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(i6,{...e}),e.viewerData.shouldDisplayComments&&(0,i.jsx)(i3,{diffAnchor:e.diffAnchor,diffLine:e.diffLine,fileDiffReference:e.copilotChatReference,isLeftSide:e.isLeftSide}),(0,i.jsx)(re,{handleCopyCode:e.handleCopyCode}),(0,i.jsx)(i4,{diffAnchor:e.diffAnchor}),e.viewerData.shouldDisplayComments&&(0,i.jsx)(i1,{diffAnchor:e.diffAnchor,diffLine:e.diffLine}),(0,i.jsx)(rn,{currentHunk:e.currentHunk,diffAnchor:e.diffAnchor,nextHunk:e.nextHunk,previousHunk:e.previousHunk})]})},i1=(0,r.GV)()?function(e){let t,n,r,s,l=(0,a.c)(8),{diffLine:o,diffAnchor:d}=e,u=K();l[0]!==d||l[1]!==u||l[2]!==o?(t=()=>{let e=u(),t=(0,_.j2)({line:o,range:e,fileAnchor:d});t&&(0,ip.D)(t)},l[0]=d,l[1]=u,l[2]=o,l[3]=t):t=l[3];let m=t;return l[4]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.LinkIcon,{})}),l[4]=n):n=l[4],l[5]===Symbol.for("react.memo_cache_sentinel")?(r=(0,i.jsx)(eO.l.TrailingVisual,{children:(0,i.jsx)(iO.U,{keys:"Mod+Alt+y"})}),l[5]=r):r=l[5],l[6]!==m?(s=(0,i.jsxs)(eO.l.Item,{onSelect:m,onMouseDown:i2,children:[n,"Copy link",r]}),l[6]=m,l[7]=s):s=l[7],s}:function({diffLine:e,diffAnchor:t}){let n=K(),r=(0,l.useCallback)(()=>{let i=n(),r=(0,_.j2)({line:e,range:i,fileAnchor:t});r&&(0,ip.D)(r)},[t,n,e]);return(0,i.jsxs)(eO.l.Item,{onSelect:r,onMouseDown:e=>{window.getSelection()?.toString()!==""&&e.preventDefault()},children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.LinkIcon,{})}),"Copy link",(0,i.jsx)(eO.l.TrailingVisual,{children:(0,i.jsx)(iO.U,{keys:"Mod+Alt+y"})})]})};function i2(e){window.getSelection()?.toString()!==""&&e.preventDefault()}let i3=(0,r.GV)()?e=>{let t,n,r=(0,a.c)(8),s=K();if(r[0]!==s||r[1]!==e.diffAnchor||r[2]!==e.diffLine||r[3]!==e.isLeftSide){let n=s();t=(0,_.Av)(n,e.diffLine,e.isLeftSide,e.diffAnchor),r[0]=s,r[1]=e.diffAnchor,r[2]=e.diffLine,r[3]=e.isLeftSide,r[4]=t}else t=r[4];let l=t;return e.fileDiffReference?(r[5]!==l||r[6]!==e.fileDiffReference?(n=(0,i.jsx)(i_.w,{showDivider:!0,selectedRange:l,fileDiffReference:e.fileDiffReference}),r[5]=l,r[6]=e.fileDiffReference,r[7]=n):n=r[7],n):null}:e=>{let t=K()(),n=(0,_.Av)(t,e.diffLine,e.isLeftSide,e.diffAnchor);return e.fileDiffReference?(0,i.jsx)(i_.w,{showDivider:!0,selectedRange:n,fileDiffReference:e.fileDiffReference}):null},i4=(0,r.GV)()?function(e){let t,n,r,s,l=(0,a.c)(6),{diffAnchor:o}=e;l[0]!==o?(t=()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${o}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"a",code:"KeyA",ctrlKey:!0}))})},l[0]=o,l[1]=t):t=l[1];let d=t;return l[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.MultiSelectIcon,{})}),l[2]=n):n=l[2],l[3]===Symbol.for("react.memo_cache_sentinel")?(r=(0,i.jsx)(eO.l.TrailingVisual,{children:(0,i.jsx)(iO.U,{keys:"Mod+a"})}),l[3]=r):r=l[3],l[4]!==d?(s=(0,i.jsxs)(eO.l.Item,{onSelect:d,children:[n,"Select all",r]}),l[4]=d,l[5]=s):s=l[5],s}:function({diffAnchor:e}){return(0,i.jsxs)(eO.l.Item,{onSelect:()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${e}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"a",code:"KeyA",ctrlKey:!0}))})},children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.MultiSelectIcon,{})}),"Select all",(0,i.jsx)(eO.l.TrailingVisual,{children:(0,i.jsx)(iO.U,{keys:"Mod+a"})})]})},i6=(0,r.GV)()?function(e){let t,n,r,s,l=(0,a.c)(21),{diffLine:o,handleViewMarkersSelection:d,isLeftSide:c,isSplit:u,shouldDisplayCollapseComments:m,showStartConversation:f,startConversationCurrentLine:h,startConversationWithSuggestedChange:g,threads:p,annotations:b,viewerData:v}=e,x=b.length>0;return f||p||x?(l[0]!==o||l[1]!==c||l[2]!==u||l[3]!==f||l[4]!==h||l[5]!==g||l[6]!==v.shouldDisplayComments?(t=v.shouldDisplayComments&&f&&(0,i.jsx)(iH,{diffLine:o,handleStartConversation:h,handleStartConversationWithSuggestedChange:g,isLeftSide:c,isSplit:u}),l[0]=o,l[1]=c,l[2]=u,l[3]=f,l[4]=h,l[5]=g,l[6]=v.shouldDisplayComments,l[7]=t):t=l[7],l[8]!==b||l[9]!==o||l[10]!==d||l[11]!==c||l[12]!==u||l[13]!==m||l[14]!==p||l[15]!==v?(n=(0,i.jsx)(i5,{threads:p,annotations:b,diffLine:o,handleViewMarkersSelection:d,isLeftSide:c,isSplit:u,shouldDisplayCollapseComments:m,viewerData:v}),l[8]=b,l[9]=o,l[10]=d,l[11]=c,l[12]=u,l[13]=m,l[14]=p,l[15]=v,l[16]=n):n=l[16],l[17]===Symbol.for("react.memo_cache_sentinel")?(r=(0,i.jsx)(eO.l.Divider,{}),l[17]=r):r=l[17],l[18]!==t||l[19]!==n?(s=(0,i.jsxs)(i.Fragment,{children:[t,n,r]}),l[18]=t,l[19]=n,l[20]=s):s=l[20],s):null}:function({diffLine:e,handleViewMarkersSelection:t,isLeftSide:n,isSplit:r,shouldDisplayCollapseComments:a,showStartConversation:s,startConversationCurrentLine:l,startConversationWithSuggestedChange:o,threads:d,annotations:c,viewerData:u}){let m=c.length>0;return s||d||m?(0,i.jsxs)(i.Fragment,{children:[u.shouldDisplayComments&&s&&(0,i.jsx)(iH,{diffLine:e,handleStartConversation:l,handleStartConversationWithSuggestedChange:o,isLeftSide:n,isSplit:r}),(0,i.jsx)(i5,{threads:d,annotations:c,diffLine:e,handleViewMarkersSelection:t,isLeftSide:n,isSplit:r,shouldDisplayCollapseComments:a,viewerData:u}),(0,i.jsx)(eO.l.Divider,{})]}):null},i5=(0,r.GV)()?function(e){let t,n=(0,a.c)(14),{diffLine:r,handleViewMarkersSelection:s,isLeftSide:l,isSplit:o,threads:d,annotations:c,shouldDisplayCollapseComments:u,viewerData:m}=e;if(m.commentsPreference===ig.sI.Visible)return null;if(!o){let e,t;return n[0]!==s?(e=()=>s(),n[0]=s,n[1]=e):e=n[1],n[2]!==c||n[3]!==r||n[4]!==u||n[5]!==e||n[6]!==d?(t=(0,i.jsx)(i8,{threads:d,annotations:c,diffLine:r,onSelect:e,shouldDisplayCollapseComments:u}),n[2]=c,n[3]=r,n[4]=u,n[5]=e,n[6]=d,n[7]=t):t=n[7],t}return n[8]!==c||n[9]!==s||n[10]!==l||n[11]!==u||n[12]!==d?(t=(0,i.jsx)(i7,{threads:d,annotations:c,handleViewMarkersSelection:s,isLeftSide:l,shouldDisplayCollapseComments:u}),n[8]=c,n[9]=s,n[10]=l,n[11]=u,n[12]=d,n[13]=t):t=n[13],t}:function({diffLine:e,handleViewMarkersSelection:t,isLeftSide:n,isSplit:r,threads:a,annotations:s,shouldDisplayCollapseComments:l,viewerData:o}){return o.commentsPreference===ig.sI.Visible?null:r?(0,i.jsx)(i7,{threads:a,annotations:s,handleViewMarkersSelection:t,isLeftSide:n,shouldDisplayCollapseComments:l}):(0,i.jsx)(i8,{threads:a,annotations:s,diffLine:e,onSelect:()=>t(),shouldDisplayCollapseComments:l})},i7=(0,r.GV)()?function(e){let t,n,r=(0,a.c)(13),{handleViewMarkersSelection:s,isLeftSide:l,shouldDisplayCollapseComments:o,threads:d,annotations:c}=e,u=d.length>0,m=c.length>0;if(l){let e,t;return r[0]!==s||r[1]!==u||r[2]!==o?(e=u&&(0,i.jsx)(i9,{text:o?"Collapse comments":"Expand comments",onSelect:()=>s("LEFT")}),r[0]=s,r[1]=u,r[2]=o,r[3]=e):e=r[3],r[4]!==e?(t=(0,i.jsx)(i.Fragment,{children:e}),r[4]=e,r[5]=t):t=r[5],t}return r[6]!==s||r[7]!==m||r[8]!==u||r[9]!==o?(t=(u||m)&&(0,i.jsx)(i9,{text:o?"Collapse comments":"Expand comments",onSelect:()=>s("RIGHT")}),r[6]=s,r[7]=m,r[8]=u,r[9]=o,r[10]=t):t=r[10],r[11]!==t?(n=(0,i.jsx)(i.Fragment,{children:t}),r[11]=t,r[12]=n):n=r[12],n}:function({handleViewMarkersSelection:e,isLeftSide:t,shouldDisplayCollapseComments:n,threads:r,annotations:a}){let s=r.length>0,l=a.length>0;return t?(0,i.jsx)(i.Fragment,{children:s&&(0,i.jsx)(i9,{text:n?"Collapse comments":"Expand comments",onSelect:()=>e("LEFT")})}):(0,i.jsx)(i.Fragment,{children:(s||l)&&(0,i.jsx)(i9,{text:n?"Collapse comments":"Expand comments",onSelect:()=>e("RIGHT")})})},i8=(0,r.GV)()?function(e){let t,n,r=(0,a.c)(5),{diffLine:s,onSelect:l,threads:o,annotations:d,shouldDisplayCollapseComments:c}=e;if(!(s&&(o.length>0||d.length>0)))return null;let u=c?"Collapse comments":"Expand comments";return r[0]!==l?(t=()=>l(),r[0]=l,r[1]=t):t=r[1],r[2]!==u||r[3]!==t?(n=(0,i.jsx)(i9,{text:u,onSelect:t}),r[2]=u,r[3]=t,r[4]=n):n=r[4],n}:function({diffLine:e,onSelect:t,threads:n,annotations:r,shouldDisplayCollapseComments:a}){return e&&(n.length>0||r.length>0)?(0,i.jsx)(i9,{text:a?"Collapse comments":"Expand comments",onSelect:()=>t()}):null},i9=(0,r.GV)()?function(e){let t,n,r=(0,a.c)(4),{onSelect:s,text:l}=e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.CommentDiscussionIcon,{})}),r[0]=t):t=r[0],r[1]!==s||r[2]!==l?(n=(0,i.jsxs)(eO.l.Item,{onSelect:s,children:[t,l]}),r[1]=s,r[2]=l,r[3]=n):n=r[3],n}:function({onSelect:e,text:t}){return(0,i.jsxs)(eO.l.Item,{onSelect:e,children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.CommentDiscussionIcon,{})}),t]})},re=(0,r.GV)()?function(e){let t,n,r,s=(0,a.c)(4),{handleCopyCode:l}=e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.CopyIcon,{})}),s[0]=t):t=s[0],s[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(eO.l.TrailingVisual,{children:(0,i.jsx)(iO.U,{keys:"Mod+c"})}),s[1]=n):n=s[1],s[2]!==l?(r=(0,i.jsxs)(eO.l.Item,{onSelect:l,onMouseDown:rt,children:[t,"Copy",n]}),s[2]=l,s[3]=r):r=s[3],r}:function({handleCopyCode:e}){return(0,i.jsxs)(eO.l.Item,{onSelect:e,onMouseDown:e=>{window.getSelection()?.toString()!==""&&e.preventDefault()},children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.CopyIcon,{})}),"Copy",(0,i.jsx)(eO.l.TrailingVisual,{children:(0,i.jsx)(iO.U,{keys:"Mod+c"})})]})};function rt(e){window.getSelection()?.toString()!==""&&e.preventDefault()}let rn=(0,r.GV)()?function(e){let t,n,r,s,l,o=(0,a.c)(17),{currentHunk:d,diffAnchor:c,nextHunk:u,previousHunk:m}=e,f=q();o[0]!==d||o[1]!==u||o[2]!==m?(t={currentHunk:d,nextHunk:u,previousHunk:m},o[0]=d,o[1]=u,o[2]=m,o[3]=t):t=o[3];let{canExpandStartOfHunk:h,canExpandEndOfHunk:g}=iT(t);return h||g||m||u?(o[4]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(eO.l.Divider,{}),o[4]=n):n=o[4],o[5]!==d||o[6]!==f||o[7]!==u||o[8]!==m?(r=f.has(iY.YR.expandLines)?null:(0,i.jsx)(ri,{currentHunk:d,nextHunk:u,previousHunk:m}),o[5]=d,o[6]=f,o[7]=u,o[8]=m,o[9]=r):r=o[9],o[10]!==c||o[11]!==u||o[12]!==m?(s=(0,i.jsx)(rr,{diffAnchor:c,nextHunk:u,previousHunk:m}),o[10]=c,o[11]=u,o[12]=m,o[13]=s):s=o[13],o[14]!==r||o[15]!==s?(l=(0,i.jsxs)(i.Fragment,{children:[n,r,s]}),o[14]=r,o[15]=s,o[16]=l):l=o[16],l):null}:function({currentHunk:e,diffAnchor:t,nextHunk:n,previousHunk:r}){let a=q(),{canExpandStartOfHunk:s,canExpandEndOfHunk:l}=iT({currentHunk:e,nextHunk:n,previousHunk:r});return s||l||r||n?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eO.l.Divider,{}),a.has(iY.YR.expandLines)?null:(0,i.jsx)(ri,{currentHunk:e,nextHunk:n,previousHunk:r}),(0,i.jsx)(rr,{diffAnchor:t,nextHunk:n,previousHunk:r})]}):null},ri=(0,r.GV)()?function(e){let t,n,r,s,l=(0,a.c)(13),{currentHunk:o,nextHunk:d,previousHunk:u}=e;l[0]!==o||l[1]!==d||l[2]!==u?(t={currentHunk:o,nextHunk:d,previousHunk:u},l[0]=o,l[1]=d,l[2]=u,l[3]=t):t=l[3];let{canExpandStartOfHunk:m,expandEndOfHunk:f,expandStartOfHunk:h,canExpandEndOfHunk:g}=iT(t);return l[4]!==m||l[5]!==h?(n=m&&(0,i.jsxs)(eO.l.Item,{onSelect:h,children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.FoldUpIcon,{})}),"Expand above"]}),l[4]=m,l[5]=h,l[6]=n):n=l[6],l[7]!==g||l[8]!==f?(r=g&&(0,i.jsxs)(eO.l.Item,{onSelect:f,children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.FoldDownIcon,{})}),"Expand below"]}),l[7]=g,l[8]=f,l[9]=r):r=l[9],l[10]!==n||l[11]!==r?(s=(0,i.jsxs)(i.Fragment,{children:[n,r]}),l[10]=n,l[11]=r,l[12]=s):s=l[12],s}:function({currentHunk:e,nextHunk:t,previousHunk:n}){let{canExpandStartOfHunk:r,expandEndOfHunk:a,expandStartOfHunk:s,canExpandEndOfHunk:l}=iT({currentHunk:e,nextHunk:t,previousHunk:n});return(0,i.jsxs)(i.Fragment,{children:[r&&(0,i.jsxs)(eO.l.Item,{onSelect:s,children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.FoldUpIcon,{})}),"Expand above"]}),l&&(0,i.jsxs)(eO.l.Item,{onSelect:a,children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.FoldDownIcon,{})}),"Expand below"]})]})},rr=(0,r.GV)()?function(e){let t,n,r,s,l,o=(0,a.c)(13),{diffAnchor:d,nextHunk:u,previousHunk:m}=e,f=!!m,h=!!u;o[0]!==d?(t=()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${d}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"PageDown"}))})},o[0]=d,o[1]=t):t=o[1];let g=t;o[2]!==d?(n=()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${d}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"PageUp"}))})},o[2]=d,o[3]=n):n=o[3];let p=n;return o[4]!==g||o[5]!==h?(r=h?(0,i.jsxs)(eO.l.Item,{"aria-keyshortcuts":"PageDown",onSelect:g,children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.MoveToBottomIcon,{})}),"Go to next hunk",(0,i.jsx)(eO.l.TrailingVisual,{children:"Page Down"})]}):null,o[4]=g,o[5]=h,o[6]=r):r=o[6],o[7]!==p||o[8]!==f?(s=f?(0,i.jsxs)(eO.l.Item,{"aria-keyshortcuts":"PageUp",onSelect:p,children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.MoveToTopIcon,{})}),"Go to previous hunk",(0,i.jsx)(eO.l.TrailingVisual,{children:"Page Up"})]}):null,o[7]=p,o[8]=f,o[9]=s):s=o[9],o[10]!==r||o[11]!==s?(l=(0,i.jsxs)(i.Fragment,{children:[r,s]}),o[10]=r,o[11]=s,o[12]=l):l=o[12],l}:function({diffAnchor:e,nextHunk:t,previousHunk:n}){return(0,i.jsxs)(i.Fragment,{children:[t?(0,i.jsxs)(eO.l.Item,{"aria-keyshortcuts":"PageDown",onSelect:()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${e}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"PageDown"}))})},children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.MoveToBottomIcon,{})}),"Go to next hunk",(0,i.jsx)(eO.l.TrailingVisual,{children:"Page Down"})]}):null,n?(0,i.jsxs)(eO.l.Item,{"aria-keyshortcuts":"PageUp",onSelect:()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${e}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"PageUp"}))})},children:[(0,i.jsx)(eO.l.LeadingVisual,{children:(0,i.jsx)(c.MoveToTopIcon,{})}),"Go to previous hunk",(0,i.jsx)(eO.l.TrailingVisual,{children:"Page Up"})]}):null]})};try{i0.displayName||(i0.displayName="CellContextMenu")}catch{}try{i1.displayName||(i1.displayName="CopyAnchorLink")}catch{}try{i4.displayName||(i4.displayName="SelectAllListItem")}catch{}try{i6.displayName||(i6.displayName="MarkerListItems")}catch{}try{i5.displayName||(i5.displayName="ViewMarkerListItems")}catch{}try{i7.displayName||(i7.displayName="SplitDiffMarkersListItems")}catch{}try{i8.displayName||(i8.displayName="UnifiedDiffMarkerListItem")}catch{}try{i9.displayName||(i9.displayName="MarkerListItem")}catch{}try{re.displayName||(re.displayName="CopyContentListItems")}catch{}try{rn.displayName||(rn.displayName="HunkListItems")}catch{}try{ri.displayName||(ri.displayName="ExpandHunksListItems")}catch{}try{rr.displayName||(rr.displayName="JumpToHunkListItems")}catch{}var ra=n(17998);let rs="InProgressCommentIndicator-module__statusAvatarBackground--xzHl8",rl="InProgressCommentIndicator-module__statusAvatar--BNNHX",ro=(0,r.GV)()?function(e){let t,n=(0,a.c)(4),{authorAvatarUrl:r,authorLogin:s,lineSpacingPreference:l}=e,o="compact"===l?18:20,d=`${s}'s avatar image with pending indicator`;return n[0]!==r||n[1]!==o||n[2]!==d?(t=(0,i.jsx)(ra.k,{altText:d,icon:c.DotFillIcon,iconColor:"var(--fgColor-attention, var(--color-attention-fg))",square:!1,size:o,src:r,backgroundClassName:rs,className:rl}),n[0]=r,n[1]=o,n[2]=d,n[3]=t):t=n[3],t}:function({authorAvatarUrl:e,authorLogin:t,lineSpacingPreference:n}){return(0,i.jsx)(ra.k,{altText:`${t}'s avatar image with pending indicator`,icon:c.DotFillIcon,iconColor:"var(--fgColor-attention, var(--color-attention-fg))",square:!1,size:"compact"===n?18:20,src:e,backgroundClassName:rs,className:rl})};try{ro.displayName||(ro.displayName="InProgressCommentIndicator")}catch{}let rd="ActionBar-module__action-bar-position--cMcOj",rc="ActionBar-module__addCommentButton--gIYSg",ru="ActionBar-module__addCommentButtonDraftCompact--HKIKU",rm="ActionBar-module__addCommentButtonDraftRelaxed--_qJPM",rf="ActionBar-module__addCommentButtonNew--j1kFj",rh="ActionBar-module__actionBarArrowSizing--L93H4",rg="ActionBar-module__actionBarHeight--wiyuB",rp="ActionBar-module__actionBarStartCommentWidth--TTHf8",rb="ActionBar-module__action-bar-button-group--G1uFN";var rv=n(85933),rx=n(82518);let rC=(0,l.forwardRef)(function({annotations:e,authorAvatarUrl:t,authorLogin:n,cellId:r,cellRef:a,copilotChatReference:s,currentHunk:o,diffAnchor:d,diffLine:u,enterDialogMode:m,hasDraftComment:f,handleCopyCode:h,isLeftSide:g,isSplit:p,nextHunk:b,onMouseDownAddCommentButton:x,onMouseLeaveAddCommentButton:C,previousHunk:y,shouldDisplayCollapseComments:L,shouldDisplayMinimizedComments:S,showStartConversation:N,threads:j,toggleViewingMarkers:D,viewerData:w},I){let k=(0,l.useRef)(null),A=(0,l.useRef)(null),{lineSpacingPreference:E,commentsPreference:R}=w,_=(0,l.useRef)(null),{sendAnalyticsEvent:T}=(0,tq.s)(),O=k.current?k:A;(0,iw.T)(I,O);let M=j.reduce((e,t)=>e+(t.commentsData?.comments.length??0),0),$=e.length,{isActionBarFocused:P,handleActionBarBlur:F,handleActionBarFocusCapture:G,handleActionBarKeydownCapture:V}=iD({cellRef:a}),{isContextMenuOpen:H,anyMenuOpen:U,toggleContextMenu:K,toggleContextMenuFromActionBar:B}=iN({cellId:r,actionBarRef:_}),{startNewConversation:q,startNewConversationWithSuggestedChange:z}=ij({cellId:r,onOpenDialog:m}),W=(0,l.useCallback)(e=>{(0,rv.X)()?.registerCallback({event:e.nativeEvent,cb:e=>{T("diff-lines.inp_interaction","CELL_ADD_COMMENT_BUTTON",{latency:e.latency}),(0,rx.au)({name:"PRS_COMMENT_BOX_INP",value:e.latency})}}),e.stopPropagation(),q()},[q,T]),X=M+$>0&&R===ig.sI.Collapsed,Z={onBlur:F,onFocusCapture:G,onKeyDownCapture:V},Q=(0,l.useCallback)(t=>{(1===j.length||1===e.length)&&t.preventDefault(),D?.()},[e.length,j.length,D]);return(0,i.jsxs)(i.Fragment,{children:[N&&(0,i.jsx)("div",{"aria-hidden":!P,className:(0,v.$)("d-flex","flex-row",rc),children:(0,i.jsx)(i.Fragment,{children:f?(0,i.jsx)(eI.Q,{"aria-label":"Continue comment in progress",size:"small",className:(0,v.$)("py-0","compact"===E?ru:rm,rg),onClick:q,...Z,children:(0,i.jsx)(ro,{lineSpacingPreference:E,authorAvatarUrl:t,authorLogin:n})}):(0,i.jsx)(eI.Q,{icon:c.PlusIcon,"aria-label":"Add comment",ref:A,size:"small","data-add-comment-button":!0,className:(0,v.$)("fgColor-muted","bgColor-accent-emphasis","borderColor-accent-emphasis","fgColor-onEmphasis","px-0",rf,rg,rp),onClick:W,onMouseDown:x,onMouseLeave:C,...Z})})}),(0,i.jsx)("div",{"aria-hidden":!P,className:(0,v.$)("d-flex","flex-row",rd),children:(0,i.jsxs)(iI.A,{className:rb,...Z,children:[X&&S&&(0,i.jsx)(eI.Q,{ref:k,"aria-expanded":U,"aria-label":"View comments",size:"small",className:(0,v.$)("py-0","px-1",rg),onClick:Q,children:(0,i.jsx)(iR,{threads:j,annotations:e,lineSpacingPreference:E})}),(0,i.jsxs)(eT.W,{anchorRef:_,open:H,onOpenChange:K,children:[(0,i.jsx)(eT.W.Anchor,{children:(0,i.jsx)(eI.Q,{ref:_,"aria-haspopup":"true","aria-label":"More actions",icon:c.TriangleDownIcon,size:"small",className:(0,v.$)("fgColor-muted",rh),onClick:B})}),(0,i.jsx)(eT.W.Overlay,{width:"medium",children:(0,i.jsx)(eO.l,{children:(0,i.jsx)(i0,{threads:j,annotations:e,currentHunk:o,diffAnchor:d,diffLine:u,shouldDisplayCollapseComments:L,copilotChatReference:s,showStartConversation:N,handleCopyCode:h,handleViewMarkersSelection:D,isLeftSide:g,isSplit:p,nextHunk:b,previousHunk:y,startConversationCurrentLine:q,startConversationWithSuggestedChange:z,viewerData:w})})})]})]})})]})});function ry(e,t){let n=t>0,i=e>0;switch(!0){case n&&i:return"Code has comments and alerts. Press enter to view.";case i:return"Code has comments. Press enter to view.";case n:return"Code has alerts. Press enter to view.";default:return""}}rC.displayName="ActionBar";let rL=(0,r.GV)()?function(e){let t,n,r=(0,a.c)(5),{threadCount:s,annotationCount:l}=e;r[0]!==l||r[1]!==s?(t=ry(s,l),r[0]=l,r[1]=s,r[2]=t):t=r[2];let o=t;return o?(r[3]!==o?(n=(0,i.jsx)("span",{className:"sr-only user-select-none",children:o}),r[3]=o,r[4]=n):n=r[4],n):null}:function({threadCount:e,annotationCount:t}){let n=ry(e,t);return n?(0,i.jsx)("span",{className:"sr-only user-select-none",children:n}):null};try{rL.displayName||(rL.displayName="DiffLineScreenReaderSummary")}catch{}let rS="ContentCell-module__comment-indicator--Avv5C",rN="ContentCell-module__in-progress-comment-indicator--Onob7",rj=(0,l.forwardRef)((0,r.GV)()?function(e,t){let n,r,s,o,d,c,u,m,f,h,g,p,b,v,x,C,y,L,S,N,j,D,w,I,k,A,E,R,T=(0,a.c)(63);if(T[0]!==e){let{cellId:t,children:i,className:a,columnIndex:l,diffLine:N,diffAnchor:j,handleDiffCellMouseDown:D,handleExitDialogMode:w,handleHideMarkersFromFocus:I,handleDiffSideCellSelectionBlocking:k,handleStartConversation:A,handleUserClosedMarkersDialog:E,isLeftSide:R,isRowSelected:_,isSplit:O,lineAnchor:M,commentDialogOpen:$,enterDialogMode:P,hasThreads:F,role:G,...V}=e;n=t,r=i,s=a,o=l,c=N,d=j,m=D,h=w,f=k,g=A,p=E,v=R,S=_,x=O,C=M,u=P,b=F,L=G,y=V,T[0]=e,T[1]=n,T[2]=r,T[3]=s,T[4]=o,T[5]=d,T[6]=c,T[7]=u,T[8]=m,T[9]=f,T[10]=h,T[11]=g,T[12]=p,T[13]=b,T[14]=v,T[15]=x,T[16]=C,T[17]=y,T[18]=L,T[19]=S}else n=T[1],r=T[2],s=T[3],o=T[4],d=T[5],c=T[6],u=T[7],m=T[8],f=T[9],h=T[10],g=T[11],p=T[12],b=T[13],v=T[14],x=T[15],C=T[16],y=T[17],L=T[18],S=T[19];let O=void 0!==S&&S,M=c,$=(0,l.useRef)(null),P=K(),{sendAnalyticsEvent:F}=(0,tq.s)();T[20]===Symbol.for("react.memo_cache_sentinel")?(N=()=>$.current,j=[],T[20]=N,T[21]=j):(N=T[20],j=T[21]),(0,l.useImperativeHandle)(t,N,j);let{disableDialogMode:G}=W();T[22]!==d||T[23]!==P||T[24]!==M?(D=()=>{let e=P(),t=(0,_.j2)({line:M,range:e,fileAnchor:d});t&&(0,ip.D)(t)},T[22]=d,T[23]=P,T[24]=M,T[25]=D):D=T[25];let B=D,q=U(),{clearFirstLineSelectionOnDrag:z}=Y();T[26]!==z||T[27]!==q||T[28]!==g||T[29]!==F?(w=e=>{(0,rv.X)()?.registerCallback({event:e.nativeEvent,cb:e=>{F("diff-lines.inp_interaction","CELL_MULTI_SELECT",{latency:e.latency})}});let t=q();t?.shouldStartConversation&&g?.(),z()},T[26]=z,T[27]=q,T[28]=g,T[29]=F,T[30]=w):w=T[30];let X=w;T[31]!==m||T[32]!==f?(I=e=>{e.shiftKey&&e.preventDefault(),m?.(e),f?.(e)},T[31]=m,T[32]=f,T[33]=I):I=T[33];let Z=I;T[34]!==G||T[35]!==h||T[36]!==p?(k=()=>{$.current?.focus(),G(),h?.(),p?.()},T[34]=G,T[35]=h,T[36]=p,T[37]=k):k=T[37];let Q=k,J=V(),ee=H();T[38]!==B||T[39]!==c||T[40]!==u||T[41]!==Q||T[42]!==ee||T[43]!==J||T[44]!==P||T[45]!==g||T[46]!==b||T[47]!==v||T[48]!==x?(A=async e=>{if(e.target===$.current&&(e?.metaKey||e?.ctrlKey)&&"c"===e.key){e.preventDefault();let t=ee();await ib({diffLine:c,diffLines:t,getSelectedDiffLines:J,getSelectedLineRange:P,isSplit:x,isLeftSide:v});return}if(e.target===$.current&&(e?.metaKey||e?.ctrlKey)&&e.altKey&&"y"===e.key)return void B();if($.current?.contains(e.target)&&e?.key==="Escape")return void Q();if($.current?.contains(e.target)&&"true"===e.target.getAttribute("data-exit-dialog-mode-button")&&!e?.shiftKey&&e?.key==="Tab"){e.preventDefault(),$.current?.querySelector('[data-is-first-collapse-button="true"]')?.focus();return}if($.current?.contains(e.target)&&"true"===e.target.getAttribute("data-is-first-collapse-button")&&e?.shiftKey&&e?.key==="Tab"){e.preventDefault(),$.current?.querySelector('[data-exit-dialog-mode-button="true"]')?.focus();return}e.target===$.current&&"Enter"===e.key&&(u?.(),!1===b&&g?.(),e.preventDefault())},T[38]=B,T[39]=c,T[40]=u,T[41]=Q,T[42]=ee,T[43]=J,T[44]=P,T[45]=g,T[46]=b,T[47]=v,T[48]=x,T[49]=A):A=T[49];let et=A,en=`Cell-left:${M.left}-right:${M.right}-leftSide:${v}`,ei=!!O,er=L??"gridcell";T[50]===Symbol.for("react.memo_cache_sentinel")?(E={userSelect:"none",position:"relative"},T[50]=E):E=T[50];let ea=s?`focusable-grid-cell ${s} ${o<3?"left-side":""}`:"focusable-grid-cell";return T[51]!==n||T[52]!==r||T[53]!==Z||T[54]!==X||T[55]!==et||T[56]!==en||T[57]!==C||T[58]!==y||T[59]!==er||T[60]!==ea||T[61]!==ei?(R=(0,i.jsx)("td",{ref:$,"data-grid-cell-id":n,"data-line-anchor":C,"data-selected":ei,role:er,style:E,tabIndex:-1,valign:"top",className:ea,onKeyDown:et,onMouseDown:Z,onMouseUp:X,...y,children:r},en),T[51]=n,T[52]=r,T[53]=Z,T[54]=X,T[55]=et,T[56]=en,T[57]=C,T[58]=y,T[59]=er,T[60]=ea,T[61]=ei,T[62]=R):R=T[62],R}:function({cellId:e,children:t,className:n,columnIndex:r,diffLine:a,diffAnchor:s,handleDiffCellMouseDown:o,handleExitDialogMode:d,handleHideMarkersFromFocus:c,handleDiffSideCellSelectionBlocking:u,handleStartConversation:m,handleUserClosedMarkersDialog:f,isLeftSide:h,isRowSelected:g=!1,isSplit:p,lineAnchor:b,commentDialogOpen:v,enterDialogMode:x,hasThreads:C,role:y,...L},S){let N=(0,l.useRef)(null),j=K(),{sendAnalyticsEvent:D}=(0,tq.s)();(0,l.useImperativeHandle)(S,()=>N.current,[]);let{disableDialogMode:w}=W(),I=(0,l.useCallback)(()=>{let e=j(),t=(0,_.j2)({line:a,range:e,fileAnchor:s});t&&(0,ip.D)(t)},[s,j,a]),k=U(),{clearFirstLineSelectionOnDrag:A}=Y(),E=(0,l.useCallback)(e=>{(0,rv.X)()?.registerCallback({event:e.nativeEvent,cb:e=>{D("diff-lines.inp_interaction","CELL_MULTI_SELECT",{latency:e.latency})}});let t=k();t?.shouldStartConversation&&m?.(),A()},[A,k,m,D]),R=(0,l.useCallback)(e=>{e.shiftKey&&e.preventDefault(),o?.(e),u?.(e)},[o,u]),T=(0,l.useCallback)(()=>{N.current?.focus(),w(),d?.(),f?.()},[w,d,f]),O=V(),M=H(),$=(0,l.useCallback)(async e=>{if(e.target===N.current&&(e?.metaKey||e?.ctrlKey)&&"c"===e.key){e.preventDefault();let t=M();await ib({diffLine:a,diffLines:t,getSelectedDiffLines:O,getSelectedLineRange:j,isSplit:p,isLeftSide:h});return}if(e.target===N.current&&(e?.metaKey||e?.ctrlKey)&&e.altKey&&"y"===e.key)return void I();if(N.current?.contains(e.target)&&e?.key==="Escape")return void T();if(N.current?.contains(e.target)&&"true"===e.target.getAttribute("data-exit-dialog-mode-button")&&!e?.shiftKey&&e?.key==="Tab"){e.preventDefault(),N.current?.querySelector('[data-is-first-collapse-button="true"]')?.focus();return}if(N.current?.contains(e.target)&&"true"===e.target.getAttribute("data-is-first-collapse-button")&&e?.shiftKey&&e?.key==="Tab"){e.preventDefault(),N.current?.querySelector('[data-exit-dialog-mode-button="true"]')?.focus();return}e.target===N.current&&"Enter"===e.key&&(x?.(),!1===C&&m?.(),e.preventDefault())},[M,a,O,j,p,h,I,T,x,C,m]),P=`Cell-left:${a.left}-right:${a.right}-leftSide:${h}`;return(0,i.jsx)("td",{ref:N,"data-grid-cell-id":e,"data-line-anchor":b,"data-selected":!!g,role:y??"gridcell",style:{userSelect:"none",position:"relative"},tabIndex:-1,valign:"top",className:n?`focusable-grid-cell ${n} ${r<3?"left-side":""}`:"focusable-grid-cell",onKeyDown:$,onMouseDown:R,onMouseUp:E,...L,children:t},P)});try{rj.displayName||(rj.displayName="Cell")}catch{}let rD=new Set,rw=!1,rI=e=>{let t=e.target instanceof Node?e.target:null;for(let e of rD){let{element:n,shouldIgnore:i,onPointerExit:r}=e;if(!n.isConnected){rD.delete(e);continue}if(t&&n.contains(t)){e.pendingExit=!1;continue}e.pendingExit=!0,i?.()||(e.pendingExit=!1,r())}0===rD.size&&rk()},rk=()=>{rw&&p.XC&&!(rD.size>0)&&(p.XC.removeEventListener("pointermove",rI),rw=!1)};function rA(e){let{element:t}=e;if(!t)return()=>{};let n={...e,pendingExit:!1};return rD.add(n),!rw&&p.XC&&(p.XC.addEventListener("pointermove",rI),rw=!0),()=>{rD.delete(n),rk()}}let rE=(0,l.forwardRef)((0,r.GV)()?function(e,t){let n,r,s,o,d,u,m,f,h,g,b,C,y,L,S,N,j,D,w,k,A,E,R,M,$,P,F,G,B,q,X,Z,Q,J,ee,en,er,ea,es,el,eo,ed,ec,eu,em,ef,eh,eg,ep,eb,ev,ex,eC,ey=(0,a.c)(274),{annotationsAtPosition:eS,columnIndex:eN,commentsPreference:ej,copilotChatReference:eD,currentHunk:ew,diffAnchor:eI,diffLine:ek,dispatchMarkersStatus:eA,filePath:eE,handleDiffSideCellSelectionBlocking:eR,isLeftSide:e_,isRowSelected:eT,isSplit:eO,lineAnchor:eM,markersStatus:e$,nextHunk:eP,previousHunk:eF,rowId:eG,subjectId:eV,threadsAtPosition:eH,viewerData:eK}=e;ey[0]!==ek.html||ey[1]!==ek.type?(n=(0,_.x_)(ek.html,ek.type),ey[0]=ek.html,ey[1]=ek.type,ey[2]=n):n=ey[2];let[eB,eq]=n;ey[3]!==eq?(r=eq&&["+","-"].includes(eq),ey[3]=eq,ey[4]=r):r=ey[4];let ez=r,{isActionBarVisible:eW,hideActionBar:eZ,anyMenuOpen:eQ}=iS(),eJ=(0,eU.u)("move_new_comments_ui"),eY=e_?"LEFT":"RIGHT";ey[5]!==eE||ey[6]!==ek.blobLineNumber||ey[7]!==eV||ey[8]!==eY?(s={diffSide:eY,filePath:eE,line:ek.blobLineNumber,subjectId:eV,fileLevelComment:!1},ey[5]=eE,ey[6]=ek.blobLineNumber,ey[7]=eV,ey[8]=eY,ey[9]=s):s=ey[9];let{hasPersistedComment:e0}=(0,x.L)(s);ey[10]!==ej||ey[11]!==eK?(o={...eK,commentsPreference:ej},ey[10]=ej,ey[11]=eK,ey[12]=o):o=ey[12];let e1=o;ey[13]!==eN||ey[14]!==eG?(d=(0,_.u6)(eG,eN),ey[13]=eN,ey[14]=eG,ey[15]=d):d=ey[15];let e2=d,e3=z(e2),{disableDialogMode:e4}=W(),e6=e_?"LEFT":"RIGHT",e5="RIGHT"===e6?ek.right:ek.left;ey[16]!==e5||ey[17]!==e6?(u=(0,_.oH)(e5,e6),ey[16]=e5,ey[17]=e6,ey[18]=u):u=ey[18];let e7=u,e8=eH.length,e9=eS.length,te=(0,l.useRef)(null),tt=(0,l.useRef)(null);(ey[19]===Symbol.for("react.memo_cache_sentinel")?(m=()=>tt.current,f=[],ey[19]=m,ey[20]=f):(m=ey[19],f=ey[20]),(0,l.useImperativeHandle)(t,m,f),ey[21]!==e9||ey[22]!==ej||ey[23]!==e8)?(h=0!==e8+e9,g=(0,_.S4)({hasThreads:h&&ej===ig.sI.Collapsed}),ey[21]=e9,ey[22]=ej,ey[23]=e8,ey[24]=h,ey[25]=g):(h=ey[24],g=ey[25]);let tn=g;ey[26]===Symbol.for("react.memo_cache_sentinel")?(b={cellRef:tt},ey[26]=b):b=ey[26];let{handleCellBlur:ti,handleCellFocus:tr,handleCellMouseEnter:ta,handleCellMouseLeave:ts}=iD(b);ey[27]!==eQ||ey[28]!==eZ||ey[29]!==eW?(C=()=>{if(eW&&tt.current)return rA({element:tt.current,shouldIgnore:()=>{let e,t;return eQ||(e=p.XC?.activeElement,!!(t=tt.current)&&!!e&&(t===e||t.contains(e)))},onPointerExit:eZ})},y=[eQ,eZ,eW],ey[27]=eQ,ey[28]=eZ,ey[29]=eW,ey[30]=C,ey[31]=y):(C=ey[30],y=ey[31]),(0,l.useEffect)(C,y);let tl=(0,l.useRef)(null),to=is(e2,tt,eA),td=H(),tc=V(),tu=ei(),tm=K(),tf=(0,eU.u)("cotd_ui");ey[32]!==e4||ey[33]!==eA?(L=e=>{(void 0===e||e)&&requestAnimationFrame(()=>tt.current?.focus()),e4(),eA("USER_MINIMIZED_MARKERS")},ey[32]=e4,ey[33]=eA,ey[34]=L):L=ey[34];let th=L;ey[35]!==th||ey[36]!==ej||ey[37]!==to||ey[38]!==e$.showMarkers?(S=()=>{ej===ig.sI.Collapsed&&e$.showMarkers?th():to()},ey[35]=th,ey[36]=ej,ey[37]=to,ey[38]=e$.showMarkers,ey[39]=S):S=ey[39];let tg=S;ey[40]!==e2?(N={cellId:e2,actionBarRef:te},ey[40]=e2,ey[41]=N):N=ey[41];let{closeMarkerListDialog:tp,isContextMenuOpen:tb}=iN(N);ey[42]!==eI||ey[43]!==to||ey[44]!==eE||ey[45]!==tm||ey[46]!==eZ||ey[47]!==e_||ey[48]!==ek.blobLineNumber||ey[49]!==eK.shouldDisplayComments?(j=()=>{to(),eK.shouldDisplayComments||eZ();let e=tm();e||(e={startLineNumber:ek.blobLineNumber,endLineNumber:ek.blobLineNumber,startOrientation:e_?"left":"right",endOrientation:e_?"left":"right",diffAnchor:eI});let t=new O.L(e,eE);p.cg?.dispatchEvent(t)},ey[42]=eI,ey[43]=to,ey[44]=eE,ey[45]=tm,ey[46]=eZ,ey[47]=e_,ey[48]=ek.blobLineNumber,ey[49]=eK.shouldDisplayComments,ey[50]=j):j=ey[50];let tv=j;ey[51]!==e2||ey[52]!==tv?(D={cellId:e2,onOpenDialog:tv},ey[51]=e2,ey[52]=tv,ey[53]=D):D=ey[53];let{isNewConversationDialogOpen:tx,shouldStartNewConversationWithSuggestedChange:tC,startNewConversation:ty,closeNewConversation:tL}=ij(D);e:{if(!eW){w=!1;break e}if(!eK.shouldDisplayComments)if(tf){let e;ey[54]!==ek?(e=(0,_.Po)(ek),ey[54]=ek,ey[55]=e):e=ey[55],w=!e;break e}else{let e;ey[56]!==tc||ey[57]!==ek?(e=(0,_.a1)(ek,(0,_.Mk)(tc())),ey[56]=tc,ey[57]=ek,ey[58]=e):e=ey[58],w=e;break e}if(tx||!eK.viewerCanComment){w=!1;break e}if(tf){let e;ey[59]!==ek?(e=(0,_.Po)(ek),ey[59]=ek,ey[60]=e):e=ey[60],w=!e}else{let e;ey[61]!==tc||ey[62]!==ek?(e=(0,_.a1)(ek,(0,_.Mk)(tc())),ey[61]=tc,ey[62]=ek,ey[63]=e):e=ey[63],w=e}}let tS=w,{baseOid:tN,headOid:tj}=(0,I.E4)(),{mutate:tD}=t6(),{effectiveRange:tw}=(0,I.L3)(),{newTreeEntry:tI,oldTreeEntry:tk}=et();ey[64]!==tf||ey[65]!==tD||ey[66]!==tw||ey[67]!==tj||ey[68]!==to||ey[69]!==eE||ey[70]!==tm||ey[71]!==e_||ey[72]!==eT||ey[73]!==ek||ey[74]!==tI||ey[75]!==tk||ey[76]!==tN?(k=e=>{let{onCompleted:t,onError:n,submitBatch:i,text:r}=e;if(!ek)return;let a=tm();if(tf){let e=new ReviewCommentFactory({filePath:eE,newTreeEntry:tI,oldTreeEntry:tk,effectiveDiffRange:tw,submitBatch:i,text:r});tD(a&&nd(eT,a)?e.multilineRequestData(a):e.lineRequestData(ek,e_),{onError:n,onSuccess:e=>{t?.(e.thread.id,e.comment?.databaseId),to()}})}else{let e,s,l=!!a&&a.startLineNumber!==a.endLineNumber,o=ek.blobLineNumber,d=e_&&!(0,_.Ji)(ek)?"left":"right";a&&l&&eT&&(d="left"===a.endOrientation?"left":"right",s="left"===a.startOrientation?"left":"right",o=a.endLineNumber,e=a.startLineNumber),tD({text:r,line:o,path:eE,side:d,startSide:s,submitBatch:i,startLine:e,comparisonEndOid:tj,comparisonStartOid:tN},{onError:n,onSuccess:e=>{t?.(e.thread.id,e.comment?.databaseId),to()}})}},ey[64]=tf,ey[65]=tD,ey[66]=tw,ey[67]=tj,ey[68]=to,ey[69]=eE,ey[70]=tm,ey[71]=e_,ey[72]=eT,ey[73]=ek,ey[74]=tI,ey[75]=tk,ey[76]=tN,ey[77]=k):k=ey[77];let tA=k;ey[78]!==eH.length?(A=()=>{eH.length<=1&&setTimeout(()=>tt.current?.focus())},ey[78]=eH.length,ey[79]=A):A=ey[79];let tE=A;ey[80]!==to||ey[81]!==ty?(E=()=>{to?.(),ty?.()},ey[80]=to,ey[81]=ty,ey[82]=E):E=ey[82];let tR=E;ey[83]!==tu||ey[84]!==tR||ey[85]!==ek||ey[86]!==e7||ey[87]!==eJ?(R=()=>{eJ&&tu(e7,tR,(0,T.bo)(ek))},M=[tu,tR,ek,e7,eJ],ey[83]=tu,ey[84]=tR,ey[85]=ek,ey[86]=e7,ey[87]=eJ,ey[88]=R,ey[89]=M):(R=ey[88],M=ey[89]),(0,l.useEffect)(R,M);let t_=(0,l.useRef)(!0);t:{if(!eK.shouldDisplayComments||!ej){$=!1;break t}if(h&&ej===ig.sI.Collapsed){$=!e$.userMinimized;break t}if(!tx&&!h){$=!1;break t}if(ej===ig.sI.Collapsed&&(tx||e3)||ej===ig.sI.Visible&&(h||tx||e$.showMarkers)){$=!0;break t}$=!1}let tT=$,tO=(0,_.dT)(ek),{addLineToSelection:tM,clearSelectedLines:t$,selectLine:tP}=Y(),tF=U();ey[90]!==ej||ey[91]!==tR||ey[92]!==e0?(P=()=>{e0&&ej===ig.sI.Visible&&tR()},F=[e0,tR,ej],ey[90]=ej,ey[91]=tR,ey[92]=e0,ey[93]=P,ey[94]=F):(P=ey[93],F=ey[94]),(0,l.useEffect)(P,F),ey[95]!==tm||ey[96]!==e_||ey[97]!==ek.left||ey[98]!==ek.right?(G=()=>{let e=tm();return!!e&&("right"===e.endOrientation&&!e_&&e.endLineNumber===ek.right||!!e&&"left"===e.endOrientation&&!!e_&&e.endLineNumber===ek.left)},ey[95]=tm,ey[96]=e_,ey[97]=ek.left,ey[98]=ek.right,ey[99]=G):G=ey[99];let tV=G;ey[100]!==t$||ey[101]!==tV?(B=()=>{tV()||t$()},ey[100]=t$,ey[101]=tV,ey[102]=B):B=ey[102];let tH=B;ey[103]!==tM||ey[104]!==ts||ey[105]!==tV||ey[106]!==e_||ey[107]!==eT||ey[108]!==ek||ey[109]!==tP?(q=e=>{if(1!==e.buttons)return;ts();let t=e_?ek.left:ek.right,n=(0,T.bo)(ek);eT||!t||tV()?tM({lineKey:(0,T.bo)(ek),orientation:e_?"left":"right"},eL):tP({lineKey:n,firstLineSelectionOnDrag:{lineNumber:t,orientation:e_?"left":"right",lineKey:n,shouldStartConversation:!0}},eL)},ey[103]=tM,ey[104]=ts,ey[105]=tV,ey[106]=e_,ey[107]=eT,ey[108]=ek,ey[109]=tP,ey[110]=q):q=ey[110];let tU=q;ey[111]!==tM||ey[112]!==tF||ey[113]!==ta||ey[114]!==e_||ey[115]!==ek?(X=e=>{let t=tF();1===e.buttons&&t&&tM({lineKey:(0,T.bo)(ek),orientation:e_?"left":"right"},eL),ta()},ey[111]=tM,ey[112]=tF,ey[113]=ta,ey[114]=e_,ey[115]=ek,ey[116]=X):X=ey[116];let tK=X;ey[117]!==tm||ey[118]!==tF||ey[119]!==ts||ey[120]!==eZ||ey[121]!==tb||ey[122]!==e_||ey[123]!==ek.left||ey[124]!==ek.right||ey[125]!==eK.shouldDisplayComments?(Z=()=>{let e=tF();if(!e){eK.shouldDisplayComments||tb||eZ(),ts();return}let t=tm(),n=t?.startOrientation==="right"&&"right"===e.orientation&&!e_&&ek.right===e.lineNumber,i=t?.startOrientation==="left"&&"left"===e.orientation&&e_&&ek.left===e.lineNumber;n||i||ts()},ey[117]=tm,ey[118]=tF,ey[119]=ts,ey[120]=eZ,ey[121]=tb,ey[122]=e_,ey[123]=ek.left,ey[124]=ek.right,ey[125]=eK.shouldDisplayComments,ey[126]=Z):Z=ey[126];let tB=Z;ey[127]!==eA?(Q=()=>{eA("USER_EXITED_MARKERS_DIALOG")},ey[127]=eA,ey[128]=Q):Q=ey[128];let tq=Q;ey[129]!==eA?(J=()=>{eA("USER_MINIMIZED_MARKERS")},ey[129]=eA,ey[130]=J):J=ey[130];let tz=J;ey[131]!==th||ey[132]!==tL?(ee=e=>{th(void 0===e||e),tL()},ey[131]=th,ey[132]=tL,ey[133]=ee):ee=ey[133];let tW=ee;ey[134]!==ek||ey[135]!==td||ey[136]!==tc||ey[137]!==tm||ey[138]!==e_||ey[139]!==eO?(en=async()=>{let e=td();await ib({diffLine:ek,diffLines:e,getSelectedDiffLines:tc,getSelectedLineRange:tm,isSplit:eO,isLeftSide:e_})},ey[134]=ek,ey[135]=td,ey[136]=tc,ey[137]=tm,ey[138]=e_,ey[139]=eO,ey[140]=en):en=ey[140];let tX=en,tZ=`ContentCell-left:${ek.left}-right:${ek.right}-leftSide:${e_}`,tQ=`inline-dialog-heading-${(0,l.useId)()}`;n:{let e;if(!eT){er=ek.blobLineNumber;break n}ey[141]!==tm?(e=tm(),ey[141]=tm,ey[142]=e):e=ey[142];let t=e;er=t?.endLineNumber??ek.blobLineNumber}let tJ=er;i:{let e;if(!eT){ea=void 0;break i}ey[143]!==tm?(e=tm(),ey[143]=tm,ey[144]=e):e=ey[144];let t=e;ea=t?.startLineNumber}let tY=ea,t0=`diff-text-cell ${e_?"left-side-diff-cell":"right-side-diff-cell"} ${tO?"pt-4":""}`,t1=e_&&"HUNK"!==ek.type;ey[145]!==t0||ey[146]!==t1?(es=(0,v.$)(t0,{"border-right":t1}),ey[145]=t0,ey[146]=t1,ey[147]=es):es=ey[147],ey[148]!==eT||ey[149]!==ek.type?(el=(0,_.Yf)(ek.type,!1,eT),ey[148]=eT,ey[149]=ek.type,ey[150]=el):el=ey[150],ey[151]!==tn||ey[152]!==el?(eo={backgroundColor:el,paddingRight:tn},ey[151]=tn,ey[152]=el,ey[153]=eo):eo=ey[153];let t2=e3?tQ:void 0,t3=e3?"dialog":"gridcell";ey[154]!==tQ||ey[155]!==e3?(ed=e3&&(0,i.jsx)("h1",{id:tQ,className:"sr-only",children:"Comment view"}),ey[154]=tQ,ey[155]=e3,ey[156]=ed):ed=ey[156];let t4="ADDITION"===ek.type,t5="DELETION"===ek.type;ey[157]!==t4||ey[158]!==t5?(ec=(0,v.$)("diff-text syntax-highlighted-line",{addition:t4,deletion:t5}),ey[157]=t4,ey[158]=t5,ey[159]=ec):ec=ey[159],ey[160]!==eq||ey[161]!==ez?(eu=ez&&(0,i.jsx)("span",{className:"diff-text-marker",children:eq}),ey[160]=eq,ey[161]=ez,ey[162]=eu):eu=ey[162];let t7="HUNK"===ek.type;return ey[163]!==t7?(em=(0,v.$)("diff-text-inner",{"color-fg-muted":t7}),ey[163]=t7,ey[164]=em):em=ey[164],ey[165]!==eB||ey[166]!==em?(ef=(0,i.jsx)(eX.$6,{html:eB,className:em}),ey[165]=eB,ey[166]=em,ey[167]=ef):ef=ey[167],ey[168]!==ec||ey[169]!==eu||ey[170]!==ef?(eh=(0,i.jsxs)("code",{className:ec,children:[eu,ef]}),ey[168]=ec,ey[169]=eu,ey[170]=ef,ey[171]=eh):eh=ey[171],ey[172]!==ek.displayNoNewLineWarning?(eg=ek.displayNoNewLineWarning&&(0,i.jsx)(c.NoEntryIcon,{size:16,className:"fgColor-danger"}),ey[172]=ek.displayNoNewLineWarning,ey[173]=eg):eg=ey[173],ey[174]!==eS||ey[175]!==e2||ey[176]!==eD||ey[177]!==ew||ey[178]!==eI||ey[179]!==ek||ey[180]!==tm||ey[181]!==tX||ey[182]!==tH||ey[183]!==tU||ey[184]!==e0||ey[185]!==eW||ey[186]!==e_||ey[187]!==eO||ey[188]!==ek.isLastSelected||ey[189]!==ek.left||ey[190]!==ek.right||ey[191]!==e$.showMarkers||ey[192]!==eP||ey[193]!==tv||ey[194]!==eF||ey[195]!==tS||ey[196]!==eH||ey[197]!==tg||ey[198]!==eK.avatarUrl||ey[199]!==eK.login||ey[200]!==eK.shouldDisplayComments||ey[201]!==e1?(ep=(eW||ek.isLastSelected&&e_&&tm()?.endOrientation==="left"&&ek.left===tm()?.endLineNumber||!e_&&tm()?.endOrientation==="right"&&ek.right===tm()?.endLineNumber)&&(0,i.jsx)(rC,{authorAvatarUrl:eK.avatarUrl,authorLogin:eK.login,ref:te,cellId:e2,cellRef:tt,copilotChatReference:eD,currentHunk:ew,diffAnchor:eI,diffLine:ek,threads:eH,annotations:eS,enterDialogMode:tv,handleCopyCode:tX,hasDraftComment:e0,isLeftSide:e_,isSplit:eO,nextHunk:eP,onMouseDownAddCommentButton:tH,onMouseLeaveAddCommentButton:tU,previousHunk:eF,showStartConversation:tS,shouldDisplayMinimizedComments:eK.shouldDisplayComments,shouldDisplayCollapseComments:e$.showMarkers,toggleViewingMarkers:tg,viewerData:e1}),ey[174]=eS,ey[175]=e2,ey[176]=eD,ey[177]=ew,ey[178]=eI,ey[179]=ek,ey[180]=tm,ey[181]=tX,ey[182]=tH,ey[183]=tU,ey[184]=e0,ey[185]=eW,ey[186]=e_,ey[187]=eO,ey[188]=ek.isLastSelected,ey[189]=ek.left,ey[190]=ek.right,ey[191]=e$.showMarkers,ey[192]=eP,ey[193]=tv,ey[194]=eF,ey[195]=tS,ey[196]=eH,ey[197]=tg,ey[198]=eK.avatarUrl,ey[199]=eK.login,ey[200]=eK.shouldDisplayComments,ey[201]=e1,ey[202]=ep):ep=ey[202],ey[203]!==eS||ey[204]!==e2||ey[205]!==th||ey[206]!==tp||ey[207]!==tn||ey[208]!==ej||ey[209]!==eI||ey[210]!==eA||ey[211]!==eE||ey[212]!==tA||ey[213]!==tE||ey[214]!==e0||ey[215]!==e3||ey[216]!==e_||ey[217]!==tx||ey[218]!==eT||ey[219]!==ek||ey[220]!==e7||ey[221]!==tW||ey[222]!==tC||ey[223]!==tT||ey[224]!==tJ||ey[225]!==tY||ey[226]!==eH||ey[227]!==e1?(eb=tT?(0,i.jsx)(io,{gridCellId:e2,gutterSizeOffset:tn,inlineMarkersRef:tl,cellRef:tt,dispatchMarkersStatus:eA,lineMarkersKey:e7,annotations:eS,batchingEnabled:!0,conversationListThreads:eH,fileAnchor:eI,filePath:eE,onCloseFocusMode:th,isRowSelected:eT,lineType:ek.type,diffLine:ek,shouldStartNewConversationWithSuggestedChange:tC,onCloseConversationList:tp,onDeleteLineComment:tE,viewerData:e1,ghostUser:tG,children:tx&&(0,i.jsx)("div",{className:(0,v.$)(" border rounded-2 color-border-default",(eH.length,"mt-2 mb-1")),children:(0,i.jsx)(nu,{diffLine:ek,diffAnchor:eI,batchingEnabled:!0,filePath:eE,focusOnMount:!(e0&&ej===ig.sI.Visible),isLeftSide:!!e_,isInDialogMode:e3,isOpen:tx,lineNumber:tJ,startLineNumber:tY,shouldStartNewConversationWithSuggestedChange:tC,viewerData:e1,onAddComment:tA,onCloseCommentDialog:tW})})}):null,ey[203]=eS,ey[204]=e2,ey[205]=th,ey[206]=tp,ey[207]=tn,ey[208]=ej,ey[209]=eI,ey[210]=eA,ey[211]=eE,ey[212]=tA,ey[213]=tE,ey[214]=e0,ey[215]=e3,ey[216]=e_,ey[217]=tx,ey[218]=eT,ey[219]=ek,ey[220]=e7,ey[221]=tW,ey[222]=tC,ey[223]=tT,ey[224]=tJ,ey[225]=tY,ey[226]=eH,ey[227]=e1,ey[228]=eb):eb=ey[228],ey[229]!==eS||ey[230]!==ej||ey[231]!==e0||ey[232]!==eW||ey[233]!==eH||ey[234]!==eK.avatarUrl||ey[235]!==eK.lineSpacingPreference||ey[236]!==eK.login||ey[237]!==eK.shouldDisplayComments?(ev=!eW&&ej===ig.sI.Collapsed&&eK.shouldDisplayComments&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{"aria-hidden":"true",style:{left:"compact"===eK.lineSpacingPreference?"-8px":"-9px"},className:(0,v.$)("position-absolute top-0 d-flex user-select-none",rN),children:e0&&(0,i.jsx)(ro,{lineSpacingPreference:eK.lineSpacingPreference,authorAvatarUrl:eK.avatarUrl,authorLogin:eK.login})}),(0,i.jsx)("div",{"aria-hidden":"true",className:(0,v.$)("position-absolute top-0 d-flex user-select-none",rS),children:(0,i.jsx)(iR,{threads:eH,annotations:eS,shouldAnimateRef:t_,lineSpacingPreference:eK.lineSpacingPreference})})]}),ey[229]=eS,ey[230]=ej,ey[231]=e0,ey[232]=eW,ey[233]=eH,ey[234]=eK.avatarUrl,ey[235]=eK.lineSpacingPreference,ey[236]=eK.login,ey[237]=eK.shouldDisplayComments,ey[238]=ev):ev=ey[238],ey[239]!==e9||ey[240]!==e8?(ex=(0,i.jsx)(rL,{annotationCount:e9,threadCount:e8}),ey[239]=e9,ey[240]=e8,ey[241]=ex):ex=ey[241],ey[242]!==e2||ey[243]!==eN||ey[244]!==eI||ey[245]!==ek||ey[246]!==to||ey[247]!==ti||ey[248]!==tr||ey[249]!==eR||ey[250]!==tq||ey[251]!==tK||ey[252]!==tB||ey[253]!==tR||ey[254]!==tz||ey[255]!==h||ey[256]!==e_||ey[257]!==tx||ey[258]!==eT||ey[259]!==eO||ey[260]!==tZ||ey[261]!==eM||ey[262]!==es||ey[263]!==eo||ey[264]!==t2||ey[265]!==t3||ey[266]!==ed||ey[267]!==eh||ey[268]!==eg||ey[269]!==ep||ey[270]!==eb||ey[271]!==ev||ey[272]!==ex?(eC=(0,i.jsxs)(rj,{ref:tt,cellId:e2,columnIndex:eN,commentDialogOpen:tx,diffAnchor:eI,diffLine:ek,enterDialogMode:to,handleDiffSideCellSelectionBlocking:eR,handleExitDialogMode:tq,handleUserClosedMarkersDialog:tz,lineAnchor:eM,handleStartConversation:tR,hasThreads:h,isLeftSide:e_,isRowSelected:eT,isSplit:eO,className:es,style:eo,onBlur:ti,onFocus:tr,onMouseEnter:tK,onMouseLeave:tB,"aria-labelledby":t2,role:t3,children:[ed,eh,eg,ep,eb,ev,ex]},tZ),ey[242]=e2,ey[243]=eN,ey[244]=eI,ey[245]=ek,ey[246]=to,ey[247]=ti,ey[248]=tr,ey[249]=eR,ey[250]=tq,ey[251]=tK,ey[252]=tB,ey[253]=tR,ey[254]=tz,ey[255]=h,ey[256]=e_,ey[257]=tx,ey[258]=eT,ey[259]=eO,ey[260]=tZ,ey[261]=eM,ey[262]=es,ey[263]=eo,ey[264]=t2,ey[265]=t3,ey[266]=ed,ey[267]=eh,ey[268]=eg,ey[269]=ep,ey[270]=eb,ey[271]=ev,ey[272]=ex,ey[273]=eC):eC=ey[273],eC}:function({annotationsAtPosition:e,columnIndex:t,commentsPreference:n,copilotChatReference:r,currentHunk:a,diffAnchor:s,diffLine:o,dispatchMarkersStatus:d,filePath:u,handleDiffSideCellSelectionBlocking:m,isLeftSide:f,isRowSelected:h,isSplit:g,lineAnchor:b,markersStatus:C,nextHunk:y,previousHunk:L,rowId:S,subjectId:N,threadsAtPosition:j,viewerData:D},w){let[k,A]=(0,_.x_)(o.html,o.type),E=A&&["+","-"].includes(A),{isActionBarVisible:R,hideActionBar:M,anyMenuOpen:$}=iS(),P=(0,eU.u)("move_new_comments_ui"),{hasPersistedComment:F}=(0,x.L)({diffSide:f?"LEFT":"RIGHT",filePath:u,line:o.blobLineNumber,subjectId:N,fileLevelComment:!1}),G={...D,commentsPreference:n},B=(0,_.u6)(S,t),q=z(B),{disableDialogMode:X}=W(),Z=f?"LEFT":"RIGHT",Q="RIGHT"===Z?o.right:o.left,J=(0,_.oH)(Q,Z),ee=j.length,en=e.length,er=(0,l.useRef)(null),ea=(0,l.useRef)(null);(0,l.useImperativeHandle)(w,()=>ea.current,[]);let es=0!==ee+en,el=(0,_.S4)({hasThreads:es&&n===ig.sI.Collapsed}),{handleCellBlur:eo,handleCellFocus:ed,handleCellMouseEnter:ec,handleCellMouseLeave:eu}=iD({cellRef:ea});(0,l.useEffect)(()=>{if(R&&ea.current)return rA({element:ea.current,shouldIgnore:()=>{let e,t;return $||(e=p.XC?.activeElement,!!(t=ea.current)&&!!e&&(t===e||t.contains(e)))},onPointerExit:M})},[$,M,R]);let em=(0,l.useRef)(null),ef=is(B,ea,d),eh=H(),eg=V(),ep=ei(),eb=K(),ev=(0,eU.u)("cotd_ui"),ex=(0,l.useCallback)((e=!0)=>{e&&requestAnimationFrame(()=>ea.current?.focus()),X(),d("USER_MINIMIZED_MARKERS")},[X,d]),eC=(0,l.useCallback)(()=>{n===ig.sI.Collapsed&&C.showMarkers?ex():ef()},[ex,ef,C.showMarkers,n]),{closeMarkerListDialog:ey,isContextMenuOpen:eS}=iN({cellId:B,actionBarRef:er}),eN=(0,l.useCallback)(()=>{ef(),D.shouldDisplayComments||M();let e=eb();e||(e={startLineNumber:o.blobLineNumber,endLineNumber:o.blobLineNumber,startOrientation:f?"left":"right",endOrientation:f?"left":"right",diffAnchor:s});let t=new O.L(e,u);p.cg?.dispatchEvent(t)},[ef,D.shouldDisplayComments,eb,u,M,o.blobLineNumber,f,s]),{isNewConversationDialogOpen:ej,shouldStartNewConversationWithSuggestedChange:eD,startNewConversation:ew,closeNewConversation:eI}=ij({cellId:B,onOpenDialog:eN}),ek=(0,l.useMemo)(()=>{if(!R)return!1;if(!D.shouldDisplayComments)if(ev)return!(0,_.Po)(o);else return(0,_.a1)(o,(0,_.Mk)(eg()));return!ej&&!!D.viewerCanComment&&(ev?!(0,_.Po)(o):(0,_.a1)(o,(0,_.Mk)(eg())))},[R,ej,D.shouldDisplayComments,D.viewerCanComment,ev,o,eg]),{baseOid:eA,headOid:eE}=(0,I.E4)(),{mutate:eR}=t6(),{effectiveRange:e_}=(0,I.L3)(),{newTreeEntry:eT,oldTreeEntry:eO}=et(),eM=(0,l.useCallback)(()=>{ef?.(),ew?.()},[ef,ew]);(0,l.useEffect)(()=>{P&&ep(J,eM,(0,T.bo)(o))},[ep,eM,o,J,P]);let e$=(0,l.useRef)(!0),eP=(0,l.useMemo)(()=>!!D.shouldDisplayComments&&!!n&&(es&&n===ig.sI.Collapsed?!C.userMinimized:(!!ej||!!es)&&(n===ig.sI.Collapsed&&(!!ej||!!q)||n===ig.sI.Visible&&(!!es||!!ej||!!C.showMarkers)||!1)),[es,q,ej,C.showMarkers,C.userMinimized,n,D.shouldDisplayComments]),eF=(0,l.useMemo)(()=>(0,_.dT)(o),[o]),{addLineToSelection:eG,clearSelectedLines:eV,selectLine:eH}=Y(),eK=U();(0,l.useEffect)(()=>{F&&n===ig.sI.Visible&&eM()},[F,eM,n]);let eB=(0,l.useCallback)(()=>{let e=eb();return!!e&&("right"===e.endOrientation&&!f&&e.endLineNumber===o.right||!!e&&"left"===e.endOrientation&&!!f&&e.endLineNumber===o.left)},[eb,f,o.left,o.right]),eq=(0,l.useCallback)(()=>{eB()||eV()},[eV,eB]),ez=(0,l.useCallback)(e=>{if(1!==e.buttons)return;eu();let t=f?o.left:o.right,n=(0,T.bo)(o);h||!t||eB()?eG({lineKey:(0,T.bo)(o),orientation:f?"left":"right"},eL):eH({lineKey:n,firstLineSelectionOnDrag:{lineNumber:t,orientation:f?"left":"right",lineKey:n,shouldStartConversation:!0}},eL)},[eG,eu,eB,f,h,o,eH]),eW=(0,l.useCallback)(e=>{let t=eK();1===e.buttons&&t&&eG({lineKey:(0,T.bo)(o),orientation:f?"left":"right"},eL),ec()},[eG,eK,ec,f,o]),eZ=(0,l.useCallback)(()=>{let e=eK();if(!e){D.shouldDisplayComments||eS||M(),eu();return}let t=eb(),n=t?.startOrientation==="right"&&"right"===e.orientation&&!f&&o.right===e.lineNumber,i=t?.startOrientation==="left"&&"left"===e.orientation&&f&&o.left===e.lineNumber;n||i||eu()},[eK,eb,f,o.right,o.left,D.shouldDisplayComments,eS,eu,M]),eQ=(0,l.useCallback)(()=>{d("USER_EXITED_MARKERS_DIALOG")},[d]),eJ=(0,l.useCallback)(()=>{d("USER_MINIMIZED_MARKERS")},[d]),eY=(0,l.useCallback)((e=!0)=>{ex(e),eI()},[ex,eI]),e0=async()=>{let e=eh();await ib({diffLine:o,diffLines:e,getSelectedDiffLines:eg,getSelectedLineRange:eb,isSplit:g,isLeftSide:f})},e1=`ContentCell-left:${o.left}-right:${o.right}-leftSide:${f}`,e2=`inline-dialog-heading-${(0,l.useId)()}`,e3=(0,l.useMemo)(()=>{if(!h)return o.blobLineNumber;let e=eb();return e?.endLineNumber??o.blobLineNumber},[eb,h,o.blobLineNumber]),e4=(0,l.useMemo)(()=>{if(!h)return;let e=eb();return e?.startLineNumber},[eb,h]);return(0,i.jsxs)(rj,{ref:ea,cellId:B,columnIndex:t,commentDialogOpen:ej,diffAnchor:s,diffLine:o,enterDialogMode:ef,handleDiffSideCellSelectionBlocking:m,handleExitDialogMode:eQ,handleUserClosedMarkersDialog:eJ,lineAnchor:b,handleStartConversation:eM,hasThreads:es,isLeftSide:f,isRowSelected:h,isSplit:g,className:(0,v.$)(`diff-text-cell ${f?"left-side-diff-cell":"right-side-diff-cell"} ${eF?"pt-4":""}`,{"border-right":f&&"HUNK"!==o.type}),style:{backgroundColor:(0,_.Yf)(o.type,!1,h),paddingRight:el},onBlur:eo,onFocus:ed,onMouseEnter:eW,onMouseLeave:eZ,"aria-labelledby":q?e2:void 0,role:q?"dialog":"gridcell",children:[q&&(0,i.jsx)("h1",{id:e2,className:"sr-only",children:"Comment view"}),(0,i.jsxs)("code",{className:(0,v.$)("diff-text syntax-highlighted-line",{addition:"ADDITION"===o.type,deletion:"DELETION"===o.type}),children:[E&&(0,i.jsx)("span",{className:"diff-text-marker",children:A}),(0,i.jsx)(eX.$6,{html:k,className:(0,v.$)("diff-text-inner",{"color-fg-muted":"HUNK"===o.type})})]}),o.displayNoNewLineWarning&&(0,i.jsx)(c.NoEntryIcon,{size:16,className:"fgColor-danger"}),(R||o.isLastSelected&&f&&eb()?.endOrientation==="left"&&o.left===eb()?.endLineNumber||!f&&eb()?.endOrientation==="right"&&o.right===eb()?.endLineNumber)&&(0,i.jsx)(rC,{authorAvatarUrl:D.avatarUrl,authorLogin:D.login,ref:er,cellId:B,cellRef:ea,copilotChatReference:r,currentHunk:a,diffAnchor:s,diffLine:o,threads:j,annotations:e,enterDialogMode:eN,handleCopyCode:e0,hasDraftComment:F,isLeftSide:f,isSplit:g,nextHunk:y,onMouseDownAddCommentButton:eq,onMouseLeaveAddCommentButton:ez,previousHunk:L,showStartConversation:ek,shouldDisplayMinimizedComments:D.shouldDisplayComments,shouldDisplayCollapseComments:C.showMarkers,toggleViewingMarkers:eC,viewerData:G}),eP?(0,i.jsx)(io,{gridCellId:B,gutterSizeOffset:el,inlineMarkersRef:em,cellRef:ea,dispatchMarkersStatus:d,lineMarkersKey:J,annotations:e,batchingEnabled:!0,conversationListThreads:j,fileAnchor:s,filePath:u,onCloseFocusMode:ex,isRowSelected:h,lineType:o.type,diffLine:o,shouldStartNewConversationWithSuggestedChange:eD,onCloseConversationList:ey,onDeleteLineComment:()=>{j.length<=1&&setTimeout(()=>ea.current?.focus())},viewerData:G,ghostUser:tG,children:ej&&(0,i.jsx)("div",{className:(0,v.$)(" border rounded-2 color-border-default",(j.length,"mt-2 mb-1")),children:(0,i.jsx)(nu,{diffLine:o,diffAnchor:s,batchingEnabled:!0,filePath:u,focusOnMount:!(F&&n===ig.sI.Visible),isLeftSide:!!f,isInDialogMode:q,isOpen:ej,lineNumber:e3,startLineNumber:e4,shouldStartNewConversationWithSuggestedChange:eD,viewerData:G,onAddComment:({onCompleted:e,onError:t,submitBatch:n,text:i})=>{if(!o)return;let r=eb();if(ev){let a=new ReviewCommentFactory({filePath:u,newTreeEntry:eT,oldTreeEntry:eO,effectiveDiffRange:e_,submitBatch:n,text:i});eR(r&&nd(h,r)?a.multilineRequestData(r):a.lineRequestData(o,f),{onError:t,onSuccess:t=>{e?.(t.thread.id,t.comment?.databaseId),ef()}})}else{let a,s,l=!!r&&r.startLineNumber!==r.endLineNumber,d=o.blobLineNumber,c=f&&!(0,_.Ji)(o)?"left":"right";r&&l&&h&&(c="left"===r.endOrientation?"left":"right",s="left"===r.startOrientation?"left":"right",d=r.endLineNumber,a=r.startLineNumber),eR({text:i,line:d,path:u,side:c,startSide:s,submitBatch:n,startLine:a,comparisonEndOid:eE,comparisonStartOid:eA},{onError:t,onSuccess:t=>{e?.(t.thread.id,t.comment?.databaseId),ef()}})}},onCloseCommentDialog:eY})})}):null,!R&&n===ig.sI.Collapsed&&D.shouldDisplayComments&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{"aria-hidden":"true",style:{left:"compact"===D.lineSpacingPreference?"-8px":"-9px"},className:(0,v.$)("position-absolute top-0 d-flex user-select-none",rN),children:F&&(0,i.jsx)(ro,{lineSpacingPreference:D.lineSpacingPreference,authorAvatarUrl:D.avatarUrl,authorLogin:D.login})}),(0,i.jsx)("div",{"aria-hidden":"true",className:(0,v.$)("position-absolute top-0 d-flex user-select-none",rS),children:(0,i.jsx)(iR,{threads:j,annotations:e,shouldAnimateRef:e$,lineSpacingPreference:D.lineSpacingPreference})})]}),(0,i.jsx)(rL,{annotationCount:en,threadCount:ee})]},e1)}),rR=(0,l.memo)(rE);try{rE.displayName||(rE.displayName="ContentCellUnmemoized")}catch{}try{rR.displayName||(rR.displayName="ContentCell")}catch{}let r_=["CONTEXT","INJECTED_CONTEXT"];function rT(e,t,n,i){return("CONTEXT"!==e.type||!t||!n)&&i>0}let rO=(0,l.memo)(r$),rM=(0,r.GV)();function r$(e){return rM?function(e){let t,n,r,s,o,d,c,u,m,f,h,g,p,b,x,C,y,L,S,N,j,D,w,I,k,A,E=(0,a.c)(70);if(E[0]!==e){let{children:i,columnIndex:a,diffAnchor:l,diffLine:v,handleDiffSideCellSelectionBlocking:C,isLeftSide:y,isRowSelected:L,isSplit:S,filePath:N,copilotChatReference:j,contentRef:D,contentColumnIndex:w,dispatchMarkersStatus:I,rowId:k,threadsAtPosition:A,annotationsAtPosition:R,..._}=e;n=i,r=a,d=l,c=v,m=C,f=y,h=L,g=S,o=D,s=w,u=I,b=k,x=A,t=R,p=_,E[0]=e,E[1]=t,E[2]=n,E[3]=r,E[4]=s,E[5]=o,E[6]=d,E[7]=c,E[8]=u,E[9]=m,E[10]=f,E[11]=h,E[12]=g,E[13]=p,E[14]=b,E[15]=x}else t=E[1],n=E[2],r=E[3],s=E[4],o=E[5],d=E[6],c=E[7],u=E[8],m=E[9],f=E[10],h=E[11],g=E[12],p=E[13],b=E[14],x=E[15];let R=(0,l.useRef)(null),O=c,M=U(),{addLineToSelection:$}=Y();E[16]!==$||E[17]!==M||E[18]!==f||E[19]!==O?(C=e=>{1!==e.buttons||M()&&$({lineKey:(0,T.bo)(O),orientation:f?"left":"right"},eL)},E[16]=$,E[17]=M,E[18]=f,E[19]=O,E[20]=C):C=E[20];let P=C,{selectLine:F}=Y(),G=K();E[21]!==$||E[22]!==G||E[23]!==f||E[24]!==O||E[25]!==F?(y=e=>{if(G()&&e.shiftKey)return void $({lineKey:(0,T.bo)(O),orientation:f?"left":"right"},eL);let t=f?O.left:O.right;t&&F({lineKey:(0,T.bo)(O),firstLineSelectionOnDrag:{orientation:f?"left":"right",lineNumber:t,shouldStartConversation:!1,lineKey:(0,T.bo)(O)}},eL)},E[21]=$,E[22]=G,E[23]=f,E[24]=O,E[25]=F,E[26]=y):y=E[26];let V=y,H=`LineNumberCell-left:${O.left}-right:${O.right}-leftSide:${f}`;E[27]!==s||E[28]!==b?(L=(0,_.u6)(b,s),E[27]=s,E[28]=b,E[29]=L):L=E[29];let B=L,q=is(B,o,u);E[30]!==B||E[31]!==q?(S={cellId:B,onOpenDialog:q},E[30]=B,E[31]=q,E[32]=S):S=E[32];let{startNewConversation:z}=ij(S);E[33]!==r||E[34]!==b?(N=(0,_.u6)(b,r),E[33]=r,E[34]=b,E[35]=N):N=E[35];let W=N;E[36]!==O.type?(j=(0,v.$)("diff-line-number position-relative",r_.includes(O.type)&&"diff-line-number-neutral"),E[36]=O.type,E[37]=j):j=E[37];let X=!g&&0===r,Z=x.length+t.length;return E[38]!==f||E[39]!==g||E[40]!==O||E[41]!==Z?(D=rT(O,f,g,Z),E[38]=f,E[39]=g,E[40]=O,E[41]=Z,E[42]=D):D=E[42],E[43]!==h||E[44]!==O.type?(w=(0,_.Yf)(O.type,!0,h),E[43]=h,E[44]=O.type,E[45]=w):w=E[45],E[46]!==w?(I={backgroundColor:w,textAlign:"center"},E[46]=w,E[47]=I):I=E[47],E[48]!==n?(k=(0,i.jsx)("code",{children:n}),E[48]=n,E[49]=k):k=E[49],E[50]!==W||E[51]!==r||E[52]!==d||E[53]!==c||E[54]!==q||E[55]!==m||E[56]!==V||E[57]!==P||E[58]!==f||E[59]!==h||E[60]!==g||E[61]!==H||E[62]!==p||E[63]!==z||E[64]!==I||E[65]!==k||E[66]!==j||E[67]!==X||E[68]!==D?(A=(0,i.jsx)(rj,{ref:R,cellId:W,className:j,columnIndex:r,diffAnchor:d,diffLine:c,"data-first-unified-line-number-cell":X,enterDialogMode:q,handleDiffSideCellSelectionBlocking:m,hasThreads:D,style:I,handleDiffCellMouseDown:V,handleStartConversation:z,isLeftSide:f,isRowSelected:h,isSplit:g,onMouseEnter:P,...p,children:k},H),E[50]=W,E[51]=r,E[52]=d,E[53]=c,E[54]=q,E[55]=m,E[56]=V,E[57]=P,E[58]=f,E[59]=h,E[60]=g,E[61]=H,E[62]=p,E[63]=z,E[64]=I,E[65]=k,E[66]=j,E[67]=X,E[68]=D,E[69]=A):A=E[69],A}(e):function({children:e,columnIndex:t,diffAnchor:n,diffLine:r,handleDiffSideCellSelectionBlocking:a,isLeftSide:s,isRowSelected:o,isSplit:d,filePath:c,copilotChatReference:u,contentRef:m,contentColumnIndex:f,dispatchMarkersStatus:h,rowId:g,threadsAtPosition:p,annotationsAtPosition:b,...x}){let C=(0,l.useRef)(null),y=U(),{addLineToSelection:L}=Y(),S=(0,l.useCallback)(e=>{1!==e.buttons||y()&&L({lineKey:(0,T.bo)(r),orientation:s?"left":"right"},eL)},[y,L,r,s]),{selectLine:N}=Y(),j=K(),D=`LineNumberCell-left:${r.left}-right:${r.right}-leftSide:${s}`,w=(0,_.u6)(g,f),I=is(w,m,h),{startNewConversation:k}=ij({cellId:w,onOpenDialog:I}),A=(0,_.u6)(g,t);return(0,i.jsx)(rj,{ref:C,cellId:A,className:(0,v.$)("diff-line-number position-relative",r_.includes(r.type)&&"diff-line-number-neutral"),columnIndex:t,diffAnchor:n,diffLine:r,"data-first-unified-line-number-cell":!d&&0===t,enterDialogMode:I,handleDiffSideCellSelectionBlocking:a,hasThreads:rT(r,s,d,p.length+b.length),style:{backgroundColor:(0,_.Yf)(r.type,!0,o),textAlign:"center"},handleDiffCellMouseDown:e=>{if(j()&&e.shiftKey)return void L({lineKey:(0,T.bo)(r),orientation:s?"left":"right"},eL);let t=s?r.left:r.right;t&&N({lineKey:(0,T.bo)(r),firstLineSelectionOnDrag:{orientation:s?"left":"right",lineNumber:t,shouldStartConversation:!1,lineKey:(0,T.bo)(r)}},eL)},handleStartConversation:k,isLeftSide:s,isRowSelected:o,isSplit:d,onMouseEnter:S,...x,children:(0,i.jsx)("code",{children:e})},D)}(e)}try{rO.displayName||(rO.displayName="LineNumberCell")}catch{}try{r$.displayName||(r$.displayName="LineNumberCellUnmemoized")}catch{}let rP=(0,r.GV)()?function(e){let t,n,r=(0,a.c)(9),{columnIndex:s,diffAnchor:l,diffLine:o,isLeftSide:d,isSplit:c,showRightBorder:u}=e;return r[0]!==u?(t=(0,v.$)("empty-diff-line",{"border-right":u}),r[0]=u,r[1]=t):t=r[1],r[2]!==s||r[3]!==l||r[4]!==o||r[5]!==d||r[6]!==c||r[7]!==t?(n=(0,i.jsx)(rj,{className:t,columnIndex:s,diffAnchor:l,diffLine:o,isLeftSide:d,isSplit:c}),r[2]=s,r[3]=l,r[4]=o,r[5]=d,r[6]=c,r[7]=t,r[8]=n):n=r[8],n}:function({columnIndex:e,diffAnchor:t,diffLine:n,isLeftSide:r,isSplit:a,showRightBorder:s}){return(0,i.jsx)(rj,{className:(0,v.$)("empty-diff-line",{"border-right":s}),columnIndex:e,diffAnchor:t,diffLine:n,isLeftSide:r,isSplit:a})};try{rP.displayName||(rP.displayName="EmptyCell")}catch{}function rF(e,t){switch(t){case"SHOW_MARKERS":return{userMinimized:!1,showMarkers:!0};case"USER_EXPANDED_MARKERS":return{showMarkers:!0,userMinimized:!1};case"USER_MINIMIZED_MARKERS":return{userMinimized:!0,showMarkers:!1};case"USER_EXITED_MARKERS_DIALOG":return{...e,showMarkers:!1}}}let rG=(0,r.GV)()?function(e){let t,n,i,r,s=(0,a.c)(7),o=e===ig.sI.Collapsed;s[0]!==o?(t={userMinimized:o,showMarkers:!1},s[0]=o,s[1]=t):t=s[1];let[d,c]=(0,l.useReducer)(rF,t),u=(0,l.useRef)(e);return s[2]!==e?(n=()=>{u.current!==e&&(u.current=e,e===ig.sI.Visible?c("SHOW_MARKERS"):c("USER_MINIMIZED_MARKERS"))},i=[e,c],s[2]=e,s[3]=n,s[4]=i):(n=s[3],i=s[4]),(0,l.useEffect)(n,i),s[5]!==d?(r=[d,c],s[5]=d,s[6]=r):r=s[6],r}:function(e){let[t,n]=(0,l.useReducer)(rF,{userMinimized:e===ig.sI.Collapsed,showMarkers:!1}),i=(0,l.useRef)(e);return(0,l.useEffect)(()=>{i.current!==e&&(i.current=e,e===ig.sI.Visible?n("SHOW_MARKERS"):n("USER_MINIMIZED_MARKERS"))},[e,n]),[t,n]};var rV=n(87825);let rH=(0,r.GV)()?e=>{let t,n,r,s,o,d,c=(0,a.c)(67),{annotationsAtPosition:u,commentsPreference:m,copilotChatReference:f,currentHunk:h,diffAnchor:g,diffLine:p,filePath:b,lineAnchor:v,handleDiffSideCellSelectionBlocking:x,hasHiddenUnicodeCharacters:C,isLeftSide:y,isRowSelected:L,isSplit:S,nextHunk:N,previousHunk:j,rowId:D,subjectId:w,threadsAtPosition:I,viewerData:k}=e,A=(0,l.useRef)(null),E="ADDITION"!==p.type,R=!S||y,_="DELETION"!==p.type,T=!S||!y;c[0]!==x?(t=()=>{x&&x("left")},c[0]=x,c[1]=t):t=c[1];let O=t;c[2]!==x?(n=()=>{x&&x("right")},c[2]=x,c[3]=n):n=c[3];let M=n,$=S?y?1:3:2,[P,F]=rG(m??ig.sI.Visible);c[4]!==u||c[5]!==$||c[6]!==f||c[7]!==g||c[8]!==p||c[9]!==F||c[10]!==b||c[11]!==M||c[12]!==C||c[13]!==y||c[14]!==L||c[15]!==S||c[16]!==p.left||c[17]!==D||c[18]!==E||c[19]!==R||c[20]!==_||c[21]!==I?(r=R&&(0,i.jsxs)(rO,{threadsAtPosition:I,annotationsAtPosition:u,copilotChatReference:f,columnIndex:0,contentColumnIndex:$,contentRef:A,diffAnchor:g,diffLine:p,dispatchMarkersStatus:F,filePath:b,handleDiffSideCellSelectionBlocking:M,isLeftSide:y,isRowSelected:L,isSplit:S,rowId:D,children:[C&&!_&&(0,i.jsx)(rK,{children:(0,i.jsx)(rV.o,{})}),E&&p.left]}),c[4]=u,c[5]=$,c[6]=f,c[7]=g,c[8]=p,c[9]=F,c[10]=b,c[11]=M,c[12]=C,c[13]=y,c[14]=L,c[15]=S,c[16]=p.left,c[17]=D,c[18]=E,c[19]=R,c[20]=_,c[21]=I,c[22]=r):r=c[22],c[23]!==u||c[24]!==$||c[25]!==f||c[26]!==g||c[27]!==p||c[28]!==F||c[29]!==b||c[30]!==O||c[31]!==C||c[32]!==y||c[33]!==L||c[34]!==S||c[35]!==p.right||c[36]!==D||c[37]!==_||c[38]!==T||c[39]!==I?(s=T&&(0,i.jsxs)(rO,{annotationsAtPosition:u,copilotChatReference:f,columnIndex:S?2:1,contentColumnIndex:$,contentRef:A,diffAnchor:g,diffLine:p,dispatchMarkersStatus:F,filePath:b,handleDiffSideCellSelectionBlocking:O,isLeftSide:y,isRowSelected:L,isSplit:S,rowId:D,threadsAtPosition:I,children:[C&&_&&(0,i.jsx)(rK,{children:(0,i.jsx)(rV.o,{})}),_&&p.right]}),c[23]=u,c[24]=$,c[25]=f,c[26]=g,c[27]=p,c[28]=F,c[29]=b,c[30]=O,c[31]=C,c[32]=y,c[33]=L,c[34]=S,c[35]=p.right,c[36]=D,c[37]=_,c[38]=T,c[39]=I,c[40]=s):s=c[40];let G=y?M:O;return c[41]!==u||c[42]!==m||c[43]!==$||c[44]!==f||c[45]!==h||c[46]!==g||c[47]!==p||c[48]!==F||c[49]!==b||c[50]!==y||c[51]!==L||c[52]!==S||c[53]!==v||c[54]!==P||c[55]!==N||c[56]!==j||c[57]!==D||c[58]!==w||c[59]!==G||c[60]!==I||c[61]!==k?(o=(0,i.jsx)(rR,{annotationsAtPosition:u,commentsPreference:m,copilotChatReference:f,columnIndex:$,currentHunk:h,diffAnchor:g,diffLine:p,dispatchMarkersStatus:F,filePath:b,lineAnchor:v,handleDiffSideCellSelectionBlocking:G,isLeftSide:y,isRowSelected:L,isSplit:S,markersStatus:P,nextHunk:N,previousHunk:j,ref:A,rowId:D,subjectId:w,threadsAtPosition:I,viewerData:k}),c[41]=u,c[42]=m,c[43]=$,c[44]=f,c[45]=h,c[46]=g,c[47]=p,c[48]=F,c[49]=b,c[50]=y,c[51]=L,c[52]=S,c[53]=v,c[54]=P,c[55]=N,c[56]=j,c[57]=D,c[58]=w,c[59]=G,c[60]=I,c[61]=k,c[62]=o):o=c[62],c[63]!==r||c[64]!==s||c[65]!==o?(d=(0,i.jsxs)(iL,{children:[r,s,o]}),c[63]=r,c[64]=s,c[65]=o,c[66]=d):d=c[66],d}:({annotationsAtPosition:e,commentsPreference:t,copilotChatReference:n,currentHunk:r,diffAnchor:a,diffLine:s,filePath:o,lineAnchor:d,handleDiffSideCellSelectionBlocking:c,hasHiddenUnicodeCharacters:u,isLeftSide:m,isRowSelected:f,isSplit:h,nextHunk:g,previousHunk:p,rowId:b,subjectId:v,threadsAtPosition:x,viewerData:C})=>{let y=(0,l.useRef)(null),L="ADDITION"!==s.type,S=!h||m,N="DELETION"!==s.type,j=!h||!m,D=(0,l.useCallback)(()=>{c&&c("left")},[c]),w=(0,l.useCallback)(()=>{c&&c("right")},[c]),I=h?m?1:3:2,[k,A]=rG(t??ig.sI.Visible);return(0,i.jsxs)(iL,{children:[S&&(0,i.jsxs)(rO,{threadsAtPosition:x,annotationsAtPosition:e,copilotChatReference:n,columnIndex:0,contentColumnIndex:I,contentRef:y,diffAnchor:a,diffLine:s,dispatchMarkersStatus:A,filePath:o,handleDiffSideCellSelectionBlocking:w,isLeftSide:m,isRowSelected:f,isSplit:h,rowId:b,children:[u&&!N&&(0,i.jsx)(rK,{children:(0,i.jsx)(rV.o,{})}),L&&s.left]}),j&&(0,i.jsxs)(rO,{annotationsAtPosition:e,copilotChatReference:n,columnIndex:h?2:1,contentColumnIndex:I,contentRef:y,diffAnchor:a,diffLine:s,dispatchMarkersStatus:A,filePath:o,handleDiffSideCellSelectionBlocking:D,isLeftSide:m,isRowSelected:f,isSplit:h,rowId:b,threadsAtPosition:x,children:[u&&N&&(0,i.jsx)(rK,{children:(0,i.jsx)(rV.o,{})}),N&&s.right]}),(0,i.jsx)(rR,{annotationsAtPosition:e,commentsPreference:t,copilotChatReference:n,columnIndex:I,currentHunk:r,diffAnchor:a,diffLine:s,dispatchMarkersStatus:A,filePath:o,lineAnchor:d,handleDiffSideCellSelectionBlocking:m?w:D,isLeftSide:m,isRowSelected:f,isSplit:h,markersStatus:k,nextHunk:g,previousHunk:p,ref:y,rowId:b,subjectId:v,threadsAtPosition:x,viewerData:C})]})},rU=(0,r.GV)()?e=>{let t,n=(0,a.c)(41),{annotationsAtPosition:r,commentsPreference:s,copilotChatReference:l,currentHunk:o,diffLine:d,diffAnchor:c,filePath:u,handleDiffSideCellSelectionBlocking:m,hasHiddenUnicodeCharacters:f,isLeftSide:h,isRowSelected:g,isSplit:p,nextHunk:b,previousHunk:v,rowId:x,subjectId:C,threadsAtPosition:y,viewerData:L}=e;if((0,_.Po)(d)){let e,t,r,a=2*!h;n[0]!==c||n[1]!==d||n[2]!==h||n[3]!==p||n[4]!==a?(e=(0,i.jsx)(rP,{columnIndex:a,diffAnchor:c,diffLine:d,isLeftSide:h,isSplit:p}),n[0]=c,n[1]=d,n[2]=h,n[3]=p,n[4]=a,n[5]=e):e=n[5];let s=h?1:3;return n[6]!==c||n[7]!==d||n[8]!==h||n[9]!==p||n[10]!==s?(t=(0,i.jsx)(rP,{columnIndex:s,diffAnchor:c,diffLine:d,isLeftSide:h,isSplit:p}),n[6]=c,n[7]=d,n[8]=h,n[9]=p,n[10]=s,n[11]=t):t=n[11],n[12]!==e||n[13]!==t?(r=(0,i.jsxs)(i.Fragment,{children:[e,t]}),n[12]=e,n[13]=t,n[14]=r):r=n[14],r}if(n[15]!==c||n[16]!==d.left||n[17]!==d.right||n[18]!==d.type||n[19]!==h){let e=h?"left":(0,e2.XU)(d.type),i="left"===e?d.left:d.right;t=(0,e2.IQ)(c,e,i??0),n[15]=c,n[16]=d.left,n[17]=d.right,n[18]=d.type,n[19]=h,n[20]=t}else t=n[20];let S=t;switch(d.type){case"HUNK":return null;case"ADDITION":case"DELETION":case"CONTEXT":case"INJECTED_CONTEXT":{let e;return n[21]!==r||n[22]!==s||n[23]!==l||n[24]!==o||n[25]!==c||n[26]!==d||n[27]!==u||n[28]!==m||n[29]!==f||n[30]!==h||n[31]!==g||n[32]!==p||n[33]!==S||n[34]!==b||n[35]!==v||n[36]!==x||n[37]!==C||n[38]!==y||n[39]!==L?(e=(0,i.jsx)(rq,{annotationsAtPosition:r,commentsPreference:s,copilotChatReference:l,currentHunk:o,diffAnchor:c,diffLine:d,filePath:u,handleDiffSideCellSelectionBlocking:m,hasHiddenUnicodeCharacters:f,isLeftSide:h,isRowSelected:g,isSplit:p,lineAnchor:S,nextHunk:b,previousHunk:v,rowId:x,subjectId:C,threadsAtPosition:y,viewerData:L}),n[21]=r,n[22]=s,n[23]=l,n[24]=o,n[25]=c,n[26]=d,n[27]=u,n[28]=m,n[29]=f,n[30]=h,n[31]=g,n[32]=p,n[33]=S,n[34]=b,n[35]=v,n[36]=x,n[37]=C,n[38]=y,n[39]=L,n[40]=e):e=n[40],e}default:throw Error(`cannot handle type ${d.type}`)}}:({annotationsAtPosition:e,commentsPreference:t,copilotChatReference:n,currentHunk:r,diffLine:a,diffAnchor:s,filePath:l,handleDiffSideCellSelectionBlocking:o,hasHiddenUnicodeCharacters:d,isLeftSide:c,isRowSelected:u,isSplit:m,nextHunk:f,previousHunk:h,rowId:g,subjectId:p,threadsAtPosition:b,viewerData:v})=>{if((0,_.Po)(a))return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(rP,{columnIndex:2*!c,diffAnchor:s,diffLine:a,isLeftSide:c,isSplit:m}),(0,i.jsx)(rP,{columnIndex:c?1:3,diffAnchor:s,diffLine:a,isLeftSide:c,isSplit:m})]});let x=c?"left":(0,e2.XU)(a.type),C="left"===x?a.left:a.right,y=(0,e2.IQ)(s,x,C??0);switch(a.type){case"HUNK":return null;case"ADDITION":case"DELETION":case"CONTEXT":case"INJECTED_CONTEXT":return(0,i.jsx)(rq,{annotationsAtPosition:e,commentsPreference:t,copilotChatReference:n,currentHunk:r,diffAnchor:s,diffLine:a,filePath:l,handleDiffSideCellSelectionBlocking:o,hasHiddenUnicodeCharacters:d,isLeftSide:c,isRowSelected:u,isSplit:m,lineAnchor:y,nextHunk:f,previousHunk:h,rowId:g,subjectId:p,threadsAtPosition:b,viewerData:v});default:throw Error(`cannot handle type ${a.type}`)}},rK=(0,r.GV)()?function(e){let t,n,r=(0,a.c)(3),{children:s}=e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(t={left:"-1px",zIndex:"1"},r[0]=t):t=r[0],r[1]!==s?(n=(0,i.jsx)("span",{className:"position-absolute",style:t,children:s}),r[1]=s,r[2]=n):n=r[2],n}:function({children:e}){return(0,i.jsx)("span",{className:"position-absolute",style:{left:"-1px",zIndex:"1"},children:e})},rB=l.memo(rU),rq=l.memo(rH);try{rH.displayName||(rH.displayName="CodeDiffLineUnmemoized")}catch{}try{rU.displayName||(rU.displayName="DiffLineSideUnmemoized")}catch{}try{rK.displayName||(rK.displayName="DiffCodeAlert")}catch{}try{rB.displayName||(rB.displayName="DiffLineSide")}catch{}try{rq.displayName||(rq.displayName="CodeDiffLine")}catch{}let rz=(0,r.GV)()?function(e){let t,n,r,s=(0,a.c)(5),{isSplit:l}=e,o=!l&&"hunk-kebab-icon-unified";return s[0]!==o?(t=(0,v.$)("hunk-kebab-icon pr-2 pb-1",o),s[0]=o,s[1]=t):t=s[1],s[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(c.KebabHorizontalIcon,{}),s[2]=n):n=s[2],s[3]!==t?(r=(0,i.jsx)("div",{className:t,children:n}),s[3]=t,s[4]=r):r=s[4],r}:function({isSplit:e}){return(0,i.jsx)("div",{className:(0,v.$)("hunk-kebab-icon pr-2 pb-1",!e&&"hunk-kebab-icon-unified"),children:(0,i.jsx)(c.KebabHorizontalIcon,{})})};try{rz.displayName||(rz.displayName="HunkKebabIcon")}catch{}let rW=(0,r.GV)()?function(e){let t,n,i,r,s,o,d,c=(0,a.c)(17),[u,m]=(0,l.useState)(!1),[f,h]=(0,l.useState)(!1),g=u?0:-1;c[0]!==e?(t=t=>{e.current&&e.current.contains(t.relatedTarget)||m(!1)},c[0]=e,c[1]=t):t=c[1];let p=t;c[2]!==e?(n=()=>{e.current===document.activeElement&&m(!0)},c[2]=e,c[3]=n):n=c[3];let b=n;c[4]!==e?(i=t=>{e.current&&!e.current.contains(t.relatedTarget)&&m(!1),h(!1)},c[4]=e,c[5]=i):i=c[5];let v=i;c[6]===Symbol.for("react.memo_cache_sentinel")?(r=e=>{e.stopPropagation(),h(!0)},c[6]=r):r=c[6];let x=r;c[7]!==p||c[8]!==b?(s={onFocus:b,onBlur:p},c[7]=p,c[8]=b,c[9]=s):s=c[9];let C=s,y=!f;c[10]!==g||c[11]!==v||c[12]!==y?(o={"aria-hidden":y,tabIndex:g,onBlur:v,onFocusCapture:x,onKeyDownCapture:rX},c[10]=g,c[11]=v,c[12]=y,c[13]=o):o=c[13];let L=o;return c[14]!==L||c[15]!==C?(d=[C,L],c[14]=L,c[15]=C,c[16]=d):d=c[16],d}:function(e){let[t,n]=(0,l.useState)(!1),[i,r]=(0,l.useState)(!1),a=(0,l.useCallback)(t=>{e.current&&e.current.contains(t.relatedTarget)||n(!1)},[e]);return[{onFocus:(0,l.useCallback)(()=>{e.current===document.activeElement&&n(!0)},[e]),onBlur:a},{"aria-hidden":!i,tabIndex:t?0:-1,onBlur:(0,l.useCallback)(t=>{e.current&&!e.current.contains(t.relatedTarget)&&n(!1),r(!1)},[e]),onFocusCapture:(0,l.useCallback)(e=>{e.stopPropagation(),r(!0)},[]),onKeyDownCapture:(0,l.useCallback)(e=>{tH(e.key)&&e.stopPropagation()},[])}]};function rX(e){tH(e.key)&&e.stopPropagation()}let rZ=(0,r.GV)()?function(e){let t,n,r,s,o,d=(0,a.c)(18),{diffAnchor:c,diffLine:u,isLeftSide:m,isSplit:f,renderHunkButton:h}=e,g=(0,l.useRef)(null),[p,b]=rW(g);if((0,_.Po)(u))return null;let v=`HunkCell-left:${u.left}-right:${u.right}`;d[0]===Symbol.for("react.memo_cache_sentinel")?(t={backgroundColor:"var(--bgColor-accent-muted, var(--color-accent-subtle))",flexGrow:1},d[0]=t):t=d[0],d[1]!==b||d[2]!==f||d[3]!==h?(n=h?.(b)??(0,i.jsx)(rz,{isSplit:f}),d[1]=b,d[2]=f,d[3]=h,d[4]=n):n=d[4];let x=u.html;return d[5]!==x?(r=(0,i.jsx)("code",{className:"diff-text-cell hunk",children:(0,i.jsx)(eX.$6,{className:"diff-text-inner color-fg-muted",html:x})}),d[5]=x,d[6]=r):r=d[6],d[7]!==n||d[8]!==r?(s=(0,i.jsxs)("div",{className:"d-flex flex-row",children:[n,r]}),d[7]=n,d[8]=r,d[9]=s):s=d[9],d[10]!==p||d[11]!==c||d[12]!==u||d[13]!==m||d[14]!==f||d[15]!==v||d[16]!==s?(o=(0,i.jsx)(rj,{className:"diff-hunk-cell",colSpan:4,columnIndex:0,diffAnchor:c,diffLine:u,isLeftSide:m,isSplit:f,ref:g,style:t,...p,children:s},v),d[10]=p,d[11]=c,d[12]=u,d[13]=m,d[14]=f,d[15]=v,d[16]=s,d[17]=o):o=d[17],o}:function({diffAnchor:e,diffLine:t,isLeftSide:n,isSplit:r,renderHunkButton:a}){let s=(0,l.useRef)(null),[o,d]=rW(s);if((0,_.Po)(t))return null;let c=`HunkCell-left:${t.left}-right:${t.right}`;return(0,i.jsx)(rj,{className:"diff-hunk-cell",colSpan:4,columnIndex:0,diffAnchor:e,diffLine:t,isLeftSide:n,isSplit:r,ref:s,style:{backgroundColor:"var(--bgColor-accent-muted, var(--color-accent-subtle))",flexGrow:1},...o,children:(0,i.jsxs)("div",{className:"d-flex flex-row",children:[a?.(d)??(0,i.jsx)(rz,{isSplit:r}),(0,i.jsx)("code",{className:"diff-text-cell hunk",children:(0,i.jsx)(eX.$6,{className:"diff-text-inner color-fg-muted",html:t.html})})]})},c)};try{rZ.displayName||(rZ.displayName="HunkCell")}catch{}let rQ="ExpandableHunkHeaderDiffLine-module__expand-button-line--CbsbZ",rJ="ExpandableHunkHeaderDiffLine-module__expand-up-and-down--amzYl",rY="ExpandableHunkHeaderDiffLine-module__expand-button-unified--pt9f0",r0=(0,r.GV)()?function(e){let t,n,r,s,l,o,d,c,u,m,f,h,g=(0,a.c)(24);g[0]!==e?({direction:l,icon:t,isSplit:o,label:d,onClick:c,ariaLabel:r,className:s,...n}=e,g[0]=e,g[1]=t,g[2]=n,g[3]=r,g[4]=s,g[5]=l,g[6]=o,g[7]=d,g[8]=c):(t=g[1],n=g[2],r=g[3],s=g[4],l=g[5],o=g[6],d=g[7],c=g[8]);let{sendAnalyticsEvent:p}=(0,tq.s)();g[9]!==c||g[10]!==p?(u=()=>{c(),p("file_entry.expand_hunk","FILE_EXPANDER_BUTTON")},g[9]=c,g[10]=p,g[11]=u):u=g[11];let b=!o&&rY;g[12]!==s||g[13]!==b?(m=(0,v.$)("Button Button--iconOnly Button--invisible",rQ,b,s),g[12]=s,g[13]=b,g[14]=m):m=g[14];let x=r??d;return g[15]!==t?(f=(0,i.jsx)(t,{}),g[15]=t,g[16]=f):f=g[16],g[17]!==n||g[18]!==l||g[19]!==u||g[20]!==m||g[21]!==x||g[22]!==f?(h=(0,i.jsx)("button",{onClick:u,className:m,"aria-label":x,"data-direction":l,...n,children:f}),g[17]=n,g[18]=l,g[19]=u,g[20]=m,g[21]=x,g[22]=f,g[23]=h):h=g[23],h}:function({direction:e,icon:t,isSplit:n,label:r,onClick:a,ariaLabel:s,className:l,...o}){let{sendAnalyticsEvent:d}=(0,tq.s)();return(0,i.jsx)("button",{onClick:()=>{a(),d("file_entry.expand_hunk","FILE_EXPANDER_BUTTON")},className:(0,v.$)("Button Button--iconOnly Button--invisible",rQ,!n&&rY,l),"aria-label":s??r,"data-direction":e,...o,children:(0,i.jsx)(t,{})})},r1=(0,r.GV)()?function(e){let t,n,r,s,l,o,d,u,m,f,h,g=(0,a.c)(25),{currentHunk:p,diffAnchor:b,diffLine:v,fileLineCount:x,isLeftSide:C,isSplit:y,nextHunk:L,nextLine:S,previousHunk:N,prevLine:j}=e;g[0]!==p||g[1]!==L||g[2]!==N?(t={currentHunk:p,nextHunk:L,previousHunk:N},g[0]=p,g[1]=L,g[2]=N,g[3]=t):t=g[3];let{expandStartOfHunk:D,expandEndOfPreviousHunk:w}=iT(t),I=0===v.position&&0!==v.blobLineNumber||!j,k=!S,A=0===v.blobLineNumber,E=I||k,R=k&&j?.blobLineNumber===x;e:{if(E||v.blobLineNumber<=0){n=!1;break e}if(v.blobLineNumber-j.blobLineNumber<=20||S.blobLineNumber-v.blobLineNumber>=20){n=!0;break e}n=!1}let _=n;t:{if(E||R){r=!1;break t}if(v.blobLineNumber-j.blobLineNumber>20){r=!0;break t}r=!1}let T=r;n:{if(v.blobLineNumber<=0||A){s=!1;break n}if(I){s=!0;break n}s=!1}let O=s;i:{if(I||R){l=!1;break i}if(k){l=!0;break i}l=!1}let M=l;r:{switch(!0){case _:o="expand-all";break r;case T:o="expand-up-and-down";break r;case O:o="expand-up";break r;case M:o="expand-down";break r}o=void 0}let $=o;g[4]!==D?(d=()=>D(),g[4]=D,g[5]=d):d=g[5];let P=d;g[6]!==w?(u=()=>w(),g[6]=w,g[7]=u):u=g[7];let F=u;g[8]!==D?(m=()=>D(),g[8]=D,g[9]=m):m=g[9];let G=m,V=q();g[10]!==$||g[11]!==P||g[12]!==G||g[13]!==F||g[14]!==V||g[15]!==y||g[16]!==S?.blobLineNumber||g[17]!==j?.blobLineNumber?(f=e=>{if(V.has(iY.YR.expandLines))return null;switch($){case"expand-all":return(0,i.jsx)(r0,{...e,direction:"all",icon:c.UnfoldIcon,isSplit:y,label:`Expand file from line ${j?.blobLineNumber||""} to line ${S?.blobLineNumber||""}`,onClick:G});case"expand-up-and-down":return(0,i.jsxs)("div",{className:"d-flex flex-column",children:[(0,i.jsx)(r0,{...e,direction:"down",icon:c.FoldDownIcon,isSplit:y,label:`Expand file down from line ${j?.blobLineNumber||""}`,className:rJ,onClick:F}),(0,i.jsx)(r0,{...e,direction:"up",icon:c.FoldUpIcon,isSplit:y,label:`Expand file up from line ${S?.blobLineNumber||""}`,className:rJ,onClick:P})]});case"expand-up":return(0,i.jsx)(r0,{...e,direction:"up",icon:c.FoldUpIcon,isSplit:y,label:`Expand file up from line ${S?.blobLineNumber||""}`,onClick:P});case"expand-down":return(0,i.jsx)(r0,{...e,direction:"down",icon:c.FoldDownIcon,isSplit:y,label:`Expand file down from line ${j?.blobLineNumber||""}`,onClick:F});default:return null}},g[10]=$,g[11]=P,g[12]=G,g[13]=F,g[14]=V,g[15]=y,g[16]=S?.blobLineNumber,g[17]=j?.blobLineNumber,g[18]=f):f=g[18];let H=f;return g[19]!==b||g[20]!==v||g[21]!==C||g[22]!==y||g[23]!==H?(h=(0,i.jsx)(rZ,{renderHunkButton:H,diffAnchor:b,diffLine:v,isLeftSide:C,isSplit:y}),g[19]=b,g[20]=v,g[21]=C,g[22]=y,g[23]=H,g[24]=h):h=g[24],h}:function({currentHunk:e,diffAnchor:t,diffLine:n,fileLineCount:r,isLeftSide:a,isSplit:s,nextHunk:o,nextLine:d,previousHunk:u,prevLine:m}){let{expandStartOfHunk:f,expandEndOfPreviousHunk:h}=iT({currentHunk:e,nextHunk:o,previousHunk:u}),g=0===n.position&&0!==n.blobLineNumber||!m,p=!d,b=0===n.blobLineNumber,v=g||p,x=p&&m?.blobLineNumber===r,C=(0,l.useMemo)(()=>!v&&!(n.blobLineNumber<=0)&&(!!(n.blobLineNumber-m.blobLineNumber<=20)||!!(d.blobLineNumber-n.blobLineNumber>=20)),[v,n,d,m]),y=(0,l.useMemo)(()=>!v&&!x&&n.blobLineNumber-m.blobLineNumber>20,[v,x,n,m]),L=(0,l.useMemo)(()=>!(n.blobLineNumber<=0)&&!b&&!!g,[g,b,n]),S=(0,l.useMemo)(()=>!g&&!x&&!!p,[g,p,x]),N=(0,l.useMemo)(()=>{switch(!0){case C:return"expand-all";case y:return"expand-up-and-down";case L:return"expand-up";case S:return"expand-down"}},[C,y,L,S]),j=()=>f(),D=()=>h(),w=()=>f(),I=q();return(0,i.jsx)(rZ,{renderHunkButton:e=>{if(I.has(iY.YR.expandLines))return null;switch(N){case"expand-all":return(0,i.jsx)(r0,{...e,direction:"all",icon:c.UnfoldIcon,isSplit:s,label:`Expand file from line ${m?.blobLineNumber||""} to line ${d?.blobLineNumber||""}`,onClick:w});case"expand-up-and-down":return(0,i.jsxs)("div",{className:"d-flex flex-column",children:[(0,i.jsx)(r0,{...e,direction:"down",icon:c.FoldDownIcon,isSplit:s,label:`Expand file down from line ${m?.blobLineNumber||""}`,className:rJ,onClick:D}),(0,i.jsx)(r0,{...e,direction:"up",icon:c.FoldUpIcon,isSplit:s,label:`Expand file up from line ${d?.blobLineNumber||""}`,className:rJ,onClick:j})]});case"expand-up":return(0,i.jsx)(r0,{...e,direction:"up",icon:c.FoldUpIcon,isSplit:s,label:`Expand file up from line ${d?.blobLineNumber||""}`,onClick:j});case"expand-down":return(0,i.jsx)(r0,{...e,direction:"down",icon:c.FoldDownIcon,isSplit:s,label:`Expand file down from line ${m?.blobLineNumber||""}`,onClick:D});default:return null}},diffAnchor:t,diffLine:n,isLeftSide:a,isSplit:s})};try{r0.displayName||(r0.displayName="ExpandButtonLine")}catch{}try{r1.displayName||(r1.displayName="ExpandableHunkHeaderDiffLine")}catch{}var r2=n(12918);let r3=(0,l.memo)((0,r.GV)()?function(e){let t,n,r,s,l,o,d,c,u,m,f,h=(0,a.c)(54),{copilotChatReference:g,diffHasHiddenUnicodeCharacters:p,filePath:b,handleDiffSideCellSelectionBlocking:v,hunksData:x,leftDiffLine:C,nextDiffLine:y,prevDiffLine:L,rightDiffLine:S,showHiddenUnicode:N,subjectId:j,viewerData:D}=e,w=X(),k=Z();h[0]!==p||h[1]!==N?(t=e=>{let t=!1;return p&&!(0,_.Po)(e)&&(t=(0,tB.Y)(e.text),N&&t&&(e=e.html?{...e,html:(0,r2.Gx)(e.html)??e.html}:{...e,text:(0,tB.TA)(e.text)})),[e,t]},h[0]=p,h[1]=N,h[2]=t):t=h[2];let A=t,[E,R]=A(C),[T,O]=A(S),M=J((0,_.Po)(E)?void 0:E),$=J((0,_.Po)(T)?void 0:T);e:{let e;if((0,_.Po)(E)){n=E;break e}h[3]!==E||h[4]!==M?(e={...E,...M},h[3]=E,h[4]=M,h[5]=e):e=h[5],n=e}let P=n;t:{let e;if((0,_.Po)(T)){r=T;break t}h[6]!==T||h[7]!==$?(e={...T,...$},h[6]=T,h[7]=$,h[8]=e):e=h[8],r=e}let F=r;h[9]!==P?(s=(0,_.qK)(P)&&"HUNK"===P.type,h[9]=P,h[10]=s):s=h[10];let G=s;h[11]!==w||h[12]!==C||h[13]!==S?(l=(0,_.qX)(w,C,S),h[11]=w,h[12]=C,h[13]=S,h[14]=l):l=h[14];let V=l;h[15]!==P||h[16]!==F?(o=(0,_.Po)(P)?(0,_.Po)(F)?void 0:F:P,h[15]=P,h[16]=F,h[17]=o):o=h[17];let H=o;h[18]!==E?(d=(0,_.Po)(E)?void 0:(0,_.oH)(E.left,"LEFT"),h[18]=E,h[19]=d):d=h[19];let U=d,{threads:K,annotations:B,commentsPreference:q}=(0,I.rP)(b,U??"");h[20]!==T?(c=(0,_.Po)(T)?void 0:(0,_.oH)(T.right,"RIGHT"),h[20]=T,h[21]=c):c=h[21];let z=c,{threads:W,annotations:Q,commentsPreference:Y}=(0,I.rP)(b,z??""),ee=q===ig.sI.Collapsed||Y===ig.sI.Collapsed?ig.sI.Collapsed:ig.sI.Visible,et=!(((0,_.Po)(P)||!P.isSelected)&&((0,_.Po)(F)||!F.isSelected));if(!H)return null;h[22]!==H||h[23]!==x?(u=e9(H,x),h[22]=H,h[23]=x,h[24]=u):u=h[24];let{currentHunk:en,nextHunk:ei,previousHunk:er}=u;return P?(h[25]!==g||h[26]!==ee||h[27]!==en||h[28]!==w||h[29]!==k||h[30]!==b||h[31]!==v||h[32]!==G||h[33]!==et||h[34]!==B||h[35]!==C||h[36]!==R||h[37]!==P||h[38]!==K||h[39]!==y||h[40]!==ei||h[41]!==L||h[42]!==er||h[43]!==Q||h[44]!==O||h[45]!==F||h[46]!==W||h[47]!==V||h[48]!==j||h[49]!==D?(m=G?(0,i.jsx)(r1,{currentHunk:en,diffAnchor:w,diffLine:C,fileLineCount:k,isLeftSide:!0,isSplit:!0,nextHunk:ei,nextLine:y,previousHunk:er,prevLine:L}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(rB,{annotationsAtPosition:B,commentsPreference:ee,copilotChatReference:g,currentHunk:en,diffLine:P,diffAnchor:w,filePath:b,handleDiffSideCellSelectionBlocking:v,hasHiddenUnicodeCharacters:R,isLeftSide:!0,isRowSelected:et,isSplit:!0,nextHunk:ei,previousHunk:er,rowId:V,subjectId:j,threadsAtPosition:K,viewerData:D}),(0,i.jsx)(rB,{threadsAtPosition:W,annotationsAtPosition:Q,commentsPreference:ee,copilotChatReference:g,currentHunk:en,diffLine:F,diffAnchor:w,filePath:b,handleDiffSideCellSelectionBlocking:v,hasHiddenUnicodeCharacters:O,isLeftSide:!1,isRowSelected:et,isSplit:!0,nextHunk:ei,previousHunk:er,rowId:V,subjectId:j,viewerData:D})]}),h[25]=g,h[26]=ee,h[27]=en,h[28]=w,h[29]=k,h[30]=b,h[31]=v,h[32]=G,h[33]=et,h[34]=B,h[35]=C,h[36]=R,h[37]=P,h[38]=K,h[39]=y,h[40]=ei,h[41]=L,h[42]=er,h[43]=Q,h[44]=O,h[45]=F,h[46]=W,h[47]=V,h[48]=j,h[49]=D,h[50]=m):m=h[50],h[51]!==V||h[52]!==m?(f=(0,i.jsx)("tr",{className:"diff-line-row",children:m},V),h[51]=V,h[52]=m,h[53]=f):f=h[53],f):null}:function({copilotChatReference:e,diffHasHiddenUnicodeCharacters:t,filePath:n,handleDiffSideCellSelectionBlocking:r,hunksData:a,leftDiffLine:s,nextDiffLine:o,prevDiffLine:d,rightDiffLine:c,showHiddenUnicode:u,subjectId:m,viewerData:f}){let h=X(),g=Z(),p=e=>{let n=!1;return t&&!(0,_.Po)(e)&&(n=(0,tB.Y)(e.text),u&&n&&(e=e.html?{...e,html:(0,r2.Gx)(e.html)??e.html}:{...e,text:(0,tB.TA)(e.text)})),[e,n]},[b,v]=p(s),[x,C]=p(c),y=J((0,_.Po)(b)?void 0:b),L=J((0,_.Po)(x)?void 0:x),S=(0,l.useMemo)(()=>(0,_.Po)(b)?b:{...b,...y},[b,y]),N=(0,l.useMemo)(()=>(0,_.Po)(x)?x:{...x,...L},[x,L]),j=(0,_.qK)(S)&&"HUNK"===S.type,D=(0,_.qX)(h,s,c),w=(0,_.Po)(S)?(0,_.Po)(N)?void 0:N:S,k=(0,_.Po)(b)?void 0:(0,_.oH)(b.left,"LEFT"),{threads:A,annotations:E,commentsPreference:R}=(0,I.rP)(n,k??""),T=(0,_.Po)(x)?void 0:(0,_.oH)(x.right,"RIGHT"),{threads:O,annotations:M,commentsPreference:$}=(0,I.rP)(n,T??""),P=R===ig.sI.Collapsed||$===ig.sI.Collapsed?ig.sI.Collapsed:ig.sI.Visible,F=(0,l.useMemo)(()=>!(((0,_.Po)(S)||!S.isSelected)&&((0,_.Po)(N)||!N.isSelected)),[S,N]);if(!w)return null;let{currentHunk:G,nextHunk:V,previousHunk:H}=e9(w,a);return S?(0,i.jsx)("tr",{className:"diff-line-row",children:j?(0,i.jsx)(r1,{currentHunk:G,diffAnchor:h,diffLine:s,fileLineCount:g,isLeftSide:!0,isSplit:!0,nextHunk:V,nextLine:o,previousHunk:H,prevLine:d}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(rB,{annotationsAtPosition:E,commentsPreference:P,copilotChatReference:e,currentHunk:G,diffLine:S,diffAnchor:h,filePath:n,handleDiffSideCellSelectionBlocking:r,hasHiddenUnicodeCharacters:v,isLeftSide:!0,isRowSelected:F,isSplit:!0,nextHunk:V,previousHunk:H,rowId:D,subjectId:m,threadsAtPosition:A,viewerData:f}),(0,i.jsx)(rB,{threadsAtPosition:O,annotationsAtPosition:M,commentsPreference:P,copilotChatReference:e,currentHunk:G,diffLine:N,diffAnchor:h,filePath:n,handleDiffSideCellSelectionBlocking:r,hasHiddenUnicodeCharacters:C,isLeftSide:!1,isRowSelected:F,isSplit:!0,nextHunk:V,previousHunk:H,rowId:D,subjectId:m,viewerData:f})]})},D):null});try{r3.displayName||(r3.displayName="SplitDiffRow")}catch{}function r4(e){let t=[],n=[],i=()=>{for(;t.length<n.length;)t.push(o.Vv);for(;n.length<t.length;)n.push(o.Vv)};for(let r of e)switch(r.type){case"ADDITION":n.push(r);break;case"DELETION":t.push(r);break;case"CONTEXT":case"INJECTED_CONTEXT":case"HUNK":i(),t.push(r),n.push(r)}return i(),{leftLines:t,rightLines:n}}let r6=(0,r.GV)()?function(e){let t,n,i=(0,a.c)(5);i[0]!==e?(t=r4(e),i[0]=e,i[1]=t):t=i[1];let{leftLines:r,rightLines:s}=t;return i[2]!==r||i[3]!==s?(n={leftLines:r,rightLines:s},i[2]=r,i[3]=s,i[4]=n):n=i[4],n}:function(e){let{leftLines:t,rightLines:n}=(0,l.useMemo)(()=>r4(e),[e]);return{leftLines:t,rightLines:n}},r5=(0,l.memo)((0,r.GV)()?function(e){let t,n,r,s,l=(0,a.c)(24),{diffHasHiddenUnicodeCharacters:o,diffLines:d,fileAnchor:c,filePath:u,handleDiffSideCellSelectionBlocking:m,showHiddenUnicode:f,tableRef:h,copilotChatReference:g,subjectId:p,viewerData:b}=e,{leftLines:v,rightLines:x}=r6(d);l[0]!==v?(t=te(v),l[0]=v,l[1]=t):t=l[1];let C=t,{addLineToSelection:y,clearSelectedLines:L,selectMultipleLines:S}=Y(),N=U();return l[2]!==y||l[3]!==L||l[4]!==c||l[5]!==N||l[6]!==v||l[7]!==x||l[8]!==S||l[9]!==h?(n={addLineToSelection:y,clearSelectedLines:L,containerRef:h,fileAnchor:c,getfirstLineSelectionOnDrag:N,isSplitDiff:!0,leftLines:v,selectMultipleLines:S,rightLines:x,disabled:!1},l[2]=y,l[3]=L,l[4]=c,l[5]=N,l[6]=v,l[7]=x,l[8]=S,l[9]=h,l[10]=n):n=l[10],tU(n),l[11]!==g||l[12]!==o||l[13]!==u||l[14]!==m||l[15]!==C||l[16]!==v||l[17]!==x||l[18]!==f||l[19]!==p||l[20]!==b?(r=v.map((e,t)=>{let n=v[t],r=x[t],a=v[t-1],s=(0,_.Po)(v[t+1])?x[t+1]:v[t+1],l=`${(0,_.Po)(n)||!n?`empty-left-diff-${t}`:n.blobLineNumber}-${(0,_.Po)(r)||!r?`empty-right-diff-${t}`:r.blobLineNumber}`;return(0,i.jsx)(r3,{copilotChatReference:g,diffHasHiddenUnicodeCharacters:o,filePath:u,handleDiffSideCellSelectionBlocking:m,hunksData:C,leftDiffLine:n,nextDiffLine:s,prevDiffLine:a,rightDiffLine:r,showHiddenUnicode:f,subjectId:p,viewerData:b},l)}),l[11]=g,l[12]=o,l[13]=u,l[14]=m,l[15]=C,l[16]=v,l[17]=x,l[18]=f,l[19]=p,l[20]=b,l[21]=r):r=l[21],l[22]!==r?(s=(0,i.jsx)(i.Fragment,{children:r}),l[22]=r,l[23]=s):s=l[23],s}:function({diffHasHiddenUnicodeCharacters:e,diffLines:t,fileAnchor:n,filePath:r,handleDiffSideCellSelectionBlocking:a,showHiddenUnicode:s,tableRef:o,copilotChatReference:d,subjectId:c,viewerData:u}){let{leftLines:m,rightLines:f}=r6(t),h=(0,l.useMemo)(()=>te(m),[m]),{addLineToSelection:g,clearSelectedLines:p,selectMultipleLines:b}=Y();return tU({addLineToSelection:g,clearSelectedLines:p,containerRef:o,fileAnchor:n,getfirstLineSelectionOnDrag:U(),isSplitDiff:!0,leftLines:m,selectMultipleLines:b,rightLines:f,disabled:!1}),(0,i.jsx)(i.Fragment,{children:m.map((t,n)=>{let l=m[n],o=f[n],g=m[n-1],p=(0,_.Po)(m[n+1])?f[n+1]:m[n+1],b=`${(0,_.Po)(l)||!l?`empty-left-diff-${n}`:l.blobLineNumber}-${(0,_.Po)(o)||!o?`empty-right-diff-${n}`:o.blobLineNumber}`;return(0,i.jsx)(r3,{copilotChatReference:d,diffHasHiddenUnicodeCharacters:e,filePath:r,handleDiffSideCellSelectionBlocking:a,hunksData:h,leftDiffLine:l,nextDiffLine:p,prevDiffLine:g,rightDiffLine:o,showHiddenUnicode:s,subjectId:c,viewerData:u},b)})})});try{r5.displayName||(r5.displayName="SplitDiffLines")}catch{}let r7=(0,l.memo)(function({copilotChatReference:e,diffHasHiddenUnicodeCharacters:t,filePath:n,hunksData:r,currentDiffLine:a,nextDiffLine:s,prevDiffLine:o,showHiddenUnicode:d,subjectId:c,viewerData:u}){let m=X(),f=Z(),h=J(a),g=(0,l.useMemo)(()=>({...a,...h}),[a,h]),p=(0,l.useMemo)(()=>!!g.isSelected,[g.isSelected]),b="DELETION"!==a.type?"RIGHT":"LEFT",v="RIGHT"===b?a.right:a.left,x=(0,_.oH)(v,b),{threads:C,annotations:y,commentsPreference:L}=(0,I.rP)(n,x??""),S="HUNK"===g.type,N=(0,e2.IQ)(m,(0,e2.XU)(g.type),g.blobLineNumber),{currentHunk:j,nextHunk:D,previousHunk:w}=e9(g,r),k=(0,_.qX)(m,g,g),A=t&&(0,tB.Y)(g.text);d&&A&&(g=g.html?{...g,html:(0,r2.Gx)(g.html)??g.html}:{...g,text:(0,tB.TA)(g.text)});let E="DELETION"===g.type;return(0,i.jsx)("tr",{className:"diff-line-row",children:S?(0,i.jsx)(r1,{currentHunk:j,diffAnchor:m,diffLine:g,fileLineCount:f,isLeftSide:E,isSplit:!1,nextHunk:D,nextLine:s,previousHunk:w,prevLine:o}):(0,i.jsx)(rq,{annotationsAtPosition:y,commentsPreference:L,copilotChatReference:e,currentHunk:j,diffAnchor:m,diffLine:g,filePath:n,hasHiddenUnicodeCharacters:A,isLeftSide:E,isRowSelected:p,isSplit:!1,lineAnchor:N,nextHunk:D,previousHunk:w,rowId:k,subjectId:c,threadsAtPosition:C,viewerData:u})},k)});try{r7.displayName||(r7.displayName="UnifiedDiffRow")}catch{}let r8=(0,l.memo)((0,r.GV)()?function(e){let t,n,r,s,l=(0,a.c)(21),{diffHasHiddenUnicodeCharacters:o,diffLines:d,fileAnchor:c,filePath:u,tableRef:m,showHiddenUnicode:f,copilotChatReference:h,subjectId:g,viewerData:p}=e;l[0]!==d?(t=te(d.map(r9)),l[0]=d,l[1]=t):t=l[1];let b=t,{addLineToSelection:v,clearSelectedLines:x,selectMultipleLines:C}=Y(),y=U();return l[2]!==v||l[3]!==x||l[4]!==c||l[5]!==y||l[6]!==C||l[7]!==d||l[8]!==m?(n={addLineToSelection:v,clearSelectedLines:x,containerRef:m,fileAnchor:c,getfirstLineSelectionOnDrag:y,isSplitDiff:!1,leftLines:d,selectMultipleLines:C,disabled:!1},l[2]=v,l[3]=x,l[4]=c,l[5]=y,l[6]=C,l[7]=d,l[8]=m,l[9]=n):n=l[9],tU(n),l[10]!==h||l[11]!==o||l[12]!==d||l[13]!==u||l[14]!==b||l[15]!==f||l[16]!==g||l[17]!==p?(r=d.map((e,t)=>{let n=d[t+1],r=d[t-1],a=`unified-diff-row-l:${e.left}-r:${e.right}-b:${e.blobLineNumber}`;return(0,i.jsx)(r7,{copilotChatReference:h,diffHasHiddenUnicodeCharacters:o,filePath:u,hunksData:b,currentDiffLine:e,nextDiffLine:n,prevDiffLine:r,showHiddenUnicode:f,subjectId:g,viewerData:p},a)}),l[10]=h,l[11]=o,l[12]=d,l[13]=u,l[14]=b,l[15]=f,l[16]=g,l[17]=p,l[18]=r):r=l[18],l[19]!==r?(s=(0,i.jsx)(i.Fragment,{children:r}),l[19]=r,l[20]=s):s=l[20],s}:function({diffHasHiddenUnicodeCharacters:e,diffLines:t,fileAnchor:n,filePath:r,tableRef:a,showHiddenUnicode:s,copilotChatReference:o,subjectId:d,viewerData:c}){let u=(0,l.useMemo)(()=>te(t.map(e=>e)),[t]),{addLineToSelection:m,clearSelectedLines:f,selectMultipleLines:h}=Y();return tU({addLineToSelection:m,clearSelectedLines:f,containerRef:a,fileAnchor:n,getfirstLineSelectionOnDrag:U(),isSplitDiff:!1,leftLines:t,selectMultipleLines:h,disabled:!1}),(0,i.jsx)(i.Fragment,{children:t.map((n,a)=>{let l=t[a+1],m=t[a-1],f=`unified-diff-row-l:${n.left}-r:${n.right}-b:${n.blobLineNumber}`;return(0,i.jsx)(r7,{copilotChatReference:o,diffHasHiddenUnicodeCharacters:e,filePath:r,hunksData:u,currentDiffLine:n,nextDiffLine:l,prevDiffLine:m,showHiddenUnicode:s,subjectId:d,viewerData:c},f)})})});try{r8.displayName||(r8.displayName="UnifiedDiffLines")}catch{}function r9(e){return e}let ae="DiffLines-module__tableLayoutFixed--UBX7h",at="DiffLines-module__compact--wxqBo";var an=n(60745),ai=n(73189);let ar=(0,r.GV)()?function(e){let t,n,r=(0,a.c)(9),{showStartConversation:s,hasDraftComment:l,lineSpacingPreference:o,openStartConversationDialog:d,authorLogin:u,authorAvatarUrl:m}=e;return r[0]!==m||r[1]!==u||r[2]!==l||r[3]!==o||r[4]!==d||r[5]!==s?(t=s&&(0,i.jsx)("div",{"aria-hidden":!1,className:(0,v.$)("d-flex","flex-row",rc),children:(0,i.jsx)(i.Fragment,{children:l?(0,i.jsx)(eI.Q,{"aria-label":"Continue comment in progress",size:"small",className:(0,v.$)("py-0","compact"===o?ru:rm,rg),onClick:d,children:(0,i.jsx)(ro,{lineSpacingPreference:o,authorAvatarUrl:m,authorLogin:u})}):(0,i.jsx)(eI.Q,{icon:c.PlusIcon,"aria-label":"Add comment",size:"small","data-add-comment-button":!0,className:(0,v.$)("fgColor-muted","bgColor-accent-emphasis","borderColor-accent-emphasis","fgColor-onEmphasis","px-0",rf,rg,rp),onClick:d})})}),r[0]=m,r[1]=u,r[2]=l,r[3]=o,r[4]=d,r[5]=s,r[6]=t):t=r[6],r[7]!==t?(n=(0,i.jsx)(i.Fragment,{children:t}),r[7]=t,r[8]=n):n=r[8],n}:function({showStartConversation:e,hasDraftComment:t,lineSpacingPreference:n,openStartConversationDialog:r,authorLogin:a,authorAvatarUrl:s}){return(0,i.jsx)(i.Fragment,{children:e&&(0,i.jsx)("div",{"aria-hidden":!1,className:(0,v.$)("d-flex","flex-row",rc),children:(0,i.jsx)(i.Fragment,{children:t?(0,i.jsx)(eI.Q,{"aria-label":"Continue comment in progress",size:"small",className:(0,v.$)("py-0","compact"===n?ru:rm,rg),onClick:r,children:(0,i.jsx)(ro,{lineSpacingPreference:n,authorAvatarUrl:s,authorLogin:a})}):(0,i.jsx)(eI.Q,{icon:c.PlusIcon,"aria-label":"Add comment",size:"small","data-add-comment-button":!0,className:(0,v.$)("fgColor-muted","bgColor-accent-emphasis","borderColor-accent-emphasis","fgColor-onEmphasis","px-0",rf,rg,rp),onClick:r})})})})};try{ar.displayName||(ar.displayName="SimpleAddCommentButton")}catch{}let aa=(0,r.GV)()?function(e){let t,n,r,s,o,d,u,m,f=(0,a.c)(40),{showStartConversation:h,viewerData:g,openStartConversationDialog:p,threads:b,annotations:x,shouldDisplayMinimizedComments:C,diffAnchor:y,diffLine:L,isLeftSide:S,isSplit:N,nextHunk:j,previousHunk:D,currentHunk:w,copilotChatReference:I,handleCopyCode:k,shouldDisplayCollapseComments:A,toggleViewingMarkers:E}=e,[R,_]=(0,l.useState)(!1),T=(0,l.useRef)(null),O=b.reduce(as,0),M=x.length,{commentsPreference:$,lineSpacingPreference:P}=g,F=O+M>0&&$===ig.sI.Collapsed;f[0]!==x.length||f[1]!==b.length||f[2]!==E?(t=e=>{(1===b.length||1===x.length)&&e.preventDefault(),E?.()},f[0]=x.length,f[1]=b.length,f[2]=E,f[3]=t):t=f[3];let G=t;return f[4]===Symbol.for("react.memo_cache_sentinel")?(n=(0,v.$)("d-flex","flex-row",rd),f[4]=n):n=f[4],f[5]!==R||f[6]!==x||f[7]!==G||f[8]!==P||f[9]!==C||f[10]!==b||f[11]!==F?(r=F&&C&&(0,i.jsx)(eI.Q,{"aria-expanded":R,"aria-label":"View comments",size:"small",className:(0,v.$)("py-0","px-1",rg),onClick:G,children:(0,i.jsx)(iR,{threads:b,annotations:x,lineSpacingPreference:P})}),f[5]=R,f[6]=x,f[7]=G,f[8]=P,f[9]=C,f[10]=b,f[11]=F,f[12]=r):r=f[12],f[13]===Symbol.for("react.memo_cache_sentinel")?(s=(0,v.$)("fgColor-muted",rh),f[13]=s):s=f[13],f[14]!==R?(o=(0,i.jsx)(eT.W.Anchor,{children:(0,i.jsx)(eI.Q,{ref:T,"aria-haspopup":"true","aria-label":"More actions",icon:c.TriangleDownIcon,size:"small",className:s,onClick:()=>_(!R)})}),f[14]=R,f[15]=o):o=f[15],f[16]!==x||f[17]!==I||f[18]!==w||f[19]!==y||f[20]!==L||f[21]!==k||f[22]!==S||f[23]!==N||f[24]!==j||f[25]!==p||f[26]!==D||f[27]!==A||f[28]!==h||f[29]!==b||f[30]!==E||f[31]!==g?(d=(0,i.jsx)(eT.W.Overlay,{width:"medium",children:(0,i.jsx)(eO.l,{children:(0,i.jsx)(i0,{threads:b,annotations:x,currentHunk:w,diffAnchor:y,diffLine:L,shouldDisplayCollapseComments:A,copilotChatReference:I,showStartConversation:h,handleCopyCode:k,handleViewMarkersSelection:E,isLeftSide:S,isSplit:N,nextHunk:j,previousHunk:D,startConversationCurrentLine:p,startConversationWithSuggestedChange:p,viewerData:g})})}),f[16]=x,f[17]=I,f[18]=w,f[19]=y,f[20]=L,f[21]=k,f[22]=S,f[23]=N,f[24]=j,f[25]=p,f[26]=D,f[27]=A,f[28]=h,f[29]=b,f[30]=E,f[31]=g,f[32]=d):d=f[32],f[33]!==R||f[34]!==o||f[35]!==d?(u=(0,i.jsxs)(eT.W,{anchorRef:T,open:R,onOpenChange:ai.l,children:[o,d]}),f[33]=R,f[34]=o,f[35]=d,f[36]=u):u=f[36],f[37]!==r||f[38]!==u?(m=(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{"aria-hidden":!1,className:n,children:(0,i.jsxs)(iI.A,{className:rb,children:[r,u]})})}),f[37]=r,f[38]=u,f[39]=m):m=f[39],m}:function({showStartConversation:e,viewerData:t,openStartConversationDialog:n,threads:r,annotations:a,shouldDisplayMinimizedComments:s,diffAnchor:o,diffLine:d,isLeftSide:u,isSplit:m,nextHunk:f,previousHunk:h,currentHunk:g,copilotChatReference:p,handleCopyCode:b,shouldDisplayCollapseComments:x,toggleViewingMarkers:C}){let[y,L]=(0,l.useState)(!1),S=(0,l.useRef)(null),N=r.reduce((e,t)=>e+(t.commentsData?.comments.length??0),0),j=a.length,{commentsPreference:D,lineSpacingPreference:w}=t,I=N+j>0&&D===ig.sI.Collapsed,k=(0,l.useCallback)(e=>{(1===r.length||1===a.length)&&e.preventDefault(),C?.()},[a.length,r.length,C]);return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{"aria-hidden":!1,className:(0,v.$)("d-flex","flex-row",rd),children:(0,i.jsxs)(iI.A,{className:rb,children:[I&&s&&(0,i.jsx)(eI.Q,{"aria-expanded":y,"aria-label":"View comments",size:"small",className:(0,v.$)("py-0","px-1",rg),onClick:k,children:(0,i.jsx)(iR,{threads:r,annotations:a,lineSpacingPreference:w})}),(0,i.jsxs)(eT.W,{anchorRef:S,open:y,onOpenChange:ai.l,children:[(0,i.jsx)(eT.W.Anchor,{children:(0,i.jsx)(eI.Q,{ref:S,"aria-haspopup":"true","aria-label":"More actions",icon:c.TriangleDownIcon,size:"small",className:(0,v.$)("fgColor-muted",rh),onClick:()=>L(!y)})}),(0,i.jsx)(eT.W.Overlay,{width:"medium",children:(0,i.jsx)(eO.l,{children:(0,i.jsx)(i0,{threads:r,annotations:a,currentHunk:g,diffAnchor:o,diffLine:d,shouldDisplayCollapseComments:x,copilotChatReference:p,showStartConversation:e,handleCopyCode:b,handleViewMarkersSelection:C,isLeftSide:u,isSplit:m,nextHunk:f,previousHunk:h,startConversationCurrentLine:n,startConversationWithSuggestedChange:n,viewerData:t})})})]})]})})})};function as(e,t){return e+(t.commentsData?.comments.length??0)}try{aa.displayName||(aa.displayName="SimpleContextMenu")}catch{}let al=(0,l.forwardRef)((0,r.GV)()?function(e,t){let n,r,s,l=(0,a.c)(28),{annotations:o,authorAvatarUrl:d,authorLogin:c,copilotChatReference:u,currentHunk:m,diffAnchor:f,diffLine:h,hasDraftComment:g,handleCopyCode:p,isLeftSide:b,isSplit:v,nextHunk:x,previousHunk:C,shouldDisplayCollapseComments:y,shouldDisplayMinimizedComments:L,showStartConversation:S,threads:N,toggleViewingMarkers:j,viewerData:D,openStartConversationDialog:w}=e;l[0]!==d||l[1]!==c||l[2]!==g||l[3]!==w||l[4]!==S||l[5]!==D.lineSpacingPreference?(n=(0,i.jsx)(ar,{showStartConversation:S,hasDraftComment:g,lineSpacingPreference:D.lineSpacingPreference,openStartConversationDialog:w,authorLogin:c,authorAvatarUrl:d}),l[0]=d,l[1]=c,l[2]=g,l[3]=w,l[4]=S,l[5]=D.lineSpacingPreference,l[6]=n):n=l[6];let I=L??!1;return l[7]!==o||l[8]!==u||l[9]!==m||l[10]!==f||l[11]!==h||l[12]!==p||l[13]!==b||l[14]!==v||l[15]!==x||l[16]!==w||l[17]!==C||l[18]!==y||l[19]!==S||l[20]!==I||l[21]!==N||l[22]!==j||l[23]!==D?(r=(0,i.jsx)(aa,{showStartConversation:S,viewerData:D,openStartConversationDialog:w,threads:N,annotations:o,shouldDisplayMinimizedComments:I,diffAnchor:f,diffLine:h,isLeftSide:b,isSplit:v,nextHunk:x,previousHunk:C,currentHunk:m,copilotChatReference:u,handleCopyCode:p,shouldDisplayCollapseComments:y,toggleViewingMarkers:j}),l[7]=o,l[8]=u,l[9]=m,l[10]=f,l[11]=h,l[12]=p,l[13]=b,l[14]=v,l[15]=x,l[16]=w,l[17]=C,l[18]=y,l[19]=S,l[20]=I,l[21]=N,l[22]=j,l[23]=D,l[24]=r):r=l[24],l[25]!==n||l[26]!==r?(s=(0,i.jsxs)(i.Fragment,{children:[n,r]}),l[25]=n,l[26]=r,l[27]=s):s=l[27],s}:function({annotations:e,authorAvatarUrl:t,authorLogin:n,copilotChatReference:r,currentHunk:a,diffAnchor:s,diffLine:l,hasDraftComment:o,handleCopyCode:d,isLeftSide:c,isSplit:u,nextHunk:m,previousHunk:f,shouldDisplayCollapseComments:h,shouldDisplayMinimizedComments:g,showStartConversation:p,threads:b,toggleViewingMarkers:v,viewerData:x,openStartConversationDialog:C},y){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ar,{showStartConversation:p,hasDraftComment:o,lineSpacingPreference:x.lineSpacingPreference,openStartConversationDialog:C,authorLogin:n,authorAvatarUrl:t}),(0,i.jsx)(aa,{showStartConversation:p,viewerData:x,openStartConversationDialog:C,threads:b,annotations:e,shouldDisplayMinimizedComments:g??!1,diffAnchor:s,diffLine:l,isLeftSide:c,isSplit:u,nextHunk:m,previousHunk:f,currentHunk:a,copilotChatReference:r,handleCopyCode:d,shouldDisplayCollapseComments:h,toggleViewingMarkers:v})]})});al.displayName="ActionBar";let ao=(0,r.GV)()?function(e){let t,n,r,s,o,d,c,u,m,f=(0,a.c)(43),{diffLine:h,filePath:g,avatarURL:p,userLogin:b,viewerCanApplySuggestion:x}=e,C="HUNK"===h.type,y="ADDITION"!==h.type,L="DELETION"!==h.type,S=X();if(f[0]!==S||f[1]!==h){let e=(0,_.qX)(S,h,h);t=(0,_.u6)(e,2),f[0]=S,f[1]=h,f[2]=t}else t=f[2];let N=t,j=p??"",D=b??"",w=x??!1;f[3]!==j||f[4]!==D||f[5]!==w?(n={avatarUrl:j,login:D,viewerCanApplySuggestion:w},f[3]=j,f[4]=D,f[5]=w,f[6]=n):n=f[6];let k=n;f[7]!==h.type?(r=(0,_.Yf)(h.type,!0,!1),f[7]=h.type,f[8]=r):r=f[8];let A=r;f[9]!==h.type?(s=(0,_.Yf)(h.type,!1,!1),f[9]=h.type,f[10]=s):s=f[10];let E=s;f[11]!==h.html||f[12]!==h.type?(o=(0,_.x_)(h.html,h.type),f[11]=h.html,f[12]=h.type,f[13]=o):o=f[13];let[R,T]=o;f[14]!==T?(d=T&&["+","-"].includes(T),f[14]=T,f[15]=d):d=f[15];let O=d,[M,$]=(0,l.useState)(!1),[P,F]=(0,l.useState)(!1),G="DELETION"!==h.type?"RIGHT":"LEFT",V="RIGHT"===G?h.right:h.left;f[16]!==V||f[17]!==G?(c=(0,_.oH)(V,G),f[16]=V,f[17]=G,f[18]=c):c=f[18];let H=c,{threads:U,annotations:K,commentsPreference:B}=(0,I.rP)(g,H??""),q=U.length+K.length!==0&&B===ig.sI.Collapsed;f[19]!==q?(u=(0,_.S4)({hasThreads:q}),f[19]=q,f[20]=u):u=f[20];let z=u,W=(0,l.useRef)(null),Z=(0,l.useRef)(null),[Q,J]=(0,l.useState)(U.length>0||K.length>0);return f[21]!==K||f[22]!==N||f[23]!==E||f[24]!==z||f[25]!==S||f[26]!==h||f[27]!==g||f[28]!==P||f[29]!==C||f[30]!==M||f[31]!==R||f[32]!==H||f[33]!==A||f[34]!==G||f[35]!==T||f[36]!==Q||f[37]!==y||f[38]!==O||f[39]!==L||f[40]!==U||f[41]!==k?(m=(0,i.jsx)("tr",{className:"diff-line-row",children:C?(0,i.jsx)("td",{colSpan:4,className:"flex-grow-0 bgColor-accent-muted",children:(0,i.jsx)("div",{className:"d-flex flex-row",children:(0,i.jsx)("code",{className:"diff-text-cell hunk",children:(0,i.jsx)(eX.$6,{className:"diff-text-inner color-fg-muted",html:h.html})})})}):(0,i.jsxs)(i.Fragment,{children:[y?(0,i.jsx)("td",{className:"text-center v-align-top",style:{backgroundColor:A},children:(0,i.jsx)("code",{children:h.left})}):(0,i.jsx)("td",{style:{userSelect:"none",position:"relative",backgroundColor:A}}),L?(0,i.jsx)("td",{className:"text-center v-align-top",style:{backgroundColor:A},children:(0,i.jsx)("code",{children:h.right})}):(0,i.jsx)("td",{style:{userSelect:"none",position:"relative",backgroundColor:A}}),(0,i.jsxs)("td",{className:"diff-text-cell",style:{backgroundColor:E},onMouseEnter:()=>F(!0),onMouseLeave:()=>F(!1),children:[(0,i.jsxs)("code",{className:(0,v.$)("diff-text syntax-highlighted-line",{addition:"ADDITION"===h.type,deletion:"DELETION"===h.type}),children:[O&&(0,i.jsx)("span",{className:"diff-text-marker",children:T}),(0,i.jsx)(eX.$6,{html:R,className:"diff-text-inner"})]}),Q?(0,i.jsx)(io,{diffLine:h,gridCellId:N,gutterSizeOffset:z,inlineMarkersRef:W,cellRef:Z,fileAnchor:S,dispatchMarkersStatus:ai.l,lineMarkersKey:H,annotations:K,conversationListThreads:U,filePath:g,onCloseFocusMode:ai.l,isRowSelected:!1,lineType:h.type,viewerData:k,onCloseConversationList:ai.l,onDeleteLineComment:ai.l,children:M&&(0,i.jsx)("div",{className:(0,v.$)(" border rounded-2 color-border-default",(U.length,"mt-2 mb-1")),children:(0,i.jsx)(nu,{diffLine:h,diffAnchor:S,batchingEnabled:!0,filePath:g,focusOnMount:!0,isLeftSide:"LEFT"===G,isInDialogMode:!1,isOpen:M,lineNumber:h.blobLineNumber,viewerData:k,onCloseCommentDialog:()=>$(!1)})})}):null,P&&(0,i.jsx)(al,{openStartConversationDialog:()=>{$(!0),J(!0)},authorAvatarUrl:"undefined",authorLogin:"undefined",ref:Z,copilotChatReference:void 0,currentHunk:void 0,diffAnchor:S,diffLine:h,threads:U,annotations:K,handleCopyCode:ai.l,hasDraftComment:!1,isLeftSide:"LEFT"===G,isSplit:!1,nextHunk:void 0,previousHunk:void 0,showStartConversation:!0,shouldDisplayMinimizedComments:!1,shouldDisplayCollapseComments:!0,toggleViewingMarkers:ai.l,viewerData:{avatarUrl:"string",diffViewPreference:"string",lineSpacingPreference:"compact",login:"string",shouldDisplayComments:!0,shouldDisplayEditOptions:!0,tabSizePreference:8,viewerCanComment:!0,viewerCanApplySuggestion:!0}})]})]})}),f[21]=K,f[22]=N,f[23]=E,f[24]=z,f[25]=S,f[26]=h,f[27]=g,f[28]=P,f[29]=C,f[30]=M,f[31]=R,f[32]=H,f[33]=A,f[34]=G,f[35]=T,f[36]=Q,f[37]=y,f[38]=O,f[39]=L,f[40]=U,f[41]=k,f[42]=m):m=f[42],m}:function({diffLine:e,filePath:t,avatarURL:n,userLogin:r,viewerCanApplySuggestion:a}){let s="HUNK"===e.type,o="ADDITION"!==e.type,d="DELETION"!==e.type,c=X(),u=(0,_.qX)(c,e,e),m=(0,_.u6)(u,2),f={avatarUrl:n??"",login:r??"",viewerCanApplySuggestion:a??!1},h=(0,_.Yf)(e.type,!0,!1),g=(0,_.Yf)(e.type,!1,!1),[p,b]=(0,_.x_)(e.html,e.type),x=b&&["+","-"].includes(b),[C,y]=(0,l.useState)(!1),[L,S]=(0,l.useState)(!1),N="DELETION"!==e.type?"RIGHT":"LEFT",j="RIGHT"===N?e.right:e.left,D=(0,_.oH)(j,N),{threads:w,annotations:k,commentsPreference:A}=(0,I.rP)(t,D??""),E=w.length+k.length!==0,R=(0,_.S4)({hasThreads:E&&A===ig.sI.Collapsed}),T=(0,l.useRef)(null),O=(0,l.useRef)(null),[M,$]=(0,l.useState)(w.length>0||k.length>0);return(0,i.jsx)("tr",{className:"diff-line-row",children:s?(0,i.jsx)("td",{colSpan:4,className:"flex-grow-0 bgColor-accent-muted",children:(0,i.jsx)("div",{className:"d-flex flex-row",children:(0,i.jsx)("code",{className:"diff-text-cell hunk",children:(0,i.jsx)(eX.$6,{className:"diff-text-inner color-fg-muted",html:e.html})})})}):(0,i.jsxs)(i.Fragment,{children:[o?(0,i.jsx)("td",{className:"text-center v-align-top",style:{backgroundColor:h},children:(0,i.jsx)("code",{children:e.left})}):(0,i.jsx)("td",{style:{userSelect:"none",position:"relative",backgroundColor:h}}),d?(0,i.jsx)("td",{className:"text-center v-align-top",style:{backgroundColor:h},children:(0,i.jsx)("code",{children:e.right})}):(0,i.jsx)("td",{style:{userSelect:"none",position:"relative",backgroundColor:h}}),(0,i.jsxs)("td",{className:"diff-text-cell",style:{backgroundColor:g},onMouseEnter:()=>S(!0),onMouseLeave:()=>S(!1),children:[(0,i.jsxs)("code",{className:(0,v.$)("diff-text syntax-highlighted-line",{addition:"ADDITION"===e.type,deletion:"DELETION"===e.type}),children:[x&&(0,i.jsx)("span",{className:"diff-text-marker",children:b}),(0,i.jsx)(eX.$6,{html:p,className:"diff-text-inner"})]}),M?(0,i.jsx)(io,{diffLine:e,gridCellId:m,gutterSizeOffset:R,inlineMarkersRef:T,cellRef:O,fileAnchor:c,dispatchMarkersStatus:ai.l,lineMarkersKey:D,annotations:k,conversationListThreads:w,filePath:t,onCloseFocusMode:ai.l,isRowSelected:!1,lineType:e.type,viewerData:f,onCloseConversationList:ai.l,onDeleteLineComment:ai.l,children:C&&(0,i.jsx)("div",{className:(0,v.$)(" border rounded-2 color-border-default",(w.length,"mt-2 mb-1")),children:(0,i.jsx)(nu,{diffLine:e,diffAnchor:c,batchingEnabled:!0,filePath:t,focusOnMount:!0,isLeftSide:"LEFT"===N,isInDialogMode:!1,isOpen:C,lineNumber:e.blobLineNumber,viewerData:f,onCloseCommentDialog:()=>y(!1)})})}):null,L&&(0,i.jsx)(al,{openStartConversationDialog:()=>{y(!0),$(!0)},authorAvatarUrl:"undefined",authorLogin:"undefined",ref:O,copilotChatReference:void 0,currentHunk:void 0,diffAnchor:c,diffLine:e,threads:w,annotations:k,handleCopyCode:ai.l,hasDraftComment:!1,isLeftSide:"LEFT"===N,isSplit:!1,nextHunk:void 0,previousHunk:void 0,showStartConversation:!0,shouldDisplayMinimizedComments:!1,shouldDisplayCollapseComments:!0,toggleViewingMarkers:ai.l,viewerData:{avatarUrl:"string",diffViewPreference:"string",lineSpacingPreference:"compact",login:"string",shouldDisplayComments:!0,shouldDisplayEditOptions:!0,tabSizePreference:8,viewerCanComment:!0,viewerCanApplySuggestion:!0}})]})]})})};try{ao.displayName||(ao.displayName="SimpleUnifiedDiffRow")}catch{}function ad({diffLines:e,filePath:t,avatarURL:n,userLogin:r,viewerCanApplySuggestion:a}){return e.map(e=>{let s=`unified-diff-row-l:${e.left}-r:${e.right}-b:${e.blobLineNumber}`;return(0,i.jsx)(ao,{diffLine:e,filePath:t,avatarURL:n,userLogin:r,viewerCanApplySuggestion:a},s)})}try{ad.displayName||(ad.displayName="SimpleUnifiedDiffLines")}catch{}let ac=(0,r.GV)()?function(e){let t,n,r,s,o,d,c,u,m,f,h,g,p,b,x,C,y=(0,a.c)(68),{leftDiffLine:L,rightDiffLine:S,filePath:N,avatarURL:j,userLogin:D,viewerCanApplySuggestion:w}=e,k=L?.type==="HUNK",A=X();y[0]!==L?(t=L?(0,_.Yf)(L.type,!0,!1):"",y[0]=L,y[1]=t):t=y[1];let E=t;y[2]!==S?(n=S?(0,_.Yf)(S.type,!0,!1):"",y[2]=S,y[3]=n):n=y[3];let R=n;y[4]!==L?(r=L?(0,_.Yf)(L.type,!1,!1):"",y[4]=L,y[5]=r):r=y[5];let T=r;y[6]!==S?(s=S?(0,_.Yf)(S.type,!1,!1):"",y[6]=S,y[7]=s):s=y[7];let O=s;if(y[8]!==A||y[9]!==L||y[10]!==S){let e=L?(0,_.qX)(A,L,S):"";o=(0,_.u6)(e,1),d=(0,_.u6)(e,3),y[8]=A,y[9]=L,y[10]=S,y[11]=o,y[12]=d}else o=y[11],d=y[12];let M=d;y[13]!==L?(c=L?(0,_.x_)(L.html,L.type):[void 0,void 0],y[13]=L,y[14]=c):c=y[14];let[$,P]=c;y[15]!==P?(u=P&&["+","-"].includes(P),y[15]=P,y[16]=u):u=y[16];let F=u;y[17]!==S?(m=S?(0,_.x_)(S.html,S.type):[void 0,void 0],y[17]=S,y[18]=m):m=y[18];let[G,V]=m;y[19]!==V?(f=V&&["+","-"].includes(V),y[19]=V,y[20]=f):f=y[20];let H=f;y[21]!==L?(h=L?(0,_.oH)(L.left,"LEFT"):void 0,y[21]=L,y[22]=h):h=y[22];let U=h,{threads:K,annotations:B}=(0,I.rP)(N,U??""),q=j??"",z=D??"",W=w??!1;y[23]!==q||y[24]!==z||y[25]!==W?(g={avatarUrl:q,login:z,viewerCanApplySuggestion:W},y[23]=q,y[24]=z,y[25]=W,y[26]=g):g=y[26];let Z=g;y[27]!==S?(p=S?(0,_.oH)(S.right,"RIGHT"):void 0,y[27]=S,y[28]=p):p=y[28];let Q=p,{threads:J,annotations:Y,commentsPreference:ee}=(0,I.rP)(N,Q??""),[et,en]=(0,l.useState)(!1),[ei,er]=(0,l.useState)(!1),[ea,es]=(0,l.useState)(!1),[el,eo]=(0,l.useState)(!1),[ed,ec]=(0,l.useState)(K.length>0||B.length>0),[eu,em]=(0,l.useState)(J.length>0||Y.length>0),ef=K.length+B.length!==0,eh=J.length+Y.length!==0,eg=ef&&ee===ig.sI.Collapsed;y[29]!==eg?(b=(0,_.S4)({hasThreads:eg}),y[29]=eg,y[30]=b):b=y[30];let ep=b,eb=eh&&ee===ig.sI.Collapsed;y[31]!==eb?(x=(0,_.S4)({hasThreads:eb}),y[31]=eb,y[32]=x):x=y[32];let ev=x,ex=(0,l.useRef)(null),eC=(0,l.useRef)(null);return y[33]!==j||y[34]!==A||y[35]!==N||y[36]!==k||y[37]!==ei||y[38]!==et||y[39]!==el||y[40]!==ea||y[41]!==B||y[42]!==o||y[43]!==T||y[44]!==ep||y[45]!==L||y[46]!==$||y[47]!==U||y[48]!==E||y[49]!==P||y[50]!==K||y[51]!==Y||y[52]!==M||y[53]!==O||y[54]!==ev||y[55]!==S||y[56]!==G||y[57]!==Q||y[58]!==R||y[59]!==V||y[60]!==J||y[61]!==ed||y[62]!==F||y[63]!==eu||y[64]!==H||y[65]!==D||y[66]!==Z?(C=(0,i.jsx)("tr",{className:"diff-line-row",children:k?(0,i.jsx)("td",{colSpan:4,className:"flex-grow-0 bgColor-accent-muted",children:(0,i.jsx)("div",{className:"d-flex flex-row",children:(0,i.jsx)("code",{className:"diff-text-cell hunk",children:(0,i.jsx)(eX.$6,{className:"diff-text-inner color-fg-muted",html:L.html})})})}):(0,i.jsxs)(i.Fragment,{children:[L?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("td",{className:"text-center v-align-top",style:{backgroundColor:E},children:(0,i.jsx)("code",{children:L.left})}),(0,i.jsxs)("td",{className:"diff-text-cell",style:{backgroundColor:T},onMouseEnter:()=>er(!0),onMouseLeave:()=>er(!1),children:[(0,i.jsxs)("code",{className:(0,v.$)("diff-text syntax-highlighted-line",{addition:"ADDITION"===L.type,deletion:"DELETION"===L.type}),children:[F&&(0,i.jsx)("span",{className:"diff-text-marker",children:P}),(0,i.jsx)(eX.$6,{html:$,className:"diff-text-inner"})]}),ed&&(0,i.jsx)(io,{diffLine:L,gridCellId:o,gutterSizeOffset:ep,inlineMarkersRef:ex,cellRef:eC,fileAnchor:A,dispatchMarkersStatus:ai.l,lineMarkersKey:U,annotations:B,conversationListThreads:K,filePath:N,onCloseFocusMode:ai.l,isRowSelected:!1,lineType:L.type,onCloseConversationList:ai.l,onDeleteLineComment:ai.l,viewerData:Z,children:et&&(0,i.jsx)("div",{className:(0,v.$)(" border rounded-2 color-border-default","mt-2 mb-1"),children:(0,i.jsx)(nu,{diffLine:L,diffAnchor:A,batchingEnabled:!0,filePath:N,focusOnMount:!1,isLeftSide:!0,isInDialogMode:!1,isOpen:!0,lineNumber:L.left??void 0,viewerData:Z,onCloseCommentDialog:()=>en(!1)})})}),ei&&(0,i.jsx)(al,{openStartConversationDialog:()=>{en(!0),ec(!0)},authorAvatarUrl:"undefined",authorLogin:"undefined",ref:eC,copilotChatReference:void 0,currentHunk:void 0,diffAnchor:A,diffLine:L,threads:K,annotations:B,handleCopyCode:ai.l,hasDraftComment:!1,isLeftSide:!0,isSplit:!1,nextHunk:void 0,previousHunk:void 0,showStartConversation:!0,shouldDisplayMinimizedComments:!1,shouldDisplayCollapseComments:!0,toggleViewingMarkers:ai.l,viewerData:{avatarUrl:"string",diffViewPreference:"string",lineSpacingPreference:"compact",login:"string",shouldDisplayComments:!0,shouldDisplayEditOptions:!0,tabSizePreference:8,viewerCanComment:!0,viewerCanApplySuggestion:!0}})]})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("td",{style:{userSelect:"none",position:"relative",backgroundColor:E}}),(0,i.jsx)("td",{style:{userSelect:"none",position:"relative",backgroundColor:E}})]}),S?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("td",{className:"text-center v-align-top",style:{backgroundColor:R},children:(0,i.jsx)("code",{children:S.right})}),(0,i.jsxs)("td",{className:"diff-text-cell",style:{backgroundColor:O},onMouseEnter:()=>eo(!0),onMouseLeave:()=>eo(!1),children:[(0,i.jsxs)("code",{className:(0,v.$)("diff-text syntax-highlighted-line",{addition:"ADDITION"===S.type,deletion:"DELETION"===S.type}),children:[H&&(0,i.jsx)("span",{className:"diff-text-marker",children:V}),(0,i.jsx)(eX.$6,{html:G,className:"diff-text-inner"})]}),eu&&(0,i.jsx)(io,{diffLine:S,gridCellId:M,gutterSizeOffset:ev,inlineMarkersRef:ex,cellRef:eC,fileAnchor:A,dispatchMarkersStatus:ai.l,lineMarkersKey:Q,annotations:Y,conversationListThreads:J,filePath:N,viewerData:Z,onCloseFocusMode:ai.l,isRowSelected:!1,lineType:S.type,onCloseConversationList:ai.l,onDeleteLineComment:ai.l,children:ea&&(0,i.jsx)("div",{className:(0,v.$)(" border rounded-2 color-border-default","mt-2 mb-1"),children:(0,i.jsx)(nu,{diffLine:S,diffAnchor:A,batchingEnabled:!0,filePath:N,focusOnMount:!1,isLeftSide:!1,isInDialogMode:!1,isOpen:!0,lineNumber:S.right??void 0,viewerData:{avatarUrl:j??"",login:D??""},onCloseCommentDialog:()=>es(!1)})})}),el&&(0,i.jsx)(al,{openStartConversationDialog:()=>{es(!0),em(!0)},authorAvatarUrl:"undefined",authorLogin:"undefined",ref:eC,copilotChatReference:void 0,currentHunk:void 0,diffAnchor:"diff-blah",diffLine:S,threads:J,annotations:Y,handleCopyCode:ai.l,hasDraftComment:!1,isLeftSide:!1,isSplit:!1,nextHunk:void 0,previousHunk:void 0,showStartConversation:!0,shouldDisplayMinimizedComments:!1,shouldDisplayCollapseComments:!0,toggleViewingMarkers:ai.l,viewerData:{avatarUrl:"string",diffViewPreference:"string",lineSpacingPreference:"compact",login:"string",shouldDisplayComments:!0,shouldDisplayEditOptions:!0,tabSizePreference:8,viewerCanComment:!0,viewerCanApplySuggestion:!0}})]})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("td",{style:{userSelect:"none",position:"relative",backgroundColor:R}}),(0,i.jsx)("td",{style:{userSelect:"none",position:"relative",backgroundColor:R}})]})]})}),y[33]=j,y[34]=A,y[35]=N,y[36]=k,y[37]=ei,y[38]=et,y[39]=el,y[40]=ea,y[41]=B,y[42]=o,y[43]=T,y[44]=ep,y[45]=L,y[46]=$,y[47]=U,y[48]=E,y[49]=P,y[50]=K,y[51]=Y,y[52]=M,y[53]=O,y[54]=ev,y[55]=S,y[56]=G,y[57]=Q,y[58]=R,y[59]=V,y[60]=J,y[61]=ed,y[62]=F,y[63]=eu,y[64]=H,y[65]=D,y[66]=Z,y[67]=C):C=y[67],C}:function({leftDiffLine:e,rightDiffLine:t,filePath:n,avatarURL:r,userLogin:a,viewerCanApplySuggestion:s}){let o=e?.type==="HUNK",d=X(),c=e?(0,_.Yf)(e.type,!0,!1):"",u=t?(0,_.Yf)(t.type,!0,!1):"",m=e?(0,_.Yf)(e.type,!1,!1):"",f=t?(0,_.Yf)(t.type,!1,!1):"",h=e?(0,_.qX)(d,e,t):"",g=(0,_.u6)(h,1),p=(0,_.u6)(h,3),[b,x]=e?(0,_.x_)(e.html,e.type):[void 0,void 0],C=x&&["+","-"].includes(x),[y,L]=t?(0,_.x_)(t.html,t.type):[void 0,void 0],S=L&&["+","-"].includes(L),N=e?(0,_.oH)(e.left,"LEFT"):void 0,{threads:j,annotations:D}=(0,I.rP)(n,N??""),w={avatarUrl:r??"",login:a??"",viewerCanApplySuggestion:s??!1},k=t?(0,_.oH)(t.right,"RIGHT"):void 0,{threads:A,annotations:E,commentsPreference:R}=(0,I.rP)(n,k??""),[T,O]=(0,l.useState)(!1),[M,$]=(0,l.useState)(!1),[P,F]=(0,l.useState)(!1),[G,V]=(0,l.useState)(!1),[H,U]=(0,l.useState)(j.length>0||D.length>0),[K,B]=(0,l.useState)(A.length>0||E.length>0),q=j.length+D.length!==0,z=A.length+E.length!==0,W=(0,_.S4)({hasThreads:q&&R===ig.sI.Collapsed}),Z=(0,_.S4)({hasThreads:z&&R===ig.sI.Collapsed}),Q=(0,l.useRef)(null),J=(0,l.useRef)(null);return(0,i.jsx)("tr",{className:"diff-line-row",children:o?(0,i.jsx)("td",{colSpan:4,className:"flex-grow-0 bgColor-accent-muted",children:(0,i.jsx)("div",{className:"d-flex flex-row",children:(0,i.jsx)("code",{className:"diff-text-cell hunk",children:(0,i.jsx)(eX.$6,{className:"diff-text-inner color-fg-muted",html:e.html})})})}):(0,i.jsxs)(i.Fragment,{children:[e?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("td",{className:"text-center v-align-top",style:{backgroundColor:c},children:(0,i.jsx)("code",{children:e.left})}),(0,i.jsxs)("td",{className:"diff-text-cell",style:{backgroundColor:m},onMouseEnter:()=>$(!0),onMouseLeave:()=>$(!1),children:[(0,i.jsxs)("code",{className:(0,v.$)("diff-text syntax-highlighted-line",{addition:"ADDITION"===e.type,deletion:"DELETION"===e.type}),children:[C&&(0,i.jsx)("span",{className:"diff-text-marker",children:x}),(0,i.jsx)(eX.$6,{html:b,className:"diff-text-inner"})]}),H&&(0,i.jsx)(io,{diffLine:e,gridCellId:g,gutterSizeOffset:W,inlineMarkersRef:Q,cellRef:J,fileAnchor:d,dispatchMarkersStatus:ai.l,lineMarkersKey:N,annotations:D,conversationListThreads:j,filePath:n,onCloseFocusMode:ai.l,isRowSelected:!1,lineType:e.type,onCloseConversationList:ai.l,onDeleteLineComment:ai.l,viewerData:w,children:T&&(0,i.jsx)("div",{className:(0,v.$)(" border rounded-2 color-border-default","mt-2 mb-1"),children:(0,i.jsx)(nu,{diffLine:e,diffAnchor:d,batchingEnabled:!0,filePath:n,focusOnMount:!1,isLeftSide:!0,isInDialogMode:!1,isOpen:!0,lineNumber:e.left??void 0,viewerData:w,onCloseCommentDialog:()=>O(!1)})})}),M&&(0,i.jsx)(al,{openStartConversationDialog:()=>{O(!0),U(!0)},authorAvatarUrl:"undefined",authorLogin:"undefined",ref:J,copilotChatReference:void 0,currentHunk:void 0,diffAnchor:d,diffLine:e,threads:j,annotations:D,handleCopyCode:ai.l,hasDraftComment:!1,isLeftSide:!0,isSplit:!1,nextHunk:void 0,previousHunk:void 0,showStartConversation:!0,shouldDisplayMinimizedComments:!1,shouldDisplayCollapseComments:!0,toggleViewingMarkers:ai.l,viewerData:{avatarUrl:"string",diffViewPreference:"string",lineSpacingPreference:"compact",login:"string",shouldDisplayComments:!0,shouldDisplayEditOptions:!0,tabSizePreference:8,viewerCanComment:!0,viewerCanApplySuggestion:!0}})]})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("td",{style:{userSelect:"none",position:"relative",backgroundColor:c}}),(0,i.jsx)("td",{style:{userSelect:"none",position:"relative",backgroundColor:c}})]}),t?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("td",{className:"text-center v-align-top",style:{backgroundColor:u},children:(0,i.jsx)("code",{children:t.right})}),(0,i.jsxs)("td",{className:"diff-text-cell",style:{backgroundColor:f},onMouseEnter:()=>V(!0),onMouseLeave:()=>V(!1),children:[(0,i.jsxs)("code",{className:(0,v.$)("diff-text syntax-highlighted-line",{addition:"ADDITION"===t.type,deletion:"DELETION"===t.type}),children:[S&&(0,i.jsx)("span",{className:"diff-text-marker",children:L}),(0,i.jsx)(eX.$6,{html:y,className:"diff-text-inner"})]}),K&&(0,i.jsx)(io,{diffLine:t,gridCellId:p,gutterSizeOffset:Z,inlineMarkersRef:Q,cellRef:J,fileAnchor:d,dispatchMarkersStatus:ai.l,lineMarkersKey:k,annotations:E,conversationListThreads:A,filePath:n,viewerData:w,onCloseFocusMode:ai.l,isRowSelected:!1,lineType:t.type,onCloseConversationList:ai.l,onDeleteLineComment:ai.l,children:P&&(0,i.jsx)("div",{className:(0,v.$)(" border rounded-2 color-border-default","mt-2 mb-1"),children:(0,i.jsx)(nu,{diffLine:t,diffAnchor:d,batchingEnabled:!0,filePath:n,focusOnMount:!1,isLeftSide:!1,isInDialogMode:!1,isOpen:!0,lineNumber:t.right??void 0,viewerData:{avatarUrl:r??"",login:a??""},onCloseCommentDialog:()=>F(!1)})})}),G&&(0,i.jsx)(al,{openStartConversationDialog:()=>{F(!0),B(!0)},authorAvatarUrl:"undefined",authorLogin:"undefined",ref:J,copilotChatReference:void 0,currentHunk:void 0,diffAnchor:"diff-blah",diffLine:t,threads:A,annotations:E,handleCopyCode:ai.l,hasDraftComment:!1,isLeftSide:!1,isSplit:!1,nextHunk:void 0,previousHunk:void 0,showStartConversation:!0,shouldDisplayMinimizedComments:!1,shouldDisplayCollapseComments:!0,toggleViewingMarkers:ai.l,viewerData:{avatarUrl:"string",diffViewPreference:"string",lineSpacingPreference:"compact",login:"string",shouldDisplayComments:!0,shouldDisplayEditOptions:!0,tabSizePreference:8,viewerCanComment:!0,viewerCanApplySuggestion:!0}})]})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("td",{style:{userSelect:"none",position:"relative",backgroundColor:u}}),(0,i.jsx)("td",{style:{userSelect:"none",position:"relative",backgroundColor:u}})]})]})})};try{ac.displayName||(ac.displayName="SimpleSplitDiffRow")}catch{}function au(e){let t=[],n=[],i=()=>{for(;t.length<n.length;)t.push(void 0);for(;n.length<t.length;)n.push(void 0)};for(let r of e)switch(r.type){case"ADDITION":n.push(r);break;case"DELETION":t.push(r);break;case"CONTEXT":case"INJECTED_CONTEXT":case"HUNK":i(),t.push(r),n.push(r)}return i(),{leftLines:t,rightLines:n}}let am=(0,r.GV)()?function(e){let t,n,i=(0,a.c)(5);i[0]!==e?(t=au(e),i[0]=e,i[1]=t):t=i[1];let{leftLines:r,rightLines:s}=t;return i[2]!==r||i[3]!==s?(n={leftLines:r,rightLines:s},i[2]=r,i[3]=s,i[4]=n):n=i[4],n}:function(e){let{leftLines:t,rightLines:n}=(0,l.useMemo)(()=>au(e),[e]);return{leftLines:t,rightLines:n}},af=(0,r.GV)()?function(e){let t,n=(0,a.c)(7),{diffLines:r,filePath:s,avatarURL:l,userLogin:o,viewerCanApplySuggestion:d}=e,{leftLines:c,rightLines:u}=am(r);return n[0]!==l||n[1]!==s||n[2]!==c||n[3]!==u||n[4]!==o||n[5]!==d?(t=c.map((e,t)=>{let n=c[t],r=u[t],a=`${(0,_.Po)(n)||!n?`empty-left-diff-${t}`:n.blobLineNumber}-${(0,_.Po)(r)||!r?`empty-right-diff-${t}`:r.blobLineNumber}`;return(0,i.jsx)(ac,{leftDiffLine:n,rightDiffLine:r,filePath:s,avatarURL:l,userLogin:o,viewerCanApplySuggestion:d},a)}),n[0]=l,n[1]=s,n[2]=c,n[3]=u,n[4]=o,n[5]=d,n[6]=t):t=n[6],t}:function({diffLines:e,filePath:t,avatarURL:n,userLogin:r,viewerCanApplySuggestion:a}){let{leftLines:s,rightLines:l}=am(e);return s.map((e,o)=>{let d=s[o],c=l[o],u=`${(0,_.Po)(d)||!d?`empty-left-diff-${o}`:d.blobLineNumber}-${(0,_.Po)(c)||!c?`empty-right-diff-${o}`:c.blobLineNumber}`;return(0,i.jsx)(ac,{leftDiffLine:d,rightDiffLine:c,filePath:t,avatarURL:n,userLogin:r,viewerCanApplySuggestion:a},u)})};try{af.displayName||(af.displayName="SimpleSplitDiffLines")}catch{}let ah=(0,r.GV)()?function(e){let t,n=(0,a.c)(3),{diffAnchor:r,children:s}=e;return n[0]!==s||n[1]!==r?(t=(0,i.jsx)("div",{className:"fgColor-muted p-2","data-diff-anchor":r,children:s}),n[0]=s,n[1]=r,n[2]=t):t=n[2],t}:function({diffAnchor:e,children:t}){return(0,i.jsx)("div",{className:"fgColor-muted p-2","data-diff-anchor":e,children:t})},ag=(0,l.memo)((0,r.GV)()?function(e){let t,n=(0,a.c)(39),{diffEntryData:r,diffLinesManuallyUnhidden:s,baseHelpUrl:l,onHandleLoadDiff:o,copilotChatReference:d,hasExpandedAllRanges:c,isSplitView:u,subjectId:m,viewerData:f}=e,h=`diff-${r.pathDigest}`;if(r.isBinary){let e;return n[0]!==h?(e=(0,i.jsx)(ah,{diffAnchor:h,children:"Binary file not shown."}),n[0]=h,n[1]=e):e=n[1],e}if((0,e0.dK)(r)){let e;return n[2]!==h?(e=(0,i.jsx)(ah,{diffAnchor:h,children:"File renamed without changes."}),n[2]=h,n[3]=e):e=n[3],e}if((0,e0.Jc)(r)){let e;return n[4]!==h?(e=(0,i.jsx)(ah,{diffAnchor:h,children:"File copied without changes."}),n[4]=h,n[5]=e):e=n[5],e}if((0,e0.Sn)(r,r.status,r.oldTreeEntry?.mode,r.newTreeEntry?.mode)){let e;return n[6]!==h?(e=(0,i.jsx)(ah,{diffAnchor:h,children:"File mode changed."}),n[6]=h,n[7]=e):e=n[7],e}if(!s&&(0,e0.HI)(r)){let e,t,a=r.truncatedReason;return n[8]!==a?(e=(0,e0.l_)(a),n[8]=a,n[9]=e):e=n[9],n[10]!==h||n[11]!==o||n[12]!==e?(t=(0,i.jsx)(e5,{diffAnchor:h,onLoadDiff:o,children:e}),n[10]=h,n[11]=o,n[12]=e,n[13]=t):t=n[13],t}if((0,e0.s8)(r)){let e;return n[14]!==h?(e=(0,i.jsx)(ah,{diffAnchor:h,children:"Whitespace-only changes."}),n[14]=h,n[15]=e):e=n[15],e}if(!s&&(0,e0.lO)(r)){let e;return n[16]!==h||n[17]!==o?(e=(0,i.jsx)(e5,{diffAnchor:h,onLoadDiff:o,children:"This file was deleted."}),n[16]=h,n[17]=o,n[18]=e):e=n[18],e}if(!s&&(0,e0.xW)(r)){let e,t=`${l}/github/administering-a-repository/customizing-how-changed-files-appear-on-github`;return n[19]!==h||n[20]!==o||n[21]!==t?(e=(0,i.jsxs)(e5,{diffAnchor:h,helpText:"customizing how changed files appear on GitHub.",helpUrl:t,onLoadDiff:o,children:["Some generated files are not rendered by default. Learn more about"," "]}),n[19]=h,n[20]=o,n[21]=t,n[22]=e):e=n[22],e}if(r.isTooBig&&0===r.diffLines.length)if(s){let e,t,r=`${l}/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally`;return n[23]!==r?(e=(0,i.jsx)(e3.A,{inline:!0,href:r,children:"check out this pull request locally."}),n[23]=r,n[24]=e):e=n[24],n[25]!==h||n[26]!==e?(t=(0,i.jsxs)(ah,{diffAnchor:h,children:["Diff is too big to render. To view,"," ",e]}),n[25]=h,n[26]=e,n[27]=t):t=n[27],t}else{let e;return n[28]!==h||n[29]!==o?(e=(0,i.jsx)(e5,{diffAnchor:h,onLoadDiff:o,children:"Large diffs are not rendered by default."}),n[28]=h,n[29]=o,n[30]=e):e=n[30],e}return r.diffLines?(n[31]!==d||n[32]!==h||n[33]!==r||n[34]!==c||n[35]!==u||n[36]!==m||n[37]!==f?(t=(0,i.jsx)(ap,{diffAnchor:h,diffEntryData:r,viewerData:f,copilotChatReference:d,hasExpandedAllRanges:c,isSplitView:u,subjectId:m}),n[31]=d,n[32]=h,n[33]=r,n[34]=c,n[35]=u,n[36]=m,n[37]=f,n[38]=t):t=n[38],t):null}:function({diffEntryData:e,diffLinesManuallyUnhidden:t,baseHelpUrl:n,onHandleLoadDiff:r,copilotChatReference:a,hasExpandedAllRanges:s,isSplitView:l,subjectId:o,viewerData:d}){let c=`diff-${e.pathDigest}`;if(e.isBinary)return(0,i.jsx)(ah,{diffAnchor:c,children:"Binary file not shown."});if((0,e0.dK)(e))return(0,i.jsx)(ah,{diffAnchor:c,children:"File renamed without changes."});if((0,e0.Jc)(e))return(0,i.jsx)(ah,{diffAnchor:c,children:"File copied without changes."});if((0,e0.Sn)(e,e.status,e.oldTreeEntry?.mode,e.newTreeEntry?.mode))return(0,i.jsx)(ah,{diffAnchor:c,children:"File mode changed."});if(!t&&(0,e0.HI)(e))return(0,i.jsx)(e5,{diffAnchor:c,onLoadDiff:r,children:(0,e0.l_)(e.truncatedReason)});if((0,e0.s8)(e))return(0,i.jsx)(ah,{diffAnchor:c,children:"Whitespace-only changes."});if(!t&&(0,e0.lO)(e))return(0,i.jsx)(e5,{diffAnchor:c,onLoadDiff:r,children:"This file was deleted."});if(!t&&(0,e0.xW)(e))return(0,i.jsxs)(e5,{diffAnchor:c,helpText:"customizing how changed files appear on GitHub.",helpUrl:`${n}/github/administering-a-repository/customizing-how-changed-files-appear-on-github`,onLoadDiff:r,children:["Some generated files are not rendered by default. Learn more about"," "]});if(e.isTooBig&&0===e.diffLines.length)if(t)return(0,i.jsxs)(ah,{diffAnchor:c,children:["Diff is too big to render. To view,"," ",(0,i.jsx)(e3.A,{inline:!0,href:`${n}/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally`,children:"check out this pull request locally."})]});else return(0,i.jsx)(e5,{diffAnchor:c,onLoadDiff:r,children:"Large diffs are not rendered by default."});return e.diffLines?(0,i.jsx)(ap,{diffAnchor:c,diffEntryData:e,viewerData:d,copilotChatReference:a,hasExpandedAllRanges:s,isSplitView:l,subjectId:o}):null}),ap=(0,r.GV)()?function(e){let t,n,r,s,o,d,c,u,m,h,g,b,x,C,y,L,S,N,j=(0,a.c)(61),{diffAnchor:D,viewerData:w,diffEntryData:I,copilotChatReference:k,hasExpandedAllRanges:A,isSplitView:E,subjectId:R}=e,_=(0,l.useRef)(null),{clearSelectedLines:T}=Y(),[O,M]=(0,l.useState)(null),[$,P]=(0,l.useState)(!1),F=I.newTreeEntry?.lineCount??I.oldTreeEntry?.lineCount??0;j[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,e4.G7)("pr_simple_diffs"),j[0]=t):t=j[0];let G=t;e:{let e=I.diffLines[I.diffLines.length-1];if(e?.blobLineNumber&&e.blobLineNumber<F){let t;j[1]!==I.diffLines||j[2]!==e.blobLineNumber?(t=I.diffLines.concat({__id:e7,blobLineNumber:e.blobLineNumber+1,left:null,right:null,type:"HUNK",html:"",text:""}),j[1]=I.diffLines,j[2]=e.blobLineNumber,j[3]=t):t=j[3],n=t;break e}n=I.diffLines}let V=n,{lineSpacingPreference:H,tabSizePreference:U}=w,K=B();j[4]!==T||j[5]!==K?(r=e=>{if(!_.current||!e.target)return;let t=e.target;!_.current.contains(t)&&(t.closest("td.diff-line-number")||t.closest("[data-add-comment-button]"))&&K()&&(T(),ey(),(0,f.K3)())},j[4]=T,j[5]=K,j[6]=r):r=j[6];let q=r;j[7]!==q?(s=()=>(p.XC?.addEventListener("mousedown",q),()=>{p.XC?.removeEventListener("mousedown",q)}),o=[q],j[7]=q,j[8]=s,j[9]=o):(s=j[8],o=j[9]),(0,l.useEffect)(s,o);t:{let e,t=I.status,n=I.oldTreeEntry?.path,i=I.newTreeEntry?.path;if(!n&&!i){d=void 0;break t}e="RENAMED"===t?`${n} renamed to ${i}`:"DELETED"===t||"REMOVED"===t?n:i,d=`Diff for: ${e}`}let z=d;j[10]!==V?(c=(0,e2.c7)(V),j[10]=V,j[11]=c):c=j[11];let W=c;j[12]===Symbol.for("react.memo_cache_sentinel")?(u=e=>{M(e)},j[12]=u):u=j[12];let X=u;j[13]!==I.path||j[14]!==A?(m=e=>{if(e.shiftKey&&e.metaKey&&"ArrowLeft"===e.key&&!A&&e.target?.getAttribute("role")==="gridcell"){let e=document.querySelector(`.js-expand-all-difflines-button[data-file-path="${I.path}"]`);e?.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0}))}},j[13]=I.path,j[14]=A,j[15]=m):m=j[15];let Z=m;j[16]!==O||j[17]!==E?(h=e=>{let t=document.getSelection();if(t){let n=[];for(let e=0;e<t.rangeCount;e++){let i=t.getRangeAt(e).cloneContents();if(i.querySelectorAll("td").length){let e=`td.diff-line-number, span.diff-text-marker${E?`, ${"left"===O?"td.left-side-diff-cell":"td.right-side-diff-cell"}`:""}`;for(let t of i.querySelectorAll(e))t.parentNode&&t.parentNode.removeChild(t);for(let e of i.children){if(0===e.querySelectorAll("td.diff-text-cell").length)continue;let t=e.textContent;`
`===t?n.push(""):n.push(t)}}else if(1===t.rangeCount){let e=t.toString();if(!e)continue;n.push(e)}else{let e=i.textContent;if(!e)continue;n.push(e)}}e.clipboardData.setData("text/plain",n.join(`
`)),e.preventDefault()}},j[16]=O,j[17]=E,j[18]=h):h=j[18];let Q=h;j[19]!==V?(g=V.some(ab),j[19]=V,j[20]=g):g=j[20];let J=g;j[21]!==k||j[22]!==D||j[23]!==I.path||j[24]!==J||j[25]!==V||j[26]!==F||j[27]!==$||j[28]!==R||j[29]!==w?(b={diffHasHiddenUnicodeCharacters:J,diffLines:V,fileAnchor:D,fileLineCount:F,filePath:I.path,handleDiffSideCellSelectionBlocking:X,showHiddenUnicode:$,tableRef:_,copilotChatReference:k,subjectId:R,viewerData:w},j[21]=k,j[22]=D,j[23]=I.path,j[24]=J,j[25]=V,j[26]=F,j[27]=$,j[28]=R,j[29]=w,j[30]=b):b=j[30];let ee=b;j[31]!==J||j[32]!==$?(x=J&&(0,i.jsx)(an.a,{isShown:$,toggleShowHiddenCharacters:()=>P(!$)}),j[31]=J,j[32]=$,j[33]=x):x=j[33];let et="compact"===H;j[34]!==et?(C=(0,v.$)("tab-size","width-full",ae,{[at]:et}),j[34]=et,j[35]=C):C=j[35];let en=`${W}px`,ei=`${2*parseFloat(W)}px`;return j[36]!==en||j[37]!==ei?(y={"--line-number-cell-width":en,"--line-number-cell-width-unified":ei},j[36]=en,j[37]=ei,j[38]=y):y=j[38],j[39]!==I.path||j[40]!==V||j[41]!==ee||j[42]!==E||j[43]!==W||j[44]!==w.avatarUrl||j[45]!==w.login||j[46]!==w.viewerCanApplySuggestion?(L=E?(0,i.jsx)(e1.wj,{lineWidth:W,children:G?(0,i.jsx)(af,{diffLines:V,filePath:I.path,avatarURL:w.avatarUrl,userLogin:w.login,viewerCanApplySuggestion:w.viewerCanApplySuggestion}):(0,i.jsx)(r5,{...ee})}):(0,i.jsx)(e1.Qe,{lineWidth:W,children:G?(0,i.jsx)(ad,{diffLines:V,filePath:I.path,avatarURL:w.avatarUrl,userLogin:w.login,viewerCanApplySuggestion:w.viewerCanApplySuggestion}):(0,i.jsx)(r8,{...ee})}),j[39]=I.path,j[40]=V,j[41]=ee,j[42]=E,j[43]=W,j[44]=w.avatarUrl,j[45]=w.login,j[46]=w.viewerCanApplySuggestion,j[47]=L):L=j[47],j[48]!==D||j[49]!==O||j[50]!==Z||j[51]!==Q||j[52]!==C||j[53]!==y||j[54]!==L||j[55]!==U||j[56]!==z?(S=(0,i.jsx)("table",{"aria-label":z,onKeyDown:Z,ref:_,className:C,"data-block-diff-cell-selection":O,"data-diff-anchor":D,"data-tab-size":U,"data-paste-markdown-skip":!0,onCopy:Q,role:"grid",style:y,children:L}),j[48]=D,j[49]=O,j[50]=Z,j[51]=Q,j[52]=C,j[53]=y,j[54]=L,j[55]=U,j[56]=z,j[57]=S):S=j[57],j[58]!==x||j[59]!==S?(N=(0,i.jsxs)(i.Fragment,{children:[x,S]}),j[58]=x,j[59]=S,j[60]=N):N=j[60],N}:function({diffAnchor:e,viewerData:t,diffEntryData:n,copilotChatReference:r,hasExpandedAllRanges:a,isSplitView:s,subjectId:o}){let d=(0,l.useRef)(null),{clearSelectedLines:c}=Y(),[u,m]=(0,l.useState)(null),[h,g]=(0,l.useState)(!1),b=n.newTreeEntry?.lineCount??n.oldTreeEntry?.lineCount??0,x=(0,e4.G7)("pr_simple_diffs"),C=(0,l.useMemo)(()=>{let e=n.diffLines[n.diffLines.length-1];return e?.blobLineNumber&&e.blobLineNumber<b?n.diffLines.concat({__id:e7,blobLineNumber:e.blobLineNumber+1,left:null,right:null,type:"HUNK",html:"",text:""}):n.diffLines},[n.diffLines,b]),{lineSpacingPreference:y,tabSizePreference:L}=t,S=B(),N=(0,l.useCallback)(e=>{if(!d.current||!e.target)return;let t=e.target;!d.current.contains(t)&&(t.closest("td.diff-line-number")||t.closest("[data-add-comment-button]"))&&S()&&(c(),ey(),(0,f.K3)())},[c,S]);(0,l.useEffect)(()=>(p.XC?.addEventListener("mousedown",N),()=>{p.XC?.removeEventListener("mousedown",N)}),[N]);let j=(0,l.useMemo)(()=>{let e,t=n.status,i=n.oldTreeEntry?.path,r=n.newTreeEntry?.path;if(i||r)return e="RENAMED"===t?`${i} renamed to ${r}`:"DELETED"===t||"REMOVED"===t?i:r,`Diff for: ${e}`},[n]),D=(0,e2.c7)(C),w=(0,l.useCallback)(e=>{m(e)},[m]),I=(0,l.useCallback)(e=>{if(e.shiftKey&&e.metaKey&&"ArrowLeft"===e.key&&!a&&e.target?.getAttribute("role")==="gridcell"){let e=document.querySelector(`.js-expand-all-difflines-button[data-file-path="${n.path}"]`);e?.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0}))}},[a,n.path]),k=(0,l.useCallback)(e=>{let t=document.getSelection();if(t){let n=[];for(let e=0;e<t.rangeCount;e++){let i=t.getRangeAt(e).cloneContents();if(i.querySelectorAll("td").length){let e=`td.diff-line-number, span.diff-text-marker${s?`, ${"left"===u?"td.left-side-diff-cell":"td.right-side-diff-cell"}`:""}`;for(let t of i.querySelectorAll(e))t.parentNode&&t.parentNode.removeChild(t);for(let e of i.children){if(0===e.querySelectorAll("td.diff-text-cell").length)continue;let t=e.textContent;`
`===t?n.push(""):n.push(t)}}else if(1===t.rangeCount){let e=t.toString();if(!e)continue;n.push(e)}else{let e=i.textContent;if(!e)continue;n.push(e)}}e.clipboardData.setData("text/plain",n.join(`
`)),e.preventDefault()}},[u,s]),A=(0,l.useMemo)(()=>C.some(e=>(0,tB.Y)(e.text)),[C]),E={diffHasHiddenUnicodeCharacters:A,diffLines:C,fileAnchor:e,fileLineCount:b,filePath:n.path,handleDiffSideCellSelectionBlocking:w,showHiddenUnicode:h,tableRef:d,copilotChatReference:r,subjectId:o,viewerData:t};return(0,i.jsxs)(i.Fragment,{children:[A&&(0,i.jsx)(an.a,{isShown:h,toggleShowHiddenCharacters:()=>g(!h)}),(0,i.jsx)("table",{"aria-label":j,onKeyDown:I,ref:d,className:(0,v.$)("tab-size","width-full",ae,{[at]:"compact"===y}),"data-block-diff-cell-selection":u,"data-diff-anchor":e,"data-tab-size":L,"data-paste-markdown-skip":!0,onCopy:k,role:"grid",style:{"--line-number-cell-width":`${D}px`,"--line-number-cell-width-unified":`${2*parseFloat(D)}px`},children:s?(0,i.jsx)(e1.wj,{lineWidth:D,children:x?(0,i.jsx)(af,{diffLines:C,filePath:n.path,avatarURL:t.avatarUrl,userLogin:t.login,viewerCanApplySuggestion:t.viewerCanApplySuggestion}):(0,i.jsx)(r5,{...E})}):(0,i.jsx)(e1.Qe,{lineWidth:D,children:x?(0,i.jsx)(ad,{diffLines:C,filePath:n.path,avatarURL:t.avatarUrl,userLogin:t.login,viewerCanApplySuggestion:t.viewerCanApplySuggestion}):(0,i.jsx)(r8,{...E})})})]})};function ab(e){return(0,tB.Y)(e.text)}try{ah.displayName||(ah.displayName="PlainTextStatus")}catch{}try{ag.displayName||(ag.displayName="DiffLines")}catch{}try{ap.displayName||(ap.displayName="CodeDiffLines")}catch{}var av=n(8431),ax=n(46251),aC=n(78049);let ay="SubmoduleDiff-module__filesActionList--sbPQt",aL="SubmoduleDiff-module__fileRowLinkItem--Z1ES5",aS="SubmoduleDiff-module__path--hB1wm",aN="SubmoduleDiff-module__fileRow--Y9n2E",aj="SubmoduleDiff-module__linesAdded--tJqtP",aD="SubmoduleDiff-module__linesDeleted--nr9cp",aw=(0,r.GV)()?function(e){let t,n,r,s,l,o,d=(0,a.c)(28),{submodule:u}=e,{basePath:m,changedFiles:f,contentsUrl:h,newCommitOid:g,oldCommitOid:p,status:b,submoduleUrl:v}=u,x=u.summary.length>0&&u.contentsUrl&&"MODIFIED"===b;switch(b){case"ADDED":{let e;d[0]!==h||d[1]!==g?(e=(0,i.jsx)(aA,{commitOid:g,contentsUrl:h,type:"added"}),d[0]=h,d[1]=g,d[2]=e):e=d[2],t=e;break}case"DELETED":case"REMOVED":{let e;d[3]!==h||d[4]!==p?(e=(0,i.jsx)(aA,{commitOid:p,contentsUrl:h,type:"deleted"}),d[3]=h,d[4]=p,d[5]=e):e=d[5],t=e;break}default:{let e;d[6]!==f||d[7]!==h||d[8]!==g||d[9]!==p?(e=(0,i.jsx)(aE,{newCommitOid:g,oldCommitOid:p,changedFiles:f,contentsUrl:h}),d[6]=f,d[7]=h,d[8]=g,d[9]=p,d[10]=e):e=d[10],t=e}}let C=t,y=`px-3 py-2 ${x?"border-bottom bgColor-muted":""}`;return d[11]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(c.FileSubmoduleIcon,{className:"fgColor-muted mr-2",size:16}),d[11]=n):n=d[11],d[12]!==m||d[13]!==v?(r=(0,i.jsx)(aI,{basePath:m,submoduleUrl:v}),d[12]=m,d[13]=v,d[14]=r):r=d[14],d[15]!==C||d[16]!==y||d[17]!==r?(s=(0,i.jsxs)("div",{className:y,children:[n,r,C]}),d[15]=C,d[16]=y,d[17]=r,d[18]=s):s=d[18],d[19]!==h||d[20]!==g||d[21]!==p||d[22]!==x||d[23]!==u.summary?(l=x&&(0,i.jsx)(eO.l,{className:ay,showDividers:!0,variant:"full",children:u.summary.map(e=>(0,i.jsx)(aR,{compareUrl:`${h}/compare/${p}...${g}`,linesAdded:e.linesAdded,linesDeleted:e.linesDeleted,path:e.path,pathDigest:e.pathDigest,status:e.status},e.pathDigest))}),d[19]=h,d[20]=g,d[21]=p,d[22]=x,d[23]=u.summary,d[24]=l):l=d[24],d[25]!==s||d[26]!==l?(o=(0,i.jsxs)("div",{children:[s,l]}),d[25]=s,d[26]=l,d[27]=o):o=d[27],o}:function({submodule:e}){let{basePath:t,changedFiles:n,contentsUrl:r,newCommitOid:a,oldCommitOid:s,status:o,submoduleUrl:d}=e,u=e.summary.length>0&&e.contentsUrl&&"MODIFIED"===o,m=(0,l.useMemo)(()=>{switch(o){case"ADDED":return(0,i.jsx)(aA,{commitOid:a,contentsUrl:r,type:"added"});case"DELETED":case"REMOVED":return(0,i.jsx)(aA,{commitOid:s,contentsUrl:r,type:"deleted"});default:return(0,i.jsx)(aE,{newCommitOid:a,oldCommitOid:s,changedFiles:n,contentsUrl:r})}},[a,s,o,n,r]);return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:`px-3 py-2 ${u?"border-bottom bgColor-muted":""}`,children:[(0,i.jsx)(c.FileSubmoduleIcon,{className:"fgColor-muted mr-2",size:16}),(0,i.jsx)(aI,{basePath:t,submoduleUrl:d}),m]}),u&&(0,i.jsx)(eO.l,{className:ay,showDividers:!0,variant:"full",children:e.summary.map(e=>(0,i.jsx)(aR,{compareUrl:`${r}/compare/${s}...${a}`,linesAdded:e.linesAdded,linesDeleted:e.linesDeleted,path:e.path,pathDigest:e.pathDigest,status:e.status},e.pathDigest))})]})},aI=(0,r.GV)()?function(e){let t,n,r=(0,a.c)(5),{basePath:s,submoduleUrl:l}=e;return r[0]!==s||r[1]!==l?(t=l?(0,i.jsx)(e3.A,{inline:!0,href:l,children:s}):s,r[0]=s,r[1]=l,r[2]=t):t=r[2],r[3]!==t?(n=(0,i.jsxs)(i.Fragment,{children:["Submodule"," ",t," "]}),r[3]=t,r[4]=n):n=r[4],n}:function({basePath:e,submoduleUrl:t}){return(0,i.jsxs)(i.Fragment,{children:["Submodule"," ",t?(0,i.jsx)(e3.A,{inline:!0,href:t,children:e}):e," "]})};function ak(e){return e.slice(0,7)}let aA=(0,r.GV)()?function(e){let t=(0,a.c)(13),{commitOid:n,contentsUrl:r,type:s}=e,l=void 0===n?"":n,o="added"===s?"added at":"deleted from";if(r){let e,n,a,s=`${r}/tree/${l}`;return t[0]!==l?(e=ak(l),t[0]=l,t[1]=e):e=t[1],t[2]!==s||t[3]!==e?(n=(0,i.jsx)(e3.A,{inline:!0,href:s,children:e}),t[2]=s,t[3]=e,t[4]=n):n=t[4],t[5]!==n||t[6]!==o?(a=(0,i.jsxs)(i.Fragment,{children:[o," ",n]}),t[5]=n,t[6]=o,t[7]=a):a=t[7],a}{let e,n;return t[8]!==l?(e=ak(l),t[8]=l,t[9]=e):e=t[9],t[10]!==e||t[11]!==o?(n=(0,i.jsxs)(i.Fragment,{children:[o," ",e]}),t[10]=e,t[11]=o,t[12]=n):n=t[12],n}}:function({commitOid:e="",contentsUrl:t,type:n}){let r="added"===n?"added at":"deleted from";return t?(0,i.jsxs)(i.Fragment,{children:[r," ",(0,i.jsx)(e3.A,{inline:!0,href:`${t}/tree/${e}`,children:ak(e)})]}):(0,i.jsxs)(i.Fragment,{children:[r," ",ak(e)]})},aE=(0,r.GV)()?function(e){let t,n,r,s=(0,a.c)(12),{newCommitOid:l,oldCommitOid:o,changedFiles:d,contentsUrl:c}=e,u=void 0===l?"":l,m=void 0===o?"":o,f=void 0===d?0:d;s[0]!==f||s[1]!==c||s[2]!==u||s[3]!==m?(t=f>0&&c?`${f} ${1===f?"file":"files"}`:`from ${ak(m)} to ${ak(u)}`,s[0]=f,s[1]=c,s[2]=u,s[3]=m,s[4]=t):t=s[4];let h=t;return s[5]!==h||s[6]!==c||s[7]!==u||s[8]!==m?(n=c?(0,i.jsx)(e3.A,{inline:!0,href:`${c}/compare/${m}...${u}`,children:h}):h,s[5]=h,s[6]=c,s[7]=u,s[8]=m,s[9]=n):n=s[9],s[10]!==n?(r=(0,i.jsxs)(i.Fragment,{children:["updated"," ",n]}),s[10]=n,s[11]=r):r=s[11],r}:function({newCommitOid:e="",oldCommitOid:t="",changedFiles:n=0,contentsUrl:r}){let a=n>0&&r?`${n} ${1===n?"file":"files"}`:`from ${ak(t)} to ${ak(e)}`;return(0,i.jsxs)(i.Fragment,{children:["updated"," ",r?(0,i.jsx)(e3.A,{inline:!0,href:`${r}/compare/${t}...${e}`,children:a}):a]})},aR=(0,r.GV)()?function(e){let t,n,r,l,o,d,c=(0,a.c)(16),{compareUrl:u,linesAdded:m,linesDeleted:f,path:h,pathDigest:g,status:p}=e,b=`${u}#diff-${g}`;return c[0]!==p?(t=(0,i.jsx)(aC.E,{status:p}),c[0]=p,c[1]=t):t=c[1],c[2]!==h?(n=(0,i.jsx)("span",{className:aS,children:h}),c[2]=h,c[3]=n):n=c[3],c[4]!==m||c[5]!==f?(r=(m>0||f>0)&&(0,i.jsxs)("div",{className:"d-flex flex-shrink-0 gap-1 flex-nowrap",children:[(0,i.jsx)("div",{className:aj,children:m>0&&(0,i.jsxs)(s.C,{isAddition:!0,children:["+",a_(m)]})}),(0,i.jsx)("div",{className:aD,children:f>0&&(0,i.jsxs)(s.C,{isAddition:!1,children:["-",a_(f)]})})]}),c[4]=m,c[5]=f,c[6]=r):r=c[6],c[7]!==n||c[8]!==r?(l=(0,i.jsxs)("div",{className:"d-flex gap-1 flex-justify-between width-full",children:[n,r]}),c[7]=n,c[8]=r,c[9]=l):l=c[9],c[10]!==t||c[11]!==l?(o=(0,i.jsxs)(ax.B,{gap:"condensed",direction:"horizontal",align:"center",className:aN,children:[t,l]}),c[10]=t,c[11]=l,c[12]=o):o=c[12],c[13]!==b||c[14]!==o?(d=(0,i.jsx)(eO.l.LinkItem,{href:b,className:aL,children:o}),c[13]=b,c[14]=o,c[15]=d):d=c[15],d}:function({compareUrl:e,linesAdded:t,linesDeleted:n,path:r,pathDigest:a,status:l}){return(0,i.jsx)(eO.l.LinkItem,{href:`${e}#diff-${a}`,className:aL,children:(0,i.jsxs)(ax.B,{gap:"condensed",direction:"horizontal",align:"center",className:aN,children:[(0,i.jsx)(aC.E,{status:l}),(0,i.jsxs)("div",{className:"d-flex gap-1 flex-justify-between width-full",children:[(0,i.jsx)("span",{className:aS,children:r}),(t>0||n>0)&&(0,i.jsxs)("div",{className:"d-flex flex-shrink-0 gap-1 flex-nowrap",children:[(0,i.jsx)("div",{className:aj,children:t>0&&(0,i.jsxs)(s.C,{isAddition:!0,children:["+",a_(t)]})}),(0,i.jsx)("div",{className:aD,children:n>0&&(0,i.jsxs)(s.C,{isAddition:!1,children:["-",a_(n)]})})]})]})]})})};function a_(e){return e>999?`${(e/1e3).toFixed(1)}k`:e.toLocaleString()}try{aw.displayName||(aw.displayName="SubmoduleDiff")}catch{}try{aI.displayName||(aI.displayName="SubmodulePath")}catch{}try{aA.displayName||(aA.displayName="SubmoduleCommitChange")}catch{}try{aE.displayName||(aE.displayName="SubmoduleModified")}catch{}try{aR.displayName||(aR.displayName="SubmoduleFileRow")}catch{}let aT=({hasCopilotAccess:e,isBinary:t,isSubmodule:n,path:i,repository:r,status:a})=>!!e&&!t&&!n&&!!i&&"DELETED"!==a&&"REMOVED"!==a&&!!r.id&&!!r.name&&!!r.ownerLogin&&!0,aO=({newCommitOid:e,newTreeEntry:t,oldCommitOid:n,oldTreeEntry:i,path:r,pathDigest:a,repository:s})=>{let l=n&&e?(0,n1.IO9)({repo:s,commitish:n,action:"raw",path:r}):"";return{baseFile:aM({path:i?.path,oid:n,repository:s}),headFile:aM({path:t?.path,oid:e,repository:s}),baseBranchRef:n,id:`#diff-${a}`,type:"file-diff",url:l}},aM=({path:e,oid:t,repository:n})=>e&&t?{type:"file",url:(0,n1.IO9)({repo:n,commitish:t,action:"raw",path:e}),path:e,repoID:n.id,repoName:n.name,repoOwner:n.ownerLogin,ref:t,commitOID:t}:null,a$=(0,r.GV)()?function(e){let t,n=(0,a.c)(8),{isBinary:i,isSubmodule:r,path:s,status:l,repository:o,newCommitOid:d,newTreeEntry:c,oldCommitOid:u,oldTreeEntry:m,pathDigest:f,hasCopilotAccess:h}=e;e:{let e;if(!aT({isBinary:i,isSubmodule:r,path:s,status:l,repository:o,hasCopilotAccess:h})){t=void 0;break e}n[0]!==d||n[1]!==c||n[2]!==u||n[3]!==m||n[4]!==s||n[5]!==f||n[6]!==o?(e=aO({newCommitOid:d,newTreeEntry:c,oldCommitOid:u,oldTreeEntry:m,path:s,pathDigest:f,repository:o}),n[0]=d,n[1]=c,n[2]=u,n[3]=m,n[4]=s,n[5]=f,n[6]=o,n[7]=e):e=n[7],t=e}return t}:function({isBinary:e,isSubmodule:t,path:n,status:i,repository:r,newCommitOid:a,newTreeEntry:s,oldCommitOid:o,oldTreeEntry:d,pathDigest:c,hasCopilotAccess:u}){return(0,l.useMemo)(()=>{if(aT({isBinary:e,isSubmodule:t,path:n,status:i,repository:r,hasCopilotAccess:u}))return aO({newCommitOid:a,newTreeEntry:s,oldCommitOid:o,oldTreeEntry:d,path:n,pathDigest:c,repository:r})},[a,s,o,d,c,r,u,e,t,n,i])},aP="FileReviewThread-module__ReviewThreadContainer--InwxI",aF="FileReviewThread-module__ReviewThreadHeading--oFg3s",aG="FileReviewThread-module__ReviewThreadInnerContainer--jYE3S",aV="FileReviewThread-module__SpinnerWrapper--zQOoj",aH=(0,r.GV)()?function(e){let t,n,r,s,d,u,f,h,g,p,b,x,C,y,L,S,N,j,D,w,I,k,A,E,R,_,T=(0,a.c)(69);if(T[0]!==e){let{fileAnchor:i,filePath:a,thread:l,isFirstThread:o,ghostUser:c,manuallyUpdateCommentsWithThisThreadId:u,...m}=e;t=a,d=l,r=o,n=c,s=m,T[0]=e,T[1]=t,T[2]=n,T[3]=r,T[4]=s,T[5]=d}else t=T[1],n=T[2],r=T[3],s=T[4],d=T[5];let O=(0,l.useRef)(null);T[6]===Symbol.for("react.memo_cache_sentinel")?(u=(0,nO.A)("localStorage"),T[6]=u):u=T[6];let M=u,$=d?.isResolved,[P,F]=(0,l.useState)(""),[G,V]=(0,l.useState)($??!1);T[7]!==$||T[8]!==d.id?(f=()=>{let e=localStorage.getItem(`reviewThreadIsCollapsed_${d.id}`);null!==e?V(JSON.parse(e)):$&&V(!0)},h=[$,d.id],T[7]=$,T[8]=d.id,T[9]=f,T[10]=h):(f=T[9],h=T[10]),(0,l.useEffect)(f,h),T[11]!==G||T[12]!==d.id?(g=()=>{window.requestAnimationFrame(()=>{M.setItem(`reviewThreadIsCollapsed_${d.id}`,JSON.stringify(!G))}),V(aK)},T[11]=G,T[12]=d.id,T[13]=g):g=T[13];let H=g,{sendAnalyticsEvent:U}=(0,tq.s)(),{mutate:K}=(0,nY.H)(t,o.zW);T[14]!==K||T[15]!==U||T[16]!==d?(p=()=>{d&&!d.isResolved&&(K({threadId:d.id},{onError:()=>F("Failed to resolve thread"),onSuccess:()=>{V(!0),M.removeItem(`reviewThreadIsCollapsed_${d.id}`)}}),U("comments.resolve_thread","RESOLVE_CONVERSATION_BUTTON"))},T[14]=K,T[15]=U,T[16]=d,T[17]=p):p=T[17];let B=p,{mutate:q}=(0,n0.i)(t,o.zW);T[18]!==U||T[19]!==d||T[20]!==q?(b=()=>{d&&(q({threadId:d.id},{onError:()=>F("Failed to unresolve thread"),onSuccess:()=>{V(!1),M.removeItem(`reviewThreadIsCollapsed_${d.id}`)}}),U("comments.unresolve_thread","RESOLVE_CONVERSATION_BUTTON"))},T[18]=U,T[19]=d,T[20]=q,T[21]=b):b=T[21];let z=b;if(!d||!(d.commentsData?.comments&&d.commentsData.comments.length>0))return null;let W=d?.commentsData?.comments[0]?.reviewVariantType===ny.hH.Automated?d.commentsData?.comments[0]?.automatedComment:null,X=W&&W.dismissable,Z=W&&W.source===ny.vk.LicenseCompliance,Q=!!d.isResolved;T[22]===Symbol.for("react.memo_cache_sentinel")?(x=(0,n2.M3)(),T[22]=x):x=T[22];let J=x;T[23]!==d.commentsData?.comments?(C=J&&d.commentsData?.comments?.some(aU),T[23]=d.commentsData?.comments,T[24]=C):C=T[24];let Y=C,ee=d.commentsData?.comments[0]?.createdAt,et=d.commentsData?.comments[0]?.author?.login??"Unknown Author",en=`${$?"Unresolve":"Resolve"} comment`;if(ee){let e;T[25]!==ee?(e=(0,n_.C)(new Date(ee)),T[25]=ee,T[26]=e):e=T[26];let t=e;en=`${$?"Unresolve":"Resolve"} ${et}'s comment, ${t}`}T[27]===Symbol.for("react.memo_cache_sentinel")?(y=(0,i.jsx)(nF,{}),T[27]=y):y=T[27],T[28]===Symbol.for("react.memo_cache_sentinel")?(L=(0,v.$)("px-1",aP),T[28]=L):L=T[28];let ei=G?"Expand comment":"Collapse comment",er=G?c.ChevronRightIcon:c.ChevronDownIcon;return T[29]!==H||T[30]!==r||T[31]!==ei||T[32]!==er?(S=(0,i.jsx)(m.K,{"aria-label":ei,icon:er,size:"small",variant:"invisible",onClick:H,"data-is-first-collapse-button":r}),T[29]=H,T[30]=r,T[31]=ei,T[32]=er,T[33]=S):S=T[33],T[34]===Symbol.for("react.memo_cache_sentinel")?(N=(0,i.jsx)("h2",{className:aF,children:"Comment on file"}),T[34]=N):N=T[34],T[35]!==d.positioning?.isOutdated?(j=d.positioning?.isOutdated&&(0,i.jsx)(nM.A,{variant:"secondary",children:"Outdated"}),T[35]=d.positioning?.isOutdated,T[36]=j):j=T[36],T[37]!==Q?(D=Q&&(0,i.jsx)(nM.A,{variant:"secondary",children:"Resolved"}),T[37]=Q,T[38]=D):D=T[38],T[39]!==j||T[40]!==D?(w=(0,i.jsxs)("div",{className:aG,children:[j,D]}),T[39]=j,T[40]=D,T[41]=w):w=T[41],T[42]!==S||T[43]!==w?(I=(0,i.jsxs)("div",{className:L,children:[S,N,w]}),T[42]=S,T[43]=w,T[44]=I):I=T[44],T[45]===Symbol.for("react.memo_cache_sentinel")?(k=(0,i.jsxs)("div",{className:aV,children:[(0,i.jsx)(eZ.A,{}),(0,i.jsx)("p",{children:"Loading comments"})]}),T[45]=k):k=T[45],T[46]!==P?(A=P&&(0,i.jsxs)(n$.A,{variant:"danger",className:"m-2",children:[(0,i.jsx)(c.StopIcon,{className:"mr-2"}),P]}),T[46]=P,T[47]=A):A=T[47],T[48]!==W||T[49]!==X||T[50]!==t||T[51]!==n||T[52]!==B||T[53]!==z||T[54]!==G||T[55]!==Y||T[56]!==$||T[57]!==Q||T[58]!==Z||T[59]!==en||T[60]!==s||T[61]!==d?(E=!G&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(nJ,{lineMarkersKey:o.zW,batchingEnabled:!0,filePath:t,gridCellId:`${t}-file-level-markers`,isInlineComment:!1,thread:d,shouldLimitHeight:!1,...s,ghostUser:n}),Y&&!X&&!Z&&(0,i.jsxs)("div",{className:"d-flex flex-items-center p-2 border-top flex-wrap",children:[(0,i.jsx)(eI.Q,{"aria-label":en,onClick:Q?z:B,className:"mr-2",children:$?"Unresolve comment":"Resolve comment"}),Q&&d.resolvedBy&&(0,i.jsxs)("span",{className:"fgColor-muted f6",children:[(0,i.jsx)("b",{children:d.resolvedBy})," marked this comment as resolved"]})]}),X&&(0,i.jsx)(n7,{automatedComment:W,thread:d,filePath:t,lineMarkersKey:o.zW,setErrorMessage:F,setIsCollapsed:V,safeLocalStorage:M})]}),T[48]=W,T[49]=X,T[50]=t,T[51]=n,T[52]=B,T[53]=z,T[54]=G,T[55]=Y,T[56]=$,T[57]=Q,T[58]=Z,T[59]=en,T[60]=s,T[61]=d,T[62]=E):E=T[62],T[63]!==A||T[64]!==E?(R=(0,i.jsxs)(l.Suspense,{fallback:k,children:[A,E]}),T[63]=A,T[64]=E,T[65]=R):R=T[65],T[66]!==I||T[67]!==R?(_=(0,i.jsx)(nT.t,{fallback:y,children:(0,i.jsxs)("div",{className:"rounded-2 bgColor-default",ref:O,children:[I,R]})}),T[66]=I,T[67]=R,T[68]=_):_=T[68],_}:function({fileAnchor:e,filePath:t,thread:n,isFirstThread:r,ghostUser:a,manuallyUpdateCommentsWithThisThreadId:s,...d}){let u=(0,l.useRef)(null),f=(0,nO.A)("localStorage"),h=n?.isResolved,[g,p]=(0,l.useState)(""),[b,x]=(0,l.useState)(h??!1);(0,l.useEffect)(()=>{let e=localStorage.getItem(`reviewThreadIsCollapsed_${n.id}`);null!==e?x(JSON.parse(e)):h&&x(!0)},[h,n.id]);let{sendAnalyticsEvent:C}=(0,tq.s)(),{mutate:y}=(0,nY.H)(t,o.zW),{mutate:L}=(0,n0.i)(t,o.zW);if(!n||!(n.commentsData?.comments&&n.commentsData.comments.length>0))return null;let S=n?.commentsData?.comments[0]?.reviewVariantType===ny.hH.Automated?n.commentsData?.comments[0]?.automatedComment:null,N=S&&S.dismissable,j=S&&S.source===ny.vk.LicenseCompliance,D=!!n.isResolved,w=(0,n2.M3)()&&n.commentsData?.comments?.some(e=>e.state?.toUpperCase()!=="PENDING"),I=n.commentsData?.comments[0]?.createdAt,k=n.commentsData?.comments[0]?.author?.login??"Unknown Author",A=`${h?"Unresolve":"Resolve"} comment`;if(I){let e=(0,n_.C)(new Date(I));A=`${h?"Unresolve":"Resolve"} ${k}'s comment, ${e}`}return(0,i.jsx)(nT.t,{fallback:(0,i.jsx)(nF,{}),children:(0,i.jsxs)("div",{className:"rounded-2 bgColor-default",ref:u,children:[(0,i.jsxs)("div",{className:(0,v.$)("px-1",aP),children:[(0,i.jsx)(m.K,{"aria-label":b?"Expand comment":"Collapse comment",icon:b?c.ChevronRightIcon:c.ChevronDownIcon,size:"small",variant:"invisible",onClick:()=>{window.requestAnimationFrame(()=>{f.setItem(`reviewThreadIsCollapsed_${n.id}`,JSON.stringify(!b))}),x(e=>!e)},"data-is-first-collapse-button":r}),(0,i.jsx)("h2",{className:aF,children:"Comment on file"}),(0,i.jsxs)("div",{className:aG,children:[n.positioning?.isOutdated&&(0,i.jsx)(nM.A,{variant:"secondary",children:"Outdated"}),D&&(0,i.jsx)(nM.A,{variant:"secondary",children:"Resolved"})]})]}),(0,i.jsxs)(l.Suspense,{fallback:(0,i.jsxs)("div",{className:aV,children:[(0,i.jsx)(eZ.A,{}),(0,i.jsx)("p",{children:"Loading comments"})]}),children:[g&&(0,i.jsxs)(n$.A,{variant:"danger",className:"m-2",children:[(0,i.jsx)(c.StopIcon,{className:"mr-2"}),g]}),!b&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(nJ,{lineMarkersKey:o.zW,batchingEnabled:!0,filePath:t,gridCellId:`${t}-file-level-markers`,isInlineComment:!1,thread:n,shouldLimitHeight:!1,...d,ghostUser:a}),w&&!N&&!j&&(0,i.jsxs)("div",{className:"d-flex flex-items-center p-2 border-top flex-wrap",children:[(0,i.jsx)(eI.Q,{"aria-label":A,onClick:D?()=>{n&&(L({threadId:n.id},{onError:()=>p("Failed to unresolve thread"),onSuccess:()=>{x(!1),f.removeItem(`reviewThreadIsCollapsed_${n.id}`)}}),C("comments.unresolve_thread","RESOLVE_CONVERSATION_BUTTON"))}:()=>{n&&!n.isResolved&&(y({threadId:n.id},{onError:()=>p("Failed to resolve thread"),onSuccess:()=>{x(!0),f.removeItem(`reviewThreadIsCollapsed_${n.id}`)}}),C("comments.resolve_thread","RESOLVE_CONVERSATION_BUTTON"))},className:"mr-2",children:h?"Unresolve comment":"Resolve comment"}),D&&n.resolvedBy&&(0,i.jsxs)("span",{className:"fgColor-muted f6",children:[(0,i.jsx)("b",{children:n.resolvedBy})," marked this comment as resolved"]})]}),N&&(0,i.jsx)(n7,{automatedComment:S,thread:n,filePath:t,lineMarkersKey:o.zW,setErrorMessage:p,setIsCollapsed:x,safeLocalStorage:f})]})]})]})})};function aU(e){return e.state?.toUpperCase()!=="PENDING"}function aK(e){return!e}try{aH.displayName||(aH.displayName="FileReviewThread")}catch{}let aB=(0,r.GV)()?function(e){let t,n,r,s,o,d,c,u=(0,a.c)(19);if(u[0]!==e){let{conversationListThreads:i,filePath:a,manuallyUpdateCommentsWithThisThreadId:l,ghostUser:o,...d}=e;t=i,n=a,r=o,s=d,u[0]=e,u[1]=t,u[2]=n,u[3]=r,u[4]=s}else t=u[1],n=u[2],r=u[3],s=u[4];let m=(0,l.useRef)(null);if(u[5]!==t?(o={containerRef:m,markers:t,disabled:!1,focusInStrategy:"closest"},u[5]=t,u[6]=o):o=u[6],nh(o),u[7]!==t||u[8]!==n||u[9]!==r||u[10]!==s){let e;u[12]!==t.length||u[13]!==n||u[14]!==r||u[15]!==s?(e=(e,a)=>(0,i.jsx)("div",{className:(0,v.$)("mt-1 border rounded-2 color-border-default color-shadow-small",a===t.length-1?"mb-1":"mb-2"),"data-first-marker":0===a,"data-marker-id":`${e.id}`,tabIndex:0,children:(0,i.jsx)(aH,{viewerData:s.viewerData,filePath:n,thread:e,ghostUser:r},e.id)},`review-thread-${e.id}`),u[12]=t.length,u[13]=n,u[14]=r,u[15]=s,u[16]=e):e=u[16],d=t.map(e),u[7]=t,u[8]=n,u[9]=r,u[10]=s,u[11]=d}else d=u[11];return u[17]!==d?(c=(0,i.jsx)("div",{className:"d-flex pt-1 px-1",children:(0,i.jsx)("div",{className:nE,ref:m,children:d})}),u[17]=d,u[18]=c):c=u[18],c}:function({conversationListThreads:e,filePath:t,manuallyUpdateCommentsWithThisThreadId:n,ghostUser:r,...a}){let s=(0,l.useRef)(null);return nh({containerRef:s,markers:e,disabled:!1,focusInStrategy:"closest"}),(0,i.jsx)("div",{className:"d-flex pt-1 px-1",children:(0,i.jsx)("div",{className:nE,ref:s,children:e.map((n,s)=>(0,i.jsx)("div",{className:(0,v.$)("mt-1 border rounded-2 color-border-default color-shadow-small",s===e.length-1?"mb-1":"mb-2"),"data-first-marker":0===s,"data-marker-id":`${n.id}`,tabIndex:0,children:(0,i.jsx)(aH,{viewerData:a.viewerData,filePath:t,thread:n,ghostUser:r},n.id)},`review-thread-${n.id}`))})})};try{aB.displayName||(aB.displayName="FileMarkers")}catch{}let aq=new Set,az="b:0-l:null-r:null";function aW(e){switch(e){case"COMMIT":return"Due to the large number of changes in the selected commit, only one file is being shown at a time.";case"RANGE":return"Due to the large number of changes in the selected commit range, only one file is being shown at a time.";default:return"Due to the large number of changes in this pull request, only one file is being shown at a time."}}let aX=(0,l.forwardRef)((0,r.GV)()?function(e,t){let n,r,d,u,m,f,h,g,b,x,C,y,L,S,N,j,D,w,k,A=(0,a.c)(133),{addFileCommentButtonRef:E,collapsed:R,currentUser:_,diffLines:T,diffManuallyExpanded:O,diffSize:M,helpUrl:$,estimatedDiffHeight:F,fileComments:G,headerStickyOffset:V,hiddenFeatures:H,isAddingFileComment:U,isBinary:K,isSelected:B,isSubmodule:q,isTooBig:z,leftSideContent:W,linesAdded:X,linesChanged:Z,linesDeleted:Q,newTreeEntry:J,newCommitOid:Y,objectId:ee,oldTreeEntry:et,oldCommitOid:en,onToggleCollapse:ei,path:er,pathDigest:ea,pullRequestGlobalRelayId:es,repository:el,richDiffState:eo,rightSideContent:ed,setIsAddingFileComment:ec,hasExpandedAllRanges:eu,expandAllContextLines:em,canExpandOrCollapseLines:ef,status:eh,submodule:eg,truncatedReason:ep,addInjectedContextLines:eb,loadDiff:ev}=e,ex=void 0===F?0:F,eC=void 0===H?aq:H,ey=void 0!==B&&B,eL=q&&!!eg,eS=!eL&&!eo?.showRichDiff,[eN,ej]=(0,l.useState)(O),eD=(0,I.j5)(),{comparisonView:ew}=(0,I.L3)();A[0]!==_.hasCopilotAccess||A[1]!==K||A[2]!==q||A[3]!==Y||A[4]!==J||A[5]!==en||A[6]!==et||A[7]!==er||A[8]!==ea||A[9]!==el||A[10]!==eh?(n={isBinary:K,isSubmodule:q,path:er,status:eh,repository:el,newCommitOid:Y,newTreeEntry:J,oldCommitOid:en,oldTreeEntry:et,pathDigest:ea,hasCopilotAccess:_.hasCopilotAccess},A[0]=_.hasCopilotAccess,A[1]=K,A[2]=q,A[3]=Y,A[4]=J,A[5]=en,A[6]=et,A[7]=er,A[8]=ea,A[9]=el,A[10]=eh,A[11]=n):n=A[11];let eI=a$(n);A[12]!==ev?(r=async()=>{await ev(),ej(!0)},A[12]=ev,A[13]=r):r=A[13];let ek=r,{baseOid:eA,headOid:eE}=(0,I.E4)(),eR=(0,eU.u)("cotd_ui");A[14]===Symbol.for("react.memo_cache_sentinel")?(d=(0,e4.G7)("pr_simple_diffs"),A[14]=d):d=A[14];let e_=d,{effectiveRange:eT}=(0,I.L3)(),{mutate:eO}=t6();A[15]!==ec?(u=()=>{ec(!0)},A[15]=ec,A[16]=u):u=A[16];let eM=u;A[17]!==eM?(m={F0:{startNewComment:eM,diffLineKey:az}},A[17]=eM,A[18]=m):m=A[18];let e$=m;A[19]!==eR||A[20]!==eO||A[21]!==eT||A[22]!==eE||A[23]!==er||A[24]!==ec||A[25]!==eA?(f=e=>{let{onCompleted:t,onError:n,submitBatch:i,text:r}=e;eR?eO(new ReviewCommentFactory({filePath:er,effectiveDiffRange:eT,submitBatch:i,text:r}).fileRequestData(),{onError:n,onSuccess:e=>{t?.(e.thread.id,e.comment.databaseId),ec(!1)}}):eO({text:r,path:er,submitBatch:i,subjectType:o.Wr.File,comparisonEndOid:eE,comparisonStartOid:eA},{onError:n,onSuccess:e=>{t?.(e.thread.id,e.comment.databaseId),ec(!1)}})},A[19]=eR,A[20]=eO,A[21]=eT,A[22]=eE,A[23]=er,A[24]=ec,A[25]=eA,A[26]=f):f=A[26];let eP=f;A[27]!==E||A[28]!==ec?(h=()=>{ec(!1),E?.current?.focus()},A[27]=E,A[28]=ec,A[29]=h):h=A[29];let eF=h,eG=_?.avatarURL??"",eV=_?.splitPreference,eH=_?.login??"",eK=_?.lineSpacing,eq=_?.shouldDisplayComments,ez=_?.shouldDisplayEditOptions,eW=_?.tabSize??4,eX=_?.canComment,eZ=_?.canApplySuggestion;A[30]!==eG||A[31]!==eV||A[32]!==eH||A[33]!==eK||A[34]!==eq||A[35]!==ez||A[36]!==eW||A[37]!==eX||A[38]!==eZ?(g={avatarUrl:eG,diffViewPreference:eV,login:eH,lineSpacingPreference:eK,shouldDisplayComments:eq,shouldDisplayEditOptions:ez,tabSizePreference:eW,viewerCanComment:eX,viewerCanApplySuggestion:eZ},A[30]=eG,A[31]=eV,A[32]=eH,A[33]=eK,A[34]=eq,A[35]=ez,A[36]=eW,A[37]=eX,A[38]=eZ,A[39]=g):g=A[39];let eQ=g,eJ=(0,l.useId)(),e0=`heading-${eJ}`;e:{if("split"===new URLSearchParams(p.cg?.location.search).get("diff")){b=!0;break e}b="split"===_.splitPreference}let e1=b,e2=J?.lineCount??et?.lineCount??0,e3=`diff-${ea}`,e6=`diff-${ea}`;A[40]===Symbol.for("react.memo_cache_sentinel")?(x=(0,v.$)(av.A.diffTargetable,av.A.diff),A[40]=x):x=A[40];let e5=`${ea}_${T.length}`;A[41]!==ex?(C=e_?{contentVisibility:"auto",containIntrinsicSize:`auto ${ex}px`}:void 0,A[41]=ex,A[42]=C):C=A[42];let e7=`${void 0===V?0:V}px`;A[43]!==e7?(y={"--header-sticky-offset":e7},A[43]=e7,A[44]=y):y=A[44];let e8=`#diff-${ea}`,e9=eo?.richDiff?.canToggleRichDiff,te=J?.mode,tt=J?.path,tn=et?.mode,ti=et?.path;A[45]!==R||A[46]!==ei?(L=e=>ei(e,!R),A[45]=R,A[46]=ei,A[47]=L):L=A[47];let tr=eo?.onToggleRichDiff,ta=eo?.showRichDiff;return A[48]!==ef||A[49]!==R||A[50]!==M||A[51]!==em||A[52]!==eu||A[53]!==e0||A[54]!==eC||A[55]!==K||A[56]!==eD||A[57]!==W||A[58]!==X||A[59]!==Z||A[60]!==Q||A[61]!==er||A[62]!==ed||A[63]!==eh||A[64]!==e8||A[65]!==e9||A[66]!==te||A[67]!==tt||A[68]!==tn||A[69]!==ti||A[70]!==L||A[71]!==tr||A[72]!==ta?(S=(0,i.jsx)(s.B,{headingId:e0,hiddenFeatures:eC,areLinesExpanded:eu,canExpandOrCollapseLines:ef,fileLinkHref:e8,isCollapsed:R,isBinary:K,size:M,canToggleRichDiff:e9,linesAdded:X,linesChanged:Z,linesDeleted:Q,newMode:te,newPath:tt,oldMode:tn,oldPath:ti,patchStatus:eh,path:er,onToggleExpandAllLines:em,onToggleFileCollapsed:L,onToggleDiffDisplay:tr,additionalLeftSideContent:W,rightSideContent:ed,showRichDiff:ta,isInSingleFileMode:eD}),A[48]=ef,A[49]=R,A[50]=M,A[51]=em,A[52]=eu,A[53]=e0,A[54]=eC,A[55]=K,A[56]=eD,A[57]=W,A[58]=X,A[59]=Z,A[60]=Q,A[61]=er,A[62]=ed,A[63]=eh,A[64]=e8,A[65]=e9,A[66]=te,A[67]=tt,A[68]=tn,A[69]=ti,A[70]=L,A[71]=tr,A[72]=ta,A[73]=S):S=A[73],A[74]!==y||A[75]!==S?(N=(0,i.jsx)("div",{className:av.A.diffHeaderWrapper,style:y,children:S}),A[74]=y,A[75]=S,A[76]=N):N=A[76],A[77]!==R||A[78]!==eI||A[79]!==T||A[80]!==G||A[81]!==eP||A[82]!==eu||A[83]!==$||A[84]!==U||A[85]!==K||A[86]!==e1||A[87]!==z||A[88]!==Z||A[89]!==eN||A[90]!==Y||A[91]!==J||A[92]!==ee||A[93]!==en||A[94]!==et||A[95]!==eF||A[96]!==ek||A[97]!==er||A[98]!==ea||A[99]!==es||A[100]!==eo||A[101]!==eS||A[102]!==eL||A[103]!==eh||A[104]!==eg||A[105]!==ep||A[106]!==eQ?(j=R?null:(0,i.jsxs)("div",{className:"border position-relative rounded-bottom-2",children:[(0,i.jsxs)(i.Fragment,{children:[G.length>0&&(0,i.jsx)(aB,{conversationListThreads:G,filePath:er}),U&&(0,i.jsx)("div",{className:(0,v.$)("border rounded-2 color-border-default m-1 rounded-2 bgColor-default",av.A.diffAddFileThread),children:(0,i.jsx)(eB,{batchingEnabled:!0,filePath:er,fileLevelComment:!0,isLeftSide:void 0,viewerData:eQ,onAddComment:eP,onClose:eF})})]}),eL&&(0,i.jsx)(aw,{submodule:eg}),eo?.showRichDiff&&(0,i.jsx)(eY,{queryConfig:eo.queryConfig,initialData:eo.richDiff}),eS&&(0,i.jsx)(ag,{hasExpandedAllRanges:eu,copilotChatReference:eI,diffEntryData:{diffLines:T,isBinary:K,isTooBig:z,linesChanged:Z,newTreeEntry:J,newCommitOid:Y,objectId:ee,oldTreeEntry:et,oldCommitOid:en,path:er,pathDigest:ea,status:eh,truncatedReason:ep},baseHelpUrl:$,subjectId:es||"",viewerData:eQ,isSplitView:e1,diffLinesManuallyUnhidden:eN,onHandleLoadDiff:ek})]}),A[77]=R,A[78]=eI,A[79]=T,A[80]=G,A[81]=eP,A[82]=eu,A[83]=$,A[84]=U,A[85]=K,A[86]=e1,A[87]=z,A[88]=Z,A[89]=eN,A[90]=Y,A[91]=J,A[92]=ee,A[93]=en,A[94]=et,A[95]=eF,A[96]=ek,A[97]=er,A[98]=ea,A[99]=es,A[100]=eo,A[101]=eS,A[102]=eL,A[103]=eh,A[104]=eg,A[105]=ep,A[106]=eQ,A[107]=j):j=A[107],A[108]!==e0||A[109]!==ey||A[110]!==t||A[111]!==e6||A[112]!==e5||A[113]!==C||A[114]!==N||A[115]!==j?(D=(0,i.jsxs)("div",{role:"region",ref:t,"aria-labelledby":e0,id:e6,className:x,"data-targeted":ey,style:C,children:[N,j]},e5),A[108]=e0,A[109]=ey,A[110]=t,A[111]=e6,A[112]=e5,A[113]=C,A[114]=N,A[115]=j,A[116]=D):D=A[116],A[117]!==ew||A[118]!==eD?(w=eD&&(0,i.jsxs)("div",{className:av.A.diffFooter,children:[(0,i.jsx)(c.InfoIcon,{size:16,"aria-hidden":"true"}),(0,i.jsx)("span",{className:"text-center",children:aW(ew)})]}),A[117]=ew,A[118]=eD,A[119]=w):w=A[119],A[120]!==eb||A[121]!==T||A[122]!==e2||A[123]!==eC||A[124]!==e1||A[125]!==J||A[126]!==et||A[127]!==er||A[128]!==e$||A[129]!==e3||A[130]!==D||A[131]!==w?(k=(0,i.jsxs)(P,{addInjectedContextLines:eb,diffAnchor:e3,diffLines:T,fileLineCount:e2,path:er,startNewConversationForLineOrFileMap:e$,hiddenFeatures:eC,isSplitView:e1,oldTreeEntry:et,newTreeEntry:J,children:[D,w]}),A[120]=eb,A[121]=T,A[122]=e2,A[123]=eC,A[124]=e1,A[125]=J,A[126]=et,A[127]=er,A[128]=e$,A[129]=e3,A[130]=D,A[131]=w,A[132]=k):k=A[132],k}:function({addFileCommentButtonRef:e,collapsed:t,currentUser:n,diffLines:r,diffManuallyExpanded:a,diffSize:d,helpUrl:u,estimatedDiffHeight:m=0,fileComments:f,headerStickyOffset:h=0,hiddenFeatures:g=aq,isAddingFileComment:b,isBinary:x,isSelected:C=!1,isSubmodule:y,isTooBig:L,leftSideContent:S,linesAdded:N,linesChanged:j,linesDeleted:D,newTreeEntry:w,newCommitOid:k,objectId:A,oldTreeEntry:E,oldCommitOid:R,onToggleCollapse:_,path:T,pathDigest:O,pullRequestGlobalRelayId:M,repository:$,richDiffState:F,rightSideContent:G,setIsAddingFileComment:V,hasExpandedAllRanges:H,expandAllContextLines:U,canExpandOrCollapseLines:K,status:B,submodule:q,truncatedReason:z,addInjectedContextLines:W,loadDiff:X},Z){let Q=y&&!!q,J=!Q&&!F?.showRichDiff,[Y,ee]=(0,l.useState)(a),et=(0,I.j5)(),{comparisonView:en}=(0,I.L3)(),ei=a$({isBinary:x,isSubmodule:y,path:T,status:B,repository:$,newCommitOid:k,newTreeEntry:w,oldCommitOid:R,oldTreeEntry:E,pathDigest:O,hasCopilotAccess:n.hasCopilotAccess}),er=async()=>{await X(),ee(!0)},{baseOid:ea,headOid:es}=(0,I.E4)(),el=(0,eU.u)("cotd_ui"),eo=(0,e4.G7)("pr_simple_diffs"),{effectiveRange:ed}=(0,I.L3)(),{mutate:ec}=t6(),eu=(0,l.useCallback)(()=>{V(!0)},[V]),em=(0,l.useMemo)(()=>({F0:{startNewComment:eu,diffLineKey:az}}),[eu]),ef=(0,l.useMemo)(()=>({avatarUrl:n?.avatarURL??"",diffViewPreference:n?.splitPreference,login:n?.login??"",lineSpacingPreference:n?.lineSpacing,shouldDisplayComments:n?.shouldDisplayComments,shouldDisplayEditOptions:n?.shouldDisplayEditOptions,tabSizePreference:n?.tabSize??4,viewerCanComment:n?.canComment,viewerCanApplySuggestion:n?.canApplySuggestion}),[n.avatarURL,n.canApplySuggestion,n.canComment,n.lineSpacing,n.login,n.shouldDisplayComments,n.shouldDisplayEditOptions,n.splitPreference,n.tabSize]),eh=(0,l.useId)(),eg=`heading-${eh}`,ep=(0,l.useMemo)(()=>"split"===new URLSearchParams(p.cg?.location.search).get("diff")||"split"===n.splitPreference,[n.splitPreference]),eb=w?.lineCount??E?.lineCount??0;return(0,i.jsxs)(P,{addInjectedContextLines:W,diffAnchor:`diff-${O}`,diffLines:r,fileLineCount:eb,path:T,startNewConversationForLineOrFileMap:em,hiddenFeatures:g,isSplitView:ep,oldTreeEntry:E,newTreeEntry:w,children:[(0,i.jsxs)("div",{role:"region",ref:Z,"aria-labelledby":eg,id:`diff-${O}`,className:(0,v.$)(av.A.diffTargetable,av.A.diff),"data-targeted":C,style:eo?{contentVisibility:"auto",containIntrinsicSize:`auto ${m}px`}:void 0,children:[(0,i.jsx)("div",{className:av.A.diffHeaderWrapper,style:{"--header-sticky-offset":`${h}px`},children:(0,i.jsx)(s.B,{headingId:eg,hiddenFeatures:g,areLinesExpanded:H,canExpandOrCollapseLines:K,fileLinkHref:`#diff-${O}`,isCollapsed:t,isBinary:x,size:d,canToggleRichDiff:F?.richDiff?.canToggleRichDiff,linesAdded:N,linesChanged:j,linesDeleted:D,newMode:w?.mode,newPath:w?.path,oldMode:E?.mode,oldPath:E?.path,patchStatus:B,path:T,onToggleExpandAllLines:U,onToggleFileCollapsed:e=>_(e,!t),onToggleDiffDisplay:F?.onToggleRichDiff,additionalLeftSideContent:S,rightSideContent:G,showRichDiff:F?.showRichDiff,isInSingleFileMode:et})}),t?null:(0,i.jsxs)("div",{className:"border position-relative rounded-bottom-2",children:[(0,i.jsxs)(i.Fragment,{children:[f.length>0&&(0,i.jsx)(aB,{conversationListThreads:f,filePath:T}),b&&(0,i.jsx)("div",{className:(0,v.$)("border rounded-2 color-border-default m-1 rounded-2 bgColor-default",av.A.diffAddFileThread),children:(0,i.jsx)(eB,{batchingEnabled:!0,filePath:T,fileLevelComment:!0,isLeftSide:void 0,viewerData:ef,onAddComment:({onCompleted:e,onError:t,submitBatch:n,text:i})=>{el?ec(new ReviewCommentFactory({filePath:T,effectiveDiffRange:ed,submitBatch:n,text:i}).fileRequestData(),{onError:t,onSuccess:t=>{e?.(t.thread.id,t.comment.databaseId),V(!1)}}):ec({text:i,path:T,submitBatch:n,subjectType:o.Wr.File,comparisonEndOid:es,comparisonStartOid:ea},{onError:t,onSuccess:t=>{e?.(t.thread.id,t.comment.databaseId),V(!1)}})},onClose:()=>{V(!1),e?.current?.focus()}})})]}),Q&&(0,i.jsx)(aw,{submodule:q}),F?.showRichDiff&&(0,i.jsx)(eY,{queryConfig:F.queryConfig,initialData:F.richDiff}),J&&(0,i.jsx)(ag,{hasExpandedAllRanges:H,copilotChatReference:ei,diffEntryData:{diffLines:r,isBinary:x,isTooBig:L,linesChanged:j,newTreeEntry:w,newCommitOid:k,objectId:A,oldTreeEntry:E,oldCommitOid:R,path:T,pathDigest:O,status:B,truncatedReason:z},baseHelpUrl:u,subjectId:M||"",viewerData:ef,isSplitView:ep,diffLinesManuallyUnhidden:Y,onHandleLoadDiff:er})]})]},`${O}_${r.length}`),et&&(0,i.jsxs)("div",{className:av.A.diffFooter,children:[(0,i.jsx)(c.InfoIcon,{size:16,"aria-hidden":"true"}),(0,i.jsx)("span",{className:"text-center",children:aW(en)})]})]})}),aZ=(0,r.GV)()?function(e){let t,n,r,o,d,u=(0,a.c)(24),{path:m,pathDigest:f,linesAdded:h,linesChanged:g,linesDeleted:p,oldTreeEntry:b,newTreeEntry:x,status:C}=e,y=(0,l.useId)(),L=`heading-${y}`,[S,N]=(0,l.useState)(!1),j=`diff-${f}`;u[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,v.$)(av.A.diffTargetable,av.A.diff),u[0]=t):t=u[0];let D=`${f}_error`,w=x?.mode,I=x?.path,k=b?.mode,A=b?.path;return u[1]!==S?(n=()=>N(!S),u[1]=S,u[2]=n):n=u[2],u[3]!==L||u[4]!==S||u[5]!==h||u[6]!==g||u[7]!==p||u[8]!==m||u[9]!==C||u[10]!==w||u[11]!==I||u[12]!==k||u[13]!==A||u[14]!==n?(r=(0,i.jsx)("div",{className:av.A.diffHeaderWrapper,children:(0,i.jsx)(s.B,{headingId:L,isCollapsed:S,isBinary:!1,linesAdded:h,linesChanged:g,linesDeleted:p,newMode:w,newPath:I,oldMode:k,oldPath:A,patchStatus:C,path:m,onToggleFileCollapsed:n})}),u[3]=L,u[4]=S,u[5]=h,u[6]=g,u[7]=p,u[8]=m,u[9]=C,u[10]=w,u[11]=I,u[12]=k,u[13]=A,u[14]=n,u[15]=r):r=u[15],u[16]!==S?(o=!S&&(0,i.jsx)("div",{className:"border position-relative rounded-bottom-2",children:(0,i.jsxs)(nP.E,{children:[(0,i.jsx)(nP.E.Visual,{children:(0,i.jsx)(c.AlertIcon,{size:"medium",className:"fgColor-muted"})}),(0,i.jsx)(nP.E.Heading,{as:"h4",children:"There was an issue loading this file"}),(0,i.jsxs)(nP.E.Description,{children:[" ","Try refreshing the page or if the problem persists"," ",(0,i.jsx)("a",{className:"fgColor-muted",href:"https://support.github.com/",children:(0,i.jsx)("u",{children:"contact support"})}),"."]})]})}),u[16]=S,u[17]=o):o=u[17],u[18]!==L||u[19]!==j||u[20]!==o||u[21]!==D||u[22]!==r?(d=(0,i.jsxs)("div",{role:"region","aria-labelledby":L,id:j,className:t,children:[r,o]},D),u[18]=L,u[19]=j,u[20]=o,u[21]=D,u[22]=r,u[23]=d):d=u[23],d}:function({path:e,pathDigest:t,linesAdded:n,linesChanged:r,linesDeleted:a,oldTreeEntry:o,newTreeEntry:d,status:u}){let m=(0,l.useId)(),f=`heading-${m}`,[h,g]=(0,l.useState)(!1);return(0,i.jsxs)("div",{role:"region","aria-labelledby":f,id:`diff-${t}`,className:(0,v.$)(av.A.diffTargetable,av.A.diff),children:[(0,i.jsx)("div",{className:av.A.diffHeaderWrapper,children:(0,i.jsx)(s.B,{headingId:f,isCollapsed:h,isBinary:!1,linesAdded:n,linesChanged:r,linesDeleted:a,newMode:d?.mode,newPath:d?.path,oldMode:o?.mode,oldPath:o?.path,patchStatus:u,path:e,onToggleFileCollapsed:()=>g(!h)})}),!h&&(0,i.jsx)("div",{className:"border position-relative rounded-bottom-2",children:(0,i.jsxs)(nP.E,{children:[(0,i.jsx)(nP.E.Visual,{children:(0,i.jsx)(c.AlertIcon,{size:"medium",className:"fgColor-muted"})}),(0,i.jsx)(nP.E.Heading,{as:"h4",children:"There was an issue loading this file"}),(0,i.jsxs)(nP.E.Description,{children:[" ","Try refreshing the page or if the problem persists"," ",(0,i.jsx)("a",{className:"fgColor-muted",href:"https://support.github.com/",children:(0,i.jsx)("u",{children:"contact support"})}),"."]})]})})]},`${t}_error`)},aQ=(0,l.memo)(aX);try{aX.displayName||(aX.displayName="DiffUnmemoized")}catch{}try{aZ.displayName||(aZ.displayName="DiffErrorFallback")}catch{}try{aQ.displayName||(aQ.displayName="Diff")}catch{}},82603:(e,t,n)=>{n.d(t,{dG:()=>u,hG:()=>h,o5:()=>m});var i=n(68273),r=n(21728),a=n(96540),s=n(97286),l=n(65510),o=n(96379),d=n(20622);function c(e){return{queryKey:[d.uT.codeowners,e],queryFn:async()=>{let t=`${e}/page_data/${d.uT.codeowners}`,n=await (0,o.QJ)(t);if(!n.ok)throw Error(`HTTP ${n.status}`);return await n.json()},staleTime:1/0}}let u=(0,i.Z6)()?function(e){let t,n,i=(0,r.c)(6),{basePath:a,initialData:l}=e;i[0]!==a?(t=c(a),i[0]=a,i[1]=t):t=i[1];let{queryFn:o,queryKey:d}=t;return i[2]!==l||i[3]!==o||i[4]!==d?(n={queryKey:d,queryFn:o,initialData:l,staleTime:1/0},i[2]=l,i[3]=o,i[4]=d,i[5]=n):n=i[5],(0,s.I)(n)}:function({basePath:e,initialData:t}){let{queryFn:n,queryKey:i}=c(e);return(0,s.I)({queryKey:i,queryFn:n,initialData:t,staleTime:1/0})},m=(0,i.Z6)()?function(e){let t,n,i,a=(0,r.c)(8),{basePath:s,diffPath:o}=e;a[0]!==s?(t=c(s),a[0]=s,a[1]=t):t=a[1];let{queryFn:d,queryKey:u}=t;a[2]!==o?(n=e=>h({codeownersData:e,diffPath:o}),a[2]=o,a[3]=n):n=a[3];let m=n;return a[4]!==d||a[5]!==u||a[6]!==m?(i={queryKey:u,queryFn:d,staleTime:1/0,select:m},a[4]=d,a[5]=u,a[6]=m,a[7]=i):i=a[7],(0,l.U)(i)}:function({basePath:e,diffPath:t}){let{queryFn:n,queryKey:i}=c(e);return(0,l.U)({queryKey:i,queryFn:n,staleTime:1/0,select:(0,a.useCallback)(e=>h({codeownersData:e,diffPath:t}),[t])})},f={isOwnedByViewer:!1,owners:[],ruleLineNumber:void 0,ruleUrl:void 0};function h({diffPath:e,codeownersData:t}){if(!t)return f;let n=t.ownershipByPath[e];return n?{isOwnedByViewer:n.isOwnedByViewer,owners:n.owners||[],ruleLineNumber:n.ruleLineNumber,ruleUrl:n.ruleUrl}:f}},85933:(e,t,n)=>{function i(){return!!document.querySelector('react-app[data-lazy="true"]')}function r(){return!!document.querySelector('react-app[data-alternate="true"]')}function a(){return!!document.querySelector("header.AppHeader")}function s(){return performance.getEntriesByType("resource").some(e=>"fetch"===e.initiatorType&&e.name.includes("_graphql?"))}function l(){return performance.getEntriesByType("resource").some(e=>"script"===e.initiatorType)}n.d(t,{Dk:()=>a,NT:()=>c,X:()=>d,_:()=>i,aE:()=>s,u$:()=>r,xF:()=>l}),n(69599);let o=null;function d(){return o}function c(e){o=e}},86909:(e,t,n)=>{n.d(t,{YH:()=>j,Gt:()=>N,Vv:()=>A});var i,r=n(74848),a=n(68273),s=n(21728),l=n(77430),o=n(73017),d=n(38621),c=n(26108),u=n(98552),m=n(69497),f=n(21373),h=n(34164),g=n(48505);let p="Annotation-module__annotation--KlX5M",b="Annotation-module__annotationSource--fZyli",v="Annotation-module__annotationMessage--gFM9M",x="Annotation-module__inlineReviewThreadHeading--Qj9j8";var C=n(79036),y=n(96540),L=n(82075),S=n(71315);let N={[g.UZ.Failure]:(0,r.jsx)(d.StopIcon,{className:"fgColor-danger mr-2"}),[g.UZ.Warning]:(0,r.jsx)(d.AlertIcon,{className:"fgColor-attention mr-2"}),[g.UZ.Notice]:(0,r.jsx)(d.InfoIcon,{className:"fgColor-muted mr-2"})},j=(0,a.GV)()?function(e){let t,n,i,a,g,x,y,L=(0,s.c)(31),{annotation:S,inSidePanel:N}=e,j=N?"h3":"h2",{isCollapsed:D,handleToggleCollapsed:k}=A(S),E=C.GF[S.annotationLevel];return L[0]!==E.borderColor?(t=(0,h.$)("p-1 bgColor-default",E.borderColor,p),L[0]=E.borderColor,L[1]=t):t=L[1],L[2]!==k||L[3]!==N||L[4]!==D?(n=!N&&(0,r.jsx)(c.K,{"aria-label":D?"Expand annotation":"Collapse annotation",icon:D?d.ChevronRightIcon:d.ChevronDownIcon,size:"small",variant:"invisible",onClick:k}),L[2]=k,L[3]=N,L[4]=D,L[5]=n):n=L[5],L[6]!==S||L[7]!==N?(i=!N&&(0,r.jsx)(w,{annotation:S}),L[6]=S,L[7]=N,L[8]=i):i=L[8],L[9]!==S||L[10]!==N?(a=N&&(0,r.jsx)(I,{annotation:S}),L[9]=S,L[10]=N,L[11]=a):a=L[11],L[12]!==n||L[13]!==i||L[14]!==a?(g=(0,r.jsxs)("div",{className:"d-flex flex-items-center",children:[n,i,a]}),L[12]=n,L[13]=i,L[14]=a,L[15]=g):g=L[15],L[16]!==j||L[17]!==S.annotationLevel||L[18]!==S.appAvatarAltText||L[19]!==S.appAvatarUrl||L[20]!==S.checkRun||L[21]!==S.checkSuiteName||L[22]!==S.message||L[23]!==S.title||L[24]!==N||L[25]!==D?(x=(!D||N)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"ml-4 mt-2",children:S.title&&(0,r.jsx)(u.A,{weight:"semibold",size:"medium",className:C.GF[S.annotationLevel].primaryColorClass,children:S.title})}),(0,r.jsxs)(j,{className:"sr-only",children:[C.GF[S.annotationLevel].ariaLabel,": ",S.title]}),(0,r.jsx)("div",{className:"mb-3 mt-1 ml-4",children:S.message&&(0,r.jsx)(o.$6,{html:S.message,className:v})}),(0,r.jsxs)("div",{className:"d-flex flex-items-center flex-justify-between ml-4 pr-2 pb-2",children:[(0,r.jsxs)("div",{className:b,children:[(0,r.jsx)(l.r,{src:S.appAvatarUrl,alt:S.appAvatarAltText}),(0,r.jsxs)(m.A,{className:"ml-2",maxWidth:"300px",inline:!0,title:`${S.checkSuiteName} / ${S.checkRun.name}`,children:[(0,r.jsx)(u.A,{weight:"semibold",size:"small",children:S.checkSuiteName})," ","/ ",(0,r.jsx)(u.A,{size:"small",children:S.checkRun.name})]})]}),S.checkRun.detailsUrl&&(0,r.jsx)(f.Q,{as:"a",href:S.checkRun.detailsUrl,size:"small",children:"View details"})]})]}),L[16]=j,L[17]=S.annotationLevel,L[18]=S.appAvatarAltText,L[19]=S.appAvatarUrl,L[20]=S.checkRun,L[21]=S.checkSuiteName,L[22]=S.message,L[23]=S.title,L[24]=N,L[25]=D,L[26]=x):x=L[26],L[27]!==t||L[28]!==g||L[29]!==x?(y=(0,r.jsxs)("div",{className:t,children:[g,x]}),L[27]=t,L[28]=g,L[29]=x,L[30]=y):y=L[30],y}:function({annotation:e,inSidePanel:t}){let n=(0,y.useMemo)(()=>t?"h3":"h2",[t]),{isCollapsed:i,handleToggleCollapsed:a}=A(e);return(0,r.jsxs)("div",{className:(0,h.$)("p-1 bgColor-default",C.GF[e.annotationLevel].borderColor,p),children:[(0,r.jsxs)("div",{className:"d-flex flex-items-center",children:[!t&&(0,r.jsx)(c.K,{"aria-label":i?"Expand annotation":"Collapse annotation",icon:i?d.ChevronRightIcon:d.ChevronDownIcon,size:"small",variant:"invisible",onClick:a}),!t&&(0,r.jsx)(w,{annotation:e}),t&&(0,r.jsx)(I,{annotation:e})]}),(!i||t)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"ml-4 mt-2",children:e.title&&(0,r.jsx)(u.A,{weight:"semibold",size:"medium",className:C.GF[e.annotationLevel].primaryColorClass,children:e.title})}),(0,r.jsxs)(n,{className:"sr-only",children:[C.GF[e.annotationLevel].ariaLabel,": ",e.title]}),(0,r.jsx)("div",{className:"mb-3 mt-1 ml-4",children:e.message&&(0,r.jsx)(o.$6,{html:e.message,className:v})}),(0,r.jsxs)("div",{className:"d-flex flex-items-center flex-justify-between ml-4 pr-2 pb-2",children:[(0,r.jsxs)("div",{className:b,children:[(0,r.jsx)(l.r,{src:e.appAvatarUrl,alt:e.appAvatarAltText}),(0,r.jsxs)(m.A,{className:"ml-2",maxWidth:"300px",inline:!0,title:`${e.checkSuiteName} / ${e.checkRun.name}`,children:[(0,r.jsx)(u.A,{weight:"semibold",size:"small",children:e.checkSuiteName})," ","/ ",(0,r.jsx)(u.A,{size:"small",children:e.checkRun.name})]})]}),e.checkRun.detailsUrl&&(0,r.jsx)(f.Q,{as:"a",href:e.checkRun.detailsUrl,size:"small",children:"View details"})]})]})]})},D=(0,a.GV)()?function(e){let t,n=(0,s.c)(2),{children:i}=e;return n[0]!==i?(t=(0,r.jsx)("span",{className:"text-semibold fgColor-default",children:i}),n[0]=i,n[1]=t):t=n[1],t}:function({children:e}){return(0,r.jsx)("span",{className:"text-semibold fgColor-default",children:e})},w=(0,a.GV)()?function(e){let t,n,i=(0,s.c)(6),{annotation:a}=e,l=N[a.annotationLevel],o=C.GF[a.annotationLevel];return i[0]!==a.endLine?(t=(0,r.jsxs)(D,{children:["R",a.endLine]}),i[0]=a.endLine,i[1]=t):t=i[1],i[2]!==l||i[3]!==o.ariaLabel||i[4]!==t?(n=(0,r.jsxs)("h2",{className:x,children:[l,o.ariaLabel," on line"," ",t]}),i[2]=l,i[3]=o.ariaLabel,i[4]=t,i[5]=n):n=i[5],n}:function({annotation:e}){return(0,r.jsxs)("h2",{className:x,children:[N[e.annotationLevel],C.GF[e.annotationLevel].ariaLabel," on line"," ",(0,r.jsxs)(D,{children:["R",e.endLine]})]})},I=(0,a.GV)()?function(e){let t,n,i=(0,s.c)(3),{annotation:a}=e;i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,h.$)(x,"ml-4","pt-1","pl-0"),i[0]=t):t=i[0];let l=C.GF[a.annotationLevel];return i[1]!==l.ariaLabel?(n=(0,r.jsx)("div",{className:t,children:(0,r.jsx)(D,{children:l.ariaLabel})}),i[1]=l.ariaLabel,i[2]=n):n=i[2],n}:function({annotation:e}){return(0,r.jsx)("div",{className:(0,h.$)(x,"ml-4","pt-1","pl-0"),children:(0,r.jsx)(D,{children:C.GF[e.annotationLevel].ariaLabel})})};function k(e){return`AnnotationIsCollapsed_${e.path}_${e.endLine}_${e.annotationLevel}_${e.title}`}let A=(0,a.GV)()?function(e){let t,n,i,r,a,l=(0,s.c)(10);l[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,L.A)("localStorage"),l[0]=t):t=l[0];let o=t,[d,c]=(0,y.useState)(!1);l[1]!==e?(n=()=>{let t=localStorage.getItem(k(e));null!==t&&c(JSON.parse(t))},i=[e],l[1]=e,l[2]=n,l[3]=i):(n=l[2],i=l[3]),(0,y.useEffect)(n,i),l[4]!==e||l[5]!==d?(r=()=>{S.cg?.requestAnimationFrame(()=>{o.setItem(k(e),JSON.stringify(!d))}),c(E)},l[4]=e,l[5]=d,l[6]=r):r=l[6];let u=r;return l[7]!==u||l[8]!==d?(a={isCollapsed:d,handleToggleCollapsed:u},l[7]=u,l[8]=d,l[9]=a):a=l[9],a}:function(e){let t=(0,L.A)("localStorage"),[n,i]=(0,y.useState)(!1);return(0,y.useEffect)(()=>{let t=localStorage.getItem(k(e));null!==t&&i(JSON.parse(t))},[e]),{isCollapsed:n,handleToggleCollapsed:()=>{S.cg?.requestAnimationFrame(()=>{t.setItem(k(e),JSON.stringify(!n))}),i(e=>!e)}}};function E(e){return!e}try{j.displayName||(j.displayName="Annotation")}catch{}try{(i=AnnotationHeadingTag).displayName||(i.displayName="AnnotationHeadingTag")}catch{}try{D.displayName||(D.displayName="Emphasis")}catch{}try{w.displayName||(w.displayName="AnnotationBanner")}catch{}try{I.displayName||(I.displayName="SidePanelAnnotationBanner")}catch{}},88008:(e,t,n)=>{n.d(t,{CE:()=>a,Ol:()=>s,hW:()=>l});var i=n(95800);function r(e,t){return`${e}-${t}-active-batch-suggestions`}function a(e,t,n){let a=r(e,t);(0,i.SO)(a,JSON.stringify(n))}function s(e,t){let n=r(e,t),a=(0,i.Gq)(n);if(!a)return[];try{let e=JSON.parse(a);return Array.isArray(e)?e:[]}catch{return[]}}function l(e,t){let n=r(e,t);(0,i.Ai)(n)}},93642:(e,t,n)=>{function i(e,t){for(let n of function e(t,n=[]){var i,a;let s;if(""===t)return n;let l=t.match(r());if(!l)return n;let o=l.groups.fence;if(!o)return n;let d=o.includes("~")?"~":"`",c=t.match((s=r([i=d],a=o.length),RegExp(`${s.source}(?:\r?
)(?<suggestion>.*?)(?:\r?
)^ {0,3}${i}{${a},}[ 	]*$`,"ms")));if(!c)return n;let u=0,m=l.groups.indent;""!==m&&(u=m.length);let f=c.groups.suggestion;if(u>0){let e=RegExp(`^ {0,${u}}`,"m");f=f.replace(e,"")}return n.push(f),e(t.slice(c.index+c[0].length),n)}(e))if(n===t)return{isValid:!1,errorMessage:"Suggested change cannot be the same as the original line"};return{isValid:!0,errorMessage:""}}function r(e=["`","~"],t){let n=t?`{${t}}`:"{3,}",i=e.map(e=>`${e}${n}`);return RegExp(`^(?<indent> {0,3})(?<fence>${i.join("|")})suggestion[ 	]*$`,"m")}n.d(t,{u:()=>i})},97695:(e,t,n)=>{n.d(t,{H:()=>m});var i=n(68273),r=n(21728),a=n(48845),s=n(20622),l=n(97665),o=n(94747),d=n(69510),c=n(27011),u=n(21067);let m=(0,i.Z6)()?function(e,t){let n,i,m,f,h=(0,r.c)(12),g=(0,c.Kp)();h[0]===Symbol.for("react.memo_cache_sentinel")?(n=(0,u.cj)(),h[0]=n):n=h[0];let p=n,b=`${g}/page_data/${s.uT.resolveThread}`,v=(0,l.jE)(),{updateThread:x}=(0,c.an)();return h[1]!==b?(i=async e=>{let{threadId:t}=e,n=await (0,a.q$)(b,{method:"POST",body:{threadId:t}});(0,a.R)(n)},h[1]=b,h[2]=i):i=h[2],h[3]!==g||h[4]!==e||h[5]!==t||h[6]!==v||h[7]!==x?(m=(n,i)=>(x(Number(i.threadId),e,t,e=>{if(e)return{...e,isResolved:!0,resolvedBy:p}}),v.invalidateQueries({queryKey:(0,d.XG)(g)})),h[3]=g,h[4]=e,h[5]=t,h[6]=v,h[7]=x,h[8]=m):m=h[8],h[9]!==i||h[10]!==m?(f={mutationFn:i,onSuccess:m},h[9]=i,h[10]=m,h[11]=f):f=h[11],(0,o.n)(f)}:function(e,t){let n=(0,c.Kp)(),i=(0,u.cj)(),r=`${n}/page_data/${s.uT.resolveThread}`,m=(0,l.jE)(),{updateThread:f}=(0,c.an)();return(0,o.n)({mutationFn:async({threadId:e})=>{let t=await (0,a.q$)(r,{method:"POST",body:{threadId:e}});(0,a.R)(t)},onSuccess:(r,a)=>(f(Number(a.threadId),e,t,e=>{if(e)return{...e,isResolved:!0,resolvedBy:i}}),m.invalidateQueries({queryKey:(0,d.XG)(n)}))})}}}]);
//# sourceMappingURL=82590-21be61fad21d.js.map